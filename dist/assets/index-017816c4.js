/* empty css               */function GG(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const f=Object.getOwnPropertyDescriptor(n,o);f&&Object.defineProperty(e,o,f.get?f:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function n(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hF={exports:{}},Sw={},dF={exports:{}},Vn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av=Symbol.for("react.element"),XG=Symbol.for("react.portal"),qG=Symbol.for("react.fragment"),YG=Symbol.for("react.strict_mode"),ZG=Symbol.for("react.profiler"),KG=Symbol.for("react.provider"),JG=Symbol.for("react.context"),QG=Symbol.for("react.forward_ref"),e7=Symbol.for("react.suspense"),t7=Symbol.for("react.memo"),r7=Symbol.for("react.lazy"),VO=Symbol.iterator;function n7(e){return e===null||typeof e!="object"?null:(e=VO&&e[VO]||e["@@iterator"],typeof e=="function"?e:null)}var fF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pF=Object.assign,mF={};function eg(e,t,r){this.props=e,this.context=t,this.refs=mF,this.updater=r||fF}eg.prototype.isReactComponent={};eg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gF(){}gF.prototype=eg.prototype;function rI(e,t,r){this.props=e,this.context=t,this.refs=mF,this.updater=r||fF}var nI=rI.prototype=new gF;nI.constructor=rI;pF(nI,eg.prototype);nI.isPureReactComponent=!0;var HO=Array.isArray,yF=Object.prototype.hasOwnProperty,iI={current:null},xF={key:!0,ref:!0,__self:!0,__source:!0};function vF(e,t,r){var n,o={},f=null,y=null;if(t!=null)for(n in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(f=""+t.key),t)yF.call(t,n)&&!xF.hasOwnProperty(n)&&(o[n]=t[n]);var s=arguments.length-2;if(s===1)o.children=r;else if(1<s){for(var k=Array(s),I=0;I<s;I++)k[I]=arguments[I+2];o.children=k}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)o[n]===void 0&&(o[n]=s[n]);return{$$typeof:Av,type:e,key:f,ref:y,props:o,_owner:iI.current}}function i7(e,t){return{$$typeof:Av,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Av}function s7(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var WO=/\/+/g;function OC(e,t){return typeof e=="object"&&e!==null&&e.key!=null?s7(""+e.key):t.toString(36)}function f_(e,t,r,n,o){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Av:case XG:y=!0}}if(y)return y=e,o=o(y),e=n===""?"."+OC(y,0):n,HO(o)?(r="",e!=null&&(r=e.replace(WO,"$&/")+"/"),f_(o,t,r,"",function(I){return I})):o!=null&&(sI(o)&&(o=i7(o,r+(!o.key||y&&y.key===o.key?"":(""+o.key).replace(WO,"$&/")+"/")+e)),t.push(o)),1;if(y=0,n=n===""?".":n+":",HO(e))for(var s=0;s<e.length;s++){f=e[s];var k=n+OC(f,s);y+=f_(f,t,r,k,o)}else if(k=n7(e),typeof k=="function")for(e=k.call(e),s=0;!(f=e.next()).done;)f=f.value,k=n+OC(f,s++),y+=f_(f,t,r,k,o);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function bb(e,t,r){if(e==null)return e;var n=[],o=0;return f_(e,n,"","",function(f){return t.call(r,f,o++)}),n}function o7(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zo={current:null},p_={transition:null},a7={ReactCurrentDispatcher:Zo,ReactCurrentBatchConfig:p_,ReactCurrentOwner:iI};Vn.Children={map:bb,forEach:function(e,t,r){bb(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bb(e,function(){t++}),t},toArray:function(e){return bb(e,function(t){return t})||[]},only:function(e){if(!sI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vn.Component=eg;Vn.Fragment=qG;Vn.Profiler=ZG;Vn.PureComponent=rI;Vn.StrictMode=YG;Vn.Suspense=e7;Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a7;Vn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=pF({},e.props),o=e.key,f=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,y=iI.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(k in t)yF.call(t,k)&&!xF.hasOwnProperty(k)&&(n[k]=t[k]===void 0&&s!==void 0?s[k]:t[k])}var k=arguments.length-2;if(k===1)n.children=r;else if(1<k){s=Array(k);for(var I=0;I<k;I++)s[I]=arguments[I+2];n.children=s}return{$$typeof:Av,type:e.type,key:o,ref:f,props:n,_owner:y}};Vn.createContext=function(e){return e={$$typeof:JG,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KG,_context:e},e.Consumer=e};Vn.createElement=vF;Vn.createFactory=function(e){var t=vF.bind(null,e);return t.type=e,t};Vn.createRef=function(){return{current:null}};Vn.forwardRef=function(e){return{$$typeof:QG,render:e}};Vn.isValidElement=sI;Vn.lazy=function(e){return{$$typeof:r7,_payload:{_status:-1,_result:e},_init:o7}};Vn.memo=function(e,t){return{$$typeof:t7,type:e,compare:t===void 0?null:t}};Vn.startTransition=function(e){var t=p_.transition;p_.transition={};try{e()}finally{p_.transition=t}};Vn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Vn.useCallback=function(e,t){return Zo.current.useCallback(e,t)};Vn.useContext=function(e){return Zo.current.useContext(e)};Vn.useDebugValue=function(){};Vn.useDeferredValue=function(e){return Zo.current.useDeferredValue(e)};Vn.useEffect=function(e,t){return Zo.current.useEffect(e,t)};Vn.useId=function(){return Zo.current.useId()};Vn.useImperativeHandle=function(e,t,r){return Zo.current.useImperativeHandle(e,t,r)};Vn.useInsertionEffect=function(e,t){return Zo.current.useInsertionEffect(e,t)};Vn.useLayoutEffect=function(e,t){return Zo.current.useLayoutEffect(e,t)};Vn.useMemo=function(e,t){return Zo.current.useMemo(e,t)};Vn.useReducer=function(e,t,r){return Zo.current.useReducer(e,t,r)};Vn.useRef=function(e){return Zo.current.useRef(e)};Vn.useState=function(e){return Zo.current.useState(e)};Vn.useSyncExternalStore=function(e,t,r){return Zo.current.useSyncExternalStore(e,t,r)};Vn.useTransition=function(){return Zo.current.useTransition()};Vn.version="18.2.0";dF.exports=Vn;var le=dF.exports;const xn=Of(le),PE=GG({__proto__:null,default:xn},[le]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l7=le,c7=Symbol.for("react.element"),u7=Symbol.for("react.fragment"),h7=Object.prototype.hasOwnProperty,d7=l7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f7={key:!0,ref:!0,__self:!0,__source:!0};function bF(e,t,r){var n,o={},f=null,y=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(y=t.ref);for(n in t)h7.call(t,n)&&!f7.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:c7,type:e,key:f,ref:y,props:o,_owner:d7.current}}Sw.Fragment=u7;Sw.jsx=bF;Sw.jsxs=bF;hF.exports=Sw;var A=hF.exports,RE={},_F={exports:{}},Fa={},wF={exports:{}},SF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(mt,Xt){var Wt=mt.length;mt.push(Xt);e:for(;0<Wt;){var Ot=Wt-1>>>1,ut=mt[Ot];if(0<o(ut,Xt))mt[Ot]=Xt,mt[Wt]=ut,Wt=Ot;else break e}}function r(mt){return mt.length===0?null:mt[0]}function n(mt){if(mt.length===0)return null;var Xt=mt[0],Wt=mt.pop();if(Wt!==Xt){mt[0]=Wt;e:for(var Ot=0,ut=mt.length,Vt=ut>>>1;Ot<Vt;){var ir=2*(Ot+1)-1,vt=mt[ir],Dt=ir+1,ur=mt[Dt];if(0>o(vt,Wt))Dt<ut&&0>o(ur,vt)?(mt[Ot]=ur,mt[Dt]=Wt,Ot=Dt):(mt[Ot]=vt,mt[ir]=Wt,Ot=ir);else if(Dt<ut&&0>o(ur,Wt))mt[Ot]=ur,mt[Dt]=Wt,Ot=Dt;else break e}}return Xt}function o(mt,Xt){var Wt=mt.sortIndex-Xt.sortIndex;return Wt!==0?Wt:mt.id-Xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var y=Date,s=y.now();e.unstable_now=function(){return y.now()-s}}var k=[],I=[],D=1,N=null,U=3,q=!1,Z=!1,ae=!1,ve=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(mt){for(var Xt=r(I);Xt!==null;){if(Xt.callback===null)n(I);else if(Xt.startTime<=mt)n(I),Xt.sortIndex=Xt.expirationTime,t(k,Xt);else break;Xt=r(I)}}function he(mt){if(ae=!1,K(mt),!Z)if(r(k)!==null)Z=!0,or(de);else{var Xt=r(I);Xt!==null&&xr(he,Xt.startTime-mt)}}function de(mt,Xt){Z=!1,ae&&(ae=!1,ie(Ue),Ue=-1),q=!0;var Wt=U;try{for(K(Xt),N=r(k);N!==null&&(!(N.expirationTime>Xt)||mt&&!Ve());){var Ot=N.callback;if(typeof Ot=="function"){N.callback=null,U=N.priorityLevel;var ut=Ot(N.expirationTime<=Xt);Xt=e.unstable_now(),typeof ut=="function"?N.callback=ut:N===r(k)&&n(k),K(Xt)}else n(k);N=r(k)}if(N!==null)var Vt=!0;else{var ir=r(I);ir!==null&&xr(he,ir.startTime-Xt),Vt=!1}return Vt}finally{N=null,U=Wt,q=!1}}var Ae=!1,Te=null,Ue=-1,Pe=5,$e=-1;function Ve(){return!(e.unstable_now()-$e<Pe)}function Fe(){if(Te!==null){var mt=e.unstable_now();$e=mt;var Xt=!0;try{Xt=Te(!0,mt)}finally{Xt?Ye():(Ae=!1,Te=null)}}else Ae=!1}var Ye;if(typeof W=="function")Ye=function(){W(Fe)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Pt=ft.port2;ft.port1.onmessage=Fe,Ye=function(){Pt.postMessage(null)}}else Ye=function(){ve(Fe,0)};function or(mt){Te=mt,Ae||(Ae=!0,Ye())}function xr(mt,Xt){Ue=ve(function(){mt(e.unstable_now())},Xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(mt){mt.callback=null},e.unstable_continueExecution=function(){Z||q||(Z=!0,or(de))},e.unstable_forceFrameRate=function(mt){0>mt||125<mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Pe=0<mt?Math.floor(1e3/mt):5},e.unstable_getCurrentPriorityLevel=function(){return U},e.unstable_getFirstCallbackNode=function(){return r(k)},e.unstable_next=function(mt){switch(U){case 1:case 2:case 3:var Xt=3;break;default:Xt=U}var Wt=U;U=Xt;try{return mt()}finally{U=Wt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(mt,Xt){switch(mt){case 1:case 2:case 3:case 4:case 5:break;default:mt=3}var Wt=U;U=mt;try{return Xt()}finally{U=Wt}},e.unstable_scheduleCallback=function(mt,Xt,Wt){var Ot=e.unstable_now();switch(typeof Wt=="object"&&Wt!==null?(Wt=Wt.delay,Wt=typeof Wt=="number"&&0<Wt?Ot+Wt:Ot):Wt=Ot,mt){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Wt+ut,mt={id:D++,callback:Xt,priorityLevel:mt,startTime:Wt,expirationTime:ut,sortIndex:-1},Wt>Ot?(mt.sortIndex=Wt,t(I,mt),r(k)===null&&mt===r(I)&&(ae?(ie(Ue),Ue=-1):ae=!0,xr(he,Wt-Ot))):(mt.sortIndex=ut,t(k,mt),Z||q||(Z=!0,or(de))),mt},e.unstable_shouldYield=Ve,e.unstable_wrapCallback=function(mt){var Xt=U;return function(){var Wt=U;U=Xt;try{return mt.apply(this,arguments)}finally{U=Wt}}}})(SF);wF.exports=SF;var p7=wF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CF=le,za=p7;function yr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kF=new Set,Fx={};function Df(e,t){Pm(e,t),Pm(e+"Capture",t)}function Pm(e,t){for(Fx[e]=t,e=0;e<t.length;e++)kF.add(t[e])}var gu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ME=Object.prototype.hasOwnProperty,m7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GO={},XO={};function g7(e){return ME.call(XO,e)?!0:ME.call(GO,e)?!1:m7.test(e)?XO[e]=!0:(GO[e]=!0,!1)}function y7(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x7(e,t,r,n){if(t===null||typeof t>"u"||y7(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ko(e,t,r,n,o,f,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=y}var So={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){So[e]=new Ko(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];So[t]=new Ko(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){So[e]=new Ko(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){So[e]=new Ko(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){So[e]=new Ko(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){So[e]=new Ko(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){So[e]=new Ko(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){So[e]=new Ko(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){So[e]=new Ko(e,5,!1,e.toLowerCase(),null,!1,!1)});var oI=/[\-:]([a-z])/g;function aI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oI,aI);So[t]=new Ko(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oI,aI);So[t]=new Ko(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oI,aI);So[t]=new Ko(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){So[e]=new Ko(e,1,!1,e.toLowerCase(),null,!1,!1)});So.xlinkHref=new Ko("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){So[e]=new Ko(e,1,!1,e.toLowerCase(),null,!0,!0)});function lI(e,t,r,n){var o=So.hasOwnProperty(t)?So[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(x7(t,r,o,n)&&(r=null),n||o===null?g7(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ku=CF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_b=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),Gp=Symbol.for("react.fragment"),cI=Symbol.for("react.strict_mode"),LE=Symbol.for("react.profiler"),EF=Symbol.for("react.provider"),TF=Symbol.for("react.context"),uI=Symbol.for("react.forward_ref"),OE=Symbol.for("react.suspense"),DE=Symbol.for("react.suspense_list"),hI=Symbol.for("react.memo"),dh=Symbol.for("react.lazy"),AF=Symbol.for("react.offscreen"),qO=Symbol.iterator;function My(e){return e===null||typeof e!="object"?null:(e=qO&&e[qO]||e["@@iterator"],typeof e=="function"?e:null)}var Ss=Object.assign,DC;function Qy(e){if(DC===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);DC=t&&t[1]||""}return`
`+DC+e}var zC=!1;function NC(e,t){if(!e||zC)return"";zC=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var n=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){n=I}e.call(t.prototype)}else{try{throw Error()}catch(I){n=I}e()}}catch(I){if(I&&n&&typeof I.stack=="string"){for(var o=I.stack.split(`
`),f=n.stack.split(`
`),y=o.length-1,s=f.length-1;1<=y&&0<=s&&o[y]!==f[s];)s--;for(;1<=y&&0<=s;y--,s--)if(o[y]!==f[s]){if(y!==1||s!==1)do if(y--,s--,0>s||o[y]!==f[s]){var k=`
`+o[y].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=y&&0<=s);break}}}finally{zC=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qy(e):""}function v7(e){switch(e.tag){case 5:return Qy(e.type);case 16:return Qy("Lazy");case 13:return Qy("Suspense");case 19:return Qy("SuspenseList");case 0:case 2:case 15:return e=NC(e.type,!1),e;case 11:return e=NC(e.type.render,!1),e;case 1:return e=NC(e.type,!0),e;default:return""}}function zE(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gp:return"Fragment";case Wp:return"Portal";case LE:return"Profiler";case cI:return"StrictMode";case OE:return"Suspense";case DE:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TF:return(e.displayName||"Context")+".Consumer";case EF:return(e._context.displayName||"Context")+".Provider";case uI:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hI:return t=e.displayName||null,t!==null?t:zE(e.type)||"Memo";case dh:t=e._payload,e=e._init;try{return zE(e(t))}catch{}}return null}function b7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zE(t);case 8:return t===cI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function IF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _7(e){var t=IF(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(y){n=""+y,f.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wb(e){e._valueTracker||(e._valueTracker=_7(e))}function PF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=IF(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function u1(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function NE(e,t){var r=t.checked;return Ss({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function YO(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Xh(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function RF(e,t){t=t.checked,t!=null&&lI(e,"checked",t,!1)}function jE(e,t){RF(e,t);var r=Xh(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?FE(e,t.type,r):t.hasOwnProperty("defaultValue")&&FE(e,t.type,Xh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ZO(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function FE(e,t,r){(t!=="number"||u1(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ex=Array.isArray;function mm(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Xh(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function BE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(yr(91));return Ss({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function KO(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(yr(92));if(ex(r)){if(1<r.length)throw Error(yr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Xh(r)}}function MF(e,t){var r=Xh(t.value),n=Xh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function JO(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $E(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sb,OF=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sb=Sb||document.createElement("div"),Sb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Bx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var fx={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w7=["Webkit","ms","Moz","O"];Object.keys(fx).forEach(function(e){w7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fx[t]=fx[e]})});function DF(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||fx.hasOwnProperty(e)&&fx[e]?(""+t).trim():t+"px"}function zF(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=DF(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var S7=Ss({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UE(e,t){if(t){if(S7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(yr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(yr(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(yr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(yr(62))}}function VE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var HE=null;function dI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var WE=null,gm=null,ym=null;function QO(e){if(e=Rv(e)){if(typeof WE!="function")throw Error(yr(280));var t=e.stateNode;t&&(t=Aw(t),WE(e.stateNode,e.type,t))}}function NF(e){gm?ym?ym.push(e):ym=[e]:gm=e}function jF(){if(gm){var e=gm,t=ym;if(ym=gm=null,QO(e),t)for(e=0;e<t.length;e++)QO(t[e])}}function FF(e,t){return e(t)}function BF(){}var jC=!1;function $F(e,t,r){if(jC)return e(t,r);jC=!0;try{return FF(e,t,r)}finally{jC=!1,(gm!==null||ym!==null)&&(BF(),jF())}}function $x(e,t){var r=e.stateNode;if(r===null)return null;var n=Aw(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(yr(231,t,typeof r));return r}var GE=!1;if(gu)try{var Ly={};Object.defineProperty(Ly,"passive",{get:function(){GE=!0}}),window.addEventListener("test",Ly,Ly),window.removeEventListener("test",Ly,Ly)}catch{GE=!1}function C7(e,t,r,n,o,f,y,s,k){var I=Array.prototype.slice.call(arguments,3);try{t.apply(r,I)}catch(D){this.onError(D)}}var px=!1,h1=null,d1=!1,XE=null,k7={onError:function(e){px=!0,h1=e}};function E7(e,t,r,n,o,f,y,s,k){px=!1,h1=null,C7.apply(k7,arguments)}function T7(e,t,r,n,o,f,y,s,k){if(E7.apply(this,arguments),px){if(px){var I=h1;px=!1,h1=null}else throw Error(yr(198));d1||(d1=!0,XE=I)}}function zf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function UF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eD(e){if(zf(e)!==e)throw Error(yr(188))}function A7(e){var t=e.alternate;if(!t){if(t=zf(e),t===null)throw Error(yr(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var f=o.alternate;if(f===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===f.child){for(f=o.child;f;){if(f===r)return eD(o),e;if(f===n)return eD(o),t;f=f.sibling}throw Error(yr(188))}if(r.return!==n.return)r=o,n=f;else{for(var y=!1,s=o.child;s;){if(s===r){y=!0,r=o,n=f;break}if(s===n){y=!0,n=o,r=f;break}s=s.sibling}if(!y){for(s=f.child;s;){if(s===r){y=!0,r=f,n=o;break}if(s===n){y=!0,n=f,r=o;break}s=s.sibling}if(!y)throw Error(yr(189))}}if(r.alternate!==n)throw Error(yr(190))}if(r.tag!==3)throw Error(yr(188));return r.stateNode.current===r?e:t}function VF(e){return e=A7(e),e!==null?HF(e):null}function HF(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=HF(e);if(t!==null)return t;e=e.sibling}return null}var WF=za.unstable_scheduleCallback,tD=za.unstable_cancelCallback,I7=za.unstable_shouldYield,P7=za.unstable_requestPaint,Ms=za.unstable_now,R7=za.unstable_getCurrentPriorityLevel,fI=za.unstable_ImmediatePriority,GF=za.unstable_UserBlockingPriority,f1=za.unstable_NormalPriority,M7=za.unstable_LowPriority,XF=za.unstable_IdlePriority,Cw=null,yc=null;function L7(e){if(yc&&typeof yc.onCommitFiberRoot=="function")try{yc.onCommitFiberRoot(Cw,e,void 0,(e.current.flags&128)===128)}catch{}}var Dl=Math.clz32?Math.clz32:z7,O7=Math.log,D7=Math.LN2;function z7(e){return e>>>=0,e===0?32:31-(O7(e)/D7|0)|0}var Cb=64,kb=4194304;function tx(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function p1(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,f=e.pingedLanes,y=r&268435455;if(y!==0){var s=y&~o;s!==0?n=tx(s):(f&=y,f!==0&&(n=tx(f)))}else y=r&~o,y!==0?n=tx(y):f!==0&&(n=tx(f));if(n===0)return 0;if(t!==0&&t!==n&&!(t&o)&&(o=n&-n,f=t&-t,o>=f||o===16&&(f&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Dl(t),o=1<<r,n|=e[r],t&=~o;return n}function N7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,f=e.pendingLanes;0<f;){var y=31-Dl(f),s=1<<y,k=o[y];k===-1?(!(s&r)||s&n)&&(o[y]=N7(s,t)):k<=t&&(e.expiredLanes|=s),f&=~s}}function qE(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qF(){var e=Cb;return Cb<<=1,!(Cb&4194240)&&(Cb=64),e}function FC(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Iv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dl(t),e[t]=r}function F7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Dl(r),f=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~f}}function pI(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Dl(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var Ri=0;function YF(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ZF,mI,KF,JF,QF,YE=!1,Eb=[],Ah=null,Ih=null,Ph=null,Ux=new Map,Vx=new Map,mh=[],B7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rD(e,t){switch(e){case"focusin":case"focusout":Ah=null;break;case"dragenter":case"dragleave":Ih=null;break;case"mouseover":case"mouseout":Ph=null;break;case"pointerover":case"pointerout":Ux.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vx.delete(t.pointerId)}}function Oy(e,t,r,n,o,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:f,targetContainers:[o]},t!==null&&(t=Rv(t),t!==null&&mI(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function $7(e,t,r,n,o){switch(t){case"focusin":return Ah=Oy(Ah,e,t,r,n,o),!0;case"dragenter":return Ih=Oy(Ih,e,t,r,n,o),!0;case"mouseover":return Ph=Oy(Ph,e,t,r,n,o),!0;case"pointerover":var f=o.pointerId;return Ux.set(f,Oy(Ux.get(f)||null,e,t,r,n,o)),!0;case"gotpointercapture":return f=o.pointerId,Vx.set(f,Oy(Vx.get(f)||null,e,t,r,n,o)),!0}return!1}function e5(e){var t=tf(e.target);if(t!==null){var r=zf(t);if(r!==null){if(t=r.tag,t===13){if(t=UF(r),t!==null){e.blockedOn=t,QF(e.priority,function(){KF(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function m_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ZE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);HE=n,r.target.dispatchEvent(n),HE=null}else return t=Rv(r),t!==null&&mI(t),e.blockedOn=r,!1;t.shift()}return!0}function nD(e,t,r){m_(e)&&r.delete(t)}function U7(){YE=!1,Ah!==null&&m_(Ah)&&(Ah=null),Ih!==null&&m_(Ih)&&(Ih=null),Ph!==null&&m_(Ph)&&(Ph=null),Ux.forEach(nD),Vx.forEach(nD)}function Dy(e,t){e.blockedOn===t&&(e.blockedOn=null,YE||(YE=!0,za.unstable_scheduleCallback(za.unstable_NormalPriority,U7)))}function Hx(e){function t(o){return Dy(o,e)}if(0<Eb.length){Dy(Eb[0],e);for(var r=1;r<Eb.length;r++){var n=Eb[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ah!==null&&Dy(Ah,e),Ih!==null&&Dy(Ih,e),Ph!==null&&Dy(Ph,e),Ux.forEach(t),Vx.forEach(t),r=0;r<mh.length;r++)n=mh[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<mh.length&&(r=mh[0],r.blockedOn===null);)e5(r),r.blockedOn===null&&mh.shift()}var xm=ku.ReactCurrentBatchConfig,m1=!0;function V7(e,t,r,n){var o=Ri,f=xm.transition;xm.transition=null;try{Ri=1,gI(e,t,r,n)}finally{Ri=o,xm.transition=f}}function H7(e,t,r,n){var o=Ri,f=xm.transition;xm.transition=null;try{Ri=4,gI(e,t,r,n)}finally{Ri=o,xm.transition=f}}function gI(e,t,r,n){if(m1){var o=ZE(e,t,r,n);if(o===null)YC(e,t,n,g1,r),rD(e,n);else if($7(o,e,t,r,n))n.stopPropagation();else if(rD(e,n),t&4&&-1<B7.indexOf(e)){for(;o!==null;){var f=Rv(o);if(f!==null&&ZF(f),f=ZE(e,t,r,n),f===null&&YC(e,t,n,g1,r),f===o)break;o=f}o!==null&&n.stopPropagation()}else YC(e,t,n,null,r)}}var g1=null;function ZE(e,t,r,n){if(g1=null,e=dI(n),e=tf(e),e!==null)if(t=zf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=UF(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return g1=e,null}function t5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R7()){case fI:return 1;case GF:return 4;case f1:case M7:return 16;case XF:return 536870912;default:return 16}default:return 16}}var Ch=null,yI=null,g_=null;function r5(){if(g_)return g_;var e,t=yI,r=t.length,n,o="value"in Ch?Ch.value:Ch.textContent,f=o.length;for(e=0;e<r&&t[e]===o[e];e++);var y=r-e;for(n=1;n<=y&&t[r-n]===o[f-n];n++);return g_=o.slice(e,1<n?1-n:void 0)}function y_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tb(){return!0}function iD(){return!1}function Ba(e){function t(r,n,o,f,y){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(f):f[s]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Tb:iD,this.isPropagationStopped=iD,this}return Ss(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Tb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Tb)},persist:function(){},isPersistent:Tb}),t}var tg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xI=Ba(tg),Pv=Ss({},tg,{view:0,detail:0}),W7=Ba(Pv),BC,$C,zy,kw=Ss({},Pv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zy&&(zy&&e.type==="mousemove"?(BC=e.screenX-zy.screenX,$C=e.screenY-zy.screenY):$C=BC=0,zy=e),BC)},movementY:function(e){return"movementY"in e?e.movementY:$C}}),sD=Ba(kw),G7=Ss({},kw,{dataTransfer:0}),X7=Ba(G7),q7=Ss({},Pv,{relatedTarget:0}),UC=Ba(q7),Y7=Ss({},tg,{animationName:0,elapsedTime:0,pseudoElement:0}),Z7=Ba(Y7),K7=Ss({},tg,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J7=Ba(K7),Q7=Ss({},tg,{data:0}),oD=Ba(Q7),eX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nX(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rX[e])?!!t[e]:!1}function vI(){return nX}var iX=Ss({},Pv,{key:function(e){if(e.key){var t=eX[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=y_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tX[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vI,charCode:function(e){return e.type==="keypress"?y_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?y_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sX=Ba(iX),oX=Ss({},kw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aD=Ba(oX),aX=Ss({},Pv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vI}),lX=Ba(aX),cX=Ss({},tg,{propertyName:0,elapsedTime:0,pseudoElement:0}),uX=Ba(cX),hX=Ss({},kw,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dX=Ba(hX),fX=[9,13,27,32],bI=gu&&"CompositionEvent"in window,mx=null;gu&&"documentMode"in document&&(mx=document.documentMode);var pX=gu&&"TextEvent"in window&&!mx,n5=gu&&(!bI||mx&&8<mx&&11>=mx),lD=String.fromCharCode(32),cD=!1;function i5(e,t){switch(e){case"keyup":return fX.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xp=!1;function mX(e,t){switch(e){case"compositionend":return s5(t);case"keypress":return t.which!==32?null:(cD=!0,lD);case"textInput":return e=t.data,e===lD&&cD?null:e;default:return null}}function gX(e,t){if(Xp)return e==="compositionend"||!bI&&i5(e,t)?(e=r5(),g_=yI=Ch=null,Xp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return n5&&t.locale!=="ko"?null:t.data;default:return null}}var yX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yX[e.type]:t==="textarea"}function o5(e,t,r,n){NF(n),t=y1(t,"onChange"),0<t.length&&(r=new xI("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var gx=null,Wx=null;function xX(e){y5(e,0)}function Ew(e){var t=Zp(e);if(PF(t))return e}function vX(e,t){if(e==="change")return t}var a5=!1;if(gu){var VC;if(gu){var HC="oninput"in document;if(!HC){var hD=document.createElement("div");hD.setAttribute("oninput","return;"),HC=typeof hD.oninput=="function"}VC=HC}else VC=!1;a5=VC&&(!document.documentMode||9<document.documentMode)}function dD(){gx&&(gx.detachEvent("onpropertychange",l5),Wx=gx=null)}function l5(e){if(e.propertyName==="value"&&Ew(Wx)){var t=[];o5(t,Wx,e,dI(e)),$F(xX,t)}}function bX(e,t,r){e==="focusin"?(dD(),gx=t,Wx=r,gx.attachEvent("onpropertychange",l5)):e==="focusout"&&dD()}function _X(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ew(Wx)}function wX(e,t){if(e==="click")return Ew(t)}function SX(e,t){if(e==="input"||e==="change")return Ew(t)}function CX(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jl=typeof Object.is=="function"?Object.is:CX;function Gx(e,t){if(jl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!ME.call(t,o)||!jl(e[o],t[o]))return!1}return!0}function fD(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pD(e,t){var r=fD(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=fD(r)}}function c5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?c5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function u5(){for(var e=window,t=u1();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=u1(e.document)}return t}function _I(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kX(e){var t=u5(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&c5(r.ownerDocument.documentElement,r)){if(n!==null&&_I(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,f=Math.min(n.start,o);n=n.end===void 0?f:Math.min(n.end,o),!e.extend&&f>n&&(o=n,n=f,f=o),o=pD(r,f);var y=pD(r,n);o&&y&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),f>n?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var EX=gu&&"documentMode"in document&&11>=document.documentMode,qp=null,KE=null,yx=null,JE=!1;function mD(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;JE||qp==null||qp!==u1(n)||(n=qp,"selectionStart"in n&&_I(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yx&&Gx(yx,n)||(yx=n,n=y1(KE,"onSelect"),0<n.length&&(t=new xI("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qp)))}function Ab(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Yp={animationend:Ab("Animation","AnimationEnd"),animationiteration:Ab("Animation","AnimationIteration"),animationstart:Ab("Animation","AnimationStart"),transitionend:Ab("Transition","TransitionEnd")},WC={},h5={};gu&&(h5=document.createElement("div").style,"AnimationEvent"in window||(delete Yp.animationend.animation,delete Yp.animationiteration.animation,delete Yp.animationstart.animation),"TransitionEvent"in window||delete Yp.transitionend.transition);function Tw(e){if(WC[e])return WC[e];if(!Yp[e])return e;var t=Yp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in h5)return WC[e]=t[r];return e}var d5=Tw("animationend"),f5=Tw("animationiteration"),p5=Tw("animationstart"),m5=Tw("transitionend"),g5=new Map,gD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function td(e,t){g5.set(e,t),Df(t,[e])}for(var GC=0;GC<gD.length;GC++){var XC=gD[GC],TX=XC.toLowerCase(),AX=XC[0].toUpperCase()+XC.slice(1);td(TX,"on"+AX)}td(d5,"onAnimationEnd");td(f5,"onAnimationIteration");td(p5,"onAnimationStart");td("dblclick","onDoubleClick");td("focusin","onFocus");td("focusout","onBlur");td(m5,"onTransitionEnd");Pm("onMouseEnter",["mouseout","mouseover"]);Pm("onMouseLeave",["mouseout","mouseover"]);Pm("onPointerEnter",["pointerout","pointerover"]);Pm("onPointerLeave",["pointerout","pointerover"]);Df("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Df("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Df("onBeforeInput",["compositionend","keypress","textInput","paste"]);Df("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Df("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IX=new Set("cancel close invalid load scroll toggle".split(" ").concat(rx));function yD(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,T7(n,t,void 0,e),e.currentTarget=null}function y5(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var f=void 0;if(t)for(var y=n.length-1;0<=y;y--){var s=n[y],k=s.instance,I=s.currentTarget;if(s=s.listener,k!==f&&o.isPropagationStopped())break e;yD(o,s,I),f=k}else for(y=0;y<n.length;y++){if(s=n[y],k=s.instance,I=s.currentTarget,s=s.listener,k!==f&&o.isPropagationStopped())break e;yD(o,s,I),f=k}}}if(d1)throw e=XE,d1=!1,XE=null,e}function Qi(e,t){var r=t[nT];r===void 0&&(r=t[nT]=new Set);var n=e+"__bubble";r.has(n)||(x5(t,e,2,!1),r.add(n))}function qC(e,t,r){var n=0;t&&(n|=4),x5(r,e,n,t)}var Ib="_reactListening"+Math.random().toString(36).slice(2);function Xx(e){if(!e[Ib]){e[Ib]=!0,kF.forEach(function(r){r!=="selectionchange"&&(IX.has(r)||qC(r,!1,e),qC(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ib]||(t[Ib]=!0,qC("selectionchange",!1,t))}}function x5(e,t,r,n){switch(t5(t)){case 1:var o=V7;break;case 4:o=H7;break;default:o=gI}r=o.bind(null,t,r,e),o=void 0,!GE||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function YC(e,t,r,n,o){var f=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var y=n.tag;if(y===3||y===4){var s=n.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(y===4)for(y=n.return;y!==null;){var k=y.tag;if((k===3||k===4)&&(k=y.stateNode.containerInfo,k===o||k.nodeType===8&&k.parentNode===o))return;y=y.return}for(;s!==null;){if(y=tf(s),y===null)return;if(k=y.tag,k===5||k===6){n=f=y;continue e}s=s.parentNode}}n=n.return}$F(function(){var I=f,D=dI(r),N=[];e:{var U=g5.get(e);if(U!==void 0){var q=xI,Z=e;switch(e){case"keypress":if(y_(r)===0)break e;case"keydown":case"keyup":q=sX;break;case"focusin":Z="focus",q=UC;break;case"focusout":Z="blur",q=UC;break;case"beforeblur":case"afterblur":q=UC;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=sD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=X7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=lX;break;case d5:case f5:case p5:q=Z7;break;case m5:q=uX;break;case"scroll":q=W7;break;case"wheel":q=dX;break;case"copy":case"cut":case"paste":q=J7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=aD}var ae=(t&4)!==0,ve=!ae&&e==="scroll",ie=ae?U!==null?U+"Capture":null:U;ae=[];for(var W=I,K;W!==null;){K=W;var he=K.stateNode;if(K.tag===5&&he!==null&&(K=he,ie!==null&&(he=$x(W,ie),he!=null&&ae.push(qx(W,he,K)))),ve)break;W=W.return}0<ae.length&&(U=new q(U,Z,null,r,D),N.push({event:U,listeners:ae}))}}if(!(t&7)){e:{if(U=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",U&&r!==HE&&(Z=r.relatedTarget||r.fromElement)&&(tf(Z)||Z[yu]))break e;if((q||U)&&(U=D.window===D?D:(U=D.ownerDocument)?U.defaultView||U.parentWindow:window,q?(Z=r.relatedTarget||r.toElement,q=I,Z=Z?tf(Z):null,Z!==null&&(ve=zf(Z),Z!==ve||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(q=null,Z=I),q!==Z)){if(ae=sD,he="onMouseLeave",ie="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(ae=aD,he="onPointerLeave",ie="onPointerEnter",W="pointer"),ve=q==null?U:Zp(q),K=Z==null?U:Zp(Z),U=new ae(he,W+"leave",q,r,D),U.target=ve,U.relatedTarget=K,he=null,tf(D)===I&&(ae=new ae(ie,W+"enter",Z,r,D),ae.target=K,ae.relatedTarget=ve,he=ae),ve=he,q&&Z)t:{for(ae=q,ie=Z,W=0,K=ae;K;K=Fp(K))W++;for(K=0,he=ie;he;he=Fp(he))K++;for(;0<W-K;)ae=Fp(ae),W--;for(;0<K-W;)ie=Fp(ie),K--;for(;W--;){if(ae===ie||ie!==null&&ae===ie.alternate)break t;ae=Fp(ae),ie=Fp(ie)}ae=null}else ae=null;q!==null&&xD(N,U,q,ae,!1),Z!==null&&ve!==null&&xD(N,ve,Z,ae,!0)}}e:{if(U=I?Zp(I):window,q=U.nodeName&&U.nodeName.toLowerCase(),q==="select"||q==="input"&&U.type==="file")var de=vX;else if(uD(U))if(a5)de=SX;else{de=_X;var Ae=bX}else(q=U.nodeName)&&q.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(de=wX);if(de&&(de=de(e,I))){o5(N,de,r,D);break e}Ae&&Ae(e,U,I),e==="focusout"&&(Ae=U._wrapperState)&&Ae.controlled&&U.type==="number"&&FE(U,"number",U.value)}switch(Ae=I?Zp(I):window,e){case"focusin":(uD(Ae)||Ae.contentEditable==="true")&&(qp=Ae,KE=I,yx=null);break;case"focusout":yx=KE=qp=null;break;case"mousedown":JE=!0;break;case"contextmenu":case"mouseup":case"dragend":JE=!1,mD(N,r,D);break;case"selectionchange":if(EX)break;case"keydown":case"keyup":mD(N,r,D)}var Te;if(bI)e:{switch(e){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Xp?i5(e,r)&&(Ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ue="onCompositionStart");Ue&&(n5&&r.locale!=="ko"&&(Xp||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Xp&&(Te=r5()):(Ch=D,yI="value"in Ch?Ch.value:Ch.textContent,Xp=!0)),Ae=y1(I,Ue),0<Ae.length&&(Ue=new oD(Ue,e,null,r,D),N.push({event:Ue,listeners:Ae}),Te?Ue.data=Te:(Te=s5(r),Te!==null&&(Ue.data=Te)))),(Te=pX?mX(e,r):gX(e,r))&&(I=y1(I,"onBeforeInput"),0<I.length&&(D=new oD("onBeforeInput","beforeinput",null,r,D),N.push({event:D,listeners:I}),D.data=Te))}y5(N,t)})}function qx(e,t,r){return{instance:e,listener:t,currentTarget:r}}function y1(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,f=o.stateNode;o.tag===5&&f!==null&&(o=f,f=$x(e,r),f!=null&&n.unshift(qx(e,f,o)),f=$x(e,t),f!=null&&n.push(qx(e,f,o))),e=e.return}return n}function Fp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xD(e,t,r,n,o){for(var f=t._reactName,y=[];r!==null&&r!==n;){var s=r,k=s.alternate,I=s.stateNode;if(k!==null&&k===n)break;s.tag===5&&I!==null&&(s=I,o?(k=$x(r,f),k!=null&&y.unshift(qx(r,k,s))):o||(k=$x(r,f),k!=null&&y.push(qx(r,k,s)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var PX=/\r\n?/g,RX=/\u0000|\uFFFD/g;function vD(e){return(typeof e=="string"?e:""+e).replace(PX,`
`).replace(RX,"")}function Pb(e,t,r){if(t=vD(t),vD(e)!==t&&r)throw Error(yr(425))}function x1(){}var QE=null,eT=null;function tT(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rT=typeof setTimeout=="function"?setTimeout:void 0,MX=typeof clearTimeout=="function"?clearTimeout:void 0,bD=typeof Promise=="function"?Promise:void 0,LX=typeof queueMicrotask=="function"?queueMicrotask:typeof bD<"u"?function(e){return bD.resolve(null).then(e).catch(OX)}:rT;function OX(e){setTimeout(function(){throw e})}function ZC(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),Hx(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);Hx(t)}function Rh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _D(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var rg=Math.random().toString(36).slice(2),hc="__reactFiber$"+rg,Yx="__reactProps$"+rg,yu="__reactContainer$"+rg,nT="__reactEvents$"+rg,DX="__reactListeners$"+rg,zX="__reactHandles$"+rg;function tf(e){var t=e[hc];if(t)return t;for(var r=e.parentNode;r;){if(t=r[yu]||r[hc]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=_D(e);e!==null;){if(r=e[hc])return r;e=_D(e)}return t}e=r,r=e.parentNode}return null}function Rv(e){return e=e[hc]||e[yu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(yr(33))}function Aw(e){return e[Yx]||null}var iT=[],Kp=-1;function rd(e){return{current:e}}function ns(e){0>Kp||(e.current=iT[Kp],iT[Kp]=null,Kp--)}function Xi(e,t){Kp++,iT[Kp]=e.current,e.current=t}var qh={},No=rd(qh),ma=rd(!1),_f=qh;function Rm(e,t){var r=e.type.contextTypes;if(!r)return qh;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},f;for(f in r)o[f]=t[f];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ga(e){return e=e.childContextTypes,e!=null}function v1(){ns(ma),ns(No)}function wD(e,t,r){if(No.current!==qh)throw Error(yr(168));Xi(No,t),Xi(ma,r)}function v5(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(yr(108,b7(e)||"Unknown",o));return Ss({},r,n)}function b1(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qh,_f=No.current,Xi(No,e),Xi(ma,ma.current),!0}function SD(e,t,r){var n=e.stateNode;if(!n)throw Error(yr(169));r?(e=v5(e,t,_f),n.__reactInternalMemoizedMergedChildContext=e,ns(ma),ns(No),Xi(No,e)):ns(ma),Xi(ma,r)}var Qc=null,Iw=!1,KC=!1;function b5(e){Qc===null?Qc=[e]:Qc.push(e)}function NX(e){Iw=!0,b5(e)}function nd(){if(!KC&&Qc!==null){KC=!0;var e=0,t=Ri;try{var r=Qc;for(Ri=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qc=null,Iw=!1}catch(o){throw Qc!==null&&(Qc=Qc.slice(e+1)),WF(fI,nd),o}finally{Ri=t,KC=!1}}return null}var Jp=[],Qp=0,_1=null,w1=0,tl=[],rl=0,wf=null,iu=1,su="";function Vd(e,t){Jp[Qp++]=w1,Jp[Qp++]=_1,_1=e,w1=t}function _5(e,t,r){tl[rl++]=iu,tl[rl++]=su,tl[rl++]=wf,wf=e;var n=iu;e=su;var o=32-Dl(n)-1;n&=~(1<<o),r+=1;var f=32-Dl(t)+o;if(30<f){var y=o-o%5;f=(n&(1<<y)-1).toString(32),n>>=y,o-=y,iu=1<<32-Dl(t)+o|r<<o|n,su=f+e}else iu=1<<f|r<<o|n,su=e}function wI(e){e.return!==null&&(Vd(e,1),_5(e,1,0))}function SI(e){for(;e===_1;)_1=Jp[--Qp],Jp[Qp]=null,w1=Jp[--Qp],Jp[Qp]=null;for(;e===wf;)wf=tl[--rl],tl[rl]=null,su=tl[--rl],tl[rl]=null,iu=tl[--rl],tl[rl]=null}var La=null,Ra=null,cs=!1,Ml=null;function w5(e,t){var r=il(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function CD(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,La=e,Ra=Rh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,La=e,Ra=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=wf!==null?{id:iu,overflow:su}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=il(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,La=e,Ra=null,!0):!1;default:return!1}}function sT(e){return(e.mode&1)!==0&&(e.flags&128)===0}function oT(e){if(cs){var t=Ra;if(t){var r=t;if(!CD(e,t)){if(sT(e))throw Error(yr(418));t=Rh(r.nextSibling);var n=La;t&&CD(e,t)?w5(n,r):(e.flags=e.flags&-4097|2,cs=!1,La=e)}}else{if(sT(e))throw Error(yr(418));e.flags=e.flags&-4097|2,cs=!1,La=e}}}function kD(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;La=e}function Rb(e){if(e!==La)return!1;if(!cs)return kD(e),cs=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!tT(e.type,e.memoizedProps)),t&&(t=Ra)){if(sT(e))throw S5(),Error(yr(418));for(;t;)w5(e,t),t=Rh(t.nextSibling)}if(kD(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(yr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ra=Rh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ra=null}}else Ra=La?Rh(e.stateNode.nextSibling):null;return!0}function S5(){for(var e=Ra;e;)e=Rh(e.nextSibling)}function Mm(){Ra=La=null,cs=!1}function CI(e){Ml===null?Ml=[e]:Ml.push(e)}var jX=ku.ReactCurrentBatchConfig;function Il(e,t){if(e&&e.defaultProps){t=Ss({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var S1=rd(null),C1=null,em=null,kI=null;function EI(){kI=em=C1=null}function TI(e){var t=S1.current;ns(S1),e._currentValue=t}function aT(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vm(e,t){C1=e,kI=em=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(fa=!0),e.firstContext=null)}function ll(e){var t=e._currentValue;if(kI!==e)if(e={context:e,memoizedValue:t,next:null},em===null){if(C1===null)throw Error(yr(308));em=e,C1.dependencies={lanes:0,firstContext:e}}else em=em.next=e;return t}var rf=null;function AI(e){rf===null?rf=[e]:rf.push(e)}function C5(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,AI(t)):(r.next=o.next,o.next=r),t.interleaved=r,xu(e,n)}function xu(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fh=!1;function II(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k5(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mh(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ei&2){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,xu(e,r)}return o=n.interleaved,o===null?(t.next=t,AI(n)):(t.next=o.next,o.next=t),n.interleaved=t,xu(e,r)}function x_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pI(e,r)}}function ED(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?o=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?o=f=t:f=f.next=t}else o=f=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:f,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function k1(e,t,r,n){var o=e.updateQueue;fh=!1;var f=o.firstBaseUpdate,y=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var k=s,I=k.next;k.next=null,y===null?f=I:y.next=I,y=k;var D=e.alternate;D!==null&&(D=D.updateQueue,s=D.lastBaseUpdate,s!==y&&(s===null?D.firstBaseUpdate=I:s.next=I,D.lastBaseUpdate=k))}if(f!==null){var N=o.baseState;y=0,D=I=k=null,s=f;do{var U=s.lane,q=s.eventTime;if((n&U)===U){D!==null&&(D=D.next={eventTime:q,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var Z=e,ae=s;switch(U=t,q=r,ae.tag){case 1:if(Z=ae.payload,typeof Z=="function"){N=Z.call(q,N,U);break e}N=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=ae.payload,U=typeof Z=="function"?Z.call(q,N,U):Z,U==null)break e;N=Ss({},N,U);break e;case 2:fh=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,U=o.effects,U===null?o.effects=[s]:U.push(s))}else q={eventTime:q,lane:U,tag:s.tag,payload:s.payload,callback:s.callback,next:null},D===null?(I=D=q,k=N):D=D.next=q,y|=U;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;U=s,s=U.next,U.next=null,o.lastBaseUpdate=U,o.shared.pending=null}}while(1);if(D===null&&(k=N),o.baseState=k,o.firstBaseUpdate=I,o.lastBaseUpdate=D,t=o.shared.interleaved,t!==null){o=t;do y|=o.lane,o=o.next;while(o!==t)}else f===null&&(o.shared.lanes=0);Cf|=y,e.lanes=y,e.memoizedState=N}}function TD(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(yr(191,o));o.call(n)}}}var E5=new CF.Component().refs;function lT(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ss({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Pw={isMounted:function(e){return(e=e._reactInternals)?zf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xo(),o=Oh(e),f=hu(n,o);f.payload=t,r!=null&&(f.callback=r),t=Mh(e,f,o),t!==null&&(zl(t,e,o,n),x_(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xo(),o=Oh(e),f=hu(n,o);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Mh(e,f,o),t!==null&&(zl(t,e,o,n),x_(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xo(),n=Oh(e),o=hu(r,n);o.tag=2,t!=null&&(o.callback=t),t=Mh(e,o,n),t!==null&&(zl(t,e,n,r),x_(t,e,n))}};function AD(e,t,r,n,o,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,f,y):t.prototype&&t.prototype.isPureReactComponent?!Gx(r,n)||!Gx(o,f):!0}function T5(e,t,r){var n=!1,o=qh,f=t.contextType;return typeof f=="object"&&f!==null?f=ll(f):(o=ga(t)?_f:No.current,n=t.contextTypes,f=(n=n!=null)?Rm(e,o):qh),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pw,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=f),t}function ID(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Pw.enqueueReplaceState(t,t.state,null)}function cT(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=E5,II(e);var f=t.contextType;typeof f=="object"&&f!==null?o.context=ll(f):(f=ga(t)?_f:No.current,o.context=Rm(e,f)),o.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(lT(e,t,f,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Pw.enqueueReplaceState(o,o.state,null),k1(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ny(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(yr(309));var n=r.stateNode}if(!n)throw Error(yr(147,e));var o=n,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(y){var s=o.refs;s===E5&&(s=o.refs={}),y===null?delete s[f]:s[f]=y},t._stringRef=f,t)}if(typeof e!="string")throw Error(yr(284));if(!r._owner)throw Error(yr(290,e))}return e}function Mb(e,t){throw e=Object.prototype.toString.call(t),Error(yr(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function PD(e){var t=e._init;return t(e._payload)}function A5(e){function t(ie,W){if(e){var K=ie.deletions;K===null?(ie.deletions=[W],ie.flags|=16):K.push(W)}}function r(ie,W){if(!e)return null;for(;W!==null;)t(ie,W),W=W.sibling;return null}function n(ie,W){for(ie=new Map;W!==null;)W.key!==null?ie.set(W.key,W):ie.set(W.index,W),W=W.sibling;return ie}function o(ie,W){return ie=Dh(ie,W),ie.index=0,ie.sibling=null,ie}function f(ie,W,K){return ie.index=K,e?(K=ie.alternate,K!==null?(K=K.index,K<W?(ie.flags|=2,W):K):(ie.flags|=2,W)):(ie.flags|=1048576,W)}function y(ie){return e&&ie.alternate===null&&(ie.flags|=2),ie}function s(ie,W,K,he){return W===null||W.tag!==6?(W=ik(K,ie.mode,he),W.return=ie,W):(W=o(W,K),W.return=ie,W)}function k(ie,W,K,he){var de=K.type;return de===Gp?D(ie,W,K.props.children,he,K.key):W!==null&&(W.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===dh&&PD(de)===W.type)?(he=o(W,K.props),he.ref=Ny(ie,W,K),he.return=ie,he):(he=C_(K.type,K.key,K.props,null,ie.mode,he),he.ref=Ny(ie,W,K),he.return=ie,he)}function I(ie,W,K,he){return W===null||W.tag!==4||W.stateNode.containerInfo!==K.containerInfo||W.stateNode.implementation!==K.implementation?(W=sk(K,ie.mode,he),W.return=ie,W):(W=o(W,K.children||[]),W.return=ie,W)}function D(ie,W,K,he,de){return W===null||W.tag!==7?(W=hf(K,ie.mode,he,de),W.return=ie,W):(W=o(W,K),W.return=ie,W)}function N(ie,W,K){if(typeof W=="string"&&W!==""||typeof W=="number")return W=ik(""+W,ie.mode,K),W.return=ie,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _b:return K=C_(W.type,W.key,W.props,null,ie.mode,K),K.ref=Ny(ie,null,W),K.return=ie,K;case Wp:return W=sk(W,ie.mode,K),W.return=ie,W;case dh:var he=W._init;return N(ie,he(W._payload),K)}if(ex(W)||My(W))return W=hf(W,ie.mode,K,null),W.return=ie,W;Mb(ie,W)}return null}function U(ie,W,K,he){var de=W!==null?W.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return de!==null?null:s(ie,W,""+K,he);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _b:return K.key===de?k(ie,W,K,he):null;case Wp:return K.key===de?I(ie,W,K,he):null;case dh:return de=K._init,U(ie,W,de(K._payload),he)}if(ex(K)||My(K))return de!==null?null:D(ie,W,K,he,null);Mb(ie,K)}return null}function q(ie,W,K,he,de){if(typeof he=="string"&&he!==""||typeof he=="number")return ie=ie.get(K)||null,s(W,ie,""+he,de);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case _b:return ie=ie.get(he.key===null?K:he.key)||null,k(W,ie,he,de);case Wp:return ie=ie.get(he.key===null?K:he.key)||null,I(W,ie,he,de);case dh:var Ae=he._init;return q(ie,W,K,Ae(he._payload),de)}if(ex(he)||My(he))return ie=ie.get(K)||null,D(W,ie,he,de,null);Mb(W,he)}return null}function Z(ie,W,K,he){for(var de=null,Ae=null,Te=W,Ue=W=0,Pe=null;Te!==null&&Ue<K.length;Ue++){Te.index>Ue?(Pe=Te,Te=null):Pe=Te.sibling;var $e=U(ie,Te,K[Ue],he);if($e===null){Te===null&&(Te=Pe);break}e&&Te&&$e.alternate===null&&t(ie,Te),W=f($e,W,Ue),Ae===null?de=$e:Ae.sibling=$e,Ae=$e,Te=Pe}if(Ue===K.length)return r(ie,Te),cs&&Vd(ie,Ue),de;if(Te===null){for(;Ue<K.length;Ue++)Te=N(ie,K[Ue],he),Te!==null&&(W=f(Te,W,Ue),Ae===null?de=Te:Ae.sibling=Te,Ae=Te);return cs&&Vd(ie,Ue),de}for(Te=n(ie,Te);Ue<K.length;Ue++)Pe=q(Te,ie,Ue,K[Ue],he),Pe!==null&&(e&&Pe.alternate!==null&&Te.delete(Pe.key===null?Ue:Pe.key),W=f(Pe,W,Ue),Ae===null?de=Pe:Ae.sibling=Pe,Ae=Pe);return e&&Te.forEach(function(Ve){return t(ie,Ve)}),cs&&Vd(ie,Ue),de}function ae(ie,W,K,he){var de=My(K);if(typeof de!="function")throw Error(yr(150));if(K=de.call(K),K==null)throw Error(yr(151));for(var Ae=de=null,Te=W,Ue=W=0,Pe=null,$e=K.next();Te!==null&&!$e.done;Ue++,$e=K.next()){Te.index>Ue?(Pe=Te,Te=null):Pe=Te.sibling;var Ve=U(ie,Te,$e.value,he);if(Ve===null){Te===null&&(Te=Pe);break}e&&Te&&Ve.alternate===null&&t(ie,Te),W=f(Ve,W,Ue),Ae===null?de=Ve:Ae.sibling=Ve,Ae=Ve,Te=Pe}if($e.done)return r(ie,Te),cs&&Vd(ie,Ue),de;if(Te===null){for(;!$e.done;Ue++,$e=K.next())$e=N(ie,$e.value,he),$e!==null&&(W=f($e,W,Ue),Ae===null?de=$e:Ae.sibling=$e,Ae=$e);return cs&&Vd(ie,Ue),de}for(Te=n(ie,Te);!$e.done;Ue++,$e=K.next())$e=q(Te,ie,Ue,$e.value,he),$e!==null&&(e&&$e.alternate!==null&&Te.delete($e.key===null?Ue:$e.key),W=f($e,W,Ue),Ae===null?de=$e:Ae.sibling=$e,Ae=$e);return e&&Te.forEach(function(Fe){return t(ie,Fe)}),cs&&Vd(ie,Ue),de}function ve(ie,W,K,he){if(typeof K=="object"&&K!==null&&K.type===Gp&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case _b:e:{for(var de=K.key,Ae=W;Ae!==null;){if(Ae.key===de){if(de=K.type,de===Gp){if(Ae.tag===7){r(ie,Ae.sibling),W=o(Ae,K.props.children),W.return=ie,ie=W;break e}}else if(Ae.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===dh&&PD(de)===Ae.type){r(ie,Ae.sibling),W=o(Ae,K.props),W.ref=Ny(ie,Ae,K),W.return=ie,ie=W;break e}r(ie,Ae);break}else t(ie,Ae);Ae=Ae.sibling}K.type===Gp?(W=hf(K.props.children,ie.mode,he,K.key),W.return=ie,ie=W):(he=C_(K.type,K.key,K.props,null,ie.mode,he),he.ref=Ny(ie,W,K),he.return=ie,ie=he)}return y(ie);case Wp:e:{for(Ae=K.key;W!==null;){if(W.key===Ae)if(W.tag===4&&W.stateNode.containerInfo===K.containerInfo&&W.stateNode.implementation===K.implementation){r(ie,W.sibling),W=o(W,K.children||[]),W.return=ie,ie=W;break e}else{r(ie,W);break}else t(ie,W);W=W.sibling}W=sk(K,ie.mode,he),W.return=ie,ie=W}return y(ie);case dh:return Ae=K._init,ve(ie,W,Ae(K._payload),he)}if(ex(K))return Z(ie,W,K,he);if(My(K))return ae(ie,W,K,he);Mb(ie,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,W!==null&&W.tag===6?(r(ie,W.sibling),W=o(W,K),W.return=ie,ie=W):(r(ie,W),W=ik(K,ie.mode,he),W.return=ie,ie=W),y(ie)):r(ie,W)}return ve}var Lm=A5(!0),I5=A5(!1),Mv={},xc=rd(Mv),Zx=rd(Mv),Kx=rd(Mv);function nf(e){if(e===Mv)throw Error(yr(174));return e}function PI(e,t){switch(Xi(Kx,t),Xi(Zx,e),Xi(xc,Mv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$E(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$E(t,e)}ns(xc),Xi(xc,t)}function Om(){ns(xc),ns(Zx),ns(Kx)}function P5(e){nf(Kx.current);var t=nf(xc.current),r=$E(t,e.type);t!==r&&(Xi(Zx,e),Xi(xc,r))}function RI(e){Zx.current===e&&(ns(xc),ns(Zx))}var vs=rd(0);function E1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var JC=[];function MI(){for(var e=0;e<JC.length;e++)JC[e]._workInProgressVersionPrimary=null;JC.length=0}var v_=ku.ReactCurrentDispatcher,QC=ku.ReactCurrentBatchConfig,Sf=0,_s=null,to=null,ho=null,T1=!1,xx=!1,Jx=0,FX=0;function Ro(){throw Error(yr(321))}function LI(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!jl(e[r],t[r]))return!1;return!0}function OI(e,t,r,n,o,f){if(Sf=f,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,v_.current=e===null||e.memoizedState===null?VX:HX,e=r(n,o),xx){f=0;do{if(xx=!1,Jx=0,25<=f)throw Error(yr(301));f+=1,ho=to=null,t.updateQueue=null,v_.current=WX,e=r(n,o)}while(xx)}if(v_.current=A1,t=to!==null&&to.next!==null,Sf=0,ho=to=_s=null,T1=!1,t)throw Error(yr(300));return e}function DI(){var e=Jx!==0;return Jx=0,e}function ic(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?_s.memoizedState=ho=e:ho=ho.next=e,ho}function cl(){if(to===null){var e=_s.alternate;e=e!==null?e.memoizedState:null}else e=to.next;var t=ho===null?_s.memoizedState:ho.next;if(t!==null)ho=t,to=e;else{if(e===null)throw Error(yr(310));to=e,e={memoizedState:to.memoizedState,baseState:to.baseState,baseQueue:to.baseQueue,queue:to.queue,next:null},ho===null?_s.memoizedState=ho=e:ho=ho.next=e}return ho}function Qx(e,t){return typeof t=="function"?t(e):t}function ek(e){var t=cl(),r=t.queue;if(r===null)throw Error(yr(311));r.lastRenderedReducer=e;var n=to,o=n.baseQueue,f=r.pending;if(f!==null){if(o!==null){var y=o.next;o.next=f.next,f.next=y}n.baseQueue=o=f,r.pending=null}if(o!==null){f=o.next,n=n.baseState;var s=y=null,k=null,I=f;do{var D=I.lane;if((Sf&D)===D)k!==null&&(k=k.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),n=I.hasEagerState?I.eagerState:e(n,I.action);else{var N={lane:D,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};k===null?(s=k=N,y=n):k=k.next=N,_s.lanes|=D,Cf|=D}I=I.next}while(I!==null&&I!==f);k===null?y=n:k.next=s,jl(n,t.memoizedState)||(fa=!0),t.memoizedState=n,t.baseState=y,t.baseQueue=k,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do f=o.lane,_s.lanes|=f,Cf|=f,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function tk(e){var t=cl(),r=t.queue;if(r===null)throw Error(yr(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,f=t.memoizedState;if(o!==null){r.pending=null;var y=o=o.next;do f=e(f,y.action),y=y.next;while(y!==o);jl(f,t.memoizedState)||(fa=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,n]}function R5(){}function M5(e,t){var r=_s,n=cl(),o=t(),f=!jl(n.memoizedState,o);if(f&&(n.memoizedState=o,fa=!0),n=n.queue,zI(D5.bind(null,r,n,e),[e]),n.getSnapshot!==t||f||ho!==null&&ho.memoizedState.tag&1){if(r.flags|=2048,ev(9,O5.bind(null,r,n,o,t),void 0,null),mo===null)throw Error(yr(349));Sf&30||L5(r,t,o)}return o}function L5(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_s.updateQueue,t===null?(t={lastEffect:null,stores:null},_s.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function O5(e,t,r,n){t.value=r,t.getSnapshot=n,z5(t)&&N5(e)}function D5(e,t,r){return r(function(){z5(t)&&N5(e)})}function z5(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jl(e,r)}catch{return!0}}function N5(e){var t=xu(e,1);t!==null&&zl(t,e,1,-1)}function RD(e){var t=ic();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qx,lastRenderedState:e},t.queue=e,e=e.dispatch=UX.bind(null,_s,e),[t.memoizedState,e]}function ev(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_s.updateQueue,t===null?(t={lastEffect:null,stores:null},_s.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function j5(){return cl().memoizedState}function b_(e,t,r,n){var o=ic();_s.flags|=e,o.memoizedState=ev(1|t,r,void 0,n===void 0?null:n)}function Rw(e,t,r,n){var o=cl();n=n===void 0?null:n;var f=void 0;if(to!==null){var y=to.memoizedState;if(f=y.destroy,n!==null&&LI(n,y.deps)){o.memoizedState=ev(t,r,f,n);return}}_s.flags|=e,o.memoizedState=ev(1|t,r,f,n)}function MD(e,t){return b_(8390656,8,e,t)}function zI(e,t){return Rw(2048,8,e,t)}function F5(e,t){return Rw(4,2,e,t)}function B5(e,t){return Rw(4,4,e,t)}function $5(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function U5(e,t,r){return r=r!=null?r.concat([e]):null,Rw(4,4,$5.bind(null,t,e),r)}function NI(){}function V5(e,t){var r=cl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&LI(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function H5(e,t){var r=cl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&LI(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function W5(e,t,r){return Sf&21?(jl(r,t)||(r=qF(),_s.lanes|=r,Cf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,fa=!0),e.memoizedState=r)}function BX(e,t){var r=Ri;Ri=r!==0&&4>r?r:4,e(!0);var n=QC.transition;QC.transition={};try{e(!1),t()}finally{Ri=r,QC.transition=n}}function G5(){return cl().memoizedState}function $X(e,t,r){var n=Oh(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},X5(e))q5(t,r);else if(r=C5(e,t,r,n),r!==null){var o=Xo();zl(r,e,n,o),Y5(r,t,n)}}function UX(e,t,r){var n=Oh(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(X5(e))q5(t,o);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var y=t.lastRenderedState,s=f(y,r);if(o.hasEagerState=!0,o.eagerState=s,jl(s,y)){var k=t.interleaved;k===null?(o.next=o,AI(t)):(o.next=k.next,k.next=o),t.interleaved=o;return}}catch{}finally{}r=C5(e,t,o,n),r!==null&&(o=Xo(),zl(r,e,n,o),Y5(r,t,n))}}function X5(e){var t=e.alternate;return e===_s||t!==null&&t===_s}function q5(e,t){xx=T1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Y5(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,pI(e,r)}}var A1={readContext:ll,useCallback:Ro,useContext:Ro,useEffect:Ro,useImperativeHandle:Ro,useInsertionEffect:Ro,useLayoutEffect:Ro,useMemo:Ro,useReducer:Ro,useRef:Ro,useState:Ro,useDebugValue:Ro,useDeferredValue:Ro,useTransition:Ro,useMutableSource:Ro,useSyncExternalStore:Ro,useId:Ro,unstable_isNewReconciler:!1},VX={readContext:ll,useCallback:function(e,t){return ic().memoizedState=[e,t===void 0?null:t],e},useContext:ll,useEffect:MD,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,b_(4194308,4,$5.bind(null,t,e),r)},useLayoutEffect:function(e,t){return b_(4194308,4,e,t)},useInsertionEffect:function(e,t){return b_(4,2,e,t)},useMemo:function(e,t){var r=ic();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ic();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$X.bind(null,_s,e),[n.memoizedState,e]},useRef:function(e){var t=ic();return e={current:e},t.memoizedState=e},useState:RD,useDebugValue:NI,useDeferredValue:function(e){return ic().memoizedState=e},useTransition:function(){var e=RD(!1),t=e[0];return e=BX.bind(null,e[1]),ic().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_s,o=ic();if(cs){if(r===void 0)throw Error(yr(407));r=r()}else{if(r=t(),mo===null)throw Error(yr(349));Sf&30||L5(n,t,r)}o.memoizedState=r;var f={value:r,getSnapshot:t};return o.queue=f,MD(D5.bind(null,n,f,e),[e]),n.flags|=2048,ev(9,O5.bind(null,n,f,r,t),void 0,null),r},useId:function(){var e=ic(),t=mo.identifierPrefix;if(cs){var r=su,n=iu;r=(n&~(1<<32-Dl(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Jx++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=FX++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HX={readContext:ll,useCallback:V5,useContext:ll,useEffect:zI,useImperativeHandle:U5,useInsertionEffect:F5,useLayoutEffect:B5,useMemo:H5,useReducer:ek,useRef:j5,useState:function(){return ek(Qx)},useDebugValue:NI,useDeferredValue:function(e){var t=cl();return W5(t,to.memoizedState,e)},useTransition:function(){var e=ek(Qx)[0],t=cl().memoizedState;return[e,t]},useMutableSource:R5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1},WX={readContext:ll,useCallback:V5,useContext:ll,useEffect:zI,useImperativeHandle:U5,useInsertionEffect:F5,useLayoutEffect:B5,useMemo:H5,useReducer:tk,useRef:j5,useState:function(){return tk(Qx)},useDebugValue:NI,useDeferredValue:function(e){var t=cl();return to===null?t.memoizedState=e:W5(t,to.memoizedState,e)},useTransition:function(){var e=tk(Qx)[0],t=cl().memoizedState;return[e,t]},useMutableSource:R5,useSyncExternalStore:M5,useId:G5,unstable_isNewReconciler:!1};function Dm(e,t){try{var r="",n=t;do r+=v7(n),n=n.return;while(n);var o=r}catch(f){o=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:o,digest:null}}function rk(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uT(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var GX=typeof WeakMap=="function"?WeakMap:Map;function Z5(e,t,r){r=hu(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){P1||(P1=!0,bT=n),uT(e,t)},r}function K5(e,t,r){r=hu(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){uT(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){uT(e,t),typeof n!="function"&&(Lh===null?Lh=new Set([this]):Lh.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function LD(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new GX;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=oq.bind(null,e,t,r),t.then(e,e))}function OD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function DD(e,t,r,n,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hu(-1,1),t.tag=2,Mh(r,t,1))),r.lanes|=1),e)}var XX=ku.ReactCurrentOwner,fa=!1;function Wo(e,t,r,n){t.child=e===null?I5(t,null,r,n):Lm(t,e.child,r,n)}function zD(e,t,r,n,o){r=r.render;var f=t.ref;return vm(t,o),n=OI(e,t,r,n,f,o),r=DI(),e!==null&&!fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,vu(e,t,o)):(cs&&r&&wI(t),t.flags|=1,Wo(e,t,n,o),t.child)}function ND(e,t,r,n,o){if(e===null){var f=r.type;return typeof f=="function"&&!WI(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,J5(e,t,f,n,o)):(e=C_(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&o)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:Gx,r(y,n)&&e.ref===t.ref)return vu(e,t,o)}return t.flags|=1,e=Dh(f,n),e.ref=t.ref,e.return=t,t.child=e}function J5(e,t,r,n,o){if(e!==null){var f=e.memoizedProps;if(Gx(f,n)&&e.ref===t.ref)if(fa=!1,t.pendingProps=n=f,(e.lanes&o)!==0)e.flags&131072&&(fa=!0);else return t.lanes=e.lanes,vu(e,t,o)}return hT(e,t,r,n,o)}function Q5(e,t,r){var n=t.pendingProps,o=n.children,f=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xi(rm,Aa),Aa|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xi(rm,Aa),Aa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=f!==null?f.baseLanes:r,Xi(rm,Aa),Aa|=n}else f!==null?(n=f.baseLanes|r,t.memoizedState=null):n=r,Xi(rm,Aa),Aa|=n;return Wo(e,t,o,r),t.child}function eB(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function hT(e,t,r,n,o){var f=ga(r)?_f:No.current;return f=Rm(t,f),vm(t,o),r=OI(e,t,r,n,f,o),n=DI(),e!==null&&!fa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,vu(e,t,o)):(cs&&n&&wI(t),t.flags|=1,Wo(e,t,r,o),t.child)}function jD(e,t,r,n,o){if(ga(r)){var f=!0;b1(t)}else f=!1;if(vm(t,o),t.stateNode===null)__(e,t),T5(t,r,n),cT(t,r,n,o),n=!0;else if(e===null){var y=t.stateNode,s=t.memoizedProps;y.props=s;var k=y.context,I=r.contextType;typeof I=="object"&&I!==null?I=ll(I):(I=ga(r)?_f:No.current,I=Rm(t,I));var D=r.getDerivedStateFromProps,N=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function";N||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(s!==n||k!==I)&&ID(t,y,n,I),fh=!1;var U=t.memoizedState;y.state=U,k1(t,n,y,o),k=t.memoizedState,s!==n||U!==k||ma.current||fh?(typeof D=="function"&&(lT(t,r,D,n),k=t.memoizedState),(s=fh||AD(t,r,s,n,U,k,I))?(N||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=k),y.props=n,y.state=k,y.context=I,n=s):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{y=t.stateNode,k5(e,t),s=t.memoizedProps,I=t.type===t.elementType?s:Il(t.type,s),y.props=I,N=t.pendingProps,U=y.context,k=r.contextType,typeof k=="object"&&k!==null?k=ll(k):(k=ga(r)?_f:No.current,k=Rm(t,k));var q=r.getDerivedStateFromProps;(D=typeof q=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(s!==N||U!==k)&&ID(t,y,n,k),fh=!1,U=t.memoizedState,y.state=U,k1(t,n,y,o);var Z=t.memoizedState;s!==N||U!==Z||ma.current||fh?(typeof q=="function"&&(lT(t,r,q,n),Z=t.memoizedState),(I=fh||AD(t,r,I,n,U,Z,k)||!1)?(D||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(n,Z,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(n,Z,k)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||s===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=Z),y.props=n,y.state=Z,y.context=k,n=I):(typeof y.componentDidUpdate!="function"||s===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),n=!1)}return dT(e,t,r,n,f,o)}function dT(e,t,r,n,o,f){eB(e,t);var y=(t.flags&128)!==0;if(!n&&!y)return o&&SD(t,r,!1),vu(e,t,f);n=t.stateNode,XX.current=t;var s=y&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&y?(t.child=Lm(t,e.child,null,f),t.child=Lm(t,null,s,f)):Wo(e,t,s,f),t.memoizedState=n.state,o&&SD(t,r,!0),t.child}function tB(e){var t=e.stateNode;t.pendingContext?wD(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wD(e,t.context,!1),PI(e,t.containerInfo)}function FD(e,t,r,n,o){return Mm(),CI(o),t.flags|=256,Wo(e,t,r,n),t.child}var fT={dehydrated:null,treeContext:null,retryLane:0};function pT(e){return{baseLanes:e,cachePool:null,transitions:null}}function rB(e,t,r){var n=t.pendingProps,o=vs.current,f=!1,y=(t.flags&128)!==0,s;if((s=y)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Xi(vs,o&1),e===null)return oT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=n.children,e=n.fallback,f?(n=t.mode,f=t.child,y={mode:"hidden",children:y},!(n&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Ow(y,n,0,null),e=hf(e,n,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=pT(r),t.memoizedState=fT,e):jI(t,y));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return qX(e,t,y,n,s,o,r);if(f){f=n.fallback,y=t.mode,o=e.child,s=o.sibling;var k={mode:"hidden",children:n.children};return!(y&1)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=k,t.deletions=null):(n=Dh(o,k),n.subtreeFlags=o.subtreeFlags&14680064),s!==null?f=Dh(s,f):(f=hf(f,y,r,null),f.flags|=2),f.return=t,n.return=t,n.sibling=f,t.child=n,n=f,f=t.child,y=e.child.memoizedState,y=y===null?pT(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=e.childLanes&~r,t.memoizedState=fT,n}return f=e.child,e=f.sibling,n=Dh(f,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jI(e,t){return t=Ow({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Lb(e,t,r,n){return n!==null&&CI(n),Lm(t,e.child,null,r),e=jI(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qX(e,t,r,n,o,f,y){if(r)return t.flags&256?(t.flags&=-257,n=rk(Error(yr(422))),Lb(e,t,y,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=n.fallback,o=t.mode,n=Ow({mode:"visible",children:n.children},o,0,null),f=hf(f,o,y,null),f.flags|=2,n.return=t,f.return=t,n.sibling=f,t.child=n,t.mode&1&&Lm(t,e.child,null,y),t.child.memoizedState=pT(y),t.memoizedState=fT,f);if(!(t.mode&1))return Lb(e,t,y,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var s=n.dgst;return n=s,f=Error(yr(419)),n=rk(f,n,void 0),Lb(e,t,y,n)}if(s=(y&e.childLanes)!==0,fa||s){if(n=mo,n!==null){switch(y&-y){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|y)?0:o,o!==0&&o!==f.retryLane&&(f.retryLane=o,xu(e,o),zl(n,e,o,-1))}return HI(),n=rk(Error(yr(421))),Lb(e,t,y,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=aq.bind(null,e),o._reactRetry=t,null):(e=f.treeContext,Ra=Rh(o.nextSibling),La=t,cs=!0,Ml=null,e!==null&&(tl[rl++]=iu,tl[rl++]=su,tl[rl++]=wf,iu=e.id,su=e.overflow,wf=t),t=jI(t,n.children),t.flags|=4096,t)}function BD(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),aT(e.return,t,r)}function nk(e,t,r,n,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=r,f.tailMode=o)}function nB(e,t,r){var n=t.pendingProps,o=n.revealOrder,f=n.tail;if(Wo(e,t,n.children,r),n=vs.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BD(e,r,t);else if(e.tag===19)BD(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Xi(vs,n),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&E1(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),nk(t,!1,o,r,f);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&E1(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}nk(t,!0,r,null,f);break;case"together":nk(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function __(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Cf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(yr(153));if(t.child!==null){for(e=t.child,r=Dh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function YX(e,t,r){switch(t.tag){case 3:tB(t),Mm();break;case 5:P5(t);break;case 1:ga(t.type)&&b1(t);break;case 4:PI(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;Xi(S1,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xi(vs,vs.current&1),t.flags|=128,null):r&t.child.childLanes?rB(e,t,r):(Xi(vs,vs.current&1),e=vu(e,t,r),e!==null?e.sibling:null);Xi(vs,vs.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return nB(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Xi(vs,vs.current),n)break;return null;case 22:case 23:return t.lanes=0,Q5(e,t,r)}return vu(e,t,r)}var iB,mT,sB,oB;iB=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mT=function(){};sB=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,nf(xc.current);var f=null;switch(r){case"input":o=NE(e,o),n=NE(e,n),f=[];break;case"select":o=Ss({},o,{value:void 0}),n=Ss({},n,{value:void 0}),f=[];break;case"textarea":o=BE(e,o),n=BE(e,n),f=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=x1)}UE(r,n);var y;r=null;for(I in o)if(!n.hasOwnProperty(I)&&o.hasOwnProperty(I)&&o[I]!=null)if(I==="style"){var s=o[I];for(y in s)s.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(Fx.hasOwnProperty(I)?f||(f=[]):(f=f||[]).push(I,null));for(I in n){var k=n[I];if(s=o!=null?o[I]:void 0,n.hasOwnProperty(I)&&k!==s&&(k!=null||s!=null))if(I==="style")if(s){for(y in s)!s.hasOwnProperty(y)||k&&k.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in k)k.hasOwnProperty(y)&&s[y]!==k[y]&&(r||(r={}),r[y]=k[y])}else r||(f||(f=[]),f.push(I,r)),r=k;else I==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,s=s?s.__html:void 0,k!=null&&s!==k&&(f=f||[]).push(I,k)):I==="children"?typeof k!="string"&&typeof k!="number"||(f=f||[]).push(I,""+k):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(Fx.hasOwnProperty(I)?(k!=null&&I==="onScroll"&&Qi("scroll",e),f||s===k||(f=[])):(f=f||[]).push(I,k))}r&&(f=f||[]).push("style",r);var I=f;(t.updateQueue=I)&&(t.flags|=4)}};oB=function(e,t,r,n){r!==n&&(t.flags|=4)};function jy(e,t){if(!cs)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Mo(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ZX(e,t,r){var n=t.pendingProps;switch(SI(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mo(t),null;case 1:return ga(t.type)&&v1(),Mo(t),null;case 3:return n=t.stateNode,Om(),ns(ma),ns(No),MI(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Rb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ml!==null&&(ST(Ml),Ml=null))),mT(e,t),Mo(t),null;case 5:RI(t);var o=nf(Kx.current);if(r=t.type,e!==null&&t.stateNode!=null)sB(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(yr(166));return Mo(t),null}if(e=nf(xc.current),Rb(t)){n=t.stateNode,r=t.type;var f=t.memoizedProps;switch(n[hc]=t,n[Yx]=f,e=(t.mode&1)!==0,r){case"dialog":Qi("cancel",n),Qi("close",n);break;case"iframe":case"object":case"embed":Qi("load",n);break;case"video":case"audio":for(o=0;o<rx.length;o++)Qi(rx[o],n);break;case"source":Qi("error",n);break;case"img":case"image":case"link":Qi("error",n),Qi("load",n);break;case"details":Qi("toggle",n);break;case"input":YO(n,f),Qi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!f.multiple},Qi("invalid",n);break;case"textarea":KO(n,f),Qi("invalid",n)}UE(r,f),o=null;for(var y in f)if(f.hasOwnProperty(y)){var s=f[y];y==="children"?typeof s=="string"?n.textContent!==s&&(f.suppressHydrationWarning!==!0&&Pb(n.textContent,s,e),o=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(f.suppressHydrationWarning!==!0&&Pb(n.textContent,s,e),o=["children",""+s]):Fx.hasOwnProperty(y)&&s!=null&&y==="onScroll"&&Qi("scroll",n)}switch(r){case"input":wb(n),ZO(n,f,!0);break;case"textarea":wb(n),JO(n);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(n.onclick=x1)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{y=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LF(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=y.createElement(r,{is:n.is}):(e=y.createElement(r),r==="select"&&(y=e,n.multiple?y.multiple=!0:n.size&&(y.size=n.size))):e=y.createElementNS(e,r),e[hc]=t,e[Yx]=n,iB(e,t,!1,!1),t.stateNode=e;e:{switch(y=VE(r,n),r){case"dialog":Qi("cancel",e),Qi("close",e),o=n;break;case"iframe":case"object":case"embed":Qi("load",e),o=n;break;case"video":case"audio":for(o=0;o<rx.length;o++)Qi(rx[o],e);o=n;break;case"source":Qi("error",e),o=n;break;case"img":case"image":case"link":Qi("error",e),Qi("load",e),o=n;break;case"details":Qi("toggle",e),o=n;break;case"input":YO(e,n),o=NE(e,n),Qi("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=Ss({},n,{value:void 0}),Qi("invalid",e);break;case"textarea":KO(e,n),o=BE(e,n),Qi("invalid",e);break;default:o=n}UE(r,o),s=o;for(f in s)if(s.hasOwnProperty(f)){var k=s[f];f==="style"?zF(e,k):f==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&OF(e,k)):f==="children"?typeof k=="string"?(r!=="textarea"||k!=="")&&Bx(e,k):typeof k=="number"&&Bx(e,""+k):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Fx.hasOwnProperty(f)?k!=null&&f==="onScroll"&&Qi("scroll",e):k!=null&&lI(e,f,k,y))}switch(r){case"input":wb(e),ZO(e,n,!1);break;case"textarea":wb(e),JO(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Xh(n.value));break;case"select":e.multiple=!!n.multiple,f=n.value,f!=null?mm(e,!!n.multiple,f,!1):n.defaultValue!=null&&mm(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=x1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mo(t),null;case 6:if(e&&t.stateNode!=null)oB(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(yr(166));if(r=nf(Kx.current),nf(xc.current),Rb(t)){if(n=t.stateNode,r=t.memoizedProps,n[hc]=t,(f=n.nodeValue!==r)&&(e=La,e!==null))switch(e.tag){case 3:Pb(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pb(n.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[hc]=t,t.stateNode=n}return Mo(t),null;case 13:if(ns(vs),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cs&&Ra!==null&&t.mode&1&&!(t.flags&128))S5(),Mm(),t.flags|=98560,f=!1;else if(f=Rb(t),n!==null&&n.dehydrated!==null){if(e===null){if(!f)throw Error(yr(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(yr(317));f[hc]=t}else Mm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mo(t),f=!1}else Ml!==null&&(ST(Ml),Ml=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||vs.current&1?ro===0&&(ro=3):HI())),t.updateQueue!==null&&(t.flags|=4),Mo(t),null);case 4:return Om(),mT(e,t),e===null&&Xx(t.stateNode.containerInfo),Mo(t),null;case 10:return TI(t.type._context),Mo(t),null;case 17:return ga(t.type)&&v1(),Mo(t),null;case 19:if(ns(vs),f=t.memoizedState,f===null)return Mo(t),null;if(n=(t.flags&128)!==0,y=f.rendering,y===null)if(n)jy(f,!1);else{if(ro!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=E1(e),y!==null){for(t.flags|=128,jy(f,!1),n=y.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)f=r,e=n,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,e=y.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xi(vs,vs.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ms()>zm&&(t.flags|=128,n=!0,jy(f,!1),t.lanes=4194304)}else{if(!n)if(e=E1(y),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jy(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!cs)return Mo(t),null}else 2*Ms()-f.renderingStartTime>zm&&r!==1073741824&&(t.flags|=128,n=!0,jy(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(r=f.last,r!==null?r.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ms(),t.sibling=null,r=vs.current,Xi(vs,n?r&1|2:r&1),t):(Mo(t),null);case 22:case 23:return VI(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Aa&1073741824&&(Mo(t),t.subtreeFlags&6&&(t.flags|=8192)):Mo(t),null;case 24:return null;case 25:return null}throw Error(yr(156,t.tag))}function KX(e,t){switch(SI(t),t.tag){case 1:return ga(t.type)&&v1(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Om(),ns(ma),ns(No),MI(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return RI(t),null;case 13:if(ns(vs),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(yr(340));Mm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ns(vs),null;case 4:return Om(),null;case 10:return TI(t.type._context),null;case 22:case 23:return VI(),null;case 24:return null;default:return null}}var Ob=!1,Do=!1,JX=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function tm(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ts(e,t,n)}else r.current=null}function gT(e,t,r){try{r()}catch(n){Ts(e,t,n)}}var $D=!1;function QX(e,t){if(QE=m1,e=u5(),_I(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,f=n.focusNode;n=n.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,s=-1,k=-1,I=0,D=0,N=e,U=null;t:for(;;){for(var q;N!==r||o!==0&&N.nodeType!==3||(s=y+o),N!==f||n!==0&&N.nodeType!==3||(k=y+n),N.nodeType===3&&(y+=N.nodeValue.length),(q=N.firstChild)!==null;)U=N,N=q;for(;;){if(N===e)break t;if(U===r&&++I===o&&(s=y),U===f&&++D===n&&(k=y),(q=N.nextSibling)!==null)break;N=U,U=N.parentNode}N=q}r=s===-1||k===-1?null:{start:s,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(eT={focusedElem:e,selectionRange:r},m1=!1,Fr=t;Fr!==null;)if(t=Fr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fr=e;else for(;Fr!==null;){t=Fr;try{var Z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var ae=Z.memoizedProps,ve=Z.memoizedState,ie=t.stateNode,W=ie.getSnapshotBeforeUpdate(t.elementType===t.type?ae:Il(t.type,ae),ve);ie.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var K=t.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(yr(163))}}catch(he){Ts(t,t.return,he)}if(e=t.sibling,e!==null){e.return=t.return,Fr=e;break}Fr=t.return}return Z=$D,$D=!1,Z}function vx(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var f=o.destroy;o.destroy=void 0,f!==void 0&&gT(t,r,f)}o=o.next}while(o!==n)}}function Mw(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function yT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function aB(e){var t=e.alternate;t!==null&&(e.alternate=null,aB(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hc],delete t[Yx],delete t[nT],delete t[DX],delete t[zX])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lB(e){return e.tag===5||e.tag===3||e.tag===4}function UD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lB(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=x1));else if(n!==4&&(e=e.child,e!==null))for(xT(e,t,r),e=e.sibling;e!==null;)xT(e,t,r),e=e.sibling}function vT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(vT(e,t,r),e=e.sibling;e!==null;)vT(e,t,r),e=e.sibling}var bo=null,Pl=!1;function th(e,t,r){for(r=r.child;r!==null;)cB(e,t,r),r=r.sibling}function cB(e,t,r){if(yc&&typeof yc.onCommitFiberUnmount=="function")try{yc.onCommitFiberUnmount(Cw,r)}catch{}switch(r.tag){case 5:Do||tm(r,t);case 6:var n=bo,o=Pl;bo=null,th(e,t,r),bo=n,Pl=o,bo!==null&&(Pl?(e=bo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):bo.removeChild(r.stateNode));break;case 18:bo!==null&&(Pl?(e=bo,r=r.stateNode,e.nodeType===8?ZC(e.parentNode,r):e.nodeType===1&&ZC(e,r),Hx(e)):ZC(bo,r.stateNode));break;case 4:n=bo,o=Pl,bo=r.stateNode.containerInfo,Pl=!0,th(e,t,r),bo=n,Pl=o;break;case 0:case 11:case 14:case 15:if(!Do&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var f=o,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&gT(r,t,y),o=o.next}while(o!==n)}th(e,t,r);break;case 1:if(!Do&&(tm(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ts(r,t,s)}th(e,t,r);break;case 21:th(e,t,r);break;case 22:r.mode&1?(Do=(n=Do)||r.memoizedState!==null,th(e,t,r),Do=n):th(e,t,r);break;default:th(e,t,r)}}function VD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new JX),t.forEach(function(n){var o=lq.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function kl(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var f=e,y=t,s=y;e:for(;s!==null;){switch(s.tag){case 5:bo=s.stateNode,Pl=!1;break e;case 3:bo=s.stateNode.containerInfo,Pl=!0;break e;case 4:bo=s.stateNode.containerInfo,Pl=!0;break e}s=s.return}if(bo===null)throw Error(yr(160));cB(f,y,o),bo=null,Pl=!1;var k=o.alternate;k!==null&&(k.return=null),o.return=null}catch(I){Ts(o,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uB(t,e),t=t.sibling}function uB(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kl(t,e),tc(e),n&4){try{vx(3,e,e.return),Mw(3,e)}catch(ae){Ts(e,e.return,ae)}try{vx(5,e,e.return)}catch(ae){Ts(e,e.return,ae)}}break;case 1:kl(t,e),tc(e),n&512&&r!==null&&tm(r,r.return);break;case 5:if(kl(t,e),tc(e),n&512&&r!==null&&tm(r,r.return),e.flags&32){var o=e.stateNode;try{Bx(o,"")}catch(ae){Ts(e,e.return,ae)}}if(n&4&&(o=e.stateNode,o!=null)){var f=e.memoizedProps,y=r!==null?r.memoizedProps:f,s=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{s==="input"&&f.type==="radio"&&f.name!=null&&RF(o,f),VE(s,y);var I=VE(s,f);for(y=0;y<k.length;y+=2){var D=k[y],N=k[y+1];D==="style"?zF(o,N):D==="dangerouslySetInnerHTML"?OF(o,N):D==="children"?Bx(o,N):lI(o,D,N,I)}switch(s){case"input":jE(o,f);break;case"textarea":MF(o,f);break;case"select":var U=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!f.multiple;var q=f.value;q!=null?mm(o,!!f.multiple,q,!1):U!==!!f.multiple&&(f.defaultValue!=null?mm(o,!!f.multiple,f.defaultValue,!0):mm(o,!!f.multiple,f.multiple?[]:"",!1))}o[Yx]=f}catch(ae){Ts(e,e.return,ae)}}break;case 6:if(kl(t,e),tc(e),n&4){if(e.stateNode===null)throw Error(yr(162));o=e.stateNode,f=e.memoizedProps;try{o.nodeValue=f}catch(ae){Ts(e,e.return,ae)}}break;case 3:if(kl(t,e),tc(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hx(t.containerInfo)}catch(ae){Ts(e,e.return,ae)}break;case 4:kl(t,e),tc(e);break;case 13:kl(t,e),tc(e),o=e.child,o.flags&8192&&(f=o.memoizedState!==null,o.stateNode.isHidden=f,!f||o.alternate!==null&&o.alternate.memoizedState!==null||($I=Ms())),n&4&&VD(e);break;case 22:if(D=r!==null&&r.memoizedState!==null,e.mode&1?(Do=(I=Do)||D,kl(t,e),Do=I):kl(t,e),tc(e),n&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!D&&e.mode&1)for(Fr=e,D=e.child;D!==null;){for(N=Fr=D;Fr!==null;){switch(U=Fr,q=U.child,U.tag){case 0:case 11:case 14:case 15:vx(4,U,U.return);break;case 1:tm(U,U.return);var Z=U.stateNode;if(typeof Z.componentWillUnmount=="function"){n=U,r=U.return;try{t=n,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch(ae){Ts(n,r,ae)}}break;case 5:tm(U,U.return);break;case 22:if(U.memoizedState!==null){WD(N);continue}}q!==null?(q.return=U,Fr=q):WD(N)}D=D.sibling}e:for(D=null,N=e;;){if(N.tag===5){if(D===null){D=N;try{o=N.stateNode,I?(f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(s=N.stateNode,k=N.memoizedProps.style,y=k!=null&&k.hasOwnProperty("display")?k.display:null,s.style.display=DF("display",y))}catch(ae){Ts(e,e.return,ae)}}}else if(N.tag===6){if(D===null)try{N.stateNode.nodeValue=I?"":N.memoizedProps}catch(ae){Ts(e,e.return,ae)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;D===N&&(D=null),N=N.return}D===N&&(D=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:kl(t,e),tc(e),n&4&&VD(e);break;case 21:break;default:kl(t,e),tc(e)}}function tc(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(lB(r)){var n=r;break e}r=r.return}throw Error(yr(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(Bx(o,""),n.flags&=-33);var f=UD(e);vT(e,f,o);break;case 3:case 4:var y=n.stateNode.containerInfo,s=UD(e);xT(e,s,y);break;default:throw Error(yr(161))}}catch(k){Ts(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eq(e,t,r){Fr=e,hB(e)}function hB(e,t,r){for(var n=(e.mode&1)!==0;Fr!==null;){var o=Fr,f=o.child;if(o.tag===22&&n){var y=o.memoizedState!==null||Ob;if(!y){var s=o.alternate,k=s!==null&&s.memoizedState!==null||Do;s=Ob;var I=Do;if(Ob=y,(Do=k)&&!I)for(Fr=o;Fr!==null;)y=Fr,k=y.child,y.tag===22&&y.memoizedState!==null?GD(o):k!==null?(k.return=y,Fr=k):GD(o);for(;f!==null;)Fr=f,hB(f),f=f.sibling;Fr=o,Ob=s,Do=I}HD(e)}else o.subtreeFlags&8772&&f!==null?(f.return=o,Fr=f):HD(e)}}function HD(e){for(;Fr!==null;){var t=Fr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Do||Mw(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Do)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:Il(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&TD(t,f,n);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}TD(t,y,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&r.focus();break;case"img":k.src&&(r.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var D=I.memoizedState;if(D!==null){var N=D.dehydrated;N!==null&&Hx(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(yr(163))}Do||t.flags&512&&yT(t)}catch(U){Ts(t,t.return,U)}}if(t===e){Fr=null;break}if(r=t.sibling,r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function WD(e){for(;Fr!==null;){var t=Fr;if(t===e){Fr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function GD(e){for(;Fr!==null;){var t=Fr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Mw(4,t)}catch(k){Ts(t,r,k)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(k){Ts(t,o,k)}}var f=t.return;try{yT(t)}catch(k){Ts(t,f,k)}break;case 5:var y=t.return;try{yT(t)}catch(k){Ts(t,y,k)}}}catch(k){Ts(t,t.return,k)}if(t===e){Fr=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Fr=s;break}Fr=t.return}}var tq=Math.ceil,I1=ku.ReactCurrentDispatcher,FI=ku.ReactCurrentOwner,sl=ku.ReactCurrentBatchConfig,ei=0,mo=null,Ws=null,wo=0,Aa=0,rm=rd(0),ro=0,tv=null,Cf=0,Lw=0,BI=0,bx=null,ca=null,$I=0,zm=1/0,Kc=null,P1=!1,bT=null,Lh=null,Db=!1,kh=null,R1=0,_x=0,_T=null,w_=-1,S_=0;function Xo(){return ei&6?Ms():w_!==-1?w_:w_=Ms()}function Oh(e){return e.mode&1?ei&2&&wo!==0?wo&-wo:jX.transition!==null?(S_===0&&(S_=qF()),S_):(e=Ri,e!==0||(e=window.event,e=e===void 0?16:t5(e.type)),e):1}function zl(e,t,r,n){if(50<_x)throw _x=0,_T=null,Error(yr(185));Iv(e,r,n),(!(ei&2)||e!==mo)&&(e===mo&&(!(ei&2)&&(Lw|=r),ro===4&&gh(e,wo)),ya(e,n),r===1&&ei===0&&!(t.mode&1)&&(zm=Ms()+500,Iw&&nd()))}function ya(e,t){var r=e.callbackNode;j7(e,t);var n=p1(e,e===mo?wo:0);if(n===0)r!==null&&tD(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tD(r),t===1)e.tag===0?NX(XD.bind(null,e)):b5(XD.bind(null,e)),LX(function(){!(ei&6)&&nd()}),r=null;else{switch(YF(n)){case 1:r=fI;break;case 4:r=GF;break;case 16:r=f1;break;case 536870912:r=XF;break;default:r=f1}r=vB(r,dB.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dB(e,t){if(w_=-1,S_=0,ei&6)throw Error(yr(327));var r=e.callbackNode;if(bm()&&e.callbackNode!==r)return null;var n=p1(e,e===mo?wo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=M1(e,n);else{t=n;var o=ei;ei|=2;var f=pB();(mo!==e||wo!==t)&&(Kc=null,zm=Ms()+500,uf(e,t));do try{iq();break}catch(s){fB(e,s)}while(1);EI(),I1.current=f,ei=o,Ws!==null?t=0:(mo=null,wo=0,t=ro)}if(t!==0){if(t===2&&(o=qE(e),o!==0&&(n=o,t=wT(e,o))),t===1)throw r=tv,uf(e,0),gh(e,n),ya(e,Ms()),r;if(t===6)gh(e,n);else{if(o=e.current.alternate,!(n&30)&&!rq(o)&&(t=M1(e,n),t===2&&(f=qE(e),f!==0&&(n=f,t=wT(e,f))),t===1))throw r=tv,uf(e,0),gh(e,n),ya(e,Ms()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(yr(345));case 2:Hd(e,ca,Kc);break;case 3:if(gh(e,n),(n&130023424)===n&&(t=$I+500-Ms(),10<t)){if(p1(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){Xo(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rT(Hd.bind(null,e,ca,Kc),t);break}Hd(e,ca,Kc);break;case 4:if(gh(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var y=31-Dl(n);f=1<<y,y=t[y],y>o&&(o=y),n&=~f}if(n=o,n=Ms()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tq(n/1960))-n,10<n){e.timeoutHandle=rT(Hd.bind(null,e,ca,Kc),n);break}Hd(e,ca,Kc);break;case 5:Hd(e,ca,Kc);break;default:throw Error(yr(329))}}}return ya(e,Ms()),e.callbackNode===r?dB.bind(null,e):null}function wT(e,t){var r=bx;return e.current.memoizedState.isDehydrated&&(uf(e,t).flags|=256),e=M1(e,t),e!==2&&(t=ca,ca=r,t!==null&&ST(t)),e}function ST(e){ca===null?ca=e:ca.push.apply(ca,e)}function rq(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],f=o.getSnapshot;o=o.value;try{if(!jl(f(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gh(e,t){for(t&=~BI,t&=~Lw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Dl(t),n=1<<r;e[r]=-1,t&=~n}}function XD(e){if(ei&6)throw Error(yr(327));bm();var t=p1(e,0);if(!(t&1))return ya(e,Ms()),null;var r=M1(e,t);if(e.tag!==0&&r===2){var n=qE(e);n!==0&&(t=n,r=wT(e,n))}if(r===1)throw r=tv,uf(e,0),gh(e,t),ya(e,Ms()),r;if(r===6)throw Error(yr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hd(e,ca,Kc),ya(e,Ms()),null}function UI(e,t){var r=ei;ei|=1;try{return e(t)}finally{ei=r,ei===0&&(zm=Ms()+500,Iw&&nd())}}function kf(e){kh!==null&&kh.tag===0&&!(ei&6)&&bm();var t=ei;ei|=1;var r=sl.transition,n=Ri;try{if(sl.transition=null,Ri=1,e)return e()}finally{Ri=n,sl.transition=r,ei=t,!(ei&6)&&nd()}}function VI(){Aa=rm.current,ns(rm)}function uf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,MX(r)),Ws!==null)for(r=Ws.return;r!==null;){var n=r;switch(SI(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&v1();break;case 3:Om(),ns(ma),ns(No),MI();break;case 5:RI(n);break;case 4:Om();break;case 13:ns(vs);break;case 19:ns(vs);break;case 10:TI(n.type._context);break;case 22:case 23:VI()}r=r.return}if(mo=e,Ws=e=Dh(e.current,null),wo=Aa=t,ro=0,tv=null,BI=Lw=Cf=0,ca=bx=null,rf!==null){for(t=0;t<rf.length;t++)if(r=rf[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,f=r.pending;if(f!==null){var y=f.next;f.next=o,n.next=y}r.pending=n}rf=null}return e}function fB(e,t){do{var r=Ws;try{if(EI(),v_.current=A1,T1){for(var n=_s.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}T1=!1}if(Sf=0,ho=to=_s=null,xx=!1,Jx=0,FI.current=null,r===null||r.return===null){ro=1,tv=t,Ws=null;break}e:{var f=e,y=r.return,s=r,k=t;if(t=wo,s.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var I=k,D=s,N=D.tag;if(!(D.mode&1)&&(N===0||N===11||N===15)){var U=D.alternate;U?(D.updateQueue=U.updateQueue,D.memoizedState=U.memoizedState,D.lanes=U.lanes):(D.updateQueue=null,D.memoizedState=null)}var q=OD(y);if(q!==null){q.flags&=-257,DD(q,y,s,f,t),q.mode&1&&LD(f,I,t),t=q,k=I;var Z=t.updateQueue;if(Z===null){var ae=new Set;ae.add(k),t.updateQueue=ae}else Z.add(k);break e}else{if(!(t&1)){LD(f,I,t),HI();break e}k=Error(yr(426))}}else if(cs&&s.mode&1){var ve=OD(y);if(ve!==null){!(ve.flags&65536)&&(ve.flags|=256),DD(ve,y,s,f,t),CI(Dm(k,s));break e}}f=k=Dm(k,s),ro!==4&&(ro=2),bx===null?bx=[f]:bx.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var ie=Z5(f,k,t);ED(f,ie);break e;case 1:s=k;var W=f.type,K=f.stateNode;if(!(f.flags&128)&&(typeof W.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Lh===null||!Lh.has(K)))){f.flags|=65536,t&=-t,f.lanes|=t;var he=K5(f,s,t);ED(f,he);break e}}f=f.return}while(f!==null)}gB(r)}catch(de){t=de,Ws===r&&r!==null&&(Ws=r=r.return);continue}break}while(1)}function pB(){var e=I1.current;return I1.current=A1,e===null?A1:e}function HI(){(ro===0||ro===3||ro===2)&&(ro=4),mo===null||!(Cf&268435455)&&!(Lw&268435455)||gh(mo,wo)}function M1(e,t){var r=ei;ei|=2;var n=pB();(mo!==e||wo!==t)&&(Kc=null,uf(e,t));do try{nq();break}catch(o){fB(e,o)}while(1);if(EI(),ei=r,I1.current=n,Ws!==null)throw Error(yr(261));return mo=null,wo=0,ro}function nq(){for(;Ws!==null;)mB(Ws)}function iq(){for(;Ws!==null&&!I7();)mB(Ws)}function mB(e){var t=xB(e.alternate,e,Aa);e.memoizedProps=e.pendingProps,t===null?gB(e):Ws=t,FI.current=null}function gB(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=KX(r,t),r!==null){r.flags&=32767,Ws=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ro=6,Ws=null;return}}else if(r=ZX(r,t,Aa),r!==null){Ws=r;return}if(t=t.sibling,t!==null){Ws=t;return}Ws=t=e}while(t!==null);ro===0&&(ro=5)}function Hd(e,t,r){var n=Ri,o=sl.transition;try{sl.transition=null,Ri=1,sq(e,t,r,n)}finally{sl.transition=o,Ri=n}return null}function sq(e,t,r,n){do bm();while(kh!==null);if(ei&6)throw Error(yr(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(yr(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(F7(e,f),e===mo&&(Ws=mo=null,wo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Db||(Db=!0,vB(f1,function(){return bm(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=sl.transition,sl.transition=null;var y=Ri;Ri=1;var s=ei;ei|=4,FI.current=null,QX(e,r),uB(r,e),kX(eT),m1=!!QE,eT=QE=null,e.current=r,eq(r),P7(),ei=s,Ri=y,sl.transition=f}else e.current=r;if(Db&&(Db=!1,kh=e,R1=o),f=e.pendingLanes,f===0&&(Lh=null),L7(r.stateNode),ya(e,Ms()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(P1)throw P1=!1,e=bT,bT=null,e;return R1&1&&e.tag!==0&&bm(),f=e.pendingLanes,f&1?e===_T?_x++:(_x=0,_T=e):_x=0,nd(),null}function bm(){if(kh!==null){var e=YF(R1),t=sl.transition,r=Ri;try{if(sl.transition=null,Ri=16>e?16:e,kh===null)var n=!1;else{if(e=kh,kh=null,R1=0,ei&6)throw Error(yr(331));var o=ei;for(ei|=4,Fr=e.current;Fr!==null;){var f=Fr,y=f.child;if(Fr.flags&16){var s=f.deletions;if(s!==null){for(var k=0;k<s.length;k++){var I=s[k];for(Fr=I;Fr!==null;){var D=Fr;switch(D.tag){case 0:case 11:case 15:vx(8,D,f)}var N=D.child;if(N!==null)N.return=D,Fr=N;else for(;Fr!==null;){D=Fr;var U=D.sibling,q=D.return;if(aB(D),D===I){Fr=null;break}if(U!==null){U.return=q,Fr=U;break}Fr=q}}}var Z=f.alternate;if(Z!==null){var ae=Z.child;if(ae!==null){Z.child=null;do{var ve=ae.sibling;ae.sibling=null,ae=ve}while(ae!==null)}}Fr=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,Fr=y;else e:for(;Fr!==null;){if(f=Fr,f.flags&2048)switch(f.tag){case 0:case 11:case 15:vx(9,f,f.return)}var ie=f.sibling;if(ie!==null){ie.return=f.return,Fr=ie;break e}Fr=f.return}}var W=e.current;for(Fr=W;Fr!==null;){y=Fr;var K=y.child;if(y.subtreeFlags&2064&&K!==null)K.return=y,Fr=K;else e:for(y=W;Fr!==null;){if(s=Fr,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Mw(9,s)}}catch(de){Ts(s,s.return,de)}if(s===y){Fr=null;break e}var he=s.sibling;if(he!==null){he.return=s.return,Fr=he;break e}Fr=s.return}}if(ei=o,nd(),yc&&typeof yc.onPostCommitFiberRoot=="function")try{yc.onPostCommitFiberRoot(Cw,e)}catch{}n=!0}return n}finally{Ri=r,sl.transition=t}}return!1}function qD(e,t,r){t=Dm(r,t),t=Z5(e,t,1),e=Mh(e,t,1),t=Xo(),e!==null&&(Iv(e,1,t),ya(e,t))}function Ts(e,t,r){if(e.tag===3)qD(e,e,r);else for(;t!==null;){if(t.tag===3){qD(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Lh===null||!Lh.has(n))){e=Dm(r,e),e=K5(t,e,1),t=Mh(t,e,1),e=Xo(),t!==null&&(Iv(t,1,e),ya(t,e));break}}t=t.return}}function oq(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Xo(),e.pingedLanes|=e.suspendedLanes&r,mo===e&&(wo&r)===r&&(ro===4||ro===3&&(wo&130023424)===wo&&500>Ms()-$I?uf(e,0):BI|=r),ya(e,t)}function yB(e,t){t===0&&(e.mode&1?(t=kb,kb<<=1,!(kb&130023424)&&(kb=4194304)):t=1);var r=Xo();e=xu(e,t),e!==null&&(Iv(e,t,r),ya(e,r))}function aq(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yB(e,r)}function lq(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(yr(314))}n!==null&&n.delete(t),yB(e,r)}var xB;xB=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ma.current)fa=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return fa=!1,YX(e,t,r);fa=!!(e.flags&131072)}else fa=!1,cs&&t.flags&1048576&&_5(t,w1,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;__(e,t),e=t.pendingProps;var o=Rm(t,No.current);vm(t,r),o=OI(null,t,n,e,o,r);var f=DI();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ga(n)?(f=!0,b1(t)):f=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,II(t),o.updater=Pw,t.stateNode=o,o._reactInternals=t,cT(t,n,e,r),t=dT(null,t,n,!0,f,r)):(t.tag=0,cs&&f&&wI(t),Wo(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(__(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=uq(n),e=Il(n,e),o){case 0:t=hT(null,t,n,e,r);break e;case 1:t=jD(null,t,n,e,r);break e;case 11:t=zD(null,t,n,e,r);break e;case 14:t=ND(null,t,n,Il(n.type,e),r);break e}throw Error(yr(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Il(n,o),hT(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Il(n,o),jD(e,t,n,o,r);case 3:e:{if(tB(t),e===null)throw Error(yr(387));n=t.pendingProps,f=t.memoizedState,o=f.element,k5(e,t),k1(t,n,null,r);var y=t.memoizedState;if(n=y.element,f.isDehydrated)if(f={element:n,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){o=Dm(Error(yr(423)),t),t=FD(e,t,n,r,o);break e}else if(n!==o){o=Dm(Error(yr(424)),t),t=FD(e,t,n,r,o);break e}else for(Ra=Rh(t.stateNode.containerInfo.firstChild),La=t,cs=!0,Ml=null,r=I5(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Mm(),n===o){t=vu(e,t,r);break e}Wo(e,t,n,r)}t=t.child}return t;case 5:return P5(t),e===null&&oT(t),n=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,y=o.children,tT(n,o)?y=null:f!==null&&tT(n,f)&&(t.flags|=32),eB(e,t),Wo(e,t,y,r),t.child;case 6:return e===null&&oT(t),null;case 13:return rB(e,t,r);case 4:return PI(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Lm(t,null,n,r):Wo(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Il(n,o),zD(e,t,n,o,r);case 7:return Wo(e,t,t.pendingProps,r),t.child;case 8:return Wo(e,t,t.pendingProps.children,r),t.child;case 12:return Wo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,f=t.memoizedProps,y=o.value,Xi(S1,n._currentValue),n._currentValue=y,f!==null)if(jl(f.value,y)){if(f.children===o.children&&!ma.current){t=vu(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var s=f.dependencies;if(s!==null){y=f.child;for(var k=s.firstContext;k!==null;){if(k.context===n){if(f.tag===1){k=hu(-1,r&-r),k.tag=2;var I=f.updateQueue;if(I!==null){I=I.shared;var D=I.pending;D===null?k.next=k:(k.next=D.next,D.next=k),I.pending=k}}f.lanes|=r,k=f.alternate,k!==null&&(k.lanes|=r),aT(f.return,r,t),s.lanes|=r;break}k=k.next}}else if(f.tag===10)y=f.type===t.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(yr(341));y.lanes|=r,s=y.alternate,s!==null&&(s.lanes|=r),aT(y,r,t),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===t){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}Wo(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,vm(t,r),o=ll(o),n=n(o),t.flags|=1,Wo(e,t,n,r),t.child;case 14:return n=t.type,o=Il(n,t.pendingProps),o=Il(n.type,o),ND(e,t,n,o,r);case 15:return J5(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Il(n,o),__(e,t),t.tag=1,ga(n)?(e=!0,b1(t)):e=!1,vm(t,r),T5(t,n,o),cT(t,n,o,r),dT(null,t,n,!0,e,r);case 19:return nB(e,t,r);case 22:return Q5(e,t,r)}throw Error(yr(156,t.tag))};function vB(e,t){return WF(e,t)}function cq(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function il(e,t,r,n){return new cq(e,t,r,n)}function WI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uq(e){if(typeof e=="function")return WI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===uI)return 11;if(e===hI)return 14}return 2}function Dh(e,t){var r=e.alternate;return r===null?(r=il(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function C_(e,t,r,n,o,f){var y=2;if(n=e,typeof e=="function")WI(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Gp:return hf(r.children,o,f,t);case cI:y=8,o|=8;break;case LE:return e=il(12,r,t,o|2),e.elementType=LE,e.lanes=f,e;case OE:return e=il(13,r,t,o),e.elementType=OE,e.lanes=f,e;case DE:return e=il(19,r,t,o),e.elementType=DE,e.lanes=f,e;case AF:return Ow(r,o,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case EF:y=10;break e;case TF:y=9;break e;case uI:y=11;break e;case hI:y=14;break e;case dh:y=16,n=null;break e}throw Error(yr(130,e==null?e:typeof e,""))}return t=il(y,r,t,o),t.elementType=e,t.type=n,t.lanes=f,t}function hf(e,t,r,n){return e=il(7,e,n,t),e.lanes=r,e}function Ow(e,t,r,n){return e=il(22,e,n,t),e.elementType=AF,e.lanes=r,e.stateNode={isHidden:!1},e}function ik(e,t,r){return e=il(6,e,null,t),e.lanes=r,e}function sk(e,t,r){return t=il(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hq(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=FC(0),this.expirationTimes=FC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=FC(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function GI(e,t,r,n,o,f,y,s,k){return e=new hq(e,t,r,s,k),t===1?(t=1,f===!0&&(t|=8)):t=0,f=il(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},II(f),e}function dq(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bB(e){if(!e)return qh;e=e._reactInternals;e:{if(zf(e)!==e||e.tag!==1)throw Error(yr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ga(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(yr(171))}if(e.tag===1){var r=e.type;if(ga(r))return v5(e,r,t)}return t}function _B(e,t,r,n,o,f,y,s,k){return e=GI(r,n,!0,e,o,f,y,s,k),e.context=bB(null),r=e.current,n=Xo(),o=Oh(r),f=hu(n,o),f.callback=t??null,Mh(r,f,o),e.current.lanes=o,Iv(e,o,n),ya(e,n),e}function Dw(e,t,r,n){var o=t.current,f=Xo(),y=Oh(o);return r=bB(r),t.context===null?t.context=r:t.pendingContext=r,t=hu(f,y),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mh(o,t,y),e!==null&&(zl(e,o,y,f),x_(e,o,y)),y}function L1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function YD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function XI(e,t){YD(e,t),(e=e.alternate)&&YD(e,t)}function fq(){return null}var wB=typeof reportError=="function"?reportError:function(e){console.error(e)};function qI(e){this._internalRoot=e}zw.prototype.render=qI.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(yr(409));Dw(e,t,null,null)};zw.prototype.unmount=qI.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kf(function(){Dw(null,e,null,null)}),t[yu]=null}};function zw(e){this._internalRoot=e}zw.prototype.unstable_scheduleHydration=function(e){if(e){var t=JF();e={blockedOn:null,target:e,priority:t};for(var r=0;r<mh.length&&t!==0&&t<mh[r].priority;r++);mh.splice(r,0,e),r===0&&e5(e)}};function YI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ZD(){}function pq(e,t,r,n,o){if(o){if(typeof n=="function"){var f=n;n=function(){var I=L1(y);f.call(I)}}var y=_B(t,n,e,0,null,!1,!1,"",ZD);return e._reactRootContainer=y,e[yu]=y.current,Xx(e.nodeType===8?e.parentNode:e),kf(),y}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var s=n;n=function(){var I=L1(k);s.call(I)}}var k=GI(e,0,!1,null,null,!1,!1,"",ZD);return e._reactRootContainer=k,e[yu]=k.current,Xx(e.nodeType===8?e.parentNode:e),kf(function(){Dw(t,k,r,n)}),k}function jw(e,t,r,n,o){var f=r._reactRootContainer;if(f){var y=f;if(typeof o=="function"){var s=o;o=function(){var k=L1(y);s.call(k)}}Dw(t,y,e,o)}else y=pq(r,t,e,o,n);return L1(y)}ZF=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=tx(t.pendingLanes);r!==0&&(pI(t,r|1),ya(t,Ms()),!(ei&6)&&(zm=Ms()+500,nd()))}break;case 13:kf(function(){var n=xu(e,1);if(n!==null){var o=Xo();zl(n,e,1,o)}}),XI(e,1)}};mI=function(e){if(e.tag===13){var t=xu(e,134217728);if(t!==null){var r=Xo();zl(t,e,134217728,r)}XI(e,134217728)}};KF=function(e){if(e.tag===13){var t=Oh(e),r=xu(e,t);if(r!==null){var n=Xo();zl(r,e,t,n)}XI(e,t)}};JF=function(){return Ri};QF=function(e,t){var r=Ri;try{return Ri=e,t()}finally{Ri=r}};WE=function(e,t,r){switch(t){case"input":if(jE(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Aw(n);if(!o)throw Error(yr(90));PF(n),jE(n,o)}}}break;case"textarea":MF(e,r);break;case"select":t=r.value,t!=null&&mm(e,!!r.multiple,t,!1)}};FF=UI;BF=kf;var mq={usingClientEntryPoint:!1,Events:[Rv,Zp,Aw,NF,jF,UI]},Fy={findFiberByHostInstance:tf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gq={bundleType:Fy.bundleType,version:Fy.version,rendererPackageName:Fy.rendererPackageName,rendererConfig:Fy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ku.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VF(e),e===null?null:e.stateNode},findFiberByHostInstance:Fy.findFiberByHostInstance||fq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zb.isDisabled&&zb.supportsFiber)try{Cw=zb.inject(gq),yc=zb}catch{}}Fa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mq;Fa.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YI(t))throw Error(yr(200));return dq(e,t,null,r)};Fa.createRoot=function(e,t){if(!YI(e))throw Error(yr(299));var r=!1,n="",o=wB;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=GI(e,1,!1,null,null,r,!1,n,o),e[yu]=t.current,Xx(e.nodeType===8?e.parentNode:e),new qI(t)};Fa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(yr(188)):(e=Object.keys(e).join(","),Error(yr(268,e)));return e=VF(t),e=e===null?null:e.stateNode,e};Fa.flushSync=function(e){return kf(e)};Fa.hydrate=function(e,t,r){if(!Nw(t))throw Error(yr(200));return jw(null,e,t,!0,r)};Fa.hydrateRoot=function(e,t,r){if(!YI(e))throw Error(yr(405));var n=r!=null&&r.hydratedSources||null,o=!1,f="",y=wB;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=_B(t,null,e,1,r??null,o,!1,f,y),e[yu]=t.current,Xx(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new zw(t)};Fa.render=function(e,t,r){if(!Nw(t))throw Error(yr(200));return jw(null,e,t,!1,r)};Fa.unmountComponentAtNode=function(e){if(!Nw(e))throw Error(yr(40));return e._reactRootContainer?(kf(function(){jw(null,null,e,!1,function(){e._reactRootContainer=null,e[yu]=null})}),!0):!1};Fa.unstable_batchedUpdates=UI;Fa.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Nw(r))throw Error(yr(200));if(e==null||e._reactInternals===void 0)throw Error(yr(38));return jw(e,t,r,!1,n)};Fa.version="18.2.0-next-9e3b772b8-20220608";function SB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SB)}catch(e){console.error(e)}}SB(),_F.exports=Fa;var Fw=_F.exports,KD=Fw;RE.createRoot=KD.createRoot,RE.hydrateRoot=KD.hydrateRoot;/**
 * @remix-run/router v1.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(this,arguments)}var Eh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Eh||(Eh={}));const JD="popstate";function yq(e){e===void 0&&(e={});function t(n,o){let{pathname:f,search:y,hash:s}=n.location;return CT("",{pathname:f,search:y,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(n,o){return typeof o=="string"?o:O1(o)}return vq(t,r,null,e)}function Os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ZI(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xq(){return Math.random().toString(36).substr(2,8)}function QD(e,t){return{usr:e.state,key:e.key,idx:t}}function CT(e,t,r,n){return r===void 0&&(r=null),rv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ng(t):t,{state:r,key:t&&t.key||n||xq()})}function O1(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ng(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function vq(e,t,r,n){n===void 0&&(n={});let{window:o=document.defaultView,v5Compat:f=!1}=n,y=o.history,s=Eh.Pop,k=null,I=D();I==null&&(I=0,y.replaceState(rv({},y.state,{idx:I}),""));function D(){return(y.state||{idx:null}).idx}function N(){s=Eh.Pop;let ve=D(),ie=ve==null?null:ve-I;I=ve,k&&k({action:s,location:ae.location,delta:ie})}function U(ve,ie){s=Eh.Push;let W=CT(ae.location,ve,ie);r&&r(W,ve),I=D()+1;let K=QD(W,I),he=ae.createHref(W);try{y.pushState(K,"",he)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(he)}f&&k&&k({action:s,location:ae.location,delta:1})}function q(ve,ie){s=Eh.Replace;let W=CT(ae.location,ve,ie);r&&r(W,ve),I=D();let K=QD(W,I),he=ae.createHref(W);y.replaceState(K,"",he),f&&k&&k({action:s,location:ae.location,delta:0})}function Z(ve){let ie=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof ve=="string"?ve:O1(ve);return Os(ie,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,ie)}let ae={get action(){return s},get location(){return e(o,y)},listen(ve){if(k)throw new Error("A history only accepts one active listener");return o.addEventListener(JD,N),k=ve,()=>{o.removeEventListener(JD,N),k=null}},createHref(ve){return t(o,ve)},createURL:Z,encodeLocation(ve){let ie=Z(ve);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:U,replace:q,go(ve){return y.go(ve)}};return ae}var ez;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ez||(ez={}));function bq(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ng(t):t,o=KI(n.pathname||"/",r);if(o==null)return null;let f=CB(e);_q(f);let y=null;for(let s=0;y==null&&s<f.length;++s)y=Pq(f[s],Lq(o));return y}function CB(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let o=(f,y,s)=>{let k={relativePath:s===void 0?f.path||"":s,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};k.relativePath.startsWith("/")&&(Os(k.relativePath.startsWith(n),'Absolute route path "'+k.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),k.relativePath=k.relativePath.slice(n.length));let I=zh([n,k.relativePath]),D=r.concat(k);f.children&&f.children.length>0&&(Os(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+I+'".')),CB(f.children,t,D,I)),!(f.path==null&&!f.index)&&t.push({path:I,score:Aq(I,f.index),routesMeta:D})};return e.forEach((f,y)=>{var s;if(f.path===""||!((s=f.path)!=null&&s.includes("?")))o(f,y);else for(let k of kB(f.path))o(f,y,k)}),t}function kB(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,o=r.endsWith("?"),f=r.replace(/\?$/,"");if(n.length===0)return o?[f,""]:[f];let y=kB(n.join("/")),s=[];return s.push(...y.map(k=>k===""?f:[f,k].join("/"))),o&&s.push(...y),s.map(k=>e.startsWith("/")&&k===""?"/":k)}function _q(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Iq(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const wq=/^:\w+$/,Sq=3,Cq=2,kq=1,Eq=10,Tq=-2,tz=e=>e==="*";function Aq(e,t){let r=e.split("/"),n=r.length;return r.some(tz)&&(n+=Tq),t&&(n+=Cq),r.filter(o=>!tz(o)).reduce((o,f)=>o+(wq.test(f)?Sq:f===""?kq:Eq),n)}function Iq(e,t){return e.length===t.length&&e.slice(0,-1).every((n,o)=>n===t[o])?e[e.length-1]-t[t.length-1]:0}function Pq(e,t){let{routesMeta:r}=e,n={},o="/",f=[];for(let y=0;y<r.length;++y){let s=r[y],k=y===r.length-1,I=o==="/"?t:t.slice(o.length)||"/",D=Rq({path:s.relativePath,caseSensitive:s.caseSensitive,end:k},I);if(!D)return null;Object.assign(n,D.params);let N=s.route;f.push({params:n,pathname:zh([o,D.pathname]),pathnameBase:Nq(zh([o,D.pathnameBase])),route:N}),D.pathnameBase!=="/"&&(o=zh([o,D.pathnameBase]))}return f}function Rq(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Mq(e.path,e.caseSensitive,e.end),o=t.match(r);if(!o)return null;let f=o[0],y=f.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:n.reduce((I,D,N)=>{if(D==="*"){let U=s[N]||"";y=f.slice(0,f.length-U.length).replace(/(.)\/+$/,"$1")}return I[D]=Oq(s[N]||"",D),I},{}),pathname:f,pathnameBase:y,pattern:e}}function Mq(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ZI(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(y,s)=>(n.push(s),"/([^\\/]+)"));return e.endsWith("*")?(n.push("*"),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),n]}function Lq(e){try{return decodeURI(e)}catch(t){return ZI(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Oq(e,t){try{return decodeURIComponent(e)}catch(r){return ZI(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function KI(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Dq(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:o=""}=typeof e=="string"?ng(e):e;return{pathname:r?r.startsWith("/")?r:zq(r,t):t,search:jq(n),hash:Fq(o)}}function zq(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function ok(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JI(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function QI(e,t,r,n){n===void 0&&(n=!1);let o;typeof e=="string"?o=ng(e):(o=rv({},e),Os(!o.pathname||!o.pathname.includes("?"),ok("?","pathname","search",o)),Os(!o.pathname||!o.pathname.includes("#"),ok("#","pathname","hash",o)),Os(!o.search||!o.search.includes("#"),ok("#","search","hash",o)));let f=e===""||o.pathname==="",y=f?"/":o.pathname,s;if(n||y==null)s=r;else{let N=t.length-1;if(y.startsWith("..")){let U=y.split("/");for(;U[0]==="..";)U.shift(),N-=1;o.pathname=U.join("/")}s=N>=0?t[N]:"/"}let k=Dq(o,s),I=y&&y!=="/"&&y.endsWith("/"),D=(f||y===".")&&r.endsWith("/");return!k.pathname.endsWith("/")&&(I||D)&&(k.pathname+="/"),k}const zh=e=>e.join("/").replace(/\/\/+/g,"/"),Nq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Fq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Bq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const EB=["post","put","patch","delete"];new Set(EB);const $q=["get",...EB];new Set($q);/**
 * React Router v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D1.apply(this,arguments)}const eP=le.createContext(null),Uq=le.createContext(null),ig=le.createContext(null),Bw=le.createContext(null),id=le.createContext({outlet:null,matches:[],isDataRoute:!1}),TB=le.createContext(null);function Vq(e,t){let{relative:r}=t===void 0?{}:t;sg()||Os(!1);let{basename:n,navigator:o}=le.useContext(ig),{hash:f,pathname:y,search:s}=IB(e,{relative:r}),k=y;return n!=="/"&&(k=y==="/"?n:zh([n,y])),o.createHref({pathname:k,search:s,hash:f})}function sg(){return le.useContext(Bw)!=null}function $a(){return sg()||Os(!1),le.useContext(Bw).location}function AB(e){le.useContext(ig).static||le.useLayoutEffect(e)}function Cs(){let{isDataRoute:e}=le.useContext(id);return e?rY():Hq()}function Hq(){sg()||Os(!1);let e=le.useContext(eP),{basename:t,navigator:r}=le.useContext(ig),{matches:n}=le.useContext(id),{pathname:o}=$a(),f=JSON.stringify(JI(n).map(k=>k.pathnameBase)),y=le.useRef(!1);return AB(()=>{y.current=!0}),le.useCallback(function(k,I){if(I===void 0&&(I={}),!y.current)return;if(typeof k=="number"){r.go(k);return}let D=QI(k,JSON.parse(f),o,I.relative==="path");e==null&&t!=="/"&&(D.pathname=D.pathname==="/"?t:zh([t,D.pathname])),(I.replace?r.replace:r.push)(D,I.state,I)},[t,r,f,o,e])}function IB(e,t){let{relative:r}=t===void 0?{}:t,{matches:n}=le.useContext(id),{pathname:o}=$a(),f=JSON.stringify(JI(n).map(y=>y.pathnameBase));return le.useMemo(()=>QI(e,JSON.parse(f),o,r==="path"),[e,f,o,r])}function Wq(e,t){return Gq(e,t)}function Gq(e,t,r){sg()||Os(!1);let{navigator:n}=le.useContext(ig),{matches:o}=le.useContext(id),f=o[o.length-1],y=f?f.params:{};f&&f.pathname;let s=f?f.pathnameBase:"/";f&&f.route;let k=$a(),I;if(t){var D;let ae=typeof t=="string"?ng(t):t;s==="/"||(D=ae.pathname)!=null&&D.startsWith(s)||Os(!1),I=ae}else I=k;let N=I.pathname||"/",U=s==="/"?N:N.slice(s.length)||"/",q=bq(e,{pathname:U}),Z=Kq(q&&q.map(ae=>Object.assign({},ae,{params:Object.assign({},y,ae.params),pathname:zh([s,n.encodeLocation?n.encodeLocation(ae.pathname).pathname:ae.pathname]),pathnameBase:ae.pathnameBase==="/"?s:zh([s,n.encodeLocation?n.encodeLocation(ae.pathnameBase).pathname:ae.pathnameBase])})),o,r);return t&&Z?le.createElement(Bw.Provider,{value:{location:D1({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:Eh.Pop}},Z):Z}function Xq(){let e=tY(),t=Bq(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},f=null;return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},t),r?le.createElement("pre",{style:o},r):null,f)}const qq=le.createElement(Xq,null);class Yq extends le.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?le.createElement(id.Provider,{value:this.props.routeContext},le.createElement(TB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zq(e){let{routeContext:t,match:r,children:n}=e,o=le.useContext(eP);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),le.createElement(id.Provider,{value:t},n)}function Kq(e,t,r){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var o;if((o=r)!=null&&o.errors)e=r.matches;else return null}let f=e,y=(n=r)==null?void 0:n.errors;if(y!=null){let s=f.findIndex(k=>k.route.id&&(y==null?void 0:y[k.route.id]));s>=0||Os(!1),f=f.slice(0,Math.min(f.length,s+1))}return f.reduceRight((s,k,I)=>{let D=k.route.id?y==null?void 0:y[k.route.id]:null,N=null;r&&(N=k.route.errorElement||qq);let U=t.concat(f.slice(0,I+1)),q=()=>{let Z;return D?Z=N:k.route.Component?Z=le.createElement(k.route.Component,null):k.route.element?Z=k.route.element:Z=s,le.createElement(Zq,{match:k,routeContext:{outlet:s,matches:U,isDataRoute:r!=null},children:Z})};return r&&(k.route.ErrorBoundary||k.route.errorElement||I===0)?le.createElement(Yq,{location:r.location,revalidation:r.revalidation,component:N,error:D,children:q(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):q()},null)}var PB=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(PB||{}),z1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(z1||{});function Jq(e){let t=le.useContext(eP);return t||Os(!1),t}function Qq(e){let t=le.useContext(Uq);return t||Os(!1),t}function eY(e){let t=le.useContext(id);return t||Os(!1),t}function RB(e){let t=eY(),r=t.matches[t.matches.length-1];return r.route.id||Os(!1),r.route.id}function tY(){var e;let t=le.useContext(TB),r=Qq(z1.UseRouteError),n=RB(z1.UseRouteError);return t||((e=r.errors)==null?void 0:e[n])}function rY(){let{router:e}=Jq(PB.UseNavigateStable),t=RB(z1.UseNavigateStable),r=le.useRef(!1);return AB(()=>{r.current=!0}),le.useCallback(function(o,f){f===void 0&&(f={}),r.current&&(typeof o=="number"?e.navigate(o):e.navigate(o,D1({fromRouteId:t},f)))},[e,t])}function og(e){let{to:t,replace:r,state:n,relative:o}=e;sg()||Os(!1);let{matches:f}=le.useContext(id),{pathname:y}=$a(),s=Cs(),k=QI(t,JI(f).map(D=>D.pathnameBase),y,o==="path"),I=JSON.stringify(k);return le.useEffect(()=>s(JSON.parse(I),{replace:r,state:n,relative:o}),[s,I,o,r,n]),null}function In(e){Os(!1)}function nY(e){let{basename:t="/",children:r=null,location:n,navigationType:o=Eh.Pop,navigator:f,static:y=!1}=e;sg()&&Os(!1);let s=t.replace(/^\/*/,"/"),k=le.useMemo(()=>({basename:s,navigator:f,static:y}),[s,f,y]);typeof n=="string"&&(n=ng(n));let{pathname:I="/",search:D="",hash:N="",state:U=null,key:q="default"}=n,Z=le.useMemo(()=>{let ae=KI(I,s);return ae==null?null:{location:{pathname:ae,search:D,hash:N,state:U,key:q},navigationType:o}},[s,I,D,N,U,q,o]);return Z==null?null:le.createElement(ig.Provider,{value:k},le.createElement(Bw.Provider,{children:r,value:Z}))}function $w(e){let{children:t,location:r}=e;return Wq(kT(t),r)}new Promise(()=>{});function kT(e,t){t===void 0&&(t=[]);let r=[];return le.Children.forEach(e,(n,o)=>{if(!le.isValidElement(n))return;let f=[...t,o];if(n.type===le.Fragment){r.push.apply(r,kT(n.props.children,f));return}n.type!==In&&Os(!1),!n.props.index||!n.props.children||Os(!1);let y={id:n.props.id||f.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(y.children=kT(n.props.children,f)),r.push(y)}),r}/**
 * React Router DOM v6.17.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ET(){return ET=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ET.apply(this,arguments)}function iY(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,f;for(f=0;f<n.length;f++)o=n[f],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function sY(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oY(e,t){return e.button===0&&(!t||t==="_self")&&!sY(e)}const aY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],lY="startTransition",rz=PE[lY];function cY(e){let{basename:t,children:r,future:n,window:o}=e,f=le.useRef();f.current==null&&(f.current=yq({window:o,v5Compat:!0}));let y=f.current,[s,k]=le.useState({action:y.action,location:y.location}),{v7_startTransition:I}=n||{},D=le.useCallback(N=>{I&&rz?rz(()=>k(N)):k(N)},[k,I]);return le.useLayoutEffect(()=>y.listen(D),[y,D]),le.createElement(nY,{basename:t,children:r,location:s.location,navigationType:s.action,navigator:y})}const uY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Un=le.forwardRef(function(t,r){let{onClick:n,relative:o,reloadDocument:f,replace:y,state:s,target:k,to:I,preventScrollReset:D,unstable_viewTransition:N}=t,U=iY(t,aY),{basename:q}=le.useContext(ig),Z,ae=!1;if(typeof I=="string"&&hY.test(I)&&(Z=I,uY))try{let K=new URL(window.location.href),he=I.startsWith("//")?new URL(K.protocol+I):new URL(I),de=KI(he.pathname,q);he.origin===K.origin&&de!=null?I=de+he.search+he.hash:ae=!0}catch{}let ve=Vq(I,{relative:o}),ie=dY(I,{replace:y,state:s,target:k,preventScrollReset:D,relative:o,unstable_viewTransition:N});function W(K){n&&n(K),K.defaultPrevented||ie(K)}return le.createElement("a",ET({},U,{href:Z||ve,onClick:ae||f?n:W,ref:r,target:k}))});var nz;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nz||(nz={}));var iz;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(iz||(iz={}));function dY(e,t){let{target:r,replace:n,state:o,preventScrollReset:f,relative:y,unstable_viewTransition:s}=t===void 0?{}:t,k=Cs(),I=$a(),D=IB(e,{relative:y});return le.useCallback(N=>{if(oY(N,r)){N.preventDefault();let U=n!==void 0?n:O1(I)===O1(D);k(e,{replace:U,state:o,preventScrollReset:f,relative:y,unstable_viewTransition:s})}},[I,k,D,n,o,r,e,f,y,s])}let fY={data:""},pY=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||fY,mY=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,gY=/\/\*[^]*?\*\/|  +/g,sz=/\n+/g,yh=(e,t)=>{let r="",n="",o="";for(let f in e){let y=e[f];f[0]=="@"?f[1]=="i"?r=f+" "+y+";":n+=f[1]=="f"?yh(y,f):f+"{"+yh(y,f[1]=="k"?"":t)+"}":typeof y=="object"?n+=yh(y,t?t.replace(/([^,])+/g,s=>f.replace(/(^:.*)|([^,])+/g,k=>/&/.test(k)?k.replace(/&/g,s):s?s+" "+k:k)):f):y!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=yh.p?yh.p(f,y):f+":"+y+";")}return r+(t&&o?t+"{"+o+"}":o)+n},Gc={},MB=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+MB(e[r]);return t}return e},yY=(e,t,r,n,o)=>{let f=MB(e),y=Gc[f]||(Gc[f]=(k=>{let I=0,D=11;for(;I<k.length;)D=101*D+k.charCodeAt(I++)>>>0;return"go"+D})(f));if(!Gc[y]){let k=f!==e?e:(I=>{let D,N,U=[{}];for(;D=mY.exec(I.replace(gY,""));)D[4]?U.shift():D[3]?(N=D[3].replace(sz," ").trim(),U.unshift(U[0][N]=U[0][N]||{})):U[0][D[1]]=D[2].replace(sz," ").trim();return U[0]})(e);Gc[y]=yh(o?{["@keyframes "+y]:k}:k,r?"":"."+y)}let s=r&&Gc.g?Gc.g:null;return r&&(Gc.g=Gc[y]),((k,I,D,N)=>{N?I.data=I.data.replace(N,k):I.data.indexOf(k)===-1&&(I.data=D?k+I.data:I.data+k)})(Gc[y],t,n,s),y},xY=(e,t,r)=>e.reduce((n,o,f)=>{let y=t[f];if(y&&y.call){let s=y(r),k=s&&s.props&&s.props.className||/^go/.test(s)&&s;y=k?"."+k:s&&typeof s=="object"?s.props?"":yh(s,""):s===!1?"":s}return n+o+(y??"")},"");function Uw(e){let t=this||{},r=e.call?e(t.p):e;return yY(r.unshift?r.raw?xY(r,[].slice.call(arguments,1),t.p):r.reduce((n,o)=>Object.assign(n,o&&o.call?o(t.p):o),{}):r,pY(t.target),t.g,t.o,t.k)}let LB,TT,AT;Uw.bind({g:1});let bu=Uw.bind({k:1});function vY(e,t,r,n){yh.p=t,LB=e,TT=r,AT=n}function sd(e,t){let r=this||{};return function(){let n=arguments;function o(f,y){let s=Object.assign({},f),k=s.className||o.className;r.p=Object.assign({theme:TT&&TT()},s),r.o=/ *go\d+/.test(k),s.className=Uw.apply(r,n)+(k?" "+k:""),t&&(s.ref=y);let I=e;return e[0]&&(I=s.as||e,delete s.as),AT&&I[0]&&AT(s),LB(I,s)}return t?t(o):o}}var bY=e=>typeof e=="function",N1=(e,t)=>bY(e)?e(t):e,_Y=(()=>{let e=0;return()=>(++e).toString()})(),OB=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),wY=20,k_=new Map,SY=1e3,oz=e=>{if(k_.has(e))return;let t=setTimeout(()=>{k_.delete(e),Nf({type:4,toastId:e})},SY);k_.set(e,t)},CY=e=>{let t=k_.get(e);t&&clearTimeout(t)},IT=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,wY)};case 1:return t.toast.id&&CY(t.toast.id),{...e,toasts:e.toasts.map(f=>f.id===t.toast.id?{...f,...t.toast}:f)};case 2:let{toast:r}=t;return e.toasts.find(f=>f.id===r.id)?IT(e,{type:1,toast:r}):IT(e,{type:0,toast:r});case 3:let{toastId:n}=t;return n?oz(n):e.toasts.forEach(f=>{oz(f.id)}),{...e,toasts:e.toasts.map(f=>f.id===n||n===void 0?{...f,visible:!1}:f)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(f=>f.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(f=>({...f,pauseDuration:f.pauseDuration+o}))}}},E_=[],T_={toasts:[],pausedAt:void 0},Nf=e=>{T_=IT(T_,e),E_.forEach(t=>{t(T_)})},kY={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EY=(e={})=>{let[t,r]=le.useState(T_);le.useEffect(()=>(E_.push(r),()=>{let o=E_.indexOf(r);o>-1&&E_.splice(o,1)}),[t]);let n=t.toasts.map(o=>{var f,y;return{...e,...e[o.type],...o,duration:o.duration||((f=e[o.type])==null?void 0:f.duration)||(e==null?void 0:e.duration)||kY[o.type],style:{...e.style,...(y=e[o.type])==null?void 0:y.style,...o.style}}});return{...t,toasts:n}},TY=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||_Y()}),Lv=e=>(t,r)=>{let n=TY(t,e,r);return Nf({type:2,toast:n}),n.id},As=(e,t)=>Lv("blank")(e,t);As.error=Lv("error");As.success=Lv("success");As.loading=Lv("loading");As.custom=Lv("custom");As.dismiss=e=>{Nf({type:3,toastId:e})};As.remove=e=>Nf({type:4,toastId:e});As.promise=(e,t,r)=>{let n=As.loading(t.loading,{...r,...r==null?void 0:r.loading});return e.then(o=>(As.success(N1(t.success,o),{id:n,...r,...r==null?void 0:r.success}),o)).catch(o=>{As.error(N1(t.error,o),{id:n,...r,...r==null?void 0:r.error})}),e};var AY=(e,t)=>{Nf({type:1,toast:{id:e,height:t}})},IY=()=>{Nf({type:5,time:Date.now()})},PY=e=>{let{toasts:t,pausedAt:r}=EY(e);le.useEffect(()=>{if(r)return;let f=Date.now(),y=t.map(s=>{if(s.duration===1/0)return;let k=(s.duration||0)+s.pauseDuration-(f-s.createdAt);if(k<0){s.visible&&As.dismiss(s.id);return}return setTimeout(()=>As.dismiss(s.id),k)});return()=>{y.forEach(s=>s&&clearTimeout(s))}},[t,r]);let n=le.useCallback(()=>{r&&Nf({type:6,time:Date.now()})},[r]),o=le.useCallback((f,y)=>{let{reverseOrder:s=!1,gutter:k=8,defaultPosition:I}=y||{},D=t.filter(q=>(q.position||I)===(f.position||I)&&q.height),N=D.findIndex(q=>q.id===f.id),U=D.filter((q,Z)=>Z<N&&q.visible).length;return D.filter(q=>q.visible).slice(...s?[U+1]:[0,U]).reduce((q,Z)=>q+(Z.height||0)+k,0)},[t]);return{toasts:t,handlers:{updateHeight:AY,startPause:IY,endPause:n,calculateOffset:o}}},RY=bu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,MY=bu`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,LY=bu`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,OY=sd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${MY} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${LY} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,DY=bu`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zY=sd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${DY} 1s linear infinite;
`,NY=bu`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jY=bu`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FY=sd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${NY} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jY} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,BY=sd("div")`
  position: absolute;
`,$Y=sd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,UY=bu`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VY=sd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${UY} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,HY=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?le.createElement(VY,null,t):t:r==="blank"?null:le.createElement($Y,null,le.createElement(zY,{...n}),r!=="loading"&&le.createElement(BY,null,r==="error"?le.createElement(OY,{...n}):le.createElement(FY,{...n})))},WY=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,GY=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,XY="0%{opacity:0;} 100%{opacity:1;}",qY="0%{opacity:1;} 100%{opacity:0;}",YY=sd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ZY=sd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,KY=(e,t)=>{let r=e.includes("top")?1:-1,[n,o]=OB()?[XY,qY]:[WY(r),GY(r)];return{animation:t?`${bu(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bu(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},JY=le.memo(({toast:e,position:t,style:r,children:n})=>{let o=e.height?KY(e.position||t||"top-center",e.visible):{opacity:0},f=le.createElement(HY,{toast:e}),y=le.createElement(ZY,{...e.ariaProps},N1(e.message,e));return le.createElement(YY,{className:e.className,style:{...o,...r,...e.style}},typeof n=="function"?n({icon:f,message:y}):le.createElement(le.Fragment,null,f,y))});vY(le.createElement);var QY=({id:e,className:t,style:r,onHeightUpdate:n,children:o})=>{let f=le.useCallback(y=>{if(y){let s=()=>{let k=y.getBoundingClientRect().height;n(e,k)};s(),new MutationObserver(s).observe(y,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return le.createElement("div",{ref:f,className:t,style:r},o)},eZ=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:OB()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...o}},tZ=Uw`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Nb=16,rZ=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:o,containerStyle:f,containerClassName:y})=>{let{toasts:s,handlers:k}=PY(r);return le.createElement("div",{style:{position:"fixed",zIndex:9999,top:Nb,left:Nb,right:Nb,bottom:Nb,pointerEvents:"none",...f},className:y,onMouseEnter:k.startPause,onMouseLeave:k.endPause},s.map(I=>{let D=I.position||t,N=k.calculateOffset(I,{reverseOrder:e,gutter:n,defaultPosition:t}),U=eZ(D,N);return le.createElement(QY,{id:I.id,key:I.id,onHeightUpdate:k.updateHeight,className:I.visible?tZ:"",style:U},I.type==="custom"?N1(I.message,I):o?o(I):le.createElement(JY,{toast:I,position:D}))}))},Zr=As;function nZ(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function iZ(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var sZ=function(){function e(r){var n=this;this._insertTag=function(o){var f;n.tags.length===0?n.insertionPoint?f=n.insertionPoint.nextSibling:n.prepend?f=n.container.firstChild:f=n.before:f=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(o,f),n.tags.push(o)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(iZ(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var f=nZ(o);try{f.insertRule(n,f.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Lo="-ms-",j1="-moz-",vi="-webkit-",DB="comm",tP="rule",rP="decl",oZ="@import",zB="@keyframes",aZ="@layer",lZ=Math.abs,Vw=String.fromCharCode,cZ=Object.assign;function uZ(e,t){return _o(e,0)^45?(((t<<2^_o(e,0))<<2^_o(e,1))<<2^_o(e,2))<<2^_o(e,3):0}function NB(e){return e.trim()}function hZ(e,t){return(e=t.exec(e))?e[0]:e}function bi(e,t,r){return e.replace(t,r)}function PT(e,t){return e.indexOf(t)}function _o(e,t){return e.charCodeAt(t)|0}function nv(e,t,r){return e.slice(t,r)}function lc(e){return e.length}function nP(e){return e.length}function jb(e,t){return t.push(e),e}function dZ(e,t){return e.map(t).join("")}var Hw=1,Nm=1,jB=0,xa=0,Vs=0,ag="";function Ww(e,t,r,n,o,f,y){return{value:e,root:t,parent:r,type:n,props:o,children:f,line:Hw,column:Nm,length:y,return:""}}function By(e,t){return cZ(Ww("",null,null,"",null,null,0),e,{length:-e.length},t)}function fZ(){return Vs}function pZ(){return Vs=xa>0?_o(ag,--xa):0,Nm--,Vs===10&&(Nm=1,Hw--),Vs}function Oa(){return Vs=xa<jB?_o(ag,xa++):0,Nm++,Vs===10&&(Nm=1,Hw++),Vs}function vc(){return _o(ag,xa)}function A_(){return xa}function Ov(e,t){return nv(ag,e,t)}function iv(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function FB(e){return Hw=Nm=1,jB=lc(ag=e),xa=0,[]}function BB(e){return ag="",e}function I_(e){return NB(Ov(xa-1,RT(e===91?e+2:e===40?e+1:e)))}function mZ(e){for(;(Vs=vc())&&Vs<33;)Oa();return iv(e)>2||iv(Vs)>3?"":" "}function gZ(e,t){for(;--t&&Oa()&&!(Vs<48||Vs>102||Vs>57&&Vs<65||Vs>70&&Vs<97););return Ov(e,A_()+(t<6&&vc()==32&&Oa()==32))}function RT(e){for(;Oa();)switch(Vs){case e:return xa;case 34:case 39:e!==34&&e!==39&&RT(Vs);break;case 40:e===41&&RT(e);break;case 92:Oa();break}return xa}function yZ(e,t){for(;Oa()&&e+Vs!==47+10;)if(e+Vs===42+42&&vc()===47)break;return"/*"+Ov(t,xa-1)+"*"+Vw(e===47?e:Oa())}function xZ(e){for(;!iv(vc());)Oa();return Ov(e,xa)}function vZ(e){return BB(P_("",null,null,null,[""],e=FB(e),0,[0],e))}function P_(e,t,r,n,o,f,y,s,k){for(var I=0,D=0,N=y,U=0,q=0,Z=0,ae=1,ve=1,ie=1,W=0,K="",he=o,de=f,Ae=n,Te=K;ve;)switch(Z=W,W=Oa()){case 40:if(Z!=108&&_o(Te,N-1)==58){PT(Te+=bi(I_(W),"&","&\f"),"&\f")!=-1&&(ie=-1);break}case 34:case 39:case 91:Te+=I_(W);break;case 9:case 10:case 13:case 32:Te+=mZ(Z);break;case 92:Te+=gZ(A_()-1,7);continue;case 47:switch(vc()){case 42:case 47:jb(bZ(yZ(Oa(),A_()),t,r),k);break;default:Te+="/"}break;case 123*ae:s[I++]=lc(Te)*ie;case 125*ae:case 59:case 0:switch(W){case 0:case 125:ve=0;case 59+D:ie==-1&&(Te=bi(Te,/\f/g,"")),q>0&&lc(Te)-N&&jb(q>32?lz(Te+";",n,r,N-1):lz(bi(Te," ","")+";",n,r,N-2),k);break;case 59:Te+=";";default:if(jb(Ae=az(Te,t,r,I,D,o,s,K,he=[],de=[],N),f),W===123)if(D===0)P_(Te,t,Ae,Ae,he,f,N,s,de);else switch(U===99&&_o(Te,3)===110?100:U){case 100:case 108:case 109:case 115:P_(e,Ae,Ae,n&&jb(az(e,Ae,Ae,0,0,o,s,K,o,he=[],N),de),o,de,N,s,n?he:de);break;default:P_(Te,Ae,Ae,Ae,[""],de,0,s,de)}}I=D=q=0,ae=ie=1,K=Te="",N=y;break;case 58:N=1+lc(Te),q=Z;default:if(ae<1){if(W==123)--ae;else if(W==125&&ae++==0&&pZ()==125)continue}switch(Te+=Vw(W),W*ae){case 38:ie=D>0?1:(Te+="\f",-1);break;case 44:s[I++]=(lc(Te)-1)*ie,ie=1;break;case 64:vc()===45&&(Te+=I_(Oa())),U=vc(),D=N=lc(K=Te+=xZ(A_())),W++;break;case 45:Z===45&&lc(Te)==2&&(ae=0)}}return f}function az(e,t,r,n,o,f,y,s,k,I,D){for(var N=o-1,U=o===0?f:[""],q=nP(U),Z=0,ae=0,ve=0;Z<n;++Z)for(var ie=0,W=nv(e,N+1,N=lZ(ae=y[Z])),K=e;ie<q;++ie)(K=NB(ae>0?U[ie]+" "+W:bi(W,/&\f/g,U[ie])))&&(k[ve++]=K);return Ww(e,t,r,o===0?tP:s,k,I,D)}function bZ(e,t,r){return Ww(e,t,r,DB,Vw(fZ()),nv(e,2,-2),0)}function lz(e,t,r,n){return Ww(e,t,r,rP,nv(e,0,n),nv(e,n+1,-1),n)}function _m(e,t){for(var r="",n=nP(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function _Z(e,t,r,n){switch(e.type){case aZ:if(e.children.length)break;case oZ:case rP:return e.return=e.return||e.value;case DB:return"";case zB:return e.return=e.value+"{"+_m(e.children,n)+"}";case tP:e.value=e.props.join(",")}return lc(r=_m(e.children,n))?e.return=e.value+"{"+r+"}":""}function wZ(e){var t=nP(e);return function(r,n,o,f){for(var y="",s=0;s<t;s++)y+=e[s](r,n,o,f)||"";return y}}function SZ(e){return function(t){t.root||(t=t.return)&&e(t)}}var cz=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};function $B(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var CZ=function(t,r,n){for(var o=0,f=0;o=f,f=vc(),o===38&&f===12&&(r[n]=1),!iv(f);)Oa();return Ov(t,xa)},kZ=function(t,r){var n=-1,o=44;do switch(iv(o)){case 0:o===38&&vc()===12&&(r[n]=1),t[n]+=CZ(xa-1,r,n);break;case 2:t[n]+=I_(o);break;case 4:if(o===44){t[++n]=vc()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Vw(o)}while(o=Oa());return t},EZ=function(t,r){return BB(kZ(FB(t),r))},uz=new WeakMap,TZ=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,o=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!uz.get(n))&&!o){uz.set(t,!0);for(var f=[],y=EZ(r,f),s=n.props,k=0,I=0;k<y.length;k++)for(var D=0;D<s.length;D++,I++)t.props[I]=f[k]?y[k].replace(/&\f/g,s[D]):s[D]+" "+y[k]}}},AZ=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function UB(e,t){switch(uZ(e,t)){case 5103:return vi+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vi+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vi+e+j1+e+Lo+e+e;case 6828:case 4268:return vi+e+Lo+e+e;case 6165:return vi+e+Lo+"flex-"+e+e;case 5187:return vi+e+bi(e,/(\w+).+(:[^]+)/,vi+"box-$1$2"+Lo+"flex-$1$2")+e;case 5443:return vi+e+Lo+"flex-item-"+bi(e,/flex-|-self/,"")+e;case 4675:return vi+e+Lo+"flex-line-pack"+bi(e,/align-content|flex-|-self/,"")+e;case 5548:return vi+e+Lo+bi(e,"shrink","negative")+e;case 5292:return vi+e+Lo+bi(e,"basis","preferred-size")+e;case 6060:return vi+"box-"+bi(e,"-grow","")+vi+e+Lo+bi(e,"grow","positive")+e;case 4554:return vi+bi(e,/([^-])(transform)/g,"$1"+vi+"$2")+e;case 6187:return bi(bi(bi(e,/(zoom-|grab)/,vi+"$1"),/(image-set)/,vi+"$1"),e,"")+e;case 5495:case 3959:return bi(e,/(image-set\([^]*)/,vi+"$1$`$1");case 4968:return bi(bi(e,/(.+:)(flex-)?(.*)/,vi+"box-pack:$3"+Lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vi+e+e;case 4095:case 3583:case 4068:case 2532:return bi(e,/(.+)-inline(.+)/,vi+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lc(e)-1-t>6)switch(_o(e,t+1)){case 109:if(_o(e,t+4)!==45)break;case 102:return bi(e,/(.+:)(.+)-([^]+)/,"$1"+vi+"$2-$3$1"+j1+(_o(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~PT(e,"stretch")?UB(bi(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_o(e,t+1)!==115)break;case 6444:switch(_o(e,lc(e)-3-(~PT(e,"!important")&&10))){case 107:return bi(e,":",":"+vi)+e;case 101:return bi(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vi+(_o(e,14)===45?"inline-":"")+"box$3$1"+vi+"$2$3$1"+Lo+"$2box$3")+e}break;case 5936:switch(_o(e,t+11)){case 114:return vi+e+Lo+bi(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vi+e+Lo+bi(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vi+e+Lo+bi(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vi+e+Lo+e+e}return e}var IZ=function(t,r,n,o){if(t.length>-1&&!t.return)switch(t.type){case rP:t.return=UB(t.value,t.length);break;case zB:return _m([By(t,{value:bi(t.value,"@","@"+vi)})],o);case tP:if(t.length)return dZ(t.props,function(f){switch(hZ(f,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return _m([By(t,{props:[bi(f,/:(read-\w+)/,":"+j1+"$1")]})],o);case"::placeholder":return _m([By(t,{props:[bi(f,/:(plac\w+)/,":"+vi+"input-$1")]}),By(t,{props:[bi(f,/:(plac\w+)/,":"+j1+"$1")]}),By(t,{props:[bi(f,/:(plac\w+)/,Lo+"input-$1")]})],o)}return""})}},PZ=[IZ],RZ=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(ae){var ve=ae.getAttribute("data-emotion");ve.indexOf(" ")!==-1&&(document.head.appendChild(ae),ae.setAttribute("data-s",""))})}var o=t.stylisPlugins||PZ,f={},y,s=[];y=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(ae){for(var ve=ae.getAttribute("data-emotion").split(" "),ie=1;ie<ve.length;ie++)f[ve[ie]]=!0;s.push(ae)});var k,I=[TZ,AZ];{var D,N=[_Z,SZ(function(ae){D.insert(ae)})],U=wZ(I.concat(o,N)),q=function(ve){return _m(vZ(ve),U)};k=function(ve,ie,W,K){D=W,q(ve?ve+"{"+ie.styles+"}":ie.styles),K&&(Z.inserted[ie.name]=!0)}}var Z={key:r,sheet:new sZ({key:r,container:y,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:f,registered:{},insert:k};return Z.sheet.hydrate(s),Z};function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}var VB={exports:{}},Mi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=typeof Symbol=="function"&&Symbol.for,iP=go?Symbol.for("react.element"):60103,sP=go?Symbol.for("react.portal"):60106,Gw=go?Symbol.for("react.fragment"):60107,Xw=go?Symbol.for("react.strict_mode"):60108,qw=go?Symbol.for("react.profiler"):60114,Yw=go?Symbol.for("react.provider"):60109,Zw=go?Symbol.for("react.context"):60110,oP=go?Symbol.for("react.async_mode"):60111,Kw=go?Symbol.for("react.concurrent_mode"):60111,Jw=go?Symbol.for("react.forward_ref"):60112,Qw=go?Symbol.for("react.suspense"):60113,MZ=go?Symbol.for("react.suspense_list"):60120,eS=go?Symbol.for("react.memo"):60115,tS=go?Symbol.for("react.lazy"):60116,LZ=go?Symbol.for("react.block"):60121,OZ=go?Symbol.for("react.fundamental"):60117,DZ=go?Symbol.for("react.responder"):60118,zZ=go?Symbol.for("react.scope"):60119;function Ua(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iP:switch(e=e.type,e){case oP:case Kw:case Gw:case qw:case Xw:case Qw:return e;default:switch(e=e&&e.$$typeof,e){case Zw:case Jw:case tS:case eS:case Yw:return e;default:return t}}case sP:return t}}}function HB(e){return Ua(e)===Kw}Mi.AsyncMode=oP;Mi.ConcurrentMode=Kw;Mi.ContextConsumer=Zw;Mi.ContextProvider=Yw;Mi.Element=iP;Mi.ForwardRef=Jw;Mi.Fragment=Gw;Mi.Lazy=tS;Mi.Memo=eS;Mi.Portal=sP;Mi.Profiler=qw;Mi.StrictMode=Xw;Mi.Suspense=Qw;Mi.isAsyncMode=function(e){return HB(e)||Ua(e)===oP};Mi.isConcurrentMode=HB;Mi.isContextConsumer=function(e){return Ua(e)===Zw};Mi.isContextProvider=function(e){return Ua(e)===Yw};Mi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iP};Mi.isForwardRef=function(e){return Ua(e)===Jw};Mi.isFragment=function(e){return Ua(e)===Gw};Mi.isLazy=function(e){return Ua(e)===tS};Mi.isMemo=function(e){return Ua(e)===eS};Mi.isPortal=function(e){return Ua(e)===sP};Mi.isProfiler=function(e){return Ua(e)===qw};Mi.isStrictMode=function(e){return Ua(e)===Xw};Mi.isSuspense=function(e){return Ua(e)===Qw};Mi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Gw||e===Kw||e===qw||e===Xw||e===Qw||e===MZ||typeof e=="object"&&e!==null&&(e.$$typeof===tS||e.$$typeof===eS||e.$$typeof===Yw||e.$$typeof===Zw||e.$$typeof===Jw||e.$$typeof===OZ||e.$$typeof===DZ||e.$$typeof===zZ||e.$$typeof===LZ)};Mi.typeOf=Ua;VB.exports=Mi;var NZ=VB.exports,WB=NZ,jZ={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FZ={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},GB={};GB[WB.ForwardRef]=jZ;GB[WB.Memo]=FZ;var BZ=!0;function $Z(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):n+=o+" "}),n}var XB=function(t,r,n){var o=t.key+"-"+r.name;(n===!1||BZ===!1)&&t.registered[o]===void 0&&(t.registered[o]=r.styles)},qB=function(t,r,n){XB(t,r,n);var o=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var f=r;do t.insert(r===f?"."+o:"",f,t.sheet,!0),f=f.next;while(f!==void 0)}};function UZ(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var YB={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},VZ=/[A-Z]|^ms/g,HZ=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ZB=function(t){return t.charCodeAt(1)===45},hz=function(t){return t!=null&&typeof t!="boolean"},ak=$B(function(e){return ZB(e)?e:e.replace(VZ,"-$&").toLowerCase()}),dz=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(HZ,function(n,o,f){return cc={name:o,styles:f,next:cc},o})}return YB[t]!==1&&!ZB(t)&&typeof r=="number"&&r!==0?r+"px":r};function sv(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return cc={name:r.name,styles:r.styles,next:cc},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)cc={name:n.name,styles:n.styles,next:cc},n=n.next;var o=r.styles+";";return o}return WZ(e,t,r)}case"function":{if(e!==void 0){var f=cc,y=r(e);return cc=f,sv(e,t,y)}break}}if(t==null)return r;var s=t[r];return s!==void 0?s:r}function WZ(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=sv(e,t,r[o])+";";else for(var f in r){var y=r[f];if(typeof y!="object")t!=null&&t[y]!==void 0?n+=f+"{"+t[y]+"}":hz(y)&&(n+=ak(f)+":"+dz(f,y)+";");else if(Array.isArray(y)&&typeof y[0]=="string"&&(t==null||t[y[0]]===void 0))for(var s=0;s<y.length;s++)hz(y[s])&&(n+=ak(f)+":"+dz(f,y[s])+";");else{var k=sv(e,t,y);switch(f){case"animation":case"animationName":{n+=ak(f)+":"+k+";";break}default:n+=f+"{"+k+"}"}}}return n}var fz=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cc,aP=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,f="";cc=void 0;var y=t[0];y==null||y.raw===void 0?(o=!1,f+=sv(n,r,y)):f+=y[0];for(var s=1;s<t.length;s++)f+=sv(n,r,t[s]),o&&(f+=y[s]);fz.lastIndex=0;for(var k="",I;(I=fz.exec(f))!==null;)k+="-"+I[1];var D=UZ(f)+k;return{name:D,styles:f,next:cc}},GZ=function(t){return t()},KB=PE["useInsertionEffect"]?PE["useInsertionEffect"]:!1,XZ=KB||GZ,pz=KB||le.useLayoutEffect,JB=le.createContext(typeof HTMLElement<"u"?RZ({key:"css"}):null);JB.Provider;var QB=function(t){return le.forwardRef(function(r,n){var o=le.useContext(JB);return t(r,o,n)})},ov=le.createContext({}),qZ=function(t,r){if(typeof r=="function"){var n=r(t);return n}return F1({},t,r)},YZ=cz(function(e){return cz(function(t){return qZ(e,t)})}),ZZ=function(t){var r=le.useContext(ov);return t.theme!==r&&(r=YZ(r)(t.theme)),le.createElement(ov.Provider,{value:r},t.children)},rS=QB(function(e,t){var r=e.styles,n=aP([r],void 0,le.useContext(ov)),o=le.useRef();return pz(function(){var f=t.key+"-global",y=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,k=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(y.before=t.sheet.tags[0]),k!==null&&(s=!0,k.setAttribute("data-emotion",f),y.hydrate([k])),o.current=[y,s],function(){y.flush()}},[t]),pz(function(){var f=o.current,y=f[0],s=f[1];if(s){f[1]=!1;return}if(n.next!==void 0&&qB(t,n.next,!0),y.tags.length){var k=y.tags[y.tags.length-1].nextElementSibling;y.before=k,y.flush()}t.insert("",n,y,!1)},[t,n.name]),null});function KZ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return aP(t)}var JZ=function(){var t=KZ.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},e$=String.raw,t$=e$`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,QZ=()=>A.jsx(rS,{styles:t$}),eK=({scope:e=""})=>A.jsx(rS,{styles:e$`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${t$}
    `});function tK(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function Dv(e={}){const{name:t,strict:r=!0,hookName:n="useContext",providerName:o="Provider",errorMessage:f,defaultValue:y}=e,s=le.createContext(y);s.displayName=t;function k(){var I;const D=le.useContext(s);if(!D&&r){const N=new Error(f??tK(n,o));throw N.name="ContextError",(I=Error.captureStackTrace)==null||I.call(Error,N,k),N}return D}return[s.Provider,k,s]}var[rK,nK]=Dv({strict:!1,name:"PortalManagerContext"});function r$(e){const{children:t,zIndex:r}=e;return A.jsx(rK,{value:{zIndex:r},children:t})}r$.displayName="PortalManager";var B1=globalThis!=null&&globalThis.document?le.useLayoutEffect:le.useEffect,[n$,iK]=Dv({strict:!1,name:"PortalContext"}),lP="chakra-portal",sK=".chakra-portal",oK=e=>A.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),aK=e=>{const{appendToParentPortal:t,children:r}=e,[n,o]=le.useState(null),f=le.useRef(null),[,y]=le.useState({});le.useEffect(()=>y({}),[]);const s=iK(),k=nK();B1(()=>{if(!n)return;const D=n.ownerDocument,N=t?s??D.body:D.body;if(!N)return;f.current=D.createElement("div"),f.current.className=lP,N.appendChild(f.current),y({});const U=f.current;return()=>{N.contains(U)&&N.removeChild(U)}},[n]);const I=k!=null&&k.zIndex?A.jsx(oK,{zIndex:k==null?void 0:k.zIndex,children:r}):r;return f.current?Fw.createPortal(A.jsx(n$,{value:f.current,children:I}),f.current):A.jsx("span",{ref:D=>{D&&o(D)}})},lK=e=>{const{children:t,containerRef:r,appendToParentPortal:n}=e,o=r.current,f=o??(typeof window<"u"?document.body:void 0),y=le.useMemo(()=>{const k=o==null?void 0:o.ownerDocument.createElement("div");return k&&(k.className=lP),k},[o]),[,s]=le.useState({});return B1(()=>s({}),[]),B1(()=>{if(!(!y||!f))return f.appendChild(y),()=>{f.removeChild(y)}},[y,f]),f&&y?Fw.createPortal(A.jsx(n$,{value:n?y:null,children:t}),y):null};function nS(e){const t={appendToParentPortal:!0,...e},{containerRef:r,...n}=t;return r?A.jsx(lK,{containerRef:r,...n}):A.jsx(aK,{...n})}nS.className=lP;nS.selector=sK;nS.displayName="Portal";function cK(){const e=le.useContext(ov);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var cP=le.createContext({});cP.displayName="ColorModeContext";function uP(){const e=le.useContext(cP);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var Fb={light:"chakra-ui-light",dark:"chakra-ui-dark"};function uK(e={}){const{preventTransition:t=!0}=e,r={setDataset:n=>{const o=t?r.preventTransition():void 0;document.documentElement.dataset.theme=n,document.documentElement.style.colorScheme=n,o==null||o()},setClassName(n){document.body.classList.add(n?Fb.dark:Fb.light),document.body.classList.remove(n?Fb.light:Fb.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(n){var o;return((o=r.query().matches)!=null?o:n==="dark")?"dark":"light"},addListener(n){const o=r.query(),f=y=>{n(y.matches?"dark":"light")};return typeof o.addListener=="function"?o.addListener(f):o.addEventListener("change",f),()=>{typeof o.removeListener=="function"?o.removeListener(f):o.removeEventListener("change",f)}},preventTransition(){const n=document.createElement("style");return n.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(n),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(n)})})}}};return r}var hK="chakra-ui-color-mode";function dK(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let r;try{r=localStorage.getItem(e)||t}catch{}return r||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var fK=dK(hK),mz=()=>{};function gz(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function i$(e){const{value:t,children:r,options:{useSystemColorMode:n,initialColorMode:o,disableTransitionOnChange:f}={},colorModeManager:y=fK}=e,s=o==="dark"?"dark":"light",[k,I]=le.useState(()=>gz(y,s)),[D,N]=le.useState(()=>gz(y)),{getSystemTheme:U,setClassName:q,setDataset:Z,addListener:ae}=le.useMemo(()=>uK({preventTransition:f}),[f]),ve=o==="system"&&!k?D:k,ie=le.useCallback(he=>{const de=he==="system"?U():he;I(de),q(de==="dark"),Z(de),y.set(de)},[y,U,q,Z]);B1(()=>{o==="system"&&N(U())},[]),le.useEffect(()=>{const he=y.get();if(he){ie(he);return}if(o==="system"){ie("system");return}ie(s)},[y,s,o,ie]);const W=le.useCallback(()=>{ie(ve==="dark"?"light":"dark")},[ve,ie]);le.useEffect(()=>{if(n)return ae(ie)},[n,ae,ie]);const K=le.useMemo(()=>({colorMode:t??ve,toggleColorMode:t?mz:W,setColorMode:t?mz:ie,forced:t!==void 0}),[ve,W,ie,t]);return A.jsx(cP.Provider,{value:K,children:r})}i$.displayName="ColorModeProvider";function pK(){const e=uP(),t=cK();return{...e,theme:t}}var lg=(...e)=>e.filter(Boolean).join(" ");function bc(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function Th(e,...t){return mK(e)?e(...t):e}var mK=e=>typeof e=="function",$1={exports:{}};$1.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",o=800,f=16,y=9007199254740991,s="[object Arguments]",k="[object Array]",I="[object AsyncFunction]",D="[object Boolean]",N="[object Date]",U="[object Error]",q="[object Function]",Z="[object GeneratorFunction]",ae="[object Map]",ve="[object Number]",ie="[object Null]",W="[object Object]",K="[object Proxy]",he="[object RegExp]",de="[object Set]",Ae="[object String]",Te="[object Undefined]",Ue="[object WeakMap]",Pe="[object ArrayBuffer]",$e="[object DataView]",Ve="[object Float32Array]",Fe="[object Float64Array]",Ye="[object Int8Array]",ft="[object Int16Array]",Pt="[object Int32Array]",or="[object Uint8Array]",xr="[object Uint8ClampedArray]",mt="[object Uint16Array]",Xt="[object Uint32Array]",Wt=/[\\^$.*+?()[\]{}|]/g,Ot=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,Vt={};Vt[Ve]=Vt[Fe]=Vt[Ye]=Vt[ft]=Vt[Pt]=Vt[or]=Vt[xr]=Vt[mt]=Vt[Xt]=!0,Vt[s]=Vt[k]=Vt[Pe]=Vt[D]=Vt[$e]=Vt[N]=Vt[U]=Vt[q]=Vt[ae]=Vt[ve]=Vt[W]=Vt[he]=Vt[de]=Vt[Ae]=Vt[Ue]=!1;var ir=typeof Ta=="object"&&Ta&&Ta.Object===Object&&Ta,vt=typeof self=="object"&&self&&self.Object===Object&&self,Dt=ir||vt||Function("return this")(),ur=t&&!t.nodeType&&t,Tr=ur&&!0&&e&&!e.nodeType&&e,fr=Tr&&Tr.exports===ur,Cr=fr&&ir.process,mr=function(){try{var Xe=Tr&&Tr.require&&Tr.require("util").types;return Xe||Cr&&Cr.binding&&Cr.binding("util")}catch{}}(),nn=mr&&mr.isTypedArray;function Br(Xe,ht,Se){switch(Se.length){case 0:return Xe.call(ht);case 1:return Xe.call(ht,Se[0]);case 2:return Xe.call(ht,Se[0],Se[1]);case 3:return Xe.call(ht,Se[0],Se[1],Se[2])}return Xe.apply(ht,Se)}function Sn(Xe,ht){for(var Se=-1,et=Array(Xe);++Se<Xe;)et[Se]=ht(Se);return et}function on(Xe){return function(ht){return Xe(ht)}}function Gr(Xe,ht){return Xe==null?void 0:Xe[ht]}function Zi(Xe,ht){return function(Se){return Xe(ht(Se))}}var Kr=Array.prototype,En=Function.prototype,wi=Object.prototype,Hi=Dt["__core-js_shared__"],Tt=En.toString,pr=wi.hasOwnProperty,Er=function(){var Xe=/[^.]+$/.exec(Hi&&Hi.keys&&Hi.keys.IE_PROTO||"");return Xe?"Symbol(src)_1."+Xe:""}(),Mr=wi.toString,Zt=Tt.call(Object),gr=RegExp("^"+Tt.call(pr).replace(Wt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=fr?Dt.Buffer:void 0,Hn=Dt.Symbol,ti=Dt.Uint8Array,qn=Xr?Xr.allocUnsafe:void 0,Ii=Zi(Object.getPrototypeOf,Object),zi=Object.create,Fn=wi.propertyIsEnumerable,Ki=Kr.splice,Si=Hn?Hn.toStringTag:void 0,is=function(){try{var Xe=Le(Object,"defineProperty");return Xe({},"",{}),Xe}catch{}}(),Ds=Xr?Xr.isBuffer:void 0,Ge=Math.max,we=Date.now,Ce=Le(Dt,"Map"),He=Le(Object,"create"),Qe=function(){function Xe(){}return function(ht){if(!Tn(ht))return{};if(zi)return zi(ht);Xe.prototype=ht;var Se=new Xe;return Xe.prototype=void 0,Se}}();function ot(Xe){var ht=-1,Se=Xe==null?0:Xe.length;for(this.clear();++ht<Se;){var et=Xe[ht];this.set(et[0],et[1])}}function gt(){this.__data__=He?He(null):{},this.size=0}function yt(Xe){var ht=this.has(Xe)&&delete this.__data__[Xe];return this.size-=ht?1:0,ht}function ct(Xe){var ht=this.__data__;if(He){var Se=ht[Xe];return Se===n?void 0:Se}return pr.call(ht,Xe)?ht[Xe]:void 0}function bt(Xe){var ht=this.__data__;return He?ht[Xe]!==void 0:pr.call(ht,Xe)}function qt(Xe,ht){var Se=this.__data__;return this.size+=this.has(Xe)?0:1,Se[Xe]=He&&ht===void 0?n:ht,this}ot.prototype.clear=gt,ot.prototype.delete=yt,ot.prototype.get=ct,ot.prototype.has=bt,ot.prototype.set=qt;function Kt(Xe){var ht=-1,Se=Xe==null?0:Xe.length;for(this.clear();++ht<Se;){var et=Xe[ht];this.set(et[0],et[1])}}function Gt(){this.__data__=[],this.size=0}function Dr(Xe){var ht=this.__data__,Se=v(ht,Xe);if(Se<0)return!1;var et=ht.length-1;return Se==et?ht.pop():Ki.call(ht,Se,1),--this.size,!0}function Qr(Xe){var ht=this.__data__,Se=v(ht,Xe);return Se<0?void 0:ht[Se][1]}function Vr(Xe){return v(this.__data__,Xe)>-1}function jr(Xe,ht){var Se=this.__data__,et=v(Se,Xe);return et<0?(++this.size,Se.push([Xe,ht])):Se[et][1]=ht,this}Kt.prototype.clear=Gt,Kt.prototype.delete=Dr,Kt.prototype.get=Qr,Kt.prototype.has=Vr,Kt.prototype.set=jr;function Rr(Xe){var ht=-1,Se=Xe==null?0:Xe.length;for(this.clear();++ht<Se;){var et=Xe[ht];this.set(et[0],et[1])}}function Cn(){this.size=0,this.__data__={hash:new ot,map:new(Ce||Kt),string:new ot}}function Bn(Xe){var ht=ke(this,Xe).delete(Xe);return this.size-=ht?1:0,ht}function $n(Xe){return ke(this,Xe).get(Xe)}function gn(Xe){return ke(this,Xe).has(Xe)}function Ni(Xe,ht){var Se=ke(this,Xe),et=Se.size;return Se.set(Xe,ht),this.size+=Se.size==et?0:1,this}Rr.prototype.clear=Cn,Rr.prototype.delete=Bn,Rr.prototype.get=$n,Rr.prototype.has=gn,Rr.prototype.set=Ni;function Wn(Xe){var ht=this.__data__=new Kt(Xe);this.size=ht.size}function Yn(){this.__data__=new Kt,this.size=0}function zs(Xe){var ht=this.__data__,Se=ht.delete(Xe);return this.size=ht.size,Se}function Ys(Xe){return this.__data__.get(Xe)}function hs(Xe){return this.__data__.has(Xe)}function pe(Xe,ht){var Se=this.__data__;if(Se instanceof Kt){var et=Se.__data__;if(!Ce||et.length<r-1)return et.push([Xe,ht]),this.size=++Se.size,this;Se=this.__data__=new Rr(et)}return Se.set(Xe,ht),this.size=Se.size,this}Wn.prototype.clear=Yn,Wn.prototype.delete=zs,Wn.prototype.get=Ys,Wn.prototype.has=hs,Wn.prototype.set=pe;function c(Xe,ht){var Se=Yr(Xe),et=!Se&&nr(Xe),Mt=!Se&&!et&&ri(Xe),dr=!Se&&!et&&!Mt&&ii(Xe),Hr=Se||et||Mt||dr,kr=Hr?Sn(Xe.length,String):[],en=kr.length;for(var wn in Xe)(ht||pr.call(Xe,wn))&&!(Hr&&(wn=="length"||Mt&&(wn=="offset"||wn=="parent")||dr&&(wn=="buffer"||wn=="byteLength"||wn=="byteOffset")||Et(wn,en)))&&kr.push(wn);return kr}function d(Xe,ht,Se){(Se!==void 0&&!Rt(Xe[ht],Se)||Se===void 0&&!(ht in Xe))&&b(Xe,ht,Se)}function m(Xe,ht,Se){var et=Xe[ht];(!(pr.call(Xe,ht)&&Rt(et,Se))||Se===void 0&&!(ht in Xe))&&b(Xe,ht,Se)}function v(Xe,ht){for(var Se=Xe.length;Se--;)if(Rt(Xe[Se][0],ht))return Se;return-1}function b(Xe,ht,Se){ht=="__proto__"&&is?is(Xe,ht,{configurable:!0,enumerable:!0,value:Se,writable:!0}):Xe[ht]=Se}var S=xe();function T(Xe){return Xe==null?Xe===void 0?Te:ie:Si&&Si in Object(Xe)?rt(Xe):tn(Xe)}function M(Xe){return Fo(Xe)&&T(Xe)==s}function z(Xe){if(!Tn(Xe)||hr(Xe))return!1;var ht=Qn(Xe)?gr:Ot;return ht.test(it(Xe))}function $(Xe){return Fo(Xe)&&ni(Xe.length)&&!!Vt[T(Xe)]}function H(Xe){if(!Tn(Xe))return Jr(Xe);var ht=ar(Xe),Se=[];for(var et in Xe)et=="constructor"&&(ht||!pr.call(Xe,et))||Se.push(et);return Se}function B(Xe,ht,Se,et,Mt){Xe!==ht&&S(ht,function(dr,Hr){if(Mt||(Mt=new Wn),Tn(dr))ee(Xe,ht,Hr,Se,B,et,Mt);else{var kr=et?et(bn(Xe,Hr),dr,Hr+"",Xe,ht,Mt):void 0;kr===void 0&&(kr=dr),d(Xe,Hr,kr)}},Bo)}function ee(Xe,ht,Se,et,Mt,dr,Hr){var kr=bn(Xe,Se),en=bn(ht,Se),wn=Hr.get(en);if(wn){d(Xe,Se,wn);return}var Rn=dr?dr(kr,en,Se+"",Xe,ht,Hr):void 0,kn=Rn===void 0;if(kn){var ss=Yr(en),os=!ss&&ri(en),ji=!ss&&!os&&ii(en);Rn=en,ss||os||ji?Yr(kr)?Rn=kr:$r(kr)?Rn=O(kr):os?(kn=!1,Rn=ye(en,!0)):ji?(kn=!1,Rn=Ee(en,!0)):Rn=[]:Li(en)||nr(en)?(Rn=kr,nr(kr)?Rn=Jo(kr):(!Tn(kr)||Qn(kr))&&(Rn=Ze(en))):kn=!1}kn&&(Hr.set(en,Rn),Mt(Rn,en,et,dr,Hr),Hr.delete(en)),d(Xe,Se,Rn)}function re(Xe,ht){return Pn(pn(Xe,ht,Qo),Xe+"")}var ce=is?function(Xe,ht){return is(Xe,"toString",{configurable:!0,enumerable:!1,value:Ci(ht),writable:!0})}:Qo;function ye(Xe,ht){if(ht)return Xe.slice();var Se=Xe.length,et=qn?qn(Se):new Xe.constructor(Se);return Xe.copy(et),et}function _e(Xe){var ht=new Xe.constructor(Xe.byteLength);return new ti(ht).set(new ti(Xe)),ht}function Ee(Xe,ht){var Se=ht?_e(Xe.buffer):Xe.buffer;return new Xe.constructor(Se,Xe.byteOffset,Xe.length)}function O(Xe,ht){var Se=-1,et=Xe.length;for(ht||(ht=Array(et));++Se<et;)ht[Se]=Xe[Se];return ht}function X(Xe,ht,Se,et){var Mt=!Se;Se||(Se={});for(var dr=-1,Hr=ht.length;++dr<Hr;){var kr=ht[dr],en=et?et(Se[kr],Xe[kr],kr,Se,Xe):void 0;en===void 0&&(en=Xe[kr]),Mt?b(Se,kr,en):m(Se,kr,en)}return Se}function Q(Xe){return re(function(ht,Se){var et=-1,Mt=Se.length,dr=Mt>1?Se[Mt-1]:void 0,Hr=Mt>2?Se[2]:void 0;for(dr=Xe.length>3&&typeof dr=="function"?(Mt--,dr):void 0,Hr&&Bt(Se[0],Se[1],Hr)&&(dr=Mt<3?void 0:dr,Mt=1),ht=Object(ht);++et<Mt;){var kr=Se[et];kr&&Xe(ht,kr,et,dr)}return ht})}function xe(Xe){return function(ht,Se,et){for(var Mt=-1,dr=Object(ht),Hr=et(ht),kr=Hr.length;kr--;){var en=Hr[Xe?kr:++Mt];if(Se(dr[en],en,dr)===!1)break}return ht}}function ke(Xe,ht){var Se=Xe.__data__;return Nt(ht)?Se[typeof ht=="string"?"string":"hash"]:Se.map}function Le(Xe,ht){var Se=Gr(Xe,ht);return z(Se)?Se:void 0}function rt(Xe){var ht=pr.call(Xe,Si),Se=Xe[Si];try{Xe[Si]=void 0;var et=!0}catch{}var Mt=Mr.call(Xe);return et&&(ht?Xe[Si]=Se:delete Xe[Si]),Mt}function Ze(Xe){return typeof Xe.constructor=="function"&&!ar(Xe)?Qe(Ii(Xe)):{}}function Et(Xe,ht){var Se=typeof Xe;return ht=ht??y,!!ht&&(Se=="number"||Se!="symbol"&&ut.test(Xe))&&Xe>-1&&Xe%1==0&&Xe<ht}function Bt(Xe,ht,Se){if(!Tn(Se))return!1;var et=typeof ht;return(et=="number"?Or(Se)&&Et(ht,Se.length):et=="string"&&ht in Se)?Rt(Se[ht],Xe):!1}function Nt(Xe){var ht=typeof Xe;return ht=="string"||ht=="number"||ht=="symbol"||ht=="boolean"?Xe!=="__proto__":Xe===null}function hr(Xe){return!!Er&&Er in Xe}function ar(Xe){var ht=Xe&&Xe.constructor,Se=typeof ht=="function"&&ht.prototype||wi;return Xe===Se}function Jr(Xe){var ht=[];if(Xe!=null)for(var Se in Object(Xe))ht.push(Se);return ht}function tn(Xe){return Mr.call(Xe)}function pn(Xe,ht,Se){return ht=Ge(ht===void 0?Xe.length-1:ht,0),function(){for(var et=arguments,Mt=-1,dr=Ge(et.length-ht,0),Hr=Array(dr);++Mt<dr;)Hr[Mt]=et[ht+Mt];Mt=-1;for(var kr=Array(ht+1);++Mt<ht;)kr[Mt]=et[Mt];return kr[ht]=Se(Hr),Br(Xe,this,kr)}}function bn(Xe,ht){if(!(ht==="constructor"&&typeof Xe[ht]=="function")&&ht!="__proto__")return Xe[ht]}var Pn=Jn(ce);function Jn(Xe){var ht=0,Se=0;return function(){var et=we(),Mt=f-(et-Se);if(Se=et,Mt>0){if(++ht>=o)return arguments[0]}else ht=0;return Xe.apply(void 0,arguments)}}function it(Xe){if(Xe!=null){try{return Tt.call(Xe)}catch{}try{return Xe+""}catch{}}return""}function Rt(Xe,ht){return Xe===ht||Xe!==Xe&&ht!==ht}var nr=M(function(){return arguments}())?M:function(Xe){return Fo(Xe)&&pr.call(Xe,"callee")&&!Fn.call(Xe,"callee")},Yr=Array.isArray;function Or(Xe){return Xe!=null&&ni(Xe.length)&&!Qn(Xe)}function $r(Xe){return Fo(Xe)&&Or(Xe)}var ri=Ds||ea;function Qn(Xe){if(!Tn(Xe))return!1;var ht=T(Xe);return ht==q||ht==Z||ht==I||ht==K}function ni(Xe){return typeof Xe=="number"&&Xe>-1&&Xe%1==0&&Xe<=y}function Tn(Xe){var ht=typeof Xe;return Xe!=null&&(ht=="object"||ht=="function")}function Fo(Xe){return Xe!=null&&typeof Xe=="object"}function Li(Xe){if(!Fo(Xe)||T(Xe)!=W)return!1;var ht=Ii(Xe);if(ht===null)return!0;var Se=pr.call(ht,"constructor")&&ht.constructor;return typeof Se=="function"&&Se instanceof Se&&Tt.call(Se)==Zt}var ii=nn?on(nn):$;function Jo(Xe){return X(Xe,Bo(Xe))}function Bo(Xe){return Or(Xe)?c(Xe,!0):H(Xe)}var Zs=Q(function(Xe,ht,Se,et){B(Xe,ht,Se,et)});function Ci(Xe){return function(){return Xe}}function Qo(Xe){return Xe}function ea(){return!1}e.exports=Zs})($1,$1.exports);var gK=$1.exports;const fc=Of(gK);var yK=e=>/!(important)?$/.test(e),yz=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,xK=(e,t)=>r=>{const n=String(t),o=yK(n),f=yz(n),y=e?`${e}.${f}`:f;let s=bc(r.__cssMap)&&y in r.__cssMap?r.__cssMap[y].varRef:t;return s=yz(s),o?`${s} !important`:s};function hP(e){const{scale:t,transform:r,compose:n}=e;return(f,y)=>{var s;const k=xK(t,f)(y);let I=(s=r==null?void 0:r(k,y))!=null?s:k;return n&&(I=n(I,y)),I}}var Bb=(...e)=>t=>e.reduce((r,n)=>n(r),t);function Ka(e,t){return r=>{const n={property:r,scale:e};return n.transform=hP({scale:e,transform:t}),n}}var vK=({rtl:e,ltr:t})=>r=>r.direction==="rtl"?e:t;function bK(e){const{property:t,scale:r,transform:n}=e;return{scale:r,property:vK(t),transform:r?hP({scale:r,compose:n}):n}}var s$=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function _K(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...s$].join(" ")}function wK(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...s$].join(" ")}var SK={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},CK={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function kK(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var EK={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},MT={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},TK=new Set(Object.values(MT)),LT=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),AK=e=>e.trim();function IK(e,t){if(e==null||LT.has(e))return e;if(!(OT(e)||LT.has(e)))return`url('${e}')`;const o=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),f=o==null?void 0:o[1],y=o==null?void 0:o[2];if(!f||!y)return e;const s=f.includes("-gradient")?f:`${f}-gradient`,[k,...I]=y.split(",").map(AK).filter(Boolean);if((I==null?void 0:I.length)===0)return e;const D=k in MT?MT[k]:k;I.unshift(D);const N=I.map(U=>{if(TK.has(U))return U;const q=U.indexOf(" "),[Z,ae]=q!==-1?[U.substr(0,q),U.substr(q+1)]:[U],ve=OT(ae)?ae:ae&&ae.split(" "),ie=`colors.${Z}`,W=ie in t.__cssMap?t.__cssMap[ie].varRef:Z;return ve?[W,...Array.isArray(ve)?ve:[ve]].join(" "):W});return`${s}(${N.join(", ")})`}var OT=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),PK=(e,t)=>IK(e,t??{});function RK(e){return/^var\(--.+\)$/.test(e)}var MK=e=>{const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}},rc=e=>t=>`${e}(${t})`,fi={filter(e){return e!=="auto"?e:SK},backdropFilter(e){return e!=="auto"?e:CK},ring(e){return kK(fi.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?_K():e==="auto-gpu"?wK():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=MK(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const r={left:"right",right:"left"};return t.direction==="rtl"?r[e]:e},degree(e){if(RK(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:PK,blur:rc("blur"),opacity:rc("opacity"),brightness:rc("brightness"),contrast:rc("contrast"),dropShadow:rc("drop-shadow"),grayscale:rc("grayscale"),hueRotate:rc("hue-rotate"),invert:rc("invert"),saturate:rc("saturate"),sepia:rc("sepia"),bgImage(e){return e==null||OT(e)||LT.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:r,divide:n}=(t=EK[e])!=null?t:{},o={flexDirection:e};return r&&(o[r]=1),n&&(o[n]=1),o}},xt={borderWidths:Ka("borderWidths"),borderStyles:Ka("borderStyles"),colors:Ka("colors"),borders:Ka("borders"),gradients:Ka("gradients",fi.gradient),radii:Ka("radii",fi.px),space:Ka("space",Bb(fi.vh,fi.px)),spaceT:Ka("space",Bb(fi.vh,fi.px)),degreeT(e){return{property:e,transform:fi.degree}},prop(e,t,r){return{property:e,scale:t,...t&&{transform:hP({scale:t,transform:r})}}},propT(e,t){return{property:e,transform:t}},sizes:Ka("sizes",Bb(fi.vh,fi.px)),sizesT:Ka("sizes",Bb(fi.vh,fi.fraction)),shadows:Ka("shadows"),logical:bK,blur:Ka("blur",fi.blur)},R_={background:xt.colors("background"),backgroundColor:xt.colors("backgroundColor"),backgroundImage:xt.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:fi.bgClip},bgSize:xt.prop("backgroundSize"),bgPosition:xt.prop("backgroundPosition"),bg:xt.colors("background"),bgColor:xt.colors("backgroundColor"),bgPos:xt.prop("backgroundPosition"),bgRepeat:xt.prop("backgroundRepeat"),bgAttachment:xt.prop("backgroundAttachment"),bgGradient:xt.gradients("backgroundImage"),bgClip:{transform:fi.bgClip}};Object.assign(R_,{bgImage:R_.backgroundImage,bgImg:R_.backgroundImage});var xi={border:xt.borders("border"),borderWidth:xt.borderWidths("borderWidth"),borderStyle:xt.borderStyles("borderStyle"),borderColor:xt.colors("borderColor"),borderRadius:xt.radii("borderRadius"),borderTop:xt.borders("borderTop"),borderBlockStart:xt.borders("borderBlockStart"),borderTopLeftRadius:xt.radii("borderTopLeftRadius"),borderStartStartRadius:xt.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:xt.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:xt.radii("borderTopRightRadius"),borderStartEndRadius:xt.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:xt.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:xt.borders("borderRight"),borderInlineEnd:xt.borders("borderInlineEnd"),borderBottom:xt.borders("borderBottom"),borderBlockEnd:xt.borders("borderBlockEnd"),borderBottomLeftRadius:xt.radii("borderBottomLeftRadius"),borderBottomRightRadius:xt.radii("borderBottomRightRadius"),borderLeft:xt.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:xt.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:xt.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:xt.borders(["borderLeft","borderRight"]),borderInline:xt.borders("borderInline"),borderY:xt.borders(["borderTop","borderBottom"]),borderBlock:xt.borders("borderBlock"),borderTopWidth:xt.borderWidths("borderTopWidth"),borderBlockStartWidth:xt.borderWidths("borderBlockStartWidth"),borderTopColor:xt.colors("borderTopColor"),borderBlockStartColor:xt.colors("borderBlockStartColor"),borderTopStyle:xt.borderStyles("borderTopStyle"),borderBlockStartStyle:xt.borderStyles("borderBlockStartStyle"),borderBottomWidth:xt.borderWidths("borderBottomWidth"),borderBlockEndWidth:xt.borderWidths("borderBlockEndWidth"),borderBottomColor:xt.colors("borderBottomColor"),borderBlockEndColor:xt.colors("borderBlockEndColor"),borderBottomStyle:xt.borderStyles("borderBottomStyle"),borderBlockEndStyle:xt.borderStyles("borderBlockEndStyle"),borderLeftWidth:xt.borderWidths("borderLeftWidth"),borderInlineStartWidth:xt.borderWidths("borderInlineStartWidth"),borderLeftColor:xt.colors("borderLeftColor"),borderInlineStartColor:xt.colors("borderInlineStartColor"),borderLeftStyle:xt.borderStyles("borderLeftStyle"),borderInlineStartStyle:xt.borderStyles("borderInlineStartStyle"),borderRightWidth:xt.borderWidths("borderRightWidth"),borderInlineEndWidth:xt.borderWidths("borderInlineEndWidth"),borderRightColor:xt.colors("borderRightColor"),borderInlineEndColor:xt.colors("borderInlineEndColor"),borderRightStyle:xt.borderStyles("borderRightStyle"),borderInlineEndStyle:xt.borderStyles("borderInlineEndStyle"),borderTopRadius:xt.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:xt.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:xt.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:xt.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(xi,{rounded:xi.borderRadius,roundedTop:xi.borderTopRadius,roundedTopLeft:xi.borderTopLeftRadius,roundedTopRight:xi.borderTopRightRadius,roundedTopStart:xi.borderStartStartRadius,roundedTopEnd:xi.borderStartEndRadius,roundedBottom:xi.borderBottomRadius,roundedBottomLeft:xi.borderBottomLeftRadius,roundedBottomRight:xi.borderBottomRightRadius,roundedBottomStart:xi.borderEndStartRadius,roundedBottomEnd:xi.borderEndEndRadius,roundedLeft:xi.borderLeftRadius,roundedRight:xi.borderRightRadius,roundedStart:xi.borderInlineStartRadius,roundedEnd:xi.borderInlineEndRadius,borderStart:xi.borderInlineStart,borderEnd:xi.borderInlineEnd,borderTopStartRadius:xi.borderStartStartRadius,borderTopEndRadius:xi.borderStartEndRadius,borderBottomStartRadius:xi.borderEndStartRadius,borderBottomEndRadius:xi.borderEndEndRadius,borderStartRadius:xi.borderInlineStartRadius,borderEndRadius:xi.borderInlineEndRadius,borderStartWidth:xi.borderInlineStartWidth,borderEndWidth:xi.borderInlineEndWidth,borderStartColor:xi.borderInlineStartColor,borderEndColor:xi.borderInlineEndColor,borderStartStyle:xi.borderInlineStartStyle,borderEndStyle:xi.borderInlineEndStyle});var LK={color:xt.colors("color"),textColor:xt.colors("color"),fill:xt.colors("fill"),stroke:xt.colors("stroke")},DT={boxShadow:xt.shadows("boxShadow"),mixBlendMode:!0,blendMode:xt.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:xt.prop("backgroundBlendMode"),opacity:!0};Object.assign(DT,{shadow:DT.boxShadow});var OK={filter:{transform:fi.filter},blur:xt.blur("--chakra-blur"),brightness:xt.propT("--chakra-brightness",fi.brightness),contrast:xt.propT("--chakra-contrast",fi.contrast),hueRotate:xt.degreeT("--chakra-hue-rotate"),invert:xt.propT("--chakra-invert",fi.invert),saturate:xt.propT("--chakra-saturate",fi.saturate),dropShadow:xt.propT("--chakra-drop-shadow",fi.dropShadow),backdropFilter:{transform:fi.backdropFilter},backdropBlur:xt.blur("--chakra-backdrop-blur"),backdropBrightness:xt.propT("--chakra-backdrop-brightness",fi.brightness),backdropContrast:xt.propT("--chakra-backdrop-contrast",fi.contrast),backdropHueRotate:xt.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:xt.propT("--chakra-backdrop-invert",fi.invert),backdropSaturate:xt.propT("--chakra-backdrop-saturate",fi.saturate)},U1={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:fi.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:xt.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:xt.space("gap"),rowGap:xt.space("rowGap"),columnGap:xt.space("columnGap")};Object.assign(U1,{flexDir:U1.flexDirection});var o$={gridGap:xt.space("gridGap"),gridColumnGap:xt.space("gridColumnGap"),gridRowGap:xt.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},DK={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:fi.outline},outlineOffset:!0,outlineColor:xt.colors("outlineColor")},el={width:xt.sizesT("width"),inlineSize:xt.sizesT("inlineSize"),height:xt.sizes("height"),blockSize:xt.sizes("blockSize"),boxSize:xt.sizes(["width","height"]),minWidth:xt.sizes("minWidth"),minInlineSize:xt.sizes("minInlineSize"),minHeight:xt.sizes("minHeight"),minBlockSize:xt.sizes("minBlockSize"),maxWidth:xt.sizes("maxWidth"),maxInlineSize:xt.sizes("maxInlineSize"),maxHeight:xt.sizes("maxHeight"),maxBlockSize:xt.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var r,n,o;return{[`@media screen and (min-width: ${(o=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n.minW)!=null?o:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var r,n,o;return{[`@media screen and (max-width: ${(o=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n._minW)!=null?o:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:xt.propT("float",fi.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(el,{w:el.width,h:el.height,minW:el.minWidth,maxW:el.maxWidth,minH:el.minHeight,maxH:el.maxHeight,overscroll:el.overscrollBehavior,overscrollX:el.overscrollBehaviorX,overscrollY:el.overscrollBehaviorY});var zK={listStyleType:!0,listStylePosition:!0,listStylePos:xt.prop("listStylePosition"),listStyleImage:!0,listStyleImg:xt.prop("listStyleImage")};function NK(e,t,r,n){const o=typeof t=="string"?t.split("."):[t];for(n=0;n<o.length&&e;n+=1)e=e[o[n]];return e===void 0?r:e}var jK=e=>{const t=new WeakMap;return(n,o,f,y)=>{if(typeof n>"u")return e(n,o,f);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(o))return s.get(o);const k=e(n,o,f,y);return s.set(o,k),k}},FK=jK(NK),BK={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},$K={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},lk=(e,t,r)=>{const n={},o=FK(e,t,{});for(const f in o)f in r&&r[f]!=null||(n[f]=o[f]);return n},UK={srOnly:{transform(e){return e===!0?BK:e==="focusable"?$K:{}}},layerStyle:{processResult:!0,transform:(e,t,r)=>lk(t,`layerStyles.${e}`,r)},textStyle:{processResult:!0,transform:(e,t,r)=>lk(t,`textStyles.${e}`,r)},apply:{processResult:!0,transform:(e,t,r)=>lk(t,e,r)}},wx={position:!0,pos:xt.prop("position"),zIndex:xt.prop("zIndex","zIndices"),inset:xt.spaceT("inset"),insetX:xt.spaceT(["left","right"]),insetInline:xt.spaceT("insetInline"),insetY:xt.spaceT(["top","bottom"]),insetBlock:xt.spaceT("insetBlock"),top:xt.spaceT("top"),insetBlockStart:xt.spaceT("insetBlockStart"),bottom:xt.spaceT("bottom"),insetBlockEnd:xt.spaceT("insetBlockEnd"),left:xt.spaceT("left"),insetInlineStart:xt.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:xt.spaceT("right"),insetInlineEnd:xt.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(wx,{insetStart:wx.insetInlineStart,insetEnd:wx.insetInlineEnd});var VK={ring:{transform:fi.ring},ringColor:xt.colors("--chakra-ring-color"),ringOffset:xt.prop("--chakra-ring-offset-width"),ringOffsetColor:xt.colors("--chakra-ring-offset-color"),ringInset:xt.prop("--chakra-ring-inset")},ts={margin:xt.spaceT("margin"),marginTop:xt.spaceT("marginTop"),marginBlockStart:xt.spaceT("marginBlockStart"),marginRight:xt.spaceT("marginRight"),marginInlineEnd:xt.spaceT("marginInlineEnd"),marginBottom:xt.spaceT("marginBottom"),marginBlockEnd:xt.spaceT("marginBlockEnd"),marginLeft:xt.spaceT("marginLeft"),marginInlineStart:xt.spaceT("marginInlineStart"),marginX:xt.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:xt.spaceT("marginInline"),marginY:xt.spaceT(["marginTop","marginBottom"]),marginBlock:xt.spaceT("marginBlock"),padding:xt.space("padding"),paddingTop:xt.space("paddingTop"),paddingBlockStart:xt.space("paddingBlockStart"),paddingRight:xt.space("paddingRight"),paddingBottom:xt.space("paddingBottom"),paddingBlockEnd:xt.space("paddingBlockEnd"),paddingLeft:xt.space("paddingLeft"),paddingInlineStart:xt.space("paddingInlineStart"),paddingInlineEnd:xt.space("paddingInlineEnd"),paddingX:xt.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:xt.space("paddingInline"),paddingY:xt.space(["paddingTop","paddingBottom"]),paddingBlock:xt.space("paddingBlock")};Object.assign(ts,{m:ts.margin,mt:ts.marginTop,mr:ts.marginRight,me:ts.marginInlineEnd,marginEnd:ts.marginInlineEnd,mb:ts.marginBottom,ml:ts.marginLeft,ms:ts.marginInlineStart,marginStart:ts.marginInlineStart,mx:ts.marginX,my:ts.marginY,p:ts.padding,pt:ts.paddingTop,py:ts.paddingY,px:ts.paddingX,pb:ts.paddingBottom,pl:ts.paddingLeft,ps:ts.paddingInlineStart,paddingStart:ts.paddingInlineStart,pr:ts.paddingRight,pe:ts.paddingInlineEnd,paddingEnd:ts.paddingInlineEnd});var HK={textDecorationColor:xt.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:xt.shadows("textShadow")},WK={clipPath:!0,transform:xt.propT("transform",fi.transform),transformOrigin:!0,translateX:xt.spaceT("--chakra-translate-x"),translateY:xt.spaceT("--chakra-translate-y"),skewX:xt.degreeT("--chakra-skew-x"),skewY:xt.degreeT("--chakra-skew-y"),scaleX:xt.prop("--chakra-scale-x"),scaleY:xt.prop("--chakra-scale-y"),scale:xt.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:xt.degreeT("--chakra-rotate")},GK={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:xt.prop("transitionDuration","transition.duration"),transitionProperty:xt.prop("transitionProperty","transition.property"),transitionTimingFunction:xt.prop("transitionTimingFunction","transition.easing")},XK={fontFamily:xt.prop("fontFamily","fonts"),fontSize:xt.prop("fontSize","fontSizes",fi.px),fontWeight:xt.prop("fontWeight","fontWeights"),lineHeight:xt.prop("lineHeight","lineHeights"),letterSpacing:xt.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},qK={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:xt.spaceT("scrollMargin"),scrollMarginTop:xt.spaceT("scrollMarginTop"),scrollMarginBottom:xt.spaceT("scrollMarginBottom"),scrollMarginLeft:xt.spaceT("scrollMarginLeft"),scrollMarginRight:xt.spaceT("scrollMarginRight"),scrollMarginX:xt.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:xt.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:xt.spaceT("scrollPadding"),scrollPaddingTop:xt.spaceT("scrollPaddingTop"),scrollPaddingBottom:xt.spaceT("scrollPaddingBottom"),scrollPaddingLeft:xt.spaceT("scrollPaddingLeft"),scrollPaddingRight:xt.spaceT("scrollPaddingRight"),scrollPaddingX:xt.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:xt.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function a$(e){return bc(e)&&e.reference?e.reference:String(e)}var iS=(e,...t)=>t.map(a$).join(` ${e} `).replace(/calc/g,""),xz=(...e)=>`calc(${iS("+",...e)})`,vz=(...e)=>`calc(${iS("-",...e)})`,zT=(...e)=>`calc(${iS("*",...e)})`,bz=(...e)=>`calc(${iS("/",...e)})`,_z=e=>{const t=a$(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:zT(t,-1)},Jd=Object.assign(e=>({add:(...t)=>Jd(xz(e,...t)),subtract:(...t)=>Jd(vz(e,...t)),multiply:(...t)=>Jd(zT(e,...t)),divide:(...t)=>Jd(bz(e,...t)),negate:()=>Jd(_z(e)),toString:()=>e.toString()}),{add:xz,subtract:vz,multiply:zT,divide:bz,negate:_z});function YK(e,t="-"){return e.replace(/\s+/g,t)}function ZK(e){const t=YK(e.toString());return JK(KK(t))}function KK(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function JK(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function QK(e,t=""){return[t,e].filter(Boolean).join("-")}function eJ(e,t){return`var(${e}${t?`, ${t}`:""})`}function tJ(e,t=""){return ZK(`--${QK(e,t)}`)}function ln(e,t,r){const n=tJ(e,r);return{variable:n,reference:eJ(n,t)}}function rJ(e,t){const r={};for(const n of t){if(Array.isArray(n)){const[o,f]=n;r[o]=ln(`${e}-${o}`,f);continue}r[n]=ln(`${e}-${n}`)}return r}function nJ(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function iJ(e){const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}function NT(e){if(e==null)return e;const{unitless:t}=iJ(e);return t||typeof e=="number"?`${e}px`:e}var l$=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,dP=e=>Object.fromEntries(Object.entries(e).sort(l$));function wz(e){const t=dP(e);return Object.assign(Object.values(t),t)}function sJ(e){const t=Object.keys(dP(e));return new Set(t)}function Sz(e){var t;if(!e)return e;e=(t=NT(e))!=null?t:e;const r=-.02;return typeof e=="number"?`${e+r}`:e.replace(/(\d+\.?\d*)/u,n=>`${parseFloat(n)+r}`)}function nx(e,t){const r=["@media screen"];return e&&r.push("and",`(min-width: ${NT(e)})`),t&&r.push("and",`(max-width: ${NT(t)})`),r.join(" ")}function oJ(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const r=wz(e),n=Object.entries(e).sort(l$).map(([y,s],k,I)=>{var D;let[,N]=(D=I[k+1])!=null?D:[];return N=parseFloat(N)>0?Sz(N):void 0,{_minW:Sz(s),breakpoint:y,minW:s,maxW:N,maxWQuery:nx(null,N),minWQuery:nx(s),minMaxQuery:nx(s,N)}}),o=sJ(e),f=Array.from(o.values());return{keys:o,normalized:r,isResponsive(y){const s=Object.keys(y);return s.length>0&&s.every(k=>o.has(k))},asObject:dP(e),asArray:wz(e),details:n,get(y){return n.find(s=>s.breakpoint===y)},media:[null,...r.map(y=>nx(y)).slice(1)],toArrayValue(y){if(!bc(y))throw new Error("toArrayValue: value must be an object");const s=f.map(k=>{var I;return(I=y[k])!=null?I:null});for(;nJ(s)===null;)s.pop();return s},toObjectValue(y){if(!Array.isArray(y))throw new Error("toObjectValue: value must be an array");return y.reduce((s,k,I)=>{const D=f[I];return D!=null&&k!=null&&(s[D]=k),s},{})}}}var vo={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},rh=e=>c$(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Xc=e=>c$(t=>e(t,"~ &"),"[data-peer]",".peer"),c$=(e,...t)=>t.map(e).join(", "),sS={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:rh(vo.hover),_peerHover:Xc(vo.hover),_groupFocus:rh(vo.focus),_peerFocus:Xc(vo.focus),_groupFocusVisible:rh(vo.focusVisible),_peerFocusVisible:Xc(vo.focusVisible),_groupActive:rh(vo.active),_peerActive:Xc(vo.active),_groupDisabled:rh(vo.disabled),_peerDisabled:Xc(vo.disabled),_groupInvalid:rh(vo.invalid),_peerInvalid:Xc(vo.invalid),_groupChecked:rh(vo.checked),_peerChecked:Xc(vo.checked),_groupFocusWithin:rh(vo.focusWithin),_peerFocusWithin:Xc(vo.focusWithin),_peerPlaceholderShown:Xc(vo.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},u$=Object.keys(sS);function Cz(e,t){return ln(String(e).replace(/\./g,"-"),void 0,t)}function aJ(e,t){let r={};const n={};for(const[o,f]of Object.entries(e)){const{isSemantic:y,value:s}=f,{variable:k,reference:I}=Cz(o,t==null?void 0:t.cssVarPrefix);if(!y){if(o.startsWith("space")){const U=o.split("."),[q,...Z]=U,ae=`${q}.-${Z.join(".")}`,ve=Jd.negate(s),ie=Jd.negate(I);n[ae]={value:ve,var:k,varRef:ie}}r[k]=s,n[o]={value:s,var:k,varRef:I};continue}const D=U=>{const Z=[String(o).split(".")[0],U].join(".");if(!e[Z])return U;const{reference:ve}=Cz(Z,t==null?void 0:t.cssVarPrefix);return ve},N=bc(s)?s:{default:s};r=fc(r,Object.entries(N).reduce((U,[q,Z])=>{var ae,ve;if(!Z)return U;const ie=D(`${Z}`);if(q==="default")return U[k]=ie,U;const W=(ve=(ae=sS)==null?void 0:ae[q])!=null?ve:q;return U[W]={[k]:ie},U},{})),n[o]={value:I,var:k,varRef:I}}return{cssVars:r,cssMap:n}}function lJ(e,t=[]){const r=Object.assign({},e);for(const n of t)n in r&&delete r[n];return r}function cJ(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function uJ(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function kz(e,t,r={}){const{stop:n,getKey:o}=r;function f(y,s=[]){var k;if(uJ(y)||Array.isArray(y)){const I={};for(const[D,N]of Object.entries(y)){const U=(k=o==null?void 0:o(D))!=null?k:D,q=[...s,U];if(n!=null&&n(y,q))return t(y,s);I[U]=f(N,q)}return I}return t(y,s)}return f(e)}var hJ=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function dJ(e){return cJ(e,hJ)}function fJ(e){return e.semanticTokens}function pJ(e){const{__cssMap:t,__cssVars:r,__breakpoints:n,...o}=e;return o}var mJ=e=>u$.includes(e)||e==="default";function gJ({tokens:e,semanticTokens:t}){const r={};return kz(e,(n,o)=>{n!=null&&(r[o.join(".")]={isSemantic:!1,value:n})}),kz(t,(n,o)=>{n!=null&&(r[o.join(".")]={isSemantic:!0,value:n})},{stop:n=>Object.keys(n).every(mJ)}),r}function yJ(e){var t;const r=pJ(e),n=dJ(r),o=fJ(r),f=gJ({tokens:n,semanticTokens:o}),y=(t=r.config)==null?void 0:t.cssVarPrefix,{cssMap:s,cssVars:k}=aJ(f,{cssVarPrefix:y});return Object.assign(r,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...k},__cssMap:s,__breakpoints:oJ(r.breakpoints)}),r}var fP=fc({},R_,xi,LK,U1,el,OK,VK,DK,o$,UK,wx,DT,ts,qK,XK,HK,WK,zK,GK);Object.assign({},ts,el,U1,o$,wx);var xJ=[...Object.keys(fP),...u$],vJ={...fP,...sS},bJ=e=>e in vJ,_J=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:r,toArrayValue:n,media:o}=t.__breakpoints,f={};for(const y in e){let s=Th(e[y],t);if(s==null)continue;if(s=bc(s)&&r(s)?n(s):s,!Array.isArray(s)){f[y]=s;continue}const k=s.slice(0,o.length).length;for(let I=0;I<k;I+=1){const D=o==null?void 0:o[I];if(!D){f[y]=s[I];continue}f[D]=f[D]||{},s[I]!=null&&(f[D][y]=s[I])}}return f};function wJ(e){const t=[];let r="",n=!1;for(let o=0;o<e.length;o++){const f=e[o];f==="("?(n=!0,r+=f):f===")"?(n=!1,r+=f):f===","&&!n?(t.push(r),r=""):r+=f}return r=r.trim(),r&&t.push(r),t}function SJ(e){return/^var\(--.+\)$/.test(e)}var CJ=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!SJ(t),kJ=(e,t)=>{var r,n;if(t==null)return t;const o=k=>{var I,D;return(D=(I=e.__cssMap)==null?void 0:I[k])==null?void 0:D.varRef},f=k=>{var I;return(I=o(k))!=null?I:k},[y,s]=wJ(t);return t=(n=(r=o(y))!=null?r:f(s))!=null?n:f(t),t};function EJ(e){const{configs:t={},pseudos:r={},theme:n}=e,o=(f,y=!1)=>{var s,k,I;const D=Th(f,n),N=_J(D)(n);let U={};for(let q in N){const Z=N[q];let ae=Th(Z,n);q in r&&(q=r[q]),CJ(q,ae)&&(ae=kJ(n,ae));let ve=t[q];if(ve===!0&&(ve={property:q}),bc(ae)){U[q]=(s=U[q])!=null?s:{},U[q]=fc({},U[q],o(ae,!0));continue}let ie=(I=(k=ve==null?void 0:ve.transform)==null?void 0:k.call(ve,ae,n,D))!=null?I:ae;ie=ve!=null&&ve.processResult?o(ie,!0):ie;const W=Th(ve==null?void 0:ve.property,n);if(!y&&(ve!=null&&ve.static)){const K=Th(ve.static,n);U=fc({},U,K)}if(W&&Array.isArray(W)){for(const K of W)U[K]=ie;continue}if(W){W==="&"&&bc(ie)?U=fc({},U,ie):U[W]=ie;continue}if(bc(ie)){U=fc({},U,ie);continue}U[q]=ie}return U};return o}var h$=e=>t=>EJ({theme:t,pseudos:sS,configs:fP})(e);function Yi(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function TJ(e,t){if(Array.isArray(e))return e;if(bc(e))return t(e);if(e!=null)return[e]}function AJ(e,t){for(let r=t+1;r<e.length;r++)if(e[r]!=null)return r;return-1}function IJ(e){const t=e.__breakpoints;return function(n,o,f,y){var s,k;if(!t)return;const I={},D=TJ(f,t.toArrayValue);if(!D)return I;const N=D.length,U=N===1,q=!!n.parts;for(let Z=0;Z<N;Z++){const ae=t.details[Z],ve=t.details[AJ(D,Z)],ie=nx(ae.minW,ve==null?void 0:ve._minW),W=Th((s=n[o])==null?void 0:s[D[Z]],y);if(W){if(q){(k=n.parts)==null||k.forEach(K=>{fc(I,{[K]:U?W[K]:{[ie]:W[K]}})});continue}if(!q){U?fc(I,W):I[ie]=W;continue}I[ie]=W}}return I}}function PJ(e){return t=>{var r;const{variant:n,size:o,theme:f}=t,y=IJ(f);return fc({},Th((r=e.baseStyle)!=null?r:{},t),y(e,"sizes",o,t),y(e,"variants",n,t))}}function pP(e){return lJ(e,["styleConfig","size","variant","colorScheme"])}var RJ={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},MJ={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},LJ={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},OJ={property:RJ,easing:MJ,duration:LJ},DJ=OJ,zJ={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},NJ=zJ,jJ={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},FJ=jJ,BJ={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},$J=BJ,UJ={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},VJ=UJ,HJ={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},WJ=HJ,GJ={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},XJ=GJ,qJ={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},YJ=qJ,ZJ={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},d$=ZJ,f$={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},KJ={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},JJ={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},QJ={...f$,...KJ,container:JJ},p$=QJ,eQ={breakpoints:$J,zIndices:NJ,radii:WJ,blur:YJ,colors:VJ,...d$,sizes:p$,shadows:XJ,space:f$,borders:FJ,transition:DJ},{defineMultiStyleConfig:tQ,definePartsStyle:ix}=Yi(["stepper","step","title","description","indicator","separator","icon","number"]),tu=ln("stepper-indicator-size"),nm=ln("stepper-icon-size"),im=ln("stepper-title-font-size"),sx=ln("stepper-description-font-size"),$y=ln("stepper-accent-color"),rQ=ix(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[$y.variable]:`colors.${e}.500`,_dark:{[$y.variable]:`colors.${e}.200`}},title:{fontSize:im.reference,fontWeight:"medium"},description:{fontSize:sx.reference,color:"chakra-subtle-text"},number:{fontSize:im.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:nm.reference,height:nm.reference},indicator:{flexShrink:0,borderRadius:"full",width:tu.reference,height:tu.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:$y.reference},"&[data-status=complete]":{bg:$y.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:$y.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${tu.reference} - 8px)`,top:`calc(${tu.reference} + 4px)`,insetStart:`calc(${tu.reference} / 2 - 1px)`}}})),nQ=tQ({baseStyle:rQ,sizes:{xs:ix({stepper:{[tu.variable]:"sizes.4",[nm.variable]:"sizes.3",[im.variable]:"fontSizes.xs",[sx.variable]:"fontSizes.xs"}}),sm:ix({stepper:{[tu.variable]:"sizes.6",[nm.variable]:"sizes.4",[im.variable]:"fontSizes.sm",[sx.variable]:"fontSizes.xs"}}),md:ix({stepper:{[tu.variable]:"sizes.8",[nm.variable]:"sizes.5",[im.variable]:"fontSizes.md",[sx.variable]:"fontSizes.sm"}}),lg:ix({stepper:{[tu.variable]:"sizes.10",[nm.variable]:"sizes.6",[im.variable]:"fontSizes.lg",[sx.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Ai(e,t={}){let r=!1;function n(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function o(...D){n();for(const N of D)t[N]=k(N);return Ai(e,t)}function f(...D){for(const N of D)N in t||(t[N]=k(N));return Ai(e,t)}function y(){return Object.fromEntries(Object.entries(t).map(([N,U])=>[N,U.selector]))}function s(){return Object.fromEntries(Object.entries(t).map(([N,U])=>[N,U.className]))}function k(D){const q=`chakra-${(["container","root"].includes(D??"")?[e]:[e,D]).filter(Boolean).join("__")}`;return{className:q,selector:`.${q}`,toString:()=>D}}return{parts:o,toPart:k,extend:f,selectors:y,classnames:s,get keys(){return Object.keys(t)},__type:{}}}var iQ=Ai("accordion").parts("root","container","button","panel").extend("icon"),sQ=Ai("alert").parts("title","description","container").extend("icon","spinner"),oQ=Ai("avatar").parts("label","badge","container").extend("excessLabel","group"),aQ=Ai("breadcrumb").parts("link","item","container").extend("separator");Ai("button").parts();var lQ=Ai("checkbox").parts("control","icon","container").extend("label");Ai("progress").parts("track","filledTrack").extend("label");var cQ=Ai("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),uQ=Ai("editable").parts("preview","input","textarea"),hQ=Ai("form").parts("container","requiredIndicator","helperText"),dQ=Ai("formError").parts("text","icon"),fQ=Ai("input").parts("addon","field","element","group"),pQ=Ai("list").parts("container","item","icon"),mQ=Ai("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),gQ=Ai("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),yQ=Ai("numberinput").parts("root","field","stepperGroup","stepper");Ai("pininput").parts("field");var xQ=Ai("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),vQ=Ai("progress").parts("label","filledTrack","track"),bQ=Ai("radio").parts("container","control","label"),_Q=Ai("select").parts("field","icon"),wQ=Ai("slider").parts("container","track","thumb","filledTrack","mark"),SQ=Ai("stat").parts("container","label","helpText","number","icon"),CQ=Ai("switch").parts("container","track","thumb"),kQ=Ai("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),EQ=Ai("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),TQ=Ai("tag").parts("container","label","closeButton"),AQ=Ai("card").parts("container","header","body","footer");function sf(e,t,r){return Math.min(Math.max(e,r),t)}class IQ extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var ox=IQ;function mP(e){if(typeof e!="string")throw new ox(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=NQ.test(e)?MQ(e):e;const r=LQ.exec(t);if(r){const y=Array.from(r).slice(1);return[...y.slice(0,3).map(s=>parseInt(av(s,2),16)),parseInt(av(y[3]||"f",2),16)/255]}const n=OQ.exec(t);if(n){const y=Array.from(n).slice(1);return[...y.slice(0,3).map(s=>parseInt(s,16)),parseInt(y[3]||"ff",16)/255]}const o=DQ.exec(t);if(o){const y=Array.from(o).slice(1);return[...y.slice(0,3).map(s=>parseInt(s,10)),parseFloat(y[3]||"1")]}const f=zQ.exec(t);if(f){const[y,s,k,I]=Array.from(f).slice(1).map(parseFloat);if(sf(0,100,s)!==s)throw new ox(e);if(sf(0,100,k)!==k)throw new ox(e);return[...jQ(y,s,k),Number.isNaN(I)?1:I]}throw new ox(e)}function PQ(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0)%2341}const Ez=e=>parseInt(e.replace(/_/g,""),36),RQ="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const r=Ez(t.substring(0,3)),n=Ez(t.substring(3)).toString(16);let o="";for(let f=0;f<6-n.length;f++)o+="0";return e[r]=`${o}${n}`,e},{});function MQ(e){const t=e.toLowerCase().trim(),r=RQ[PQ(t)];if(!r)throw new ox(e);return`#${r}`}const av=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),LQ=new RegExp(`^#${av("([a-f0-9])",3)}([a-f0-9])?$`,"i"),OQ=new RegExp(`^#${av("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),DQ=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${av(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),zQ=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,NQ=/^[a-z]+$/i,Tz=e=>Math.round(e*255),jQ=(e,t,r)=>{let n=r/100;if(t===0)return[n,n,n].map(Tz);const o=(e%360+360)%360/60,f=(1-Math.abs(2*n-1))*(t/100),y=f*(1-Math.abs(o%2-1));let s=0,k=0,I=0;o>=0&&o<1?(s=f,k=y):o>=1&&o<2?(s=y,k=f):o>=2&&o<3?(k=f,I=y):o>=3&&o<4?(k=y,I=f):o>=4&&o<5?(s=y,I=f):o>=5&&o<6&&(s=f,I=y);const D=n-f/2,N=s+D,U=k+D,q=I+D;return[N,U,q].map(Tz)};function FQ(e,t,r,n){return`rgba(${sf(0,255,e).toFixed()}, ${sf(0,255,t).toFixed()}, ${sf(0,255,r).toFixed()}, ${parseFloat(sf(0,1,n).toFixed(3))})`}function BQ(e,t){const[r,n,o,f]=mP(e);return FQ(r,n,o,f-t)}function $Q(e){const[t,r,n,o]=mP(e);let f=y=>{const s=sf(0,255,y).toString(16);return s.length===1?`0${s}`:s};return`#${f(t)}${f(r)}${f(n)}${o<1?f(Math.round(o*255)):""}`}function UQ(e,t,r,n,o){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:o;return e===o?r:e}var VQ=e=>Object.keys(e).length===0,Go=(e,t,r)=>{const n=UQ(e,`colors.${t}`,t);try{return $Q(n),n}catch{return r??"#000000"}},HQ=e=>{const[t,r,n]=mP(e);return(t*299+r*587+n*114)/1e3},WQ=e=>t=>{const r=Go(t,e);return HQ(r)<128?"dark":"light"},GQ=e=>t=>WQ(e)(t)==="dark",jm=(e,t)=>r=>{const n=Go(r,e);return BQ(n,1-t)};function Az(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var XQ=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function qQ(e){const t=XQ();return!e||VQ(e)?t:e.string&&e.colors?ZQ(e.string,e.colors):e.string&&!e.colors?YQ(e.string):e.colors&&!e.string?KQ(e.colors):t}function YQ(e){let t=0;if(e.length===0)return t.toString();for(let n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t),t=t&t;let r="#";for(let n=0;n<3;n+=1){const o=t>>n*8&255;r+=`00${o.toString(16)}`.substr(-2)}return r}function ZQ(e,t){let r=0;if(e.length===0)return t[0];for(let n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r=r&r;return r=(r%t.length+t.length)%t.length,t[r]}function KQ(e){return e[Math.floor(Math.random()*e.length)]}function an(e,t){return r=>r.colorMode==="dark"?t:e}function gP(e){const{orientation:t,vertical:r,horizontal:n}=e;return t?t==="vertical"?r:n:{}}function m$(e){return bc(e)&&e.reference?e.reference:String(e)}var oS=(e,...t)=>t.map(m$).join(` ${e} `).replace(/calc/g,""),Iz=(...e)=>`calc(${oS("+",...e)})`,Pz=(...e)=>`calc(${oS("-",...e)})`,jT=(...e)=>`calc(${oS("*",...e)})`,Rz=(...e)=>`calc(${oS("/",...e)})`,Mz=e=>{const t=m$(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:jT(t,-1)},ru=Object.assign(e=>({add:(...t)=>ru(Iz(e,...t)),subtract:(...t)=>ru(Pz(e,...t)),multiply:(...t)=>ru(jT(e,...t)),divide:(...t)=>ru(Rz(e,...t)),negate:()=>ru(Mz(e)),toString:()=>e.toString()}),{add:Iz,subtract:Pz,multiply:jT,divide:Rz,negate:Mz});function JQ(e){return!Number.isInteger(parseFloat(e.toString()))}function QQ(e,t="-"){return e.replace(/\s+/g,t)}function g$(e){const t=QQ(e.toString());return t.includes("\\.")?e:JQ(e)?t.replace(".","\\."):e}function eee(e,t=""){return[t,g$(e)].filter(Boolean).join("-")}function tee(e,t){return`var(${g$(e)}${t?`, ${t}`:""})`}function ree(e,t=""){return`--${eee(e,t)}`}function io(e,t){const r=ree(e,t==null?void 0:t.prefix);return{variable:r,reference:tee(r,nee(t==null?void 0:t.fallback))}}function nee(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:iee,definePartsStyle:M_}=Yi(CQ.keys),Sx=io("switch-track-width"),df=io("switch-track-height"),ck=io("switch-track-diff"),see=ru.subtract(Sx,df),FT=io("switch-thumb-x"),Uy=io("switch-bg"),oee=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Sx.reference],height:[df.reference],transitionProperty:"common",transitionDuration:"fast",[Uy.variable]:"colors.gray.300",_dark:{[Uy.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[Uy.variable]:`colors.${t}.500`,_dark:{[Uy.variable]:`colors.${t}.200`}},bg:Uy.reference}},aee={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[df.reference],height:[df.reference],_checked:{transform:`translateX(${FT.reference})`}},lee=M_(e=>({container:{[ck.variable]:see,[FT.variable]:ck.reference,_rtl:{[FT.variable]:ru(ck).negate().toString()}},track:oee(e),thumb:aee})),cee={sm:M_({container:{[Sx.variable]:"1.375rem",[df.variable]:"sizes.3"}}),md:M_({container:{[Sx.variable]:"1.875rem",[df.variable]:"sizes.4"}}),lg:M_({container:{[Sx.variable]:"2.875rem",[df.variable]:"sizes.6"}})},uee=iee({baseStyle:lee,sizes:cee,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:hee,definePartsStyle:wm}=Yi(kQ.keys),dee=wm({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),V1={"&[data-is-numeric=true]":{textAlign:"end"}},fee=wm(e=>{const{colorScheme:t}=e;return{th:{color:an("gray.600","gray.400")(e),borderBottom:"1px",borderColor:an(`${t}.100`,`${t}.700`)(e),...V1},td:{borderBottom:"1px",borderColor:an(`${t}.100`,`${t}.700`)(e),...V1},caption:{color:an("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),pee=wm(e=>{const{colorScheme:t}=e;return{th:{color:an("gray.600","gray.400")(e),borderBottom:"1px",borderColor:an(`${t}.100`,`${t}.700`)(e),...V1},td:{borderBottom:"1px",borderColor:an(`${t}.100`,`${t}.700`)(e),...V1},caption:{color:an("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:an(`${t}.100`,`${t}.700`)(e)},td:{background:an(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),mee={simple:fee,striped:pee,unstyled:{}},gee={sm:wm({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:wm({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:wm({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},yee=hee({baseStyle:dee,variants:mee,sizes:gee,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),ha=ln("tabs-color"),Ll=ln("tabs-bg"),$b=ln("tabs-border-color"),{defineMultiStyleConfig:xee,definePartsStyle:_c}=Yi(EQ.keys),vee=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},bee=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},_ee=e=>{const{align:t="start",orientation:r}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:r==="vertical"?"column":"row"}},wee={p:4},See=_c(e=>({root:vee(e),tab:bee(e),tablist:_ee(e),tabpanel:wee})),Cee={sm:_c({tab:{py:1,px:4,fontSize:"sm"}}),md:_c({tab:{fontSize:"md",py:2,px:4}}),lg:_c({tab:{fontSize:"lg",py:3,px:4}})},kee=_c(e=>{const{colorScheme:t,orientation:r}=e,n=r==="vertical",o=n?"borderStart":"borderBottom",f=n?"marginStart":"marginBottom";return{tablist:{[o]:"2px solid",borderColor:"inherit"},tab:{[o]:"2px solid",borderColor:"transparent",[f]:"-2px",_selected:{[ha.variable]:`colors.${t}.600`,_dark:{[ha.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Ll.variable]:"colors.gray.200",_dark:{[Ll.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:ha.reference,bg:Ll.reference}}}),Eee=_c(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[$b.variable]:"transparent",_selected:{[ha.variable]:`colors.${t}.600`,[$b.variable]:"colors.white",_dark:{[ha.variable]:`colors.${t}.300`,[$b.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:$b.reference},color:ha.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Tee=_c(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Ll.variable]:"colors.gray.50",_dark:{[Ll.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Ll.variable]:"colors.white",[ha.variable]:`colors.${t}.600`,_dark:{[Ll.variable]:"colors.gray.800",[ha.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:ha.reference,bg:Ll.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Aee=_c(e=>{const{colorScheme:t,theme:r}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Go(r,`${t}.700`),bg:Go(r,`${t}.100`)}}}}),Iee=_c(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[ha.variable]:"colors.gray.600",_dark:{[ha.variable]:"inherit"},_selected:{[ha.variable]:"colors.white",[Ll.variable]:`colors.${t}.600`,_dark:{[ha.variable]:"colors.gray.800",[Ll.variable]:`colors.${t}.300`}},color:ha.reference,bg:Ll.reference}}}),Pee=_c({}),Ree={line:kee,enclosed:Eee,"enclosed-colored":Tee,"soft-rounded":Aee,"solid-rounded":Iee,unstyled:Pee},Mee=xee({baseStyle:See,sizes:Cee,variants:Ree,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Ls=rJ("badge",["bg","color","shadow"]),Lee={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Ls.bg.reference,color:Ls.color.reference,boxShadow:Ls.shadow.reference},Oee=e=>{const{colorScheme:t,theme:r}=e,n=jm(`${t}.500`,.6)(r);return{[Ls.bg.variable]:`colors.${t}.500`,[Ls.color.variable]:"colors.white",_dark:{[Ls.bg.variable]:n,[Ls.color.variable]:"colors.whiteAlpha.800"}}},Dee=e=>{const{colorScheme:t,theme:r}=e,n=jm(`${t}.200`,.16)(r);return{[Ls.bg.variable]:`colors.${t}.100`,[Ls.color.variable]:`colors.${t}.800`,_dark:{[Ls.bg.variable]:n,[Ls.color.variable]:`colors.${t}.200`}}},zee=e=>{const{colorScheme:t,theme:r}=e,n=jm(`${t}.200`,.8)(r);return{[Ls.color.variable]:`colors.${t}.500`,_dark:{[Ls.color.variable]:n},[Ls.shadow.variable]:`inset 0 0 0px 1px ${Ls.color.reference}`}},Nee={solid:Oee,subtle:Dee,outline:zee},Cx={baseStyle:Lee,variants:Nee,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:jee,definePartsStyle:ff}=Yi(TQ.keys),Lz=ln("tag-bg"),Oz=ln("tag-color"),uk=ln("tag-shadow"),L_=ln("tag-min-height"),O_=ln("tag-min-width"),D_=ln("tag-font-size"),z_=ln("tag-padding-inline"),Fee={fontWeight:"medium",lineHeight:1.2,outline:0,[Oz.variable]:Ls.color.reference,[Lz.variable]:Ls.bg.reference,[uk.variable]:Ls.shadow.reference,color:Oz.reference,bg:Lz.reference,boxShadow:uk.reference,borderRadius:"md",minH:L_.reference,minW:O_.reference,fontSize:D_.reference,px:z_.reference,_focusVisible:{[uk.variable]:"shadows.outline"}},Bee={lineHeight:1.2,overflow:"visible"},$ee={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Uee=ff({container:Fee,label:Bee,closeButton:$ee}),Vee={sm:ff({container:{[L_.variable]:"sizes.5",[O_.variable]:"sizes.5",[D_.variable]:"fontSizes.xs",[z_.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:ff({container:{[L_.variable]:"sizes.6",[O_.variable]:"sizes.6",[D_.variable]:"fontSizes.sm",[z_.variable]:"space.2"}}),lg:ff({container:{[L_.variable]:"sizes.8",[O_.variable]:"sizes.8",[D_.variable]:"fontSizes.md",[z_.variable]:"space.3"}})},Hee={subtle:ff(e=>{var t;return{container:(t=Cx.variants)==null?void 0:t.subtle(e)}}),solid:ff(e=>{var t;return{container:(t=Cx.variants)==null?void 0:t.solid(e)}}),outline:ff(e=>{var t;return{container:(t=Cx.variants)==null?void 0:t.outline(e)}})},Wee=jee({variants:Hee,baseStyle:Uee,sizes:Vee,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:ou,defineMultiStyleConfig:Gee}=Yi(fQ.keys),sm=ln("input-height"),om=ln("input-font-size"),am=ln("input-padding"),lm=ln("input-border-radius"),Xee=ou({addon:{height:sm.reference,fontSize:om.reference,px:am.reference,borderRadius:lm.reference},field:{width:"100%",height:sm.reference,fontSize:om.reference,px:am.reference,borderRadius:lm.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),nh={lg:{[om.variable]:"fontSizes.lg",[am.variable]:"space.4",[lm.variable]:"radii.md",[sm.variable]:"sizes.12"},md:{[om.variable]:"fontSizes.md",[am.variable]:"space.4",[lm.variable]:"radii.md",[sm.variable]:"sizes.10"},sm:{[om.variable]:"fontSizes.sm",[am.variable]:"space.3",[lm.variable]:"radii.sm",[sm.variable]:"sizes.8"},xs:{[om.variable]:"fontSizes.xs",[am.variable]:"space.2",[lm.variable]:"radii.sm",[sm.variable]:"sizes.6"}},qee={lg:ou({field:nh.lg,group:nh.lg}),md:ou({field:nh.md,group:nh.md}),sm:ou({field:nh.sm,group:nh.sm}),xs:ou({field:nh.xs,group:nh.xs})};function yP(e){const{focusBorderColor:t,errorBorderColor:r}=e;return{focusBorderColor:t||an("blue.500","blue.300")(e),errorBorderColor:r||an("red.500","red.300")(e)}}var Yee=ou(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=yP(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:an("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Go(t,n),boxShadow:`0 0 0 1px ${Go(t,n)}`},_focusVisible:{zIndex:1,borderColor:Go(t,r),boxShadow:`0 0 0 1px ${Go(t,r)}`}},addon:{border:"1px solid",borderColor:an("inherit","whiteAlpha.50")(e),bg:an("gray.100","whiteAlpha.300")(e)}}}),Zee=ou(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=yP(e);return{field:{border:"2px solid",borderColor:"transparent",bg:an("gray.100","whiteAlpha.50")(e),_hover:{bg:an("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Go(t,n)},_focusVisible:{bg:"transparent",borderColor:Go(t,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:an("gray.100","whiteAlpha.50")(e)}}}),Kee=ou(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=yP(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Go(t,n),boxShadow:`0px 1px 0px 0px ${Go(t,n)}`},_focusVisible:{borderColor:Go(t,r),boxShadow:`0px 1px 0px 0px ${Go(t,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),Jee=ou({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),Qee={outline:Yee,filled:Zee,flushed:Kee,unstyled:Jee},_i=Gee({baseStyle:Xee,sizes:qee,variants:Qee,defaultProps:{size:"md",variant:"outline"}}),Dz,ete={...(Dz=_i.baseStyle)==null?void 0:Dz.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},zz,Nz,tte={outline:e=>{var t,r;return(r=(t=_i.variants)==null?void 0:t.outline(e).field)!=null?r:{}},flushed:e=>{var t,r;return(r=(t=_i.variants)==null?void 0:t.flushed(e).field)!=null?r:{}},filled:e=>{var t,r;return(r=(t=_i.variants)==null?void 0:t.filled(e).field)!=null?r:{}},unstyled:(Nz=(zz=_i.variants)==null?void 0:zz.unstyled.field)!=null?Nz:{}},jz,Fz,Bz,$z,Uz,Vz,Hz,Wz,rte={xs:(Fz=(jz=_i.sizes)==null?void 0:jz.xs.field)!=null?Fz:{},sm:($z=(Bz=_i.sizes)==null?void 0:Bz.sm.field)!=null?$z:{},md:(Vz=(Uz=_i.sizes)==null?void 0:Uz.md.field)!=null?Vz:{},lg:(Wz=(Hz=_i.sizes)==null?void 0:Hz.lg.field)!=null?Wz:{}},nte={baseStyle:ete,sizes:rte,variants:tte,defaultProps:{size:"md",variant:"outline"}},Ub=io("tooltip-bg"),hk=io("tooltip-fg"),ite=io("popper-arrow-bg"),ste={bg:Ub.reference,color:hk.reference,[Ub.variable]:"colors.gray.700",[hk.variable]:"colors.whiteAlpha.900",_dark:{[Ub.variable]:"colors.gray.300",[hk.variable]:"colors.gray.900"},[ite.variable]:Ub.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},ote={baseStyle:ste},{defineMultiStyleConfig:ate,definePartsStyle:ax}=Yi(vQ.keys),lte=e=>{const{colorScheme:t,theme:r,isIndeterminate:n,hasStripe:o}=e,f=an(Az(),Az("1rem","rgba(0,0,0,0.1)"))(e),y=an(`${t}.500`,`${t}.200`)(e),s=`linear-gradient(
    to right,
    transparent 0%,
    ${Go(r,y)} 50%,
    transparent 100%
  )`;return{...!n&&o&&f,...n?{bgImage:s}:{bgColor:y}}},cte={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},ute=e=>({bg:an("gray.100","whiteAlpha.300")(e)}),hte=e=>({transitionProperty:"common",transitionDuration:"slow",...lte(e)}),dte=ax(e=>({label:cte,filledTrack:hte(e),track:ute(e)})),fte={xs:ax({track:{h:"1"}}),sm:ax({track:{h:"2"}}),md:ax({track:{h:"3"}}),lg:ax({track:{h:"4"}})},pte=ate({sizes:fte,baseStyle:dte,defaultProps:{size:"md",colorScheme:"blue"}}),mte=e=>typeof e=="function";function qo(e,...t){return mte(e)?e(...t):e}var{definePartsStyle:N_,defineMultiStyleConfig:gte}=Yi(lQ.keys),kx=ln("checkbox-size"),yte=e=>{const{colorScheme:t}=e;return{w:kx.reference,h:kx.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:an(`${t}.500`,`${t}.200`)(e),borderColor:an(`${t}.500`,`${t}.200`)(e),color:an("white","gray.900")(e),_hover:{bg:an(`${t}.600`,`${t}.300`)(e),borderColor:an(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:an("gray.200","transparent")(e),bg:an("gray.200","whiteAlpha.300")(e),color:an("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:an(`${t}.500`,`${t}.200`)(e),borderColor:an(`${t}.500`,`${t}.200`)(e),color:an("white","gray.900")(e)},_disabled:{bg:an("gray.100","whiteAlpha.100")(e),borderColor:an("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:an("red.500","red.300")(e)}}},xte={_disabled:{cursor:"not-allowed"}},vte={userSelect:"none",_disabled:{opacity:.4}},bte={transitionProperty:"transform",transitionDuration:"normal"},_te=N_(e=>({icon:bte,container:xte,control:qo(yte,e),label:vte})),wte={sm:N_({control:{[kx.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:N_({control:{[kx.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:N_({control:{[kx.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},H1=gte({baseStyle:_te,sizes:wte,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Ste,definePartsStyle:j_}=Yi(bQ.keys),Cte=e=>{var t;const r=(t=qo(H1.baseStyle,e))==null?void 0:t.control;return{...r,borderRadius:"full",_checked:{...r==null?void 0:r._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},kte=j_(e=>{var t,r,n,o;return{label:(r=(t=H1).baseStyle)==null?void 0:r.call(t,e).label,container:(o=(n=H1).baseStyle)==null?void 0:o.call(n,e).container,control:Cte(e)}}),Ete={md:j_({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:j_({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:j_({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Tte=Ste({baseStyle:kte,sizes:Ete,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Ate,definePartsStyle:Ite}=Yi(_Q.keys),Vb=ln("select-bg"),Gz,Pte={...(Gz=_i.baseStyle)==null?void 0:Gz.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Vb.reference,[Vb.variable]:"colors.white",_dark:{[Vb.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Vb.reference}},Rte={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},Mte=Ite({field:Pte,icon:Rte}),Hb={paddingInlineEnd:"8"},Xz,qz,Yz,Zz,Kz,Jz,Qz,e3,Lte={lg:{...(Xz=_i.sizes)==null?void 0:Xz.lg,field:{...(qz=_i.sizes)==null?void 0:qz.lg.field,...Hb}},md:{...(Yz=_i.sizes)==null?void 0:Yz.md,field:{...(Zz=_i.sizes)==null?void 0:Zz.md.field,...Hb}},sm:{...(Kz=_i.sizes)==null?void 0:Kz.sm,field:{...(Jz=_i.sizes)==null?void 0:Jz.sm.field,...Hb}},xs:{...(Qz=_i.sizes)==null?void 0:Qz.xs,field:{...(e3=_i.sizes)==null?void 0:e3.xs.field,...Hb},icon:{insetEnd:"1"}}},Ote=Ate({baseStyle:Mte,sizes:Lte,variants:_i.variants,defaultProps:_i.defaultProps}),dk=ln("skeleton-start-color"),fk=ln("skeleton-end-color"),Dte={[dk.variable]:"colors.gray.100",[fk.variable]:"colors.gray.400",_dark:{[dk.variable]:"colors.gray.800",[fk.variable]:"colors.gray.600"},background:dk.reference,borderColor:fk.reference,opacity:.7,borderRadius:"sm"},zte={baseStyle:Dte},pk=ln("skip-link-bg"),Nte={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[pk.variable]:"colors.white",_dark:{[pk.variable]:"colors.gray.700"},bg:pk.reference}},jte={baseStyle:Nte},{defineMultiStyleConfig:Fte,definePartsStyle:aS}=Yi(wQ.keys),lv=ln("slider-thumb-size"),cv=ln("slider-track-size"),xh=ln("slider-bg"),Bte=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...gP({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},$te=e=>({...gP({orientation:e.orientation,horizontal:{h:cv.reference},vertical:{w:cv.reference}}),overflow:"hidden",borderRadius:"sm",[xh.variable]:"colors.gray.200",_dark:{[xh.variable]:"colors.whiteAlpha.200"},_disabled:{[xh.variable]:"colors.gray.300",_dark:{[xh.variable]:"colors.whiteAlpha.300"}},bg:xh.reference}),Ute=e=>{const{orientation:t}=e;return{...gP({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:lv.reference,h:lv.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Vte=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[xh.variable]:`colors.${t}.500`,_dark:{[xh.variable]:`colors.${t}.200`},bg:xh.reference}},Hte=aS(e=>({container:Bte(e),track:$te(e),thumb:Ute(e),filledTrack:Vte(e)})),Wte=aS({container:{[lv.variable]:"sizes.4",[cv.variable]:"sizes.1"}}),Gte=aS({container:{[lv.variable]:"sizes.3.5",[cv.variable]:"sizes.1"}}),Xte=aS({container:{[lv.variable]:"sizes.2.5",[cv.variable]:"sizes.0.5"}}),qte={lg:Wte,md:Gte,sm:Xte},Yte=Fte({baseStyle:Hte,sizes:qte,defaultProps:{size:"md",colorScheme:"blue"}}),Qd=io("spinner-size"),Zte={width:[Qd.reference],height:[Qd.reference]},Kte={xs:{[Qd.variable]:"sizes.3"},sm:{[Qd.variable]:"sizes.4"},md:{[Qd.variable]:"sizes.6"},lg:{[Qd.variable]:"sizes.8"},xl:{[Qd.variable]:"sizes.12"}},Jte={baseStyle:Zte,sizes:Kte,defaultProps:{size:"md"}},{defineMultiStyleConfig:Qte,definePartsStyle:y$}=Yi(SQ.keys),ere={fontWeight:"medium"},tre={opacity:.8,marginBottom:"2"},rre={verticalAlign:"baseline",fontWeight:"semibold"},nre={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},ire=y$({container:{},label:ere,helpText:tre,number:rre,icon:nre}),sre={md:y$({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},ore=Qte({baseStyle:ire,sizes:sre,defaultProps:{size:"md"}}),mk=ln("kbd-bg"),are={[mk.variable]:"colors.gray.100",_dark:{[mk.variable]:"colors.whiteAlpha.100"},bg:mk.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},lre={baseStyle:are},cre={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},ure={baseStyle:cre},{defineMultiStyleConfig:hre,definePartsStyle:dre}=Yi(pQ.keys),fre={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},pre=dre({icon:fre}),mre=hre({baseStyle:pre}),{defineMultiStyleConfig:gre,definePartsStyle:yre}=Yi(mQ.keys),oc=ln("menu-bg"),gk=ln("menu-shadow"),xre={[oc.variable]:"#fff",[gk.variable]:"shadows.sm",_dark:{[oc.variable]:"colors.gray.700",[gk.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:oc.reference,boxShadow:gk.reference},vre={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[oc.variable]:"colors.gray.100",_dark:{[oc.variable]:"colors.whiteAlpha.100"}},_active:{[oc.variable]:"colors.gray.200",_dark:{[oc.variable]:"colors.whiteAlpha.200"}},_expanded:{[oc.variable]:"colors.gray.100",_dark:{[oc.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:oc.reference},bre={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},_re={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},wre={opacity:.6},Sre={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},Cre={transitionProperty:"common",transitionDuration:"normal"},kre=yre({button:Cre,list:xre,item:vre,groupTitle:bre,icon:_re,command:wre,divider:Sre}),Ere=gre({baseStyle:kre}),{defineMultiStyleConfig:Tre,definePartsStyle:BT}=Yi(gQ.keys),yk=ln("modal-bg"),xk=ln("modal-shadow"),Are={bg:"blackAlpha.600",zIndex:"modal"},Ire=e=>{const{isCentered:t,scrollBehavior:r}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},Pre=e=>{const{isCentered:t,scrollBehavior:r}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:r==="inside"?"calc(100% - 7.5rem)":void 0,[yk.variable]:"colors.white",[xk.variable]:"shadows.lg",_dark:{[yk.variable]:"colors.gray.700",[xk.variable]:"shadows.dark-lg"},bg:yk.reference,boxShadow:xk.reference}},Rre={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Mre={position:"absolute",top:"2",insetEnd:"3"},Lre=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},Ore={px:"6",py:"4"},Dre=BT(e=>({overlay:Are,dialogContainer:qo(Ire,e),dialog:qo(Pre,e),header:Rre,closeButton:Mre,body:qo(Lre,e),footer:Ore}));function El(e){return BT(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var zre={xs:El("xs"),sm:El("sm"),md:El("md"),lg:El("lg"),xl:El("xl"),"2xl":El("2xl"),"3xl":El("3xl"),"4xl":El("4xl"),"5xl":El("5xl"),"6xl":El("6xl"),full:El("full")},Nre=Tre({baseStyle:Dre,sizes:zre,defaultProps:{size:"md"}}),{defineMultiStyleConfig:jre,definePartsStyle:x$}=Yi(yQ.keys),xP=io("number-input-stepper-width"),v$=io("number-input-input-padding"),Fre=ru(xP).add("0.5rem").toString(),vk=io("number-input-bg"),bk=io("number-input-color"),_k=io("number-input-border-color"),Bre={[xP.variable]:"sizes.6",[v$.variable]:Fre},$re=e=>{var t,r;return(r=(t=qo(_i.baseStyle,e))==null?void 0:t.field)!=null?r:{}},Ure={width:xP.reference},Vre={borderStart:"1px solid",borderStartColor:_k.reference,color:bk.reference,bg:vk.reference,[bk.variable]:"colors.chakra-body-text",[_k.variable]:"colors.chakra-border-color",_dark:{[bk.variable]:"colors.whiteAlpha.800",[_k.variable]:"colors.whiteAlpha.300"},_active:{[vk.variable]:"colors.gray.200",_dark:{[vk.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Hre=x$(e=>{var t;return{root:Bre,field:(t=qo($re,e))!=null?t:{},stepperGroup:Ure,stepper:Vre}});function Wb(e){var t,r,n;const o=(t=_i.sizes)==null?void 0:t[e],f={lg:"md",md:"md",sm:"sm",xs:"sm"},y=(n=(r=o.field)==null?void 0:r.fontSize)!=null?n:"md",s=d$.fontSizes[y];return x$({field:{...o.field,paddingInlineEnd:v$.reference,verticalAlign:"top"},stepper:{fontSize:ru(s).multiply(.75).toString(),_first:{borderTopEndRadius:f[e]},_last:{borderBottomEndRadius:f[e],mt:"-1px",borderTopWidth:1}}})}var Wre={xs:Wb("xs"),sm:Wb("sm"),md:Wb("md"),lg:Wb("lg")},Gre=jre({baseStyle:Hre,sizes:Wre,variants:_i.variants,defaultProps:_i.defaultProps}),t3,Xre={...(t3=_i.baseStyle)==null?void 0:t3.field,textAlign:"center"},qre={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},r3,n3,Yre={outline:e=>{var t,r,n;return(n=(r=qo((t=_i.variants)==null?void 0:t.outline,e))==null?void 0:r.field)!=null?n:{}},flushed:e=>{var t,r,n;return(n=(r=qo((t=_i.variants)==null?void 0:t.flushed,e))==null?void 0:r.field)!=null?n:{}},filled:e=>{var t,r,n;return(n=(r=qo((t=_i.variants)==null?void 0:t.filled,e))==null?void 0:r.field)!=null?n:{}},unstyled:(n3=(r3=_i.variants)==null?void 0:r3.unstyled.field)!=null?n3:{}},Zre={baseStyle:Xre,sizes:qre,variants:Yre,defaultProps:_i.defaultProps},{defineMultiStyleConfig:Kre,definePartsStyle:Jre}=Yi(xQ.keys),Gb=io("popper-bg"),Qre=io("popper-arrow-bg"),i3=io("popper-arrow-shadow-color"),ene={zIndex:10},tne={[Gb.variable]:"colors.white",bg:Gb.reference,[Qre.variable]:Gb.reference,[i3.variable]:"colors.gray.200",_dark:{[Gb.variable]:"colors.gray.700",[i3.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},rne={px:3,py:2,borderBottomWidth:"1px"},nne={px:3,py:2},ine={px:3,py:2,borderTopWidth:"1px"},sne={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},one=Jre({popper:ene,content:tne,header:rne,body:nne,footer:ine,closeButton:sne}),ane=Kre({baseStyle:one}),{definePartsStyle:$T,defineMultiStyleConfig:lne}=Yi(cQ.keys),wk=ln("drawer-bg"),Sk=ln("drawer-box-shadow");function Bp(e){return $T(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var cne={bg:"blackAlpha.600",zIndex:"modal"},une={display:"flex",zIndex:"modal",justifyContent:"center"},hne=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[wk.variable]:"colors.white",[Sk.variable]:"shadows.lg",_dark:{[wk.variable]:"colors.gray.700",[Sk.variable]:"shadows.dark-lg"},bg:wk.reference,boxShadow:Sk.reference}},dne={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},fne={position:"absolute",top:"2",insetEnd:"3"},pne={px:"6",py:"2",flex:"1",overflow:"auto"},mne={px:"6",py:"4"},gne=$T(e=>({overlay:cne,dialogContainer:une,dialog:qo(hne,e),header:dne,closeButton:fne,body:pne,footer:mne})),yne={xs:Bp("xs"),sm:Bp("md"),md:Bp("lg"),lg:Bp("2xl"),xl:Bp("4xl"),full:Bp("full")},xne=lne({baseStyle:gne,sizes:yne,defaultProps:{size:"xs"}}),{definePartsStyle:vne,defineMultiStyleConfig:bne}=Yi(uQ.keys),_ne={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},wne={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Sne={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Cne=vne({preview:_ne,input:wne,textarea:Sne}),kne=bne({baseStyle:Cne}),{definePartsStyle:Ene,defineMultiStyleConfig:Tne}=Yi(hQ.keys),Sm=ln("form-control-color"),Ane={marginStart:"1",[Sm.variable]:"colors.red.500",_dark:{[Sm.variable]:"colors.red.300"},color:Sm.reference},Ine={mt:"2",[Sm.variable]:"colors.gray.600",_dark:{[Sm.variable]:"colors.whiteAlpha.600"},color:Sm.reference,lineHeight:"normal",fontSize:"sm"},Pne=Ene({container:{width:"100%",position:"relative"},requiredIndicator:Ane,helperText:Ine}),Rne=Tne({baseStyle:Pne}),{definePartsStyle:Mne,defineMultiStyleConfig:Lne}=Yi(dQ.keys),Cm=ln("form-error-color"),One={[Cm.variable]:"colors.red.500",_dark:{[Cm.variable]:"colors.red.300"},color:Cm.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Dne={marginEnd:"0.5em",[Cm.variable]:"colors.red.500",_dark:{[Cm.variable]:"colors.red.300"},color:Cm.reference},zne=Mne({text:One,icon:Dne}),Nne=Lne({baseStyle:zne}),jne={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Fne={baseStyle:jne},Bne={fontFamily:"heading",fontWeight:"bold"},$ne={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Une={baseStyle:Bne,sizes:$ne,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Vne,definePartsStyle:Hne}=Yi(aQ.keys),Ck=ln("breadcrumb-link-decor"),Wne={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:Ck.reference,[Ck.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[Ck.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Gne=Hne({link:Wne}),Xne=Vne({baseStyle:Gne}),qne={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},b$=e=>{const{colorScheme:t,theme:r}=e;if(t==="gray")return{color:an("gray.800","whiteAlpha.900")(e),_hover:{bg:an("gray.100","whiteAlpha.200")(e)},_active:{bg:an("gray.200","whiteAlpha.300")(e)}};const n=jm(`${t}.200`,.12)(r),o=jm(`${t}.200`,.24)(r);return{color:an(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:an(`${t}.50`,n)(e)},_active:{bg:an(`${t}.100`,o)(e)}}},Yne=e=>{const{colorScheme:t}=e,r=an("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...qo(b$,e)}},Zne={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Kne=e=>{var t;const{colorScheme:r}=e;if(r==="gray"){const k=an("gray.100","whiteAlpha.200")(e);return{bg:k,color:an("gray.800","whiteAlpha.900")(e),_hover:{bg:an("gray.200","whiteAlpha.300")(e),_disabled:{bg:k}},_active:{bg:an("gray.300","whiteAlpha.400")(e)}}}const{bg:n=`${r}.500`,color:o="white",hoverBg:f=`${r}.600`,activeBg:y=`${r}.700`}=(t=Zne[r])!=null?t:{},s=an(n,`${r}.200`)(e);return{bg:s,color:an(o,"gray.800")(e),_hover:{bg:an(f,`${r}.300`)(e),_disabled:{bg:s}},_active:{bg:an(y,`${r}.400`)(e)}}},Jne=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:an(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:an(`${t}.700`,`${t}.500`)(e)}}},Qne={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},eie={ghost:b$,outline:Yne,solid:Kne,link:Jne,unstyled:Qne},tie={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},rie={baseStyle:qne,variants:eie,sizes:tie,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:pf,defineMultiStyleConfig:nie}=Yi(AQ.keys),W1=ln("card-bg"),du=ln("card-padding"),_$=ln("card-shadow"),F_=ln("card-radius"),w$=ln("card-border-width","0"),S$=ln("card-border-color"),iie=pf({container:{[W1.variable]:"colors.chakra-body-bg",backgroundColor:W1.reference,boxShadow:_$.reference,borderRadius:F_.reference,color:"chakra-body-text",borderWidth:w$.reference,borderColor:S$.reference},body:{padding:du.reference,flex:"1 1 0%"},header:{padding:du.reference},footer:{padding:du.reference}}),sie={sm:pf({container:{[F_.variable]:"radii.base",[du.variable]:"space.3"}}),md:pf({container:{[F_.variable]:"radii.md",[du.variable]:"space.5"}}),lg:pf({container:{[F_.variable]:"radii.xl",[du.variable]:"space.7"}})},oie={elevated:pf({container:{[_$.variable]:"shadows.base",_dark:{[W1.variable]:"colors.gray.700"}}}),outline:pf({container:{[w$.variable]:"1px",[S$.variable]:"colors.chakra-border-color"}}),filled:pf({container:{[W1.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[du.variable]:0},header:{[du.variable]:0},footer:{[du.variable]:0}}},aie=nie({baseStyle:iie,variants:oie,sizes:sie,defaultProps:{variant:"elevated",size:"md"}}),Ex=io("close-button-size"),Vy=io("close-button-bg"),lie={w:[Ex.reference],h:[Ex.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Vy.variable]:"colors.blackAlpha.100",_dark:{[Vy.variable]:"colors.whiteAlpha.100"}},_active:{[Vy.variable]:"colors.blackAlpha.200",_dark:{[Vy.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Vy.reference},cie={lg:{[Ex.variable]:"sizes.10",fontSize:"md"},md:{[Ex.variable]:"sizes.8",fontSize:"xs"},sm:{[Ex.variable]:"sizes.6",fontSize:"2xs"}},uie={baseStyle:lie,sizes:cie,defaultProps:{size:"md"}},{variants:hie,defaultProps:die}=Cx,fie={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Ls.bg.reference,color:Ls.color.reference,boxShadow:Ls.shadow.reference},pie={baseStyle:fie,variants:hie,defaultProps:die},mie={w:"100%",mx:"auto",maxW:"prose",px:"4"},gie={baseStyle:mie},yie={opacity:.6,borderColor:"inherit"},xie={borderStyle:"solid"},vie={borderStyle:"dashed"},bie={solid:xie,dashed:vie},_ie={baseStyle:yie,variants:bie,defaultProps:{variant:"solid"}},{definePartsStyle:wie,defineMultiStyleConfig:Sie}=Yi(iQ.keys),Cie={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},kie={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},Eie={pt:"2",px:"4",pb:"5"},Tie={fontSize:"1.25em"},Aie=wie({container:Cie,button:kie,panel:Eie,icon:Tie}),Iie=Sie({baseStyle:Aie}),{definePartsStyle:zv,defineMultiStyleConfig:Pie}=Yi(sQ.keys),Da=ln("alert-fg"),_u=ln("alert-bg"),Rie=zv({container:{bg:_u.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Da.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function vP(e){const{theme:t,colorScheme:r}=e,n=jm(`${r}.200`,.16)(t);return{light:`colors.${r}.100`,dark:n}}var Mie=zv(e=>{const{colorScheme:t}=e,r=vP(e);return{container:{[Da.variable]:`colors.${t}.500`,[_u.variable]:r.light,_dark:{[Da.variable]:`colors.${t}.200`,[_u.variable]:r.dark}}}}),Lie=zv(e=>{const{colorScheme:t}=e,r=vP(e);return{container:{[Da.variable]:`colors.${t}.500`,[_u.variable]:r.light,_dark:{[Da.variable]:`colors.${t}.200`,[_u.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Da.reference}}}),Oie=zv(e=>{const{colorScheme:t}=e,r=vP(e);return{container:{[Da.variable]:`colors.${t}.500`,[_u.variable]:r.light,_dark:{[Da.variable]:`colors.${t}.200`,[_u.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Da.reference}}}),Die=zv(e=>{const{colorScheme:t}=e;return{container:{[Da.variable]:"colors.white",[_u.variable]:`colors.${t}.500`,_dark:{[Da.variable]:"colors.gray.900",[_u.variable]:`colors.${t}.200`},color:Da.reference}}}),zie={subtle:Mie,"left-accent":Lie,"top-accent":Oie,solid:Die},Nie=Pie({baseStyle:Rie,variants:zie,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:C$,defineMultiStyleConfig:jie}=Yi(oQ.keys),km=ln("avatar-border-color"),Tx=ln("avatar-bg"),uv=ln("avatar-font-size"),Fm=ln("avatar-size"),Fie={borderRadius:"full",border:"0.2em solid",borderColor:km.reference,[km.variable]:"white",_dark:{[km.variable]:"colors.gray.800"}},Bie={bg:Tx.reference,fontSize:uv.reference,width:Fm.reference,height:Fm.reference,lineHeight:"1",[Tx.variable]:"colors.gray.200",_dark:{[Tx.variable]:"colors.whiteAlpha.400"}},$ie=e=>{const{name:t,theme:r}=e,n=t?qQ({string:t}):"colors.gray.400",o=GQ(n)(r);let f="white";return o||(f="gray.800"),{bg:Tx.reference,fontSize:uv.reference,color:f,borderColor:km.reference,verticalAlign:"top",width:Fm.reference,height:Fm.reference,"&:not([data-loaded])":{[Tx.variable]:n},[km.variable]:"colors.white",_dark:{[km.variable]:"colors.gray.800"}}},Uie={fontSize:uv.reference,lineHeight:"1"},Vie=C$(e=>({badge:qo(Fie,e),excessLabel:qo(Bie,e),container:qo($ie,e),label:Uie}));function ih(e){const t=e!=="100%"?p$[e]:void 0;return C$({container:{[Fm.variable]:t??e,[uv.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Fm.variable]:t??e,[uv.variable]:`calc(${t??e} / 2.5)`}})}var Hie={"2xs":ih(4),xs:ih(6),sm:ih(8),md:ih(12),lg:ih(16),xl:ih(24),"2xl":ih(32),full:ih("100%")},Wie=jie({baseStyle:Vie,sizes:Hie,defaultProps:{size:"md"}}),Gie={Accordion:Iie,Alert:Nie,Avatar:Wie,Badge:Cx,Breadcrumb:Xne,Button:rie,Checkbox:H1,CloseButton:uie,Code:pie,Container:gie,Divider:_ie,Drawer:xne,Editable:kne,Form:Rne,FormError:Nne,FormLabel:Fne,Heading:Une,Input:_i,Kbd:lre,Link:ure,List:mre,Menu:Ere,Modal:Nre,NumberInput:Gre,PinInput:Zre,Popover:ane,Progress:pte,Radio:Tte,Select:Ote,Skeleton:zte,SkipLink:jte,Slider:Yte,Spinner:Jte,Stat:ore,Switch:uee,Table:yee,Tabs:Mee,Tag:Wee,Textarea:nte,Tooltip:ote,Card:aie,Stepper:nQ},Xie={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},qie={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Yie="ltr",Zie={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},Kie={semanticTokens:Xie,direction:Yie,...eQ,components:Gie,styles:qie,config:Zie};function Jie(e,t){const r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}function Qie(e,t,r,n){const o=typeof t=="string"?t.split("."):[t];for(n=0;n<o.length&&e;n+=1)e=e[o[n]];return e===void 0?r:e}var ese=e=>{const t=new WeakMap;return(n,o,f,y)=>{if(typeof n>"u")return e(n,o,f);t.has(n)||t.set(n,new Map);const s=t.get(n);if(s.has(o))return s.get(o);const k=e(n,o,f,y);return s.set(o,k),k}},k$=ese(Qie);function E$(e,t){const r={};return Object.keys(e).forEach(n=>{const o=e[n];t(o,n,e)&&(r[n]=o)}),r}var T$=e=>E$(e,t=>t!=null);function tse(e){return typeof e=="function"}function A$(e,...t){return tse(e)?e(...t):e}var rse=typeof Element<"u",nse=typeof Map=="function",ise=typeof Set=="function",sse=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function B_(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!B_(e[n],t[n]))return!1;return!0}var f;if(nse&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(f=e.entries();!(n=f.next()).done;)if(!t.has(n.value[0]))return!1;for(f=e.entries();!(n=f.next()).done;)if(!B_(n.value[1],t.get(n.value[0])))return!1;return!0}if(ise&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(f=e.entries();!(n=f.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(sse&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(rse&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof)&&!B_(e[o[n]],t[o[n]]))return!1;return!0}return e!==e&&t!==t}var ose=function(t,r){try{return B_(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const ase=Of(ose);function I$(e,t={}){var r;const{styleConfig:n,...o}=t,{theme:f,colorMode:y}=pK(),s=e?k$(f,`components.${e}`):void 0,k=n||s,I=fc({theme:f,colorMode:y},(r=k==null?void 0:k.defaultProps)!=null?r:{},T$(Jie(o,["children"]))),D=le.useRef({});if(k){const U=PJ(k)(I);ase(D.current,U)||(D.current=U)}return D.current}function bP(e,t={}){return I$(e,t)}function lse(e,t={}){return I$(e,t)}var cse=new Set([...xJ,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),use=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function hse(e){return use.has(e)||!cse.has(e)}function dse(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const r={...e};for(const n of t)if(n!=null)for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&(o in r&&delete r[o],r[o]=n[o]);return r}var fse=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,pse=$B(function(e){return fse.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),mse=pse,gse=function(t){return t!=="theme"},s3=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?mse:gse},o3=function(t,r,n){var o;if(r){var f=r.shouldForwardProp;o=t.__emotion_forwardProp&&f?function(y){return t.__emotion_forwardProp(y)&&f(y)}:f}return typeof o!="function"&&n&&(o=t.__emotion_forwardProp),o},yse=function(t){var r=t.cache,n=t.serialized,o=t.isStringTag;return XB(r,n,o),XZ(function(){return qB(r,n,o)}),null},xse=function e(t,r){var n=t.__emotion_real===t,o=n&&t.__emotion_base||t,f,y;r!==void 0&&(f=r.label,y=r.target);var s=o3(t,r,n),k=s||s3(o),I=!k("as");return function(){var D=arguments,N=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(f!==void 0&&N.push("label:"+f+";"),D[0]==null||D[0].raw===void 0)N.push.apply(N,D);else{N.push(D[0][0]);for(var U=D.length,q=1;q<U;q++)N.push(D[q],D[0][q])}var Z=QB(function(ae,ve,ie){var W=I&&ae.as||o,K="",he=[],de=ae;if(ae.theme==null){de={};for(var Ae in ae)de[Ae]=ae[Ae];de.theme=le.useContext(ov)}typeof ae.className=="string"?K=$Z(ve.registered,he,ae.className):ae.className!=null&&(K=ae.className+" ");var Te=aP(N.concat(he),ve.registered,de);K+=ve.key+"-"+Te.name,y!==void 0&&(K+=" "+y);var Ue=I&&s===void 0?s3(W):k,Pe={};for(var $e in ae)I&&$e==="as"||Ue($e)&&(Pe[$e]=ae[$e]);return Pe.className=K,Pe.ref=ie,le.createElement(le.Fragment,null,le.createElement(yse,{cache:ve,serialized:Te,isStringTag:typeof W=="string"}),le.createElement(W,Pe))});return Z.displayName=f!==void 0?f:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",Z.defaultProps=t.defaultProps,Z.__emotion_real=Z,Z.__emotion_base=o,Z.__emotion_styles=N,Z.__emotion_forwardProp=s,Object.defineProperty(Z,"toString",{value:function(){return"."+y}}),Z.withComponent=function(ae,ve){return e(ae,F1({},r,ve,{shouldForwardProp:o3(Z,ve,!0)})).apply(void 0,N)},Z}},vse=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],G1=xse.bind();vse.forEach(function(e){G1[e]=G1(e)});var a3,bse=(a3=G1.default)!=null?a3:G1,_se=({baseStyle:e})=>t=>{const{theme:r,css:n,__css:o,sx:f,...y}=t,s=E$(y,(N,U)=>bJ(U)),k=A$(e,t),I=dse({},o,k,T$(s),f),D=h$(I)(t.theme);return n?[D,n]:D};function kk(e,t){const{baseStyle:r,...n}=t??{};n.shouldForwardProp||(n.shouldForwardProp=hse);const o=_se({baseStyle:r}),f=bse(e,n)(o);return xn.forwardRef(function(k,I){const{colorMode:D,forced:N}=uP();return xn.createElement(f,{ref:I,"data-theme":N?D:void 0,...k})})}function wse(){const e=new Map;return new Proxy(kk,{apply(t,r,n){return kk(...n)},get(t,r){return e.has(r)||e.set(r,kk(r)),e.get(r)}})}var Fl=wse();function cg(e){return le.forwardRef(e)}function Sse(e={}){const{strict:t=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:n}=e,o=le.createContext(void 0);o.displayName=n;function f(){var y;const s=le.useContext(o);if(!s&&t){const k=new Error(r);throw k.name="ContextError",(y=Error.captureStackTrace)==null||y.call(Error,k,f),k}return s}return[o.Provider,f,o]}function Cse(e){const{cssVarsRoot:t,theme:r,children:n}=e,o=le.useMemo(()=>yJ(r),[r]);return A.jsxs(ZZ,{theme:o,children:[A.jsx(kse,{root:t}),n]})}function kse({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return A.jsx(rS,{styles:r=>({[t]:r.__cssVars})})}Sse({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function Ese(){const{colorMode:e}=uP();return A.jsx(rS,{styles:t=>{const r=k$(t,"styles.global"),n=A$(r,{theme:t,colorMode:e});return n?h$(n)(t):void 0}})}var P$=le.createContext({getDocument(){return document},getWindow(){return window}});P$.displayName="EnvironmentContext";function R$(e){const{children:t,environment:r,disabled:n}=e,o=le.useRef(null),f=le.useMemo(()=>r||{getDocument:()=>{var s,k;return(k=(s=o.current)==null?void 0:s.ownerDocument)!=null?k:document},getWindow:()=>{var s,k;return(k=(s=o.current)==null?void 0:s.ownerDocument.defaultView)!=null?k:window}},[r]),y=!n||!r;return A.jsxs(P$.Provider,{value:f,children:[t,y&&A.jsx("span",{id:"__chakra_env",hidden:!0,ref:o})]})}R$.displayName="EnvironmentProvider";var Tse=e=>{const{children:t,colorModeManager:r,portalZIndex:n,resetScope:o,resetCSS:f=!0,theme:y={},environment:s,cssVarsRoot:k,disableEnvironment:I,disableGlobalStyle:D}=e,N=A.jsx(R$,{environment:s,disabled:I,children:t});return A.jsx(Cse,{theme:y,cssVarsRoot:k,children:A.jsxs(i$,{colorModeManager:r,options:y.config,children:[f?A.jsx(eK,{scope:o}):A.jsx(QZ,{}),!D&&A.jsx(Ese,{}),n?A.jsx(r$,{zIndex:n,children:N}):N]})})},Ase=(e,t)=>e.find(r=>r.id===t);function l3(e,t){const r=M$(e,t),n=r?e[r].findIndex(o=>o.id===t):-1;return{position:r,index:n}}function M$(e,t){for(const[r,n]of Object.entries(e))if(Ase(n,t))return r}function Ise(e){const t=e.includes("right"),r=e.includes("left");let n="center";return t&&(n="flex-end"),r&&(n="flex-start"),{display:"flex",flexDirection:"column",alignItems:n}}function Pse(e){const r=e==="top"||e==="bottom"?"0 auto":void 0,n=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,o=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,f=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",y=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:n,bottom:o,right:f,left:y}}function Rse(e,t=[]){const r=le.useRef(e);return le.useEffect(()=>{r.current=e}),le.useCallback((...n)=>{var o;return(o=r.current)==null?void 0:o.call(r,...n)},t)}function Mse(e,t){const r=Rse(e);le.useEffect(()=>{if(t==null)return;let n=null;return n=window.setTimeout(()=>{r()},t),()=>{n&&window.clearTimeout(n)}},[t,r])}function c3(e,t){const r=le.useRef(!1),n=le.useRef(!1);le.useEffect(()=>{if(r.current&&n.current)return e();n.current=!0},t),le.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}const L$=le.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),lS=le.createContext({}),Nv=le.createContext(null),cS=typeof document<"u",_P=cS?le.useLayoutEffect:le.useEffect,O$=le.createContext({strict:!1});function Lse(e,t,r,n){const{visualElement:o}=le.useContext(lS),f=le.useContext(O$),y=le.useContext(Nv),s=le.useContext(L$).reducedMotion,k=le.useRef();n=n||f.renderer,!k.current&&n&&(k.current=n(e,{visualState:t,parent:o,props:r,presenceContext:y,blockInitialAnimation:y?y.initial===!1:!1,reducedMotionConfig:s}));const I=k.current;le.useInsertionEffect(()=>{I&&I.update(r,y)});const D=le.useRef(!!window.HandoffAppearAnimations);return _P(()=>{I&&(I.render(),D.current&&I.animationState&&I.animationState.animateChanges())}),le.useEffect(()=>{I&&(I.updateFeatures(),!D.current&&I.animationState&&I.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,D.current=!1)}),I}function cm(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Ose(e,t,r){return le.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):cm(r)&&(r.current=n))},[t])}function hv(e){return typeof e=="string"||Array.isArray(e)}function uS(e){return typeof e=="object"&&typeof e.start=="function"}const wP=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],SP=["initial",...wP];function hS(e){return uS(e.animate)||SP.some(t=>hv(e[t]))}function D$(e){return!!(hS(e)||e.variants)}function Dse(e,t){if(hS(e)){const{initial:r,animate:n}=e;return{initial:r===!1||hv(r)?r:void 0,animate:hv(n)?n:void 0}}return e.inherit!==!1?t:{}}function zse(e){const{initial:t,animate:r}=Dse(e,le.useContext(lS));return le.useMemo(()=>({initial:t,animate:r}),[u3(t),u3(r)])}function u3(e){return Array.isArray(e)?e.join(" "):e}const h3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dv={};for(const e in h3)dv[e]={isEnabled:t=>h3[e].some(r=>!!t[r])};function Nse(e){for(const t in e)dv[t]={...dv[t],...e[t]}}const CP=le.createContext({}),z$=le.createContext({}),jse=Symbol.for("motionComponentSymbol");function Fse({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:o}){e&&Nse(e);function f(s,k){let I;const D={...le.useContext(L$),...s,layoutId:Bse(s)},{isStatic:N}=D,U=zse(s),q=n(s,N);if(!N&&cS){U.visualElement=Lse(o,q,D,t);const Z=le.useContext(z$),ae=le.useContext(O$).strict;U.visualElement&&(I=U.visualElement.loadFeatures(D,ae,e,Z))}return le.createElement(lS.Provider,{value:U},I&&U.visualElement?le.createElement(I,{visualElement:U.visualElement,...D}):null,r(o,s,Ose(q,U.visualElement,k),q,N,U.visualElement))}const y=le.forwardRef(f);return y[jse]=o,y}function Bse({layoutId:e}){const t=le.useContext(CP).id;return t&&e!==void 0?t+"-"+e:e}function $se(e){function t(n,o={}){return Fse(e(n,o))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,o)=>(r.has(o)||r.set(o,t(o)),r.get(o))})}const Use=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kP(e){return typeof e!="string"||e.includes("-")?!1:!!(Use.indexOf(e)>-1||/[A-Z]/.test(e))}const X1={};function Vse(e){Object.assign(X1,e)}const jv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jf=new Set(jv);function N$(e,{layout:t,layoutId:r}){return jf.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!X1[e]||e==="opacity")}const va=e=>!!(e&&e.getVelocity),Hse={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Wse=jv.length;function Gse(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,o){let f="";for(let y=0;y<Wse;y++){const s=jv[y];if(e[s]!==void 0){const k=Hse[s]||s;f+=`${k}(${e[s]}) `}}return t&&!e.z&&(f+="translateZ(0)"),f=f.trim(),o?f=o(e,n?"":f):r&&n&&(f="none"),f}const j$=e=>t=>typeof t=="string"&&t.startsWith(e),F$=j$("--"),UT=j$("var(--"),Xse=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,qse=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Yh=(e,t,r)=>Math.min(Math.max(r,e),t),Ff={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ax={...Ff,transform:e=>Yh(0,1,e)},Xb={...Ff,default:1},Ix=e=>Math.round(e*1e5)/1e5,dS=/(-)?([\d]*\.?[\d])+/g,B$=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Yse=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Fv(e){return typeof e=="string"}const Bv=e=>({test:t=>Fv(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ch=Bv("deg"),wc=Bv("%"),mn=Bv("px"),Zse=Bv("vh"),Kse=Bv("vw"),d3={...wc,parse:e=>wc.parse(e)/100,transform:e=>wc.transform(e*100)},f3={...Ff,transform:Math.round},$$={borderWidth:mn,borderTopWidth:mn,borderRightWidth:mn,borderBottomWidth:mn,borderLeftWidth:mn,borderRadius:mn,radius:mn,borderTopLeftRadius:mn,borderTopRightRadius:mn,borderBottomRightRadius:mn,borderBottomLeftRadius:mn,width:mn,maxWidth:mn,height:mn,maxHeight:mn,size:mn,top:mn,right:mn,bottom:mn,left:mn,padding:mn,paddingTop:mn,paddingRight:mn,paddingBottom:mn,paddingLeft:mn,margin:mn,marginTop:mn,marginRight:mn,marginBottom:mn,marginLeft:mn,rotate:ch,rotateX:ch,rotateY:ch,rotateZ:ch,scale:Xb,scaleX:Xb,scaleY:Xb,scaleZ:Xb,skew:ch,skewX:ch,skewY:ch,distance:mn,translateX:mn,translateY:mn,translateZ:mn,x:mn,y:mn,z:mn,perspective:mn,transformPerspective:mn,opacity:Ax,originX:d3,originY:d3,originZ:mn,zIndex:f3,fillOpacity:Ax,strokeOpacity:Ax,numOctaves:f3};function EP(e,t,r,n){const{style:o,vars:f,transform:y,transformOrigin:s}=e;let k=!1,I=!1,D=!0;for(const N in t){const U=t[N];if(F$(N)){f[N]=U;continue}const q=$$[N],Z=qse(U,q);if(jf.has(N)){if(k=!0,y[N]=Z,!D)continue;U!==(q.default||0)&&(D=!1)}else N.startsWith("origin")?(I=!0,s[N]=Z):o[N]=Z}if(t.transform||(k||n?o.transform=Gse(e.transform,r,D,n):o.transform&&(o.transform="none")),I){const{originX:N="50%",originY:U="50%",originZ:q=0}=s;o.transformOrigin=`${N} ${U} ${q}`}}const TP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function U$(e,t,r){for(const n in t)!va(t[n])&&!N$(n,r)&&(e[n]=t[n])}function Jse({transformTemplate:e},t,r){return le.useMemo(()=>{const n=TP();return EP(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Qse(e,t,r){const n=e.style||{},o={};return U$(o,n,e),Object.assign(o,Jse(e,t,r)),e.transformValues?e.transformValues(o):o}function eoe(e,t,r){const n={},o=Qse(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const toe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function q1(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||toe.has(e)}let V$=e=>!q1(e);function roe(e){e&&(V$=t=>t.startsWith("on")?!q1(t):e(t))}try{roe(require("@emotion/is-prop-valid").default)}catch{}function noe(e,t,r){const n={};for(const o in e)o==="values"&&typeof e.values=="object"||(V$(o)||r===!0&&q1(o)||!t&&!q1(o)||e.draggable&&o.startsWith("onDrag"))&&(n[o]=e[o]);return n}function p3(e,t,r){return typeof e=="string"?e:mn.transform(t+r*e)}function ioe(e,t,r){const n=p3(t,e.x,e.width),o=p3(r,e.y,e.height);return`${n} ${o}`}const soe={offset:"stroke-dashoffset",array:"stroke-dasharray"},ooe={offset:"strokeDashoffset",array:"strokeDasharray"};function aoe(e,t,r=1,n=0,o=!0){e.pathLength=1;const f=o?soe:ooe;e[f.offset]=mn.transform(-n);const y=mn.transform(t),s=mn.transform(r);e[f.array]=`${y} ${s}`}function AP(e,{attrX:t,attrY:r,attrScale:n,originX:o,originY:f,pathLength:y,pathSpacing:s=1,pathOffset:k=0,...I},D,N,U){if(EP(e,I,D,U),N){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:q,style:Z,dimensions:ae}=e;q.transform&&(ae&&(Z.transform=q.transform),delete q.transform),ae&&(o!==void 0||f!==void 0||Z.transform)&&(Z.transformOrigin=ioe(ae,o!==void 0?o:.5,f!==void 0?f:.5)),t!==void 0&&(q.x=t),r!==void 0&&(q.y=r),n!==void 0&&(q.scale=n),y!==void 0&&aoe(q,y,s,k,!1)}const H$=()=>({...TP(),attrs:{}}),IP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function loe(e,t,r,n){const o=le.useMemo(()=>{const f=H$();return AP(f,t,{enableHardwareAcceleration:!1},IP(n),e.transformTemplate),{...f.attrs,style:{...f.style}}},[t]);if(e.style){const f={};U$(f,e.style,e),o.style={...f,...o.style}}return o}function coe(e=!1){return(r,n,o,{latestValues:f},y)=>{const k=(kP(r)?loe:eoe)(n,f,y,r),D={...noe(n,typeof r=="string",e),...k,ref:o},{children:N}=n,U=le.useMemo(()=>va(N)?N.get():N,[N]);return le.createElement(r,{...D,children:U})}}const PP=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function W$(e,{style:t,vars:r},n,o){Object.assign(e.style,t,o&&o.getProjectionStyles(n));for(const f in r)e.style.setProperty(f,r[f])}const G$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function X$(e,t,r,n){W$(e,t,void 0,n);for(const o in t.attrs)e.setAttribute(G$.has(o)?o:PP(o),t.attrs[o])}function RP(e,t){const{style:r}=e,n={};for(const o in r)(va(r[o])||t.style&&va(t.style[o])||N$(o,e))&&(n[o]=r[o]);return n}function q$(e,t){const r=RP(e,t);for(const n in e)if(va(e[n])||va(t[n])){const o=jv.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[o]=e[n]}return r}function MP(e,t,r,n={},o={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,o)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,o)),t}function Y$(e){const t=le.useRef(null);return t.current===null&&(t.current=e()),t.current}const Y1=e=>Array.isArray(e),uoe=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),hoe=e=>Y1(e)?e[e.length-1]||0:e;function $_(e){const t=va(e)?e.get():e;return uoe(t)?t.toValue():t}function doe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,o,f){const y={latestValues:foe(n,o,f,e),renderState:t()};return r&&(y.mount=s=>r(n,s,y)),y}const Z$=e=>(t,r)=>{const n=le.useContext(lS),o=le.useContext(Nv),f=()=>doe(e,t,n,o);return r?f():Y$(f)};function foe(e,t,r,n){const o={},f=n(e,{});for(const U in f)o[U]=$_(f[U]);let{initial:y,animate:s}=e;const k=hS(e),I=D$(e);t&&I&&!k&&e.inherit!==!1&&(y===void 0&&(y=t.initial),s===void 0&&(s=t.animate));let D=r?r.initial===!1:!1;D=D||y===!1;const N=D?s:y;return N&&typeof N!="boolean"&&!uS(N)&&(Array.isArray(N)?N:[N]).forEach(q=>{const Z=MP(e,q);if(!Z)return;const{transitionEnd:ae,transition:ve,...ie}=Z;for(const W in ie){let K=ie[W];if(Array.isArray(K)){const he=D?K.length-1:0;K=K[he]}K!==null&&(o[W]=K)}for(const W in ae)o[W]=ae[W]}),o}const Is=e=>e;class m3{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function poe(e){let t=new m3,r=new m3,n=0,o=!1,f=!1;const y=new WeakSet,s={schedule:(k,I=!1,D=!1)=>{const N=D&&o,U=N?t:r;return I&&y.add(k),U.add(k)&&N&&o&&(n=t.order.length),k},cancel:k=>{r.remove(k),y.delete(k)},process:k=>{if(o){f=!0;return}if(o=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let I=0;I<n;I++){const D=t.order[I];D(k),y.has(D)&&(s.schedule(D),e())}o=!1,f&&(f=!1,s.process(k))}};return s}const qb=["prepare","read","update","preRender","render","postRender"],moe=40;function goe(e,t){let r=!1,n=!0;const o={delta:0,timestamp:0,isProcessing:!1},f=qb.reduce((N,U)=>(N[U]=poe(()=>r=!0),N),{}),y=N=>f[N].process(o),s=()=>{const N=performance.now();r=!1,o.delta=n?1e3/60:Math.max(Math.min(N-o.timestamp,moe),1),o.timestamp=N,o.isProcessing=!0,qb.forEach(y),o.isProcessing=!1,r&&t&&(n=!1,e(s))},k=()=>{r=!0,n=!0,o.isProcessing||e(s)};return{schedule:qb.reduce((N,U)=>{const q=f[U];return N[U]=(Z,ae=!1,ve=!1)=>(r||k(),q.schedule(Z,ae,ve)),N},{}),cancel:N=>qb.forEach(U=>f[U].cancel(N)),state:o,steps:f}}const{schedule:qi,cancel:wu,state:uo,steps:Ek}=goe(typeof requestAnimationFrame<"u"?requestAnimationFrame:Is,!0),yoe={useVisualState:Z$({scrapeMotionValuesFromProps:q$,createRenderState:H$,onMount:(e,t,{renderState:r,latestValues:n})=>{qi.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),qi.render(()=>{AP(r,n,{enableHardwareAcceleration:!1},IP(t.tagName),e.transformTemplate),X$(t,r)})}})},xoe={useVisualState:Z$({scrapeMotionValuesFromProps:RP,createRenderState:TP})};function voe(e,{forwardMotionProps:t=!1},r,n){return{...kP(e)?yoe:xoe,preloadedFeatures:r,useRender:coe(t),createVisualElement:n,Component:e}}function au(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const K$=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function fS(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const boe=e=>t=>K$(t)&&e(t,fS(t));function fu(e,t,r,n){return au(e,t,boe(r),n)}const _oe=(e,t)=>r=>t(e(r)),Nh=(...e)=>e.reduce(_oe);function J$(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const g3=J$("dragHorizontal"),y3=J$("dragVertical");function Q$(e){let t=!1;if(e==="y")t=y3();else if(e==="x")t=g3();else{const r=g3(),n=y3();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function e6(){const e=Q$(!0);return e?(e(),!1):!0}class od{constructor(t){this.isMounted=!1,this.node=t}update(){}}function x3(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),o=(f,y)=>{if(f.type==="touch"||e6())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[n]&&qi.update(()=>s[n](f,y))};return fu(e.current,r,o,{passive:!e.getProps()[n]})}class woe extends od{mount(){this.unmount=Nh(x3(this.node,!0),x3(this.node,!1))}unmount(){}}class Soe extends od{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nh(au(this.node.current,"focus",()=>this.onFocus()),au(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const t6=(e,t)=>t?e===t?!0:t6(e,t.parentElement):!1;function Tk(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,fS(r))}class Coe extends od{constructor(){super(...arguments),this.removeStartListeners=Is,this.removeEndListeners=Is,this.removeAccessibleListeners=Is,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const n=this.node.getProps(),f=fu(window,"pointerup",(s,k)=>{if(!this.checkPressEnd())return;const{onTap:I,onTapCancel:D}=this.node.getProps();qi.update(()=>{t6(this.node.current,s.target)?I&&I(s,k):D&&D(s,k)})},{passive:!(n.onTap||n.onPointerUp)}),y=fu(window,"pointercancel",(s,k)=>this.cancelPress(s,k),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Nh(f,y),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=f=>{if(f.key!=="Enter"||this.isPressing)return;const y=s=>{s.key!=="Enter"||!this.checkPressEnd()||Tk("up",(k,I)=>{const{onTap:D}=this.node.getProps();D&&qi.update(()=>D(k,I))})};this.removeEndListeners(),this.removeEndListeners=au(this.node.current,"keyup",y),Tk("down",(s,k)=>{this.startPress(s,k)})},r=au(this.node.current,"keydown",t),n=()=>{this.isPressing&&Tk("cancel",(f,y)=>this.cancelPress(f,y))},o=au(this.node.current,"blur",n);this.removeAccessibleListeners=Nh(r,o)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&qi.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!e6()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&qi.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=fu(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=au(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Nh(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const VT=new WeakMap,Ak=new WeakMap,koe=e=>{const t=VT.get(e.target);t&&t(e)},Eoe=e=>{e.forEach(koe)};function Toe({root:e,...t}){const r=e||document;Ak.has(r)||Ak.set(r,{});const n=Ak.get(r),o=JSON.stringify(t);return n[o]||(n[o]=new IntersectionObserver(Eoe,{root:e,...t})),n[o]}function Aoe(e,t,r){const n=Toe(t);return VT.set(e,r),n.observe(e),()=>{VT.delete(e),n.unobserve(e)}}const Ioe={some:0,all:1};class Poe extends od{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:o="some",once:f}=t,y={root:r?r.current:void 0,rootMargin:n,threshold:typeof o=="number"?o:Ioe[o]},s=k=>{const{isIntersecting:I}=k;if(this.isInView===I||(this.isInView=I,f&&!I&&this.hasEnteredView))return;I&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",I);const{onViewportEnter:D,onViewportLeave:N}=this.node.getProps(),U=I?D:N;U&&U(k)};return Aoe(this.node.current,y,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Roe(t,r))&&this.startObserver()}unmount(){}}function Roe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Moe={inView:{Feature:Poe},tap:{Feature:Coe},focus:{Feature:Soe},hover:{Feature:woe}};function r6(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Loe(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function Ooe(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function pS(e,t,r){const n=e.getProps();return MP(n,t,r!==void 0?r:n.custom,Loe(e),Ooe(e))}const Doe="framerAppearId",zoe="data-"+PP(Doe);let Noe=Is,LP=Is;const jh=e=>e*1e3,pu=e=>e/1e3,joe={current:!1},n6=e=>Array.isArray(e)&&typeof e[0]=="number";function i6(e){return!!(!e||typeof e=="string"&&s6[e]||n6(e)||Array.isArray(e)&&e.every(i6))}const lx=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,s6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lx([0,.65,.55,1]),circOut:lx([.55,0,1,.45]),backIn:lx([.31,.01,.66,-.59]),backOut:lx([.33,1.53,.69,.99])};function o6(e){if(e)return n6(e)?lx(e):Array.isArray(e)?e.map(o6):s6[e]}function Foe(e,t,r,{delay:n=0,duration:o,repeat:f=0,repeatType:y="loop",ease:s,times:k}={}){const I={[t]:r};k&&(I.offset=k);const D=o6(s);return Array.isArray(D)&&(I.easing=D),e.animate(I,{delay:n,duration:o,easing:Array.isArray(D)?"linear":D,fill:"both",iterations:f+1,direction:y==="reverse"?"alternate":"normal"})}function Boe(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const a6=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,$oe=1e-7,Uoe=12;function Voe(e,t,r,n,o){let f,y,s=0;do y=t+(r-t)/2,f=a6(y,n,o)-e,f>0?r=y:t=y;while(Math.abs(f)>$oe&&++s<Uoe);return y}function $v(e,t,r,n){if(e===t&&r===n)return Is;const o=f=>Voe(f,0,1,e,r);return f=>f===0||f===1?f:a6(o(f),t,n)}const Hoe=$v(.42,0,1,1),Woe=$v(0,0,.58,1),l6=$v(.42,0,.58,1),Goe=e=>Array.isArray(e)&&typeof e[0]!="number",c6=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,u6=e=>t=>1-e(1-t),h6=e=>1-Math.sin(Math.acos(e)),OP=u6(h6),Xoe=c6(OP),d6=$v(.33,1.53,.69,.99),DP=u6(d6),qoe=c6(DP),Yoe=e=>(e*=2)<1?.5*DP(e):.5*(2-Math.pow(2,-10*(e-1))),Zoe={linear:Is,easeIn:Hoe,easeInOut:l6,easeOut:Woe,circIn:h6,circInOut:Xoe,circOut:OP,backIn:DP,backInOut:qoe,backOut:d6,anticipate:Yoe},v3=e=>{if(Array.isArray(e)){LP(e.length===4);const[t,r,n,o]=e;return $v(t,r,n,o)}else if(typeof e=="string")return Zoe[e];return e},zP=(e,t)=>r=>!!(Fv(r)&&Yse.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),f6=(e,t,r)=>n=>{if(!Fv(n))return n;const[o,f,y,s]=n.match(dS);return{[e]:parseFloat(o),[t]:parseFloat(f),[r]:parseFloat(y),alpha:s!==void 0?parseFloat(s):1}},Koe=e=>Yh(0,255,e),Ik={...Ff,transform:e=>Math.round(Koe(e))},of={test:zP("rgb","red"),parse:f6("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ik.transform(e)+", "+Ik.transform(t)+", "+Ik.transform(r)+", "+Ix(Ax.transform(n))+")"};function Joe(e){let t="",r="",n="",o="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),o=e.substring(4,5),t+=t,r+=r,n+=n,o+=o),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}}const HT={test:zP("#"),parse:Joe,transform:of.transform},um={test:zP("hsl","hue"),parse:f6("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+wc.transform(Ix(t))+", "+wc.transform(Ix(r))+", "+Ix(Ax.transform(n))+")"},Ho={test:e=>of.test(e)||HT.test(e)||um.test(e),parse:e=>of.test(e)?of.parse(e):um.test(e)?um.parse(e):HT.parse(e),transform:e=>Fv(e)?e:e.hasOwnProperty("red")?of.transform(e):um.transform(e)},bs=(e,t,r)=>-r*e+r*t+e;function Pk(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Qoe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let o=0,f=0,y=0;if(!t)o=f=y=r;else{const s=r<.5?r*(1+t):r+t-r*t,k=2*r-s;o=Pk(k,s,e+1/3),f=Pk(k,s,e),y=Pk(k,s,e-1/3)}return{red:Math.round(o*255),green:Math.round(f*255),blue:Math.round(y*255),alpha:n}}const Rk=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},eae=[HT,of,um],tae=e=>eae.find(t=>t.test(e));function b3(e){const t=tae(e);let r=t.parse(e);return t===um&&(r=Qoe(r)),r}const p6=(e,t)=>{const r=b3(e),n=b3(t),o={...r};return f=>(o.red=Rk(r.red,n.red,f),o.green=Rk(r.green,n.green,f),o.blue=Rk(r.blue,n.blue,f),o.alpha=bs(r.alpha,n.alpha,f),of.transform(o))};function rae(e){var t,r;return isNaN(e)&&Fv(e)&&(((t=e.match(dS))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(B$))===null||r===void 0?void 0:r.length)||0)>0}const m6={regex:Xse,countKey:"Vars",token:"${v}",parse:Is},g6={regex:B$,countKey:"Colors",token:"${c}",parse:Ho.parse},y6={regex:dS,countKey:"Numbers",token:"${n}",parse:Ff.parse};function Mk(e,{regex:t,countKey:r,token:n,parse:o}){const f=e.tokenised.match(t);f&&(e["num"+r]=f.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...f.map(o)))}function Z1(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Mk(r,m6),Mk(r,g6),Mk(r,y6),r}function x6(e){return Z1(e).values}function v6(e){const{values:t,numColors:r,numVars:n,tokenised:o}=Z1(e),f=t.length;return y=>{let s=o;for(let k=0;k<f;k++)k<n?s=s.replace(m6.token,y[k]):k<n+r?s=s.replace(g6.token,Ho.transform(y[k])):s=s.replace(y6.token,Ix(y[k]));return s}}const nae=e=>typeof e=="number"?0:e;function iae(e){const t=x6(e);return v6(e)(t.map(nae))}const Zh={test:rae,parse:x6,createTransformer:v6,getAnimatableNone:iae},b6=(e,t)=>r=>`${r>0?t:e}`;function _6(e,t){return typeof e=="number"?r=>bs(e,t,r):Ho.test(e)?p6(e,t):e.startsWith("var(")?b6(e,t):S6(e,t)}const w6=(e,t)=>{const r=[...e],n=r.length,o=e.map((f,y)=>_6(f,t[y]));return f=>{for(let y=0;y<n;y++)r[y]=o[y](f);return r}},sae=(e,t)=>{const r={...e,...t},n={};for(const o in r)e[o]!==void 0&&t[o]!==void 0&&(n[o]=_6(e[o],t[o]));return o=>{for(const f in n)r[f]=n[f](o);return r}},S6=(e,t)=>{const r=Zh.createTransformer(t),n=Z1(e),o=Z1(t);return n.numVars===o.numVars&&n.numColors===o.numColors&&n.numNumbers>=o.numNumbers?Nh(w6(n.values,o.values),r):b6(e,t)},fv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},_3=(e,t)=>r=>bs(e,t,r);function oae(e){return typeof e=="number"?_3:typeof e=="string"?Ho.test(e)?p6:S6:Array.isArray(e)?w6:typeof e=="object"?sae:_3}function aae(e,t,r){const n=[],o=r||oae(e[0]),f=e.length-1;for(let y=0;y<f;y++){let s=o(e[y],e[y+1]);if(t){const k=Array.isArray(t)?t[y]||Is:t;s=Nh(k,s)}n.push(s)}return n}function C6(e,t,{clamp:r=!0,ease:n,mixer:o}={}){const f=e.length;if(LP(f===t.length),f===1)return()=>t[0];e[0]>e[f-1]&&(e=[...e].reverse(),t=[...t].reverse());const y=aae(t,n,o),s=y.length,k=I=>{let D=0;if(s>1)for(;D<e.length-2&&!(I<e[D+1]);D++);const N=fv(e[D],e[D+1],I);return y[D](N)};return r?I=>k(Yh(e[0],e[f-1],I)):k}function lae(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const o=fv(0,t,n);e.push(bs(r,1,o))}}function cae(e){const t=[0];return lae(t,e.length-1),t}function uae(e,t){return e.map(r=>r*t)}function hae(e,t){return e.map(()=>t||l6).splice(0,e.length-1)}function K1({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const o=Goe(n)?n.map(v3):v3(n),f={done:!1,value:t[0]},y=uae(r&&r.length===t.length?r:cae(t),e),s=C6(y,t,{ease:Array.isArray(o)?o:hae(t,o)});return{calculatedDuration:e,next:k=>(f.value=s(k),f.done=k>=e,f)}}function k6(e,t){return t?e*(1e3/t):0}const dae=5;function E6(e,t,r){const n=Math.max(t-dae,0);return k6(r-e(n),t-n)}const Lk=.001,fae=.01,w3=10,pae=.05,mae=1;function gae({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let o,f;Noe(e<=jh(w3));let y=1-t;y=Yh(pae,mae,y),e=Yh(fae,w3,pu(e)),y<1?(o=I=>{const D=I*y,N=D*e,U=D-r,q=WT(I,y),Z=Math.exp(-N);return Lk-U/q*Z},f=I=>{const N=I*y*e,U=N*r+r,q=Math.pow(y,2)*Math.pow(I,2)*e,Z=Math.exp(-N),ae=WT(Math.pow(I,2),y);return(-o(I)+Lk>0?-1:1)*((U-q)*Z)/ae}):(o=I=>{const D=Math.exp(-I*e),N=(I-r)*e+1;return-Lk+D*N},f=I=>{const D=Math.exp(-I*e),N=(r-I)*(e*e);return D*N});const s=5/e,k=xae(o,f,s);if(e=jh(e),isNaN(k))return{stiffness:100,damping:10,duration:e};{const I=Math.pow(k,2)*n;return{stiffness:I,damping:y*2*Math.sqrt(n*I),duration:e}}}const yae=12;function xae(e,t,r){let n=r;for(let o=1;o<yae;o++)n=n-e(n)/t(n);return n}function WT(e,t){return e*Math.sqrt(1-t*t)}const vae=["duration","bounce"],bae=["stiffness","damping","mass"];function S3(e,t){return t.some(r=>e[r]!==void 0)}function _ae(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!S3(e,bae)&&S3(e,vae)){const r=gae(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function T6({keyframes:e,restDelta:t,restSpeed:r,...n}){const o=e[0],f=e[e.length-1],y={done:!1,value:o},{stiffness:s,damping:k,mass:I,velocity:D,duration:N,isResolvedFromDuration:U}=_ae(n),q=D?-pu(D):0,Z=k/(2*Math.sqrt(s*I)),ae=f-o,ve=pu(Math.sqrt(s/I)),ie=Math.abs(ae)<5;r||(r=ie?.01:2),t||(t=ie?.005:.5);let W;if(Z<1){const K=WT(ve,Z);W=he=>{const de=Math.exp(-Z*ve*he);return f-de*((q+Z*ve*ae)/K*Math.sin(K*he)+ae*Math.cos(K*he))}}else if(Z===1)W=K=>f-Math.exp(-ve*K)*(ae+(q+ve*ae)*K);else{const K=ve*Math.sqrt(Z*Z-1);W=he=>{const de=Math.exp(-Z*ve*he),Ae=Math.min(K*he,300);return f-de*((q+Z*ve*ae)*Math.sinh(Ae)+K*ae*Math.cosh(Ae))/K}}return{calculatedDuration:U&&N||null,next:K=>{const he=W(K);if(U)y.done=K>=N;else{let de=q;K!==0&&(Z<1?de=E6(W,K,he):de=0);const Ae=Math.abs(de)<=r,Te=Math.abs(f-he)<=t;y.done=Ae&&Te}return y.value=y.done?f:he,y}}}function C3({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:o=10,bounceStiffness:f=500,modifyTarget:y,min:s,max:k,restDelta:I=.5,restSpeed:D}){const N=e[0],U={done:!1,value:N},q=Ue=>s!==void 0&&Ue<s||k!==void 0&&Ue>k,Z=Ue=>s===void 0?k:k===void 0||Math.abs(s-Ue)<Math.abs(k-Ue)?s:k;let ae=r*t;const ve=N+ae,ie=y===void 0?ve:y(ve);ie!==ve&&(ae=ie-N);const W=Ue=>-ae*Math.exp(-Ue/n),K=Ue=>ie+W(Ue),he=Ue=>{const Pe=W(Ue),$e=K(Ue);U.done=Math.abs(Pe)<=I,U.value=U.done?ie:$e};let de,Ae;const Te=Ue=>{q(U.value)&&(de=Ue,Ae=T6({keyframes:[U.value,Z(U.value)],velocity:E6(K,Ue,U.value),damping:o,stiffness:f,restDelta:I,restSpeed:D}))};return Te(0),{calculatedDuration:null,next:Ue=>{let Pe=!1;return!Ae&&de===void 0&&(Pe=!0,he(Ue),Te(Ue)),de!==void 0&&Ue>de?Ae.next(Ue-de):(!Pe&&he(Ue),U)}}}const wae=e=>{const t=({timestamp:r})=>e(r);return{start:()=>qi.update(t,!0),stop:()=>wu(t),now:()=>uo.isProcessing?uo.timestamp:performance.now()}},k3=2e4;function E3(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<k3;)t+=r,n=e.next(t);return t>=k3?1/0:t}const Sae={decay:C3,inertia:C3,tween:K1,keyframes:K1,spring:T6};function J1({autoplay:e=!0,delay:t=0,driver:r=wae,keyframes:n,type:o="keyframes",repeat:f=0,repeatDelay:y=0,repeatType:s="loop",onPlay:k,onStop:I,onComplete:D,onUpdate:N,...U}){let q=1,Z=!1,ae,ve;const ie=()=>{ve=new Promise(Ot=>{ae=Ot})};ie();let W;const K=Sae[o]||K1;let he;K!==K1&&typeof n[0]!="number"&&(he=C6([0,100],n,{clamp:!1}),n=[0,100]);const de=K({...U,keyframes:n});let Ae;s==="mirror"&&(Ae=K({...U,keyframes:[...n].reverse(),velocity:-(U.velocity||0)}));let Te="idle",Ue=null,Pe=null,$e=null;de.calculatedDuration===null&&f&&(de.calculatedDuration=E3(de));const{calculatedDuration:Ve}=de;let Fe=1/0,Ye=1/0;Ve!==null&&(Fe=Ve+y,Ye=Fe*(f+1)-y);let ft=0;const Pt=Ot=>{if(Pe===null)return;q>0&&(Pe=Math.min(Pe,Ot)),q<0&&(Pe=Math.min(Ot-Ye/q,Pe)),Ue!==null?ft=Ue:ft=Math.round(Ot-Pe)*q;const ut=ft-t*(q>=0?1:-1),Vt=q>=0?ut<0:ut>Ye;ft=Math.max(ut,0),Te==="finished"&&Ue===null&&(ft=Ye);let ir=ft,vt=de;if(f){const fr=ft/Fe;let Cr=Math.floor(fr),mr=fr%1;!mr&&fr>=1&&(mr=1),mr===1&&Cr--,Cr=Math.min(Cr,f+1);const nn=!!(Cr%2);nn&&(s==="reverse"?(mr=1-mr,y&&(mr-=y/Fe)):s==="mirror"&&(vt=Ae));let Br=Yh(0,1,mr);ft>Ye&&(Br=s==="reverse"&&nn?1:0),ir=Br*Fe}const Dt=Vt?{done:!1,value:n[0]}:vt.next(ir);he&&(Dt.value=he(Dt.value));let{done:ur}=Dt;!Vt&&Ve!==null&&(ur=q>=0?ft>=Ye:ft<=0);const Tr=Ue===null&&(Te==="finished"||Te==="running"&&ur);return N&&N(Dt.value),Tr&&mt(),Dt},or=()=>{W&&W.stop(),W=void 0},xr=()=>{Te="idle",or(),ae(),ie(),Pe=$e=null},mt=()=>{Te="finished",D&&D(),or(),ae()},Xt=()=>{if(Z)return;W||(W=r(Pt));const Ot=W.now();k&&k(),Ue!==null?Pe=Ot-Ue:(!Pe||Te==="finished")&&(Pe=Ot),Te==="finished"&&ie(),$e=Pe,Ue=null,Te="running",W.start()};e&&Xt();const Wt={then(Ot,ut){return ve.then(Ot,ut)},get time(){return pu(ft)},set time(Ot){Ot=jh(Ot),ft=Ot,Ue!==null||!W||q===0?Ue=Ot:Pe=W.now()-Ot/q},get duration(){const Ot=de.calculatedDuration===null?E3(de):de.calculatedDuration;return pu(Ot)},get speed(){return q},set speed(Ot){Ot===q||!W||(q=Ot,Wt.time=pu(ft))},get state(){return Te},play:Xt,pause:()=>{Te="paused",Ue=ft},stop:()=>{Z=!0,Te!=="idle"&&(Te="idle",I&&I(),xr())},cancel:()=>{$e!==null&&Pt($e),xr()},complete:()=>{Te="finished"},sample:Ot=>(Pe=0,Pt(Ot))};return Wt}function Cae(e){let t;return()=>(t===void 0&&(t=e()),t)}const kae=Cae(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Eae=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Yb=10,Tae=2e4,Aae=(e,t)=>t.type==="spring"||e==="backgroundColor"||!i6(t.ease);function Iae(e,t,{onUpdate:r,onComplete:n,...o}){if(!(kae()&&Eae.has(t)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let y=!1,s,k;const I=()=>{k=new Promise(W=>{s=W})};I();let{keyframes:D,duration:N=300,ease:U,times:q}=o;if(Aae(t,o)){const W=J1({...o,repeat:0,delay:0});let K={done:!1,value:D[0]};const he=[];let de=0;for(;!K.done&&de<Tae;)K=W.sample(de),he.push(K.value),de+=Yb;q=void 0,D=he,N=de-Yb,U="linear"}const Z=Foe(e.owner.current,t,D,{...o,duration:N,ease:U,times:q});o.syncStart&&(Z.startTime=uo.isProcessing?uo.timestamp:document.timeline?document.timeline.currentTime:performance.now());const ae=()=>Z.cancel(),ve=()=>{qi.update(ae),s(),I()};return Z.onfinish=()=>{e.set(Boe(D,o)),n&&n(),ve()},{then(W,K){return k.then(W,K)},attachTimeline(W){return Z.timeline=W,Z.onfinish=null,Is},get time(){return pu(Z.currentTime||0)},set time(W){Z.currentTime=jh(W)},get speed(){return Z.playbackRate},set speed(W){Z.playbackRate=W},get duration(){return pu(N)},play:()=>{y||(Z.play(),wu(ae))},pause:()=>Z.pause(),stop:()=>{if(y=!0,Z.playState==="idle")return;const{currentTime:W}=Z;if(W){const K=J1({...o,autoplay:!1});e.setWithVelocity(K.sample(W-Yb).value,K.sample(W).value,Yb)}ve()},complete:()=>Z.finish(),cancel:ve}}function Pae({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const o=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Is,pause:Is,stop:Is,then:f=>(f(),Promise.resolve()),cancel:Is,complete:Is});return t?J1({keyframes:[0,1],duration:0,delay:t,onComplete:o}):o()}const Rae={type:"spring",stiffness:500,damping:25,restSpeed:10},Mae=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Lae={type:"keyframes",duration:.8},Oae={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dae=(e,{keyframes:t})=>t.length>2?Lae:jf.has(e)?e.startsWith("scale")?Mae(t[1]):Rae:Oae,GT=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zh.test(t)||t==="0")&&!t.startsWith("url(")),zae=new Set(["brightness","contrast","saturate","opacity"]);function Nae(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(dS)||[];if(!n)return e;const o=r.replace(n,"");let f=zae.has(t)?1:0;return n!==r&&(f*=100),t+"("+f+o+")"}const jae=/([a-z-]*)\(.*?\)/g,XT={...Zh,getAnimatableNone:e=>{const t=e.match(jae);return t?t.map(Nae).join(" "):e}},Fae={...$$,color:Ho,backgroundColor:Ho,outlineColor:Ho,fill:Ho,stroke:Ho,borderColor:Ho,borderTopColor:Ho,borderRightColor:Ho,borderBottomColor:Ho,borderLeftColor:Ho,filter:XT,WebkitFilter:XT},NP=e=>Fae[e];function A6(e,t){let r=NP(e);return r!==XT&&(r=Zh),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const I6=e=>/^0[^.\s]+$/.test(e);function Bae(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||I6(e)}function $ae(e,t,r,n){const o=GT(t,r);let f;Array.isArray(r)?f=[...r]:f=[null,r];const y=n.from!==void 0?n.from:e.get();let s;const k=[];for(let I=0;I<f.length;I++)f[I]===null&&(f[I]=I===0?y:f[I-1]),Bae(f[I])&&k.push(I),typeof f[I]=="string"&&f[I]!=="none"&&f[I]!=="0"&&(s=f[I]);if(o&&k.length&&s)for(let I=0;I<k.length;I++){const D=k[I];f[D]=A6(t,s)}return f}function Uae({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:o,repeat:f,repeatType:y,repeatDelay:s,from:k,elapsed:I,...D}){return!!Object.keys(D).length}function P6(e,t){return e[t]||e.default||e}const jP=(e,t,r,n={})=>o=>{const f=P6(n,e)||{},y=f.delay||n.delay||0;let{elapsed:s=0}=n;s=s-jh(y);const k=$ae(t,e,r,f),I=k[0],D=k[k.length-1],N=GT(e,I),U=GT(e,D);let q={keyframes:k,velocity:t.getVelocity(),ease:"easeOut",...f,delay:-s,onUpdate:Z=>{t.set(Z),f.onUpdate&&f.onUpdate(Z)},onComplete:()=>{o(),f.onComplete&&f.onComplete()}};if(Uae(f)||(q={...q,...Dae(e,q)}),q.duration&&(q.duration=jh(q.duration)),q.repeatDelay&&(q.repeatDelay=jh(q.repeatDelay)),!N||!U||joe.current||f.type===!1)return Pae(q);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const Z=Iae(t,e,q);if(Z)return Z}return J1(q)};function Q1(e){return!!(va(e)&&e.add)}const R6=e=>/^\-?\d*\.?\d+$/.test(e);function FP(e,t){e.indexOf(t)===-1&&e.push(t)}function BP(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class $P{constructor(){this.subscriptions=[]}add(t){return FP(this.subscriptions,t),()=>BP(this.subscriptions,t)}notify(t,r,n){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,r,n);else for(let f=0;f<o;f++){const y=this.subscriptions[f];y&&y(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vae=e=>!isNaN(parseFloat(e));class Hae{constructor(t,r={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,o=!0)=>{this.prev=this.current,this.current=n;const{delta:f,timestamp:y}=uo;this.lastUpdated!==y&&(this.timeDelta=f,this.lastUpdated=y,qi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>qi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Vae(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new $P);const n=this.events[t].add(r);return t==="change"?()=>{n(),qi.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?k6(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bm(e,t){return new Hae(e,t)}const M6=e=>t=>t.test(e),Wae={test:e=>e==="auto",parse:e=>e},L6=[Ff,mn,wc,ch,Kse,Zse,Wae],Hy=e=>L6.find(M6(e)),Gae=[...L6,Ho,Zh],Xae=e=>Gae.find(M6(e));function qae(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Bm(r))}function Yae(e,t){const r=pS(e,t);let{transitionEnd:n={},transition:o={},...f}=r?e.makeTargetAnimatable(r,!1):{};f={...f,...n};for(const y in f){const s=hoe(f[y]);qae(e,y,s)}}function Zae(e,t,r){var n,o;const f=Object.keys(t).filter(s=>!e.hasValue(s)),y=f.length;if(y)for(let s=0;s<y;s++){const k=f[s],I=t[k];let D=null;Array.isArray(I)&&(D=I[0]),D===null&&(D=(o=(n=r[k])!==null&&n!==void 0?n:e.readValue(k))!==null&&o!==void 0?o:t[k]),D!=null&&(typeof D=="string"&&(R6(D)||I6(D))?D=parseFloat(D):!Xae(D)&&Zh.test(I)&&(D=A6(k,I)),e.addValue(k,Bm(D,{owner:e})),r[k]===void 0&&(r[k]=D),D!==null&&e.setBaseTarget(k,D))}}function Kae(e,t){return t?(t[e]||t.default||t).from:void 0}function Jae(e,t,r){const n={};for(const o in e){const f=Kae(o,t);if(f!==void 0)n[o]=f;else{const y=r.getValue(o);y&&(n[o]=y.get())}}return n}function Qae({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function O6(e,t,{delay:r=0,transitionOverride:n,type:o}={}){let{transition:f=e.getDefaultTransition(),transitionEnd:y,...s}=e.makeTargetAnimatable(t);const k=e.getValue("willChange");n&&(f=n);const I=[],D=o&&e.animationState&&e.animationState.getState()[o];for(const N in s){const U=e.getValue(N),q=s[N];if(!U||q===void 0||D&&Qae(D,N))continue;const Z={delay:r,elapsed:0,...f};if(window.HandoffAppearAnimations&&!U.hasAnimated){const ve=e.getProps()[zoe];ve&&(Z.elapsed=window.HandoffAppearAnimations(ve,N,U,qi),Z.syncStart=!0)}U.start(jP(N,U,q,e.shouldReduceMotion&&jf.has(N)?{type:!1}:Z));const ae=U.animation;Q1(k)&&(k.add(N),ae.then(()=>k.remove(N))),I.push(ae)}return y&&Promise.all(I).then(()=>{y&&Yae(e,y)}),I}function qT(e,t,r={}){const n=pS(e,t,r.custom);let{transition:o=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(o=r.transitionOverride);const f=n?()=>Promise.all(O6(e,n,r)):()=>Promise.resolve(),y=e.variantChildren&&e.variantChildren.size?(k=0)=>{const{delayChildren:I=0,staggerChildren:D,staggerDirection:N}=o;return ele(e,t,I+k,D,N,r)}:()=>Promise.resolve(),{when:s}=o;if(s){const[k,I]=s==="beforeChildren"?[f,y]:[y,f];return k().then(()=>I())}else return Promise.all([f(),y(r.delay)])}function ele(e,t,r=0,n=0,o=1,f){const y=[],s=(e.variantChildren.size-1)*n,k=o===1?(I=0)=>I*n:(I=0)=>s-I*n;return Array.from(e.variantChildren).sort(tle).forEach((I,D)=>{I.notify("AnimationStart",t),y.push(qT(I,t,{...f,delay:r+k(D)}).then(()=>I.notify("AnimationComplete",t)))}),Promise.all(y)}function tle(e,t){return e.sortNodePosition(t)}function rle(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const o=t.map(f=>qT(e,f,r));n=Promise.all(o)}else if(typeof t=="string")n=qT(e,t,r);else{const o=typeof t=="function"?pS(e,t,r.custom):t;n=Promise.all(O6(e,o,r))}return n.then(()=>e.notify("AnimationComplete",t))}const nle=[...wP].reverse(),ile=wP.length;function sle(e){return t=>Promise.all(t.map(({animation:r,options:n})=>rle(e,r,n)))}function ole(e){let t=sle(e);const r=lle();let n=!0;const o=(k,I)=>{const D=pS(e,I);if(D){const{transition:N,transitionEnd:U,...q}=D;k={...k,...q,...U}}return k};function f(k){t=k(e)}function y(k,I){const D=e.getProps(),N=e.getVariantContext(!0)||{},U=[],q=new Set;let Z={},ae=1/0;for(let ie=0;ie<ile;ie++){const W=nle[ie],K=r[W],he=D[W]!==void 0?D[W]:N[W],de=hv(he),Ae=W===I?K.isActive:null;Ae===!1&&(ae=ie);let Te=he===N[W]&&he!==D[W]&&de;if(Te&&n&&e.manuallyAnimateOnMount&&(Te=!1),K.protectedKeys={...Z},!K.isActive&&Ae===null||!he&&!K.prevProp||uS(he)||typeof he=="boolean")continue;const Ue=ale(K.prevProp,he);let Pe=Ue||W===I&&K.isActive&&!Te&&de||ie>ae&&de;const $e=Array.isArray(he)?he:[he];let Ve=$e.reduce(o,{});Ae===!1&&(Ve={});const{prevResolvedValues:Fe={}}=K,Ye={...Fe,...Ve},ft=Pt=>{Pe=!0,q.delete(Pt),K.needsAnimating[Pt]=!0};for(const Pt in Ye){const or=Ve[Pt],xr=Fe[Pt];Z.hasOwnProperty(Pt)||(or!==xr?Y1(or)&&Y1(xr)?!r6(or,xr)||Ue?ft(Pt):K.protectedKeys[Pt]=!0:or!==void 0?ft(Pt):q.add(Pt):or!==void 0&&q.has(Pt)?ft(Pt):K.protectedKeys[Pt]=!0)}K.prevProp=he,K.prevResolvedValues=Ve,K.isActive&&(Z={...Z,...Ve}),n&&e.blockInitialAnimation&&(Pe=!1),Pe&&!Te&&U.push(...$e.map(Pt=>({animation:Pt,options:{type:W,...k}})))}if(q.size){const ie={};q.forEach(W=>{const K=e.getBaseTarget(W);K!==void 0&&(ie[W]=K)}),U.push({animation:ie})}let ve=!!U.length;return n&&D.initial===!1&&!e.manuallyAnimateOnMount&&(ve=!1),n=!1,ve?t(U):Promise.resolve()}function s(k,I,D){var N;if(r[k].isActive===I)return Promise.resolve();(N=e.variantChildren)===null||N===void 0||N.forEach(q=>{var Z;return(Z=q.animationState)===null||Z===void 0?void 0:Z.setActive(k,I)}),r[k].isActive=I;const U=y(D,k);for(const q in r)r[q].protectedKeys={};return U}return{animateChanges:y,setActive:s,setAnimateFunction:f,getState:()=>r}}function ale(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!r6(t,e):!1}function $d(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lle(){return{animate:$d(!0),whileInView:$d(),whileHover:$d(),whileTap:$d(),whileDrag:$d(),whileFocus:$d(),exit:$d()}}class cle extends od{constructor(t){super(t),t.animationState||(t.animationState=ole(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),uS(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let ule=0;class hle extends od{constructor(){super(...arguments),this.id=ule++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const f=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&f.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const dle={animation:{Feature:cle},exit:{Feature:hle}},T3=(e,t)=>Math.abs(e-t);function fle(e,t){const r=T3(e.x,t.x),n=T3(e.y,t.y);return Math.sqrt(r**2+n**2)}class D6{constructor(t,r,{transformPagePoint:n}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=Dk(this.lastMoveEventInfo,this.history),D=this.startEvent!==null,N=fle(I.offset,{x:0,y:0})>=3;if(!D&&!N)return;const{point:U}=I,{timestamp:q}=uo;this.history.push({...U,timestamp:q});const{onStart:Z,onMove:ae}=this.handlers;D||(Z&&Z(this.lastMoveEvent,I),this.startEvent=this.lastMoveEvent),ae&&ae(this.lastMoveEvent,I)},this.handlePointerMove=(I,D)=>{this.lastMoveEvent=I,this.lastMoveEventInfo=Ok(D,this.transformPagePoint),qi.update(this.updatePoint,!0)},this.handlePointerUp=(I,D)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:N,onSessionEnd:U}=this.handlers,q=Dk(I.type==="pointercancel"?this.lastMoveEventInfo:Ok(D,this.transformPagePoint),this.history);this.startEvent&&N&&N(I,q),U&&U(I,q)},!K$(t))return;this.handlers=r,this.transformPagePoint=n;const o=fS(t),f=Ok(o,this.transformPagePoint),{point:y}=f,{timestamp:s}=uo;this.history=[{...y,timestamp:s}];const{onSessionStart:k}=r;k&&k(t,Dk(f,this.history)),this.removeListeners=Nh(fu(window,"pointermove",this.handlePointerMove),fu(window,"pointerup",this.handlePointerUp),fu(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wu(this.updatePoint)}}function Ok(e,t){return t?{point:t(e.point)}:e}function A3(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Dk({point:e},t){return{point:e,delta:A3(e,z6(t)),offset:A3(e,ple(t)),velocity:mle(t,.1)}}function ple(e){return e[0]}function z6(e){return e[e.length-1]}function mle(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const o=z6(e);for(;r>=0&&(n=e[r],!(o.timestamp-n.timestamp>jh(t)));)r--;if(!n)return{x:0,y:0};const f=pu(o.timestamp-n.timestamp);if(f===0)return{x:0,y:0};const y={x:(o.x-n.x)/f,y:(o.y-n.y)/f};return y.x===1/0&&(y.x=0),y.y===1/0&&(y.y=0),y}function Na(e){return e.max-e.min}function YT(e,t=0,r=.01){return Math.abs(e-t)<=r}function I3(e,t,r,n=.5){e.origin=n,e.originPoint=bs(t.min,t.max,e.origin),e.scale=Na(r)/Na(t),(YT(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=bs(r.min,r.max,e.origin)-e.originPoint,(YT(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Px(e,t,r,n){I3(e.x,t.x,r.x,n?n.originX:void 0),I3(e.y,t.y,r.y,n?n.originY:void 0)}function P3(e,t,r){e.min=r.min+t.min,e.max=e.min+Na(t)}function gle(e,t,r){P3(e.x,t.x,r.x),P3(e.y,t.y,r.y)}function R3(e,t,r){e.min=t.min-r.min,e.max=e.min+Na(t)}function Rx(e,t,r){R3(e.x,t.x,r.x),R3(e.y,t.y,r.y)}function yle(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?bs(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?bs(r,e,n.max):Math.min(e,r)),e}function M3(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function xle(e,{top:t,left:r,bottom:n,right:o}){return{x:M3(e.x,r,o),y:M3(e.y,t,n)}}function L3(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function vle(e,t){return{x:L3(e.x,t.x),y:L3(e.y,t.y)}}function ble(e,t){let r=.5;const n=Na(e),o=Na(t);return o>n?r=fv(t.min,t.max-n,e.min):n>o&&(r=fv(e.min,e.max-o,t.min)),Yh(0,1,r)}function _le(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const ZT=.35;function wle(e=ZT){return e===!1?e=0:e===!0&&(e=ZT),{x:O3(e,"left","right"),y:O3(e,"top","bottom")}}function O3(e,t,r){return{min:D3(e,t),max:D3(e,r)}}function D3(e,t){return typeof e=="number"?e:e[t]||0}const z3=()=>({translate:0,scale:1,origin:0,originPoint:0}),hm=()=>({x:z3(),y:z3()}),N3=()=>({min:0,max:0}),Us=()=>({x:N3(),y:N3()});function sc(e){return[e("x"),e("y")]}function N6({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Sle({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Cle(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function zk(e){return e===void 0||e===1}function KT({scale:e,scaleX:t,scaleY:r}){return!zk(e)||!zk(t)||!zk(r)}function Wd(e){return KT(e)||j6(e)||e.z||e.rotate||e.rotateX||e.rotateY}function j6(e){return j3(e.x)||j3(e.y)}function j3(e){return e&&e!=="0%"}function ew(e,t,r){const n=e-r,o=t*n;return r+o}function F3(e,t,r,n,o){return o!==void 0&&(e=ew(e,o,n)),ew(e,r,n)+t}function JT(e,t=0,r=1,n,o){e.min=F3(e.min,t,r,n,o),e.max=F3(e.max,t,r,n,o)}function F6(e,{x:t,y:r}){JT(e.x,t.translate,t.scale,t.originPoint),JT(e.y,r.translate,r.scale,r.originPoint)}function kle(e,t,r,n=!1){const o=r.length;if(!o)return;t.x=t.y=1;let f,y;for(let s=0;s<o;s++){f=r[s],y=f.projectionDelta;const k=f.instance;k&&k.style&&k.style.display==="contents"||(n&&f.options.layoutScroll&&f.scroll&&f!==f.root&&dm(e,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),y&&(t.x*=y.x.scale,t.y*=y.y.scale,F6(e,y)),n&&Wd(f.latestValues)&&dm(e,f.latestValues))}t.x=B3(t.x),t.y=B3(t.y)}function B3(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ph(e,t){e.min=e.min+t,e.max=e.max+t}function $3(e,t,[r,n,o]){const f=t[o]!==void 0?t[o]:.5,y=bs(e.min,e.max,f);JT(e,t[r],t[n],y,t.scale)}const Ele=["x","scaleX","originX"],Tle=["y","scaleY","originY"];function dm(e,t){$3(e.x,t,Ele),$3(e.y,t,Tle)}function B6(e,t){return N6(Cle(e.getBoundingClientRect(),t))}function Ale(e,t,r){const n=B6(e,r),{scroll:o}=t;return o&&(ph(n.x,o.offset.x),ph(n.y,o.offset.y)),n}const Ile=new WeakMap;class Ple{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Us(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const o=k=>{this.stopAnimation(),r&&this.snapToCursor(fS(k,"page").point)},f=(k,I)=>{const{drag:D,dragPropagation:N,onDragStart:U}=this.getProps();if(D&&!N&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Q$(D),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sc(Z=>{let ae=this.getAxisMotionValue(Z).get()||0;if(wc.test(ae)){const{projection:ve}=this.visualElement;if(ve&&ve.layout){const ie=ve.layout.layoutBox[Z];ie&&(ae=Na(ie)*(parseFloat(ae)/100))}}this.originPoint[Z]=ae}),U&&qi.update(()=>U(k,I),!1,!0);const{animationState:q}=this.visualElement;q&&q.setActive("whileDrag",!0)},y=(k,I)=>{const{dragPropagation:D,dragDirectionLock:N,onDirectionLock:U,onDrag:q}=this.getProps();if(!D&&!this.openGlobalLock)return;const{offset:Z}=I;if(N&&this.currentDirection===null){this.currentDirection=Rle(Z),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",I.point,Z),this.updateAxis("y",I.point,Z),this.visualElement.render(),q&&q(k,I)},s=(k,I)=>this.stop(k,I);this.panSession=new D6(t,{onSessionStart:o,onStart:f,onMove:y,onSessionEnd:s},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:f}=this.getProps();f&&qi.update(()=>f(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:o}=this.getProps();if(!n||!Zb(t,o,this.currentDirection))return;const f=this.getAxisMotionValue(t);let y=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(y=yle(y,this.constraints[t],this.elastic[t])),f.set(y)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),{layout:n}=this.visualElement.projection||{},o=this.constraints;t&&cm(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=xle(n.layoutBox,t):this.constraints=!1,this.elastic=wle(r),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&sc(f=>{this.getAxisMotionValue(f)&&(this.constraints[f]=_le(n.layoutBox[f],this.constraints[f]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!cm(t))return!1;const n=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const f=Ale(n,o.root,this.visualElement.getTransformPagePoint());let y=vle(o.layout.layoutBox,f);if(r){const s=r(Sle(y));this.hasMutatedConstraints=!!s,s&&(y=N6(s))}return y}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:o,dragTransition:f,dragSnapToOrigin:y,onDragTransitionEnd:s}=this.getProps(),k=this.constraints||{},I=sc(D=>{if(!Zb(D,r,this.currentDirection))return;let N=k&&k[D]||{};y&&(N={min:0,max:0});const U=o?200:1e6,q=o?40:1e7,Z={type:"inertia",velocity:n?t[D]:0,bounceStiffness:U,bounceDamping:q,timeConstant:750,restDelta:1,restSpeed:10,...f,...N};return this.startAxisValueAnimation(D,Z)});return Promise.all(I).then(s)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(jP(t,n,0,r))}stopAnimation(){sc(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),o=n[r];return o||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){sc(r=>{const{drag:n}=this.getProps();if(!Zb(r,n,this.currentDirection))return;const{projection:o}=this.visualElement,f=this.getAxisMotionValue(r);if(o&&o.layout){const{min:y,max:s}=o.layout.layoutBox[r];f.set(t[r]-bs(y,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!cm(r)||!n||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};sc(y=>{const s=this.getAxisMotionValue(y);if(s){const k=s.get();o[y]=ble({min:k,max:k},this.constraints[y])}});const{transformTemplate:f}=this.visualElement.getProps();this.visualElement.current.style.transform=f?f({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),sc(y=>{if(!Zb(y,t,null))return;const s=this.getAxisMotionValue(y),{min:k,max:I}=this.constraints[y];s.set(bs(k,I,o[y]))})}addListeners(){if(!this.visualElement.current)return;Ile.set(this.visualElement,this);const t=this.visualElement.current,r=fu(t,"pointerdown",k=>{const{drag:I,dragListener:D=!0}=this.getProps();I&&D&&this.start(k)}),n=()=>{const{dragConstraints:k}=this.getProps();cm(k)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,f=o.addEventListener("measure",n);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),n();const y=au(window,"resize",()=>this.scalePositionWithinConstraints()),s=o.addEventListener("didUpdate",({delta:k,hasLayoutChanged:I})=>{this.isDragging&&I&&(sc(D=>{const N=this.getAxisMotionValue(D);N&&(this.originPoint[D]+=k[D].translate,N.set(N.get()+k[D].translate))}),this.visualElement.render())});return()=>{y(),r(),f(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:o=!1,dragConstraints:f=!1,dragElastic:y=ZT,dragMomentum:s=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:o,dragConstraints:f,dragElastic:y,dragMomentum:s}}}function Zb(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Rle(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Mle extends od{constructor(t){super(t),this.removeGroupControls=Is,this.removeListeners=Is,this.controls=new Ple(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Is}unmount(){this.removeGroupControls(),this.removeListeners()}}const U3=e=>(t,r)=>{e&&qi.update(()=>e(t,r))};class Lle extends od{constructor(){super(...arguments),this.removePointerDownListener=Is}onPointerDown(t){this.session=new D6(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:o}=this.node.getProps();return{onSessionStart:U3(t),onStart:U3(r),onMove:n,onEnd:(f,y)=>{delete this.session,o&&qi.update(()=>o(f,y))}}}mount(){this.removePointerDownListener=fu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Ole(){const e=le.useContext(Nv);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,o=le.useId();return le.useEffect(()=>n(o),[]),!t&&r?[!1,()=>r&&r(o)]:[!0]}function Dle(){return zle(le.useContext(Nv))}function zle(e){return e===null?!0:e.isPresent}const U_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function V3(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Wy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(mn.test(e))e=parseFloat(e);else return e;const r=V3(e,t.target.x),n=V3(e,t.target.y);return`${r}% ${n}%`}},Nle={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,o=Zh.parse(e);if(o.length>5)return n;const f=Zh.createTransformer(e),y=typeof o[0]!="number"?1:0,s=r.x.scale*t.x,k=r.y.scale*t.y;o[0+y]/=s,o[1+y]/=k;const I=bs(s,k,.5);return typeof o[2+y]=="number"&&(o[2+y]/=I),typeof o[3+y]=="number"&&(o[3+y]/=I),f(o)}};class jle extends xn.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:o}=this.props,{projection:f}=t;Vse(Fle),f&&(r.group&&r.group.add(f),n&&n.register&&o&&n.register(f),f.root.didUpdate(),f.addEventListener("animationComplete",()=>{this.safeToRemove()}),f.setOptions({...f.options,onExitComplete:()=>this.safeToRemove()})),U_.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:o,isPresent:f}=this.props,y=n.projection;return y&&(y.isPresent=f,o||t.layoutDependency!==r||r===void 0?y.willUpdate():this.safeToRemove(),t.isPresent!==f&&(f?y.promote():y.relegate()||qi.postRender(()=>{const s=y.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(o),n&&n.deregister&&n.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $6(e){const[t,r]=Ole(),n=le.useContext(CP);return xn.createElement(jle,{...e,layoutGroup:n,switchLayoutGroup:le.useContext(z$),isPresent:t,safeToRemove:r})}const Fle={borderRadius:{...Wy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wy,borderTopRightRadius:Wy,borderBottomLeftRadius:Wy,borderBottomRightRadius:Wy,boxShadow:Nle},U6=["TopLeft","TopRight","BottomLeft","BottomRight"],Ble=U6.length,H3=e=>typeof e=="string"?parseFloat(e):e,W3=e=>typeof e=="number"||mn.test(e);function $le(e,t,r,n,o,f){o?(e.opacity=bs(0,r.opacity!==void 0?r.opacity:1,Ule(n)),e.opacityExit=bs(t.opacity!==void 0?t.opacity:1,0,Vle(n))):f&&(e.opacity=bs(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let y=0;y<Ble;y++){const s=`border${U6[y]}Radius`;let k=G3(t,s),I=G3(r,s);if(k===void 0&&I===void 0)continue;k||(k=0),I||(I=0),k===0||I===0||W3(k)===W3(I)?(e[s]=Math.max(bs(H3(k),H3(I),n),0),(wc.test(I)||wc.test(k))&&(e[s]+="%")):e[s]=I}(t.rotate||r.rotate)&&(e.rotate=bs(t.rotate||0,r.rotate||0,n))}function G3(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Ule=V6(0,.5,OP),Vle=V6(.5,.95,Is);function V6(e,t,r){return n=>n<e?0:n>t?1:r(fv(e,t,n))}function X3(e,t){e.min=t.min,e.max=t.max}function Ja(e,t){X3(e.x,t.x),X3(e.y,t.y)}function q3(e,t,r,n,o){return e-=t,e=ew(e,1/r,n),o!==void 0&&(e=ew(e,1/o,n)),e}function Hle(e,t=0,r=1,n=.5,o,f=e,y=e){if(wc.test(t)&&(t=parseFloat(t),t=bs(y.min,y.max,t/100)-y.min),typeof t!="number")return;let s=bs(f.min,f.max,n);e===f&&(s-=t),e.min=q3(e.min,t,r,s,o),e.max=q3(e.max,t,r,s,o)}function Y3(e,t,[r,n,o],f,y){Hle(e,t[r],t[n],t[o],t.scale,f,y)}const Wle=["x","scaleX","originX"],Gle=["y","scaleY","originY"];function Z3(e,t,r,n){Y3(e.x,t,Wle,r?r.x:void 0,n?n.x:void 0),Y3(e.y,t,Gle,r?r.y:void 0,n?n.y:void 0)}function K3(e){return e.translate===0&&e.scale===1}function H6(e){return K3(e.x)&&K3(e.y)}function Xle(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function W6(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function J3(e){return Na(e.x)/Na(e.y)}class qle{constructor(){this.members=[]}add(t){FP(this.members,t),t.scheduleRender()}remove(t){if(BP(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(o=>t===o);if(r===0)return!1;let n;for(let o=r;o>=0;o--){const f=this.members[o];if(f.isPresent!==!1){n=f;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Q3(e,t,r){let n="";const o=e.x.translate/t.x,f=e.y.translate/t.y;if((o||f)&&(n=`translate3d(${o}px, ${f}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:k,rotateX:I,rotateY:D}=r;k&&(n+=`rotate(${k}deg) `),I&&(n+=`rotateX(${I}deg) `),D&&(n+=`rotateY(${D}deg) `)}const y=e.x.scale*t.x,s=e.y.scale*t.y;return(y!==1||s!==1)&&(n+=`scale(${y}, ${s})`),n||"none"}const Yle=(e,t)=>e.depth-t.depth;class Zle{constructor(){this.children=[],this.isDirty=!1}add(t){FP(this.children,t),this.isDirty=!0}remove(t){BP(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Yle),this.isDirty=!1,this.children.forEach(t)}}function Kle(e,t){const r=performance.now(),n=({timestamp:o})=>{const f=o-r;f>=t&&(wu(n),e(f-t))};return qi.read(n,!0),()=>wu(n)}function Jle(e){window.MotionDebug&&window.MotionDebug.record(e)}function Qle(e){return e instanceof SVGElement&&e.tagName!=="svg"}function ece(e,t,r){const n=va(e)?e:Bm(e);return n.start(jP("",n,t,r)),n.animation}const eN=["","X","Y","Z"],tN=1e3;let tce=0;const Gd={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function G6({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:o}){return class{constructor(y={},s=t==null?void 0:t()){this.id=tce++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{Gd.totalNodes=Gd.resolvedTargetDeltas=Gd.recalculatedProjection=0,this.nodes.forEach(ice),this.nodes.forEach(cce),this.nodes.forEach(uce),this.nodes.forEach(sce),Jle(Gd)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=y,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let k=0;k<this.path.length;k++)this.path[k].shouldResetTransform=!0;this.root===this&&(this.nodes=new Zle)}addEventListener(y,s){return this.eventHandlers.has(y)||this.eventHandlers.set(y,new $P),this.eventHandlers.get(y).add(s)}notifyListeners(y,...s){const k=this.eventHandlers.get(y);k&&k.notify(...s)}hasListeners(y){return this.eventHandlers.has(y)}mount(y,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qle(y),this.instance=y;const{layoutId:k,layout:I,visualElement:D}=this.options;if(D&&!D.current&&D.mount(y),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(I||k)&&(this.isLayoutDirty=!0),e){let N;const U=()=>this.root.updateBlockedByResize=!1;e(y,()=>{this.root.updateBlockedByResize=!0,N&&N(),N=Kle(U,250),U_.hasAnimatedSinceResize&&(U_.hasAnimatedSinceResize=!1,this.nodes.forEach(nN))})}k&&this.root.registerSharedNode(k,this),this.options.animate!==!1&&D&&(k||I)&&this.addEventListener("didUpdate",({delta:N,hasLayoutChanged:U,hasRelativeTargetChanged:q,layout:Z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ae=this.options.transition||D.getDefaultTransition()||mce,{onLayoutAnimationStart:ve,onLayoutAnimationComplete:ie}=D.getProps(),W=!this.targetLayout||!W6(this.targetLayout,Z)||q,K=!U&&q;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||K||U&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(N,K);const he={...P6(ae,"layout"),onPlay:ve,onComplete:ie};(D.shouldReduceMotion||this.options.layoutRoot)&&(he.delay=0,he.type=!1),this.startAnimation(he)}else U||nN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const y=this.getStack();y&&y.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hce),this.animationId++)}getTransformTemplate(){const{visualElement:y}=this.options;return y&&y.getProps().transformTemplate}willUpdate(y=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let D=0;D<this.path.length;D++){const N=this.path[D];N.shouldResetTransform=!0,N.updateScroll("snapshot"),N.options.layoutRoot&&N.willUpdate(!1)}const{layoutId:s,layout:k}=this.options;if(s===void 0&&!k)return;const I=this.getTransformTemplate();this.prevTransformTemplateValue=I?I(this.latestValues,""):void 0,this.updateSnapshot(),y&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rN);return}this.isUpdating||this.nodes.forEach(ace),this.isUpdating=!1,this.nodes.forEach(lce),this.nodes.forEach(rce),this.nodes.forEach(nce),this.clearAllSnapshots();const s=performance.now();uo.delta=Yh(0,1e3/60,s-uo.timestamp),uo.timestamp=s,uo.isProcessing=!0,Ek.update.process(uo),Ek.preRender.process(uo),Ek.render.process(uo),uo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(oce),this.sharedNodes.forEach(dce)}scheduleUpdateProjection(){qi.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){qi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let k=0;k<this.path.length;k++)this.path[k].updateScroll();const y=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Us(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,y?y.layoutBox:void 0)}updateScroll(y="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===y&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:y,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const y=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!H6(this.projectionDelta),k=this.getTransformTemplate(),I=k?k(this.latestValues,""):void 0,D=I!==this.prevTransformTemplateValue;y&&(s||Wd(this.latestValues)||D)&&(o(this.instance,I),this.shouldResetTransform=!1,this.scheduleRender())}measure(y=!0){const s=this.measurePageBox();let k=this.removeElementScroll(s);return y&&(k=this.removeTransform(k)),gce(k),{animationId:this.root.animationId,measuredBox:s,layoutBox:k,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:y}=this.options;if(!y)return Us();const s=y.measureViewportBox(),{scroll:k}=this.root;return k&&(ph(s.x,k.offset.x),ph(s.y,k.offset.y)),s}removeElementScroll(y){const s=Us();Ja(s,y);for(let k=0;k<this.path.length;k++){const I=this.path[k],{scroll:D,options:N}=I;if(I!==this.root&&D&&N.layoutScroll){if(D.isRoot){Ja(s,y);const{scroll:U}=this.root;U&&(ph(s.x,-U.offset.x),ph(s.y,-U.offset.y))}ph(s.x,D.offset.x),ph(s.y,D.offset.y)}}return s}applyTransform(y,s=!1){const k=Us();Ja(k,y);for(let I=0;I<this.path.length;I++){const D=this.path[I];!s&&D.options.layoutScroll&&D.scroll&&D!==D.root&&dm(k,{x:-D.scroll.offset.x,y:-D.scroll.offset.y}),Wd(D.latestValues)&&dm(k,D.latestValues)}return Wd(this.latestValues)&&dm(k,this.latestValues),k}removeTransform(y){const s=Us();Ja(s,y);for(let k=0;k<this.path.length;k++){const I=this.path[k];if(!I.instance||!Wd(I.latestValues))continue;KT(I.latestValues)&&I.updateSnapshot();const D=Us(),N=I.measurePageBox();Ja(D,N),Z3(s,I.latestValues,I.snapshot?I.snapshot.layoutBox:void 0,D)}return Wd(this.latestValues)&&Z3(s,this.latestValues),s}setTargetDelta(y){this.targetDelta=y,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(y){this.options={...this.options,...y,crossfade:y.crossfade!==void 0?y.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==uo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(y=!1){var s;const k=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=k.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=k.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=k.isSharedProjectionDirty);const I=!!this.resumingFrom||this!==k;if(!(y||I&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:N,layoutId:U}=this.options;if(!(!this.layout||!(N||U))){if(this.resolvedRelativeTargetAt=uo.timestamp,!this.targetDelta&&!this.relativeTarget){const q=this.getClosestProjectingParent();q&&q.layout&&this.animationProgress!==1?(this.relativeParent=q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Us(),this.relativeTargetOrigin=Us(),Rx(this.relativeTargetOrigin,this.layout.layoutBox,q.layout.layoutBox),Ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Us(),this.targetWithTransforms=Us()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gle(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ja(this.target,this.layout.layoutBox),F6(this.target,this.targetDelta)):Ja(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const q=this.getClosestProjectingParent();q&&!!q.resumingFrom==!!this.resumingFrom&&!q.options.layoutScroll&&q.target&&this.animationProgress!==1?(this.relativeParent=q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Us(),this.relativeTargetOrigin=Us(),Rx(this.relativeTargetOrigin,this.target,q.target),Ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gd.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||KT(this.parent.latestValues)||j6(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const s=this.getLead(),k=!!this.resumingFrom||this!==s;let I=!0;if((this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty)&&(I=!1),k&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(I=!1),this.resolvedRelativeTargetAt===uo.timestamp&&(I=!1),I)return;const{layout:D,layoutId:N}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(D||N))return;Ja(this.layoutCorrected,this.layout.layoutBox);const U=this.treeScale.x,q=this.treeScale.y;kle(this.layoutCorrected,this.treeScale,this.path,k),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox);const{target:Z}=s;if(!Z){this.projectionTransform&&(this.projectionDelta=hm(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=hm(),this.projectionDeltaWithTransform=hm());const ae=this.projectionTransform;Px(this.projectionDelta,this.layoutCorrected,Z,this.latestValues),this.projectionTransform=Q3(this.projectionDelta,this.treeScale),(this.projectionTransform!==ae||this.treeScale.x!==U||this.treeScale.y!==q)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Z)),Gd.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(y=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),y){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(y,s=!1){const k=this.snapshot,I=k?k.latestValues:{},D={...this.latestValues},N=hm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const U=Us(),q=k?k.source:void 0,Z=this.layout?this.layout.source:void 0,ae=q!==Z,ve=this.getStack(),ie=!ve||ve.members.length<=1,W=!!(ae&&!ie&&this.options.crossfade===!0&&!this.path.some(pce));this.animationProgress=0;let K;this.mixTargetDelta=he=>{const de=he/1e3;iN(N.x,y.x,de),iN(N.y,y.y,de),this.setTargetDelta(N),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rx(U,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fce(this.relativeTarget,this.relativeTargetOrigin,U,de),K&&Xle(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=Us()),Ja(K,this.relativeTarget)),ae&&(this.animationValues=D,$le(D,I,this.latestValues,de,W,ie)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=de},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(y){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qi.update(()=>{U_.hasAnimatedSinceResize=!0,this.currentAnimation=ece(0,tN,{...y,onUpdate:s=>{this.mixTargetDelta(s),y.onUpdate&&y.onUpdate(s)},onComplete:()=>{y.onComplete&&y.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const y=this.getStack();y&&y.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const y=this.getLead();let{targetWithTransforms:s,target:k,layout:I,latestValues:D}=y;if(!(!s||!k||!I)){if(this!==y&&this.layout&&I&&X6(this.options.animationType,this.layout.layoutBox,I.layoutBox)){k=this.target||Us();const N=Na(this.layout.layoutBox.x);k.x.min=y.target.x.min,k.x.max=k.x.min+N;const U=Na(this.layout.layoutBox.y);k.y.min=y.target.y.min,k.y.max=k.y.min+U}Ja(s,k),dm(s,D),Px(this.projectionDeltaWithTransform,this.layoutCorrected,s,D)}}registerSharedNode(y,s){this.sharedNodes.has(y)||this.sharedNodes.set(y,new qle),this.sharedNodes.get(y).add(s);const I=s.options.initialPromotionConfig;s.promote({transition:I?I.transition:void 0,preserveFollowOpacity:I&&I.shouldPreserveFollowOpacity?I.shouldPreserveFollowOpacity(s):void 0})}isLead(){const y=this.getStack();return y?y.lead===this:!0}getLead(){var y;const{layoutId:s}=this.options;return s?((y=this.getStack())===null||y===void 0?void 0:y.lead)||this:this}getPrevLead(){var y;const{layoutId:s}=this.options;return s?(y=this.getStack())===null||y===void 0?void 0:y.prevLead:void 0}getStack(){const{layoutId:y}=this.options;if(y)return this.root.sharedNodes.get(y)}promote({needsReset:y,transition:s,preserveFollowOpacity:k}={}){const I=this.getStack();I&&I.promote(this,k),y&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const y=this.getStack();return y?y.relegate(this):!1}resetRotation(){const{visualElement:y}=this.options;if(!y)return;let s=!1;const{latestValues:k}=y;if((k.rotate||k.rotateX||k.rotateY||k.rotateZ)&&(s=!0),!s)return;const I={};for(let D=0;D<eN.length;D++){const N="rotate"+eN[D];k[N]&&(I[N]=k[N],y.setStaticValue(N,0))}y.render();for(const D in I)y.setStaticValue(D,I[D]);y.scheduleRender()}getProjectionStyles(y={}){var s,k;const I={};if(!this.instance||this.isSVG)return I;if(this.isVisible)I.visibility="";else return{visibility:"hidden"};const D=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,I.opacity="",I.pointerEvents=$_(y.pointerEvents)||"",I.transform=D?D(this.latestValues,""):"none",I;const N=this.getLead();if(!this.projectionDelta||!this.layout||!N.target){const ae={};return this.options.layoutId&&(ae.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ae.pointerEvents=$_(y.pointerEvents)||""),this.hasProjected&&!Wd(this.latestValues)&&(ae.transform=D?D({},""):"none",this.hasProjected=!1),ae}const U=N.animationValues||N.latestValues;this.applyTransformsToTarget(),I.transform=Q3(this.projectionDeltaWithTransform,this.treeScale,U),D&&(I.transform=D(U,I.transform));const{x:q,y:Z}=this.projectionDelta;I.transformOrigin=`${q.origin*100}% ${Z.origin*100}% 0`,N.animationValues?I.opacity=N===this?(k=(s=U.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&k!==void 0?k:1:this.preserveOpacity?this.latestValues.opacity:U.opacityExit:I.opacity=N===this?U.opacity!==void 0?U.opacity:"":U.opacityExit!==void 0?U.opacityExit:0;for(const ae in X1){if(U[ae]===void 0)continue;const{correct:ve,applyTo:ie}=X1[ae],W=I.transform==="none"?U[ae]:ve(U[ae],N);if(ie){const K=ie.length;for(let he=0;he<K;he++)I[ie[he]]=W}else I[ae]=W}return this.options.layoutId&&(I.pointerEvents=N===this?$_(y.pointerEvents)||"":"none"),I}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(y=>{var s;return(s=y.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(rN),this.root.sharedNodes.clear()}}}function rce(e){e.updateLayout()}function nce(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:o}=e.layout,{animationType:f}=e.options,y=r.source!==e.layout.source;f==="size"?sc(N=>{const U=y?r.measuredBox[N]:r.layoutBox[N],q=Na(U);U.min=n[N].min,U.max=U.min+q}):X6(f,r.layoutBox,n)&&sc(N=>{const U=y?r.measuredBox[N]:r.layoutBox[N],q=Na(n[N]);U.max=U.min+q,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[N].max=e.relativeTarget[N].min+q)});const s=hm();Px(s,n,r.layoutBox);const k=hm();y?Px(k,e.applyTransform(o,!0),r.measuredBox):Px(k,n,r.layoutBox);const I=!H6(s);let D=!1;if(!e.resumeFrom){const N=e.getClosestProjectingParent();if(N&&!N.resumeFrom){const{snapshot:U,layout:q}=N;if(U&&q){const Z=Us();Rx(Z,r.layoutBox,U.layoutBox);const ae=Us();Rx(ae,n,q.layoutBox),W6(Z,ae)||(D=!0),N.options.layoutRoot&&(e.relativeTarget=ae,e.relativeTargetOrigin=Z,e.relativeParent=N)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:k,layoutDelta:s,hasLayoutChanged:I,hasRelativeTargetChanged:D})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function ice(e){Gd.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function sce(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function oce(e){e.clearSnapshot()}function rN(e){e.clearMeasurements()}function ace(e){e.isLayoutDirty=!1}function lce(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nN(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function cce(e){e.resolveTargetDelta()}function uce(e){e.calcProjection()}function hce(e){e.resetRotation()}function dce(e){e.removeLeadSnapshot()}function iN(e,t,r){e.translate=bs(t.translate,0,r),e.scale=bs(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function sN(e,t,r,n){e.min=bs(t.min,r.min,n),e.max=bs(t.max,r.max,n)}function fce(e,t,r,n){sN(e.x,t.x,r.x,n),sN(e.y,t.y,r.y,n)}function pce(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const mce={duration:.45,ease:[.4,0,.1,1]},oN=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),aN=oN("applewebkit/")&&!oN("chrome/")?Math.round:Is;function lN(e){e.min=aN(e.min),e.max=aN(e.max)}function gce(e){lN(e.x),lN(e.y)}function X6(e,t,r){return e==="position"||e==="preserve-aspect"&&!YT(J3(t),J3(r),.2)}const yce=G6({attachResizeListener:(e,t)=>au(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nk={current:void 0},q6=G6({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Nk.current){const e=new yce({});e.mount(window),e.setOptions({layoutScroll:!0}),Nk.current=e}return Nk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),xce={pan:{Feature:Lle},drag:{Feature:Mle,ProjectionNode:q6,MeasureLayout:$6}},vce=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function bce(e){const t=vce.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function QT(e,t,r=1){const[n,o]=bce(e);if(!n)return;const f=window.getComputedStyle(t).getPropertyValue(n);if(f){const y=f.trim();return R6(y)?parseFloat(y):y}else return UT(o)?QT(o,t,r+1):o}function _ce(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(o=>{const f=o.get();if(!UT(f))return;const y=QT(f,n);y&&o.set(y)});for(const o in t){const f=t[o];if(!UT(f))continue;const y=QT(f,n);y&&(t[o]=y,r||(r={}),r[o]===void 0&&(r[o]=f))}return{target:t,transitionEnd:r}}const wce=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Y6=e=>wce.has(e),Sce=e=>Object.keys(e).some(Y6),cN=e=>e===Ff||e===mn,uN=(e,t)=>parseFloat(e.split(", ")[t]),hN=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const o=n.match(/^matrix3d\((.+)\)$/);if(o)return uN(o[1],t);{const f=n.match(/^matrix\((.+)\)$/);return f?uN(f[1],e):0}},Cce=new Set(["x","y","z"]),kce=jv.filter(e=>!Cce.has(e));function Ece(e){const t=[];return kce.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const $m={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:hN(4,13),y:hN(5,14)};$m.translateX=$m.x;$m.translateY=$m.y;const Tce=(e,t,r)=>{const n=t.measureViewportBox(),o=t.current,f=getComputedStyle(o),{display:y}=f,s={};y==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(I=>{s[I]=$m[I](n,f)}),t.render();const k=t.measureViewportBox();return r.forEach(I=>{const D=t.getValue(I);D&&D.jump(s[I]),e[I]=$m[I](k,f)}),e},Ace=(e,t,r={},n={})=>{t={...t},n={...n};const o=Object.keys(t).filter(Y6);let f=[],y=!1;const s=[];if(o.forEach(k=>{const I=e.getValue(k);if(!e.hasValue(k))return;let D=r[k],N=Hy(D);const U=t[k];let q;if(Y1(U)){const Z=U.length,ae=U[0]===null?1:0;D=U[ae],N=Hy(D);for(let ve=ae;ve<Z&&U[ve]!==null;ve++)q?LP(Hy(U[ve])===q):q=Hy(U[ve])}else q=Hy(U);if(N!==q)if(cN(N)&&cN(q)){const Z=I.get();typeof Z=="string"&&I.set(parseFloat(Z)),typeof U=="string"?t[k]=parseFloat(U):Array.isArray(U)&&q===mn&&(t[k]=U.map(parseFloat))}else N!=null&&N.transform&&(q!=null&&q.transform)&&(D===0||U===0)?D===0?I.set(q.transform(D)):t[k]=N.transform(U):(y||(f=Ece(e),y=!0),s.push(k),n[k]=n[k]!==void 0?n[k]:t[k],I.jump(U))}),s.length){const k=s.indexOf("height")>=0?window.pageYOffset:null,I=Tce(t,e,s);return f.length&&f.forEach(([D,N])=>{e.getValue(D).set(N)}),e.render(),cS&&k!==null&&window.scrollTo({top:k}),{target:I,transitionEnd:n}}else return{target:t,transitionEnd:n}};function Ice(e,t,r,n){return Sce(t)?Ace(e,t,r,n):{target:t,transitionEnd:n}}const Pce=(e,t,r,n)=>{const o=_ce(e,t,n);return t=o.target,n=o.transitionEnd,Ice(e,t,r,n)},eA={current:null},Z6={current:!1};function Rce(){if(Z6.current=!0,!!cS)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eA.current=e.matches;e.addListener(t),t()}else eA.current=!1}function Mce(e,t,r){const{willChange:n}=t;for(const o in t){const f=t[o],y=r[o];if(va(f))e.addValue(o,f),Q1(n)&&n.add(o);else if(va(y))e.addValue(o,Bm(f,{owner:e})),Q1(n)&&n.remove(o);else if(y!==f)if(e.hasValue(o)){const s=e.getValue(o);!s.hasAnimated&&s.set(f)}else{const s=e.getStaticValue(o);e.addValue(o,Bm(s!==void 0?s:f,{owner:e}))}}for(const o in r)t[o]===void 0&&e.removeValue(o);return t}const dN=new WeakMap,K6=Object.keys(dv),Lce=K6.length,fN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Oce=SP.length;class Dce{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:o,visualState:f},y={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>qi.render(this.render,!1,!0);const{latestValues:s,renderState:k}=f;this.latestValues=s,this.baseTarget={...s},this.initialValues=r.initial?{...s}:{},this.renderState=k,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=y,this.isControllingVariants=hS(r),this.isVariantNode=D$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:I,...D}=this.scrapeMotionValuesFromProps(r,{});for(const N in D){const U=D[N];s[N]!==void 0&&va(U)&&(U.set(s[N],!1),Q1(I)&&I.add(N))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,dN.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Z6.current||Rce(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:eA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dN.delete(this.current),this.projection&&this.projection.unmount(),wu(this.notifyUpdate),wu(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=jf.has(t),o=r.on("change",y=>{this.latestValues[t]=y,this.props.onUpdate&&qi.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),f=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{o(),f()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,o,f){let y,s;for(let k=0;k<Lce;k++){const I=K6[k],{isEnabled:D,Feature:N,ProjectionNode:U,MeasureLayout:q}=dv[I];U&&(y=U),D(r)&&(!this.features[I]&&N&&(this.features[I]=new N(this)),q&&(s=q))}if(!this.projection&&y){this.projection=new y(this.latestValues,this.parent&&this.parent.projection);const{layoutId:k,layout:I,drag:D,dragConstraints:N,layoutScroll:U,layoutRoot:q}=r;this.projection.setOptions({layoutId:k,layout:I,alwaysMeasureLayout:!!D||N&&cm(N),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof I=="string"?I:"both",initialPromotionConfig:f,layoutScroll:U,layoutRoot:q})}return s}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Us()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<fN.length;n++){const o=fN[n];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const f=t["on"+o];f&&(this.propEventSubscriptions[o]=this.on(o,f))}this.prevMotionValues=Mce(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Oce;n++){const o=SP[n],f=this.props[o];(hv(f)||f===!1)&&(r[o]=f)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Bm(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,o=typeof n=="string"||typeof n=="object"?(r=MP(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&o!==void 0)return o;const f=this.getBaseTargetFromProps(this.props,t);return f!==void 0&&!va(f)?f:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new $P),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class J6 extends Dce{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:o},f){let y=Jae(n,t||{},this);if(o&&(r&&(r=o(r)),n&&(n=o(n)),y&&(y=o(y))),f){Zae(this,n,y);const s=Pce(this,n,y,r);r=s.transitionEnd,n=s.target}return{transition:t,transitionEnd:r,...n}}}function zce(e){return window.getComputedStyle(e)}class Nce extends J6{readValueFromInstance(t,r){if(jf.has(r)){const n=NP(r);return n&&n.default||0}else{const n=zce(t),o=(F$(r)?n.getPropertyValue(r):n[r])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:r}){return B6(t,r)}build(t,r,n,o){EP(t,r,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,r){return RP(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;va(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,o){W$(t,r,n,o)}}class jce extends J6{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(jf.has(r)){const n=NP(r);return n&&n.default||0}return r=G$.has(r)?r:PP(r),t.getAttribute(r)}measureInstanceViewportBox(){return Us()}scrapeMotionValuesFromProps(t,r){return q$(t,r)}build(t,r,n,o){AP(t,r,n,this.isSVGTag,o.transformTemplate)}renderInstance(t,r,n,o){X$(t,r,n,o)}mount(t){this.isSVGTag=IP(t.tagName),super.mount(t)}}const Fce=(e,t)=>kP(e)?new jce(t,{enableHardwareAcceleration:!1}):new Nce(t,{enableHardwareAcceleration:!0}),Bce={layout:{ProjectionNode:q6,MeasureLayout:$6}},$ce={...dle,...Moe,...xce,...Bce},Uce=$se((e,t)=>voe(e,t,$ce,Fce));function Q6(){const e=le.useRef(!1);return _P(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Vce(){const e=Q6(),[t,r]=le.useState(0),n=le.useCallback(()=>{e.current&&r(t+1)},[t]);return[le.useCallback(()=>qi.postRender(n),[n]),t]}class Hce extends le.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Wce({children:e,isPresent:t}){const r=le.useId(),n=le.useRef(null),o=le.useRef({width:0,height:0,top:0,left:0});return le.useInsertionEffect(()=>{const{width:f,height:y,top:s,left:k}=o.current;if(t||!n.current||!f||!y)return;n.current.dataset.motionPopId=r;const I=document.createElement("style");return document.head.appendChild(I),I.sheet&&I.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${y}px !important;
            top: ${s}px !important;
            left: ${k}px !important;
          }
        `),()=>{document.head.removeChild(I)}},[t]),le.createElement(Hce,{isPresent:t,childRef:n,sizeRef:o},le.cloneElement(e,{ref:n}))}const jk=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:o,presenceAffectsLayout:f,mode:y})=>{const s=Y$(Gce),k=le.useId(),I=le.useMemo(()=>({id:k,initial:t,isPresent:r,custom:o,onExitComplete:D=>{s.set(D,!0);for(const N of s.values())if(!N)return;n&&n()},register:D=>(s.set(D,!1),()=>s.delete(D))}),f?void 0:[r]);return le.useMemo(()=>{s.forEach((D,N)=>s.set(N,!1))},[r]),le.useEffect(()=>{!r&&!s.size&&n&&n()},[r]),y==="popLayout"&&(e=le.createElement(Wce,{isPresent:r},e)),le.createElement(Nv.Provider,{value:I},e)};function Gce(){return new Map}function Xce(e){return le.useEffect(()=>()=>e(),[])}const Vp=e=>e.key||"";function qce(e,t){e.forEach(r=>{const n=Vp(r);t.set(n,r)})}function Yce(e){const t=[];return le.Children.forEach(e,r=>{le.isValidElement(r)&&t.push(r)}),t}const Zce=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:o,presenceAffectsLayout:f=!0,mode:y="sync"})=>{const s=le.useContext(CP).forceRender||Vce()[0],k=Q6(),I=Yce(e);let D=I;const N=le.useRef(new Map).current,U=le.useRef(D),q=le.useRef(new Map).current,Z=le.useRef(!0);if(_P(()=>{Z.current=!1,qce(I,q),U.current=D}),Xce(()=>{Z.current=!0,q.clear(),N.clear()}),Z.current)return le.createElement(le.Fragment,null,D.map(W=>le.createElement(jk,{key:Vp(W),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:f,mode:y},W)));D=[...D];const ae=U.current.map(Vp),ve=I.map(Vp),ie=ae.length;for(let W=0;W<ie;W++){const K=ae[W];ve.indexOf(K)===-1&&!N.has(K)&&N.set(K,void 0)}return y==="wait"&&N.size&&(D=[]),N.forEach((W,K)=>{if(ve.indexOf(K)!==-1)return;const he=q.get(K);if(!he)return;const de=ae.indexOf(K);let Ae=W;if(!Ae){const Te=()=>{q.delete(K),N.delete(K);const Ue=U.current.findIndex(Pe=>Pe.key===K);if(U.current.splice(Ue,1),!N.size){if(U.current=I,k.current===!1)return;s(),n&&n()}};Ae=le.createElement(jk,{key:Vp(he),isPresent:!1,onExitComplete:Te,custom:t,presenceAffectsLayout:f,mode:y},he),N.set(K,Ae)}D.splice(de,0,Ae)}),D=D.map(W=>{const K=W.key;return N.has(K)?W:le.createElement(jk,{key:Vp(W),isPresent:!0,presenceAffectsLayout:f,mode:y},W)}),le.createElement(le.Fragment,null,N.size?D:D.map(W=>le.cloneElement(W)))};var Kce={initial:e=>{const{position:t}=e,r=["top","bottom"].includes(t)?"y":"x";let n=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(n=1),{opacity:0,[r]:n*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},eU=le.memo(e=>{const{id:t,message:r,onCloseComplete:n,onRequestRemove:o,requestClose:f=!1,position:y="bottom",duration:s=5e3,containerStyle:k,motionVariants:I=Kce,toastSpacing:D="0.5rem"}=e,[N,U]=le.useState(s),q=Dle();c3(()=>{q||n==null||n()},[q]),c3(()=>{U(s)},[s]);const Z=()=>U(null),ae=()=>U(s),ve=()=>{q&&o()};le.useEffect(()=>{q&&f&&o()},[q,f,o]),Mse(ve,N);const ie=le.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:D,...k}),[k,D]),W=le.useMemo(()=>Ise(y),[y]);return A.jsx(Uce.div,{layout:!0,className:"chakra-toast",variants:I,initial:"initial",animate:"animate",exit:"exit",onHoverStart:Z,onHoverEnd:ae,custom:{position:y},style:W,children:A.jsx(Fl.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:ie,children:Th(r,{id:t,onClose:ve})})})});eU.displayName="ToastComponent";var pN={path:A.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[A.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),A.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),A.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Uv=cg((e,t)=>{const{as:r,viewBox:n,color:o="currentColor",focusable:f=!1,children:y,className:s,__css:k,...I}=e,D=lg("chakra-icon",s),N=bP("Icon",e),U={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:o,...k,...N},q={ref:t,focusable:f,className:D,__css:U},Z=n??pN.viewBox;if(r&&typeof r!="string")return A.jsx(Fl.svg,{as:r,...q,...I});const ae=y??pN.path;return A.jsx(Fl.svg,{verticalAlign:"middle",viewBox:Z,...q,...I,children:ae})});Uv.displayName="Icon";function Jce(e){return A.jsx(Uv,{viewBox:"0 0 24 24",...e,children:A.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function Qce(e){return A.jsx(Uv,{viewBox:"0 0 24 24",...e,children:A.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function mN(e){return A.jsx(Uv,{viewBox:"0 0 24 24",...e,children:A.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var eue=JZ({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),tU=cg((e,t)=>{const r=bP("Spinner",e),{label:n="Loading...",thickness:o="2px",speed:f="0.45s",emptyColor:y="transparent",className:s,...k}=pP(e),I=lg("chakra-spinner",s),D={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:o,borderBottomColor:y,borderLeftColor:y,animation:`${eue} ${f} linear infinite`,...r};return A.jsx(Fl.div,{ref:t,__css:D,className:I,...k,children:n&&A.jsx(Fl.span,{srOnly:!0,children:n})})});tU.displayName="Spinner";var[tue,UP]=Dv({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[rue,VP]=Dv({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),rU={info:{icon:Qce,colorScheme:"blue"},warning:{icon:mN,colorScheme:"orange"},success:{icon:Jce,colorScheme:"green"},error:{icon:mN,colorScheme:"red"},loading:{icon:tU,colorScheme:"blue"}};function nue(e){return rU[e].colorScheme}function iue(e){return rU[e].icon}var nU=cg(function(t,r){const n=VP(),{status:o}=UP(),f={display:"inline",...n.description};return A.jsx(Fl.div,{ref:r,"data-status":o,...t,className:lg("chakra-alert__desc",t.className),__css:f})});nU.displayName="AlertDescription";function iU(e){const{status:t}=UP(),r=iue(t),n=VP(),o=t==="loading"?n.spinner:n.icon;return A.jsx(Fl.span,{display:"inherit","data-status":t,...e,className:lg("chakra-alert__icon",e.className),__css:o,children:e.children||A.jsx(r,{h:"100%",w:"100%"})})}iU.displayName="AlertIcon";var sU=cg(function(t,r){const n=VP(),{status:o}=UP();return A.jsx(Fl.div,{ref:r,"data-status":o,...t,className:lg("chakra-alert__title",t.className),__css:n.title})});sU.displayName="AlertTitle";var oU=cg(function(t,r){var n;const{status:o="info",addRole:f=!0,...y}=pP(t),s=(n=t.colorScheme)!=null?n:nue(o),k=lse("Alert",{...t,colorScheme:s}),I={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...k.container};return A.jsx(tue,{value:{status:o},children:A.jsx(rue,{value:k,children:A.jsx(Fl.div,{"data-status":o,role:f?"alert":void 0,ref:r,...y,className:lg("chakra-alert",t.className),__css:I})})})});oU.displayName="Alert";function sue(e){return A.jsx(Uv,{focusable:"false","aria-hidden":!0,...e,children:A.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var aU=cg(function(t,r){const n=bP("CloseButton",t),{children:o,isDisabled:f,__css:y,...s}=pP(t),k={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return A.jsx(Fl.button,{type:"button","aria-label":"Close",ref:r,disabled:f,__css:{...k,...n,...y},...s,children:o||A.jsx(sue,{width:"1em",height:"1em"})})});aU.displayName="CloseButton";var oue={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Mx=aue(oue);function aue(e){let t=e;const r=new Set,n=o=>{t=o(t),r.forEach(f=>f())};return{getState:()=>t,subscribe:o=>(r.add(o),()=>{n(()=>e),r.delete(o)}),removeToast:(o,f)=>{n(y=>({...y,[f]:y[f].filter(s=>s.id!=o)}))},notify:(o,f)=>{const y=lue(o,f),{position:s,id:k}=y;return n(I=>{var D,N;const q=s.includes("top")?[y,...(D=I[s])!=null?D:[]]:[...(N=I[s])!=null?N:[],y];return{...I,[s]:q}}),k},update:(o,f)=>{o&&n(y=>{const s={...y},{position:k,index:I}=l3(s,o);return k&&I!==-1&&(s[k][I]={...s[k][I],...f,message:uue(f)}),s})},closeAll:({positions:o}={})=>{n(f=>(o??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((k,I)=>(k[I]=f[I].map(D=>({...D,requestClose:!0})),k),{...f}))},close:o=>{n(f=>{const y=M$(f,o);return y?{...f,[y]:f[y].map(s=>s.id==o?{...s,requestClose:!0}:s)}:f})},isActive:o=>!!l3(Mx.getState(),o).position}}var gN=0;function lue(e,t={}){var r,n;gN+=1;const o=(r=t.id)!=null?r:gN,f=(n=t.position)!=null?n:"bottom";return{id:o,message:e,position:f,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Mx.removeToast(String(o),f),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var cue=e=>{const{status:t,variant:r="solid",id:n,title:o,isClosable:f,onClose:y,description:s,colorScheme:k,icon:I}=e,D=n?{root:`toast-${n}`,title:`toast-${n}-title`,description:`toast-${n}-description`}:void 0;return A.jsxs(oU,{addRole:!1,status:t,variant:r,id:D==null?void 0:D.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:k,children:[A.jsx(iU,{children:I}),A.jsxs(Fl.div,{flex:"1",maxWidth:"100%",children:[o&&A.jsx(sU,{id:D==null?void 0:D.title,children:o}),s&&A.jsx(nU,{id:D==null?void 0:D.description,display:"block",children:s})]}),f&&A.jsx(aU,{size:"sm",onClick:y,position:"absolute",insetEnd:1,top:1})]})};function uue(e={}){const{render:t,toastComponent:r=cue}=e;return o=>typeof t=="function"?t({...o,...e}):A.jsx(r,{...o,...e})}var[hue,ITe]=Dv({name:"ToastOptionsContext",strict:!1}),due=e=>{const t=le.useSyncExternalStore(Mx.subscribe,Mx.getState,Mx.getState),{motionVariants:r,component:n=eU,portalProps:o}=e,y=Object.keys(t).map(s=>{const k=t[s];return A.jsx("div",{role:"region","aria-live":"polite","aria-label":"Notifications",id:`chakra-toast-manager-${s}`,style:Pse(s),children:A.jsx(Zce,{initial:!1,children:k.map(I=>A.jsx(n,{motionVariants:r,...I},I.id))})},s)});return A.jsx(nS,{...o,children:y})},fue=e=>function({children:r,theme:n=e,toastOptions:o,...f}){return A.jsxs(Tse,{theme:n,...f,children:[A.jsx(hue,{value:o==null?void 0:o.defaultOptions,children:r}),A.jsx(due,{...o})]})},pue=fue(Kie),lU={exports:{}},mue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gue=mue,yue=gue;function cU(){}function uU(){}uU.resetWarningCache=cU;var xue=function(){function e(n,o,f,y,s,k){if(k!==yue){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uU,resetWarningCache:cU};return r.PropTypes=r,r};lU.exports=xue();var vue=lU.exports,zo=function(){return zo=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},zo.apply(this,arguments)};function HP(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function tw(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,f;n<o;n++)(f||!(n in t))&&(f||(f=Array.prototype.slice.call(t,0,n)),f[n]=t[n]);return e.concat(f||Array.prototype.slice.call(t))}function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function bue(e,t){if(pv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pv(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ue(e){var t=bue(e,"string");return pv(t)==="symbol"?t:String(t)}function wue(e,t,r){return t=_ue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hU={exports:{}},dU={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Um=le;function Sue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cue=typeof Object.is=="function"?Object.is:Sue,kue=Um.useState,Eue=Um.useEffect,Tue=Um.useLayoutEffect,Aue=Um.useDebugValue;function Iue(e,t){var r=t(),n=kue({inst:{value:r,getSnapshot:t}}),o=n[0].inst,f=n[1];return Tue(function(){o.value=r,o.getSnapshot=t,Fk(o)&&f({inst:o})},[e,r,t]),Eue(function(){return Fk(o)&&f({inst:o}),e(function(){Fk(o)&&f({inst:o})})},[e]),Aue(r),r}function Fk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cue(e,r)}catch{return!0}}function Pue(e,t){return t()}var Rue=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Pue:Iue;dU.useSyncExternalStore=Um.useSyncExternalStore!==void 0?Um.useSyncExternalStore:Rue;hU.exports=dU;var Mue=hU.exports,fU={exports:{}},pU={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS=le,Lue=Mue;function Oue(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Due=typeof Object.is=="function"?Object.is:Oue,zue=Lue.useSyncExternalStore,Nue=mS.useRef,jue=mS.useEffect,Fue=mS.useMemo,Bue=mS.useDebugValue;pU.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var f=Nue(null);if(f.current===null){var y={hasValue:!1,value:null};f.current=y}else y=f.current;f=Fue(function(){function k(q){if(!I){if(I=!0,D=q,q=n(q),o!==void 0&&y.hasValue){var Z=y.value;if(o(Z,q))return N=Z}return N=q}if(Z=N,Due(D,q))return Z;var ae=n(q);return o!==void 0&&o(Z,ae)?Z:(D=q,N=ae)}var I=!1,D,N,U=r===void 0?null:r;return[function(){return k(t())},U===null?void 0:function(){return k(U())}]},[t,r,n,o]);var s=zue(e,f[0],f[1]);return jue(function(){y.hasValue=!0,y.value=s},[s]),Bue(s),s};fU.exports=pU;var $ue=fU.exports;function Uue(e){e()}let mU=Uue;const Vue=e=>mU=e,Hue=()=>mU,yN=Symbol.for("react-redux-context"),xN=typeof globalThis<"u"?globalThis:{};function Wue(){var e;if(!le.createContext)return{};const t=(e=xN[yN])!=null?e:xN[yN]=new Map;let r=t.get(le.createContext);return r||(r=le.createContext(null),t.set(le.createContext,r)),r}const Kh=Wue();function WP(e=Kh){return function(){return le.useContext(e)}}const gU=WP(),Gue=()=>{throw new Error("uSES not initialized!")};let yU=Gue;const Xue=e=>{yU=e},que=(e,t)=>e===t;function Yue(e=Kh){const t=e===Kh?gU:WP(e);return function(n,o={}){const{equalityFn:f=que,stabilityCheck:y=void 0,noopCheck:s=void 0}=typeof o=="function"?{equalityFn:o}:o,{store:k,subscription:I,getServerState:D,stabilityCheck:N,noopCheck:U}=t();le.useRef(!0);const q=le.useCallback({[n.name](ae){return n(ae)}}[n.name],[n,N,y]),Z=yU(I.addNestedSub,k.getState,D||k.getState,q,f);return le.useDebugValue(Z),Z}}const Yo=Yue();var Di={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GP=Symbol.for("react.element"),XP=Symbol.for("react.portal"),gS=Symbol.for("react.fragment"),yS=Symbol.for("react.strict_mode"),xS=Symbol.for("react.profiler"),vS=Symbol.for("react.provider"),bS=Symbol.for("react.context"),Zue=Symbol.for("react.server_context"),_S=Symbol.for("react.forward_ref"),wS=Symbol.for("react.suspense"),SS=Symbol.for("react.suspense_list"),CS=Symbol.for("react.memo"),kS=Symbol.for("react.lazy"),Kue=Symbol.for("react.offscreen"),xU;xU=Symbol.for("react.module.reference");function hl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case GP:switch(e=e.type,e){case gS:case xS:case yS:case wS:case SS:return e;default:switch(e=e&&e.$$typeof,e){case Zue:case bS:case _S:case kS:case CS:case vS:return e;default:return t}}case XP:return t}}}Di.ContextConsumer=bS;Di.ContextProvider=vS;Di.Element=GP;Di.ForwardRef=_S;Di.Fragment=gS;Di.Lazy=kS;Di.Memo=CS;Di.Portal=XP;Di.Profiler=xS;Di.StrictMode=yS;Di.Suspense=wS;Di.SuspenseList=SS;Di.isAsyncMode=function(){return!1};Di.isConcurrentMode=function(){return!1};Di.isContextConsumer=function(e){return hl(e)===bS};Di.isContextProvider=function(e){return hl(e)===vS};Di.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===GP};Di.isForwardRef=function(e){return hl(e)===_S};Di.isFragment=function(e){return hl(e)===gS};Di.isLazy=function(e){return hl(e)===kS};Di.isMemo=function(e){return hl(e)===CS};Di.isPortal=function(e){return hl(e)===XP};Di.isProfiler=function(e){return hl(e)===xS};Di.isStrictMode=function(e){return hl(e)===yS};Di.isSuspense=function(e){return hl(e)===wS};Di.isSuspenseList=function(e){return hl(e)===SS};Di.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===gS||e===xS||e===yS||e===wS||e===SS||e===Kue||typeof e=="object"&&e!==null&&(e.$$typeof===kS||e.$$typeof===CS||e.$$typeof===vS||e.$$typeof===bS||e.$$typeof===_S||e.$$typeof===xU||e.getModuleId!==void 0)};Di.typeOf=hl;function Jue(){const e=Hue();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],o=t;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0,f=r={callback:n,next:null,prev:r};return f.prev?f.prev.next=f:t=f,function(){!o||t===null||(o=!1,f.next?f.next.prev=f.prev:r=f.prev,f.prev?f.prev.next=f.next:t=f.next)}}}}const vN={notify(){},get:()=>[]};function Que(e,t){let r,n=vN,o=0,f=!1;function y(ae){D();const ve=n.subscribe(ae);let ie=!1;return()=>{ie||(ie=!0,ve(),N())}}function s(){n.notify()}function k(){Z.onStateChange&&Z.onStateChange()}function I(){return f}function D(){o++,r||(r=t?t.addNestedSub(k):e.subscribe(k),n=Jue())}function N(){o--,r&&o===0&&(r(),r=void 0,n.clear(),n=vN)}function U(){f||(f=!0,D())}function q(){f&&(f=!1,N())}const Z={addNestedSub:y,notifyNestedSubs:s,handleChangeWrapper:k,isSubscribed:I,trySubscribe:U,tryUnsubscribe:q,getListeners:()=>n};return Z}const ehe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",the=ehe?le.useLayoutEffect:le.useEffect;function rhe({store:e,context:t,children:r,serverState:n,stabilityCheck:o="once",noopCheck:f="once"}){const y=le.useMemo(()=>{const I=Que(e);return{store:e,subscription:I,getServerState:n?()=>n:void 0,stabilityCheck:o,noopCheck:f}},[e,n,o,f]),s=le.useMemo(()=>e.getState(),[e]);the(()=>{const{subscription:I}=y;return I.onStateChange=I.notifyNestedSubs,I.trySubscribe(),s!==e.getState()&&I.notifyNestedSubs(),()=>{I.tryUnsubscribe(),I.onStateChange=void 0}},[y,s]);const k=t||Kh;return le.createElement(k.Provider,{value:y},r)}function vU(e=Kh){const t=e===Kh?gU:WP(e);return function(){const{store:n}=t();return n}}const nhe=vU();function ihe(e=Kh){const t=e===Kh?nhe:vU(e);return function(){return t().dispatch}}const Va=ihe();Xue($ue.useSyncExternalStoreWithSelector);Vue(Fw.unstable_batchedUpdates);const nc=({component:e})=>{const t=Yo(r=>r.driver.loggedIn);return console.log(t),t?A.jsx(e,{}):A.jsx(og,{to:"/driver/login"})},bN=({component:e})=>{const t=Yo(r=>r.driver.loggedIn);return console.log(t),t?A.jsx(og,{to:"/driver/dashboard"}):A.jsx(e,{})},ws={login:"/driver/login",signUp:"/driver/signup",chekDriverExists:"/driver/check/driverExists",sendOtp:"/otp",verifyOtp:"/otp/verify",resetPasswordLink:"/driver/resetPasswordLink",resetPassword:"/driver/resetpassword",addPersonalInfo:"/driver/info/personal",addVehicleInfo:"/driver/info/vehicle",getCabs:"/driver/getCabs",available:"/driver/available",profie:"/driver/profile",updateProfile:"/driver/update/profile",vehicle:"/driver/vehicle",updateVehicle:"/driver/update/vehicle",getUserInfo:"/driver/getUser",getRideDetails:"/getridedata",getRideHistory:"/driver/history",rideHistory:"/driver/rideHistory",scheduleRideHistory:"/driver/scheduleRideHistory",currentRide:"/driver/currentRide",scheduleRidePending:"/driver/scheduleRidePending",scheduleRideNotification:"/driver/scheduleRideNotification",scheduleRideConfirmation:"/driver/scheduleRideConfirmation",sendOtpForStartingRide:"/driver/startingRideOtp",startScheduledRide:"/driver/startScheduledRide",dashboard:"/driver/dashboard"},Ti={login:"/driver/login",signup:"/driver/signup",resetPassword:"/driver/resetpassword",dashboard:"/driver/dashboard",addPersonalInfo:"/driver/info/personal",addVehicleInfo:"/driver/info/vehicle",driverProfile:"/driver/profile",vehicleInfo:"/driver/vehicle",rideconfirm:"/driver/rideconfirm",rideNotification:"/driver/notification/ride",scheduleRideNotification:"/driver/notification/scheduleRide",currentRide:"/driver/currentRide",rideOtpVerify:"/driver/rideOtpVerify",pendingScheduledRides:"/driver/scheduledRides",rideHistory:"/driver/history"},she="modulepreload",ohe=function(e){return"/"+e},_N={},ad=function(t,r,n){if(!r||r.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(r.map(f=>{if(f=ohe(f),f in _N)return;_N[f]=!0;const y=f.endsWith(".css"),s=y?'[rel="stylesheet"]':"";if(!!n)for(let D=o.length-1;D>=0;D--){const N=o[D];if(N.href===f&&(!y||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${s}`))return;const I=document.createElement("link");if(I.rel=y?"stylesheet":she,y||(I.as="script",I.crossOrigin=""),I.href=f,document.head.appendChild(I),y)return new Promise((D,N)=>{I.addEventListener("load",D),I.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})})).then(()=>t()).catch(f=>{const y=new Event("vite:preloadError",{cancelable:!0});if(y.payload=f,window.dispatchEvent(y),!y.defaultPrevented)throw f})};var ahe=function(t){return lhe(t)&&!che(t)};function lhe(e){return!!e&&typeof e=="object"}function che(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||dhe(e)}var uhe=typeof Symbol=="function"&&Symbol.for,hhe=uhe?Symbol.for("react.element"):60103;function dhe(e){return e.$$typeof===hhe}function fhe(e){return Array.isArray(e)?[]:{}}function rw(e,t){return t.clone!==!1&&t.isMergeableObject(e)?mv(fhe(e),e,t):e}function phe(e,t,r){return e.concat(t).map(function(n){return rw(n,r)})}function mhe(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(o){n[o]=rw(e[o],r)}),Object.keys(t).forEach(function(o){!r.isMergeableObject(t[o])||!e[o]?n[o]=rw(t[o],r):n[o]=mv(e[o],t[o],r)}),n}function mv(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||phe,r.isMergeableObject=r.isMergeableObject||ahe;var n=Array.isArray(t),o=Array.isArray(e),f=n===o;return f?n?r.arrayMerge(e,t,r):mhe(e,t,r):rw(t,r)}mv.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,o){return mv(n,o,r)},{})};var tA=mv,ghe=typeof global=="object"&&global&&global.Object===Object&&global;const bU=ghe;var yhe=typeof self=="object"&&self&&self.Object===Object&&self,xhe=bU||yhe||Function("return this")();const Ic=xhe;var vhe=Ic.Symbol;const Jh=vhe;var _U=Object.prototype,bhe=_U.hasOwnProperty,_he=_U.toString,Gy=Jh?Jh.toStringTag:void 0;function whe(e){var t=bhe.call(e,Gy),r=e[Gy];try{e[Gy]=void 0;var n=!0}catch{}var o=_he.call(e);return n&&(t?e[Gy]=r:delete e[Gy]),o}var She=Object.prototype,Che=She.toString;function khe(e){return Che.call(e)}var Ehe="[object Null]",The="[object Undefined]",wN=Jh?Jh.toStringTag:void 0;function Bf(e){return e==null?e===void 0?The:Ehe:wN&&wN in Object(e)?whe(e):khe(e)}function wU(e,t){return function(r){return e(t(r))}}var Ahe=wU(Object.getPrototypeOf,Object);const qP=Ahe;function $f(e){return e!=null&&typeof e=="object"}var Ihe="[object Object]",Phe=Function.prototype,Rhe=Object.prototype,SU=Phe.toString,Mhe=Rhe.hasOwnProperty,Lhe=SU.call(Object);function SN(e){if(!$f(e)||Bf(e)!=Ihe)return!1;var t=qP(e);if(t===null)return!0;var r=Mhe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&SU.call(r)==Lhe}var CN=Array.isArray,kN=Object.keys,Ohe=Object.prototype.hasOwnProperty,Dhe=typeof Element<"u";function rA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var r=CN(e),n=CN(t),o,f,y;if(r&&n){if(f=e.length,f!=t.length)return!1;for(o=f;o--!==0;)if(!rA(e[o],t[o]))return!1;return!0}if(r!=n)return!1;var s=e instanceof Date,k=t instanceof Date;if(s!=k)return!1;if(s&&k)return e.getTime()==t.getTime();var I=e instanceof RegExp,D=t instanceof RegExp;if(I!=D)return!1;if(I&&D)return e.toString()==t.toString();var N=kN(e);if(f=N.length,f!==kN(t).length)return!1;for(o=f;o--!==0;)if(!Ohe.call(t,N[o]))return!1;if(Dhe&&e instanceof Element&&t instanceof Element)return e===t;for(o=f;o--!==0;)if(y=N[o],!(y==="_owner"&&e.$$typeof)&&!rA(e[y],t[y]))return!1;return!0}return e!==e&&t!==t}var zhe=function(t,r){try{return rA(t,r)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||n.number===-2146828260)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}};const Xd=Of(zhe);var Nhe=!0;function jhe(e,t){if(!Nhe){if(e)return;var r="Warning: "+t;typeof console<"u"&&console.warn(r);try{throw Error(r)}catch{}}}function Fhe(){this.__data__=[],this.size=0}function CU(e,t){return e===t||e!==e&&t!==t}function ES(e,t){for(var r=e.length;r--;)if(CU(e[r][0],t))return r;return-1}var Bhe=Array.prototype,$he=Bhe.splice;function Uhe(e){var t=this.__data__,r=ES(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$he.call(t,r,1),--this.size,!0}function Vhe(e){var t=this.__data__,r=ES(t,e);return r<0?void 0:t[r][1]}function Hhe(e){return ES(this.__data__,e)>-1}function Whe(e,t){var r=this.__data__,n=ES(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Eu(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eu.prototype.clear=Fhe;Eu.prototype.delete=Uhe;Eu.prototype.get=Vhe;Eu.prototype.has=Hhe;Eu.prototype.set=Whe;function Ghe(){this.__data__=new Eu,this.size=0}function Xhe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function qhe(e){return this.__data__.get(e)}function Yhe(e){return this.__data__.has(e)}function Vv(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zhe="[object AsyncFunction]",Khe="[object Function]",Jhe="[object GeneratorFunction]",Qhe="[object Proxy]";function kU(e){if(!Vv(e))return!1;var t=Bf(e);return t==Khe||t==Jhe||t==Zhe||t==Qhe}var ede=Ic["__core-js_shared__"];const Bk=ede;var EN=function(){var e=/[^.]+$/.exec(Bk&&Bk.keys&&Bk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function tde(e){return!!EN&&EN in e}var rde=Function.prototype,nde=rde.toString;function Uf(e){if(e!=null){try{return nde.call(e)}catch{}try{return e+""}catch{}}return""}var ide=/[\\^$.*+?()[\]{}|]/g,sde=/^\[object .+?Constructor\]$/,ode=Function.prototype,ade=Object.prototype,lde=ode.toString,cde=ade.hasOwnProperty,ude=RegExp("^"+lde.call(cde).replace(ide,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hde(e){if(!Vv(e)||tde(e))return!1;var t=kU(e)?ude:sde;return t.test(Uf(e))}function dde(e,t){return e==null?void 0:e[t]}function Vf(e,t){var r=dde(e,t);return hde(r)?r:void 0}var fde=Vf(Ic,"Map");const gv=fde;var pde=Vf(Object,"create");const yv=pde;function mde(){this.__data__=yv?yv(null):{},this.size=0}function gde(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yde="__lodash_hash_undefined__",xde=Object.prototype,vde=xde.hasOwnProperty;function bde(e){var t=this.__data__;if(yv){var r=t[e];return r===yde?void 0:r}return vde.call(t,e)?t[e]:void 0}var _de=Object.prototype,wde=_de.hasOwnProperty;function Sde(e){var t=this.__data__;return yv?t[e]!==void 0:wde.call(t,e)}var Cde="__lodash_hash_undefined__";function kde(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yv&&t===void 0?Cde:t,this}function Ef(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ef.prototype.clear=mde;Ef.prototype.delete=gde;Ef.prototype.get=bde;Ef.prototype.has=Sde;Ef.prototype.set=kde;function Ede(){this.size=0,this.__data__={hash:new Ef,map:new(gv||Eu),string:new Ef}}function Tde(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function TS(e,t){var r=e.__data__;return Tde(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ade(e){var t=TS(this,e).delete(e);return this.size-=t?1:0,t}function Ide(e){return TS(this,e).get(e)}function Pde(e){return TS(this,e).has(e)}function Rde(e,t){var r=TS(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ld(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ld.prototype.clear=Ede;ld.prototype.delete=Ade;ld.prototype.get=Ide;ld.prototype.has=Pde;ld.prototype.set=Rde;var Mde=200;function Lde(e,t){var r=this.__data__;if(r instanceof Eu){var n=r.__data__;if(!gv||n.length<Mde-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ld(n)}return r.set(e,t),this.size=r.size,this}function ug(e){var t=this.__data__=new Eu(e);this.size=t.size}ug.prototype.clear=Ghe;ug.prototype.delete=Xhe;ug.prototype.get=qhe;ug.prototype.has=Yhe;ug.prototype.set=Lde;function Ode(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Dde=function(){try{var e=Vf(Object,"defineProperty");return e({},"",{}),e}catch{}}();const TN=Dde;function EU(e,t,r){t=="__proto__"&&TN?TN(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zde=Object.prototype,Nde=zde.hasOwnProperty;function TU(e,t,r){var n=e[t];(!(Nde.call(e,t)&&CU(n,r))||r===void 0&&!(t in e))&&EU(e,t,r)}function AS(e,t,r,n){var o=!r;r||(r={});for(var f=-1,y=t.length;++f<y;){var s=t[f],k=n?n(r[s],e[s],s,r,e):void 0;k===void 0&&(k=e[s]),o?EU(r,s,k):TU(r,s,k)}return r}function jde(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Fde="[object Arguments]";function AN(e){return $f(e)&&Bf(e)==Fde}var AU=Object.prototype,Bde=AU.hasOwnProperty,$de=AU.propertyIsEnumerable,Ude=AN(function(){return arguments}())?AN:function(e){return $f(e)&&Bde.call(e,"callee")&&!$de.call(e,"callee")};const Vde=Ude;var Hde=Array.isArray;const Hv=Hde;function Wde(){return!1}var IU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,IN=IU&&typeof module=="object"&&module&&!module.nodeType&&module,Gde=IN&&IN.exports===IU,PN=Gde?Ic.Buffer:void 0,Xde=PN?PN.isBuffer:void 0,qde=Xde||Wde;const PU=qde;var Yde=9007199254740991,Zde=/^(?:0|[1-9]\d*)$/;function Kde(e,t){var r=typeof e;return t=t??Yde,!!t&&(r=="number"||r!="symbol"&&Zde.test(e))&&e>-1&&e%1==0&&e<t}var Jde=9007199254740991;function RU(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Jde}var Qde="[object Arguments]",efe="[object Array]",tfe="[object Boolean]",rfe="[object Date]",nfe="[object Error]",ife="[object Function]",sfe="[object Map]",ofe="[object Number]",afe="[object Object]",lfe="[object RegExp]",cfe="[object Set]",ufe="[object String]",hfe="[object WeakMap]",dfe="[object ArrayBuffer]",ffe="[object DataView]",pfe="[object Float32Array]",mfe="[object Float64Array]",gfe="[object Int8Array]",yfe="[object Int16Array]",xfe="[object Int32Array]",vfe="[object Uint8Array]",bfe="[object Uint8ClampedArray]",_fe="[object Uint16Array]",wfe="[object Uint32Array]",rs={};rs[pfe]=rs[mfe]=rs[gfe]=rs[yfe]=rs[xfe]=rs[vfe]=rs[bfe]=rs[_fe]=rs[wfe]=!0;rs[Qde]=rs[efe]=rs[dfe]=rs[tfe]=rs[ffe]=rs[rfe]=rs[nfe]=rs[ife]=rs[sfe]=rs[ofe]=rs[afe]=rs[lfe]=rs[cfe]=rs[ufe]=rs[hfe]=!1;function Sfe(e){return $f(e)&&RU(e.length)&&!!rs[Bf(e)]}function YP(e){return function(t){return e(t)}}var MU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lx=MU&&typeof module=="object"&&module&&!module.nodeType&&module,Cfe=Lx&&Lx.exports===MU,$k=Cfe&&bU.process,kfe=function(){try{var e=Lx&&Lx.require&&Lx.require("util").types;return e||$k&&$k.binding&&$k.binding("util")}catch{}}();const Vm=kfe;var RN=Vm&&Vm.isTypedArray,Efe=RN?YP(RN):Sfe;const Tfe=Efe;var Afe=Object.prototype,Ife=Afe.hasOwnProperty;function LU(e,t){var r=Hv(e),n=!r&&Vde(e),o=!r&&!n&&PU(e),f=!r&&!n&&!o&&Tfe(e),y=r||n||o||f,s=y?jde(e.length,String):[],k=s.length;for(var I in e)(t||Ife.call(e,I))&&!(y&&(I=="length"||o&&(I=="offset"||I=="parent")||f&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||Kde(I,k)))&&s.push(I);return s}var Pfe=Object.prototype;function ZP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Pfe;return e===r}var Rfe=wU(Object.keys,Object);const Mfe=Rfe;var Lfe=Object.prototype,Ofe=Lfe.hasOwnProperty;function Dfe(e){if(!ZP(e))return Mfe(e);var t=[];for(var r in Object(e))Ofe.call(e,r)&&r!="constructor"&&t.push(r);return t}function OU(e){return e!=null&&RU(e.length)&&!kU(e)}function KP(e){return OU(e)?LU(e):Dfe(e)}function zfe(e,t){return e&&AS(t,KP(t),e)}function Nfe(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var jfe=Object.prototype,Ffe=jfe.hasOwnProperty;function Bfe(e){if(!Vv(e))return Nfe(e);var t=ZP(e),r=[];for(var n in e)n=="constructor"&&(t||!Ffe.call(e,n))||r.push(n);return r}function JP(e){return OU(e)?LU(e,!0):Bfe(e)}function $fe(e,t){return e&&AS(t,JP(t),e)}var DU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,MN=DU&&typeof module=="object"&&module&&!module.nodeType&&module,Ufe=MN&&MN.exports===DU,LN=Ufe?Ic.Buffer:void 0,ON=LN?LN.allocUnsafe:void 0;function Vfe(e,t){if(t)return e.slice();var r=e.length,n=ON?ON(r):new e.constructor(r);return e.copy(n),n}function zU(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Hfe(e,t){for(var r=-1,n=e==null?0:e.length,o=0,f=[];++r<n;){var y=e[r];t(y,r,e)&&(f[o++]=y)}return f}function NU(){return[]}var Wfe=Object.prototype,Gfe=Wfe.propertyIsEnumerable,DN=Object.getOwnPropertySymbols,Xfe=DN?function(e){return e==null?[]:(e=Object(e),Hfe(DN(e),function(t){return Gfe.call(e,t)}))}:NU;const QP=Xfe;function qfe(e,t){return AS(e,QP(e),t)}function jU(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var Yfe=Object.getOwnPropertySymbols,Zfe=Yfe?function(e){for(var t=[];e;)jU(t,QP(e)),e=qP(e);return t}:NU;const FU=Zfe;function Kfe(e,t){return AS(e,FU(e),t)}function BU(e,t,r){var n=t(e);return Hv(e)?n:jU(n,r(e))}function Jfe(e){return BU(e,KP,QP)}function Qfe(e){return BU(e,JP,FU)}var epe=Vf(Ic,"DataView");const nA=epe;var tpe=Vf(Ic,"Promise");const iA=tpe;var rpe=Vf(Ic,"Set");const sA=rpe;var npe=Vf(Ic,"WeakMap");const oA=npe;var zN="[object Map]",ipe="[object Object]",NN="[object Promise]",jN="[object Set]",FN="[object WeakMap]",BN="[object DataView]",spe=Uf(nA),ope=Uf(gv),ape=Uf(iA),lpe=Uf(sA),cpe=Uf(oA),qd=Bf;(nA&&qd(new nA(new ArrayBuffer(1)))!=BN||gv&&qd(new gv)!=zN||iA&&qd(iA.resolve())!=NN||sA&&qd(new sA)!=jN||oA&&qd(new oA)!=FN)&&(qd=function(e){var t=Bf(e),r=t==ipe?e.constructor:void 0,n=r?Uf(r):"";if(n)switch(n){case spe:return BN;case ope:return zN;case ape:return NN;case lpe:return jN;case cpe:return FN}return t});const eR=qd;var upe=Object.prototype,hpe=upe.hasOwnProperty;function dpe(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&hpe.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var fpe=Ic.Uint8Array;const $N=fpe;function tR(e){var t=new e.constructor(e.byteLength);return new $N(t).set(new $N(e)),t}function ppe(e,t){var r=t?tR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var mpe=/\w*$/;function gpe(e){var t=new e.constructor(e.source,mpe.exec(e));return t.lastIndex=e.lastIndex,t}var UN=Jh?Jh.prototype:void 0,VN=UN?UN.valueOf:void 0;function ype(e){return VN?Object(VN.call(e)):{}}function xpe(e,t){var r=t?tR(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var vpe="[object Boolean]",bpe="[object Date]",_pe="[object Map]",wpe="[object Number]",Spe="[object RegExp]",Cpe="[object Set]",kpe="[object String]",Epe="[object Symbol]",Tpe="[object ArrayBuffer]",Ape="[object DataView]",Ipe="[object Float32Array]",Ppe="[object Float64Array]",Rpe="[object Int8Array]",Mpe="[object Int16Array]",Lpe="[object Int32Array]",Ope="[object Uint8Array]",Dpe="[object Uint8ClampedArray]",zpe="[object Uint16Array]",Npe="[object Uint32Array]";function jpe(e,t,r){var n=e.constructor;switch(t){case Tpe:return tR(e);case vpe:case bpe:return new n(+e);case Ape:return ppe(e,r);case Ipe:case Ppe:case Rpe:case Mpe:case Lpe:case Ope:case Dpe:case zpe:case Npe:return xpe(e,r);case _pe:return new n;case wpe:case kpe:return new n(e);case Spe:return gpe(e);case Cpe:return new n;case Epe:return ype(e)}}var HN=Object.create,Fpe=function(){function e(){}return function(t){if(!Vv(t))return{};if(HN)return HN(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Bpe=Fpe;function $pe(e){return typeof e.constructor=="function"&&!ZP(e)?Bpe(qP(e)):{}}var Upe="[object Map]";function Vpe(e){return $f(e)&&eR(e)==Upe}var WN=Vm&&Vm.isMap,Hpe=WN?YP(WN):Vpe;const Wpe=Hpe;var Gpe="[object Set]";function Xpe(e){return $f(e)&&eR(e)==Gpe}var GN=Vm&&Vm.isSet,qpe=GN?YP(GN):Xpe;const Ype=qpe;var Zpe=1,Kpe=2,Jpe=4,$U="[object Arguments]",Qpe="[object Array]",eme="[object Boolean]",tme="[object Date]",rme="[object Error]",UU="[object Function]",nme="[object GeneratorFunction]",ime="[object Map]",sme="[object Number]",VU="[object Object]",ome="[object RegExp]",ame="[object Set]",lme="[object String]",cme="[object Symbol]",ume="[object WeakMap]",hme="[object ArrayBuffer]",dme="[object DataView]",fme="[object Float32Array]",pme="[object Float64Array]",mme="[object Int8Array]",gme="[object Int16Array]",yme="[object Int32Array]",xme="[object Uint8Array]",vme="[object Uint8ClampedArray]",bme="[object Uint16Array]",_me="[object Uint32Array]",Gi={};Gi[$U]=Gi[Qpe]=Gi[hme]=Gi[dme]=Gi[eme]=Gi[tme]=Gi[fme]=Gi[pme]=Gi[mme]=Gi[gme]=Gi[yme]=Gi[ime]=Gi[sme]=Gi[VU]=Gi[ome]=Gi[ame]=Gi[lme]=Gi[cme]=Gi[xme]=Gi[vme]=Gi[bme]=Gi[_me]=!0;Gi[rme]=Gi[UU]=Gi[ume]=!1;function V_(e,t,r,n,o,f){var y,s=t&Zpe,k=t&Kpe,I=t&Jpe;if(r&&(y=o?r(e,n,o,f):r(e)),y!==void 0)return y;if(!Vv(e))return e;var D=Hv(e);if(D){if(y=dpe(e),!s)return zU(e,y)}else{var N=eR(e),U=N==UU||N==nme;if(PU(e))return Vfe(e,s);if(N==VU||N==$U||U&&!o){if(y=k||U?{}:$pe(e),!s)return k?Kfe(e,$fe(y,e)):qfe(e,zfe(y,e))}else{if(!Gi[N])return o?e:{};y=jpe(e,N,s)}}f||(f=new ug);var q=f.get(e);if(q)return q;f.set(e,y),Ype(e)?e.forEach(function(ve){y.add(V_(ve,t,r,ve,e,f))}):Wpe(e)&&e.forEach(function(ve,ie){y.set(ie,V_(ve,t,r,ie,e,f))});var Z=I?k?Qfe:Jfe:k?JP:KP,ae=D?void 0:Z(e);return Ode(ae||e,function(ve,ie){ae&&(ie=ve,ve=e[ie]),TU(y,ie,V_(ve,t,r,ie,e,f))}),y}var wme=4;function XN(e){return V_(e,wme)}function HU(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Sme="[object Symbol]";function rR(e){return typeof e=="symbol"||$f(e)&&Bf(e)==Sme}var Cme="Expected a function";function nR(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Cme);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],f=r.cache;if(f.has(o))return f.get(o);var y=e.apply(this,n);return r.cache=f.set(o,y)||f,y};return r.cache=new(nR.Cache||ld),r}nR.Cache=ld;var kme=500;function Eme(e){var t=nR(e,function(n){return r.size===kme&&r.clear(),n}),r=t.cache;return t}var Tme=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ame=/\\(\\)?/g,Ime=Eme(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Tme,function(r,n,o,f){t.push(o?f.replace(Ame,"$1"):n||r)}),t});const Pme=Ime;var Rme=1/0;function Mme(e){if(typeof e=="string"||rR(e))return e;var t=e+"";return t=="0"&&1/e==-Rme?"-0":t}var Lme=1/0,qN=Jh?Jh.prototype:void 0,YN=qN?qN.toString:void 0;function WU(e){if(typeof e=="string")return e;if(Hv(e))return HU(e,WU)+"";if(rR(e))return YN?YN.call(e):"";var t=e+"";return t=="0"&&1/e==-Lme?"-0":t}function Ome(e){return e==null?"":WU(e)}function GU(e){return Hv(e)?HU(e,Mme):rR(e)?[e]:zU(Pme(Ome(e)))}function co(){return co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(this,arguments)}function XU(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,f;for(f=0;f<n.length;f++)o=n[f],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var IS=le.createContext(void 0);IS.displayName="FormikContext";IS.Provider;IS.Consumer;function Dme(){var e=le.useContext(IS);return e||jhe(!1),e}var Tl=function(t){return typeof t=="function"},PS=function(t){return t!==null&&typeof t=="object"},zme=function(t){return String(Math.floor(Number(t)))===t},Uk=function(t){return Object.prototype.toString.call(t)==="[object String]"},Vk=function(t){return PS(t)&&Tl(t.then)};function Ea(e,t,r,n){n===void 0&&(n=0);for(var o=GU(t);e&&n<o.length;)e=e[o[n++]];return n!==o.length&&!e||e===void 0?r:e}function mf(e,t,r){for(var n=XN(e),o=n,f=0,y=GU(t);f<y.length-1;f++){var s=y[f],k=Ea(e,y.slice(0,f+1));if(k&&(PS(k)||Array.isArray(k)))o=o[s]=XN(k);else{var I=y[f+1];o=o[s]=zme(I)&&Number(I)>=0?[]:{}}}return(f===0?e:o)[y[f]]===r?e:(r===void 0?delete o[y[f]]:o[y[f]]=r,f===0&&r===void 0&&delete n[y[f]],n)}function qU(e,t,r,n){r===void 0&&(r=new WeakMap),n===void 0&&(n={});for(var o=0,f=Object.keys(e);o<f.length;o++){var y=f[o],s=e[y];PS(s)?r.get(s)||(r.set(s,!0),n[y]=Array.isArray(s)?[]:{},qU(s,t,r,n[y])):n[y]=t}return n}function Nme(e,t){switch(t.type){case"SET_VALUES":return co({},e,{values:t.payload});case"SET_TOUCHED":return co({},e,{touched:t.payload});case"SET_ERRORS":return Xd(e.errors,t.payload)?e:co({},e,{errors:t.payload});case"SET_STATUS":return co({},e,{status:t.payload});case"SET_ISSUBMITTING":return co({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return co({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return co({},e,{values:mf(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return co({},e,{touched:mf(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return co({},e,{errors:mf(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return co({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return co({},e,{touched:qU(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return co({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return co({},e,{isSubmitting:!1});default:return e}}var Ud={},Kb={};function cd(e){var t=e.validateOnChange,r=t===void 0?!0:t,n=e.validateOnBlur,o=n===void 0?!0:n,f=e.validateOnMount,y=f===void 0?!1:f,s=e.isInitialValid,k=e.enableReinitialize,I=k===void 0?!1:k,D=e.onSubmit,N=XU(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),U=co({validateOnChange:r,validateOnBlur:o,validateOnMount:y,onSubmit:D},N),q=le.useRef(U.initialValues),Z=le.useRef(U.initialErrors||Ud),ae=le.useRef(U.initialTouched||Kb),ve=le.useRef(U.initialStatus),ie=le.useRef(!1),W=le.useRef({});le.useEffect(function(){return ie.current=!0,function(){ie.current=!1}},[]);var K=le.useState(0),he=K[1],de=le.useRef({values:U.initialValues,errors:U.initialErrors||Ud,touched:U.initialTouched||Kb,status:U.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),Ae=de.current,Te=le.useCallback(function(Tt){var pr=de.current;de.current=Nme(pr,Tt),pr!==de.current&&he(function(Er){return Er+1})},[]),Ue=le.useCallback(function(Tt,pr){return new Promise(function(Er,Mr){var Zt=U.validate(Tt,pr);Zt==null?Er(Ud):Vk(Zt)?Zt.then(function(gr){Er(gr||Ud)},function(gr){Mr(gr)}):Er(Zt)})},[U.validate]),Pe=le.useCallback(function(Tt,pr){var Er=U.validationSchema,Mr=Tl(Er)?Er(pr):Er,Zt=pr&&Mr.validateAt?Mr.validateAt(pr,Tt):Fme(Tt,Mr);return new Promise(function(gr,Xr){Zt.then(function(){gr(Ud)},function(Hn){Hn.name==="ValidationError"?gr(jme(Hn)):Xr(Hn)})})},[U.validationSchema]),$e=le.useCallback(function(Tt,pr){return new Promise(function(Er){return Er(W.current[Tt].validate(pr))})},[]),Ve=le.useCallback(function(Tt){var pr=Object.keys(W.current).filter(function(Mr){return Tl(W.current[Mr].validate)}),Er=pr.length>0?pr.map(function(Mr){return $e(Mr,Ea(Tt,Mr))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(Er).then(function(Mr){return Mr.reduce(function(Zt,gr,Xr){return gr==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||gr&&(Zt=mf(Zt,pr[Xr],gr)),Zt},{})})},[$e]),Fe=le.useCallback(function(Tt){return Promise.all([Ve(Tt),U.validationSchema?Pe(Tt):{},U.validate?Ue(Tt):{}]).then(function(pr){var Er=pr[0],Mr=pr[1],Zt=pr[2],gr=tA.all([Er,Mr,Zt],{arrayMerge:Bme});return gr})},[U.validate,U.validationSchema,Ve,Ue,Pe]),Ye=Qa(function(Tt){return Tt===void 0&&(Tt=Ae.values),Te({type:"SET_ISVALIDATING",payload:!0}),Fe(Tt).then(function(pr){return ie.current&&(Te({type:"SET_ISVALIDATING",payload:!1}),Te({type:"SET_ERRORS",payload:pr})),pr})});le.useEffect(function(){y&&ie.current===!0&&Xd(q.current,U.initialValues)&&Ye(q.current)},[y,Ye]);var ft=le.useCallback(function(Tt){var pr=Tt&&Tt.values?Tt.values:q.current,Er=Tt&&Tt.errors?Tt.errors:Z.current?Z.current:U.initialErrors||{},Mr=Tt&&Tt.touched?Tt.touched:ae.current?ae.current:U.initialTouched||{},Zt=Tt&&Tt.status?Tt.status:ve.current?ve.current:U.initialStatus;q.current=pr,Z.current=Er,ae.current=Mr,ve.current=Zt;var gr=function(){Te({type:"RESET_FORM",payload:{isSubmitting:!!Tt&&!!Tt.isSubmitting,errors:Er,touched:Mr,status:Zt,values:pr,isValidating:!!Tt&&!!Tt.isValidating,submitCount:Tt&&Tt.submitCount&&typeof Tt.submitCount=="number"?Tt.submitCount:0}})};if(U.onReset){var Xr=U.onReset(Ae.values,Br);Vk(Xr)?Xr.then(gr):gr()}else gr()},[U.initialErrors,U.initialStatus,U.initialTouched,U.onReset]);le.useEffect(function(){ie.current===!0&&!Xd(q.current,U.initialValues)&&I&&(q.current=U.initialValues,ft(),y&&Ye(q.current))},[I,U.initialValues,ft,y,Ye]),le.useEffect(function(){I&&ie.current===!0&&!Xd(Z.current,U.initialErrors)&&(Z.current=U.initialErrors||Ud,Te({type:"SET_ERRORS",payload:U.initialErrors||Ud}))},[I,U.initialErrors]),le.useEffect(function(){I&&ie.current===!0&&!Xd(ae.current,U.initialTouched)&&(ae.current=U.initialTouched||Kb,Te({type:"SET_TOUCHED",payload:U.initialTouched||Kb}))},[I,U.initialTouched]),le.useEffect(function(){I&&ie.current===!0&&!Xd(ve.current,U.initialStatus)&&(ve.current=U.initialStatus,Te({type:"SET_STATUS",payload:U.initialStatus}))},[I,U.initialStatus,U.initialTouched]);var Pt=Qa(function(Tt){if(W.current[Tt]&&Tl(W.current[Tt].validate)){var pr=Ea(Ae.values,Tt),Er=W.current[Tt].validate(pr);return Vk(Er)?(Te({type:"SET_ISVALIDATING",payload:!0}),Er.then(function(Mr){return Mr}).then(function(Mr){Te({type:"SET_FIELD_ERROR",payload:{field:Tt,value:Mr}}),Te({type:"SET_ISVALIDATING",payload:!1})})):(Te({type:"SET_FIELD_ERROR",payload:{field:Tt,value:Er}}),Promise.resolve(Er))}else if(U.validationSchema)return Te({type:"SET_ISVALIDATING",payload:!0}),Pe(Ae.values,Tt).then(function(Mr){return Mr}).then(function(Mr){Te({type:"SET_FIELD_ERROR",payload:{field:Tt,value:Ea(Mr,Tt)}}),Te({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),or=le.useCallback(function(Tt,pr){var Er=pr.validate;W.current[Tt]={validate:Er}},[]),xr=le.useCallback(function(Tt){delete W.current[Tt]},[]),mt=Qa(function(Tt,pr){Te({type:"SET_TOUCHED",payload:Tt});var Er=pr===void 0?o:pr;return Er?Ye(Ae.values):Promise.resolve()}),Xt=le.useCallback(function(Tt){Te({type:"SET_ERRORS",payload:Tt})},[]),Wt=Qa(function(Tt,pr){var Er=Tl(Tt)?Tt(Ae.values):Tt;Te({type:"SET_VALUES",payload:Er});var Mr=pr===void 0?r:pr;return Mr?Ye(Er):Promise.resolve()}),Ot=le.useCallback(function(Tt,pr){Te({type:"SET_FIELD_ERROR",payload:{field:Tt,value:pr}})},[]),ut=Qa(function(Tt,pr,Er){Te({type:"SET_FIELD_VALUE",payload:{field:Tt,value:pr}});var Mr=Er===void 0?r:Er;return Mr?Ye(mf(Ae.values,Tt,pr)):Promise.resolve()}),Vt=le.useCallback(function(Tt,pr){var Er=pr,Mr=Tt,Zt;if(!Uk(Tt)){Tt.persist&&Tt.persist();var gr=Tt.target?Tt.target:Tt.currentTarget,Xr=gr.type,Hn=gr.name,ti=gr.id,qn=gr.value,Ii=gr.checked,zi=gr.outerHTML,Fn=gr.options,Ki=gr.multiple;Er=pr||Hn||ti,Mr=/number|range/.test(Xr)?(Zt=parseFloat(qn),isNaN(Zt)?"":Zt):/checkbox/.test(Xr)?Ume(Ea(Ae.values,Er),Ii,qn):Fn&&Ki?$me(Fn):qn}Er&&ut(Er,Mr)},[ut,Ae.values]),ir=Qa(function(Tt){if(Uk(Tt))return function(pr){return Vt(pr,Tt)};Vt(Tt)}),vt=Qa(function(Tt,pr,Er){pr===void 0&&(pr=!0),Te({type:"SET_FIELD_TOUCHED",payload:{field:Tt,value:pr}});var Mr=Er===void 0?o:Er;return Mr?Ye(Ae.values):Promise.resolve()}),Dt=le.useCallback(function(Tt,pr){Tt.persist&&Tt.persist();var Er=Tt.target,Mr=Er.name,Zt=Er.id,gr=Er.outerHTML,Xr=pr||Mr||Zt;vt(Xr,!0)},[vt]),ur=Qa(function(Tt){if(Uk(Tt))return function(pr){return Dt(pr,Tt)};Dt(Tt)}),Tr=le.useCallback(function(Tt){Tl(Tt)?Te({type:"SET_FORMIK_STATE",payload:Tt}):Te({type:"SET_FORMIK_STATE",payload:function(){return Tt}})},[]),fr=le.useCallback(function(Tt){Te({type:"SET_STATUS",payload:Tt})},[]),Cr=le.useCallback(function(Tt){Te({type:"SET_ISSUBMITTING",payload:Tt})},[]),mr=Qa(function(){return Te({type:"SUBMIT_ATTEMPT"}),Ye().then(function(Tt){var pr=Tt instanceof Error,Er=!pr&&Object.keys(Tt).length===0;if(Er){var Mr;try{if(Mr=Sn(),Mr===void 0)return}catch(Zt){throw Zt}return Promise.resolve(Mr).then(function(Zt){return ie.current&&Te({type:"SUBMIT_SUCCESS"}),Zt}).catch(function(Zt){if(ie.current)throw Te({type:"SUBMIT_FAILURE"}),Zt})}else if(ie.current&&(Te({type:"SUBMIT_FAILURE"}),pr))throw Tt})}),nn=Qa(function(Tt){Tt&&Tt.preventDefault&&Tl(Tt.preventDefault)&&Tt.preventDefault(),Tt&&Tt.stopPropagation&&Tl(Tt.stopPropagation)&&Tt.stopPropagation(),mr().catch(function(pr){console.warn("Warning: An unhandled error was caught from submitForm()",pr)})}),Br={resetForm:ft,validateForm:Ye,validateField:Pt,setErrors:Xt,setFieldError:Ot,setFieldTouched:vt,setFieldValue:ut,setStatus:fr,setSubmitting:Cr,setTouched:mt,setValues:Wt,setFormikState:Tr,submitForm:mr},Sn=Qa(function(){return D(Ae.values,Br)}),on=Qa(function(Tt){Tt&&Tt.preventDefault&&Tl(Tt.preventDefault)&&Tt.preventDefault(),Tt&&Tt.stopPropagation&&Tl(Tt.stopPropagation)&&Tt.stopPropagation(),ft()}),Gr=le.useCallback(function(Tt){return{value:Ea(Ae.values,Tt),error:Ea(Ae.errors,Tt),touched:!!Ea(Ae.touched,Tt),initialValue:Ea(q.current,Tt),initialTouched:!!Ea(ae.current,Tt),initialError:Ea(Z.current,Tt)}},[Ae.errors,Ae.touched,Ae.values]),Zi=le.useCallback(function(Tt){return{setValue:function(Er,Mr){return ut(Tt,Er,Mr)},setTouched:function(Er,Mr){return vt(Tt,Er,Mr)},setError:function(Er){return Ot(Tt,Er)}}},[ut,vt,Ot]),Kr=le.useCallback(function(Tt){var pr=PS(Tt),Er=pr?Tt.name:Tt,Mr=Ea(Ae.values,Er),Zt={name:Er,value:Mr,onChange:ir,onBlur:ur};if(pr){var gr=Tt.type,Xr=Tt.value,Hn=Tt.as,ti=Tt.multiple;gr==="checkbox"?Xr===void 0?Zt.checked=!!Mr:(Zt.checked=!!(Array.isArray(Mr)&&~Mr.indexOf(Xr)),Zt.value=Xr):gr==="radio"?(Zt.checked=Mr===Xr,Zt.value=Xr):Hn==="select"&&ti&&(Zt.value=Zt.value||[],Zt.multiple=!0)}return Zt},[ur,ir,Ae.values]),En=le.useMemo(function(){return!Xd(q.current,Ae.values)},[q.current,Ae.values]),wi=le.useMemo(function(){return typeof s<"u"?En?Ae.errors&&Object.keys(Ae.errors).length===0:s!==!1&&Tl(s)?s(U):s:Ae.errors&&Object.keys(Ae.errors).length===0},[s,En,Ae.errors,U]),Hi=co({},Ae,{initialValues:q.current,initialErrors:Z.current,initialTouched:ae.current,initialStatus:ve.current,handleBlur:ur,handleChange:ir,handleReset:on,handleSubmit:nn,resetForm:ft,setErrors:Xt,setFormikState:Tr,setFieldTouched:vt,setFieldValue:ut,setFieldError:Ot,setStatus:fr,setSubmitting:Cr,setTouched:mt,setValues:Wt,submitForm:mr,validateForm:Ye,validateField:Pt,isValid:wi,dirty:En,unregisterField:xr,registerField:or,getFieldProps:Kr,getFieldMeta:Gr,getFieldHelpers:Zi,validateOnBlur:o,validateOnChange:r,validateOnMount:y});return Hi}function jme(e){var t={};if(e.inner){if(e.inner.length===0)return mf(t,e.path,e.message);for(var o=e.inner,r=Array.isArray(o),n=0,o=r?o:o[Symbol.iterator]();;){var f;if(r){if(n>=o.length)break;f=o[n++]}else{if(n=o.next(),n.done)break;f=n.value}var y=f;Ea(t,y.path)||(t=mf(t,y.path,y.message))}}return t}function Fme(e,t,r,n){r===void 0&&(r=!1);var o=aA(e);return t[r?"validateSync":"validate"](o,{abortEarly:!1,context:n||o})}function aA(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=String(r);Array.isArray(e[n])===!0?t[n]=e[n].map(function(o){return Array.isArray(o)===!0||SN(o)?aA(o):o!==""?o:void 0}):SN(e[n])?t[n]=aA(e[n]):t[n]=e[n]!==""?e[n]:void 0}return t}function Bme(e,t,r){var n=e.slice();return t.forEach(function(f,y){if(typeof n[y]>"u"){var s=r.clone!==!1,k=s&&r.isMergeableObject(f);n[y]=k?tA(Array.isArray(f)?[]:{},f,r):f}else r.isMergeableObject(f)?n[y]=tA(e[y],f,r):e.indexOf(f)===-1&&n.push(f)}),n}function $me(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function Ume(e,t,r){if(typeof e=="boolean")return!!t;var n=[],o=!1,f=-1;if(Array.isArray(e))n=e,f=e.indexOf(r),o=f>=0;else if(!r||r=="true"||r=="false")return!!t;return t&&r&&!o?n.concat(r):o?n.slice(0,f).concat(n.slice(f+1)):n}var Vme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?le.useLayoutEffect:le.useEffect;function Qa(e){var t=le.useRef(e);return Vme(function(){t.current=e}),le.useCallback(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.current.apply(void 0,n)},[])}var Hme=le.forwardRef(function(e,t){var r=e.action,n=XU(e,["action"]),o=r??"#",f=Dme(),y=f.handleReset,s=f.handleSubmit;return le.createElement("form",co({onSubmit:s,ref:t,onReset:y,action:o},n))});Hme.displayName="Form";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t},Wme=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const o=e[r++];if(o<128)t[n++]=String.fromCharCode(o);else if(o>191&&o<224){const f=e[r++];t[n++]=String.fromCharCode((o&31)<<6|f&63)}else if(o>239&&o<365){const f=e[r++],y=e[r++],s=e[r++],k=((o&7)<<18|(f&63)<<12|(y&63)<<6|s&63)-65536;t[n++]=String.fromCharCode(55296+(k>>10)),t[n++]=String.fromCharCode(56320+(k&1023))}else{const f=e[r++],y=e[r++];t[n++]=String.fromCharCode((o&15)<<12|(f&63)<<6|y&63)}}return t.join("")},ZU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let o=0;o<e.length;o+=3){const f=e[o],y=o+1<e.length,s=y?e[o+1]:0,k=o+2<e.length,I=k?e[o+2]:0,D=f>>2,N=(f&3)<<4|s>>4;let U=(s&15)<<2|I>>6,q=I&63;k||(q=64,y||(U=64)),n.push(r[D],r[N],r[U],r[q])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(YU(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Wme(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let o=0;o<e.length;){const f=r[e.charAt(o++)],s=o<e.length?r[e.charAt(o)]:0;++o;const I=o<e.length?r[e.charAt(o)]:64;++o;const N=o<e.length?r[e.charAt(o)]:64;if(++o,f==null||s==null||I==null||N==null)throw new Gme;const U=f<<2|s>>4;if(n.push(U),I!==64){const q=s<<4&240|I>>2;if(n.push(q),N!==64){const Z=I<<6&192|N;n.push(Z)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Gme extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xme=function(e){const t=YU(e);return ZU.encodeByteArray(t,!0)},nw=function(e){return Xme(e).replace(/\./g,"")},KU=function(e){try{return ZU.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qme(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=()=>qme().__FIREBASE_DEFAULTS__,Zme=()=>{if(typeof process>"u"||typeof process.env>"u")return;const e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Kme=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&KU(e[1]);return t&&JSON.parse(t)},RS=()=>{try{return Yme()||Zme()||Kme()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},JU=e=>{var t,r;return(r=(t=RS())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},Jme=e=>{const t=JU(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},QU=()=>{var e;return(e=RS())===null||e===void 0?void 0:e.config},eV=e=>{var t;return(t=RS())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qme{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ege(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",o=e.iat||0,f=e.sub||e.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:o,exp:o+3600,auth_time:o,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},e),s="";return[nw(JSON.stringify(r)),nw(JSON.stringify(y)),s].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jo())}function rge(){var e;const t=(e=RS())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nge(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function ige(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sge(){const e=jo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function oge(){try{return typeof indexedDB=="object"}catch{return!1}}function age(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(n);o.onsuccess=()=>{o.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},o.onupgradeneeded=()=>{r=!1},o.onerror=()=>{var f;t(((f=o.error)===null||f===void 0?void 0:f.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lge="FirebaseError";class Tu extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=lge,Object.setPrototypeOf(this,Tu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wv.prototype.create)}}class Wv{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},o=`${this.service}/${t}`,f=this.errors[t],y=f?cge(f,n):"Error",s=`${this.serviceName}: ${y} (${o}).`;return new Tu(o,s,n)}}function cge(e,t){return e.replace(uge,(r,n)=>{const o=t[n];return o!=null?String(o):`<${n}?>`})}const uge=/\{\$([^}]+)}/g;function hge(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function iw(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const o of r){if(!n.includes(o))return!1;const f=e[o],y=t[o];if(ZN(f)&&ZN(y)){if(!iw(f,y))return!1}else if(f!==y)return!1}for(const o of n)if(!r.includes(o))return!1;return!0}function ZN(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(o=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function dge(e,t){const r=new fge(e,t);return r.subscribe.bind(r)}class fge{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let o;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");pge(t,["next","error","complete"])?o=t:o={next:t,error:r,complete:n},o.next===void 0&&(o.next=Hk),o.error===void 0&&(o.error=Hk),o.complete===void 0&&(o.complete=Hk);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),f}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pge(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function Hk(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(e){return e&&e._delegate?e._delegate:e}class Tf{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mge{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Qme;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:r});o&&n.resolve(o)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),o=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(f){if(o)return null;throw f}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(yge(t))try{this.getOrInitializeService({instanceIdentifier:Yd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);try{const f=this.getOrInitializeService({instanceIdentifier:o});n.resolve(f)}catch{}}}}clearInstance(t=Yd){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yd){return this.instances.has(t)}getOptions(t=Yd){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[f,y]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(f);n===s&&y.resolve(o)}return o}onInit(t,r){var n;const o=this.normalizeInstanceIdentifier(r),f=(n=this.onInitCallbacks.get(o))!==null&&n!==void 0?n:new Set;f.add(t),this.onInitCallbacks.set(o,f);const y=this.instances.get(o);return y&&t(y,o),()=>{f.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const o of n)try{o(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:gge(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Yd){return this.component?this.component.multipleInstances?t:Yd:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gge(e){return e===Yd?void 0:e}function yge(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xge{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new mge(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bi||(Bi={}));const vge={debug:Bi.DEBUG,verbose:Bi.VERBOSE,info:Bi.INFO,warn:Bi.WARN,error:Bi.ERROR,silent:Bi.SILENT},bge=Bi.INFO,_ge={[Bi.DEBUG]:"log",[Bi.VERBOSE]:"log",[Bi.INFO]:"info",[Bi.WARN]:"warn",[Bi.ERROR]:"error"},wge=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),o=_ge[t];if(o)console[o](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class tV{constructor(t){this.name=t,this._logLevel=bge,this._logHandler=wge,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vge[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bi.DEBUG,...t),this._logHandler(this,Bi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bi.VERBOSE,...t),this._logHandler(this,Bi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bi.INFO,...t),this._logHandler(this,Bi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bi.WARN,...t),this._logHandler(this,Bi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bi.ERROR,...t),this._logHandler(this,Bi.ERROR,...t)}}const Sge=(e,t)=>t.some(r=>e instanceof r);let KN,JN;function Cge(){return KN||(KN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kge(){return JN||(JN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rV=new WeakMap,lA=new WeakMap,nV=new WeakMap,Wk=new WeakMap,iR=new WeakMap;function Ege(e){const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("success",f),e.removeEventListener("error",y)},f=()=>{r(Fh(e.result)),o()},y=()=>{n(e.error),o()};e.addEventListener("success",f),e.addEventListener("error",y)});return t.then(r=>{r instanceof IDBCursor&&rV.set(r,e)}).catch(()=>{}),iR.set(t,e),t}function Tge(e){if(lA.has(e))return;const t=new Promise((r,n)=>{const o=()=>{e.removeEventListener("complete",f),e.removeEventListener("error",y),e.removeEventListener("abort",y)},f=()=>{r(),o()},y=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",f),e.addEventListener("error",y),e.addEventListener("abort",y)});lA.set(e,t)}let cA={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return lA.get(e);if(t==="objectStoreNames")return e.objectStoreNames||nV.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Fh(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Age(e){cA=e(cA)}function Ige(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Gk(this),t,...r);return nV.set(n,t.sort?t.sort():[t]),Fh(n)}:kge().includes(e)?function(...t){return e.apply(Gk(this),t),Fh(rV.get(this))}:function(...t){return Fh(e.apply(Gk(this),t))}}function Pge(e){return typeof e=="function"?Ige(e):(e instanceof IDBTransaction&&Tge(e),Sge(e,Cge())?new Proxy(e,cA):e)}function Fh(e){if(e instanceof IDBRequest)return Ege(e);if(Wk.has(e))return Wk.get(e);const t=Pge(e);return t!==e&&(Wk.set(e,t),iR.set(t,e)),t}const Gk=e=>iR.get(e);function Rge(e,t,{blocked:r,upgrade:n,blocking:o,terminated:f}={}){const y=indexedDB.open(e,t),s=Fh(y);return n&&y.addEventListener("upgradeneeded",k=>{n(Fh(y.result),k.oldVersion,k.newVersion,Fh(y.transaction),k)}),r&&y.addEventListener("blocked",k=>r(k.oldVersion,k.newVersion,k)),s.then(k=>{f&&k.addEventListener("close",()=>f()),o&&k.addEventListener("versionchange",I=>o(I.oldVersion,I.newVersion,I))}).catch(()=>{}),s}const Mge=["get","getKey","getAll","getAllKeys","count"],Lge=["put","add","delete","clear"],Xk=new Map;function QN(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xk.get(t))return Xk.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=Lge.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||Mge.includes(r)))return;const f=async function(y,...s){const k=this.transaction(y,o?"readwrite":"readonly");let I=k.store;return n&&(I=I.index(s.shift())),(await Promise.all([I[r](...s),o&&k.done]))[0]};return Xk.set(t,f),f}Age(e=>({...e,get:(t,r,n)=>QN(t,r)||e.get(t,r,n),has:(t,r)=>!!QN(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oge{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Dge(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Dge(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const uA="@firebase/app",ej="0.9.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new tV("@firebase/app"),zge="@firebase/app-compat",Nge="@firebase/analytics-compat",jge="@firebase/analytics",Fge="@firebase/app-check-compat",Bge="@firebase/app-check",$ge="@firebase/auth",Uge="@firebase/auth-compat",Vge="@firebase/database",Hge="@firebase/database-compat",Wge="@firebase/functions",Gge="@firebase/functions-compat",Xge="@firebase/installations",qge="@firebase/installations-compat",Yge="@firebase/messaging",Zge="@firebase/messaging-compat",Kge="@firebase/performance",Jge="@firebase/performance-compat",Qge="@firebase/remote-config",eye="@firebase/remote-config-compat",tye="@firebase/storage",rye="@firebase/storage-compat",nye="@firebase/firestore",iye="@firebase/firestore-compat",sye="firebase",oye="10.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="[DEFAULT]",aye={[uA]:"fire-core",[zge]:"fire-core-compat",[jge]:"fire-analytics",[Nge]:"fire-analytics-compat",[Bge]:"fire-app-check",[Fge]:"fire-app-check-compat",[$ge]:"fire-auth",[Uge]:"fire-auth-compat",[Vge]:"fire-rtdb",[Hge]:"fire-rtdb-compat",[Wge]:"fire-fn",[Gge]:"fire-fn-compat",[Xge]:"fire-iid",[qge]:"fire-iid-compat",[Yge]:"fire-fcm",[Zge]:"fire-fcm-compat",[Kge]:"fire-perf",[Jge]:"fire-perf-compat",[Qge]:"fire-rc",[eye]:"fire-rc-compat",[tye]:"fire-gcs",[rye]:"fire-gcs-compat",[nye]:"fire-fst",[iye]:"fire-fst-compat","fire-js":"fire-js",[sye]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map,dA=new Map;function lye(e,t){try{e.container.addComponent(t)}catch(r){Af.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Hm(e){const t=e.name;if(dA.has(t))return Af.debug(`There were multiple attempts to register component ${t}.`),!1;dA.set(t,e);for(const r of sw.values())lye(r,e);return!0}function sR(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cye={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Bh=new Wv("app","Firebase",cye);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{constructor(t,r,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=oye;function iV(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n=Object.assign({name:hA,automaticDataCollectionEnabled:!1},t),o=n.name;if(typeof o!="string"||!o)throw Bh.create("bad-app-name",{appName:String(o)});if(r||(r=QU()),!r)throw Bh.create("no-options");const f=sw.get(o);if(f){if(iw(r,f.options)&&iw(n,f.config))return f;throw Bh.create("duplicate-app",{appName:o})}const y=new xge(o);for(const k of dA.values())y.addComponent(k);const s=new uye(r,n,y);return sw.set(o,s),s}function sV(e=hA){const t=sw.get(e);if(!t&&e===hA&&QU())return iV();if(!t)throw Bh.create("no-app",{appName:e});return t}function $h(e,t,r){var n;let o=(n=aye[e])!==null&&n!==void 0?n:e;r&&(o+=`-${r}`);const f=o.match(/\s|\//),y=t.match(/\s|\//);if(f||y){const s=[`Unable to register library "${o}" with version "${t}":`];f&&s.push(`library name "${o}" contains illegal characters (whitespace or "/")`),f&&y&&s.push("and"),y&&s.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Af.warn(s.join(" "));return}Hm(new Tf(`${o}-version`,()=>({library:o,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hye="firebase-heartbeat-database",dye=1,xv="firebase-heartbeat-store";let qk=null;function oV(){return qk||(qk=Rge(hye,dye,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(xv)}}}).catch(e=>{throw Bh.create("idb-open",{originalErrorMessage:e.message})})),qk}async function fye(e){try{return await(await oV()).transaction(xv).objectStore(xv).get(aV(e))}catch(t){if(t instanceof Tu)Af.warn(t.message);else{const r=Bh.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Af.warn(r.message)}}}async function tj(e,t){try{const n=(await oV()).transaction(xv,"readwrite");await n.objectStore(xv).put(t,aV(e)),await n.done}catch(r){if(r instanceof Tu)Af.warn(r.message);else{const n=Bh.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Af.warn(n.message)}}}function aV(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pye=1024,mye=30*24*60*60*1e3;class gye{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new xye(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=rj();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(o=>o.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const f=new Date(o.date).valueOf();return Date.now()-f<=mye}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=rj(),{heartbeatsToSend:r,unsentEntries:n}=yye(this._heartbeatsCache.heartbeats),o=nw(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function rj(){return new Date().toISOString().substring(0,10)}function yye(e,t=pye){const r=[];let n=e.slice();for(const o of e){const f=r.find(y=>y.agent===o.agent);if(f){if(f.dates.push(o.date),nj(r)>t){f.dates.pop();break}}else if(r.push({agent:o.agent,dates:[o.date]}),nj(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class xye{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oge()?age().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await fye(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return tj(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const o=await this.read();return tj(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}else return}}function nj(e){return nw(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vye(e){Hm(new Tf("platform-logger",t=>new Oge(t),"PRIVATE")),Hm(new Tf("heartbeat",t=>new gye(t),"PRIVATE")),$h(uA,ej,e),$h(uA,ej,"esm2017"),$h("fire-js","")}vye("");function lV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bye=lV,cV=new Wv("auth","Firebase",lV());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=new tV("@firebase/auth");function _ye(e,...t){ow.logLevel<=Bi.WARN&&ow.warn(`Auth (${hg}): ${e}`,...t)}function H_(e,...t){ow.logLevel<=Bi.ERROR&&ow.error(`Auth (${hg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(e,...t){throw oR(e,...t)}function Sc(e,...t){return oR(e,...t)}function uV(e,t,r){const n=Object.assign(Object.assign({},bye()),{[t]:r});return new Wv("auth","Firebase",n).create(t,{appName:e.name})}function wye(e,t,r){const n=r;if(!(t instanceof n))throw n.name!==t.constructor.name&&Tc(e,"argument-error"),uV(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function oR(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return cV.create(e,...t)}function _n(e,t,...r){if(!e)throw oR(t,...r)}function lu(e){const t="INTERNAL ASSERTION FAILED: "+e;throw H_(t),new Error(t)}function Su(e,t){e||lu(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Sye(){return ij()==="http:"||ij()==="https:"}function ij(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cye(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sye()||nge()||"connection"in navigator)?navigator.onLine:!0}function kye(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,r){this.shortDelay=t,this.longDelay=r,Su(r>t,"Short delay should be less than long delay!"),this.isMobile=tge()||ige()}get(){return Cye()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(e,t){Su(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;lu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;lu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;lu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eye={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tye=new Xv(3e4,6e4);function dV(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qv(e,t,r,n,o={}){return fV(e,o,async()=>{let f={},y={};n&&(t==="GET"?y=n:f={body:JSON.stringify(n)});const s=Gv(Object.assign({key:e.config.apiKey},y)).slice(1),k=await e._getAdditionalHeaders();return k["Content-Type"]="application/json",e.languageCode&&(k["X-Firebase-Locale"]=e.languageCode),hV.fetch()(pV(e,e.config.apiHost,r,s),Object.assign({method:t,headers:k,referrerPolicy:"no-referrer"},f))})}async function fV(e,t,r){e._canInitEmulator=!1;const n=Object.assign(Object.assign({},Eye),t);try{const o=new Iye(e),f=await Promise.race([r(),o.promise]);o.clearNetworkTimeout();const y=await f.json();if("needConfirmation"in y)throw Jb(e,"account-exists-with-different-credential",y);if(f.ok&&!("errorMessage"in y))return y;{const s=f.ok?y.errorMessage:y.error.message,[k,I]=s.split(" : ");if(k==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jb(e,"credential-already-in-use",y);if(k==="EMAIL_EXISTS")throw Jb(e,"email-already-in-use",y);if(k==="USER_DISABLED")throw Jb(e,"user-disabled",y);const D=n[k]||k.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw uV(e,D,I);Tc(e,D)}}catch(o){if(o instanceof Tu)throw o;Tc(e,"network-request-failed",{message:String(o)})}}async function Aye(e,t,r,n,o={}){const f=await qv(e,t,r,n,o);return"mfaPendingCredential"in f&&Tc(e,"multi-factor-auth-required",{_serverResponse:f}),f}function pV(e,t,r,n){const o=`${t}${r}?${n}`;return e.config.emulator?aR(e.config,o):`${e.config.apiScheme}://${o}`}class Iye{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Sc(this.auth,"network-request-failed")),Tye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jb(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const o=Sc(e,t,n);return o.customData._tokenResponse=r,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pye(e,t){return qv(e,"POST","/v1/accounts:delete",t)}async function Rye(e,t){return qv(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Mye(e,t=!1){const r=Pc(e),n=await r.getIdToken(t),o=lR(n);_n(o&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error");const f=typeof o.firebase=="object"?o.firebase:void 0,y=f==null?void 0:f.sign_in_provider;return{claims:o,token:n,authTime:Ox(Yk(o.auth_time)),issuedAtTime:Ox(Yk(o.iat)),expirationTime:Ox(Yk(o.exp)),signInProvider:y||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function Yk(e){return Number(e)*1e3}function lR(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return H_("JWT malformed, contained fewer than 3 sections"),null;try{const o=KU(r);return o?JSON.parse(o):(H_("Failed to decode base64 JWT payload"),null)}catch(o){return H_("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Lye(e){const t=lR(e);return _n(t,"internal-error"),_n(typeof t.exp<"u","internal-error"),_n(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Tu&&Oye(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function Oye({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dye{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var r;if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ox(this.lastLoginAt),this.creationTime=Ox(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(e){var t;const r=e.auth,n=await e.getIdToken(),o=await vv(e,Rye(r,{idToken:n}));_n(o==null?void 0:o.users.length,r,"internal-error");const f=o.users[0];e._notifyReloadListener(f);const y=!((t=f.providerUserInfo)===null||t===void 0)&&t.length?jye(f.providerUserInfo):[],s=Nye(e.providerData,y),k=e.isAnonymous,I=!(e.email&&f.passwordHash)&&!(s!=null&&s.length),D=k?I:!1,N={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:s,metadata:new mV(f.createdAt,f.lastLoginAt),isAnonymous:D};Object.assign(e,N)}async function zye(e){const t=Pc(e);await aw(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Nye(e,t){return[...e.filter(n=>!t.some(o=>o.providerId===n.providerId)),...t]}function jye(e){return e.map(t=>{var{providerId:r}=t,n=HP(t,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fye(e,t){const r=await fV(e,{},async()=>{const n=Gv({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:f}=e.config,y=pV(e,o,"/v1/token",`key=${f}`),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",hV.fetch()(y,{method:"POST",headers:s,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_n(t.idToken,"internal-error"),_n(typeof t.idToken<"u","internal-error"),_n(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Lye(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}async getToken(t,r=!1){return _n(!this.accessToken||this.refreshToken,t,"user-token-expired"),!r&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:o,expiresIn:f}=await Fye(t,r);this.updateTokensAndExpiration(n,o,Number(f))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:o,expirationTime:f}=r,y=new bv;return n&&(_n(typeof n=="string","internal-error",{appName:t}),y.refreshToken=n),o&&(_n(typeof o=="string","internal-error",{appName:t}),y.accessToken=o),f&&(_n(typeof f=="number","internal-error",{appName:t}),y.expirationTime=f),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bv,this.toJSON())}_performRefresh(){return lu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(e,t){_n(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class gf{constructor(t){var{uid:r,auth:n,stsTokenManager:o}=t,f=HP(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dye(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new mV(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(t){const r=await vv(this,this.stsTokenManager.getToken(this.auth,t));return _n(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return Mye(this,t)}reload(){return zye(this)}_assign(t){this!==t&&(_n(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>Object.assign({},r)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new gf(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(t){_n(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await aw(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await vv(this,Pye(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){var n,o,f,y,s,k,I,D;const N=(n=r.displayName)!==null&&n!==void 0?n:void 0,U=(o=r.email)!==null&&o!==void 0?o:void 0,q=(f=r.phoneNumber)!==null&&f!==void 0?f:void 0,Z=(y=r.photoURL)!==null&&y!==void 0?y:void 0,ae=(s=r.tenantId)!==null&&s!==void 0?s:void 0,ve=(k=r._redirectEventId)!==null&&k!==void 0?k:void 0,ie=(I=r.createdAt)!==null&&I!==void 0?I:void 0,W=(D=r.lastLoginAt)!==null&&D!==void 0?D:void 0,{uid:K,emailVerified:he,isAnonymous:de,providerData:Ae,stsTokenManager:Te}=r;_n(K&&Te,t,"internal-error");const Ue=bv.fromJSON(this.name,Te);_n(typeof K=="string",t,"internal-error"),sh(N,t.name),sh(U,t.name),_n(typeof he=="boolean",t,"internal-error"),_n(typeof de=="boolean",t,"internal-error"),sh(q,t.name),sh(Z,t.name),sh(ae,t.name),sh(ve,t.name),sh(ie,t.name),sh(W,t.name);const Pe=new gf({uid:K,auth:t,email:U,emailVerified:he,displayName:N,isAnonymous:de,photoURL:Z,phoneNumber:q,tenantId:ae,stsTokenManager:Ue,createdAt:ie,lastLoginAt:W});return Ae&&Array.isArray(Ae)&&(Pe.providerData=Ae.map($e=>Object.assign({},$e))),ve&&(Pe._redirectEventId=ve),Pe}static async _fromIdTokenResponse(t,r,n=!1){const o=new bv;o.updateFromServerResponse(r);const f=new gf({uid:r.localId,auth:t,stsTokenManager:o,isAnonymous:n});return await aw(f),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Map;function cu(e){Su(e instanceof Function,"Expected a class definition");let t=sj.get(e);return t?(Su(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sj.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}gV.type="NONE";const oj=gV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(e,t,r){return`firebase:${e}:${t}:${r}`}class Em{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:o,name:f}=this.auth;this.fullUserKey=W_(this.userKey,o.apiKey,f),this.fullPersistenceKey=W_("persistence",o.apiKey,f),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?gf._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new Em(cu(oj),t,n);const o=(await Promise.all(r.map(async I=>{if(await I._isAvailable())return I}))).filter(I=>I);let f=o[0]||cu(oj);const y=W_(n,t.config.apiKey,t.name);let s=null;for(const I of r)try{const D=await I._get(y);if(D){const N=gf._fromJSON(t,D);I!==f&&(s=N),f=I;break}}catch{}const k=o.filter(I=>I._shouldAllowMigration);return!f._shouldAllowMigration||!k.length?new Em(f,t,n):(f=k[0],s&&await f._set(y,s.toJSON()),await Promise.all(r.map(async I=>{if(I!==f)try{await I._remove(y)}catch{}})),new Em(f,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vV(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yV(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_V(t))return"Blackberry";if(wV(t))return"Webos";if(cR(t))return"Safari";if((t.includes("chrome/")||xV(t))&&!t.includes("edge/"))return"Chrome";if(bV(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function yV(e=jo()){return/firefox\//i.test(e)}function cR(e=jo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function xV(e=jo()){return/crios\//i.test(e)}function vV(e=jo()){return/iemobile/i.test(e)}function bV(e=jo()){return/android/i.test(e)}function _V(e=jo()){return/blackberry/i.test(e)}function wV(e=jo()){return/webos/i.test(e)}function MS(e=jo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bye(e=jo()){var t;return MS(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function $ye(){return sge()&&document.documentMode===10}function SV(e=jo()){return MS(e)||bV(e)||wV(e)||_V(e)||/windows phone/i.test(e)||vV(e)}function Uye(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(e,t=[]){let r;switch(e){case"Browser":r=aj(jo());break;case"Worker":r=`${aj(jo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${hg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vye{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=f=>new Promise((y,s)=>{try{const k=t(f);y(k)}catch(k){s(k)}});n.onAbort=r,this.queue.push(n);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const o of r)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hye(e,t={}){return qv(e,"GET","/v2/passwordPolicy",dV(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wye=6;class Gye{constructor(t){var r,n,o,f;const y=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=y.minPasswordLength)!==null&&r!==void 0?r:Wye,y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=y.maxPasswordLength),y.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=y.containsLowercaseCharacter),y.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=y.containsUppercaseCharacter),y.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=y.containsNumericCharacter),y.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=y.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(f=t.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var r,n,o,f,y,s;const k={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,k),this.validatePasswordCharacterOptions(t,k),k.isValid&&(k.isValid=(r=k.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),k.isValid&&(k.isValid=(n=k.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),k.isValid&&(k.isValid=(o=k.containsLowercaseLetter)!==null&&o!==void 0?o:!0),k.isValid&&(k.isValid=(f=k.containsUppercaseLetter)!==null&&f!==void 0?f:!0),k.isValid&&(k.isValid=(y=k.containsNumericCharacter)!==null&&y!==void 0?y:!0),k.isValid&&(k.isValid=(s=k.containsNonAlphanumericCharacter)!==null&&s!==void 0?s:!0),k}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),o&&(r.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let o=0;o<t.length;o++)n=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,o,f){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xye{constructor(t,r,n,o){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lj(this),this.idTokenSubscription=new lj(this),this.beforeStateQueue=new Vye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=cu(r)),this._initializationPromise=this.queue(async()=>{var n,o;if(!this._deleted&&(this.persistenceManager=await Em.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var r;const n=await this.assertedPersistence.getCurrentUser();let o=n,f=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const y=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,s=o==null?void 0:o._redirectEventId,k=await this.tryRedirectSignIn(t);(!y||y===s)&&(k!=null&&k.user)&&(o=k.user,f=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(o)}catch(y){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(y))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _n(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await aw(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=kye()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const r=t?Pc(t):null;return r&&_n(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&_n(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(cu(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Hye(this),r=new Gye(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Wv("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&cu(t)||this._popupRedirectResolver;_n(r,this,"argument-error"),this.redirectPersistenceManager=await Em.create(this,[cu(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,o){if(this._deleted)return()=>{};const f=typeof r=="function"?r:r.next.bind(r);let y=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(_n(s,this,"internal-error"),s.then(()=>{y||f(this.currentUser)}),typeof r=="function"){const k=t.addObserver(r,n,o);return()=>{y=!0,k()}}else{const k=t.addObserver(r);return()=>{y=!0,k()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _n(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=CV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r}async _getAppCheckToken(){var t;const r=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return r!=null&&r.error&&_ye(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function LS(e){return Pc(e)}class lj{constructor(t){this.auth=t,this.observer=null,this.addObserver=dge(r=>this.observer=r)}get next(){return _n(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qye(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function Yye(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=o=>{const f=Sc("internal-error");f.customData=o,r(f)},n.type="text/javascript",n.charset="UTF-8",qye().appendChild(n)})}function Zye(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kye(e,t){const r=sR(e,"auth");if(r.isInitialized()){const o=r.getImmediate(),f=r.getOptions();if(iw(f,t??{}))return o;Tc(o,"already-initialized")}return r.initialize({options:t})}function Jye(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(cu);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Qye(e,t,r){const n=LS(e);_n(n._canInitEmulator,n,"emulator-config-failed"),_n(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const o=!!(r!=null&&r.disableWarnings),f=kV(t),{host:y,port:s}=exe(t),k=s===null?"":`:${s}`;n.config.emulator={url:`${f}//${y}${k}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:y,port:s,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||txe()}function kV(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function exe(e){const t=kV(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(n);if(o){const f=o[1];return{host:f,port:cj(n.substr(f.length+1))}}else{const[f,y]=n.split(":");return{host:f,port:cj(y)}}}function cj(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function txe(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return lu("not implemented")}_getIdTokenResponse(t){return lu("not implemented")}_linkToIdToken(t,r){return lu("not implemented")}_getReauthenticationResolver(t){return lu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tm(e,t){return Aye(e,"POST","/v1/accounts:signInWithIdp",dV(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rxe="http://localhost";class If extends EV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new If(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Tc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:o}=r,f=HP(r,["providerId","signInMethod"]);if(!n||!o)return null;const y=new If(n,o);return y.idToken=f.idToken||void 0,y.accessToken=f.accessToken||void 0,y.secret=f.secret,y.nonce=f.nonce,y.pendingToken=f.pendingToken||null,y}_getIdTokenResponse(t){const r=this.buildRequest();return Tm(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,Tm(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,Tm(t,r)}buildRequest(){const t={requestUri:rxe,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=Gv(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends uR{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends Yv{constructor(){super("facebook.com")}static credential(t){return If._fromParams({providerId:vh.PROVIDER_ID,signInMethod:vh.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vh.credentialFromTaggedObject(t)}static credentialFromError(t){return vh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vh.credential(t.oauthAccessToken)}catch{return null}}}vh.FACEBOOK_SIGN_IN_METHOD="facebook.com";vh.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Yv{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return If._fromParams({providerId:dc.PROVIDER_ID,signInMethod:dc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return dc.credentialFromTaggedObject(t)}static credentialFromError(t){return dc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return dc.credential(r,n)}catch{return null}}}dc.GOOGLE_SIGN_IN_METHOD="google.com";dc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends Yv{constructor(){super("github.com")}static credential(t){return If._fromParams({providerId:bh.PROVIDER_ID,signInMethod:bh.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bh.credentialFromTaggedObject(t)}static credentialFromError(t){return bh.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bh.credential(t.oauthAccessToken)}catch{return null}}}bh.GITHUB_SIGN_IN_METHOD="github.com";bh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends Yv{constructor(){super("twitter.com")}static credential(t,r){return If._fromParams({providerId:_h.PROVIDER_ID,signInMethod:_h.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return _h.credentialFromTaggedObject(t)}static credentialFromError(t){return _h.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return _h.credential(r,n)}catch{return null}}}_h.TWITTER_SIGN_IN_METHOD="twitter.com";_h.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,o=!1){const f=await gf._fromIdTokenResponse(t,n,o),y=uj(n);return new Wm({user:f,providerId:y,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const o=uj(n);return new Wm({user:t,providerId:o,_tokenResponse:n,operationType:r})}}function uj(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw extends Tu{constructor(t,r,n,o){var f;super(r.code,r.message),this.operationType=n,this.user=o,Object.setPrototypeOf(this,lw.prototype),this.customData={appName:t.name,tenantId:(f=t.tenantId)!==null&&f!==void 0?f:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,o){return new lw(t,r,n,o)}}function TV(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?lw._fromErrorAndOperation(e,f,t,n):f})}async function nxe(e,t,r=!1){const n=await vv(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Wm._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ixe(e,t,r=!1){const{auth:n}=e,o="reauthenticate";try{const f=await vv(e,TV(n,o,t,e),r);_n(f.idToken,n,"internal-error");const y=lR(f.idToken);_n(y,n,"internal-error");const{sub:s}=y;return _n(e.uid===s,n,"user-mismatch"),Wm._forOperation(e,o,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&Tc(n,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sxe(e,t,r=!1){const n="signIn",o=await TV(e,n,t),f=await Wm._fromIdTokenResponse(e,n,o);return r||await e._updateCurrentUser(f.user),f}function oxe(e,t,r,n){return Pc(e).onIdTokenChanged(t,r,n)}function axe(e,t,r){return Pc(e).beforeAuthStateChanged(t,r)}const cw="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(cw,"1"),this.storage.removeItem(cw),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lxe(){const e=jo();return cR(e)||MS(e)}const cxe=1e3,uxe=10;class IV extends AV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=lxe()&&Uye(),this.fallbackToPolling=SV(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),o=this.localCache[r];n!==o&&t(r,o,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((y,s,k)=>{this.notifyListeners(y,k)});return}const n=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const y=this.storage.getItem(n);if(t.newValue!==y)t.newValue!==null?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!r)return}const o=()=>{const y=this.storage.getItem(n);!r&&this.localCache[n]===y||this.notifyListeners(n,y)},f=this.storage.getItem(n);$ye()&&f!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,uxe):o()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const o of Array.from(n))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},cxe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}IV.type="LOCAL";const hxe=IV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV extends AV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}PV.type="SESSION";const RV=PV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dxe(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const n=new OS(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:o,data:f}=r.data,y=this.handlersMap[o];if(!(y!=null&&y.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:o});const s=Array.from(y).map(async I=>I(r.origin,f)),k=await dxe(s);r.ports[0].postMessage({status:"done",eventId:n,eventType:o,response:k})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}OS.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fxe{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let f,y;return new Promise((s,k)=>{const I=hR("",20);o.port1.start();const D=setTimeout(()=>{k(new Error("unsupported_event"))},n);y={messageChannel:o,onMessage(N){const U=N;if(U.data.eventId===I)switch(U.data.status){case"ack":clearTimeout(D),f=setTimeout(()=>{k(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),s(U.data.response);break;default:clearTimeout(D),clearTimeout(f),k(new Error("invalid_response"));break}}},this.handlers.add(y),o.port1.addEventListener("message",y.onMessage),this.target.postMessage({eventType:t,eventId:I,data:r},[o.port2])}).finally(()=>{y&&this.removeMessageHandler(y)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(){return window}function pxe(e){Cc().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(){return typeof Cc().WorkerGlobalScope<"u"&&typeof Cc().importScripts=="function"}async function mxe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gxe(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function yxe(){return MV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LV="firebaseLocalStorageDb",xxe=1,uw="firebaseLocalStorage",OV="fbase_key";class Zv{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function DS(e,t){return e.transaction([uw],t?"readwrite":"readonly").objectStore(uw)}function vxe(){const e=indexedDB.deleteDatabase(LV);return new Zv(e).toPromise()}function pA(){const e=indexedDB.open(LV,xxe);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(uw,{keyPath:OV})}catch(o){r(o)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(uw)?t(n):(n.close(),await vxe(),t(await pA()))})})}async function hj(e,t,r){const n=DS(e,!0).put({[OV]:t,value:r});return new Zv(n).toPromise()}async function bxe(e,t){const r=DS(e,!1).get(t),n=await new Zv(r).toPromise();return n===void 0?null:n.value}function dj(e,t){const r=DS(e,!0).delete(t);return new Zv(r).toPromise()}const _xe=800,wxe=3;class DV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pA(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>wxe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=OS._getInstance(yxe()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await mxe(),!this.activeServiceWorker)return;this.sender=new fxe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((t=n[0])===null||t===void 0)&&t.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gxe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await pA();return await hj(t,cw,"1"),await dj(t,cw),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>hj(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>bxe(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dj(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const f=DS(o,!1).getAll();return new Zv(f).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;for(const{fbase_key:o,value:f}of t)n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(f)&&(this.notifyListeners(o,f),r.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!n.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const o of Array.from(n))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_xe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DV.type="LOCAL";const Sxe=DV;new Xv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(e,t){return t?cu(t):(_n(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR extends EV{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tm(t,this._buildIdpRequest())}_linkToIdToken(t,r){return Tm(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return Tm(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Cxe(e){return sxe(e.auth,new dR(e),e.bypassAuthState)}function kxe(e){const{auth:t,user:r}=e;return _n(r,t,"internal-error"),ixe(r,new dR(e),e.bypassAuthState)}async function Exe(e){const{auth:t,user:r}=e;return _n(r,t,"internal-error"),nxe(r,new dR(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(t,r,n,o,f=!1){this.auth=t,this.resolver=n,this.user=o,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:o,tenantId:f,error:y,type:s}=t;if(y){this.reject(y);return}const k={auth:this.auth,requestUri:r,sessionId:n,tenantId:f||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(k))}catch(I){this.reject(I)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Cxe;case"linkViaPopup":case"linkViaRedirect":return Exe;case"reauthViaPopup":case"reauthViaRedirect":return kxe;default:Tc(this.auth,"internal-error")}}resolve(t){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Su(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Txe=new Xv(2e3,1e4);async function jV(e,t,r){const n=LS(e);wye(e,t,uR);const o=zV(n,r);return new af(n,"signInViaPopup",t,o).executeNotNull()}class af extends NV{constructor(t,r,n,o,f){super(t,r,o,f),this.provider=n,this.authWindow=null,this.pollId=null,af.currentPopupAction&&af.currentPopupAction.cancel(),af.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return _n(t,this.auth,"internal-error"),t}async onExecution(){Su(this.filter.length===1,"Popup operations only handle one event");const t=hR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sc(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Sc(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,af.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sc(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Txe.get())};t()}}af.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Axe="pendingRedirect",G_=new Map;class Ixe extends NV{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=G_.get(this.auth._key());if(!t){try{const n=await Pxe(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}G_.set(this.auth._key(),t)}return this.bypassAuthState||G_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Pxe(e,t){const r=Lxe(t),n=Mxe(e);if(!await n._isAvailable())return!1;const o=await n._get(r)==="true";return await n._remove(r),o}function Rxe(e,t){G_.set(e._key(),t)}function Mxe(e){return cu(e._redirectPersistence)}function Lxe(e){return W_(Axe,e.config.apiKey,e.name)}async function Oxe(e,t,r=!1){const n=LS(e),o=zV(n,t),y=await new Ixe(n,o,r).execute();return y&&!r&&(delete y.user._redirectEventId,await n._persistUserIfCurrent(y.user),await n._setRedirectUser(null,t)),y}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dxe=10*60*1e3;class zxe{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Nxe(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!FV(t)){const o=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Sc(this.auth,o))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Dxe&&this.cachedEventUids.clear(),this.cachedEventUids.has(fj(t))}saveEventToCache(t){this.cachedEventUids.add(fj(t)),this.lastProcessedEventTime=Date.now()}}function fj(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function FV({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Nxe(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FV(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jxe(e,t={}){return qv(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fxe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bxe=/^https?/;async function $xe(e){if(e.config.emulator)return;const{authorizedDomains:t}=await jxe(e);for(const r of t)try{if(Uxe(r))return}catch{}Tc(e,"unauthorized-domain")}function Uxe(e){const t=fA(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const y=new URL(e);return y.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&y.hostname===n}if(!Bxe.test(r))return!1;if(Fxe.test(e))return n===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vxe=new Xv(3e4,6e4);function pj(){const e=Cc().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Hxe(e){return new Promise((t,r)=>{var n,o,f;function y(){pj(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pj(),r(Sc(e,"network-request-failed"))},timeout:Vxe.get()})}if(!((o=(n=Cc().gapi)===null||n===void 0?void 0:n.iframes)===null||o===void 0)&&o.Iframe)t(gapi.iframes.getContext());else if(!((f=Cc().gapi)===null||f===void 0)&&f.load)y();else{const s=Zye("iframefcb");return Cc()[s]=()=>{gapi.load?y():r(Sc(e,"network-request-failed"))},Yye(`https://apis.google.com/js/api.js?onload=${s}`).catch(k=>r(k))}}).catch(t=>{throw X_=null,t})}let X_=null;function Wxe(e){return X_=X_||Hxe(e),X_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gxe=new Xv(5e3,15e3),Xxe="__/auth/iframe",qxe="emulator/auth/iframe",Yxe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zxe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kxe(e){const t=e.config;_n(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?aR(t,qxe):`https://${e.config.authDomain}/${Xxe}`,n={apiKey:t.apiKey,appName:e.name,v:hg},o=Zxe.get(e.config.apiHost);o&&(n.eid=o);const f=e._getFrameworks();return f.length&&(n.fw=f.join(",")),`${r}?${Gv(n).slice(1)}`}async function Jxe(e){const t=await Wxe(e),r=Cc().gapi;return _n(r,e,"internal-error"),t.open({where:document.body,url:Kxe(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yxe,dontclear:!0},n=>new Promise(async(o,f)=>{await n.restyle({setHideOnLeave:!1});const y=Sc(e,"network-request-failed"),s=Cc().setTimeout(()=>{f(y)},Gxe.get());function k(){Cc().clearTimeout(s),o(n)}n.ping(k).then(k,()=>{f(y)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qxe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eve=500,tve=600,rve="_blank",nve="http://localhost";class mj{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ive(e,t,r,n=eve,o=tve){const f=Math.max((window.screen.availHeight-o)/2,0).toString(),y=Math.max((window.screen.availWidth-n)/2,0).toString();let s="";const k=Object.assign(Object.assign({},Qxe),{width:n.toString(),height:o.toString(),top:f,left:y}),I=jo().toLowerCase();r&&(s=xV(I)?rve:r),yV(I)&&(t=t||nve,k.scrollbars="yes");const D=Object.entries(k).reduce((U,[q,Z])=>`${U}${q}=${Z},`,"");if(Bye(I)&&s!=="_self")return sve(t||"",s),new mj(null);const N=window.open(t||"",s,D);_n(N,e,"popup-blocked");try{N.focus()}catch{}return new mj(N)}function sve(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ove="__/auth/handler",ave="emulator/auth/handler",lve=encodeURIComponent("fac");async function gj(e,t,r,n,o,f){_n(e.config.authDomain,e,"auth-domain-config-required"),_n(e.config.apiKey,e,"invalid-api-key");const y={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:hg,eventId:o};if(t instanceof uR){t.setDefaultLanguage(e.languageCode),y.providerId=t.providerId||"",hge(t.getCustomParameters())||(y.customParameters=JSON.stringify(t.getCustomParameters()));for(const[D,N]of Object.entries(f||{}))y[D]=N}if(t instanceof Yv){const D=t.getScopes().filter(N=>N!=="");D.length>0&&(y.scopes=D.join(","))}e.tenantId&&(y.tid=e.tenantId);const s=y;for(const D of Object.keys(s))s[D]===void 0&&delete s[D];const k=await e._getAppCheckToken(),I=k?`#${lve}=${encodeURIComponent(k)}`:"";return`${cve(e)}?${Gv(s).slice(1)}${I}`}function cve({config:e}){return e.emulator?aR(e,ave):`https://${e.authDomain}/${ove}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="webStorageSupport";class uve{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RV,this._completeRedirectFn=Oxe,this._overrideRedirectResult=Rxe}async _openPopup(t,r,n,o){var f;Su((f=this.eventManagers[t._key()])===null||f===void 0?void 0:f.manager,"_initialize() not called before _openPopup()");const y=await gj(t,r,n,fA(),o);return ive(t,y,hR())}async _openRedirect(t,r,n,o){await this._originValidation(t);const f=await gj(t,r,n,fA(),o);return pxe(f),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:o,promise:f}=this.eventManagers[r];return o?Promise.resolve(o):(Su(f,"If manager is not set, promise should be"),f)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Jxe(t),n=new zxe(t);return r.register("authEvent",o=>(_n(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:n.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(Zk,{type:Zk},o=>{var f;const y=(f=o==null?void 0:o[0])===null||f===void 0?void 0:f[Zk];y!==void 0&&r(!!y),Tc(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=$xe(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return SV()||cR()||MS()}}const hve=uve;var yj="@firebase/auth",xj="1.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dve{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){_n(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fve(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function pve(e){Hm(new Tf("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),f=t.getProvider("app-check-internal"),{apiKey:y,authDomain:s}=n.options;_n(y&&!y.includes(":"),"invalid-api-key",{appName:n.name});const k={apiKey:y,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CV(e)},I=new Xye(n,o,f,k);return Jye(I,r),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Hm(new Tf("auth-internal",t=>{const r=LS(t.getProvider("auth").getImmediate());return(n=>new dve(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),$h(yj,xj,fve(e)),$h(yj,xj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mve=5*60,gve=eV("authIdTokenMaxAge")||mve;let vj=null;const yve=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>gve)return;const o=r==null?void 0:r.token;vj!==o&&(vj=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xve(e=sV()){const t=sR(e,"auth");if(t.isInitialized())return t.getImmediate();const r=Kye(e,{popupRedirectResolver:hve,persistence:[Sxe,hxe,RV]}),n=eV("authTokenSyncURL");if(n){const f=yve(n);axe(r,f,()=>f(r.currentUser)),oxe(r,y=>f(y))}const o=JU("auth");return o&&Qye(r,`http://${o}`),r}pve("Browser");var vve="firebase",bve="10.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$h(vve,bve,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV="firebasestorage.googleapis.com",$V="storageBucket",_ve=2*60*1e3,wve=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Tu{constructor(t,r,n=0){super(Kk(t),`Firebase Storage: ${r} (${Kk(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Kk(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ps;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ps||(Ps={}));function Kk(e){return"storage/"+e}function fR(){const e="An unknown error occurred, please check the error payload for server response.";return new Rs(Ps.UNKNOWN,e)}function Sve(e){return new Rs(Ps.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Cve(e){return new Rs(Ps.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function kve(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rs(Ps.UNAUTHENTICATED,e)}function Eve(){return new Rs(Ps.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Tve(e){return new Rs(Ps.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Ave(){return new Rs(Ps.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ive(){return new Rs(Ps.CANCELED,"User canceled the upload/download.")}function Pve(e){return new Rs(Ps.INVALID_URL,"Invalid URL '"+e+"'.")}function Rve(e){return new Rs(Ps.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Mve(){return new Rs(Ps.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$V+"' property when initializing the app?")}function Lve(){return new Rs(Ps.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ove(){return new Rs(Ps.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Dve(e){return new Rs(Ps.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mA(e){return new Rs(Ps.INVALID_ARGUMENT,e)}function UV(){return new Rs(Ps.APP_DELETED,"The Firebase app was deleted.")}function zve(e){return new Rs(Ps.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dx(e,t){return new Rs(Ps.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Xy(e){throw new Rs(Ps.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=Ma.makeFromUrl(t,r)}catch{return new Ma(t,"")}if(n.path==="")return n;throw Rve(t)}static makeFromUrl(t,r){let n=null;const o="([A-Za-z0-9.\\-_]+)";function f(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const y="(/(.*))?$",s=new RegExp("^gs://"+o+y,"i"),k={bucket:1,path:3};function I(he){he.path_=decodeURIComponent(he.path)}const D="v[A-Za-z0-9_]+",N=r.replace(/[.]/g,"\\."),U="(/([^?#]*).*)?$",q=new RegExp(`^https?://${N}/${D}/b/${o}/o${U}`,"i"),Z={bucket:1,path:3},ae=r===BV?"(?:storage.googleapis.com|storage.cloud.google.com)":r,ve="([^?#]*)",ie=new RegExp(`^https?://${ae}/${o}/${ve}`,"i"),K=[{regex:s,indices:k,postModify:f},{regex:q,indices:Z,postModify:I},{regex:ie,indices:{bucket:1,path:2},postModify:I}];for(let he=0;he<K.length;he++){const de=K[he],Ae=de.regex.exec(t);if(Ae){const Te=Ae[de.indices.bucket];let Ue=Ae[de.indices.path];Ue||(Ue=""),n=new Ma(Te,Ue),de.postModify(n);break}}if(n==null)throw Pve(t);return n}}class Nve{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jve(e,t,r){let n=1,o=null,f=null,y=!1,s=0;function k(){return s===2}let I=!1;function D(...ve){I||(I=!0,t.apply(null,ve))}function N(ve){o=setTimeout(()=>{o=null,e(q,k())},ve)}function U(){f&&clearTimeout(f)}function q(ve,...ie){if(I){U();return}if(ve){U(),D.call(null,ve,...ie);return}if(k()||y){U(),D.call(null,ve,...ie);return}n<64&&(n*=2);let K;s===1?(s=2,K=0):K=(n+Math.random())*1e3,N(K)}let Z=!1;function ae(ve){Z||(Z=!0,U(),!I&&(o!==null?(ve||(s=2),clearTimeout(o),N(0)):ve||(s=1)))}return N(0),f=setTimeout(()=>{y=!0,ae(!0)},r),ae}function Fve(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bve(e){return e!==void 0}function $ve(e){return typeof e=="object"&&!Array.isArray(e)}function pR(e){return typeof e=="string"||e instanceof String}function bj(e){return mR()&&e instanceof Blob}function mR(){return typeof Blob<"u"&&!rge()}function _j(e,t,r,n){if(n<t)throw mA(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw mA(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function VV(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const o=t(n)+"="+t(e[n]);r=r+o+"&"}return r=r.slice(0,-1),r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yf;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(yf||(yf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uve(e,t){const r=e>=500&&e<600,o=[408,429].indexOf(e)!==-1,f=t.indexOf(e)!==-1;return r||o||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vve{constructor(t,r,n,o,f,y,s,k,I,D,N,U=!0){this.url_=t,this.method_=r,this.headers_=n,this.body_=o,this.successCodes_=f,this.additionalRetryCodes_=y,this.callback_=s,this.errorCallback_=k,this.timeout_=I,this.progressCallback_=D,this.connectionFactory_=N,this.retry=U,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((q,Z)=>{this.resolve_=q,this.reject_=Z,this.start_()})}start_(){const t=(n,o)=>{if(o){n(!1,new Qb(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const y=s=>{const k=s.loaded,I=s.lengthComputable?s.total:-1;this.progressCallback_!==null&&this.progressCallback_(k,I)};this.progressCallback_!==null&&f.addUploadProgressListener(y),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(y),this.pendingConnection_=null;const s=f.getErrorCode()===yf.NO_ERROR,k=f.getStatus();if(!s||Uve(k,this.additionalRetryCodes_)&&this.retry){const D=f.getErrorCode()===yf.ABORT;n(!1,new Qb(!1,null,D));return}const I=this.successCodes_.indexOf(k)!==-1;n(!0,new Qb(I,f))})},r=(n,o)=>{const f=this.resolve_,y=this.reject_,s=o.connection;if(o.wasSuccessCode)try{const k=this.callback_(s,s.getResponse());Bve(k)?f(k):f()}catch(k){y(k)}else if(s!==null){const k=fR();k.serverResponse=s.getErrorText(),this.errorCallback_?y(this.errorCallback_(s,k)):y(k)}else if(o.canceled){const k=this.appDelete_?UV():Ive();y(k)}else{const k=Ave();y(k)}};this.canceled_?r(!1,new Qb(!1,null,!0)):this.backoffId_=jve(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Fve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qb{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Hve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Wve(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Gve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Xve(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function qve(e,t,r,n,o,f,y=!0){const s=VV(e.urlParams),k=e.url+s,I=Object.assign({},e.headers);return Gve(I,t),Hve(I,r),Wve(I,f),Xve(I,n),new Vve(k,e.method,I,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,o,y)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yve(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zve(...e){const t=Yve();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(mR())return new Blob(e);throw new Rs(Ps.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Kve(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jve(e){if(typeof atob>"u")throw Dve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jk{constructor(t,r){this.data=t,this.contentType=r||null}}function Qve(e,t){switch(e){case pc.RAW:return new Jk(HV(t));case pc.BASE64:case pc.BASE64URL:return new Jk(WV(e,t));case pc.DATA_URL:return new Jk(t0e(t),r0e(t))}throw fR()}function HV(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const f=n,y=e.charCodeAt(++r);n=65536|(f&1023)<<10|y&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function e0e(e){let t;try{t=decodeURIComponent(e)}catch{throw Dx(pc.DATA_URL,"Malformed data URL.")}return HV(t)}function WV(e,t){switch(e){case pc.BASE64:{const o=t.indexOf("-")!==-1,f=t.indexOf("_")!==-1;if(o||f)throw Dx(e,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case pc.BASE64URL:{const o=t.indexOf("+")!==-1,f=t.indexOf("/")!==-1;if(o||f)throw Dx(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Jve(t)}catch(o){throw o.message.includes("polyfill")?o:Dx(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);return n}class GV{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Dx(pc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=n0e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function t0e(e){const t=new GV(e);return t.base64?WV(pc.BASE64,t.rest):e0e(t.rest)}function r0e(e){return new GV(e).contentType}function n0e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t,r){let n=0,o="";bj(t)?(this.data_=t,n=t.size,o=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=o}size(){return this.size_}type(){return this.type_}slice(t,r){if(bj(this.data_)){const n=this.data_,o=Kve(n,t,r);return o===null?null:new wh(o)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new wh(n,!0)}}static getBlob(...t){if(mR()){const r=t.map(n=>n instanceof wh?n.data_:n);return new wh(Zve.apply(null,r))}else{const r=t.map(y=>pR(y)?Qve(pc.RAW,y).data:y.data_);let n=0;r.forEach(y=>{n+=y.byteLength});const o=new Uint8Array(n);let f=0;return r.forEach(y=>{for(let s=0;s<y.length;s++)o[f++]=y[s]}),new wh(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(e){let t;try{t=JSON.parse(e)}catch{return null}return $ve(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function s0e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function qV(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0e(e,t){return t}class Vo{constructor(t,r,n,o){this.server=t,this.local=r||t,this.writable=!!n,this.xform=o||o0e}}let e_=null;function a0e(e){return!pR(e)||e.length<2?e:qV(e)}function YV(){if(e_)return e_;const e=[];e.push(new Vo("bucket")),e.push(new Vo("generation")),e.push(new Vo("metageneration")),e.push(new Vo("name","fullPath",!0));function t(f,y){return a0e(y)}const r=new Vo("name");r.xform=t,e.push(r);function n(f,y){return y!==void 0?Number(y):y}const o=new Vo("size");return o.xform=n,e.push(o),e.push(new Vo("timeCreated")),e.push(new Vo("updated")),e.push(new Vo("md5Hash",null,!0)),e.push(new Vo("cacheControl",null,!0)),e.push(new Vo("contentDisposition",null,!0)),e.push(new Vo("contentEncoding",null,!0)),e.push(new Vo("contentLanguage",null,!0)),e.push(new Vo("contentType",null,!0)),e.push(new Vo("metadata","customMetadata",!0)),e_=e,e_}function l0e(e,t){function r(){const n=e.bucket,o=e.fullPath,f=new Ma(n,o);return t._makeStorageReference(f)}Object.defineProperty(e,"ref",{get:r})}function c0e(e,t,r){const n={};n.type="file";const o=r.length;for(let f=0;f<o;f++){const y=r[f];n[y.local]=y.xform(n,t[y.server])}return l0e(n,e),n}function ZV(e,t,r){const n=XV(t);return n===null?null:c0e(e,n,r)}function u0e(e,t,r,n){const o=XV(t);if(o===null||!pR(o.downloadTokens))return null;const f=o.downloadTokens;if(f.length===0)return null;const y=encodeURIComponent;return f.split(",").map(I=>{const D=e.bucket,N=e.fullPath,U="/b/"+y(D)+"/o/"+y(N),q=gR(U,r,n),Z=VV({alt:"media",token:I});return q+Z})[0]}function h0e(e,t){const r={},n=t.length;for(let o=0;o<n;o++){const f=t[o];f.writable&&(r[f.server]=e[f.local])}return JSON.stringify(r)}class KV{constructor(t,r,n,o){this.url=t,this.method=r,this.handler=n,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(e){if(!e)throw fR()}function d0e(e,t){function r(n,o){const f=ZV(e,o,t);return JV(f!==null),f}return r}function f0e(e,t){function r(n,o){const f=ZV(e,o,t);return JV(f!==null),u0e(f,o,e.host,e._protocol)}return r}function QV(e){function t(r,n){let o;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?o=Eve():o=kve():r.getStatus()===402?o=Cve(e.bucket):r.getStatus()===403?o=Tve(e.path):o=n,o.status=r.getStatus(),o.serverResponse=n.serverResponse,o}return t}function p0e(e){const t=QV(e);function r(n,o){let f=t(n,o);return n.getStatus()===404&&(f=Sve(e.path)),f.serverResponse=o.serverResponse,f}return r}function m0e(e,t,r){const n=t.fullServerUrl(),o=gR(n,e.host,e._protocol),f="GET",y=e.maxOperationRetryTime,s=new KV(o,f,f0e(e,r),y);return s.errorHandler=p0e(t),s}function g0e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function y0e(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=g0e(null,t)),n}function x0e(e,t,r,n,o){const f=t.bucketOnlyServerUrl(),y={"X-Goog-Upload-Protocol":"multipart"};function s(){let K="";for(let he=0;he<2;he++)K=K+Math.random().toString().slice(2);return K}const k=s();y["Content-Type"]="multipart/related; boundary="+k;const I=y0e(t,n,o),D=h0e(I,r),N="--"+k+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+D+`\r
--`+k+`\r
Content-Type: `+I.contentType+`\r
\r
`,U=`\r
--`+k+"--",q=wh.getBlob(N,n,U);if(q===null)throw Lve();const Z={name:I.fullPath},ae=gR(f,e.host,e._protocol),ve="POST",ie=e.maxUploadRetryTime,W=new KV(ae,ve,d0e(e,r),ie);return W.urlParams=Z,W.headers=y,W.body=q.uploadData(),W.errorHandler=QV(t),W}class v0e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yf.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yf.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yf.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,o){if(this.sent_)throw Xy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,t,!0),o!==void 0)for(const f in o)o.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,o[f].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class b0e extends v0e{initXhr(){this.xhr_.responseType="text"}}function e8(){return new b0e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zS=class gA{constructor(t,r){this._service=t,r instanceof Ma?this._location=r:this._location=Ma.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new gA(t,r)}get root(){const t=new Ma(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qV(this._location.path)}get storage(){return this._service}get parent(){const t=i0e(this._location.path);if(t===null)return null;const r=new Ma(this._location.bucket,t);return new gA(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw zve(t)}};function _0e(e,t,r){e._throwIfRoot("uploadBytes");const n=x0e(e.storage,e._location,YV(),new wh(t,!0),r);return e.storage.makeRequestWithTokens(n,e8).then(o=>({metadata:o,ref:e}))}function w0e(e){e._throwIfRoot("getDownloadURL");const t=m0e(e.storage,e._location,YV());return e.storage.makeRequestWithTokens(t,e8).then(r=>{if(r===null)throw Ove();return r})}function S0e(e,t){const r=s0e(e._location.path,t),n=new Ma(e._location.bucket,r);return new zS(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0e(e){return/^[A-Za-z]+:\/\//.test(e)}function k0e(e,t){return new zS(e,t)}function t8(e,t){if(e instanceof yR){const r=e;if(r._bucket==null)throw Mve();const n=new zS(r,r._bucket);return t!=null?t8(n,t):n}else return t!==void 0?S0e(e,t):e}function E0e(e,t){if(t&&C0e(t)){if(e instanceof yR)return k0e(e,t);throw mA("To use ref(service, url), the first argument must be a Storage instance.")}else return t8(e,t)}function wj(e,t){const r=t==null?void 0:t[$V];return r==null?null:Ma.makeFromBucketSpec(r,e)}function T0e(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";const{mockUserToken:o}=n;o&&(e._overrideAuthToken=typeof o=="string"?o:ege(o,e.app.options.projectId))}class yR{constructor(t,r,n,o,f){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=o,this._firebaseVersion=f,this._bucket=null,this._host=BV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_ve,this._maxUploadRetryTime=wve,this._requests=new Set,o!=null?this._bucket=Ma.makeFromBucketSpec(o,this._host):this._bucket=wj(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ma.makeFromBucketSpec(this._url,t):this._bucket=wj(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){_j("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){_j("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new zS(this,t)}_makeRequest(t,r,n,o,f=!0){if(this._deleted)return new Nve(UV());{const y=qve(t,this._appId,n,o,r,this._firebaseVersion,f);return this._requests.add(y),y.getPromise().then(()=>this._requests.delete(y),()=>this._requests.delete(y)),y}}async makeRequestWithTokens(t,r){const[n,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,o).getPromise()}}const Sj="@firebase/storage",Cj="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8="storage";function A0e(e,t,r){return e=Pc(e),_0e(e,t,r)}function I0e(e){return e=Pc(e),w0e(e)}function P0e(e,t){return e=Pc(e),E0e(e,t)}function R0e(e=sV(),t){e=Pc(e);const n=sR(e,r8).getImmediate({identifier:t}),o=Jme("storage");return o&&M0e(n,...o),n}function M0e(e,t,r,n={}){T0e(e,t,r,n)}function L0e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new yR(r,n,o,t,hg)}function O0e(){Hm(new Tf(r8,L0e,"PUBLIC").setMultipleInstances(!0)),$h(Sj,Cj,""),$h(Sj,Cj,"esm2017")}O0e();const D0e={apiKey:"AIzaSyBckF8jy-cLcv2w3HomoatHGBJPdccueAQ",authDomain:"bookat-87c98.firebaseapp.com",projectId:"bookat-87c98",storageBucket:"bookat-87c98.appspot.com",messagingSenderId:"901011445937",appId:"1:901011445937:web:72bd75f1edd8f98377ea90",measurementId:"G-9RS5W55F0B"},n8=iV(D0e),i8=xve(n8),z0e=R0e(n8);function Hf(e){this._maxSize=e,this.clear()}Hf.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Hf.prototype.get=function(e){return this._values[e]};Hf.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var N0e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,s8=/^\d+$/,j0e=/^\d/,F0e=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,B0e=/^\s*(['"]?)(.*?)(\1)\s*$/,xR=512,kj=new Hf(xR),Ej=new Hf(xR),Tj=new Hf(xR),xf={Cache:Hf,split:yA,normalizePath:Qk,setter:function(e){var t=Qk(e);return Ej.get(e)||Ej.set(e,function(n,o){for(var f=0,y=t.length,s=n;f<y-1;){var k=t[f];if(k==="__proto__"||k==="constructor"||k==="prototype")return n;s=s[t[f++]]}s[t[f]]=o})},getter:function(e,t){var r=Qk(e);return Tj.get(e)||Tj.set(e,function(o){for(var f=0,y=r.length;f<y;)if(o!=null||!t)o=o[r[f++]];else return;return o})},join:function(e){return e.reduce(function(t,r){return t+(vR(r)||s8.test(r)?"["+r+"]":(t?".":"")+r)},"")},forEach:function(e,t,r){$0e(Array.isArray(e)?e:yA(e),t,r)}};function Qk(e){return kj.get(e)||kj.set(e,yA(e).map(function(t){return t.replace(B0e,"$2")}))}function yA(e){return e.match(N0e)||[""]}function $0e(e,t,r){var n=e.length,o,f,y,s;for(f=0;f<n;f++)o=e[f],o&&(H0e(o)&&(o='"'+o+'"'),s=vR(o),y=!s&&/^\d+$/.test(o),t.call(r,o,s,y,f,e))}function vR(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function U0e(e){return e.match(j0e)&&!e.match(s8)}function V0e(e){return F0e.test(e)}function H0e(e){return!vR(e)&&(U0e(e)||V0e(e))}const W0e=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,NS=e=>e.match(W0e)||[],jS=e=>e[0].toUpperCase()+e.slice(1),bR=(e,t)=>NS(e).join(t).toLowerCase(),o8=e=>NS(e).reduce((t,r)=>`${t}${t?r[0].toUpperCase()+r.slice(1).toLowerCase():r.toLowerCase()}`,""),G0e=e=>jS(o8(e)),X0e=e=>bR(e,"_"),q0e=e=>bR(e,"-"),Y0e=e=>jS(bR(e," ")),Z0e=e=>NS(e).map(jS).join(" ");var eE={words:NS,upperFirst:jS,camelCase:o8,pascalCase:G0e,snakeCase:X0e,kebabCase:q0e,sentenceCase:Y0e,titleCase:Z0e},_R={exports:{}};_R.exports=function(e){return a8(K0e(e),e)};_R.exports.array=a8;function a8(e,t){var r=e.length,n=new Array(r),o={},f=r,y=J0e(t),s=Q0e(e);for(t.forEach(function(I){if(!s.has(I[0])||!s.has(I[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});f--;)o[f]||k(e[f],f,new Set);return n;function k(I,D,N){if(N.has(I)){var U;try{U=", node was:"+JSON.stringify(I)}catch{U=""}throw new Error("Cyclic dependency"+U)}if(!s.has(I))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(I));if(!o[D]){o[D]=!0;var q=y.get(I)||new Set;if(q=Array.from(q),D=q.length){N.add(I);do{var Z=q[--D];k(Z,s.get(Z),N)}while(D);N.delete(I)}n[--r]=I}}}function K0e(e){for(var t=new Set,r=0,n=e.length;r<n;r++){var o=e[r];t.add(o[0]),t.add(o[1])}return Array.from(t)}function J0e(e){for(var t=new Map,r=0,n=e.length;r<n;r++){var o=e[r];t.has(o[0])||t.set(o[0],new Set),t.has(o[1])||t.set(o[1],new Set),t.get(o[0]).add(o[1])}return t}function Q0e(e){for(var t=new Map,r=0,n=e.length;r<n;r++)t.set(e[r],r);return t}var ebe=_R.exports;const tbe=Of(ebe),rbe=Object.prototype.toString,nbe=Error.prototype.toString,ibe=RegExp.prototype.toString,sbe=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",obe=/^Symbol\((.*)\)(.*)$/;function abe(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function Aj(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const r=typeof e;if(r==="number")return abe(e);if(r==="string")return t?`"${e}"`:e;if(r==="function")return"[Function "+(e.name||"anonymous")+"]";if(r==="symbol")return sbe.call(e).replace(obe,"Symbol($1)");const n=rbe.call(e).slice(8,-1);return n==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):n==="Error"||e instanceof Error?"["+nbe.call(e)+"]":n==="RegExp"?ibe.call(e):null}function Uh(e,t){let r=Aj(e,t);return r!==null?r:JSON.stringify(e,function(n,o){let f=Aj(this[n],t);return f!==null?f:o},2)}function l8(e){return e==null?[]:[].concat(e)}let c8,lbe=/\$\{\s*(\w+)\s*\}/g;c8=Symbol.toStringTag;class ua extends Error{static formatError(t,r){const n=r.label||r.path||"this";return n!==r.path&&(r=Object.assign({},r,{path:n})),typeof t=="string"?t.replace(lbe,(o,f)=>Uh(r[f])):typeof t=="function"?t(r):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,r,n,o,f){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this[c8]="Error",this.name="ValidationError",this.value=r,this.path=n,this.type=o,this.errors=[],this.inner=[],l8(t).forEach(y=>{if(ua.isError(y)){this.errors.push(...y.errors);const s=y.inner.length?y.inner:[y];this.inner.push(...s)}else this.errors.push(y)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],!f&&Error.captureStackTrace&&Error.captureStackTrace(this,ua)}}let ac={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:n})=>{const o=n!=null&&n!==r?` (cast from the value \`${Uh(n,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${Uh(r,!0)}\``+o:`${e} must match the configured type. The validated value was: \`${Uh(r,!0)}\``+o}},Al={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},uh={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},xA={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},cbe={isValue:"${path} field must be ${value}"},vA={noUnknown:"${path} field has unspecified keys: ${unknown}"},ube={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},hbe={notType:e=>{const{path:t,value:r,spec:n}=e,o=n.types.length;if(Array.isArray(r)){if(r.length<o)return`${t} tuple value has too few items, expected a length of ${o} but got ${r.length} for value: \`${Uh(r,!0)}\``;if(r.length>o)return`${t} tuple value has too many items, expected a length of ${o} but got ${r.length} for value: \`${Uh(r,!0)}\``}return ua.formatError(ac.notType,e)}};Object.assign(Object.create(null),{mixed:ac,string:Al,number:uh,date:xA,object:vA,array:ube,boolean:cbe,tuple:hbe});const wR=e=>e&&e.__isYupSchema__;class hw{static fromOptions(t,r){if(!r.then&&!r.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:o,otherwise:f}=r,y=typeof n=="function"?n:(...s)=>s.every(k=>k===n);return new hw(t,(s,k)=>{var I;let D=y(...s)?o:f;return(I=D==null?void 0:D(k))!=null?I:k})}constructor(t,r){this.fn=void 0,this.refs=t,this.refs=t,this.fn=r}resolve(t,r){let n=this.refs.map(f=>f.getValue(r==null?void 0:r.value,r==null?void 0:r.parent,r==null?void 0:r.context)),o=this.fn(n,t,r);if(o===void 0||o===t)return t;if(!wR(o))throw new TypeError("conditions must return a schema object");return o.resolve(r)}}const t_={context:"$",value:"."};function u8(e,t){return new ud(e,t)}class ud{constructor(t,r={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===t_.context,this.isValue=this.key[0]===t_.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?t_.context:this.isValue?t_.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&xf.getter(this.path,!0),this.map=r.map}getValue(t,r,n){let o=this.isContext?n:this.isValue?t:r;return this.getter&&(o=this.getter(o||{})),this.map&&(o=this.map(o)),o}cast(t,r){return this.getValue(t,r==null?void 0:r.parent,r==null?void 0:r.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}ud.prototype.__isYupRef=!0;const uu=e=>e==null;function $p(e){function t({value:r,path:n="",options:o,originalValue:f,schema:y},s,k){const{name:I,test:D,params:N,message:U,skipAbsent:q}=e;let{parent:Z,context:ae,abortEarly:ve=y.spec.abortEarly,disableStackTrace:ie=y.spec.disableStackTrace}=o;function W(Ve){return ud.isRef(Ve)?Ve.getValue(r,Z,ae):Ve}function K(Ve={}){var Fe;const Ye=Object.assign({value:r,originalValue:f,label:y.spec.label,path:Ve.path||n,spec:y.spec},N,Ve.params);for(const Pt of Object.keys(Ye))Ye[Pt]=W(Ye[Pt]);const ft=new ua(ua.formatError(Ve.message||U,Ye),r,Ye.path,Ve.type||I,(Fe=Ve.disableStackTrace)!=null?Fe:ie);return ft.params=Ye,ft}const he=ve?s:k;let de={path:n,parent:Z,type:I,from:o.from,createError:K,resolve:W,options:o,originalValue:f,schema:y};const Ae=Ve=>{ua.isError(Ve)?he(Ve):Ve?k(null):he(K())},Te=Ve=>{ua.isError(Ve)?he(Ve):s(Ve)};if(q&&uu(r))return Ae(!0);let Pe;try{var $e;if(Pe=D.call(de,r,de),typeof(($e=Pe)==null?void 0:$e.then)=="function"){if(o.sync)throw new Error(`Validation test of type: "${de.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(Pe).then(Ae,Te)}}catch(Ve){Te(Ve);return}Ae(Pe)}return t.OPTIONS=e,t}function dbe(e,t,r,n=r){let o,f,y;return t?(xf.forEach(t,(s,k,I)=>{let D=k?s.slice(1,s.length-1):s;e=e.resolve({context:n,parent:o,value:r});let N=e.type==="tuple",U=I?parseInt(D,10):0;if(e.innerType||N){if(N&&!I)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${y}" must contain an index to the tuple element, e.g. "${y}[0]"`);if(r&&U>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);o=r,r=r&&r[U],e=N?e.spec.types[U]:e.innerType}if(!I){if(!e.fields||!e.fields[D])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${y} which is a type: "${e.type}")`);o=r,r=r&&r[D],e=e.fields[D]}f=D,y=k?"["+s+"]":"."+s}),{schema:e,parent:o,parentPath:f}):{parent:o,parentPath:t,schema:e}}class dw extends Set{describe(){const t=[];for(const r of this.values())t.push(ud.isRef(r)?r.describe():r);return t}resolveAll(t){let r=[];for(const n of this.values())r.push(t(n));return r}clone(){return new dw(this.values())}merge(t,r){const n=this.clone();return t.forEach(o=>n.add(o)),r.forEach(o=>n.delete(o)),n}}function fm(e,t=new Map){if(wR(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let n=0;n<e.length;n++)r[n]=fm(e[n],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[n,o]of e.entries())r.set(n,fm(o,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const n of e)r.add(fm(n,t))}else if(e instanceof Object){r={},t.set(e,r);for(const[n,o]of Object.entries(e))r[n]=fm(o,t)}else throw Error(`Unable to clone ${e}`);return r}class Bl{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new dw,this._blacklist=new dw,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ac.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(r=>{r.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const r=Object.create(Object.getPrototypeOf(this));return r.type=this.type,r._typeCheck=this._typeCheck,r._whitelist=this._whitelist.clone(),r._blacklist=this._blacklist.clone(),r.internalTests=Object.assign({},this.internalTests),r.exclusiveTests=Object.assign({},this.exclusiveTests),r.deps=[...this.deps],r.conditions=[...this.conditions],r.tests=[...this.tests],r.transforms=[...this.transforms],r.spec=fm(Object.assign({},this.spec,t)),r}label(t){let r=this.clone();return r.spec.label=t,r}meta(...t){if(t.length===0)return this.spec.meta;let r=this.clone();return r.spec.meta=Object.assign(r.spec.meta||{},t[0]),r}withMutation(t){let r=this._mutate;this._mutate=!0;let n=t(this);return this._mutate=r,n}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let r=this,n=t.clone();const o=Object.assign({},r.spec,n.spec);return n.spec=o,n.internalTests=Object.assign({},r.internalTests,n.internalTests),n._whitelist=r._whitelist.merge(t._whitelist,t._blacklist),n._blacklist=r._blacklist.merge(t._blacklist,t._whitelist),n.tests=r.tests,n.exclusiveTests=r.exclusiveTests,n.withMutation(f=>{t.tests.forEach(y=>{f.test(y.OPTIONS)})}),n.transforms=[...r.transforms,...n.transforms],n}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let r=this;if(r.conditions.length){let n=r.conditions;r=r.clone(),r.conditions=[],r=n.reduce((o,f)=>f.resolve(o,t),r),r=r.resolve(t)}return r}resolveOptions(t){var r,n,o,f;return Object.assign({},t,{from:t.from||[],strict:(r=t.strict)!=null?r:this.spec.strict,abortEarly:(n=t.abortEarly)!=null?n:this.spec.abortEarly,recursive:(o=t.recursive)!=null?o:this.spec.recursive,disableStackTrace:(f=t.disableStackTrace)!=null?f:this.spec.disableStackTrace})}cast(t,r={}){let n=this.resolve(Object.assign({value:t},r)),o=r.assert==="ignore-optionality",f=n._cast(t,r);if(r.assert!==!1&&!n.isType(f)){if(o&&uu(f))return f;let y=Uh(t),s=Uh(f);throw new TypeError(`The value of ${r.path||"field"} could not be cast to a value that satisfies the schema type: "${n.type}". 

attempted value: ${y} 
`+(s!==y?`result of cast: ${s}`:""))}return f}_cast(t,r){let n=t===void 0?t:this.transforms.reduce((o,f)=>f.call(this,o,t,this),t);return n===void 0&&(n=this.getDefault(r)),n}_validate(t,r={},n,o){let{path:f,originalValue:y=t,strict:s=this.spec.strict}=r,k=t;s||(k=this._cast(k,Object.assign({assert:!1},r)));let I=[];for(let D of Object.values(this.internalTests))D&&I.push(D);this.runTests({path:f,value:k,originalValue:y,options:r,tests:I},n,D=>{if(D.length)return o(D,k);this.runTests({path:f,value:k,originalValue:y,options:r,tests:this.tests},n,o)})}runTests(t,r,n){let o=!1,{tests:f,value:y,originalValue:s,path:k,options:I}=t,D=ae=>{o||(o=!0,r(ae,y))},N=ae=>{o||(o=!0,n(ae,y))},U=f.length,q=[];if(!U)return N([]);let Z={value:y,originalValue:s,path:k,options:I,schema:this};for(let ae=0;ae<f.length;ae++){const ve=f[ae];ve(Z,D,function(W){W&&(Array.isArray(W)?q.push(...W):q.push(W)),--U<=0&&N(q)})}}asNestedTest({key:t,index:r,parent:n,parentPath:o,originalParent:f,options:y}){const s=t??r;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const k=typeof s=="number";let I=n[s];const D=Object.assign({},y,{strict:!0,parent:n,value:I,originalValue:f[s],key:void 0,[k?"index":"key"]:s,path:k||s.includes(".")?`${o||""}[${I?s:`"${s}"`}]`:(o?`${o}.`:"")+t});return(N,U,q)=>this.resolve(D)._validate(I,D,U,q)}validate(t,r){var n;let o=this.resolve(Object.assign({},r,{value:t})),f=(n=r==null?void 0:r.disableStackTrace)!=null?n:o.spec.disableStackTrace;return new Promise((y,s)=>o._validate(t,r,(k,I)=>{ua.isError(k)&&(k.value=I),s(k)},(k,I)=>{k.length?s(new ua(k,I,void 0,void 0,f)):y(I)}))}validateSync(t,r){var n;let o=this.resolve(Object.assign({},r,{value:t})),f,y=(n=r==null?void 0:r.disableStackTrace)!=null?n:o.spec.disableStackTrace;return o._validate(t,Object.assign({},r,{sync:!0}),(s,k)=>{throw ua.isError(s)&&(s.value=k),s},(s,k)=>{if(s.length)throw new ua(s,t,void 0,void 0,y);f=k}),f}isValid(t,r){return this.validate(t,r).then(()=>!0,n=>{if(ua.isError(n))return!1;throw n})}isValidSync(t,r){try{return this.validateSync(t,r),!0}catch(n){if(ua.isError(n))return!1;throw n}}_getDefault(t){let r=this.spec.default;return r==null?r:typeof r=="function"?r.call(this,t):fm(r)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,r){const n=this.clone({nullable:t});return n.internalTests.nullable=$p({message:r,name:"nullable",test(o){return o===null?this.schema.spec.nullable:!0}}),n}optionality(t,r){const n=this.clone({optional:t});return n.internalTests.optionality=$p({message:r,name:"optionality",test(o){return o===void 0?this.schema.spec.optional:!0}}),n}optional(){return this.optionality(!0)}defined(t=ac.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=ac.notNull){return this.nullability(!1,t)}required(t=ac.required){return this.clone().withMutation(r=>r.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let r=this.clone();return r.transforms.push(t),r}test(...t){let r;if(t.length===1?typeof t[0]=="function"?r={test:t[0]}:r=t[0]:t.length===2?r={name:t[0],test:t[1]}:r={name:t[0],message:t[1],test:t[2]},r.message===void 0&&(r.message=ac.default),typeof r.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),o=$p(r),f=r.exclusive||r.name&&n.exclusiveTests[r.name]===!0;if(r.exclusive&&!r.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return r.name&&(n.exclusiveTests[r.name]=!!r.exclusive),n.tests=n.tests.filter(y=>!(y.OPTIONS.name===r.name&&(f||y.OPTIONS.test===o.OPTIONS.test))),n.tests.push(o),n}when(t,r){!Array.isArray(t)&&typeof t!="string"&&(r=t,t=".");let n=this.clone(),o=l8(t).map(f=>new ud(f));return o.forEach(f=>{f.isSibling&&n.deps.push(f.key)}),n.conditions.push(typeof r=="function"?new hw(o,r):hw.fromOptions(o,r)),n}typeError(t){let r=this.clone();return r.internalTests.typeError=$p({message:t,name:"typeError",skipAbsent:!0,test(n){return this.schema._typeCheck(n)?!0:this.createError({params:{type:this.schema.type}})}}),r}oneOf(t,r=ac.oneOf){let n=this.clone();return t.forEach(o=>{n._whitelist.add(o),n._blacklist.delete(o)}),n.internalTests.whiteList=$p({message:r,name:"oneOf",skipAbsent:!0,test(o){let f=this.schema._whitelist,y=f.resolveAll(this.resolve);return y.includes(o)?!0:this.createError({params:{values:Array.from(f).join(", "),resolved:y}})}}),n}notOneOf(t,r=ac.notOneOf){let n=this.clone();return t.forEach(o=>{n._blacklist.add(o),n._whitelist.delete(o)}),n.internalTests.blacklist=$p({message:r,name:"notOneOf",test(o){let f=this.schema._blacklist,y=f.resolveAll(this.resolve);return y.includes(o)?this.createError({params:{values:Array.from(f).join(", "),resolved:y}}):!0}}),n}strip(t=!0){let r=this.clone();return r.spec.strip=t,r}describe(t){const r=(t?this.resolve(t):this).clone(),{label:n,meta:o,optional:f,nullable:y}=r.spec;return{meta:o,label:n,optional:f,nullable:y,default:r.getDefault(t),type:r.type,oneOf:r._whitelist.describe(),notOneOf:r._blacklist.describe(),tests:r.tests.map(k=>({name:k.OPTIONS.name,params:k.OPTIONS.params})).filter((k,I,D)=>D.findIndex(N=>N.name===k.name)===I)}}}Bl.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Bl.prototype[`${e}At`]=function(t,r,n={}){const{parent:o,parentPath:f,schema:y}=dbe(this,t,r,n.context);return y[e](o&&o[f],Object.assign({},n,{parent:o,path:t}))};for(const e of["equals","is"])Bl.prototype[e]=Bl.prototype.oneOf;for(const e of["not","nope"])Bl.prototype[e]=Bl.prototype.notOneOf;let fbe=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pbe=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,mbe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gbe=e=>uu(e)||e===e.trim(),ybe={}.toString();function $i(){return new h8}class h8 extends Bl{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce||n.isType(t)||Array.isArray(t))return t;const o=t!=null&&t.toString?t.toString():t;return o===ybe?t:o})})}required(t){return super.required(t).withMutation(r=>r.test({message:t||ac.required,name:"required",skipAbsent:!0,test:n=>!!n.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(r=>r.OPTIONS.name!=="required"),t))}length(t,r=Al.length){return this.test({message:r,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(n){return n.length===this.resolve(t)}})}min(t,r=Al.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n.length>=this.resolve(t)}})}max(t,r=Al.max){return this.test({name:"max",exclusive:!0,message:r,params:{max:t},skipAbsent:!0,test(n){return n.length<=this.resolve(t)}})}matches(t,r){let n=!1,o,f;return r&&(typeof r=="object"?{excludeEmptyString:n=!1,message:o,name:f}=r:o=r),this.test({name:f||"matches",message:o||Al.matches,params:{regex:t},skipAbsent:!0,test:y=>y===""&&n||y.search(t)!==-1})}email(t=Al.email){return this.matches(fbe,{name:"email",message:t,excludeEmptyString:!0})}url(t=Al.url){return this.matches(pbe,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=Al.uuid){return this.matches(mbe,{name:"uuid",message:t,excludeEmptyString:!1})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=Al.trim){return this.transform(r=>r!=null?r.trim():r).test({message:t,name:"trim",test:gbe})}lowercase(t=Al.lowercase){return this.transform(r=>uu(r)?r:r.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>uu(r)||r===r.toLowerCase()})}uppercase(t=Al.uppercase){return this.transform(r=>uu(r)?r:r.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:r=>uu(r)||r===r.toUpperCase()})}}$i.prototype=h8.prototype;let xbe=e=>e!=+e;function vbe(){return new d8}class d8 extends Bl{constructor(){super({type:"number",check(t){return t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&!xbe(t)}}),this.withMutation(()=>{this.transform((t,r,n)=>{if(!n.spec.coerce)return t;let o=t;if(typeof o=="string"){if(o=o.replace(/\s/g,""),o==="")return NaN;o=+o}return n.isType(o)||o===null?o:parseFloat(o)})})}min(t,r=uh.min){return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(n){return n>=this.resolve(t)}})}max(t,r=uh.max){return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(n){return n<=this.resolve(t)}})}lessThan(t,r=uh.lessThan){return this.test({message:r,name:"max",exclusive:!0,params:{less:t},skipAbsent:!0,test(n){return n<this.resolve(t)}})}moreThan(t,r=uh.moreThan){return this.test({message:r,name:"min",exclusive:!0,params:{more:t},skipAbsent:!0,test(n){return n>this.resolve(t)}})}positive(t=uh.positive){return this.moreThan(0,t)}negative(t=uh.negative){return this.lessThan(0,t)}integer(t=uh.integer){return this.test({name:"integer",message:t,skipAbsent:!0,test:r=>Number.isInteger(r)})}truncate(){return this.transform(t=>uu(t)?t:t|0)}round(t){var r;let n=["ceil","floor","round","trunc"];if(t=((r=t)==null?void 0:r.toLowerCase())||"round",t==="trunc")return this.truncate();if(n.indexOf(t.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform(o=>uu(o)?o:Math[t](o))}}vbe.prototype=d8.prototype;const bbe=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function qc(e,t=0){return Number(e)||t}function _be(e){const t=bbe.exec(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;const r={year:qc(t[1]),month:qc(t[2],1)-1,day:qc(t[3],1),hour:qc(t[4]),minute:qc(t[5]),second:qc(t[6]),millisecond:t[7]?qc(t[7].substring(0,3)):0,z:t[8]||void 0,plusMinus:t[9]||void 0,hourOffset:qc(t[10]),minuteOffset:qc(t[11])};if(r.z===void 0&&r.plusMinus===void 0)return new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond).valueOf();let n=0;return r.z!=="Z"&&r.plusMinus!==void 0&&(n=r.hourOffset*60+r.minuteOffset,r.plusMinus==="+"&&(n=0-n)),Date.UTC(r.year,r.month,r.day,r.hour,r.minute+n,r.second,r.millisecond)}let wbe=new Date(""),Sbe=e=>Object.prototype.toString.call(e)==="[object Date]";class FS extends Bl{constructor(){super({type:"date",check(t){return Sbe(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,r,n)=>!n.spec.coerce||n.isType(t)||t===null?t:(t=_be(t),isNaN(t)?FS.INVALID_DATE:new Date(t)))})}prepareParam(t,r){let n;if(ud.isRef(t))n=t;else{let o=this.cast(t);if(!this._typeCheck(o))throw new TypeError(`\`${r}\` must be a Date or a value that can be \`cast()\` to a Date`);n=o}return n}min(t,r=xA.min){let n=this.prepareParam(t,"min");return this.test({message:r,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(o){return o>=this.resolve(n)}})}max(t,r=xA.max){let n=this.prepareParam(t,"max");return this.test({message:r,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(o){return o<=this.resolve(n)}})}}FS.INVALID_DATE=wbe;FS.prototype;function Cbe(e,t=[]){let r=[],n=new Set,o=new Set(t.map(([y,s])=>`${y}-${s}`));function f(y,s){let k=xf.split(y)[0];n.add(k),o.has(`${s}-${k}`)||r.push([s,k])}for(const y of Object.keys(e)){let s=e[y];n.add(y),ud.isRef(s)&&s.isSibling?f(s.path,y):wR(s)&&"deps"in s&&s.deps.forEach(k=>f(k,y))}return tbe.array(Array.from(n),r).reverse()}function Ij(e,t){let r=1/0;return e.some((n,o)=>{var f;if((f=t.path)!=null&&f.includes(n))return r=o,!0}),r}function f8(e){return(t,r)=>Ij(e,t)-Ij(e,r)}const kbe=(e,t,r)=>{if(typeof e!="string")return e;let n=e;try{n=JSON.parse(e)}catch{}return r.isType(n)?n:e};function q_(e){if("fields"in e){const t={};for(const[r,n]of Object.entries(e.fields))t[r]=q_(n);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=q_(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(q_)}):"optional"in e?e.optional():e}const Ebe=(e,t)=>{const r=[...xf.normalizePath(t)];if(r.length===1)return r[0]in e;let n=r.pop(),o=xf.getter(xf.join(r),!0)(e);return!!(o&&n in o)};let Pj=e=>Object.prototype.toString.call(e)==="[object Object]";function Tbe(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(n=>r.indexOf(n)===-1)}const Abe=f8([]);function Au(e){return new p8(e)}class p8 extends Bl{constructor(t){super({type:"object",check(r){return Pj(r)||typeof r=="function"}}),this.fields=Object.create(null),this._sortErrors=Abe,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,r={}){var n;let o=super._cast(t,r);if(o===void 0)return this.getDefault(r);if(!this._typeCheck(o))return o;let f=this.fields,y=(n=r.stripUnknown)!=null?n:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(o).filter(N=>!this._nodes.includes(N))),k={},I=Object.assign({},r,{parent:k,__validating:r.__validating||!1}),D=!1;for(const N of s){let U=f[N],q=N in o;if(U){let Z,ae=o[N];I.path=(r.path?`${r.path}.`:"")+N,U=U.resolve({value:ae,context:r.context,parent:k});let ve=U instanceof Bl?U.spec:void 0,ie=ve==null?void 0:ve.strict;if(ve!=null&&ve.strip){D=D||N in o;continue}Z=!r.__validating||!ie?U.cast(o[N],I):o[N],Z!==void 0&&(k[N]=Z)}else q&&!y&&(k[N]=o[N]);(q!==N in k||k[N]!==o[N])&&(D=!0)}return D?k:o}_validate(t,r={},n,o){let{from:f=[],originalValue:y=t,recursive:s=this.spec.recursive}=r;r.from=[{schema:this,value:y},...f],r.__validating=!0,r.originalValue=y,super._validate(t,r,n,(k,I)=>{if(!s||!Pj(I)){o(k,I);return}y=y||I;let D=[];for(let N of this._nodes){let U=this.fields[N];!U||ud.isRef(U)||D.push(U.asNestedTest({options:r,key:N,parent:I,parentPath:r.path,originalParent:y}))}this.runTests({tests:D,value:I,originalValue:y,options:r},n,N=>{o(N.sort(this._sortErrors).concat(k),I)})})}clone(t){const r=super.clone(t);return r.fields=Object.assign({},this.fields),r._nodes=this._nodes,r._excludedEdges=this._excludedEdges,r._sortErrors=this._sortErrors,r}concat(t){let r=super.concat(t),n=r.fields;for(let[o,f]of Object.entries(this.fields)){const y=n[o];n[o]=y===void 0?f:y}return r.withMutation(o=>o.setFields(n,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let r={};return this._nodes.forEach(n=>{var o;const f=this.fields[n];let y=t;(o=y)!=null&&o.value&&(y=Object.assign({},y,{parent:y.value,value:y.value[n]})),r[n]=f&&"getDefault"in f?f.getDefault(y):void 0}),r}setFields(t,r){let n=this.clone();return n.fields=t,n._nodes=Cbe(t,r),n._sortErrors=f8(Object.keys(t)),r&&(n._excludedEdges=r),n}shape(t,r=[]){return this.clone().withMutation(n=>{let o=n._excludedEdges;return r.length&&(Array.isArray(r[0])||(r=[r]),o=[...n._excludedEdges,...r]),n.setFields(Object.assign(n.fields,t),o)})}partial(){const t={};for(const[r,n]of Object.entries(this.fields))t[r]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(t)}deepPartial(){return q_(this)}pick(t){const r={};for(const n of t)this.fields[n]&&(r[n]=this.fields[n]);return this.setFields(r,this._excludedEdges.filter(([n,o])=>t.includes(n)&&t.includes(o)))}omit(t){const r=[];for(const n of Object.keys(this.fields))t.includes(n)||r.push(n);return this.pick(r)}from(t,r,n){let o=xf.getter(t,!0);return this.transform(f=>{if(!f)return f;let y=f;return Ebe(f,t)&&(y=Object.assign({},f),n||delete y[t],y[r]=o(f)),y})}json(){return this.transform(kbe)}noUnknown(t=!0,r=vA.noUnknown){typeof t!="boolean"&&(r=t,t=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:r,test(o){if(o==null)return!0;const f=Tbe(this.schema,o);return!t||f.length===0||this.createError({params:{unknown:f.join(", ")}})}});return n.spec.noUnknown=t,n}unknown(t=!0,r=vA.noUnknown){return this.noUnknown(!t,r)}transformKeys(t){return this.transform(r=>{if(!r)return r;const n={};for(const o of Object.keys(r))n[t(o)]=r[o];return n})}camelCase(){return this.transformKeys(eE.camelCase)}snakeCase(){return this.transformKeys(eE.snakeCase)}constantCase(){return this.transformKeys(t=>eE.snakeCase(t).toUpperCase())}describe(t){const r=(t?this.resolve(t):this).clone(),n=super.describe(t);n.fields={};for(const[f,y]of Object.entries(r.fields)){var o;let s=t;(o=s)!=null&&o.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[f]})),n.fields[f]=y.describe(s)}return n}}Au.prototype=p8.prototype;const Ibe=Au({name:$i().min(3,"Type a valid Name").required("Please Enter the value"),email:$i().email("Please Enter a valid Email").required("Please Enter value"),mobile:$i().length(10,"Please Enter a valid number").required("Please Enter value"),password:$i().min(8,"Minimum 8 Charecter required").matches(/^(?=.*[A-Z])/,"Must include One uppercase letter").matches(/^(?=.*\d)/,"Must include one digit").required("Passowrd is required"),re_password:$i().oneOf([u8("password")],"Password must match").required("Please re-enter the password")});function m8(e,t){return function(){return e.apply(t,arguments)}}const{toString:Pbe}=Object.prototype,{getPrototypeOf:SR}=Object,BS=(e=>t=>{const r=Pbe.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Rc=e=>(e=e.toLowerCase(),t=>BS(t)===e),$S=e=>t=>typeof t===e,{isArray:dg}=Array,_v=$S("undefined");function Rbe(e){return e!==null&&!_v(e)&&e.constructor!==null&&!_v(e.constructor)&&ol(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g8=Rc("ArrayBuffer");function Mbe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&g8(e.buffer),t}const Lbe=$S("string"),ol=$S("function"),y8=$S("number"),US=e=>e!==null&&typeof e=="object",Obe=e=>e===!0||e===!1,Y_=e=>{if(BS(e)!=="object")return!1;const t=SR(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Dbe=Rc("Date"),zbe=Rc("File"),Nbe=Rc("Blob"),jbe=Rc("FileList"),Fbe=e=>US(e)&&ol(e.pipe),Bbe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ol(e.append)&&((t=BS(e))==="formdata"||t==="object"&&ol(e.toString)&&e.toString()==="[object FormData]"))},$be=Rc("URLSearchParams"),Ube=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kv(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,o;if(typeof e!="object"&&(e=[e]),dg(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const f=r?Object.getOwnPropertyNames(e):Object.keys(e),y=f.length;let s;for(n=0;n<y;n++)s=f[n],t.call(null,e[s],s,e)}}function x8(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,o;for(;n-- >0;)if(o=r[n],t===o.toLowerCase())return o;return null}const v8=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),b8=e=>!_v(e)&&e!==v8;function bA(){const{caseless:e}=b8(this)&&this||{},t={},r=(n,o)=>{const f=e&&x8(t,o)||o;Y_(t[f])&&Y_(n)?t[f]=bA(t[f],n):Y_(n)?t[f]=bA({},n):dg(n)?t[f]=n.slice():t[f]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&Kv(arguments[n],r);return t}const Vbe=(e,t,r,{allOwnKeys:n}={})=>(Kv(t,(o,f)=>{r&&ol(o)?e[f]=m8(o,r):e[f]=o},{allOwnKeys:n}),e),Hbe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Wbe=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Gbe=(e,t,r,n)=>{let o,f,y;const s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),f=o.length;f-- >0;)y=o[f],(!n||n(y,e,t))&&!s[y]&&(t[y]=e[y],s[y]=!0);e=r!==!1&&SR(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Xbe=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},qbe=e=>{if(!e)return null;if(dg(e))return e;let t=e.length;if(!y8(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Ybe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&SR(Uint8Array)),Zbe=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=n.next())&&!o.done;){const f=o.value;t.call(e,f[0],f[1])}},Kbe=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Jbe=Rc("HTMLFormElement"),Qbe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),Rj=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),e_e=Rc("RegExp"),_8=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Kv(r,(o,f)=>{let y;(y=t(o,f,e))!==!1&&(n[f]=y||o)}),Object.defineProperties(e,n)},t_e=e=>{_8(e,(t,r)=>{if(ol(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ol(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},r_e=(e,t)=>{const r={},n=o=>{o.forEach(f=>{r[f]=!0})};return dg(e)?n(e):n(String(e).split(t)),r},n_e=()=>{},i_e=(e,t)=>(e=+e,Number.isFinite(e)?e:t),tE="abcdefghijklmnopqrstuvwxyz",Mj="0123456789",w8={DIGIT:Mj,ALPHA:tE,ALPHA_DIGIT:tE+tE.toUpperCase()+Mj},s_e=(e=16,t=w8.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function o_e(e){return!!(e&&ol(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const a_e=e=>{const t=new Array(10),r=(n,o)=>{if(US(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[o]=n;const f=dg(n)?[]:{};return Kv(n,(y,s)=>{const k=r(y,o+1);!_v(k)&&(f[s]=k)}),t[o]=void 0,f}}return n};return r(e,0)},l_e=Rc("AsyncFunction"),c_e=e=>e&&(US(e)||ol(e))&&ol(e.then)&&ol(e.catch),tr={isArray:dg,isArrayBuffer:g8,isBuffer:Rbe,isFormData:Bbe,isArrayBufferView:Mbe,isString:Lbe,isNumber:y8,isBoolean:Obe,isObject:US,isPlainObject:Y_,isUndefined:_v,isDate:Dbe,isFile:zbe,isBlob:Nbe,isRegExp:e_e,isFunction:ol,isStream:Fbe,isURLSearchParams:$be,isTypedArray:Ybe,isFileList:jbe,forEach:Kv,merge:bA,extend:Vbe,trim:Ube,stripBOM:Hbe,inherits:Wbe,toFlatObject:Gbe,kindOf:BS,kindOfTest:Rc,endsWith:Xbe,toArray:qbe,forEachEntry:Zbe,matchAll:Kbe,isHTMLForm:Jbe,hasOwnProperty:Rj,hasOwnProp:Rj,reduceDescriptors:_8,freezeMethods:t_e,toObjectSet:r_e,toCamelCase:Qbe,noop:n_e,toFiniteNumber:i_e,findKey:x8,global:v8,isContextDefined:b8,ALPHABET:w8,generateString:s_e,isSpecCompliantForm:o_e,toJSONObject:a_e,isAsyncFn:l_e,isThenable:c_e};function Kn(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}tr.inherits(Kn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const S8=Kn.prototype,C8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{C8[e]={value:e}});Object.defineProperties(Kn,C8);Object.defineProperty(S8,"isAxiosError",{value:!0});Kn.from=(e,t,r,n,o,f)=>{const y=Object.create(S8);return tr.toFlatObject(e,y,function(k){return k!==Error.prototype},s=>s!=="isAxiosError"),Kn.call(y,e.message,t,r,n,o),y.cause=e,y.name=e.name,f&&Object.assign(y,f),y};const u_e=null;function _A(e){return tr.isPlainObject(e)||tr.isArray(e)}function k8(e){return tr.endsWith(e,"[]")?e.slice(0,-2):e}function Lj(e,t,r){return e?e.concat(t).map(function(o,f){return o=k8(o),!r&&f?"["+o+"]":o}).join(r?".":""):t}function h_e(e){return tr.isArray(e)&&!e.some(_A)}const d_e=tr.toFlatObject(tr,{},null,function(t){return/^is[A-Z]/.test(t)});function VS(e,t,r){if(!tr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=tr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ae,ve){return!tr.isUndefined(ve[ae])});const n=r.metaTokens,o=r.visitor||D,f=r.dots,y=r.indexes,k=(r.Blob||typeof Blob<"u"&&Blob)&&tr.isSpecCompliantForm(t);if(!tr.isFunction(o))throw new TypeError("visitor must be a function");function I(Z){if(Z===null)return"";if(tr.isDate(Z))return Z.toISOString();if(!k&&tr.isBlob(Z))throw new Kn("Blob is not supported. Use a Buffer instead.");return tr.isArrayBuffer(Z)||tr.isTypedArray(Z)?k&&typeof Blob=="function"?new Blob([Z]):Buffer.from(Z):Z}function D(Z,ae,ve){let ie=Z;if(Z&&!ve&&typeof Z=="object"){if(tr.endsWith(ae,"{}"))ae=n?ae:ae.slice(0,-2),Z=JSON.stringify(Z);else if(tr.isArray(Z)&&h_e(Z)||(tr.isFileList(Z)||tr.endsWith(ae,"[]"))&&(ie=tr.toArray(Z)))return ae=k8(ae),ie.forEach(function(K,he){!(tr.isUndefined(K)||K===null)&&t.append(y===!0?Lj([ae],he,f):y===null?ae:ae+"[]",I(K))}),!1}return _A(Z)?!0:(t.append(Lj(ve,ae,f),I(Z)),!1)}const N=[],U=Object.assign(d_e,{defaultVisitor:D,convertValue:I,isVisitable:_A});function q(Z,ae){if(!tr.isUndefined(Z)){if(N.indexOf(Z)!==-1)throw Error("Circular reference detected in "+ae.join("."));N.push(Z),tr.forEach(Z,function(ie,W){(!(tr.isUndefined(ie)||ie===null)&&o.call(t,ie,tr.isString(W)?W.trim():W,ae,U))===!0&&q(ie,ae?ae.concat(W):[W])}),N.pop()}}if(!tr.isObject(e))throw new TypeError("data must be an object");return q(e),t}function Oj(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function CR(e,t){this._pairs=[],e&&VS(e,this,t)}const E8=CR.prototype;E8.append=function(t,r){this._pairs.push([t,r])};E8.toString=function(t){const r=t?function(n){return t.call(this,n,Oj)}:Oj;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function f_e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function T8(e,t,r){if(!t)return e;const n=r&&r.encode||f_e,o=r&&r.serialize;let f;if(o?f=o(t,r):f=tr.isURLSearchParams(t)?t.toString():new CR(t,r).toString(n),f){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class p_e{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){tr.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Dj=p_e,A8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m_e=typeof URLSearchParams<"u"?URLSearchParams:CR,g_e=typeof FormData<"u"?FormData:null,y_e=typeof Blob<"u"?Blob:null,x_e=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),v_e=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),mc={isBrowser:!0,classes:{URLSearchParams:m_e,FormData:g_e,Blob:y_e},isStandardBrowserEnv:x_e,isStandardBrowserWebWorkerEnv:v_e,protocols:["http","https","file","blob","url","data"]};function b_e(e,t){return VS(e,new mc.classes.URLSearchParams,Object.assign({visitor:function(r,n,o,f){return mc.isNode&&tr.isBuffer(r)?(this.append(n,r.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)}},t))}function __e(e){return tr.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function w_e(e){const t={},r=Object.keys(e);let n;const o=r.length;let f;for(n=0;n<o;n++)f=r[n],t[f]=e[f];return t}function I8(e){function t(r,n,o,f){let y=r[f++];const s=Number.isFinite(+y),k=f>=r.length;return y=!y&&tr.isArray(o)?o.length:y,k?(tr.hasOwnProp(o,y)?o[y]=[o[y],n]:o[y]=n,!s):((!o[y]||!tr.isObject(o[y]))&&(o[y]=[]),t(r,n,o[y],f)&&tr.isArray(o[y])&&(o[y]=w_e(o[y])),!s)}if(tr.isFormData(e)&&tr.isFunction(e.entries)){const r={};return tr.forEachEntry(e,(n,o)=>{t(__e(n),o,r,0)}),r}return null}function S_e(e,t,r){if(tr.isString(e))try{return(t||JSON.parse)(e),tr.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const kR={transitional:A8,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",o=n.indexOf("application/json")>-1,f=tr.isObject(t);if(f&&tr.isHTMLForm(t)&&(t=new FormData(t)),tr.isFormData(t))return o&&o?JSON.stringify(I8(t)):t;if(tr.isArrayBuffer(t)||tr.isBuffer(t)||tr.isStream(t)||tr.isFile(t)||tr.isBlob(t))return t;if(tr.isArrayBufferView(t))return t.buffer;if(tr.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(f){if(n.indexOf("application/x-www-form-urlencoded")>-1)return b_e(t,this.formSerializer).toString();if((s=tr.isFileList(t))||n.indexOf("multipart/form-data")>-1){const k=this.env&&this.env.FormData;return VS(s?{"files[]":t}:t,k&&new k,this.formSerializer)}}return f||o?(r.setContentType("application/json",!1),S_e(t)):t}],transformResponse:[function(t){const r=this.transitional||kR.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(t&&tr.isString(t)&&(n&&!this.responseType||o)){const y=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(y)throw s.name==="SyntaxError"?Kn.from(s,Kn.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mc.classes.FormData,Blob:mc.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tr.forEach(["delete","get","head","post","put","patch"],e=>{kR.headers[e]={}});const ER=kR,C_e=tr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),k_e=e=>{const t={};let r,n,o;return e&&e.split(`
`).forEach(function(y){o=y.indexOf(":"),r=y.substring(0,o).trim().toLowerCase(),n=y.substring(o+1).trim(),!(!r||t[r]&&C_e[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},zj=Symbol("internals");function qy(e){return e&&String(e).trim().toLowerCase()}function Z_(e){return e===!1||e==null?e:tr.isArray(e)?e.map(Z_):String(e)}function E_e(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const T_e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function rE(e,t,r,n,o){if(tr.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!tr.isString(t)){if(tr.isString(n))return t.indexOf(n)!==-1;if(tr.isRegExp(n))return n.test(t)}}function A_e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function I_e(e,t){const r=tr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,f,y){return this[n].call(this,t,o,f,y)},configurable:!0})})}class HS{constructor(t){t&&this.set(t)}set(t,r,n){const o=this;function f(s,k,I){const D=qy(k);if(!D)throw new Error("header name must be a non-empty string");const N=tr.findKey(o,D);(!N||o[N]===void 0||I===!0||I===void 0&&o[N]!==!1)&&(o[N||k]=Z_(s))}const y=(s,k)=>tr.forEach(s,(I,D)=>f(I,D,k));return tr.isPlainObject(t)||t instanceof this.constructor?y(t,r):tr.isString(t)&&(t=t.trim())&&!T_e(t)?y(k_e(t),r):t!=null&&f(r,t,n),this}get(t,r){if(t=qy(t),t){const n=tr.findKey(this,t);if(n){const o=this[n];if(!r)return o;if(r===!0)return E_e(o);if(tr.isFunction(r))return r.call(this,o,n);if(tr.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=qy(t),t){const n=tr.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||rE(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let o=!1;function f(y){if(y=qy(y),y){const s=tr.findKey(n,y);s&&(!r||rE(n,n[s],s,r))&&(delete n[s],o=!0)}}return tr.isArray(t)?t.forEach(f):f(t),o}clear(t){const r=Object.keys(this);let n=r.length,o=!1;for(;n--;){const f=r[n];(!t||rE(this,this[f],f,t,!0))&&(delete this[f],o=!0)}return o}normalize(t){const r=this,n={};return tr.forEach(this,(o,f)=>{const y=tr.findKey(n,f);if(y){r[y]=Z_(o),delete r[f];return}const s=t?A_e(f):String(f).trim();s!==f&&delete r[f],r[s]=Z_(o),n[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return tr.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&tr.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){const n=(this[zj]=this[zj]={accessors:{}}).accessors,o=this.prototype;function f(y){const s=qy(y);n[s]||(I_e(o,y),n[s]=!0)}return tr.isArray(t)?t.forEach(f):f(t),this}}HS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tr.reduceDescriptors(HS.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});tr.freezeMethods(HS);const mu=HS;function nE(e,t){const r=this||ER,n=t||r,o=mu.from(n.headers);let f=n.data;return tr.forEach(e,function(s){f=s.call(r,f,o.normalize(),t?t.status:void 0)}),o.normalize(),f}function P8(e){return!!(e&&e.__CANCEL__)}function Jv(e,t,r){Kn.call(this,e??"canceled",Kn.ERR_CANCELED,t,r),this.name="CanceledError"}tr.inherits(Jv,Kn,{__CANCEL__:!0});function P_e(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Kn("Request failed with status code "+r.status,[Kn.ERR_BAD_REQUEST,Kn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const R_e=mc.isStandardBrowserEnv?function(){return{write:function(r,n,o,f,y,s){const k=[];k.push(r+"="+encodeURIComponent(n)),tr.isNumber(o)&&k.push("expires="+new Date(o).toGMTString()),tr.isString(f)&&k.push("path="+f),tr.isString(y)&&k.push("domain="+y),s===!0&&k.push("secure"),document.cookie=k.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function M_e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function L_e(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function R8(e,t){return e&&!M_e(t)?L_e(e,t):t}const O_e=mc.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function o(f){let y=f;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(y){const s=tr.isString(y)?o(y):y;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}();function D_e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function z_e(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o=0,f=0,y;return t=t!==void 0?t:1e3,function(k){const I=Date.now(),D=n[f];y||(y=I),r[o]=k,n[o]=I;let N=f,U=0;for(;N!==o;)U+=r[N++],N=N%e;if(o=(o+1)%e,o===f&&(f=(f+1)%e),I-y<t)return;const q=D&&I-D;return q?Math.round(U*1e3/q):void 0}}function Nj(e,t){let r=0;const n=z_e(50,250);return o=>{const f=o.loaded,y=o.lengthComputable?o.total:void 0,s=f-r,k=n(s),I=f<=y;r=f;const D={loaded:f,total:y,progress:y?f/y:void 0,bytes:s,rate:k||void 0,estimated:k&&y&&I?(y-f)/k:void 0,event:o};D[t?"download":"upload"]=!0,e(D)}}const N_e=typeof XMLHttpRequest<"u",j_e=N_e&&function(e){return new Promise(function(r,n){let o=e.data;const f=mu.from(e.headers).normalize(),y=e.responseType;let s;function k(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}let I;tr.isFormData(o)&&(mc.isStandardBrowserEnv||mc.isStandardBrowserWebWorkerEnv?f.setContentType(!1):f.getContentType(/^\s*multipart\/form-data/)?tr.isString(I=f.getContentType())&&f.setContentType(I.replace(/^\s*(multipart\/form-data);+/,"$1")):f.setContentType("multipart/form-data"));let D=new XMLHttpRequest;if(e.auth){const Z=e.auth.username||"",ae=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.set("Authorization","Basic "+btoa(Z+":"+ae))}const N=R8(e.baseURL,e.url);D.open(e.method.toUpperCase(),T8(N,e.params,e.paramsSerializer),!0),D.timeout=e.timeout;function U(){if(!D)return;const Z=mu.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ve={data:!y||y==="text"||y==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:Z,config:e,request:D};P_e(function(W){r(W),k()},function(W){n(W),k()},ve),D=null}if("onloadend"in D?D.onloadend=U:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(U)},D.onabort=function(){D&&(n(new Kn("Request aborted",Kn.ECONNABORTED,e,D)),D=null)},D.onerror=function(){n(new Kn("Network Error",Kn.ERR_NETWORK,e,D)),D=null},D.ontimeout=function(){let ae=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const ve=e.transitional||A8;e.timeoutErrorMessage&&(ae=e.timeoutErrorMessage),n(new Kn(ae,ve.clarifyTimeoutError?Kn.ETIMEDOUT:Kn.ECONNABORTED,e,D)),D=null},mc.isStandardBrowserEnv){const Z=(e.withCredentials||O_e(N))&&e.xsrfCookieName&&R_e.read(e.xsrfCookieName);Z&&f.set(e.xsrfHeaderName,Z)}o===void 0&&f.setContentType(null),"setRequestHeader"in D&&tr.forEach(f.toJSON(),function(ae,ve){D.setRequestHeader(ve,ae)}),tr.isUndefined(e.withCredentials)||(D.withCredentials=!!e.withCredentials),y&&y!=="json"&&(D.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&D.addEventListener("progress",Nj(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&D.upload&&D.upload.addEventListener("progress",Nj(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=Z=>{D&&(n(!Z||Z.type?new Jv(null,e,D):Z),D.abort(),D=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const q=D_e(N);if(q&&mc.protocols.indexOf(q)===-1){n(new Kn("Unsupported protocol "+q+":",Kn.ERR_BAD_REQUEST,e));return}D.send(o||null)})},wA={http:u_e,xhr:j_e};tr.forEach(wA,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const jj=e=>`- ${e}`,F_e=e=>tr.isFunction(e)||e===null||e===!1,M8={getAdapter:e=>{e=tr.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let f=0;f<t;f++){r=e[f];let y;if(n=r,!F_e(r)&&(n=wA[(y=String(r)).toLowerCase()],n===void 0))throw new Kn(`Unknown adapter '${y}'`);if(n)break;o[y||"#"+f]=n}if(!n){const f=Object.entries(o).map(([s,k])=>`adapter ${s} `+(k===!1?"is not supported by the environment":"is not available in the build"));let y=t?f.length>1?`since :
`+f.map(jj).join(`
`):" "+jj(f[0]):"as no adapter specified";throw new Kn("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return n},adapters:wA};function iE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Jv(null,e)}function Fj(e){return iE(e),e.headers=mu.from(e.headers),e.data=nE.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),M8.getAdapter(e.adapter||ER.adapter)(e).then(function(n){return iE(e),n.data=nE.call(e,e.transformResponse,n),n.headers=mu.from(n.headers),n},function(n){return P8(n)||(iE(e),n&&n.response&&(n.response.data=nE.call(e,e.transformResponse,n.response),n.response.headers=mu.from(n.response.headers))),Promise.reject(n)})}const Bj=e=>e instanceof mu?e.toJSON():e;function Gm(e,t){t=t||{};const r={};function n(I,D,N){return tr.isPlainObject(I)&&tr.isPlainObject(D)?tr.merge.call({caseless:N},I,D):tr.isPlainObject(D)?tr.merge({},D):tr.isArray(D)?D.slice():D}function o(I,D,N){if(tr.isUndefined(D)){if(!tr.isUndefined(I))return n(void 0,I,N)}else return n(I,D,N)}function f(I,D){if(!tr.isUndefined(D))return n(void 0,D)}function y(I,D){if(tr.isUndefined(D)){if(!tr.isUndefined(I))return n(void 0,I)}else return n(void 0,D)}function s(I,D,N){if(N in t)return n(I,D);if(N in e)return n(void 0,I)}const k={url:f,method:f,data:f,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:s,headers:(I,D)=>o(Bj(I),Bj(D),!0)};return tr.forEach(Object.keys(Object.assign({},e,t)),function(D){const N=k[D]||o,U=N(e[D],t[D],D);tr.isUndefined(U)&&N!==s||(r[D]=U)}),r}const L8="1.5.1",TR={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{TR[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const $j={};TR.transitional=function(t,r,n){function o(f,y){return"[Axios v"+L8+"] Transitional option '"+f+"'"+y+(n?". "+n:"")}return(f,y,s)=>{if(t===!1)throw new Kn(o(y," has been removed"+(r?" in "+r:"")),Kn.ERR_DEPRECATED);return r&&!$j[y]&&($j[y]=!0,console.warn(o(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(f,y,s):!0}};function B_e(e,t,r){if(typeof e!="object")throw new Kn("options must be an object",Kn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const f=n[o],y=t[f];if(y){const s=e[f],k=s===void 0||y(s,f,e);if(k!==!0)throw new Kn("option "+f+" must be "+k,Kn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Kn("Unknown option "+f,Kn.ERR_BAD_OPTION)}}const SA={assertOptions:B_e,validators:TR},oh=SA.validators;class fw{constructor(t){this.defaults=t,this.interceptors={request:new Dj,response:new Dj}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Gm(this.defaults,r);const{transitional:n,paramsSerializer:o,headers:f}=r;n!==void 0&&SA.assertOptions(n,{silentJSONParsing:oh.transitional(oh.boolean),forcedJSONParsing:oh.transitional(oh.boolean),clarifyTimeoutError:oh.transitional(oh.boolean)},!1),o!=null&&(tr.isFunction(o)?r.paramsSerializer={serialize:o}:SA.assertOptions(o,{encode:oh.function,serialize:oh.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=f&&tr.merge(f.common,f[r.method]);f&&tr.forEach(["delete","get","head","post","put","patch","common"],Z=>{delete f[Z]}),r.headers=mu.concat(y,f);const s=[];let k=!0;this.interceptors.request.forEach(function(ae){typeof ae.runWhen=="function"&&ae.runWhen(r)===!1||(k=k&&ae.synchronous,s.unshift(ae.fulfilled,ae.rejected))});const I=[];this.interceptors.response.forEach(function(ae){I.push(ae.fulfilled,ae.rejected)});let D,N=0,U;if(!k){const Z=[Fj.bind(this),void 0];for(Z.unshift.apply(Z,s),Z.push.apply(Z,I),U=Z.length,D=Promise.resolve(r);N<U;)D=D.then(Z[N++],Z[N++]);return D}U=s.length;let q=r;for(N=0;N<U;){const Z=s[N++],ae=s[N++];try{q=Z(q)}catch(ve){ae.call(this,ve);break}}try{D=Fj.call(this,q)}catch(Z){return Promise.reject(Z)}for(N=0,U=I.length;N<U;)D=D.then(I[N++],I[N++]);return D}getUri(t){t=Gm(this.defaults,t);const r=R8(t.baseURL,t.url);return T8(r,t.params,t.paramsSerializer)}}tr.forEach(["delete","get","head","options"],function(t){fw.prototype[t]=function(r,n){return this.request(Gm(n||{},{method:t,url:r,data:(n||{}).data}))}});tr.forEach(["post","put","patch"],function(t){function r(n){return function(f,y,s){return this.request(Gm(s||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:f,data:y}))}}fw.prototype[t]=r(),fw.prototype[t+"Form"]=r(!0)});const K_=fw;class AR{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(f){r=f});const n=this;this.promise.then(o=>{if(!n._listeners)return;let f=n._listeners.length;for(;f-- >0;)n._listeners[f](o);n._listeners=null}),this.promise.then=o=>{let f;const y=new Promise(s=>{n.subscribe(s),f=s}).then(o);return y.cancel=function(){n.unsubscribe(f)},y},t(function(f,y,s){n.reason||(n.reason=new Jv(f,y,s),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new AR(function(o){t=o}),cancel:t}}}const $_e=AR;function U_e(e){return function(r){return e.apply(null,r)}}function V_e(e){return tr.isObject(e)&&e.isAxiosError===!0}const CA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(CA).forEach(([e,t])=>{CA[t]=e});const H_e=CA;function O8(e){const t=new K_(e),r=m8(K_.prototype.request,t);return tr.extend(r,K_.prototype,t,{allOwnKeys:!0}),tr.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return O8(Gm(e,o))},r}const qs=O8(ER);qs.Axios=K_;qs.CanceledError=Jv;qs.CancelToken=$_e;qs.isCancel=P8;qs.VERSION=L8;qs.toFormData=VS;qs.AxiosError=Kn;qs.Cancel=qs.CanceledError;qs.all=function(t){return Promise.all(t)};qs.spread=U_e;qs.isAxiosError=V_e;qs.mergeConfig=Gm;qs.AxiosHeaders=mu;qs.formToJSON=e=>I8(tr.isHTMLForm(e)?new FormData(e):e);qs.getAdapter=M8.getAdapter;qs.HttpStatusCode=H_e;qs.default=qs;const Wf=qs,W_e="https://bookat.fun/",Vi=Wf.create({baseURL:W_e,headers:{"Content-Type":"application/json"}});Vi.interceptors.request.use(e=>{const t=localStorage.getItem("userToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const us={login:"/signin",signUp:"/signUp",googleSignin:"/google/signin",googleSignup:"/google/signup",chekUserExists:"/check/userExists",sendOtp:"/otp",verifyOtp:"/otp/verify",resetPasswordLink:"/resetPasswordLink",resetPassword:"/resetpassword",profile:"/profile",updateProfile:"/update/profile",getDriverData:"/details/driver",getRideDetails:"/getridedata",getRideHistory:"/history",addToFavourite:"/favourite",quickRideInfo:"/favourite/quickRide",reScheduleTheRide:"/favourite/reScheduleRide",scheduleTheRide:"/scheduleTheRide",payment:"/payment",submitReview:"/review",currentRide:"/currentRide",scheduledRides:"/scheduledRides",cancelTheRide:"/cancelride",getCabData:"/getCabs",chat:"/chat"},rn=e=>{var t,r;if(console.log(e),Wf.isAxiosError(e)){const n=e;((t=n.response)==null?void 0:t.data.error)==="jwt expired"?Zr.error("Session Expired. Please Login Again."):(r=n.response)!=null&&r.data?Zr.error(n.response.data.error):Zr.error("Network Error occurred.")}},G_e=xn.lazy(()=>ad(()=>import("./Otp-ad42c9da.js"),["assets/Otp-ad42c9da.js","assets/styles-3e973eb1.css"]));function D8(e){const{login:t,signupSuccess:r,signupServer:n,person:o,checkExists:f}=e,[y,s]=le.useState(!1),[k,I]=le.useState(!1),D=Cs(),N=cd({initialValues:{name:"",email:"",mobile:"",refrelCode:"",password:"",re_password:""},validationSchema:Ibe,onSubmit:K=>{q(K)}}),U=async()=>{try{await Vi.post(n,N.values),D(r)}catch(K){As.error(K.message)}},q=async K=>{try{const he={email:K.email,mobile:K.mobile};await Vi.post(f,he);const de={mobile:K.mobile};await Vi.post(us.sendOtp,de),I(!0)}catch(he){console.log(he),rn(he)}},Z=async(K,he)=>{try{const de={displayName:K,email:he};await Vi.post(`/google${n}`,de),D(r)}catch(de){console.log(de),rn(de)}},ae=new dc;ae.setCustomParameters({prompt:"select_account"});const ve=()=>{jV(i8,ae).then(K=>{const{displayName:he,email:de}=K.user;he&&de&&Z(he,de)}).catch(K=>{As.error(K.message)})},ie="pl-2 outline-none border-b-4 w-full rounded-lg p-2.5 sm:text-sm",W="pl-2 outline-none border-b border-red-400 w-full rounded-lg p-2.5 sm:text-sm";return A.jsxs(A.Fragment,{children:[k&&A.jsx("div",{className:"absolute z-50 flex justify-center items-center w-full h-full",children:A.jsx("div",{className:"modal w-1/4 h-1/3",children:A.jsx("div",{className:"modal-content",children:A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(G_e,{mobile:N.values.mobile,submitSignUpForm:U})})})})}),A.jsx("div",{className:`flex h-screen items-center justify-center  ${k?"bg-black opacity-60":"bg-gray-100"}`,children:A.jsx("div",{className:"w-full max-w-md overflow-hidden rounded-3xl bg-gray-100 shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black text-blue mb-3",children:"Sign up"}),A.jsxs("form",{className:"",onSubmit:N.handleSubmit,children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"name",placeholder:"name",required:!0,value:N.values.name,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.name&&N.errors.name?W:ie}),N.touched.name&&N.errors.name&&A.jsx("div",{className:"text-red-500 text-xs",children:N.errors.name})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"email",placeholder:"Email",required:!0,value:N.values.email,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.email&&N.errors.email?W:ie}),N.touched.email&&N.errors.email&&A.jsx("div",{className:"text-red-500 text-xs",children:N.errors.email})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile No",required:!0,value:N.values.mobile,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.mobile&&N.errors.mobile?W:ie}),N.touched.mobile&&N.errors.mobile&&A.jsx("div",{className:"text-red-500 text-xs",children:N.errors.mobile})]}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",name:"refrelCode",placeholder:"Refrel code (optional)",value:N.values.refrelCode,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.refrelCode&&N.errors.refrelCode?W:ie})}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:y?"text":"password",name:"password",placeholder:"Password",required:!0,value:N.values.password,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.password&&N.errors.password?W:ie}),N.touched.password&&N.errors.password&&A.jsx("div",{className:"text-red-500 text-xs",children:N.errors.password})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:y?"text":"password",name:"re_password",placeholder:"Password",required:!0,value:N.values.re_password,onChange:N.handleChange,onBlur:N.handleBlur,className:N.touched.re_password&&N.errors.re_password?W:ie}),N.touched.re_password&&N.errors.re_password&&A.jsx("div",{className:"text-red-500 text-xs",children:N.errors.re_password})]}),A.jsxs("div",{className:"mb-4 flex items-center",children:[A.jsx("input",{type:"checkbox",id:"showPassword",onChange:()=>s(!y),className:"mr-2"}),A.jsx("label",{htmlFor:"showPassword",children:"Show Password"})]}),A.jsx("button",{className:" w-full cursor-pointer rounded-lg bg-blue-600 pt-3 pb-3 text-white shadow-lg hover:bg-blue-400",type:"submit",children:"Submit"})]}),o=="user"&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"mt-1 flex items-center",children:[A.jsx("div",{className:"w-full border-t border-gray-400"}),A.jsx("div",{className:"mx-4 text-sm text-gray-600",children:"or"}),A.jsx("div",{className:"w-full border-t border-gray-400"})]}),A.jsx("button",{className:"mt-2 w-full cursor-pointer rounded-lg bg-red-600 pt-3 pb-3 text-white shadow-lg hover:bg-red-400",onClick:ve,children:"Sign up with Google"})]}),A.jsx("div",{className:"mt-2 text-center",children:A.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account? ",A.jsx(Un,{to:t,className:"font-bold text-blue-600 no-underline hover:text-blue-400",children:"Sign in"})]})})]})})})})]})}function X_e(){const e={login:Ti.login,signupSuccess:Ti.login,signupServer:ws.signUp,checkExists:ws.chekDriverExists,person:"driver"};return A.jsx(A.Fragment,{children:A.jsx(D8,{...e})})}function Ol(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Qh(e){return!!e&&!!e[ls]}function Cu(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var o=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return o===Object||typeof o=="function"&&Function.toString.call(o)===r1e}(e)||Array.isArray(e)||!!e[qj]||!!(!((t=e.constructor)===null||t===void 0)&&t[qj])||IR(e)||PR(e))}function Pf(e,t,r){r===void 0&&(r=!1),fg(e)===0?(r?Object.keys:Im)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,o){return t(o,n,e)})}function fg(e){var t=e[ls];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:IR(e)?2:PR(e)?3:0}function Am(e,t){return fg(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function q_e(e,t){return fg(e)===2?e.get(t):e[t]}function z8(e,t,r){var n=fg(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function N8(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function IR(e){return e1e&&e instanceof Map}function PR(e){return t1e&&e instanceof Set}function Zd(e){return e.o||e.t}function RR(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=F8(e);delete t[ls];for(var r=Im(t),n=0;n<r.length;n++){var o=r[n],f=t[o];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(t[o]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function MR(e,t){return t===void 0&&(t=!1),LR(e)||Qh(e)||!Cu(e)||(fg(e)>1&&(e.set=e.add=e.clear=e.delete=Y_e),Object.freeze(e),t&&Pf(e,function(r,n){return MR(n,!0)},!0)),e}function Y_e(){Ol(2)}function LR(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function kc(e){var t=AA[e];return t||Ol(18,e),t}function Z_e(e,t){AA[e]||(AA[e]=t)}function kA(){return wv}function sE(e,t){t&&(kc("Patches"),e.u=[],e.s=[],e.v=t)}function pw(e){EA(e),e.p.forEach(K_e),e.p=null}function EA(e){e===wv&&(wv=e.l)}function Uj(e){return wv={p:[],l:wv,h:e,m:!0,_:0}}function K_e(e){var t=e[ls];t.i===0||t.i===1?t.j():t.g=!0}function oE(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||kc("ES5").S(t,e,n),n?(r[ls].P&&(pw(t),Ol(4)),Cu(e)&&(e=mw(t,e),t.l||gw(t,e)),t.u&&kc("Patches").M(r[ls].t,e,t.u,t.s)):e=mw(t,r,[]),pw(t),t.u&&t.v(t.u,t.s),e!==j8?e:void 0}function mw(e,t,r){if(LR(t))return t;var n=t[ls];if(!n)return Pf(t,function(s,k){return Vj(e,n,t,s,k,r)},!0),t;if(n.A!==e)return t;if(!n.P)return gw(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=n.i===4||n.i===5?n.o=RR(n.k):n.o,f=o,y=!1;n.i===3&&(f=new Set(o),o.clear(),y=!0),Pf(f,function(s,k){return Vj(e,n,o,s,k,r,y)}),gw(e,o,!1),r&&e.u&&kc("Patches").N(n,r,e.u,e.s)}return n.o}function Vj(e,t,r,n,o,f,y){if(Qh(o)){var s=mw(e,o,f&&t&&t.i!==3&&!Am(t.R,n)?f.concat(n):void 0);if(z8(r,n,s),!Qh(s))return;e.m=!1}else y&&r.add(o);if(Cu(o)&&!LR(o)){if(!e.h.D&&e._<1)return;mw(e,o),t&&t.A.l||gw(e,o)}}function gw(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&MR(t,r)}function aE(e,t){var r=e[ls];return(r?Zd(r):e)[t]}function Hj(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Sh(e){e.P||(e.P=!0,e.l&&Sh(e.l))}function lE(e){e.o||(e.o=RR(e.t))}function TA(e,t,r){var n=IR(t)?kc("MapSet").F(t,r):PR(t)?kc("MapSet").T(t,r):e.O?function(o,f){var y=Array.isArray(o),s={i:y?1:0,A:f?f.A:kA(),P:!1,I:!1,R:{},l:f,t:o,k:null,o:null,j:null,C:!1},k=s,I=Sv;y&&(k=[s],I=cx);var D=Proxy.revocable(k,I),N=D.revoke,U=D.proxy;return s.k=U,s.j=N,U}(t,r):kc("ES5").J(t,r);return(r?r.A:kA()).p.push(n),n}function J_e(e){return Qh(e)||Ol(22,e),function t(r){if(!Cu(r))return r;var n,o=r[ls],f=fg(r);if(o){if(!o.P&&(o.i<4||!kc("ES5").K(o)))return o.t;o.I=!0,n=Wj(r,f),o.I=!1}else n=Wj(r,f);return Pf(n,function(y,s){o&&q_e(o.t,y)===s||z8(n,y,t(s))}),f===3?new Set(n):n}(e)}function Wj(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return RR(e)}function Q_e(){function e(f,y){var s=o[f];return s?s.enumerable=y:o[f]=s={configurable:!0,enumerable:y,get:function(){var k=this[ls];return Sv.get(k,f)},set:function(k){var I=this[ls];Sv.set(I,f,k)}},s}function t(f){for(var y=f.length-1;y>=0;y--){var s=f[y][ls];if(!s.P)switch(s.i){case 5:n(s)&&Sh(s);break;case 4:r(s)&&Sh(s)}}}function r(f){for(var y=f.t,s=f.k,k=Im(s),I=k.length-1;I>=0;I--){var D=k[I];if(D!==ls){var N=y[D];if(N===void 0&&!Am(y,D))return!0;var U=s[D],q=U&&U[ls];if(q?q.t!==N:!N8(U,N))return!0}}var Z=!!y[ls];return k.length!==Im(y).length+(Z?0:1)}function n(f){var y=f.k;if(y.length!==f.t.length)return!0;var s=Object.getOwnPropertyDescriptor(y,y.length-1);if(s&&!s.get)return!0;for(var k=0;k<y.length;k++)if(!y.hasOwnProperty(k))return!0;return!1}var o={};Z_e("ES5",{J:function(f,y){var s=Array.isArray(f),k=function(D,N){if(D){for(var U=Array(N.length),q=0;q<N.length;q++)Object.defineProperty(U,""+q,e(q,!0));return U}var Z=F8(N);delete Z[ls];for(var ae=Im(Z),ve=0;ve<ae.length;ve++){var ie=ae[ve];Z[ie]=e(ie,D||!!Z[ie].enumerable)}return Object.create(Object.getPrototypeOf(N),Z)}(s,f),I={i:s?5:4,A:y?y.A:kA(),P:!1,I:!1,R:{},l:y,t:f,k,o:null,g:!1,C:!1};return Object.defineProperty(k,ls,{value:I,writable:!0}),k},S:function(f,y,s){s?Qh(y)&&y[ls].A===f&&t(f.p):(f.u&&function k(I){if(I&&typeof I=="object"){var D=I[ls];if(D){var N=D.t,U=D.k,q=D.R,Z=D.i;if(Z===4)Pf(U,function(K){K!==ls&&(N[K]!==void 0||Am(N,K)?q[K]||k(U[K]):(q[K]=!0,Sh(D)))}),Pf(N,function(K){U[K]!==void 0||Am(U,K)||(q[K]=!1,Sh(D))});else if(Z===5){if(n(D)&&(Sh(D),q.length=!0),U.length<N.length)for(var ae=U.length;ae<N.length;ae++)q[ae]=!1;else for(var ve=N.length;ve<U.length;ve++)q[ve]=!0;for(var ie=Math.min(U.length,N.length),W=0;W<ie;W++)U.hasOwnProperty(W)||(q[W]=!0),q[W]===void 0&&k(U[W])}}}}(f.p[0]),t(f.p))},K:function(f){return f.i===4?r(f):n(f)}})}var Gj,wv,OR=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",e1e=typeof Map<"u",t1e=typeof Set<"u",Xj=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",j8=OR?Symbol.for("immer-nothing"):((Gj={})["immer-nothing"]=!0,Gj),qj=OR?Symbol.for("immer-draftable"):"__$immer_draftable",ls=OR?Symbol.for("immer-state"):"__$immer_state",r1e=""+Object.prototype.constructor,Im=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,F8=Object.getOwnPropertyDescriptors||function(e){var t={};return Im(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},AA={},Sv={get:function(e,t){if(t===ls)return e;var r=Zd(e);if(!Am(r,t))return function(o,f,y){var s,k=Hj(f,y);return k?"value"in k?k.value:(s=k.get)===null||s===void 0?void 0:s.call(o.k):void 0}(e,r,t);var n=r[t];return e.I||!Cu(n)?n:n===aE(e.t,t)?(lE(e),e.o[t]=TA(e.A.h,n,e)):n},has:function(e,t){return t in Zd(e)},ownKeys:function(e){return Reflect.ownKeys(Zd(e))},set:function(e,t,r){var n=Hj(Zd(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var o=aE(Zd(e),t),f=o==null?void 0:o[ls];if(f&&f.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(N8(r,o)&&(r!==void 0||Am(e.t,t)))return!0;lE(e),Sh(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return aE(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,lE(e),Sh(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Zd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Ol(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ol(12)}},cx={};Pf(Sv,function(e,t){cx[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cx.deleteProperty=function(e,t){return cx.set.call(this,e,t,void 0)},cx.set=function(e,t,r){return Sv.set.call(this,e[0],t,r,e[0])};var n1e=function(){function e(r){var n=this;this.O=Xj,this.D=!0,this.produce=function(o,f,y){if(typeof o=="function"&&typeof f!="function"){var s=f;f=o;var k=n;return function(ae){var ve=this;ae===void 0&&(ae=s);for(var ie=arguments.length,W=Array(ie>1?ie-1:0),K=1;K<ie;K++)W[K-1]=arguments[K];return k.produce(ae,function(he){var de;return(de=f).call.apply(de,[ve,he].concat(W))})}}var I;if(typeof f!="function"&&Ol(6),y!==void 0&&typeof y!="function"&&Ol(7),Cu(o)){var D=Uj(n),N=TA(n,o,void 0),U=!0;try{I=f(N),U=!1}finally{U?pw(D):EA(D)}return typeof Promise<"u"&&I instanceof Promise?I.then(function(ae){return sE(D,y),oE(ae,D)},function(ae){throw pw(D),ae}):(sE(D,y),oE(I,D))}if(!o||typeof o!="object"){if((I=f(o))===void 0&&(I=o),I===j8&&(I=void 0),n.D&&MR(I,!0),y){var q=[],Z=[];kc("Patches").M(o,I,q,Z),y(q,Z)}return I}Ol(21,o)},this.produceWithPatches=function(o,f){if(typeof o=="function")return function(I){for(var D=arguments.length,N=Array(D>1?D-1:0),U=1;U<D;U++)N[U-1]=arguments[U];return n.produceWithPatches(I,function(q){return o.apply(void 0,[q].concat(N))})};var y,s,k=n.produce(o,f,function(I,D){y=I,s=D});return typeof Promise<"u"&&k instanceof Promise?k.then(function(I){return[I,y,s]}):[k,y,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Cu(r)||Ol(8),Qh(r)&&(r=J_e(r));var n=Uj(this),o=TA(this,r,void 0);return o[ls].C=!0,EA(n),o},t.finishDraft=function(r,n){var o=r&&r[ls],f=o.A;return sE(f,n),oE(void 0,f)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Xj&&Ol(20),this.O=r},t.applyPatches=function(r,n){var o;for(o=n.length-1;o>=0;o--){var f=n[o];if(f.path.length===0&&f.op==="replace"){r=f.value;break}}o>-1&&(n=n.slice(o+1));var y=kc("Patches").$;return Qh(r)?y(r,n):this.produce(r,function(s){return y(s,n)})},e}(),ja=new n1e,B8=ja.produce;ja.produceWithPatches.bind(ja);ja.setAutoFreeze.bind(ja);ja.setUseProxies.bind(ja);ja.applyPatches.bind(ja);ja.createDraft.bind(ja);ja.finishDraft.bind(ja);function Yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Zj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yj(Object(r),!0).forEach(function(n){wue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Kj=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),cE=function(){return Math.random().toString(36).substring(7).split("").join(".")},yw={INIT:"@@redux/INIT"+cE(),REPLACE:"@@redux/REPLACE"+cE(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+cE()}};function i1e(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function DR(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Oo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Oo(1));return r(DR)(e,t)}if(typeof e!="function")throw new Error(Oo(2));var o=e,f=t,y=[],s=y,k=!1;function I(){s===y&&(s=y.slice())}function D(){if(k)throw new Error(Oo(3));return f}function N(ae){if(typeof ae!="function")throw new Error(Oo(4));if(k)throw new Error(Oo(5));var ve=!0;return I(),s.push(ae),function(){if(ve){if(k)throw new Error(Oo(6));ve=!1,I();var W=s.indexOf(ae);s.splice(W,1),y=null}}}function U(ae){if(!i1e(ae))throw new Error(Oo(7));if(typeof ae.type>"u")throw new Error(Oo(8));if(k)throw new Error(Oo(9));try{k=!0,f=o(f,ae)}finally{k=!1}for(var ve=y=s,ie=0;ie<ve.length;ie++){var W=ve[ie];W()}return ae}function q(ae){if(typeof ae!="function")throw new Error(Oo(10));o=ae,U({type:yw.REPLACE})}function Z(){var ae,ve=N;return ae={subscribe:function(W){if(typeof W!="object"||W===null)throw new Error(Oo(11));function K(){W.next&&W.next(D())}K();var he=ve(K);return{unsubscribe:he}}},ae[Kj]=function(){return this},ae}return U({type:yw.INIT}),n={dispatch:U,subscribe:N,getState:D,replaceReducer:q},n[Kj]=Z,n}function s1e(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:yw.INIT});if(typeof n>"u")throw new Error(Oo(12));if(typeof r(void 0,{type:yw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Oo(13))})}function o1e(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];typeof e[o]=="function"&&(r[o]=e[o])}var f=Object.keys(r),y;try{s1e(r)}catch(s){y=s}return function(k,I){if(k===void 0&&(k={}),y)throw y;for(var D=!1,N={},U=0;U<f.length;U++){var q=f[U],Z=r[q],ae=k[q],ve=Z(ae,I);if(typeof ve>"u")throw I&&I.type,new Error(Oo(14));N[q]=ve,D=D||ve!==ae}return D=D||f.length!==Object.keys(k).length,D?N:k}}function xw(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,o){return function(){return n(o.apply(void 0,arguments))}})}function a1e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var o=n.apply(void 0,arguments),f=function(){throw new Error(Oo(15))},y={getState:o.getState,dispatch:function(){return f.apply(void 0,arguments)}},s=t.map(function(k){return k(y)});return f=xw.apply(void 0,s)(o.dispatch),Zj(Zj({},o),{},{dispatch:f})}}}function $8(e){var t=function(n){var o=n.dispatch,f=n.getState;return function(y){return function(s){return typeof s=="function"?s(o,f,e):y(s)}}};return t}var U8=$8();U8.withExtraArgument=$8;const Jj=U8;var V8=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(n[f]=o[f])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l1e=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},n,o,f,y;return y={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function s(I){return function(D){return k([I,D])}}function k(I){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(f=I[0]&2?o.return:I[0]?o.throw||((f=o.return)&&f.call(o),0):o.next)&&!(f=f.call(o,I[1])).done)return f;switch(o=0,f&&(I=[I[0]&2,f.value]),I[0]){case 0:case 1:f=I;break;case 4:return r.label++,{value:I[1],done:!1};case 5:r.label++,o=I[1],I=[0];continue;case 7:I=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(I[0]===6||I[0]===2)){r=0;continue}if(I[0]===3&&(!f||I[1]>f[0]&&I[1]<f[3])){r.label=I[1];break}if(I[0]===6&&r.label<f[1]){r.label=f[1],f=I;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(I);break}f[2]&&r.ops.pop(),r.trys.pop();continue}I=t.call(e,r)}catch(D){I=[6,D],o=0}finally{n=f=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}},Xm=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e},c1e=Object.defineProperty,u1e=Object.defineProperties,h1e=Object.getOwnPropertyDescriptors,Qj=Object.getOwnPropertySymbols,d1e=Object.prototype.hasOwnProperty,f1e=Object.prototype.propertyIsEnumerable,e4=function(e,t,r){return t in e?c1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},Vh=function(e,t){for(var r in t||(t={}))d1e.call(t,r)&&e4(e,r,t[r]);if(Qj)for(var n=0,o=Qj(t);n<o.length;n++){var r=o[n];f1e.call(t,r)&&e4(e,r,t[r])}return e},uE=function(e,t){return u1e(e,h1e(t))},p1e=function(e,t,r){return new Promise(function(n,o){var f=function(k){try{s(r.next(k))}catch(I){o(I)}},y=function(k){try{s(r.throw(k))}catch(I){o(I)}},s=function(k){return k.done?n(k.value):Promise.resolve(k.value).then(f,y)};s((r=r.apply(e,t)).next())})},m1e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xw:xw.apply(null,arguments)};function g1e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function Hh(e,t){function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(t){var f=t.apply(void 0,n);if(!f)throw new Error("prepareAction did not return an object");return Vh(Vh({type:e,payload:f.payload},"meta"in f&&{meta:f.meta}),"error"in f&&{error:f.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var y1e=function(e){V8(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Xm([void 0],r[0].concat(this)))):new(t.bind.apply(t,Xm([void 0],r.concat(this))))},t}(Array),x1e=function(e){V8(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=e.apply(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Xm([void 0],r[0].concat(this)))):new(t.bind.apply(t,Xm([void 0],r.concat(this))))},t}(Array);function IA(e){return Cu(e)?B8(e,function(){}):e}function v1e(e){return typeof e=="boolean"}function b1e(){return function(t){return _1e(t)}}function _1e(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new y1e;return r&&(v1e(r)?n.push(Jj):n.push(Jj.withExtraArgument(r.extraArgument))),n}var w1e=!0;function S1e(e){var t=b1e(),r=e||{},n=r.reducer,o=n===void 0?void 0:n,f=r.middleware,y=f===void 0?t():f,s=r.devTools,k=s===void 0?!0:s,I=r.preloadedState,D=I===void 0?void 0:I,N=r.enhancers,U=N===void 0?void 0:N,q;if(typeof o=="function")q=o;else if(g1e(o))q=o1e(o);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Z=y;typeof Z=="function"&&(Z=Z(t));var ae=a1e.apply(void 0,Z),ve=xw;k&&(ve=m1e(Vh({trace:!w1e},typeof k=="object"&&k)));var ie=new x1e(ae),W=ie;Array.isArray(U)?W=Xm([ae],U):typeof U=="function"&&(W=U(ie));var K=ve.apply(void 0,W);return DR(q,D,K)}function H8(e){var t={},r=[],n,o={addCase:function(f,y){var s=typeof f=="string"?f:f.type;if(!s)throw new Error("`builder.addCase` cannot be called with an empty action type");if(s in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[s]=y,o},addMatcher:function(f,y){return r.push({matcher:f,reducer:y}),o},addDefaultCase:function(f){return n=f,o}};return e(o),[t,r,n]}function C1e(e){return typeof e=="function"}function k1e(e,t,r,n){r===void 0&&(r=[]);var o=typeof t=="function"?H8(t):[t,r,n],f=o[0],y=o[1],s=o[2],k;if(C1e(e))k=function(){return IA(e())};else{var I=IA(e);k=function(){return I}}function D(N,U){N===void 0&&(N=k());var q=Xm([f[U.type]],y.filter(function(Z){var ae=Z.matcher;return ae(U)}).map(function(Z){var ae=Z.reducer;return ae}));return q.filter(function(Z){return!!Z}).length===0&&(q=[s]),q.reduce(function(Z,ae){if(ae)if(Qh(Z)){var ve=Z,ie=ae(ve,U);return ie===void 0?Z:ie}else{if(Cu(Z))return B8(Z,function(W){return ae(W,U)});var ie=ae(Z,U);if(ie===void 0){if(Z===null)return Z;throw Error("A case reducer on a non-draftable value must not return undefined")}return ie}return Z},N)}return D.getInitialState=k,D}function E1e(e,t){return e+"/"+t}function zR(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:IA(e.initialState),n=e.reducers||{},o=Object.keys(n),f={},y={},s={};o.forEach(function(D){var N=n[D],U=E1e(t,D),q,Z;"reducer"in N?(q=N.reducer,Z=N.prepare):q=N,f[D]=q,y[U]=q,s[D]=Z?Hh(U,Z):Hh(U)});function k(){var D=typeof e.extraReducers=="function"?H8(e.extraReducers):[e.extraReducers],N=D[0],U=N===void 0?{}:N,q=D[1],Z=q===void 0?[]:q,ae=D[2],ve=ae===void 0?void 0:ae,ie=Vh(Vh({},U),y);return k1e(r,function(W){for(var K in ie)W.addCase(K,ie[K]);for(var he=0,de=Z;he<de.length;he++){var Ae=de[he];W.addMatcher(Ae.matcher,Ae.reducer)}ve&&W.addDefaultCase(ve)})}var I;return{name:t,reducer:function(D,N){return I||(I=k()),I(D,N)},actions:s,caseReducers:f,getInitialState:function(){return I||(I=k()),I.getInitialState()}}}var T1e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",A1e=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=T1e[Math.random()*64|0];return t},I1e=["name","message","stack","code"],hE=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),t4=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),P1e=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=I1e;r<n.length;r++){var o=n[r];typeof e[o]=="string"&&(t[o]=e[o])}return t}return{message:String(e)}};(function(){function e(t,r,n){var o=Hh(t+"/fulfilled",function(I,D,N,U){return{payload:I,meta:uE(Vh({},U||{}),{arg:N,requestId:D,requestStatus:"fulfilled"})}}),f=Hh(t+"/pending",function(I,D,N){return{payload:void 0,meta:uE(Vh({},N||{}),{arg:D,requestId:I,requestStatus:"pending"})}}),y=Hh(t+"/rejected",function(I,D,N,U,q){return{payload:U,error:(n&&n.serializeError||P1e)(I||"Rejected"),meta:uE(Vh({},q||{}),{arg:N,requestId:D,rejectedWithValue:!!U,requestStatus:"rejected",aborted:(I==null?void 0:I.name)==="AbortError",condition:(I==null?void 0:I.name)==="ConditionError"})}}),s=typeof AbortController<"u"?AbortController:function(){function I(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return I.prototype.abort=function(){},I}();function k(I){return function(D,N,U){var q=n!=null&&n.idGenerator?n.idGenerator(I):A1e(),Z=new s,ae;function ve(W){ae=W,Z.abort()}var ie=function(){return p1e(this,null,function(){var W,K,he,de,Ae,Te,Ue;return l1e(this,function(Pe){switch(Pe.label){case 0:return Pe.trys.push([0,4,,5]),de=(W=n==null?void 0:n.condition)==null?void 0:W.call(n,I,{getState:N,extra:U}),M1e(de)?[4,de]:[3,2];case 1:de=Pe.sent(),Pe.label=2;case 2:if(de===!1||Z.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return Ae=new Promise(function($e,Ve){return Z.signal.addEventListener("abort",function(){return Ve({name:"AbortError",message:ae||"Aborted"})})}),D(f(q,I,(K=n==null?void 0:n.getPendingMeta)==null?void 0:K.call(n,{requestId:q,arg:I},{getState:N,extra:U}))),[4,Promise.race([Ae,Promise.resolve(r(I,{dispatch:D,getState:N,extra:U,requestId:q,signal:Z.signal,abort:ve,rejectWithValue:function($e,Ve){return new hE($e,Ve)},fulfillWithValue:function($e,Ve){return new t4($e,Ve)}})).then(function($e){if($e instanceof hE)throw $e;return $e instanceof t4?o($e.payload,q,I,$e.meta):o($e,q,I)})])];case 3:return he=Pe.sent(),[3,5];case 4:return Te=Pe.sent(),he=Te instanceof hE?y(null,q,I,Te.payload,Te.meta):y(Te,q,I),[3,5];case 5:return Ue=n&&!n.dispatchConditionRejection&&y.match(he)&&he.meta.condition,Ue||D(he),[2,he]}})})}();return Object.assign(ie,{abort:ve,requestId:q,arg:I,unwrap:function(){return ie.then(R1e)}})}}return Object.assign(k,{pending:f,rejected:y,fulfilled:o,typePrefix:t})}return e.withTypes=function(){return e},e})();function R1e(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function M1e(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var NR="listenerMiddleware";Hh(NR+"/add");Hh(NR+"/removeAll");Hh(NR+"/remove");var r4;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Q_e();const L1e={loggedIn:!1,userId:null,mobile:null},W8=zR({name:"userAuth",initialState:L1e,reducers:{userLogin:(e,t)=>{e.loggedIn=!0,e.userId=t.payload.userId,e.mobile=t.payload.mobile},userLogout:e=>{e.loggedIn=!1,e.userId=null,e.mobile=null}}}),{userLogin:PA,userLogout:G8}=W8.actions,O1e={loggedIn:!1,document:!1,vehicle:!1,driverId:null,vehicleType:null,available:!0},X8=zR({name:"driverAuth",initialState:O1e,reducers:{driverLogin:(e,t)=>{e.loggedIn=!0,e.document=t.payload.document,e.vehicle=t.payload.vehicle,e.driverId=t.payload.driverId,e.vehicleType=t.payload.vehicleType},setDocument:e=>{e.document=!0},setVehicle:e=>{e.vehicle=!0},setDriverAvailable:(e,t)=>{e.available=t.payload.available},driverLogout:e=>{e.loggedIn=!1,e.available=!1,e.driverId=null,e.vehicleType=null}}}),{driverLogin:jR,driverLogout:D1e,setDocument:z1e,setVehicle:N1e,setDriverAvailable:Qv}=X8.actions,j1e={loggedIn:!1},q8=zR({name:"adminAuth",initialState:j1e,reducers:{adminLogin:e=>{e.loggedIn=!0},adminLogout:e=>{e.loggedIn=!1}}}),{adminLogin:F1e,adminLogout:B1e}=q8.actions,gc={background:"rgba(0, 0, 0, 0.8)",color:"#fff",fontSize:"16px",borderRadius:"8px",padding:"10px 20px"},Ui={login:"/login",signup:"/signup",resetpassword:"/resetpassword",home:"/",profile:"/profile",rideconfirm:"/rideconfirm",payment:"/payment",review:"/review",rideHistory:"/history",currentRide:"/currentRide",scheduledPendingRides:"/sheduledRide",driverInfo:"/driverInfo"},nu={login:"/admin/login",dashboard:"/admin/dashboard",user:"/admin/users",drivers:"/admin/drivers",driverAndVehicleVerify:"/admin/verify",cabs:"/admin/cabs"};function FR(e){const{loginserver:t,signup:r,person:n,resetpassword:o}=e,[f,y]=le.useState(!1),s=Cs(),k=Va(),I=cd({initialValues:{email:"",password:""},validationSchema:Au({email:$i().email("Please Enter a valid Email").required("Please Enter value"),password:$i().required("Passowrd is required")}),onSubmit:ie=>{D(ie)}}),D=async ie=>{try{const W=await Vi.post(t,ie);if(n=="user")k(PA({userId:W.data.userId,mobile:W.data.mobile})),localStorage.setItem("userToken",W.data.token),s(Ui.home);else if(n=="driver"){localStorage.setItem("driverToken",W.data.token),console.log(W);const{document:K,vehicle:he,driverId:de,vehicleType:Ae}=W.data;k(jR({document:K,vehicle:he,driverId:de,vehicleType:Ae})),console.log("Navigating to driver dashboard"),s(Ti.dashboard)}else n=="admin"&&(k(F1e()),localStorage.setItem("adminToken",W.data),s(nu.dashboard))}catch(W){console.log(W),rn(W)}},N=new dc;N.setCustomParameters({prompt:"select_account"});const U=async()=>{try{const ie=await jV(i8,N),{displayName:W,email:K}=ie.user;W&&K&&q(W,K)}catch(ie){As.error(ie.message)}},q=async(ie,W)=>{try{const K={displayName:ie,email:W},he=await Vi.post(`/google${t}`,K);localStorage.setItem("userToken",he.data.token),console.log("response :",he),k(PA({userId:he.data.userId,mobile:he.data.mobile})),n=="user"&&s(Ui.home)}catch(K){console.log(K),rn(K)}},Z=async()=>{try{if(I.values.email==="")As.error("please enter the Email");else{As.loading("Password Reset link is sending to your email please wait...",{style:gc});const ie={email:I.values.email},W=await Vi.post(o,ie);console.log(W),As.dismiss(),As.success("link has been sended successfully")}}catch(ie){As.dismiss(),console.log(ie),rn(ie)}},ae="pl-2 outline-none border-b-4 w-full rounded-lg p-2.5 sm:text-sm",ve="pl-2 outline-none border-b border-red-400 w-full rounded-lg p-2.5 sm:text-sm";return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:A.jsx("div",{className:"w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black text-blue",children:"Sign In"}),A.jsxs("form",{className:"mt-8",onSubmit:I.handleSubmit,children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("input",{type:"text",name:"email",placeholder:"Email",required:!0,value:I.values.email,onChange:I.handleChange,onBlur:I.handleBlur,className:I.touched.email&&I.errors.email?ve:ae}),I.touched.email&&I.errors.email&&A.jsx("div",{className:"text-red-500 text-xs",children:I.errors.email})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("input",{type:f?"text":"password",name:"password",placeholder:"Password",required:!0,value:I.values.password,onChange:I.handleChange,onBlur:I.handleBlur,className:I.touched.password&&I.errors.password?ve:ae}),I.touched.password&&I.errors.password&&A.jsx("div",{className:"text-red-500 text-xs",children:I.errors.password})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{type:"checkbox",id:"showPassword",onChange:()=>y(!f),className:"mr-2"}),A.jsx("label",{htmlFor:"showPassword",children:"Show Password"})]}),n=="admin"?"":A.jsx("p",{className:"text-blue-600 cursor-pointer hover:cursor-pointer",onClick:Z,children:"forgot password ?"})]}),A.jsx("button",{className:"mt-3 w-full cursor-pointer rounded-lg bg-blue-600 pt-3 pb-3 text-white shadow-lg hover:bg-blue-400",type:"submit",children:"Submit"})]}),n=="admin"?"":A.jsxs(A.Fragment,{children:[n=="user"&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"mt-1 flex items-center",children:[A.jsx("div",{className:"w-full border-t border-gray-400"}),A.jsx("div",{className:"mx-4 text-sm text-gray-600",children:"or"}),A.jsx("div",{className:"w-full border-t border-gray-400"})]}),A.jsx("button",{className:"mt-2 w-full cursor-pointer rounded-lg border bg-red-600 pt-3 pb-3 text-white shadow-2xl hover:bg-red-400",onClick:U,children:"Sign in with Google"})]}),A.jsx("div",{className:"mt-1 text-center",children:A.jsxs("p",{className:"text-sm text-gray-600",children:["create an account? ",A.jsx(Un,{to:r,className:"font-bold text-blue-600 no-underline hover:text-blue-400",children:"Sign up"})]})})]})]})})})})})}function $1e(){const e={loginserver:ws.login,signup:Ti.signup,resetpassword:ws.resetPasswordLink,person:"driver"};return A.jsx(A.Fragment,{children:A.jsx(FR,{...e})})}const U1e="https://bookat.fun/",Gs=Wf.create({baseURL:U1e,headers:{"Content-Type":"application/json"}});Gs.interceptors.request.use(e=>{const t=localStorage.getItem("driverToken");return t&&(console.log(15),e.headers.Authorization=`Bearer ${t}`),e});var Y8={},RA={exports:{}};/*!
 * ApexCharts v3.44.0
 * (c) 2018-2023 ApexCharts
 * Released under the MIT License.
 */(function(e,t){function r(pe,c){var d=Object.keys(pe);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(pe);c&&(m=m.filter(function(v){return Object.getOwnPropertyDescriptor(pe,v).enumerable})),d.push.apply(d,m)}return d}function n(pe){for(var c=1;c<arguments.length;c++){var d=arguments[c]!=null?arguments[c]:{};c%2?r(Object(d),!0).forEach(function(m){k(pe,m,d[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(d)):r(Object(d)).forEach(function(m){Object.defineProperty(pe,m,Object.getOwnPropertyDescriptor(d,m))})}return pe}function o(pe){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},o(pe)}function f(pe,c){if(!(pe instanceof c))throw new TypeError("Cannot call a class as a function")}function y(pe,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(pe,m.key,m)}}function s(pe,c,d){return c&&y(pe.prototype,c),d&&y(pe,d),pe}function k(pe,c,d){return c in pe?Object.defineProperty(pe,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):pe[c]=d,pe}function I(pe,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");pe.prototype=Object.create(c&&c.prototype,{constructor:{value:pe,writable:!0,configurable:!0}}),c&&N(pe,c)}function D(pe){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},D(pe)}function N(pe,c){return N=Object.setPrototypeOf||function(d,m){return d.__proto__=m,d},N(pe,c)}function U(pe,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(pe)}function q(pe){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var d,m=D(pe);if(c){var v=D(this).constructor;d=Reflect.construct(m,arguments,v)}else d=m.apply(this,arguments);return U(this,d)}}function Z(pe,c){return function(d){if(Array.isArray(d))return d}(pe)||function(d,m){var v=d==null?null:typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(v!=null){var b,S,T=[],M=!0,z=!1;try{for(v=v.call(d);!(M=(b=v.next()).done)&&(T.push(b.value),!m||T.length!==m);M=!0);}catch($){z=!0,S=$}finally{try{M||v.return==null||v.return()}finally{if(z)throw S}}return T}}(pe,c)||ve(pe,c)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ae(pe){return function(c){if(Array.isArray(c))return ie(c)}(pe)||function(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}(pe)||ve(pe)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ve(pe,c){if(pe){if(typeof pe=="string")return ie(pe,c);var d=Object.prototype.toString.call(pe).slice(8,-1);return d==="Object"&&pe.constructor&&(d=pe.constructor.name),d==="Map"||d==="Set"?Array.from(pe):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?ie(pe,c):void 0}}function ie(pe,c){(c==null||c>pe.length)&&(c=pe.length);for(var d=0,m=new Array(c);d<c;d++)m[d]=pe[d];return m}var W=function(){function pe(){f(this,pe)}return s(pe,[{key:"shadeRGBColor",value:function(c,d){var m=d.split(","),v=c<0?0:255,b=c<0?-1*c:c,S=parseInt(m[0].slice(4),10),T=parseInt(m[1],10),M=parseInt(m[2],10);return"rgb("+(Math.round((v-S)*b)+S)+","+(Math.round((v-T)*b)+T)+","+(Math.round((v-M)*b)+M)+")"}},{key:"shadeHexColor",value:function(c,d){var m=parseInt(d.slice(1),16),v=c<0?0:255,b=c<0?-1*c:c,S=m>>16,T=m>>8&255,M=255&m;return"#"+(16777216+65536*(Math.round((v-S)*b)+S)+256*(Math.round((v-T)*b)+T)+(Math.round((v-M)*b)+M)).toString(16).slice(1)}},{key:"shadeColor",value:function(c,d){return pe.isColorHex(d)?this.shadeHexColor(c,d):this.shadeRGBColor(c,d)}}],[{key:"bind",value:function(c,d){return function(){return c.apply(d,arguments)}}},{key:"isObject",value:function(c){return c&&o(c)==="object"&&!Array.isArray(c)&&c!=null}},{key:"is",value:function(c,d){return Object.prototype.toString.call(d)==="[object "+c+"]"}},{key:"listToArray",value:function(c){var d,m=[];for(d=0;d<c.length;d++)m[d]=c[d];return m}},{key:"extend",value:function(c,d){var m=this;typeof Object.assign!="function"&&(Object.assign=function(b){if(b==null)throw new TypeError("Cannot convert undefined or null to object");for(var S=Object(b),T=1;T<arguments.length;T++){var M=arguments[T];if(M!=null)for(var z in M)M.hasOwnProperty(z)&&(S[z]=M[z])}return S});var v=Object.assign({},c);return this.isObject(c)&&this.isObject(d)&&Object.keys(d).forEach(function(b){m.isObject(d[b])&&b in c?v[b]=m.extend(c[b],d[b]):Object.assign(v,k({},b,d[b]))}),v}},{key:"extendArray",value:function(c,d){var m=[];return c.map(function(v){m.push(pe.extend(d,v))}),c=m}},{key:"monthMod",value:function(c){return c%12}},{key:"clone",value:function(c){if(pe.is("Array",c)){for(var d=[],m=0;m<c.length;m++)d[m]=this.clone(c[m]);return d}if(pe.is("Null",c))return null;if(pe.is("Date",c))return c;if(o(c)==="object"){var v={};for(var b in c)c.hasOwnProperty(b)&&(v[b]=this.clone(c[b]));return v}return c}},{key:"log10",value:function(c){return Math.log(c)/Math.LN10}},{key:"roundToBase10",value:function(c){return Math.pow(10,Math.floor(Math.log10(c)))}},{key:"roundToBase",value:function(c,d){return Math.pow(d,Math.floor(Math.log(c)/Math.log(d)))}},{key:"parseNumber",value:function(c){return c===null?c:parseFloat(c)}},{key:"stripNumber",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(c)?c:parseFloat(c.toPrecision(d))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(c){var d=String(c).split(/[eE]/);if(d.length===1)return d[0];var m="",v=c<0?"-":"",b=d[0].replace(".",""),S=Number(d[1])+1;if(S<0){for(m=v+"0.";S++;)m+="0";return m+b.replace(/^-/,"")}for(S-=b.length;S--;)m+="0";return b+m}},{key:"getDimensions",value:function(c){var d=getComputedStyle(c,null),m=c.clientHeight,v=c.clientWidth;return m-=parseFloat(d.paddingTop)+parseFloat(d.paddingBottom),[v-=parseFloat(d.paddingLeft)+parseFloat(d.paddingRight),m]}},{key:"getBoundingClientRect",value:function(c){var d=c.getBoundingClientRect();return{top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:c.clientWidth,height:c.clientHeight,x:d.left,y:d.top}}},{key:"getLargestStringFromArr",value:function(c){return c.reduce(function(d,m){return Array.isArray(m)&&(m=m.reduce(function(v,b){return v.length>b.length?v:b})),d.length>m.length?d:m},0)}},{key:"hexToRgba",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;c.substring(0,1)!=="#"&&(c="#999999");var m=c.replace("#","");m=m.match(new RegExp("(.{"+m.length/3+"})","g"));for(var v=0;v<m.length;v++)m[v]=parseInt(m[v].length===1?m[v]+m[v]:m[v],16);return d!==void 0&&m.push(d),"rgba("+m.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(c){return parseFloat(c.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(c){return(c=c.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&c.length===4?"#"+("0"+parseInt(c[1],10).toString(16)).slice(-2)+("0"+parseInt(c[2],10).toString(16)).slice(-2)+("0"+parseInt(c[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(c){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(c)}},{key:"getPolygonPos",value:function(c,d){for(var m=[],v=2*Math.PI/d,b=0;b<d;b++){var S={};S.x=c*Math.sin(b*v),S.y=-c*Math.cos(b*v),m.push(S)}return m}},{key:"polarToCartesian",value:function(c,d,m,v){var b=(v-90)*Math.PI/180;return{x:c+m*Math.cos(b),y:d+m*Math.sin(b)}}},{key:"escapeString",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",m=c.toString().slice();return m=m.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,d)}},{key:"negToZero",value:function(c){return c<0?0:c}},{key:"moveIndexInArray",value:function(c,d,m){if(m>=c.length)for(var v=m-c.length+1;v--;)c.push(void 0);return c.splice(m,0,c.splice(d,1)[0]),c}},{key:"extractNumber",value:function(c){return parseFloat(c.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(c,d){for(;(c=c.parentElement)&&!c.classList.contains(d););return c}},{key:"setELstyles",value:function(c,d){for(var m in d)d.hasOwnProperty(m)&&(c.style.key=d[m])}},{key:"isNumber",value:function(c){return!isNaN(c)&&parseFloat(Number(c))===c&&!isNaN(parseInt(c,10))}},{key:"isFloat",value:function(c){return Number(c)===c&&c%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var c=window.navigator.userAgent,d=c.indexOf("MSIE ");if(d>0)return parseInt(c.substring(d+5,c.indexOf(".",d)),10);if(c.indexOf("Trident/")>0){var m=c.indexOf("rv:");return parseInt(c.substring(m+3,c.indexOf(".",m)),10)}var v=c.indexOf("Edge/");return v>0&&parseInt(c.substring(v+5,c.indexOf(".",v)),10)}}]),pe}(),K=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.setEasingFunctions()}return s(pe,[{key:"setEasingFunctions",value:function(){var c;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":c="-";break;case"easein":c="<";break;case"easeout":c=">";break;case"easeinout":default:c="<>";break;case"swing":c=function(d){var m=1.70158;return(d-=1)*d*((m+1)*d+m)+1};break;case"bounce":c=function(d){return d<1/2.75?7.5625*d*d:d<2/2.75?7.5625*(d-=1.5/2.75)*d+.75:d<2.5/2.75?7.5625*(d-=2.25/2.75)*d+.9375:7.5625*(d-=2.625/2.75)*d+.984375};break;case"elastic":c=function(d){return d===!!d?d:Math.pow(2,-10*d)*Math.sin((d-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=c}}},{key:"animateLine",value:function(c,d,m,v){c.attr(d).animate(v).attr(m)}},{key:"animateMarker",value:function(c,d,m,v,b,S){d||(d=0),c.attr({r:d,width:d,height:d}).animate(v,b).attr({r:m,width:m.width,height:m.height}).afterAll(function(){S()})}},{key:"animateCircle",value:function(c,d,m,v,b){c.attr({r:d.r,cx:d.cx,cy:d.cy}).animate(v,b).attr({r:m.r,cx:m.cx,cy:m.cy})}},{key:"animateRect",value:function(c,d,m,v,b){c.attr(d).animate(v).attr(m).afterAll(function(){return b()})}},{key:"animatePathsGradually",value:function(c){var d=c.el,m=c.realIndex,v=c.j,b=c.fill,S=c.pathFrom,T=c.pathTo,M=c.speed,z=c.delay,$=this.w,H=0;$.config.chart.animations.animateGradually.enabled&&(H=$.config.chart.animations.animateGradually.delay),$.config.chart.animations.dynamicAnimation.enabled&&$.globals.dataChanged&&$.config.chart.type!=="bar"&&(H=0),this.morphSVG(d,m,v,$.config.chart.type!=="line"||$.globals.comboCharts?b:"stroke",S,T,M,z*H)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(c){var d=c.el;d.classList.remove("apexcharts-element-hidden"),d.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(c){var d=this.w;d.globals.animationEnded||(d.globals.animationEnded=!0,this.showDelayedElements(),typeof d.config.chart.events.animationEnd=="function"&&d.config.chart.events.animationEnd(this.ctx,{el:c,w:d}))}},{key:"morphSVG",value:function(c,d,m,v,b,S,T,M){var z=this,$=this.w;b||(b=c.attr("pathFrom")),S||(S=c.attr("pathTo"));var H=function(B){return $.config.chart.type==="radar"&&(T=1),"M 0 ".concat($.globals.gridHeight)};(!b||b.indexOf("undefined")>-1||b.indexOf("NaN")>-1)&&(b=H()),(!S||S.indexOf("undefined")>-1||S.indexOf("NaN")>-1)&&(S=H()),$.globals.shouldAnimate||(T=1),c.plot(b).animate(1,$.globals.easing,M).plot(b).animate(T,$.globals.easing,M).plot(S).afterAll(function(){W.isNumber(m)?m===$.globals.series[$.globals.maxValsInArrayIndex].length-2&&$.globals.shouldAnimate&&z.animationCompleted(c):v!=="none"&&$.globals.shouldAnimate&&(!$.globals.comboCharts&&d===$.globals.series.length-1||$.globals.comboCharts)&&z.animationCompleted(c),z.showDelayedElements()})}}]),pe}(),he=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"getDefaultFilter",value:function(c,d){var m=this.w;c.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),m.config.states.normal.filter!=="none"?this.applyFilter(c,d,m.config.states.normal.filter.type,m.config.states.normal.filter.value):m.config.chart.dropShadow.enabled&&this.dropShadow(c,m.config.chart.dropShadow,d)}},{key:"addNormalFilter",value:function(c,d){var m=this.w;m.config.chart.dropShadow.enabled&&!c.node.classList.contains("apexcharts-marker")&&this.dropShadow(c,m.config.chart.dropShadow,d)}},{key:"addLightenFilter",value:function(c,d,m){var v=this,b=this.w,S=m.intensity;c.unfilter(!0),new window.SVG.Filter,c.filter(function(T){var M=b.config.chart.dropShadow;(M.enabled?v.addShadow(T,d,M):T).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:S}})}),c.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(c.filterer.node)}},{key:"addDarkenFilter",value:function(c,d,m){var v=this,b=this.w,S=m.intensity;c.unfilter(!0),new window.SVG.Filter,c.filter(function(T){var M=b.config.chart.dropShadow;(M.enabled?v.addShadow(T,d,M):T).componentTransfer({rgb:{type:"linear",slope:S}})}),c.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(c.filterer.node)}},{key:"applyFilter",value:function(c,d,m){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;switch(m){case"none":this.addNormalFilter(c,d);break;case"lighten":this.addLightenFilter(c,d,{intensity:v});break;case"darken":this.addDarkenFilter(c,d,{intensity:v})}}},{key:"addShadow",value:function(c,d,m){var v=m.blur,b=m.top,S=m.left,T=m.color,M=m.opacity,z=c.flood(Array.isArray(T)?T[d]:T,M).composite(c.sourceAlpha,"in").offset(S,b).gaussianBlur(v).merge(c.source);return c.blend(c.source,z)}},{key:"dropShadow",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=d.top,b=d.left,S=d.blur,T=d.color,M=d.opacity,z=d.noUserSpaceOnUse,$=this.w;return c.unfilter(!0),W.isIE()&&$.config.chart.type==="radialBar"||(T=Array.isArray(T)?T[m]:T,c.filter(function(H){var B=null;B=W.isSafari()||W.isFirefox()||W.isIE()?H.flood(T,M).composite(H.sourceAlpha,"in").offset(b,v).gaussianBlur(S):H.flood(T,M).composite(H.sourceAlpha,"in").offset(b,v).gaussianBlur(S).merge(H.source),H.blend(H.source,B)}),z||c.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(c.filterer.node)),c}},{key:"setSelectionFilter",value:function(c,d,m){var v=this.w;if(v.globals.selectedDataPoints[d]!==void 0&&v.globals.selectedDataPoints[d].indexOf(m)>-1){c.node.setAttribute("selected",!0);var b=v.config.states.active.filter;b!=="none"&&this.applyFilter(c,d,b.type,b.value)}}},{key:"_scaleFilterSize",value:function(c){(function(d){for(var m in d)d.hasOwnProperty(m)&&c.setAttribute(m,d[m])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),pe}(),de=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"roundPathCorners",value:function(c,d){function m(Le,rt,Ze){var Et=rt.x-Le.x,Bt=rt.y-Le.y,Nt=Math.sqrt(Et*Et+Bt*Bt);return v(Le,rt,Math.min(1,Ze/Nt))}function v(Le,rt,Ze){return{x:Le.x+(rt.x-Le.x)*Ze,y:Le.y+(rt.y-Le.y)*Ze}}function b(Le,rt){Le.length>2&&(Le[Le.length-2]=rt.x,Le[Le.length-1]=rt.y)}function S(Le){return{x:parseFloat(Le[Le.length-2]),y:parseFloat(Le[Le.length-1])}}c.indexOf("NaN")>-1&&(c="");var T=c.split(/[,\s]/).reduce(function(Le,rt){var Ze=rt.match("([a-zA-Z])(.+)");return Ze?(Le.push(Ze[1]),Le.push(Ze[2])):Le.push(rt),Le},[]).reduce(function(Le,rt){return parseFloat(rt)==rt&&Le.length?Le[Le.length-1].push(rt):Le.push([rt]),Le},[]),M=[];if(T.length>1){var z=S(T[0]),$=null;T[T.length-1][0]=="Z"&&T[0].length>2&&($=["L",z.x,z.y],T[T.length-1]=$),M.push(T[0]);for(var H=1;H<T.length;H++){var B=M[M.length-1],ee=T[H],re=ee==$?T[1]:T[H+1];if(re&&B&&B.length>2&&ee[0]=="L"&&re.length>2&&re[0]=="L"){var ce,ye,_e=S(B),Ee=S(ee),O=S(re);ce=m(Ee,_e,d),ye=m(Ee,O,d),b(ee,ce),ee.origPoint=Ee,M.push(ee);var X=v(ce,Ee,.5),Q=v(Ee,ye,.5),xe=["C",X.x,X.y,Q.x,Q.y,ye.x,ye.y];xe.origPoint=Ee,M.push(xe)}else M.push(ee)}if($){var ke=S(M[M.length-1]);M.push(["Z"]),b(M[0],ke)}}else M=T;return M.reduce(function(Le,rt){return Le+rt.join(" ")+" "},"")}},{key:"drawLine",value:function(c,d,m,v){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,T=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,M=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:c,y1:d,x2:m,y2:v,stroke:b,"stroke-dasharray":S,"stroke-width":T,"stroke-linecap":M})}},{key:"drawRect",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",T=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,M=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,z=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,$=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,H=this.w.globals.dom.Paper.rect();return H.attr({x:c,y:d,width:m>0?m:0,height:v>0?v:0,rx:b,ry:b,opacity:T,"stroke-width":M!==null?M:0,stroke:z!==null?z:"none","stroke-dasharray":$}),H.node.setAttribute("fill",S),H}},{key:"drawPolygon",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(c).attr({fill:v,stroke:d,"stroke-width":m})}},{key:"drawCircle",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;c<0&&(c=0);var m=this.w.globals.dom.Paper.circle(2*c);return d!==null&&m.attr(d),m}},{key:"drawPath",value:function(c){var d=c.d,m=d===void 0?"":d,v=c.stroke,b=v===void 0?"#a8a8a8":v,S=c.strokeWidth,T=S===void 0?1:S,M=c.fill,z=c.fillOpacity,$=z===void 0?1:z,H=c.strokeOpacity,B=H===void 0?1:H,ee=c.classes,re=c.strokeLinecap,ce=re===void 0?null:re,ye=c.strokeDashArray,_e=ye===void 0?0:ye,Ee=this.w;return ce===null&&(ce=Ee.config.stroke.lineCap),(m.indexOf("undefined")>-1||m.indexOf("NaN")>-1)&&(m="M 0 ".concat(Ee.globals.gridHeight)),Ee.globals.dom.Paper.path(m).attr({fill:M,"fill-opacity":$,stroke:b,"stroke-opacity":B,"stroke-linecap":ce,"stroke-width":T,"stroke-dasharray":_e,class:ee})}},{key:"group",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,d=this.w.globals.dom.Paper.group();return c!==null&&d.attr(c),d}},{key:"move",value:function(c,d){var m=["M",c,d].join(" ");return m}},{key:"line",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=null;return m===null?v=[" L",c,d].join(" "):m==="H"?v=[" H",c].join(" "):m==="V"&&(v=[" V",d].join(" ")),v}},{key:"curve",value:function(c,d,m,v,b,S){var T=["C",c,d,m,v,b,S].join(" ");return T}},{key:"quadraticCurve",value:function(c,d,m,v){return["Q",c,d,m,v].join(" ")}},{key:"arc",value:function(c,d,m,v,b,S,T){var M="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(M="a");var z=[M,c,d,m,v,b,S,T].join(" ");return z}},{key:"renderPaths",value:function(c){var d,m=c.j,v=c.realIndex,b=c.pathFrom,S=c.pathTo,T=c.stroke,M=c.strokeWidth,z=c.strokeLinecap,$=c.fill,H=c.animationDelay,B=c.initialSpeed,ee=c.dataChangeSpeed,re=c.className,ce=c.shouldClipToGrid,ye=ce===void 0||ce,_e=c.bindEventsOnPaths,Ee=_e===void 0||_e,O=c.drawShadow,X=O===void 0||O,Q=this.w,xe=new he(this.ctx),ke=new K(this.ctx),Le=this.w.config.chart.animations.enabled,rt=Le&&this.w.config.chart.animations.dynamicAnimation.enabled,Ze=!!(Le&&!Q.globals.resized||rt&&Q.globals.dataChanged&&Q.globals.shouldAnimate);Ze?d=b:(d=S,Q.globals.animationEnded=!0);var Et=Q.config.stroke.dashArray,Bt=0;Bt=Array.isArray(Et)?Et[v]:Q.config.stroke.dashArray;var Nt=this.drawPath({d,stroke:T,strokeWidth:M,fill:$,fillOpacity:1,classes:re,strokeLinecap:z,strokeDashArray:Bt});if(Nt.attr("index",v),ye&&Nt.attr({"clip-path":"url(#gridRectMask".concat(Q.globals.cuid,")")}),Q.config.states.normal.filter.type!=="none")xe.getDefaultFilter(Nt,v);else if(Q.config.chart.dropShadow.enabled&&X&&(!Q.config.chart.dropShadow.enabledOnSeries||Q.config.chart.dropShadow.enabledOnSeries&&Q.config.chart.dropShadow.enabledOnSeries.indexOf(v)!==-1)){var hr=Q.config.chart.dropShadow;xe.dropShadow(Nt,hr,v)}Ee&&(Nt.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,Nt)),Nt.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,Nt)),Nt.node.addEventListener("mousedown",this.pathMouseDown.bind(this,Nt))),Nt.attr({pathTo:S,pathFrom:b});var ar={el:Nt,j:m,realIndex:v,pathFrom:b,pathTo:S,fill:$,strokeWidth:M,delay:H};return!Le||Q.globals.resized||Q.globals.dataChanged?!Q.globals.resized&&Q.globals.dataChanged||ke.showDelayedElements():ke.animatePathsGradually(n(n({},ar),{},{speed:B})),Q.globals.dataChanged&&rt&&Ze&&ke.animatePathsGradually(n(n({},ar),{},{speed:ee})),Nt}},{key:"drawPattern",value:function(c,d,m){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(d,m,function(S){c==="horizontalLines"?S.line(0,0,m,0).stroke({color:v,width:b+1}):c==="verticalLines"?S.line(0,0,0,d).stroke({color:v,width:b+1}):c==="slantedLines"?S.line(0,0,d,m).stroke({color:v,width:b}):c==="squares"?S.rect(d,m).fill("none").stroke({color:v,width:b}):c==="circles"&&S.circle(d).fill("none").stroke({color:v,width:b})})}},{key:"drawGradient",value:function(c,d,m,v,b){var S,T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,M=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,z=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,$=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,H=this.w;d.length<9&&d.indexOf("#")===0&&(d=W.hexToRgba(d,v)),m.length<9&&m.indexOf("#")===0&&(m=W.hexToRgba(m,b));var B=0,ee=1,re=1,ce=null;M!==null&&(B=M[0]!==void 0?M[0]/100:0,ee=M[1]!==void 0?M[1]/100:1,re=M[2]!==void 0?M[2]/100:1,ce=M[3]!==void 0?M[3]/100:null);var ye=!(H.config.chart.type!=="donut"&&H.config.chart.type!=="pie"&&H.config.chart.type!=="polarArea"&&H.config.chart.type!=="bubble");if(S=z===null||z.length===0?H.globals.dom.Paper.gradient(ye?"radial":"linear",function(O){O.at(B,d,v),O.at(ee,m,b),O.at(re,m,b),ce!==null&&O.at(ce,d,v)}):H.globals.dom.Paper.gradient(ye?"radial":"linear",function(O){(Array.isArray(z[$])?z[$]:z).forEach(function(X){O.at(X.offset/100,X.color,X.opacity)})}),ye){var _e=H.globals.gridWidth/2,Ee=H.globals.gridHeight/2;H.config.chart.type!=="bubble"?S.attr({gradientUnits:"userSpaceOnUse",cx:_e,cy:Ee,r:T}):S.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else c==="vertical"?S.from(0,0).to(0,1):c==="diagonal"?S.from(0,0).to(1,1):c==="horizontal"?S.from(0,1).to(1,1):c==="diagonal2"&&S.from(1,0).to(0,1);return S}},{key:"getTextBasedOnMaxWidth",value:function(c){var d=c.text,m=c.maxWidth,v=c.fontSize,b=c.fontFamily,S=this.getTextRects(d,v,b),T=S.width/d.length,M=Math.floor(m/T);return m<S.width?d.slice(0,M-3)+"...":d}},{key:"drawText",value:function(c){var d=this,m=c.x,v=c.y,b=c.text,S=c.textAnchor,T=c.fontSize,M=c.fontFamily,z=c.fontWeight,$=c.foreColor,H=c.opacity,B=c.maxWidth,ee=c.cssClass,re=ee===void 0?"":ee,ce=c.isPlainText,ye=ce===void 0||ce,_e=this.w;b===void 0&&(b="");var Ee=b;S||(S="start"),$&&$.length||($=_e.config.chart.foreColor),M=M||_e.config.chart.fontFamily,z=z||"regular";var O,X={maxWidth:B,fontSize:T=T||"11px",fontFamily:M};return Array.isArray(b)?O=_e.globals.dom.Paper.text(function(Q){for(var xe=0;xe<b.length;xe++)Ee=b[xe],B&&(Ee=d.getTextBasedOnMaxWidth(n({text:b[xe]},X))),xe===0?Q.tspan(Ee):Q.tspan(Ee).newLine()}):(B&&(Ee=this.getTextBasedOnMaxWidth(n({text:b},X))),O=ye?_e.globals.dom.Paper.plain(b):_e.globals.dom.Paper.text(function(Q){return Q.tspan(Ee)})),O.attr({x:m,y:v,"text-anchor":S,"dominant-baseline":"auto","font-size":T,"font-family":M,"font-weight":z,fill:$,class:"apexcharts-text "+re}),O.node.style.fontFamily=M,O.node.style.opacity=H,O}},{key:"drawMarker",value:function(c,d,m){c=c||0;var v=m.pSize||0,b=null;if(m.shape==="square"||m.shape==="rect"){var S=m.pRadius===void 0?v/2:m.pRadius;d!==null&&v||(v=0,S=0);var T=1.2*v+S,M=this.drawRect(T,T,T,T,S);M.attr({x:c-T/2,y:d-T/2,cx:c,cy:d,class:m.class?m.class:"",fill:m.pointFillColor,"fill-opacity":m.pointFillOpacity?m.pointFillOpacity:1,stroke:m.pointStrokeColor,"stroke-width":m.pointStrokeWidth?m.pointStrokeWidth:0,"stroke-opacity":m.pointStrokeOpacity?m.pointStrokeOpacity:1}),b=M}else m.shape!=="circle"&&m.shape||(W.isNumber(d)||(v=0,d=0),b=this.drawCircle(v,{cx:c,cy:d,class:m.class?m.class:"",stroke:m.pointStrokeColor,fill:m.pointFillColor,"fill-opacity":m.pointFillOpacity?m.pointFillOpacity:1,"stroke-width":m.pointStrokeWidth?m.pointStrokeWidth:0,"stroke-opacity":m.pointStrokeOpacity?m.pointStrokeOpacity:1}));return b}},{key:"pathMouseEnter",value:function(c,d){var m=this.w,v=new he(this.ctx),b=parseInt(c.node.getAttribute("index"),10),S=parseInt(c.node.getAttribute("j"),10);if(typeof m.config.chart.events.dataPointMouseEnter=="function"&&m.config.chart.events.dataPointMouseEnter(d,this.ctx,{seriesIndex:b,dataPointIndex:S,w:m}),this.ctx.events.fireEvent("dataPointMouseEnter",[d,this.ctx,{seriesIndex:b,dataPointIndex:S,w:m}]),(m.config.states.active.filter.type==="none"||c.node.getAttribute("selected")!=="true")&&m.config.states.hover.filter.type!=="none"&&!m.globals.isTouchDevice){var T=m.config.states.hover.filter;v.applyFilter(c,b,T.type,T.value)}}},{key:"pathMouseLeave",value:function(c,d){var m=this.w,v=new he(this.ctx),b=parseInt(c.node.getAttribute("index"),10),S=parseInt(c.node.getAttribute("j"),10);typeof m.config.chart.events.dataPointMouseLeave=="function"&&m.config.chart.events.dataPointMouseLeave(d,this.ctx,{seriesIndex:b,dataPointIndex:S,w:m}),this.ctx.events.fireEvent("dataPointMouseLeave",[d,this.ctx,{seriesIndex:b,dataPointIndex:S,w:m}]),m.config.states.active.filter.type!=="none"&&c.node.getAttribute("selected")==="true"||m.config.states.hover.filter.type!=="none"&&v.getDefaultFilter(c,b)}},{key:"pathMouseDown",value:function(c,d){var m=this.w,v=new he(this.ctx),b=parseInt(c.node.getAttribute("index"),10),S=parseInt(c.node.getAttribute("j"),10),T="false";if(c.node.getAttribute("selected")==="true"){if(c.node.setAttribute("selected","false"),m.globals.selectedDataPoints[b].indexOf(S)>-1){var M=m.globals.selectedDataPoints[b].indexOf(S);m.globals.selectedDataPoints[b].splice(M,1)}}else{if(!m.config.states.active.allowMultipleDataPointsSelection&&m.globals.selectedDataPoints.length>0){m.globals.selectedDataPoints=[];var z=m.globals.dom.Paper.select(".apexcharts-series path").members,$=m.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,H=function(re){Array.prototype.forEach.call(re,function(ce){ce.node.setAttribute("selected","false"),v.getDefaultFilter(ce,b)})};H(z),H($)}c.node.setAttribute("selected","true"),T="true",m.globals.selectedDataPoints[b]===void 0&&(m.globals.selectedDataPoints[b]=[]),m.globals.selectedDataPoints[b].push(S)}if(T==="true"){var B=m.config.states.active.filter;if(B!=="none")v.applyFilter(c,b,B.type,B.value);else if(m.config.states.hover.filter!=="none"&&!m.globals.isTouchDevice){var ee=m.config.states.hover.filter;v.applyFilter(c,b,ee.type,ee.value)}}else m.config.states.active.filter.type!=="none"&&(m.config.states.hover.filter.type==="none"||m.globals.isTouchDevice?v.getDefaultFilter(c,b):(ee=m.config.states.hover.filter,v.applyFilter(c,b,ee.type,ee.value)));typeof m.config.chart.events.dataPointSelection=="function"&&m.config.chart.events.dataPointSelection(d,this.ctx,{selectedDataPoints:m.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:S,w:m}),d&&this.ctx.events.fireEvent("dataPointSelection",[d,this.ctx,{selectedDataPoints:m.globals.selectedDataPoints,seriesIndex:b,dataPointIndex:S,w:m}])}},{key:"rotateAroundCenter",value:function(c){var d={};return c&&typeof c.getBBox=="function"&&(d=c.getBBox()),{x:d.x+d.width/2,y:d.y+d.height/2}}},{key:"getTextRects",value:function(c,d,m,v){var b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],S=this.w,T=this.drawText({x:-200,y:-200,text:c,textAnchor:"start",fontSize:d,fontFamily:m,foreColor:"#fff",opacity:0});v&&T.attr("transform",v),S.globals.dom.Paper.add(T);var M=T.bbox();return b||(M=T.node.getBoundingClientRect()),T.remove(),{width:M.width,height:M.height}}},{key:"placeTextWithEllipsis",value:function(c,d,m){if(typeof c.getComputedTextLength=="function"&&(c.textContent=d,d.length>0&&c.getComputedTextLength()>=m/1.1)){for(var v=d.length-3;v>0;v-=3)if(c.getSubStringLength(0,v)<=m/1.1)return void(c.textContent=d.substring(0,v)+"...");c.textContent="."}}}],[{key:"setAttrs",value:function(c,d){for(var m in d)d.hasOwnProperty(m)&&c.setAttribute(m,d[m])}}]),pe}(),Ae=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"getStackedSeriesTotals",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=this.w,m=[];if(d.globals.series.length===0)return m;for(var v=0;v<d.globals.series[d.globals.maxValsInArrayIndex].length;v++){for(var b=0,S=0;S<d.globals.series.length;S++)d.globals.series[S][v]!==void 0&&c.indexOf(S)===-1&&(b+=d.globals.series[S][v]);m.push(b)}return m}},{key:"getSeriesTotalByIndex",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return c===null?this.w.config.series.reduce(function(d,m){return d+m},0):this.w.globals.series[c].reduce(function(d,m){return d+m},0)}},{key:"isSeriesNull",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(c===null?this.w.config.series.filter(function(d){return d!==null}):this.w.config.series[c].data.filter(function(d){return d!==null})).length===0}},{key:"seriesHaveSameValues",value:function(c){return this.w.globals.series[c].every(function(d,m,v){return d===v[0]})}},{key:"getCategoryLabels",value:function(c){var d=this.w,m=c.slice();return d.config.xaxis.convertedCatToNumeric&&(m=c.map(function(v,b){return d.config.xaxis.labels.formatter(v-d.globals.minX+1)})),m}},{key:"getLargestSeries",value:function(){var c=this.w;c.globals.maxValsInArrayIndex=c.globals.series.map(function(d){return d.length}).indexOf(Math.max.apply(Math,c.globals.series.map(function(d){return d.length})))}},{key:"getLargestMarkerSize",value:function(){var c=this.w,d=0;return c.globals.markers.size.forEach(function(m){d=Math.max(d,m)}),c.config.markers.discrete&&c.config.markers.discrete.length&&c.config.markers.discrete.forEach(function(m){d=Math.max(d,m.size)}),d>0&&(d+=c.config.markers.hover.sizeOffset+1),c.globals.markers.largestSize=d,d}},{key:"getSeriesTotals",value:function(){var c=this.w;c.globals.seriesTotals=c.globals.series.map(function(d,m){var v=0;if(Array.isArray(d))for(var b=0;b<d.length;b++)v+=d[b];else v+=d;return v})}},{key:"getSeriesTotalsXRange",value:function(c,d){var m=this.w;return m.globals.series.map(function(v,b){for(var S=0,T=0;T<v.length;T++)m.globals.seriesX[b][T]>c&&m.globals.seriesX[b][T]<d&&(S+=v[T]);return S})}},{key:"getPercentSeries",value:function(){var c=this.w;c.globals.seriesPercent=c.globals.series.map(function(d,m){var v=[];if(Array.isArray(d))for(var b=0;b<d.length;b++){var S=c.globals.stackedSeriesTotals[b],T=0;S&&(T=100*d[b]/S),v.push(T)}else{var M=100*d/c.globals.seriesTotals.reduce(function(z,$){return z+$},0);v.push(M)}return v})}},{key:"getCalculatedRatios",value:function(){var c,d,m,v,b=this.w.globals,S=[],T=0,M=[],z=.1,$=0;if(b.yRange=[],b.isMultipleYAxis)for(var H=0;H<b.minYArr.length;H++)b.yRange.push(Math.abs(b.minYArr[H]-b.maxYArr[H])),M.push(0);else b.yRange.push(Math.abs(b.minY-b.maxY));b.xRange=Math.abs(b.maxX-b.minX),b.zRange=Math.abs(b.maxZ-b.minZ);for(var B=0;B<b.yRange.length;B++)S.push(b.yRange[B]/b.gridHeight);if(d=b.xRange/b.gridWidth,m=Math.abs(b.initialMaxX-b.initialMinX)/b.gridWidth,c=b.yRange/b.gridWidth,v=b.xRange/b.gridHeight,(T=b.zRange/b.gridHeight*16)||(T=1),b.minY!==Number.MIN_VALUE&&Math.abs(b.minY)!==0&&(b.hasNegs=!0),b.isMultipleYAxis){M=[];for(var ee=0;ee<S.length;ee++)M.push(-b.minYArr[ee]/S[ee])}else M.push(-b.minY/S[0]),b.minY!==Number.MIN_VALUE&&Math.abs(b.minY)!==0&&(z=-b.minY/c,$=b.minX/d);return{yRatio:S,invertedYRatio:c,zRatio:T,xRatio:d,initialXRatio:m,invertedXRatio:v,baseLineInvertedY:z,baseLineY:M,baseLineX:$}}},{key:"getLogSeries",value:function(c){var d=this,m=this.w;return m.globals.seriesLog=c.map(function(v,b){return m.config.yaxis[b]&&m.config.yaxis[b].logarithmic?v.map(function(S){return S===null?null:d.getLogVal(m.config.yaxis[b].logBase,S,b)}):v}),m.globals.invalidLogScale?c:m.globals.seriesLog}},{key:"getBaseLog",value:function(c,d){return Math.log(d)/Math.log(c)}},{key:"getLogVal",value:function(c,d,m){if(d===0)return 0;var v=this.w,b=v.globals.minYArr[m]===0?-1:this.getBaseLog(c,v.globals.minYArr[m]),S=(v.globals.maxYArr[m]===0?0:this.getBaseLog(c,v.globals.maxYArr[m]))-b;return d<1?d/S:(this.getBaseLog(c,d)-b)/S}},{key:"getLogYRatios",value:function(c){var d=this,m=this.w,v=this.w.globals;return v.yLogRatio=c.slice(),v.logYRange=v.yRange.map(function(b,S){if(m.config.yaxis[S]&&d.w.config.yaxis[S].logarithmic){var T,M=-Number.MAX_VALUE,z=Number.MIN_VALUE;return v.seriesLog.forEach(function($,H){$.forEach(function(B){m.config.yaxis[H]&&m.config.yaxis[H].logarithmic&&(M=Math.max(B,M),z=Math.min(B,z))})}),T=Math.pow(v.yRange[S],Math.abs(z-M)/v.yRange[S]),v.yLogRatio[S]=T/v.gridHeight,T}}),v.invalidLogScale?c.slice():v.yLogRatio}}],[{key:"checkComboSeries",value:function(c){var d=!1,m=0,v=0;return c.length&&c[0].type!==void 0&&c.forEach(function(b){b.type!=="bar"&&b.type!=="column"&&b.type!=="candlestick"&&b.type!=="boxPlot"||m++,b.type!==void 0&&v++}),v>0&&(d=!0),{comboBarCount:m,comboCharts:d}}},{key:"extendArrayProps",value:function(c,d,m){return d.yaxis&&(d=c.extendYAxis(d,m)),d.annotations&&(d.annotations.yaxis&&(d=c.extendYAxisAnnotations(d)),d.annotations.xaxis&&(d=c.extendXAxisAnnotations(d)),d.annotations.points&&(d=c.extendPointAnnotations(d))),d}}]),pe}(),Te=function(){function pe(c){f(this,pe),this.w=c.w,this.annoCtx=c}return s(pe,[{key:"setOrientations",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,m=this.w;if(c.label.orientation==="vertical"){var v=d!==null?d:0,b=m.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(v,"']"));if(b!==null){var S=b.getBoundingClientRect();b.setAttribute("x",parseFloat(b.getAttribute("x"))-S.height+4),c.label.position==="top"?b.setAttribute("y",parseFloat(b.getAttribute("y"))+S.width):b.setAttribute("y",parseFloat(b.getAttribute("y"))-S.width);var T=this.annoCtx.graphics.rotateAroundCenter(b),M=T.x,z=T.y;b.setAttribute("transform","rotate(-90 ".concat(M," ").concat(z,")"))}}}},{key:"addBackgroundToAnno",value:function(c,d){var m=this.w;if(!c||d.label.text===void 0||d.label.text!==void 0&&!String(d.label.text).trim())return null;var v=m.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),b=c.getBoundingClientRect(),S=d.label.style.padding.left,T=d.label.style.padding.right,M=d.label.style.padding.top,z=d.label.style.padding.bottom;d.label.orientation==="vertical"&&(M=d.label.style.padding.left,z=d.label.style.padding.right,S=d.label.style.padding.top,T=d.label.style.padding.bottom);var $=b.left-v.left-S,H=b.top-v.top-M,B=this.annoCtx.graphics.drawRect($-m.globals.barPadForNumericAxis,H,b.width+S+T,b.height+M+z,d.label.borderRadius,d.label.style.background,1,d.label.borderWidth,d.label.borderColor,0);return d.id&&B.node.classList.add(d.id),B}},{key:"annotationsBackground",value:function(){var c=this,d=this.w,m=function(v,b,S){var T=d.globals.dom.baseEl.querySelector(".apexcharts-".concat(S,"-annotations .apexcharts-").concat(S,"-annotation-label[rel='").concat(b,"']"));if(T){var M=T.parentNode,z=c.addBackgroundToAnno(T,v);z&&(M.insertBefore(z.node,T),v.label.mouseEnter&&z.node.addEventListener("mouseenter",v.label.mouseEnter.bind(c,v)),v.label.mouseLeave&&z.node.addEventListener("mouseleave",v.label.mouseLeave.bind(c,v)),v.label.click&&z.node.addEventListener("click",v.label.click.bind(c,v)))}};d.config.annotations.xaxis.map(function(v,b){m(v,b,"xaxis")}),d.config.annotations.yaxis.map(function(v,b){m(v,b,"yaxis")}),d.config.annotations.points.map(function(v,b){m(v,b,"point")})}},{key:"getY1Y2",value:function(c,d){var m,v=c==="y1"?d.y:d.y2,b=this.w;if(this.annoCtx.invertAxis){var S=b.globals.labels.indexOf(v);b.config.xaxis.convertedCatToNumeric&&(S=b.globals.categoryLabels.indexOf(v));var T=b.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(S+1)+")");T&&(m=parseFloat(T.getAttribute("y")))}else{var M;b.config.yaxis[d.yAxisIndex].logarithmic?M=(v=new Ae(this.annoCtx.ctx).getLogVal(v,d.yAxisIndex))/b.globals.yLogRatio[d.yAxisIndex]:M=(v-b.globals.minYArr[d.yAxisIndex])/(b.globals.yRange[d.yAxisIndex]/b.globals.gridHeight),m=b.globals.gridHeight-M,!d.marker||d.y!==void 0&&d.y!==null||(m=0),b.config.yaxis[d.yAxisIndex]&&b.config.yaxis[d.yAxisIndex].reversed&&(m=M)}return typeof v=="string"&&v.indexOf("px")>-1&&(m=parseFloat(v)),m}},{key:"getX1X2",value:function(c,d){var m=this.w,v=this.annoCtx.invertAxis?m.globals.minY:m.globals.minX,b=this.annoCtx.invertAxis?m.globals.maxY:m.globals.maxX,S=this.annoCtx.invertAxis?m.globals.yRange[0]:m.globals.xRange,T=(d.x-v)/(S/m.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(T=(b-d.x)/(S/m.globals.gridWidth)),m.config.xaxis.type!=="category"&&!m.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||m.globals.dataFormatXNumeric||(T=this.getStringX(d.x));var M=(d.x2-v)/(S/m.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(M=(b-d.x2)/(S/m.globals.gridWidth)),m.config.xaxis.type!=="category"&&!m.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||m.globals.dataFormatXNumeric||(M=this.getStringX(d.x2)),d.x!==void 0&&d.x!==null||!d.marker||(T=m.globals.gridWidth),c==="x1"&&typeof d.x=="string"&&d.x.indexOf("px")>-1&&(T=parseFloat(d.x)),c==="x2"&&typeof d.x2=="string"&&d.x2.indexOf("px")>-1&&(M=parseFloat(d.x2)),c==="x1"?T:M}},{key:"getStringX",value:function(c){var d=this.w,m=c;d.config.xaxis.convertedCatToNumeric&&d.globals.categoryLabels.length&&(c=d.globals.categoryLabels.indexOf(c)+1);var v=d.globals.labels.indexOf(c),b=d.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(v+1)+")");return b&&(m=parseFloat(b.getAttribute("x"))),m}}]),pe}(),Ue=function(){function pe(c){f(this,pe),this.w=c.w,this.annoCtx=c,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new Te(this.annoCtx)}return s(pe,[{key:"addXaxisAnnotation",value:function(c,d,m){var v,b=this.w,S=this.helpers.getX1X2("x1",c),T=c.label.text,M=c.strokeDashArray;if(W.isNumber(S)){if(c.x2===null||c.x2===void 0){var z=this.annoCtx.graphics.drawLine(S+c.offsetX,0+c.offsetY,S+c.offsetX,b.globals.gridHeight+c.offsetY,c.borderColor,M,c.borderWidth);d.appendChild(z.node),c.id&&z.node.classList.add(c.id)}else{if((v=this.helpers.getX1X2("x2",c))<S){var $=S;S=v,v=$}var H=this.annoCtx.graphics.drawRect(S+c.offsetX,0+c.offsetY,v-S,b.globals.gridHeight+c.offsetY,0,c.fillColor,c.opacity,1,c.borderColor,M);H.node.classList.add("apexcharts-annotation-rect"),H.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),d.appendChild(H.node),c.id&&H.node.classList.add(c.id)}var B=this.annoCtx.graphics.getTextRects(T,parseFloat(c.label.style.fontSize)),ee=c.label.position==="top"?4:c.label.position==="center"?b.globals.gridHeight/2+(c.label.orientation==="vertical"?B.width/2:0):b.globals.gridHeight,re=this.annoCtx.graphics.drawText({x:S+c.label.offsetX,y:ee+c.label.offsetY-(c.label.orientation==="vertical"?c.label.position==="top"?B.width/2-12:-B.width/2:0),text:T,textAnchor:c.label.textAnchor,fontSize:c.label.style.fontSize,fontFamily:c.label.style.fontFamily,fontWeight:c.label.style.fontWeight,foreColor:c.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(c.label.style.cssClass," ").concat(c.id?c.id:"")});re.attr({rel:m}),d.appendChild(re.node),this.annoCtx.helpers.setOrientations(c,m)}}},{key:"drawXAxisAnnotations",value:function(){var c=this,d=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return d.config.annotations.xaxis.map(function(v,b){c.addXaxisAnnotation(v,m.node,b)}),m}}]),pe}(),Pe=function(){function pe(c){f(this,pe),this.w=c.w,this.annoCtx=c,this.helpers=new Te(this.annoCtx)}return s(pe,[{key:"addYaxisAnnotation",value:function(c,d,m){var v,b=this.w,S=c.strokeDashArray,T=this.helpers.getY1Y2("y1",c),M=c.label.text;if(c.y2===null||c.y2===void 0){var z=this.annoCtx.graphics.drawLine(0+c.offsetX,T+c.offsetY,this._getYAxisAnnotationWidth(c),T+c.offsetY,c.borderColor,S,c.borderWidth);d.appendChild(z.node),c.id&&z.node.classList.add(c.id)}else{if((v=this.helpers.getY1Y2("y2",c))>T){var $=T;T=v,v=$}var H=this.annoCtx.graphics.drawRect(0+c.offsetX,v+c.offsetY,this._getYAxisAnnotationWidth(c),T-v,0,c.fillColor,c.opacity,1,c.borderColor,S);H.node.classList.add("apexcharts-annotation-rect"),H.attr("clip-path","url(#gridRectMask".concat(b.globals.cuid,")")),d.appendChild(H.node),c.id&&H.node.classList.add(c.id)}var B=c.label.position==="right"?b.globals.gridWidth:c.label.position==="center"?b.globals.gridWidth/2:0,ee=this.annoCtx.graphics.drawText({x:B+c.label.offsetX,y:(v??T)+c.label.offsetY-3,text:M,textAnchor:c.label.textAnchor,fontSize:c.label.style.fontSize,fontFamily:c.label.style.fontFamily,fontWeight:c.label.style.fontWeight,foreColor:c.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(c.label.style.cssClass," ").concat(c.id?c.id:"")});ee.attr({rel:m}),d.appendChild(ee.node)}},{key:"_getYAxisAnnotationWidth",value:function(c){var d=this.w;return d.globals.gridWidth,(c.width.indexOf("%")>-1?d.globals.gridWidth*parseInt(c.width,10)/100:parseInt(c.width,10))+c.offsetX}},{key:"drawYAxisAnnotations",value:function(){var c=this,d=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return d.config.annotations.yaxis.map(function(v,b){c.addYaxisAnnotation(v,m.node,b)}),m}}]),pe}(),$e=function(){function pe(c){f(this,pe),this.w=c.w,this.annoCtx=c,this.helpers=new Te(this.annoCtx)}return s(pe,[{key:"addPointAnnotation",value:function(c,d,m){this.w;var v=this.helpers.getX1X2("x1",c),b=this.helpers.getY1Y2("y1",c);if(W.isNumber(v)){var S={pSize:c.marker.size,pointStrokeWidth:c.marker.strokeWidth,pointFillColor:c.marker.fillColor,pointStrokeColor:c.marker.strokeColor,shape:c.marker.shape,pRadius:c.marker.radius,class:"apexcharts-point-annotation-marker ".concat(c.marker.cssClass," ").concat(c.id?c.id:"")},T=this.annoCtx.graphics.drawMarker(v+c.marker.offsetX,b+c.marker.offsetY,S);d.appendChild(T.node);var M=c.label.text?c.label.text:"",z=this.annoCtx.graphics.drawText({x:v+c.label.offsetX,y:b+c.label.offsetY-c.marker.size-parseFloat(c.label.style.fontSize)/1.6,text:M,textAnchor:c.label.textAnchor,fontSize:c.label.style.fontSize,fontFamily:c.label.style.fontFamily,fontWeight:c.label.style.fontWeight,foreColor:c.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(c.label.style.cssClass," ").concat(c.id?c.id:"")});if(z.attr({rel:m}),d.appendChild(z.node),c.customSVG.SVG){var $=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+c.customSVG.cssClass});$.attr({transform:"translate(".concat(v+c.customSVG.offsetX,", ").concat(b+c.customSVG.offsetY,")")}),$.node.innerHTML=c.customSVG.SVG,d.appendChild($.node)}if(c.image.path){var H=c.image.width?c.image.width:20,B=c.image.height?c.image.height:20;T=this.annoCtx.addImage({x:v+c.image.offsetX-H/2,y:b+c.image.offsetY-B/2,width:H,height:B,path:c.image.path,appendTo:".apexcharts-point-annotations"})}c.mouseEnter&&T.node.addEventListener("mouseenter",c.mouseEnter.bind(this,c)),c.mouseLeave&&T.node.addEventListener("mouseleave",c.mouseLeave.bind(this,c)),c.click&&T.node.addEventListener("click",c.click.bind(this,c))}}},{key:"drawPointAnnotations",value:function(){var c=this,d=this.w,m=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return d.config.annotations.points.map(function(v,b){c.addPointAnnotation(v,m.node,b)}),m}}]),pe}(),Ve={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Fe=function(){function pe(){f(this,pe),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return s(pe,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Ve],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(c){return new Date(c).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(c){return c}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(c){return c+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(c){return c.globals.seriesTotals.reduce(function(d,m){return d+m},0)/c.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(c){return c}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(c){return c}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(c){return c.globals.seriesTotals.reduce(function(d,m){return d+m},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(c){return c!==null?c:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(c){return c?c+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),pe}(),Ye=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.graphics=new de(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new Te(this),this.xAxisAnnotations=new Ue(this),this.yAxisAnnotations=new Pe(this),this.pointsAnnotations=new $e(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return s(pe,[{key:"drawAxesAnnotations",value:function(){var c=this.w;if(c.globals.axisCharts){for(var d=this.yAxisAnnotations.drawYAxisAnnotations(),m=this.xAxisAnnotations.drawXAxisAnnotations(),v=this.pointsAnnotations.drawPointAnnotations(),b=c.config.chart.animations.enabled,S=[d,m,v],T=[m.node,d.node,v.node],M=0;M<3;M++)c.globals.dom.elGraphical.add(S[M]),!b||c.globals.resized||c.globals.dataChanged||c.config.chart.type!=="scatter"&&c.config.chart.type!=="bubble"&&c.globals.dataPoints>1&&T[M].classList.add("apexcharts-element-hidden"),c.globals.delayedElements.push({el:T[M],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var c=this;this.w.config.annotations.images.map(function(d,m){c.addImage(d,m)})}},{key:"drawTextAnnos",value:function(){var c=this;this.w.config.annotations.texts.map(function(d,m){c.addText(d,m)})}},{key:"addXaxisAnnotation",value:function(c,d,m){this.xAxisAnnotations.addXaxisAnnotation(c,d,m)}},{key:"addYaxisAnnotation",value:function(c,d,m){this.yAxisAnnotations.addYaxisAnnotation(c,d,m)}},{key:"addPointAnnotation",value:function(c,d,m){this.pointsAnnotations.addPointAnnotation(c,d,m)}},{key:"addText",value:function(c,d){var m=c.x,v=c.y,b=c.text,S=c.textAnchor,T=c.foreColor,M=c.fontSize,z=c.fontFamily,$=c.fontWeight,H=c.cssClass,B=c.backgroundColor,ee=c.borderWidth,re=c.strokeDashArray,ce=c.borderRadius,ye=c.borderColor,_e=c.appendTo,Ee=_e===void 0?".apexcharts-annotations":_e,O=c.paddingLeft,X=O===void 0?4:O,Q=c.paddingRight,xe=Q===void 0?4:Q,ke=c.paddingBottom,Le=ke===void 0?2:ke,rt=c.paddingTop,Ze=rt===void 0?2:rt,Et=this.w,Bt=this.graphics.drawText({x:m,y:v,text:b,textAnchor:S||"start",fontSize:M||"12px",fontWeight:$||"regular",fontFamily:z||Et.config.chart.fontFamily,foreColor:T||Et.config.chart.foreColor,cssClass:H}),Nt=Et.globals.dom.baseEl.querySelector(Ee);Nt&&Nt.appendChild(Bt.node);var hr=Bt.bbox();if(b){var ar=this.graphics.drawRect(hr.x-X,hr.y-Ze,hr.width+X+xe,hr.height+Le+Ze,ce,B||"transparent",1,ee,ye,re);Nt.insertBefore(ar.node,Bt.node)}}},{key:"addImage",value:function(c,d){var m=this.w,v=c.path,b=c.x,S=b===void 0?0:b,T=c.y,M=T===void 0?0:T,z=c.width,$=z===void 0?20:z,H=c.height,B=H===void 0?20:H,ee=c.appendTo,re=ee===void 0?".apexcharts-annotations":ee,ce=m.globals.dom.Paper.image(v);ce.size($,B).move(S,M);var ye=m.globals.dom.baseEl.querySelector(re);return ye&&ye.appendChild(ce.node),ce}},{key:"addXaxisAnnotationExternal",value:function(c,d,m){return this.addAnnotationExternal({params:c,pushToMemory:d,context:m,type:"xaxis",contextMethod:m.addXaxisAnnotation}),m}},{key:"addYaxisAnnotationExternal",value:function(c,d,m){return this.addAnnotationExternal({params:c,pushToMemory:d,context:m,type:"yaxis",contextMethod:m.addYaxisAnnotation}),m}},{key:"addPointAnnotationExternal",value:function(c,d,m){return this.invertAxis===void 0&&(this.invertAxis=m.w.globals.isBarHorizontal),this.addAnnotationExternal({params:c,pushToMemory:d,context:m,type:"point",contextMethod:m.addPointAnnotation}),m}},{key:"addAnnotationExternal",value:function(c){var d=c.params,m=c.pushToMemory,v=c.context,b=c.type,S=c.contextMethod,T=v,M=T.w,z=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations")),$=z.childNodes.length+1,H=new Fe,B=Object.assign({},b==="xaxis"?H.xAxisAnnotation:b==="yaxis"?H.yAxisAnnotation:H.pointAnnotation),ee=W.extend(B,d);switch(b){case"xaxis":this.addXaxisAnnotation(ee,z,$);break;case"yaxis":this.addYaxisAnnotation(ee,z,$);break;case"point":this.addPointAnnotation(ee,z,$)}var re=M.globals.dom.baseEl.querySelector(".apexcharts-".concat(b,"-annotations .apexcharts-").concat(b,"-annotation-label[rel='").concat($,"']")),ce=this.helpers.addBackgroundToAnno(re,ee);return ce&&z.insertBefore(ce.node,re),m&&M.globals.memory.methodsToExec.push({context:T,id:ee.id?ee.id:W.randomId(),method:S,label:"addAnnotation",params:d}),v}},{key:"clearAnnotations",value:function(c){var d=c.w,m=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");d.globals.memory.methodsToExec.map(function(v,b){v.label!=="addText"&&v.label!=="addAnnotation"||d.globals.memory.methodsToExec.splice(b,1)}),m=W.listToArray(m),Array.prototype.forEach.call(m,function(v){for(;v.firstChild;)v.removeChild(v.firstChild)})}},{key:"removeAnnotation",value:function(c,d){var m=c.w,v=m.globals.dom.baseEl.querySelectorAll(".".concat(d));v&&(m.globals.memory.methodsToExec.map(function(b,S){b.id===d&&m.globals.memory.methodsToExec.splice(S,1)}),Array.prototype.forEach.call(v,function(b){b.parentElement.removeChild(b)}))}}]),pe}(),ft=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return s(pe,[{key:"isValidDate",value:function(c){return!isNaN(this.parseDate(c))}},{key:"getTimeStamp",value:function(c){return Date.parse(c)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(c).toISOString().substr(0,25)).getTime():new Date(c).getTime():c}},{key:"getDate",value:function(c){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(c).toUTCString()):new Date(c)}},{key:"parseDate",value:function(c){var d=Date.parse(c);if(!isNaN(d))return this.getTimeStamp(c);var m=Date.parse(c.replace(/-/g,"/").replace(/[a-z]+/gi," "));return m=this.getTimeStamp(m)}},{key:"parseDateWithTimezone",value:function(c){return Date.parse(c.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(c,d){var m=this.w.globals.locale,v=this.w.config.xaxis.labels.datetimeUTC,b=["\0"].concat(ae(m.months)),S=[""].concat(ae(m.shortMonths)),T=[""].concat(ae(m.days)),M=[""].concat(ae(m.shortDays));function z(Le,rt){var Ze=Le+"";for(rt=rt||2;Ze.length<rt;)Ze="0"+Ze;return Ze}var $=v?c.getUTCFullYear():c.getFullYear();d=(d=(d=d.replace(/(^|[^\\])yyyy+/g,"$1"+$)).replace(/(^|[^\\])yy/g,"$1"+$.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+$);var H=(v?c.getUTCMonth():c.getMonth())+1;d=(d=(d=(d=d.replace(/(^|[^\\])MMMM+/g,"$1"+b[0])).replace(/(^|[^\\])MMM/g,"$1"+S[0])).replace(/(^|[^\\])MM/g,"$1"+z(H))).replace(/(^|[^\\])M/g,"$1"+H);var B=v?c.getUTCDate():c.getDate();d=(d=(d=(d=d.replace(/(^|[^\\])dddd+/g,"$1"+T[0])).replace(/(^|[^\\])ddd/g,"$1"+M[0])).replace(/(^|[^\\])dd/g,"$1"+z(B))).replace(/(^|[^\\])d/g,"$1"+B);var ee=v?c.getUTCHours():c.getHours(),re=ee>12?ee-12:ee===0?12:ee;d=(d=(d=(d=d.replace(/(^|[^\\])HH+/g,"$1"+z(ee))).replace(/(^|[^\\])H/g,"$1"+ee)).replace(/(^|[^\\])hh+/g,"$1"+z(re))).replace(/(^|[^\\])h/g,"$1"+re);var ce=v?c.getUTCMinutes():c.getMinutes();d=(d=d.replace(/(^|[^\\])mm+/g,"$1"+z(ce))).replace(/(^|[^\\])m/g,"$1"+ce);var ye=v?c.getUTCSeconds():c.getSeconds();d=(d=d.replace(/(^|[^\\])ss+/g,"$1"+z(ye))).replace(/(^|[^\\])s/g,"$1"+ye);var _e=v?c.getUTCMilliseconds():c.getMilliseconds();d=d.replace(/(^|[^\\])fff+/g,"$1"+z(_e,3)),_e=Math.round(_e/10),d=d.replace(/(^|[^\\])ff/g,"$1"+z(_e)),_e=Math.round(_e/10);var Ee=ee<12?"AM":"PM";d=(d=(d=d.replace(/(^|[^\\])f/g,"$1"+_e)).replace(/(^|[^\\])TT+/g,"$1"+Ee)).replace(/(^|[^\\])T/g,"$1"+Ee.charAt(0));var O=Ee.toLowerCase();d=(d=d.replace(/(^|[^\\])tt+/g,"$1"+O)).replace(/(^|[^\\])t/g,"$1"+O.charAt(0));var X=-c.getTimezoneOffset(),Q=v||!X?"Z":X>0?"+":"-";if(!v){var xe=(X=Math.abs(X))%60;Q+=z(Math.floor(X/60))+":"+z(xe)}d=d.replace(/(^|[^\\])K/g,"$1"+Q);var ke=(v?c.getUTCDay():c.getDay())+1;return d=(d=(d=(d=(d=d.replace(new RegExp(T[0],"g"),T[ke])).replace(new RegExp(M[0],"g"),M[ke])).replace(new RegExp(b[0],"g"),b[H])).replace(new RegExp(S[0],"g"),S[H])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(c,d,m){var v=this.w;v.config.xaxis.min!==void 0&&(c=v.config.xaxis.min),v.config.xaxis.max!==void 0&&(d=v.config.xaxis.max);var b=this.getDate(c),S=this.getDate(d),T=this.formatDate(b,"yyyy MM dd HH mm ss fff").split(" "),M=this.formatDate(S,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(T[6],10),maxMillisecond:parseInt(M[6],10),minSecond:parseInt(T[5],10),maxSecond:parseInt(M[5],10),minMinute:parseInt(T[4],10),maxMinute:parseInt(M[4],10),minHour:parseInt(T[3],10),maxHour:parseInt(M[3],10),minDate:parseInt(T[2],10),maxDate:parseInt(M[2],10),minMonth:parseInt(T[1],10)-1,maxMonth:parseInt(M[1],10)-1,minYear:parseInt(T[0],10),maxYear:parseInt(M[0],10)}}},{key:"isLeapYear",value:function(c){return c%4==0&&c%100!=0||c%400==0}},{key:"calculcateLastDaysOfMonth",value:function(c,d,m){return this.determineDaysOfMonths(c,d)-m}},{key:"determineDaysOfYear",value:function(c){var d=365;return this.isLeapYear(c)&&(d=366),d}},{key:"determineRemainingDaysOfYear",value:function(c,d,m){var v=this.daysCntOfYear[d]+m;return d>1&&this.isLeapYear()&&v++,v}},{key:"determineDaysOfMonths",value:function(c,d){var m=30;switch(c=W.monthMod(c),!0){case this.months30.indexOf(c)>-1:c===2&&(m=this.isLeapYear(d)?29:28);break;case this.months31.indexOf(c)>-1:default:m=31}return m}}]),pe}(),Pt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.tooltipKeyFormat="dd MMM"}return s(pe,[{key:"xLabelFormat",value:function(c,d,m,v){var b=this.w;if(b.config.xaxis.type==="datetime"&&b.config.xaxis.labels.formatter===void 0&&b.config.tooltip.x.formatter===void 0){var S=new ft(this.ctx);return S.formatDate(S.getDate(d),b.config.tooltip.x.format)}return c(d,m,v)}},{key:"defaultGeneralFormatter",value:function(c){return Array.isArray(c)?c.map(function(d){return d}):c}},{key:"defaultYFormatter",value:function(c,d,m){var v=this.w;return W.isNumber(c)&&(c=v.globals.yValueDecimal!==0?c.toFixed(d.decimalsInFloat!==void 0?d.decimalsInFloat:v.globals.yValueDecimal):v.globals.maxYArr[m]-v.globals.minYArr[m]<5?c.toFixed(1):c.toFixed(0)),c}},{key:"setLabelFormatters",value:function(){var c=this,d=this.w;return d.globals.xaxisTooltipFormatter=function(m){return c.defaultGeneralFormatter(m)},d.globals.ttKeyFormatter=function(m){return c.defaultGeneralFormatter(m)},d.globals.ttZFormatter=function(m){return m},d.globals.legendFormatter=function(m){return c.defaultGeneralFormatter(m)},d.config.xaxis.labels.formatter!==void 0?d.globals.xLabelFormatter=d.config.xaxis.labels.formatter:d.globals.xLabelFormatter=function(m){if(W.isNumber(m)){if(!d.config.xaxis.convertedCatToNumeric&&d.config.xaxis.type==="numeric"){if(W.isNumber(d.config.xaxis.decimalsInFloat))return m.toFixed(d.config.xaxis.decimalsInFloat);var v=d.globals.maxX-d.globals.minX;return v>0&&v<100?m.toFixed(1):m.toFixed(0)}return d.globals.isBarHorizontal&&d.globals.maxY-d.globals.minYArr<4?m.toFixed(1):m.toFixed(0)}return m},typeof d.config.tooltip.x.formatter=="function"?d.globals.ttKeyFormatter=d.config.tooltip.x.formatter:d.globals.ttKeyFormatter=d.globals.xLabelFormatter,typeof d.config.xaxis.tooltip.formatter=="function"&&(d.globals.xaxisTooltipFormatter=d.config.xaxis.tooltip.formatter),(Array.isArray(d.config.tooltip.y)||d.config.tooltip.y.formatter!==void 0)&&(d.globals.ttVal=d.config.tooltip.y),d.config.tooltip.z.formatter!==void 0&&(d.globals.ttZFormatter=d.config.tooltip.z.formatter),d.config.legend.formatter!==void 0&&(d.globals.legendFormatter=d.config.legend.formatter),d.config.yaxis.forEach(function(m,v){m.labels.formatter!==void 0?d.globals.yLabelFormatters[v]=m.labels.formatter:d.globals.yLabelFormatters[v]=function(b){return d.globals.xyCharts?Array.isArray(b)?b.map(function(S){return c.defaultYFormatter(S,m,v)}):c.defaultYFormatter(b,m,v):b}}),d.globals}},{key:"heatmapLabelFormatters",value:function(){var c=this.w;if(c.config.chart.type==="heatmap"){c.globals.yAxisScale[0].result=c.globals.seriesNames.slice();var d=c.globals.seriesNames.reduce(function(m,v){return m.length>v.length?m:v},0);c.globals.yAxisScale[0].niceMax=d,c.globals.yAxisScale[0].niceMin=d}}}]),pe}(),or=function(pe){var c,d=pe.isTimeline,m=pe.ctx,v=pe.seriesIndex,b=pe.dataPointIndex,S=pe.y1,T=pe.y2,M=pe.w,z=M.globals.seriesRangeStart[v][b],$=M.globals.seriesRangeEnd[v][b],H=M.globals.labels[b],B=M.config.series[v].name?M.config.series[v].name:"",ee=M.globals.ttKeyFormatter,re=M.config.tooltip.y.title.formatter,ce={w:M,seriesIndex:v,dataPointIndex:b,start:z,end:$};typeof re=="function"&&(B=re(B,ce)),(c=M.config.series[v].data[b])!==null&&c!==void 0&&c.x&&(H=M.config.series[v].data[b].x),d||M.config.xaxis.type==="datetime"&&(H=new Pt(m).xLabelFormat(M.globals.ttKeyFormatter,H,H,{i:void 0,dateFormatter:new ft(m).formatDate,w:M})),typeof ee=="function"&&(H=ee(H,ce)),Number.isFinite(S)&&Number.isFinite(T)&&(z=S,$=T);var ye="",_e="",Ee=M.globals.colors[v];if(M.config.tooltip.x.formatter===void 0)if(M.config.xaxis.type==="datetime"){var O=new ft(m);ye=O.formatDate(O.getDate(z),M.config.tooltip.x.format),_e=O.formatDate(O.getDate($),M.config.tooltip.x.format)}else ye=z,_e=$;else ye=M.config.tooltip.x.formatter(z),_e=M.config.tooltip.x.formatter($);return{start:z,end:$,startVal:ye,endVal:_e,ylabel:H,color:Ee,seriesName:B}},xr=function(pe){var c=pe.color,d=pe.seriesName,m=pe.ylabel,v=pe.start,b=pe.end,S=pe.seriesIndex,T=pe.dataPointIndex,M=pe.ctx.tooltip.tooltipLabels.getFormatters(S);v=M.yLbFormatter(v),b=M.yLbFormatter(b);var z=M.yLbFormatter(pe.w.globals.series[S][T]),$=`<span class="value start-value">
  `.concat(v,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(b,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+c+'">'+(d||"")+'</span></div><div> <span class="category">'+m+": </span> "+(pe.w.globals.comboCharts?pe.w.config.series[S].type==="rangeArea"||pe.w.config.series[S].type==="rangeBar"?$:"<span>".concat(z,"</span>"):$)+" </div></div>"},mt=function(){function pe(c){f(this,pe),this.opts=c}return s(pe,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(c){return this.hideYAxis(),W.extend(c,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),n(n({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var c=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(d){var m=d.seriesIndex,v=d.dataPointIndex,b=d.w;return c._getBoxTooltip(b,m,v,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var c=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(d){var m=d.seriesIndex,v=d.dataPointIndex,b=d.w;return c._getBoxTooltip(b,m,v,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(c,d){d.ctx;var m=d.seriesIndex,v=d.dataPointIndex,b=d.w,S=function(){var T=b.globals.seriesRangeStart[m][v];return b.globals.seriesRangeEnd[m][v]-T};return b.globals.comboCharts?b.config.series[m].type==="rangeBar"||b.config.series[m].type==="rangeArea"?S():c:S()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(c){return c.w.config.plotOptions&&c.w.config.plotOptions.bar&&c.w.config.plotOptions.bar.horizontal?function(d){var m=or(n(n({},d),{},{isTimeline:!0})),v=m.color,b=m.seriesName,S=m.ylabel,T=m.startVal,M=m.endVal;return xr(n(n({},d),{},{color:v,seriesName:b,ylabel:S,start:T,end:M}))}(c):function(d){var m=or(d),v=m.color,b=m.seriesName,S=m.ylabel,T=m.start,M=m.end;return xr(n(n({},d),{},{color:v,seriesName:b,ylabel:S,start:T,end:M}))}(c)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(c){var d,m;return(d=c.plotOptions.bar)!==null&&d!==void 0&&d.barHeight||(c.plotOptions.bar.barHeight=2),(m=c.plotOptions.bar)!==null&&m!==void 0&&m.columnWidth||(c.plotOptions.bar.columnWidth=2),c}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(c){return function(d){var m=or(d),v=m.color,b=m.seriesName,S=m.ylabel,T=m.start,M=m.end;return xr(n(n({},d),{},{color:v,seriesName:b,ylabel:S,start:T,end:M}))}(c)}}}}},{key:"brush",value:function(c){return W.extend(c,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(c){c.dataLabels=c.dataLabels||{},c.dataLabels.formatter=c.dataLabels.formatter||void 0;var d=c.dataLabels.formatter;return c.yaxis.forEach(function(m,v){c.yaxis[v].min=0,c.yaxis[v].max=100}),c.chart.type==="bar"&&(c.dataLabels.formatter=d||function(m){return typeof m=="number"&&m?m.toFixed(0)+"%":m}),c}},{key:"stackedBars",value:function(){var c=this.bar();return n(n({},c),{},{plotOptions:n(n({},c.plotOptions),{},{bar:n(n({},c.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(c){return c.xaxis.convertedCatToNumeric=!0,c}},{key:"convertCatToNumericXaxis",value:function(c,d,m){c.xaxis.type="numeric",c.xaxis.labels=c.xaxis.labels||{},c.xaxis.labels.formatter=c.xaxis.labels.formatter||function(S){return W.isNumber(S)?Math.floor(S):S};var v=c.xaxis.labels.formatter,b=c.xaxis.categories&&c.xaxis.categories.length?c.xaxis.categories:c.labels;return m&&m.length&&(b=m.map(function(S){return Array.isArray(S)?S:String(S)})),b&&b.length&&(c.xaxis.labels.formatter=function(S){return W.isNumber(S)?v(b[Math.floor(S)-1]):v(S)}),c.xaxis.categories=[],c.labels=[],c.xaxis.tickAmount=c.xaxis.tickAmount||"dataPoints",c}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(c){return c.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(c){return c.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(c){return c.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(c){return c},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(c,d,m,v,b){var S=c.globals.seriesCandleO[d][m],T=c.globals.seriesCandleH[d][m],M=c.globals.seriesCandleM[d][m],z=c.globals.seriesCandleL[d][m],$=c.globals.seriesCandleC[d][m];return c.config.series[d].type&&c.config.series[d].type!==b?`<div class="apexcharts-custom-tooltip">
          `.concat(c.config.series[d].name?c.config.series[d].name:"series-"+(d+1),": <strong>").concat(c.globals.series[d][m],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(c.config.chart.type,'">')+"<div>".concat(v[0],': <span class="value">')+S+"</span></div>"+"<div>".concat(v[1],': <span class="value">')+T+"</span></div>"+(M?"<div>".concat(v[2],': <span class="value">')+M+"</span></div>":"")+"<div>".concat(v[3],': <span class="value">')+z+"</span></div>"+"<div>".concat(v[4],': <span class="value">')+$+"</span></div></div>"}}]),pe}(),Xt=function(){function pe(c){f(this,pe),this.opts=c}return s(pe,[{key:"init",value:function(c){var d=c.responsiveOverride,m=this.opts,v=new Fe,b=new mt(m);this.chartType=m.chart.type,m=this.extendYAxis(m),m=this.extendAnnotations(m);var S=v.init(),T={};if(m&&o(m)==="object"){var M,z,$,H,B,ee,re,ce,ye,_e,Ee={};Ee=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(m.chart.type)!==-1?b[m.chart.type]():b.line(),(M=m.plotOptions)!==null&&M!==void 0&&(z=M.bar)!==null&&z!==void 0&&z.isFunnel&&(Ee=b.funnel()),m.chart.stacked&&m.chart.type==="bar"&&(Ee=b.stackedBars()),($=m.chart.brush)!==null&&$!==void 0&&$.enabled&&(Ee=b.brush(Ee)),m.chart.stacked&&m.chart.stackType==="100%"&&(m=b.stacked100(m)),(H=m.plotOptions)!==null&&H!==void 0&&(B=H.bar)!==null&&B!==void 0&&B.isDumbbell&&(m=b.dumbbell(m)),((ee=m)===null||ee===void 0||(re=ee.stroke)===null||re===void 0?void 0:re.curve)==="monotoneCubic"&&(m.stroke.curve="smooth"),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(m),m.xaxis=m.xaxis||window.Apex.xaxis||{},d||(m.xaxis.convertedCatToNumeric=!1),((ce=(m=this.checkForCatToNumericXAxis(this.chartType,Ee,m)).chart.sparkline)!==null&&ce!==void 0&&ce.enabled||(ye=window.Apex.chart)!==null&&ye!==void 0&&(_e=ye.sparkline)!==null&&_e!==void 0&&_e.enabled)&&(Ee=b.sparkline(Ee)),T=W.extend(S,Ee)}var O=W.extend(T,window.Apex);return S=W.extend(O,m),S=this.handleUserInputErrors(S)}},{key:"checkForCatToNumericXAxis",value:function(c,d,m){var v,b,S=new mt(m),T=(c==="bar"||c==="boxPlot")&&((v=m.plotOptions)===null||v===void 0||(b=v.bar)===null||b===void 0?void 0:b.horizontal),M=c==="pie"||c==="polarArea"||c==="donut"||c==="radar"||c==="radialBar"||c==="heatmap",z=m.xaxis.type!=="datetime"&&m.xaxis.type!=="numeric",$=m.xaxis.tickPlacement?m.xaxis.tickPlacement:d.xaxis&&d.xaxis.tickPlacement;return T||M||!z||$==="between"||(m=S.convertCatToNumeric(m)),m}},{key:"extendYAxis",value:function(c,d){var m=new Fe;(c.yaxis===void 0||!c.yaxis||Array.isArray(c.yaxis)&&c.yaxis.length===0)&&(c.yaxis={}),c.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(c.yaxis=W.extend(c.yaxis,window.Apex.yaxis)),c.yaxis.constructor!==Array?c.yaxis=[W.extend(m.yAxis,c.yaxis)]:c.yaxis=W.extendArray(c.yaxis,m.yAxis);var v=!1;c.yaxis.forEach(function(S){S.logarithmic&&(v=!0)});var b=c.series;return d&&!b&&(b=d.config.series),v&&b.length!==c.yaxis.length&&b.length&&(c.yaxis=b.map(function(S,T){if(S.name||(b[T].name="series-".concat(T+1)),c.yaxis[T])return c.yaxis[T].seriesName=b[T].name,c.yaxis[T];var M=W.extend(m.yAxis,c.yaxis[0]);return M.show=!1,M})),v&&b.length>1&&b.length!==c.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),c}},{key:"extendAnnotations",value:function(c){return c.annotations===void 0&&(c.annotations={},c.annotations.yaxis=[],c.annotations.xaxis=[],c.annotations.points=[]),c=this.extendYAxisAnnotations(c),c=this.extendXAxisAnnotations(c),c=this.extendPointAnnotations(c)}},{key:"extendYAxisAnnotations",value:function(c){var d=new Fe;return c.annotations.yaxis=W.extendArray(c.annotations.yaxis!==void 0?c.annotations.yaxis:[],d.yAxisAnnotation),c}},{key:"extendXAxisAnnotations",value:function(c){var d=new Fe;return c.annotations.xaxis=W.extendArray(c.annotations.xaxis!==void 0?c.annotations.xaxis:[],d.xAxisAnnotation),c}},{key:"extendPointAnnotations",value:function(c){var d=new Fe;return c.annotations.points=W.extendArray(c.annotations.points!==void 0?c.annotations.points:[],d.pointAnnotation),c}},{key:"checkForDarkTheme",value:function(c){c.theme&&c.theme.mode==="dark"&&(c.tooltip||(c.tooltip={}),c.tooltip.theme!=="light"&&(c.tooltip.theme="dark"),c.chart.foreColor||(c.chart.foreColor="#f6f7f8"),c.chart.background||(c.chart.background="#424242"),c.theme.palette||(c.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(c){var d=c;if(d.tooltip.shared&&d.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(d.chart.type==="bar"&&d.plotOptions.bar.horizontal){if(d.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");d.yaxis[0].reversed&&(d.yaxis[0].opposite=!0),d.xaxis.tooltip.enabled=!1,d.yaxis[0].tooltip.enabled=!1,d.chart.zoom.enabled=!1}return d.chart.type!=="bar"&&d.chart.type!=="rangeBar"||d.tooltip.shared&&d.xaxis.crosshairs.width==="barWidth"&&d.series.length>1&&(d.xaxis.crosshairs.width="tickWidth"),d.chart.type!=="candlestick"&&d.chart.type!=="boxPlot"||d.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(d.chart.type," chart is not supported.")),d.yaxis[0].reversed=!1),d}}]),pe}(),Wt=function(){function pe(){f(this,pe)}return s(pe,[{key:"initGlobalVars",value:function(c){c.series=[],c.seriesCandleO=[],c.seriesCandleH=[],c.seriesCandleM=[],c.seriesCandleL=[],c.seriesCandleC=[],c.seriesRangeStart=[],c.seriesRangeEnd=[],c.seriesRange=[],c.seriesPercent=[],c.seriesGoals=[],c.seriesX=[],c.seriesZ=[],c.seriesNames=[],c.seriesTotals=[],c.seriesLog=[],c.seriesColors=[],c.stackedSeriesTotals=[],c.seriesXvalues=[],c.seriesYvalues=[],c.labels=[],c.hasXaxisGroups=!1,c.groups=[],c.hasSeriesGroups=!1,c.seriesGroups=[],c.categoryLabels=[],c.timescaleLabels=[],c.noLabelsProvided=!1,c.resizeTimer=null,c.selectionResizeTimer=null,c.delayedElements=[],c.pointsArray=[],c.dataLabelsRects=[],c.isXNumeric=!1,c.skipLastTimelinelabel=!1,c.skipFirstTimelinelabel=!1,c.isDataXYZ=!1,c.isMultiLineX=!1,c.isMultipleYAxis=!1,c.maxY=-Number.MAX_VALUE,c.minY=Number.MIN_VALUE,c.minYArr=[],c.maxYArr=[],c.maxX=-Number.MAX_VALUE,c.minX=Number.MAX_VALUE,c.initialMaxX=-Number.MAX_VALUE,c.initialMinX=Number.MAX_VALUE,c.maxDate=0,c.minDate=Number.MAX_VALUE,c.minZ=Number.MAX_VALUE,c.maxZ=-Number.MAX_VALUE,c.minXDiff=Number.MAX_VALUE,c.yAxisScale=[],c.xAxisScale=null,c.xAxisTicksPositions=[],c.yLabelsCoords=[],c.yTitleCoords=[],c.barPadForNumericAxis=0,c.padHorizontal=0,c.xRange=0,c.yRange=[],c.zRange=0,c.dataPoints=0,c.xTickAmount=0}},{key:"globalVars",value:function(c){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:c.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:c.chart.toolbar.autoSelected==="zoom"&&c.chart.toolbar.tools.zoom&&c.chart.zoom.enabled,panEnabled:c.chart.toolbar.autoSelected==="pan"&&c.chart.toolbar.tools.pan,selectionEnabled:c.chart.toolbar.autoSelected==="selection"&&c.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(c){var d=this.globalVars(c);return this.initGlobalVars(d),d.initialConfig=W.extend({},c),d.initialSeries=W.clone(c.series),d.lastXAxis=W.clone(d.initialConfig.xaxis),d.lastYAxis=W.clone(d.initialConfig.yaxis),d}}]),pe}(),Ot=function(){function pe(c){f(this,pe),this.opts=c}return s(pe,[{key:"init",value:function(){var c=new Xt(this.opts).init({responsiveOverride:!1});return{config:c,globals:new Wt().init(c)}}}]),pe}(),ut=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.opts=null,this.seriesIndex=0}return s(pe,[{key:"clippedImgArea",value:function(c){var d=this.w,m=d.config,v=parseInt(d.globals.gridWidth,10),b=parseInt(d.globals.gridHeight,10),S=v>b?v:b,T=c.image,M=0,z=0;c.width===void 0&&c.height===void 0?m.fill.image.width!==void 0&&m.fill.image.height!==void 0?(M=m.fill.image.width+1,z=m.fill.image.height):(M=S+1,z=S):(M=c.width,z=c.height);var $=document.createElementNS(d.globals.SVGNS,"pattern");de.setAttrs($,{id:c.patternID,patternUnits:c.patternUnits?c.patternUnits:"userSpaceOnUse",width:M+"px",height:z+"px"});var H=document.createElementNS(d.globals.SVGNS,"image");$.appendChild(H),H.setAttributeNS(window.SVG.xlink,"href",T),de.setAttrs(H,{x:0,y:0,preserveAspectRatio:"none",width:M+"px",height:z+"px"}),H.style.opacity=c.opacity,d.globals.dom.elDefs.node.appendChild($)}},{key:"getSeriesIndex",value:function(c){var d=this.w,m=d.config.chart.type;return(m==="bar"||m==="rangeBar")&&d.config.plotOptions.bar.distributed||m==="heatmap"||m==="treemap"?this.seriesIndex=c.seriesNumber:this.seriesIndex=c.seriesNumber%d.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(c){var d=this.w;this.opts=c;var m,v,b,S=this.w.config;this.seriesIndex=this.getSeriesIndex(c);var T=this.getFillColors()[this.seriesIndex];d.globals.seriesColors[this.seriesIndex]!==void 0&&(T=d.globals.seriesColors[this.seriesIndex]),typeof T=="function"&&(T=T({seriesIndex:this.seriesIndex,dataPointIndex:c.dataPointIndex,value:c.value,w:d}));var M=c.fillType?c.fillType:this.getFillType(this.seriesIndex),z=Array.isArray(S.fill.opacity)?S.fill.opacity[this.seriesIndex]:S.fill.opacity;c.color&&(T=c.color),T||(T="#fff",console.warn("undefined color - ApexCharts"));var $=T;if(T.indexOf("rgb")===-1?T.length<9&&($=W.hexToRgba(T,z)):T.indexOf("rgba")>-1&&(z=W.getOpacityFromRGBA(T)),c.opacity&&(z=c.opacity),M==="pattern"&&(v=this.handlePatternFill({fillConfig:c.fillConfig,patternFill:v,fillColor:T,fillOpacity:z,defaultColor:$})),M==="gradient"&&(b=this.handleGradientFill({fillConfig:c.fillConfig,fillColor:T,fillOpacity:z,i:this.seriesIndex})),M==="image"){var H=S.fill.image.src,B=c.patternID?c.patternID:"";this.clippedImgArea({opacity:z,image:Array.isArray(H)?c.seriesNumber<H.length?H[c.seriesNumber]:H[0]:H,width:c.width?c.width:void 0,height:c.height?c.height:void 0,patternUnits:c.patternUnits,patternID:"pattern".concat(d.globals.cuid).concat(c.seriesNumber+1).concat(B)}),m="url(#pattern".concat(d.globals.cuid).concat(c.seriesNumber+1).concat(B,")")}else m=M==="gradient"?b:M==="pattern"?v:$;return c.solid&&(m=$),m}},{key:"getFillType",value:function(c){var d=this.w;return Array.isArray(d.config.fill.type)?d.config.fill.type[c]:d.config.fill.type}},{key:"getFillColors",value:function(){var c=this.w,d=c.config,m=this.opts,v=[];return c.globals.comboCharts?c.config.series[this.seriesIndex].type==="line"?Array.isArray(c.globals.stroke.colors)?v=c.globals.stroke.colors:v.push(c.globals.stroke.colors):Array.isArray(c.globals.fill.colors)?v=c.globals.fill.colors:v.push(c.globals.fill.colors):d.chart.type==="line"?Array.isArray(c.globals.stroke.colors)?v=c.globals.stroke.colors:v.push(c.globals.stroke.colors):Array.isArray(c.globals.fill.colors)?v=c.globals.fill.colors:v.push(c.globals.fill.colors),m.fillColors!==void 0&&(v=[],Array.isArray(m.fillColors)?v=m.fillColors.slice():v.push(m.fillColors)),v}},{key:"handlePatternFill",value:function(c){var d=c.fillConfig,m=c.patternFill,v=c.fillColor,b=c.fillOpacity,S=c.defaultColor,T=this.w.config.fill;d&&(T=d);var M=this.opts,z=new de(this.ctx),$=Array.isArray(T.pattern.strokeWidth)?T.pattern.strokeWidth[this.seriesIndex]:T.pattern.strokeWidth,H=v;return Array.isArray(T.pattern.style)?m=T.pattern.style[M.seriesNumber]!==void 0?z.drawPattern(T.pattern.style[M.seriesNumber],T.pattern.width,T.pattern.height,H,$,b):S:m=z.drawPattern(T.pattern.style,T.pattern.width,T.pattern.height,H,$,b),m}},{key:"handleGradientFill",value:function(c){var d=c.fillColor,m=c.fillOpacity,v=c.fillConfig,b=c.i,S=this.w.config.fill;v&&(S=n(n({},S),v));var T,M=this.opts,z=new de(this.ctx),$=new W,H=S.gradient.type,B=d,ee=S.gradient.opacityFrom===void 0?m:Array.isArray(S.gradient.opacityFrom)?S.gradient.opacityFrom[b]:S.gradient.opacityFrom;B.indexOf("rgba")>-1&&(ee=W.getOpacityFromRGBA(B));var re=S.gradient.opacityTo===void 0?m:Array.isArray(S.gradient.opacityTo)?S.gradient.opacityTo[b]:S.gradient.opacityTo;if(S.gradient.gradientToColors===void 0||S.gradient.gradientToColors.length===0)T=S.gradient.shade==="dark"?$.shadeColor(-1*parseFloat(S.gradient.shadeIntensity),d.indexOf("rgb")>-1?W.rgb2hex(d):d):$.shadeColor(parseFloat(S.gradient.shadeIntensity),d.indexOf("rgb")>-1?W.rgb2hex(d):d);else if(S.gradient.gradientToColors[M.seriesNumber]){var ce=S.gradient.gradientToColors[M.seriesNumber];T=ce,ce.indexOf("rgba")>-1&&(re=W.getOpacityFromRGBA(ce))}else T=d;if(S.gradient.gradientFrom&&(B=S.gradient.gradientFrom),S.gradient.gradientTo&&(T=S.gradient.gradientTo),S.gradient.inverseColors){var ye=B;B=T,T=ye}return B.indexOf("rgb")>-1&&(B=W.rgb2hex(B)),T.indexOf("rgb")>-1&&(T=W.rgb2hex(T)),z.drawGradient(H,B,T,ee,re,M.size,S.gradient.stops,S.gradient.colorStops,b)}}]),pe}(),Vt=function(){function pe(c,d){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"setGlobalMarkerSize",value:function(){var c=this.w;if(c.globals.markers.size=Array.isArray(c.config.markers.size)?c.config.markers.size:[c.config.markers.size],c.globals.markers.size.length>0){if(c.globals.markers.size.length<c.globals.series.length+1)for(var d=0;d<=c.globals.series.length;d++)c.globals.markers.size[d]===void 0&&c.globals.markers.size.push(c.globals.markers.size[0])}else c.globals.markers.size=c.config.series.map(function(m){return c.config.markers.size})}},{key:"plotChartMarkers",value:function(c,d,m,v){var b,S=arguments.length>4&&arguments[4]!==void 0&&arguments[4],T=this.w,M=d,z=c,$=null,H=new de(this.ctx),B=T.config.markers.discrete&&T.config.markers.discrete.length;if((T.globals.markers.size[d]>0||S||B)&&($=H.group({class:S||B?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(T.globals.cuid,")")),Array.isArray(z.x))for(var ee=0;ee<z.x.length;ee++){var re=m;m===1&&ee===0&&(re=0),m===1&&ee===1&&(re=1);var ce="apexcharts-marker";if(T.config.chart.type!=="line"&&T.config.chart.type!=="area"||T.globals.comboCharts||T.config.tooltip.intersect||(ce+=" no-pointer-events"),(Array.isArray(T.config.markers.size)?T.globals.markers.size[d]>0:T.config.markers.size>0)||S||B){W.isNumber(z.y[ee])?ce+=" w".concat(W.randomId()):ce="apexcharts-nullpoint";var ye=this.getMarkerConfig({cssClass:ce,seriesIndex:d,dataPointIndex:re});T.config.series[M].data[re]&&(T.config.series[M].data[re].fillColor&&(ye.pointFillColor=T.config.series[M].data[re].fillColor),T.config.series[M].data[re].strokeColor&&(ye.pointStrokeColor=T.config.series[M].data[re].strokeColor)),v&&(ye.pSize=v),(z.x[ee]<0||z.x[ee]>T.globals.gridWidth||z.y[ee]<-T.globals.markers.largestSize||z.y[ee]>T.globals.gridHeight+T.globals.markers.largestSize)&&(ye.pSize=0),(b=H.drawMarker(z.x[ee],z.y[ee],ye)).attr("rel",re),b.attr("j",re),b.attr("index",d),b.node.setAttribute("default-marker-size",ye.pSize),new he(this.ctx).setSelectionFilter(b,d,re),this.addEvents(b),$&&$.add(b)}else T.globals.pointsArray[d]===void 0&&(T.globals.pointsArray[d]=[]),T.globals.pointsArray[d].push([z.x[ee],z.y[ee]])}return $}},{key:"getMarkerConfig",value:function(c){var d=c.cssClass,m=c.seriesIndex,v=c.dataPointIndex,b=v===void 0?null:v,S=c.finishRadius,T=S===void 0?null:S,M=this.w,z=this.getMarkerStyle(m),$=M.globals.markers.size[m],H=M.config.markers;return b!==null&&H.discrete.length&&H.discrete.map(function(B){B.seriesIndex===m&&B.dataPointIndex===b&&(z.pointStrokeColor=B.strokeColor,z.pointFillColor=B.fillColor,$=B.size,z.pointShape=B.shape)}),{pSize:T===null?$:T,pRadius:H.radius,width:Array.isArray(H.width)?H.width[m]:H.width,height:Array.isArray(H.height)?H.height[m]:H.height,pointStrokeWidth:Array.isArray(H.strokeWidth)?H.strokeWidth[m]:H.strokeWidth,pointStrokeColor:z.pointStrokeColor,pointFillColor:z.pointFillColor,shape:z.pointShape||(Array.isArray(H.shape)?H.shape[m]:H.shape),class:d,pointStrokeOpacity:Array.isArray(H.strokeOpacity)?H.strokeOpacity[m]:H.strokeOpacity,pointStrokeDashArray:Array.isArray(H.strokeDashArray)?H.strokeDashArray[m]:H.strokeDashArray,pointFillOpacity:Array.isArray(H.fillOpacity)?H.fillOpacity[m]:H.fillOpacity,seriesIndex:m}}},{key:"addEvents",value:function(c){var d=this.w,m=new de(this.ctx);c.node.addEventListener("mouseenter",m.pathMouseEnter.bind(this.ctx,c)),c.node.addEventListener("mouseleave",m.pathMouseLeave.bind(this.ctx,c)),c.node.addEventListener("mousedown",m.pathMouseDown.bind(this.ctx,c)),c.node.addEventListener("click",d.config.markers.onClick),c.node.addEventListener("dblclick",d.config.markers.onDblClick),c.node.addEventListener("touchstart",m.pathMouseDown.bind(this.ctx,c),{passive:!0})}},{key:"getMarkerStyle",value:function(c){var d=this.w,m=d.globals.markers.colors,v=d.config.markers.strokeColor||d.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(v)?v[c]:v,pointFillColor:Array.isArray(m)?m[c]:m}}}]),pe}(),ir=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return s(pe,[{key:"draw",value:function(c,d,m){var v=this.w,b=new de(this.ctx),S=m.realIndex,T=m.pointsPos,M=m.zRatio,z=m.elParent,$=b.group({class:"apexcharts-series-markers apexcharts-series-".concat(v.config.chart.type)});if($.attr("clip-path","url(#gridRectMarkerMask".concat(v.globals.cuid,")")),Array.isArray(T.x))for(var H=0;H<T.x.length;H++){var B=d+1,ee=!0;d===0&&H===0&&(B=0),d===0&&H===1&&(B=1);var re=0,ce=v.globals.markers.size[S];if(M!==1/0){var ye=v.config.plotOptions.bubble;ce=v.globals.seriesZ[S][B],ye.zScaling&&(ce/=M),ye.minBubbleRadius&&ce<ye.minBubbleRadius&&(ce=ye.minBubbleRadius),ye.maxBubbleRadius&&ce>ye.maxBubbleRadius&&(ce=ye.maxBubbleRadius)}v.config.chart.animations.enabled||(re=ce);var _e=T.x[H],Ee=T.y[H];if(re=re||0,Ee!==null&&v.globals.series[S][B]!==void 0||(ee=!1),ee){var O=this.drawPoint(_e,Ee,re,ce,S,B,d);$.add(O)}z.add($)}}},{key:"drawPoint",value:function(c,d,m,v,b,S,T){var M=this.w,z=b,$=new K(this.ctx),H=new he(this.ctx),B=new ut(this.ctx),ee=new Vt(this.ctx),re=new de(this.ctx),ce=ee.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:z,dataPointIndex:S,finishRadius:M.config.chart.type==="bubble"||M.globals.comboCharts&&M.config.series[b]&&M.config.series[b].type==="bubble"?v:null});v=ce.pSize;var ye,_e=B.fillPath({seriesNumber:b,dataPointIndex:S,color:ce.pointFillColor,patternUnits:"objectBoundingBox",value:M.globals.series[b][T]});if(ce.shape==="circle"?ye=re.drawCircle(m):ce.shape!=="square"&&ce.shape!=="rect"||(ye=re.drawRect(0,0,ce.width-ce.pointStrokeWidth/2,ce.height-ce.pointStrokeWidth/2,ce.pRadius)),M.config.series[z].data[S]&&M.config.series[z].data[S].fillColor&&(_e=M.config.series[z].data[S].fillColor),ye.attr({x:c-ce.width/2-ce.pointStrokeWidth/2,y:d-ce.height/2-ce.pointStrokeWidth/2,cx:c,cy:d,fill:_e,"fill-opacity":ce.pointFillOpacity,stroke:ce.pointStrokeColor,r:v,"stroke-width":ce.pointStrokeWidth,"stroke-dasharray":ce.pointStrokeDashArray,"stroke-opacity":ce.pointStrokeOpacity}),M.config.chart.dropShadow.enabled){var Ee=M.config.chart.dropShadow;H.dropShadow(ye,Ee,b)}if(!this.initialAnim||M.globals.dataChanged||M.globals.resized)M.globals.animationEnded=!0;else{var O=M.config.chart.animations.speed;$.animateMarker(ye,0,ce.shape==="circle"?v:{width:ce.width,height:ce.height},O,M.globals.easing,function(){window.setTimeout(function(){$.animationCompleted(ye)},100)})}if(M.globals.dataChanged&&ce.shape==="circle")if(this.dynamicAnim){var X,Q,xe,ke,Le=M.config.chart.animations.dynamicAnimation.speed;(ke=M.globals.previousPaths[b]&&M.globals.previousPaths[b][T])!=null&&(X=ke.x,Q=ke.y,xe=ke.r!==void 0?ke.r:v);for(var rt=0;rt<M.globals.collapsedSeries.length;rt++)M.globals.collapsedSeries[rt].index===b&&(Le=1,v=0);c===0&&d===0&&(v=0),$.animateCircle(ye,{cx:X,cy:Q,r:xe},{cx:c,cy:d,r:v},Le,M.globals.easing)}else ye.attr({r:v});return ye.attr({rel:S,j:S,index:b,"default-marker-size":v}),H.setSelectionFilter(ye,b,S),ee.addEvents(ye),ye.node.classList.add("apexcharts-marker"),ye}},{key:"centerTextInBubble",value:function(c){var d=this.w;return{y:c+=parseInt(d.config.dataLabels.style.fontSize,10)/4}}}]),pe}(),vt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"dataLabelsCorrection",value:function(c,d,m,v,b,S,T){var M=this.w,z=!1,$=new de(this.ctx).getTextRects(m,T),H=$.width,B=$.height;d<0&&(d=0),d>M.globals.gridHeight+B&&(d=M.globals.gridHeight+B/2),M.globals.dataLabelsRects[v]===void 0&&(M.globals.dataLabelsRects[v]=[]),M.globals.dataLabelsRects[v].push({x:c,y:d,width:H,height:B});var ee=M.globals.dataLabelsRects[v].length-2,re=M.globals.lastDrawnDataLabelsIndexes[v]!==void 0?M.globals.lastDrawnDataLabelsIndexes[v][M.globals.lastDrawnDataLabelsIndexes[v].length-1]:0;if(M.globals.dataLabelsRects[v][ee]!==void 0){var ce=M.globals.dataLabelsRects[v][re];(c>ce.x+ce.width||d>ce.y+ce.height||d+B<ce.y||c+H<ce.x)&&(z=!0)}return(b===0||S)&&(z=!0),{x:c,y:d,textRects:$,drawnextLabel:z}}},{key:"drawDataLabel",value:function(c){var d=this,m=c.type,v=c.pos,b=c.i,S=c.j,T=c.isRangeStart,M=c.strokeWidth,z=M===void 0?2:M,$=this.w,H=new de(this.ctx),B=$.config.dataLabels,ee=0,re=0,ce=S,ye=null;if(!B.enabled||!Array.isArray(v.x))return ye;ye=H.group({class:"apexcharts-data-labels"});for(var _e=0;_e<v.x.length;_e++)if(ee=v.x[_e]+B.offsetX,re=v.y[_e]+B.offsetY+z,!isNaN(ee)){S===1&&_e===0&&(ce=0),S===1&&_e===1&&(ce=1);var Ee=$.globals.series[b][ce];m==="rangeArea"&&(Ee=T?$.globals.seriesRangeStart[b][ce]:$.globals.seriesRangeEnd[b][ce]);var O="",X=function(Q){return $.config.dataLabels.formatter(Q,{ctx:d.ctx,seriesIndex:b,dataPointIndex:ce,w:$})};$.config.chart.type==="bubble"?(O=X(Ee=$.globals.seriesZ[b][ce]),re=v.y[_e],re=new ir(this.ctx).centerTextInBubble(re,b,ce).y):Ee!==void 0&&(O=X(Ee)),this.plotDataLabelsText({x:ee,y:re,text:O,i:b,j:ce,parent:ye,offsetCorrection:!0,dataLabelsConfig:$.config.dataLabels})}return ye}},{key:"plotDataLabelsText",value:function(c){var d=this.w,m=new de(this.ctx),v=c.x,b=c.y,S=c.i,T=c.j,M=c.text,z=c.textAnchor,$=c.fontSize,H=c.parent,B=c.dataLabelsConfig,ee=c.color,re=c.alwaysDrawDataLabel,ce=c.offsetCorrection;if(!(Array.isArray(d.config.dataLabels.enabledOnSeries)&&d.config.dataLabels.enabledOnSeries.indexOf(S)<0)){var ye={x:v,y:b,drawnextLabel:!0,textRects:null};ce&&(ye=this.dataLabelsCorrection(v,b,M,S,T,re,parseInt(B.style.fontSize,10))),d.globals.zoomed||(v=ye.x,b=ye.y),ye.textRects&&(v<-10-ye.textRects.width||v>d.globals.gridWidth+ye.textRects.width+10)&&(M="");var _e=d.globals.dataLabels.style.colors[S];((d.config.chart.type==="bar"||d.config.chart.type==="rangeBar")&&d.config.plotOptions.bar.distributed||d.config.dataLabels.distributed)&&(_e=d.globals.dataLabels.style.colors[T]),typeof _e=="function"&&(_e=_e({series:d.globals.series,seriesIndex:S,dataPointIndex:T,w:d})),ee&&(_e=ee);var Ee=B.offsetX,O=B.offsetY;if(d.config.chart.type!=="bar"&&d.config.chart.type!=="rangeBar"||(Ee=0,O=0),ye.drawnextLabel){var X=m.drawText({width:100,height:parseInt(B.style.fontSize,10),x:v+Ee,y:b+O,foreColor:_e,textAnchor:z||B.textAnchor,text:M,fontSize:$||B.style.fontSize,fontFamily:B.style.fontFamily,fontWeight:B.style.fontWeight||"normal"});if(X.attr({class:"apexcharts-datalabel",cx:v,cy:b}),B.dropShadow.enabled){var Q=B.dropShadow;new he(this.ctx).dropShadow(X,Q)}H.add(X),d.globals.lastDrawnDataLabelsIndexes[S]===void 0&&(d.globals.lastDrawnDataLabelsIndexes[S]=[]),d.globals.lastDrawnDataLabelsIndexes[S].push(T)}}}},{key:"addBackgroundToDataLabel",value:function(c,d){var m=this.w,v=m.config.dataLabels.background,b=v.padding,S=v.padding/2,T=d.width,M=d.height,z=new de(this.ctx).drawRect(d.x-b,d.y-S/2,T+2*b,M+S,v.borderRadius,m.config.chart.background==="transparent"?"#fff":m.config.chart.background,v.opacity,v.borderWidth,v.borderColor);return v.dropShadow.enabled&&new he(this.ctx).dropShadow(z,v.dropShadow),z}},{key:"dataLabelsBackground",value:function(){var c=this.w;if(c.config.chart.type!=="bubble")for(var d=c.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),m=0;m<d.length;m++){var v=d[m],b=v.getBBox(),S=null;if(b.width&&b.height&&(S=this.addBackgroundToDataLabel(v,b)),S){v.parentNode.insertBefore(S.node,v);var T=v.getAttribute("fill");c.config.chart.animations.enabled&&!c.globals.resized&&!c.globals.dataChanged?S.animate().attr({fill:T}):S.attr({fill:T}),v.setAttribute("fill",c.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var c=this.w,d=c.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),m=c.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),v=0;v<d.length;v++)m&&m.insertBefore(d[v],m.nextSibling)}}]),pe}(),Dt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.legendInactiveClass="legend-mouseover-inactive"}return s(pe,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(c){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(W.escapeString(c),"']"))}},{key:"isSeriesHidden",value:function(c){var d=this.getSeriesByName(c),m=parseInt(d.getAttribute("data:realIndex"),10);return{isHidden:d.classList.contains("apexcharts-series-collapsed"),realIndex:m}}},{key:"addCollapsedClassToSeries",value:function(c,d){var m=this.w;function v(b){for(var S=0;S<b.length;S++)b[S].index===d&&c.node.classList.add("apexcharts-series-collapsed")}v(m.globals.collapsedSeries),v(m.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(c){var d=this.isSeriesHidden(c);return this.ctx.legend.legendHelpers.toggleDataSeries(d.realIndex,d.isHidden),d.isHidden}},{key:"showSeries",value:function(c){var d=this.isSeriesHidden(c);d.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(d.realIndex,!0)}},{key:"hideSeries",value:function(c){var d=this.isSeriesHidden(c);d.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(d.realIndex,!1)}},{key:"resetSeries",value:function(){var c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=this.w,b=W.clone(v.globals.initialSeries);v.globals.previousPaths=[],m?(v.globals.collapsedSeries=[],v.globals.ancillaryCollapsedSeries=[],v.globals.collapsedSeriesIndices=[],v.globals.ancillaryCollapsedSeriesIndices=[]):b=this.emptyCollapsedSeries(b),v.config.series=b,c&&(d&&(v.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(b,v.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(c){for(var d=this.w,m=0;m<c.length;m++)d.globals.collapsedSeriesIndices.indexOf(m)>-1&&(c[m].data=[]);return c}},{key:"toggleSeriesOnHover",value:function(c,d){var m=this.w;d||(d=c.target);var v=m.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if(c.type==="mousemove"){var b=parseInt(d.getAttribute("rel"),10)-1,S=null,T=null;m.globals.axisCharts||m.config.chart.type==="radialBar"?m.globals.axisCharts?(S=m.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(b,"']")),T=m.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(b,"']"))):S=m.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"']")):S=m.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(b+1,"'] path"));for(var M=0;M<v.length;M++)v[M].classList.add(this.legendInactiveClass);S!==null&&(m.globals.axisCharts||S.parentNode.classList.remove(this.legendInactiveClass),S.classList.remove(this.legendInactiveClass),T!==null&&T.classList.remove(this.legendInactiveClass))}else if(c.type==="mouseout")for(var z=0;z<v.length;z++)v[z].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(c,d){var m=this,v=this.w,b=v.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),S=function(M){for(var z=0;z<b.length;z++)b[z].classList[M](m.legendInactiveClass)};if(c.type==="mousemove"){var T=parseInt(d.getAttribute("rel"),10)-1;S("add"),function(M){for(var z=0;z<b.length;z++){var $=parseInt(b[z].getAttribute("val"),10);$>=M.from&&$<=M.to&&b[z].classList.remove(m.legendInactiveClass)}}(v.config.plotOptions.heatmap.colorScale.ranges[T])}else c.type==="mouseout"&&S("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=this.w,v=0;if(m.config.series.length>1){for(var b=m.config.series.map(function(T,M){return T.data&&T.data.length>0&&m.globals.collapsedSeriesIndices.indexOf(M)===-1&&(!m.globals.comboCharts||d.length===0||d.length&&d.indexOf(m.config.series[M].type)>-1)?M:-1}),S=c==="asc"?0:b.length-1;c==="asc"?S<b.length:S>=0;c==="asc"?S++:S--)if(b[S]!==-1){v=b[S];break}}return v}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(c,d){return c.type==="bar"||c.type==="column"?d:-1}).filter(function(c){return c!==-1}):this.w.config.series.map(function(c,d){return d})}},{key:"getPreviousPaths",value:function(){var c=this.w;function d(S,T,M){for(var z=S[T].childNodes,$={type:M,paths:[],realIndex:S[T].getAttribute("data:realIndex")},H=0;H<z.length;H++)if(z[H].hasAttribute("pathTo")){var B=z[H].getAttribute("pathTo");$.paths.push({d:B})}c.globals.previousPaths.push($)}c.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(S){for(var T,M=(T=S,c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(T,"-series .apexcharts-series"))),z=0;z<M.length;z++)d(M,z,S)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var m=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(c.config.chart.type," .apexcharts-series"));if(m.length>0)for(var v=function(S){for(var T=c.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(c.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(S,"'] rect")),M=[],z=function(H){var B=function(re){return T[H].getAttribute(re)},ee={x:parseFloat(B("x")),y:parseFloat(B("y")),width:parseFloat(B("width")),height:parseFloat(B("height"))};M.push({rect:ee,color:T[H].getAttribute("color")})},$=0;$<T.length;$++)z($);c.globals.previousPaths.push(M)},b=0;b<m.length;b++)v(b);c.globals.axisCharts||(c.globals.previousPaths=c.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(c){var d=this.w,m=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(c,"-series .apexcharts-series"));if(m.length>0)for(var v=0;v<m.length;v++){for(var b=d.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(c,"-series .apexcharts-series[data\\:realIndex='").concat(v,"'] circle")),S=[],T=0;T<b.length;T++)S.push({x:b[T].getAttribute("cx"),y:b[T].getAttribute("cy"),r:b[T].getAttribute("r")});d.globals.previousPaths.push(S)}}},{key:"clearPreviousPaths",value:function(){var c=this.w;c.globals.previousPaths=[],c.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var c=this.w,d=c.config.noData,m=new de(this.ctx),v=c.globals.svgWidth/2,b=c.globals.svgHeight/2,S="middle";if(c.globals.noData=!0,c.globals.animationEnded=!0,d.align==="left"?(v=10,S="start"):d.align==="right"&&(v=c.globals.svgWidth-10,S="end"),d.verticalAlign==="top"?b=50:d.verticalAlign==="bottom"&&(b=c.globals.svgHeight-50),v+=d.offsetX,b=b+parseInt(d.style.fontSize,10)+2+d.offsetY,d.text!==void 0&&d.text!==""){var T=m.drawText({x:v,y:b,text:d.text,textAnchor:S,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,foreColor:d.style.color,opacity:1,class:"apexcharts-text-nodata"});c.globals.dom.Paper.add(T)}}},{key:"setNullSeriesToZeroValues",value:function(c){for(var d=this.w,m=0;m<c.length;m++)if(c[m].length===0)for(var v=0;v<c[d.globals.maxValsInArrayIndex].length;v++)c[m].push(0);return c}},{key:"hasAllSeriesEqualX",value:function(){for(var c=!0,d=this.w,m=this.filteredSeriesX(),v=0;v<m.length-1;v++)if(m[v][0]!==m[v+1][0]){c=!1;break}return d.globals.allSeriesHasEqualX=c,c}},{key:"filteredSeriesX",value:function(){var c=this.w.globals.seriesX.map(function(d){return d.length>0?d:[]});return c}}]),pe}(),ur=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Ae(this.ctx)}return s(pe,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var c=this.w.config.series.slice(),d=new Dt(this.ctx);if(this.activeSeriesIndex=d.getActiveConfigSeriesIndex(),c[this.activeSeriesIndex].data!==void 0&&c[this.activeSeriesIndex].data.length>0&&c[this.activeSeriesIndex].data[0]!==null&&c[this.activeSeriesIndex].data[0].x!==void 0&&c[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var c=this.w.config.series.slice(),d=new Dt(this.ctx);if(this.activeSeriesIndex=d.getActiveConfigSeriesIndex(),c[this.activeSeriesIndex].data!==void 0&&c[this.activeSeriesIndex].data.length>0&&c[this.activeSeriesIndex].data[0]!==void 0&&c[this.activeSeriesIndex].data[0]!==null&&c[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(c,d){for(var m=this.w.config,v=this.w.globals,b=m.chart.type==="boxPlot"||m.series[d].type==="boxPlot",S=0;S<c[d].data.length;S++)if(c[d].data[S][1]!==void 0&&(Array.isArray(c[d].data[S][1])&&c[d].data[S][1].length===4&&!b?this.twoDSeries.push(W.parseNumber(c[d].data[S][1][3])):c[d].data[S].length>=5?this.twoDSeries.push(W.parseNumber(c[d].data[S][4])):this.twoDSeries.push(W.parseNumber(c[d].data[S][1])),v.dataFormatXNumeric=!0),m.xaxis.type==="datetime"){var T=new Date(c[d].data[S][0]);T=new Date(T).getTime(),this.twoDSeriesX.push(T)}else this.twoDSeriesX.push(c[d].data[S][0]);for(var M=0;M<c[d].data.length;M++)c[d].data[M][2]!==void 0&&(this.threeDSeries.push(c[d].data[M][2]),v.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(c,d){var m=this.w.config,v=this.w.globals,b=new ft(this.ctx),S=d;v.collapsedSeriesIndices.indexOf(d)>-1&&(S=this.activeSeriesIndex);for(var T=0;T<c[d].data.length;T++)c[d].data[T].y!==void 0&&(Array.isArray(c[d].data[T].y)?this.twoDSeries.push(W.parseNumber(c[d].data[T].y[c[d].data[T].y.length-1])):this.twoDSeries.push(W.parseNumber(c[d].data[T].y))),c[d].data[T].goals!==void 0&&Array.isArray(c[d].data[T].goals)?(this.seriesGoals[d]===void 0&&(this.seriesGoals[d]=[]),this.seriesGoals[d].push(c[d].data[T].goals)):(this.seriesGoals[d]===void 0&&(this.seriesGoals[d]=[]),this.seriesGoals[d].push(null));for(var M=0;M<c[S].data.length;M++){var z=typeof c[S].data[M].x=="string",$=Array.isArray(c[S].data[M].x),H=!$&&!!b.isValidDate(c[S].data[M].x.toString());if(z||H)if(z||m.xaxis.convertedCatToNumeric){var B=v.isBarHorizontal&&v.isRangeData;m.xaxis.type!=="datetime"||B?(this.fallbackToCategory=!0,this.twoDSeriesX.push(c[S].data[M].x),isNaN(c[S].data[M].x)||this.w.config.xaxis.type==="category"||typeof c[S].data[M].x=="string"||(v.isXNumeric=!0)):this.twoDSeriesX.push(b.parseDate(c[S].data[M].x))}else m.xaxis.type==="datetime"?this.twoDSeriesX.push(b.parseDate(c[S].data[M].x.toString())):(v.dataFormatXNumeric=!0,v.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(c[S].data[M].x)));else $?(this.fallbackToCategory=!0,this.twoDSeriesX.push(c[S].data[M].x)):(v.isXNumeric=!0,v.dataFormatXNumeric=!0,this.twoDSeriesX.push(c[S].data[M].x))}if(c[d].data[0]&&c[d].data[0].z!==void 0){for(var ee=0;ee<c[d].data.length;ee++)this.threeDSeries.push(c[d].data[ee].z);v.isDataXYZ=!0}}},{key:"handleRangeData",value:function(c,d){var m=this.w.globals,v={};return this.isFormat2DArray()?v=this.handleRangeDataFormat("array",c,d):this.isFormatXY()&&(v=this.handleRangeDataFormat("xy",c,d)),m.seriesRangeStart.push(v.start),m.seriesRangeEnd.push(v.end),m.seriesRange.push(v.rangeUniques),m.seriesRange.forEach(function(b,S){b&&b.forEach(function(T,M){T.y.forEach(function(z,$){for(var H=0;H<T.y.length;H++)if($!==H){var B=z.y1,ee=z.y2,re=T.y[H].y1;B<=T.y[H].y2&&re<=ee&&(T.overlaps.indexOf(z.rangeName)<0&&T.overlaps.push(z.rangeName),T.overlaps.indexOf(T.y[H].rangeName)<0&&T.overlaps.push(T.y[H].rangeName))}})})}),v}},{key:"handleCandleStickBoxData",value:function(c,d){var m=this.w.globals,v={};return this.isFormat2DArray()?v=this.handleCandleStickBoxDataFormat("array",c,d):this.isFormatXY()&&(v=this.handleCandleStickBoxDataFormat("xy",c,d)),m.seriesCandleO[d]=v.o,m.seriesCandleH[d]=v.h,m.seriesCandleM[d]=v.m,m.seriesCandleL[d]=v.l,m.seriesCandleC[d]=v.c,v}},{key:"handleRangeDataFormat",value:function(c,d,m){var v=[],b=[],S=d[m].data.filter(function($,H,B){return H===B.findIndex(function(ee){return ee.x===$.x})}).map(function($,H){return{x:$.x,overlaps:[],y:[]}});if(c==="array")for(var T=0;T<d[m].data.length;T++)Array.isArray(d[m].data[T])?(v.push(d[m].data[T][1][0]),b.push(d[m].data[T][1][1])):(v.push(d[m].data[T]),b.push(d[m].data[T]));else if(c==="xy")for(var M=function($){var H=Array.isArray(d[m].data[$].y),B=W.randomId(),ee=d[m].data[$].x,re={y1:H?d[m].data[$].y[0]:d[m].data[$].y,y2:H?d[m].data[$].y[1]:d[m].data[$].y,rangeName:B};d[m].data[$].rangeName=B;var ce=S.findIndex(function(ye){return ye.x===ee});S[ce].y.push(re),v.push(re.y1),b.push(re.y2)},z=0;z<d[m].data.length;z++)M(z);return{start:v,end:b,rangeUniques:S}}},{key:"handleCandleStickBoxDataFormat",value:function(c,d,m){var v=this.w,b=v.config.chart.type==="boxPlot"||v.config.series[m].type==="boxPlot",S=[],T=[],M=[],z=[],$=[];if(c==="array")if(b&&d[m].data[0].length===6||!b&&d[m].data[0].length===5)for(var H=0;H<d[m].data.length;H++)S.push(d[m].data[H][1]),T.push(d[m].data[H][2]),b?(M.push(d[m].data[H][3]),z.push(d[m].data[H][4]),$.push(d[m].data[H][5])):(z.push(d[m].data[H][3]),$.push(d[m].data[H][4]));else for(var B=0;B<d[m].data.length;B++)Array.isArray(d[m].data[B][1])&&(S.push(d[m].data[B][1][0]),T.push(d[m].data[B][1][1]),b?(M.push(d[m].data[B][1][2]),z.push(d[m].data[B][1][3]),$.push(d[m].data[B][1][4])):(z.push(d[m].data[B][1][2]),$.push(d[m].data[B][1][3])));else if(c==="xy")for(var ee=0;ee<d[m].data.length;ee++)Array.isArray(d[m].data[ee].y)&&(S.push(d[m].data[ee].y[0]),T.push(d[m].data[ee].y[1]),b?(M.push(d[m].data[ee].y[2]),z.push(d[m].data[ee].y[3]),$.push(d[m].data[ee].y[4])):(z.push(d[m].data[ee].y[2]),$.push(d[m].data[ee].y[3])));return{o:S,h:T,m:M,l:z,c:$}}},{key:"parseDataAxisCharts",value:function(c){var d,m=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,b=this.w.config,S=this.w.globals,T=new ft(v),M=b.labels.length>0?b.labels.slice():b.xaxis.categories.slice();if(S.isRangeBar=b.chart.type==="rangeBar"&&S.isBarHorizontal,S.hasXaxisGroups=b.xaxis.type==="category"&&b.xaxis.group.groups.length>0,S.hasXaxisGroups&&(S.groups=b.xaxis.group.groups),S.hasSeriesGroups=(d=c[0])===null||d===void 0?void 0:d.group,S.hasSeriesGroups){var z=[],$=ae(new Set(c.map(function(re){return re.group})));c.forEach(function(re,ce){var ye=$.indexOf(re.group);z[ye]||(z[ye]=[]),z[ye].push(re.name)}),S.seriesGroups=z}for(var H=function(){for(var re=0;re<M.length;re++)if(typeof M[re]=="string"){if(!T.isValidDate(M[re]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");m.twoDSeriesX.push(T.parseDate(M[re]))}else m.twoDSeriesX.push(M[re])},B=0;B<c.length;B++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],c[B].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(b.chart.type!=="rangeBar"&&b.chart.type!=="rangeArea"&&c[B].type!=="rangeBar"&&c[B].type!=="rangeArea"||(S.isRangeData=!0,S.isComboCharts?c[B].type!=="rangeBar"&&c[B].type!=="rangeArea"||this.handleRangeData(c,B):b.chart.type!=="rangeBar"&&b.chart.type!=="rangeArea"||this.handleRangeData(c,B)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(c,B):this.isFormatXY()&&this.handleFormatXY(c,B),b.chart.type!=="candlestick"&&c[B].type!=="candlestick"&&b.chart.type!=="boxPlot"&&c[B].type!=="boxPlot"||this.handleCandleStickBoxData(c,B),S.series.push(this.twoDSeries),S.labels.push(this.twoDSeriesX),S.seriesX.push(this.twoDSeriesX),S.seriesGoals=this.seriesGoals,B!==this.activeSeriesIndex||this.fallbackToCategory||(S.isXNumeric=!0);else{b.xaxis.type==="datetime"?(S.isXNumeric=!0,H(),S.seriesX.push(this.twoDSeriesX)):b.xaxis.type==="numeric"&&(S.isXNumeric=!0,M.length>0&&(this.twoDSeriesX=M,S.seriesX.push(this.twoDSeriesX))),S.labels.push(this.twoDSeriesX);var ee=c[B].data.map(function(re){return W.parseNumber(re)});S.series.push(ee)}S.seriesZ.push(this.threeDSeries),c[B].name!==void 0?S.seriesNames.push(c[B].name):S.seriesNames.push("series-"+parseInt(B+1,10)),c[B].color!==void 0?S.seriesColors.push(c[B].color):S.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(c){var d=this.w.globals,m=this.w.config;d.series=c.slice(),d.seriesNames=m.labels.slice();for(var v=0;v<d.series.length;v++)d.seriesNames[v]===void 0&&d.seriesNames.push("series-"+(v+1));return this.w}},{key:"handleExternalLabelsData",value:function(c){var d=this.w.config,m=this.w.globals;d.xaxis.categories.length>0?m.labels=d.xaxis.categories:d.labels.length>0?m.labels=d.labels.slice():this.fallbackToCategory?(m.labels=m.labels[0],m.seriesRange.length&&(m.seriesRange.map(function(v){v.forEach(function(b){m.labels.indexOf(b.x)<0&&b.x&&m.labels.push(b.x)})}),m.labels=Array.from(new Set(m.labels.map(JSON.stringify)),JSON.parse)),d.xaxis.convertedCatToNumeric&&(new mt(d).convertCatToNumericXaxis(d,this.ctx,m.seriesX[0]),this._generateExternalLabels(c))):this._generateExternalLabels(c)}},{key:"_generateExternalLabels",value:function(c){var d=this.w.globals,m=this.w.config,v=[];if(d.axisCharts){if(d.series.length>0)if(this.isFormatXY())for(var b=m.series.map(function(H,B){return H.data.filter(function(ee,re,ce){return ce.findIndex(function(ye){return ye.x===ee.x})===re})}),S=b.reduce(function(H,B,ee,re){return re[H].length>B.length?H:ee},0),T=0;T<b[S].length;T++)v.push(T+1);else for(var M=0;M<d.series[d.maxValsInArrayIndex].length;M++)v.push(M+1);d.seriesX=[];for(var z=0;z<c.length;z++)d.seriesX.push(v);this.w.globals.isBarHorizontal||(d.isXNumeric=!0)}if(v.length===0){v=d.axisCharts?[]:d.series.map(function(H,B){return B+1});for(var $=0;$<c.length;$++)d.seriesX.push(v)}d.labels=v,m.xaxis.convertedCatToNumeric&&(d.categoryLabels=v.map(function(H){return m.xaxis.labels.formatter(H)})),d.noLabelsProvided=!0}},{key:"parseData",value:function(c){var d=this.w,m=d.config,v=d.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),v.axisCharts?(this.parseDataAxisCharts(c),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(c),m.chart.stacked){var b=new Dt(this.ctx);v.series=b.setNullSeriesToZeroValues(v.series)}this.coreUtils.getSeriesTotals(),v.axisCharts&&(v.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals()),this.coreUtils.getPercentSeries(),v.dataFormatXNumeric||v.isXNumeric&&(m.xaxis.type!=="numeric"||m.labels.length!==0||m.xaxis.categories.length!==0)||this.handleExternalLabelsData(c);for(var S=this.coreUtils.getCategoryLabels(v.labels),T=0;T<S.length;T++)if(Array.isArray(S[T])){v.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var c=this,d=this.w;d.globals.ignoreYAxisIndexes=d.globals.collapsedSeries.map(function(m,v){if(c.w.globals.isMultipleYAxis&&!d.config.chart.stacked)return m.index})}}]),pe}(),Tr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"getLabel",value:function(c,d,m,v){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",T=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],M=this.w,z=c[v]===void 0?"":c[v],$=z,H=M.globals.xLabelFormatter,B=M.config.xaxis.labels.formatter,ee=!1,re=new Pt(this.ctx),ce=z;T&&($=re.xLabelFormat(H,z,ce,{i:v,dateFormatter:new ft(this.ctx).formatDate,w:M}),B!==void 0&&($=B(z,c[v],{i:v,dateFormatter:new ft(this.ctx).formatDate,w:M})));var ye,_e;d.length>0?(ye=d[v].unit,_e=null,d.forEach(function(Q){Q.unit==="month"?_e="year":Q.unit==="day"?_e="month":Q.unit==="hour"?_e="day":Q.unit==="minute"&&(_e="hour")}),ee=_e===ye,m=d[v].position,$=d[v].value):M.config.xaxis.type==="datetime"&&B===void 0&&($=""),$===void 0&&($=""),$=Array.isArray($)?$:$.toString();var Ee=new de(this.ctx),O={};O=M.globals.rotateXLabels&&T?Ee.getTextRects($,parseInt(S,10),null,"rotate(".concat(M.config.xaxis.labels.rotate," 0 0)"),!1):Ee.getTextRects($,parseInt(S,10));var X=!M.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray($)&&($.indexOf("NaN")===0||$.toLowerCase().indexOf("invalid")===0||$.toLowerCase().indexOf("infinity")>=0||b.indexOf($)>=0&&X)&&($=""),{x:m,text:$,textRect:O,isBold:ee}}},{key:"checkLabelBasedOnTickamount",value:function(c,d,m){var v=this.w,b=v.config.xaxis.tickAmount;return b==="dataPoints"&&(b=Math.round(v.globals.gridWidth/120)),b>m||c%Math.round(m/(b+1))==0||(d.text=""),d}},{key:"checkForOverflowingLabels",value:function(c,d,m,v,b){var S=this.w;if(c===0&&S.globals.skipFirstTimelinelabel&&(d.text=""),c===m-1&&S.globals.skipLastTimelinelabel&&(d.text=""),S.config.xaxis.labels.hideOverlappingLabels&&v.length>0){var T=b[b.length-1];d.x<T.textRect.width/(S.globals.rotateXLabels?Math.abs(S.config.xaxis.labels.rotate)/12:1.01)+T.x&&(d.text="")}return d}},{key:"checkForReversedLabels",value:function(c,d){var m=this.w;return m.config.yaxis[c]&&m.config.yaxis[c].reversed&&d.reverse(),d}},{key:"isYAxisHidden",value:function(c){var d=this.w,m=new Ae(this.ctx);return!d.config.yaxis[c].show||!d.config.yaxis[c].showForNullSeries&&m.isSeriesNull(c)&&d.globals.collapsedSeriesIndices.indexOf(c)===-1}},{key:"getYAxisForeColor",value:function(c,d){var m=this.w;return Array.isArray(c)&&m.globals.yAxisScale[d]&&this.ctx.theme.pushExtraColors(c,m.globals.yAxisScale[d].result.length,!1),c}},{key:"drawYAxisTicks",value:function(c,d,m,v,b,S,T){var M=this.w,z=new de(this.ctx),$=M.globals.translateY;if(v.show&&d>0){M.config.yaxis[b].opposite===!0&&(c+=v.width);for(var H=d;H>=0;H--){var B=$+d/10+M.config.yaxis[b].labels.offsetY-1;M.globals.isBarHorizontal&&(B=S*H),M.config.chart.type==="heatmap"&&(B+=S/2);var ee=z.drawLine(c+m.offsetX-v.width+v.offsetX,B+v.offsetY,c+m.offsetX+v.offsetX,B+v.offsetY,v.color);T.add(ee),$+=S}}}}]),pe}(),fr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"scaleSvgNode",value:function(c,d){var m=parseFloat(c.getAttributeNS(null,"width")),v=parseFloat(c.getAttributeNS(null,"height"));c.setAttributeNS(null,"width",m*d),c.setAttributeNS(null,"height",v*d),c.setAttributeNS(null,"viewBox","0 0 "+m+" "+v)}},{key:"fixSvgStringForIe11",value:function(c){if(!W.isIE11())return c.replace(/&nbsp;/g,"&#160;");var d=0,m=c.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(v){return++d===2?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':v});return m=(m=m.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(c){c==null&&(c=1);var d=this.w.globals.dom.Paper.svg();if(c!==1){var m=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(m,c),d=new XMLSerializer().serializeToString(m)}return this.fixSvgStringForIe11(d)}},{key:"cleanup",value:function(){var c=this.w,d=c.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),m=c.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),v=c.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(v,function(b){b.setAttribute("width",0)}),d&&d[0]&&(d[0].setAttribute("x",-500),d[0].setAttribute("x1",-500),d[0].setAttribute("x2",-500)),m&&m[0]&&(m[0].setAttribute("y",-100),m[0].setAttribute("y1",-100),m[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var c=this.getSvgString(),d=new Blob([c],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(d)}},{key:"dataURI",value:function(c){var d=this;return new Promise(function(m){var v=d.w,b=c?c.scale||c.width/v.globals.svgWidth:1;d.cleanup();var S=document.createElement("canvas");S.width=v.globals.svgWidth*b,S.height=parseInt(v.globals.dom.elWrap.style.height,10)*b;var T=v.config.chart.background==="transparent"?"#fff":v.config.chart.background,M=S.getContext("2d");M.fillStyle=T,M.fillRect(0,0,S.width*b,S.height*b);var z=d.getSvgString(b);if(window.canvg&&W.isIE11()){var $=window.canvg.Canvg.fromString(M,z,{ignoreClear:!0,ignoreDimensions:!0});$.start();var H=S.msToBlob();$.stop(),m({blob:H})}else{var B="data:image/svg+xml,"+encodeURIComponent(z),ee=new Image;ee.crossOrigin="anonymous",ee.onload=function(){if(M.drawImage(ee,0,0),S.msToBlob){var re=S.msToBlob();m({blob:re})}else{var ce=S.toDataURL("image/png");m({imgURI:ce})}},ee.src=B}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var c=this;this.dataURI().then(function(d){var m=d.imgURI,v=d.blob;v?navigator.msSaveOrOpenBlob(v,c.w.globals.chartID+".png"):c.triggerDownload(m,c.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(c){var d=this,m=c.series,v=c.fileName,b=c.columnDelimiter,S=b===void 0?",":b,T=c.lineDelimiter,M=T===void 0?`
`:T,z=this.w;m||(m=z.config.series);var $=[],H=[],B="",ee=z.globals.series.map(function(O,X){return z.globals.collapsedSeriesIndices.indexOf(X)===-1?O:[]}),re=Math.max.apply(Math,ae(m.map(function(O){return O.data?O.data.length:0}))),ce=new ur(this.ctx),ye=new Tr(this.ctx),_e=function(O){var X="";if(z.globals.axisCharts){if(z.config.xaxis.type==="category"||z.config.xaxis.convertedCatToNumeric)if(z.globals.isBarHorizontal){var Q=z.globals.yLabelFormatters[0],xe=new Dt(d.ctx).getActiveConfigSeriesIndex();X=Q(z.globals.labels[O],{seriesIndex:xe,dataPointIndex:O,w:z})}else X=ye.getLabel(z.globals.labels,z.globals.timescaleLabels,0,O).text;z.config.xaxis.type==="datetime"&&(z.config.xaxis.categories.length?X=z.config.xaxis.categories[O]:z.config.labels.length&&(X=z.config.labels[O]))}else X=z.config.labels[O];return Array.isArray(X)&&(X=X.join(" ")),W.isNumber(X)?X:X.split(S).join("")},Ee=function(O,X){if($.length&&X===0&&H.push($.join(S)),O.data){O.data=O.data.length&&O.data||ae(Array(re)).map(function(){return""});for(var Q=0;Q<O.data.length;Q++){$=[];var xe=_e(Q);if(xe||(ce.isFormatXY()?xe=m[X].data[Q].x:ce.isFormat2DArray()&&(xe=m[X].data[Q]?m[X].data[Q][0]:"")),X===0){$.push((rt=xe,z.config.xaxis.type==="datetime"&&String(rt).length>=10?z.config.chart.toolbar.export.csv.dateFormatter(xe):W.isNumber(xe)?xe:xe.split(S).join("")));for(var ke=0;ke<z.globals.series.length;ke++){var Le;ce.isFormatXY()?$.push((Le=m[ke].data[Q])===null||Le===void 0?void 0:Le.y):$.push(ee[ke][Q])}}(z.config.chart.type==="candlestick"||O.type&&O.type==="candlestick")&&($.pop(),$.push(z.globals.seriesCandleO[X][Q]),$.push(z.globals.seriesCandleH[X][Q]),$.push(z.globals.seriesCandleL[X][Q]),$.push(z.globals.seriesCandleC[X][Q])),(z.config.chart.type==="boxPlot"||O.type&&O.type==="boxPlot")&&($.pop(),$.push(z.globals.seriesCandleO[X][Q]),$.push(z.globals.seriesCandleH[X][Q]),$.push(z.globals.seriesCandleM[X][Q]),$.push(z.globals.seriesCandleL[X][Q]),$.push(z.globals.seriesCandleC[X][Q])),z.config.chart.type==="rangeBar"&&($.pop(),$.push(z.globals.seriesRangeStart[X][Q]),$.push(z.globals.seriesRangeEnd[X][Q])),$.length&&H.push($.join(S))}}var rt};$.push(z.config.chart.toolbar.export.csv.headerCategory),z.config.chart.type==="boxPlot"?($.push("minimum"),$.push("q1"),$.push("median"),$.push("q3"),$.push("maximum")):z.config.chart.type==="candlestick"?($.push("open"),$.push("high"),$.push("low"),$.push("close")):z.config.chart.type==="rangeBar"?($.push("minimum"),$.push("maximum")):m.map(function(O,X){var Q=(O.name?O.name:"series-".concat(X))+"";z.globals.axisCharts&&$.push(Q.split(S).join("")?Q.split(S).join(""):"series-".concat(X))}),z.globals.axisCharts||($.push(z.config.chart.toolbar.export.csv.headerValue),H.push($.join(S))),m.map(function(O,X){z.globals.axisCharts?Ee(O,X):(($=[]).push(z.globals.labels[X].split(S).join("")),$.push(ee[X]),H.push($.join(S)))}),B+=H.join(M),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+B),v||z.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(c,d,m){var v=document.createElement("a");v.href=c,v.download=(d||this.w.globals.chartID)+m,document.body.appendChild(v),v.click(),document.body.removeChild(v)}}]),pe}(),Cr=function(){function pe(c,d){f(this,pe),this.ctx=c,this.elgrid=d,this.w=c.w;var m=this.w;this.axesUtils=new Tr(c),this.xaxisLabels=m.globals.labels.slice(),m.globals.timescaleLabels.length>0&&!m.globals.isBarHorizontal&&(this.xaxisLabels=m.globals.timescaleLabels.slice()),m.config.xaxis.overwriteCategories&&(this.xaxisLabels=m.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],m.config.xaxis.position==="top"?this.offY=0:this.offY=m.globals.gridHeight+1,this.offY=this.offY+m.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=m.config.chart.type==="bar"&&m.config.plotOptions.bar.horizontal,this.xaxisFontSize=m.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=m.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=m.config.xaxis.labels.style.colors,this.xaxisBorderWidth=m.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=m.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=m.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=m.config.xaxis.axisBorder.height,this.yaxis=m.config.yaxis[0]}return s(pe,[{key:"drawXaxis",value:function(){var c=this.w,d=new de(this.ctx),m=d.group({class:"apexcharts-xaxis",transform:"translate(".concat(c.config.xaxis.offsetX,", ").concat(c.config.xaxis.offsetY,")")}),v=d.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(c.globals.translateXAxisX,", ").concat(c.globals.translateXAxisY,")")});m.add(v);for(var b=[],S=0;S<this.xaxisLabels.length;S++)b.push(this.xaxisLabels[S]);if(this.drawXAxisLabelAndGroup(!0,d,v,b,c.globals.isXNumeric,function(re,ce){return ce}),c.globals.hasXaxisGroups){var T=c.globals.groups;b=[];for(var M=0;M<T.length;M++)b.push(T[M].title);var z={};c.config.xaxis.group.style&&(z.xaxisFontSize=c.config.xaxis.group.style.fontSize,z.xaxisFontFamily=c.config.xaxis.group.style.fontFamily,z.xaxisForeColors=c.config.xaxis.group.style.colors,z.fontWeight=c.config.xaxis.group.style.fontWeight,z.cssClass=c.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,d,v,b,!1,function(re,ce){return T[re].cols*ce},z)}if(c.config.xaxis.title.text!==void 0){var $=d.group({class:"apexcharts-xaxis-title"}),H=d.drawText({x:c.globals.gridWidth/2+c.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(c.config.xaxis.position==="bottom"?c.globals.xAxisLabelsHeight:-c.globals.xAxisLabelsHeight-10)+c.config.xaxis.title.offsetY,text:c.config.xaxis.title.text,textAnchor:"middle",fontSize:c.config.xaxis.title.style.fontSize,fontFamily:c.config.xaxis.title.style.fontFamily,fontWeight:c.config.xaxis.title.style.fontWeight,foreColor:c.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+c.config.xaxis.title.style.cssClass});$.add(H),m.add($)}if(c.config.xaxis.axisBorder.show){var B=c.globals.barPadForNumericAxis,ee=d.drawLine(c.globals.padHorizontal+c.config.xaxis.axisBorder.offsetX-B,this.offY,this.xaxisBorderWidth+B,this.offY,c.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&c.config.grid.show?this.elgrid.elGridBorders.add(ee):m.add(ee)}return m}},{key:"drawXAxisLabelAndGroup",value:function(c,d,m,v,b,S){var T,M=this,z=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},$=[],H=[],B=this.w,ee=z.xaxisFontSize||this.xaxisFontSize,re=z.xaxisFontFamily||this.xaxisFontFamily,ce=z.xaxisForeColors||this.xaxisForeColors,ye=z.fontWeight||B.config.xaxis.labels.style.fontWeight,_e=z.cssClass||B.config.xaxis.labels.style.cssClass,Ee=B.globals.padHorizontal,O=v.length,X=B.config.xaxis.type==="category"?B.globals.dataPoints:O;if(X===0&&O>X&&(X=O),b){var Q=X>1?X-1:X;T=B.globals.gridWidth/Math.min(Q,O-1),Ee=Ee+S(0,T)/2+B.config.xaxis.labels.offsetX}else T=B.globals.gridWidth/X,Ee=Ee+S(0,T)+B.config.xaxis.labels.offsetX;for(var xe=function(Le){var rt=Ee-S(Le,T)/2+B.config.xaxis.labels.offsetX;Le===0&&O===1&&T/2===Ee&&X===1&&(rt=B.globals.gridWidth/2);var Ze=M.axesUtils.getLabel(v,B.globals.timescaleLabels,rt,Le,$,ee,c),Et=28;if(B.globals.rotateXLabels&&c&&(Et=22),B.config.xaxis.title.text&&B.config.xaxis.position==="top"&&(Et+=parseFloat(B.config.xaxis.title.style.fontSize)+2),c||(Et=Et+parseFloat(ee)+(B.globals.xAxisLabelsHeight-B.globals.xAxisGroupLabelsHeight)+(B.globals.rotateXLabels?10:0)),Ze=B.config.xaxis.tickAmount!==void 0&&B.config.xaxis.tickAmount!=="dataPoints"&&B.config.xaxis.type!=="datetime"?M.axesUtils.checkLabelBasedOnTickamount(Le,Ze,O):M.axesUtils.checkForOverflowingLabels(Le,Ze,O,$,H),B.config.xaxis.labels.show){var Bt=d.drawText({x:Ze.x,y:M.offY+B.config.xaxis.labels.offsetY+Et-(B.config.xaxis.position==="top"?B.globals.xAxisHeight+B.config.xaxis.axisTicks.height-2:0),text:Ze.text,textAnchor:"middle",fontWeight:Ze.isBold?600:ye,fontSize:ee,fontFamily:re,foreColor:Array.isArray(ce)?c&&B.config.xaxis.convertedCatToNumeric?ce[B.globals.minX+Le-1]:ce[Le]:ce,isPlainText:!1,cssClass:(c?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+_e});if(m.add(Bt),Bt.on("click",function(hr){if(typeof B.config.chart.events.xAxisLabelClick=="function"){var ar=Object.assign({},B,{labelIndex:Le});B.config.chart.events.xAxisLabelClick(hr,M.ctx,ar)}}),c){var Nt=document.createElementNS(B.globals.SVGNS,"title");Nt.textContent=Array.isArray(Ze.text)?Ze.text.join(" "):Ze.text,Bt.node.appendChild(Nt),Ze.text!==""&&($.push(Ze.text),H.push(Ze))}}Le<O-1&&(Ee+=S(Le+1,T))},ke=0;ke<=O-1;ke++)xe(ke)}},{key:"drawXaxisInversed",value:function(c){var d,m,v=this,b=this.w,S=new de(this.ctx),T=b.config.yaxis[0].opposite?b.globals.translateYAxisX[c]:0,M=S.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:c}),z=S.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+T+", 0)"});M.add(z);var $=[];if(b.config.yaxis[c].show)for(var H=0;H<this.xaxisLabels.length;H++)$.push(this.xaxisLabels[H]);d=b.globals.gridHeight/$.length,m=-d/2.2;var B=b.globals.yLabelFormatters[0],ee=b.config.yaxis[0].labels;if(ee.show)for(var re=function(Q){var xe=$[Q]===void 0?"":$[Q];xe=B(xe,{seriesIndex:c,dataPointIndex:Q,w:b});var ke=v.axesUtils.getYAxisForeColor(ee.style.colors,c),Le=0;Array.isArray(xe)&&(Le=xe.length/2*parseInt(ee.style.fontSize,10));var rt=ee.offsetX-15,Ze="end";v.yaxis.opposite&&(Ze="start"),b.config.yaxis[0].labels.align==="left"?(rt=ee.offsetX,Ze="start"):b.config.yaxis[0].labels.align==="center"?(rt=ee.offsetX,Ze="middle"):b.config.yaxis[0].labels.align==="right"&&(Ze="end");var Et=S.drawText({x:rt,y:m+d+ee.offsetY-Le,text:xe,textAnchor:Ze,foreColor:Array.isArray(ke)?ke[Q]:ke,fontSize:ee.style.fontSize,fontFamily:ee.style.fontFamily,fontWeight:ee.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+ee.style.cssClass,maxWidth:ee.maxWidth});z.add(Et),Et.on("click",function(hr){if(typeof b.config.chart.events.xAxisLabelClick=="function"){var ar=Object.assign({},b,{labelIndex:Q});b.config.chart.events.xAxisLabelClick(hr,v.ctx,ar)}});var Bt=document.createElementNS(b.globals.SVGNS,"title");if(Bt.textContent=Array.isArray(xe)?xe.join(" "):xe,Et.node.appendChild(Bt),b.config.yaxis[c].labels.rotate!==0){var Nt=S.rotateAroundCenter(Et.node);Et.node.setAttribute("transform","rotate(".concat(b.config.yaxis[c].labels.rotate," 0 ").concat(Nt.y,")"))}m+=d},ce=0;ce<=$.length-1;ce++)re(ce);if(b.config.yaxis[0].title.text!==void 0){var ye=S.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+T+", 0)"}),_e=S.drawText({x:b.config.yaxis[0].title.offsetX,y:b.globals.gridHeight/2+b.config.yaxis[0].title.offsetY,text:b.config.yaxis[0].title.text,textAnchor:"middle",foreColor:b.config.yaxis[0].title.style.color,fontSize:b.config.yaxis[0].title.style.fontSize,fontWeight:b.config.yaxis[0].title.style.fontWeight,fontFamily:b.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+b.config.yaxis[0].title.style.cssClass});ye.add(_e),M.add(ye)}var Ee=0;this.isCategoryBarHorizontal&&b.config.yaxis[0].opposite&&(Ee=b.globals.gridWidth);var O=b.config.xaxis.axisBorder;if(O.show){var X=S.drawLine(b.globals.padHorizontal+O.offsetX+Ee,1+O.offsetY,b.globals.padHorizontal+O.offsetX+Ee,b.globals.gridHeight+O.offsetY,O.color,0);this.elgrid&&this.elgrid.elGridBorders&&b.config.grid.show?this.elgrid.elGridBorders.add(X):M.add(X)}return b.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(Ee,$.length,b.config.yaxis[0].axisBorder,b.config.yaxis[0].axisTicks,0,d,M),M}},{key:"drawXaxisTicks",value:function(c,d,m){var v=this.w,b=c;if(!(c<0||c-2>v.globals.gridWidth)){var S=this.offY+v.config.xaxis.axisTicks.offsetY;if(d=d+S+v.config.xaxis.axisTicks.height,v.config.xaxis.position==="top"&&(d=S-v.config.xaxis.axisTicks.height),v.config.xaxis.axisTicks.show){var T=new de(this.ctx).drawLine(c+v.config.xaxis.axisTicks.offsetX,S+v.config.xaxis.offsetY,b+v.config.xaxis.axisTicks.offsetX,d+v.config.xaxis.offsetY,v.config.xaxis.axisTicks.color);m.add(T),T.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var c=this.w,d=[],m=this.xaxisLabels.length,v=c.globals.padHorizontal;if(c.globals.timescaleLabels.length>0)for(var b=0;b<m;b++)v=this.xaxisLabels[b].position,d.push(v);else for(var S=m,T=0;T<S;T++){var M=S;c.globals.isXNumeric&&c.config.chart.type!=="bar"&&(M-=1),v+=c.globals.gridWidth/M,d.push(v)}return d}},{key:"xAxisLabelCorrections",value:function(){var c=this.w,d=new de(this.ctx),m=c.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),v=c.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),b=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),S=c.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(c.globals.rotateXLabels||c.config.xaxis.labels.rotateAlways)for(var T=0;T<v.length;T++){var M=d.rotateAroundCenter(v[T]);M.y=M.y-1,M.x=M.x+1,v[T].setAttribute("transform","rotate(".concat(c.config.xaxis.labels.rotate," ").concat(M.x," ").concat(M.y,")")),v[T].setAttribute("text-anchor","end"),m.setAttribute("transform","translate(0, ".concat(-10,")"));var z=v[T].childNodes;c.config.xaxis.labels.trim&&Array.prototype.forEach.call(z,function(ee){d.placeTextWithEllipsis(ee,ee.textContent,c.globals.xAxisLabelsHeight-(c.config.legend.position==="bottom"?20:10))})}else(function(){for(var ee=c.globals.gridWidth/(c.globals.labels.length+1),re=0;re<v.length;re++){var ce=v[re].childNodes;c.config.xaxis.labels.trim&&c.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(ce,function(ye){d.placeTextWithEllipsis(ye,ye.textContent,ee)})}})();if(b.length>0){var $=b[b.length-1].getBBox(),H=b[0].getBBox();$.x<-20&&b[b.length-1].parentNode.removeChild(b[b.length-1]),H.x+H.width>c.globals.gridWidth&&!c.globals.isBarHorizontal&&b[0].parentNode.removeChild(b[0]);for(var B=0;B<S.length;B++)d.placeTextWithEllipsis(S[B],S[B].textContent,c.config.yaxis[0].labels.maxWidth-(c.config.yaxis[0].title.text?2*parseFloat(c.config.yaxis[0].title.style.fontSize):0)-15)}}}]),pe}(),mr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w;var d=this.w;this.xaxisLabels=d.globals.labels.slice(),this.axesUtils=new Tr(c),this.isRangeBar=d.globals.seriesRange.length&&d.globals.isBarHorizontal,d.globals.timescaleLabels.length>0&&(this.xaxisLabels=d.globals.timescaleLabels.slice())}return s(pe,[{key:"drawGridArea",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,d=this.w,m=new de(this.ctx);c===null&&(c=m.group({class:"apexcharts-grid"}));var v=m.drawLine(d.globals.padHorizontal,1,d.globals.padHorizontal,d.globals.gridHeight,"transparent"),b=m.drawLine(d.globals.padHorizontal,d.globals.gridHeight,d.globals.gridWidth,d.globals.gridHeight,"transparent");return c.add(b),c.add(v),c}},{key:"drawGrid",value:function(){var c=null;return this.w.globals.axisCharts&&(c=this.renderGrid(),this.drawGridArea(c.el)),c}},{key:"createGridMask",value:function(){var c=this.w,d=c.globals,m=new de(this.ctx),v=Array.isArray(c.config.stroke.width)?0:c.config.stroke.width;if(Array.isArray(c.config.stroke.width)){var b=0;c.config.stroke.width.forEach(function(H){b=Math.max(b,H)}),v=b}d.dom.elGridRectMask=document.createElementNS(d.SVGNS,"clipPath"),d.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(d.cuid)),d.dom.elGridRectMarkerMask=document.createElementNS(d.SVGNS,"clipPath"),d.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(d.cuid)),d.dom.elForecastMask=document.createElementNS(d.SVGNS,"clipPath"),d.dom.elForecastMask.setAttribute("id","forecastMask".concat(d.cuid)),d.dom.elNonForecastMask=document.createElementNS(d.SVGNS,"clipPath"),d.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(d.cuid));var S=c.config.chart.type,T=0,M=0;(S==="bar"||S==="rangeBar"||S==="candlestick"||S==="boxPlot"||c.globals.comboBarCount>0)&&c.globals.isXNumeric&&!c.globals.isBarHorizontal&&(T=c.config.grid.padding.left,M=c.config.grid.padding.right,d.barPadForNumericAxis>T&&(T=d.barPadForNumericAxis,M=d.barPadForNumericAxis)),d.dom.elGridRect=m.drawRect(-v-T-2,2*-v-2,d.gridWidth+v+M+T+4,d.gridHeight+4*v+4,0,"#fff");var z=c.globals.markers.largestSize+1;d.dom.elGridRectMarker=m.drawRect(2*-z,2*-z,d.gridWidth+4*z,d.gridHeight+4*z,0,"#fff"),d.dom.elGridRectMask.appendChild(d.dom.elGridRect.node),d.dom.elGridRectMarkerMask.appendChild(d.dom.elGridRectMarker.node);var $=d.dom.baseEl.querySelector("defs");$.appendChild(d.dom.elGridRectMask),$.appendChild(d.dom.elForecastMask),$.appendChild(d.dom.elNonForecastMask),$.appendChild(d.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(c){var d=c.i,m=c.x1,v=c.y1,b=c.x2,S=c.y2,T=c.xCount,M=c.parent,z=this.w;if(!(d===0&&z.globals.skipFirstTimelinelabel||d===T-1&&z.globals.skipLastTimelinelabel&&!z.config.xaxis.labels.formatter||z.config.chart.type==="radar")){z.config.grid.xaxis.lines.show&&this._drawGridLine({i:d,x1:m,y1:v,x2:b,y2:S,xCount:T,parent:M});var $=0;if(z.globals.hasXaxisGroups&&z.config.xaxis.tickPlacement==="between"){var H=z.globals.groups;if(H){for(var B=0,ee=0;B<d&&ee<H.length;ee++)B+=H[ee].cols;B===d&&($=.6*z.globals.xAxisLabelsHeight)}}new Cr(this.ctx).drawXaxisTicks(m,$,z.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(c){var d=c.i,m=c.x1,v=c.y1,b=c.x2,S=c.y2,T=c.xCount,M=c.parent,z=this.w,$=!1,H=M.node.classList.contains("apexcharts-gridlines-horizontal"),B=z.config.grid.strokeDashArray,ee=z.globals.barPadForNumericAxis;(v===0&&S===0||m===0&&b===0)&&($=!0),v===z.globals.gridHeight&&S===z.globals.gridHeight&&($=!0),!z.globals.isBarHorizontal||d!==0&&d!==T-1||($=!0);var re=new de(this).drawLine(m-(H?ee:0),v,b+(H?ee:0),S,z.config.grid.borderColor,B);re.node.classList.add("apexcharts-gridline"),$&&z.config.grid.show?this.elGridBorders.add(re):M.add(re)}},{key:"_drawGridBandRect",value:function(c){var d=c.c,m=c.x1,v=c.y1,b=c.x2,S=c.y2,T=c.type,M=this.w,z=new de(this.ctx),$=M.globals.barPadForNumericAxis;if(T!=="column"||M.config.xaxis.type!=="datetime"){var H=M.config.grid[T].colors[d],B=z.drawRect(m-(T==="row"?$:0),v,b+(T==="row"?2*$:0),S,0,H,M.config.grid[T].opacity);this.elg.add(B),B.attr("clip-path","url(#gridRectMask".concat(M.globals.cuid,")")),B.node.classList.add("apexcharts-grid-".concat(T))}}},{key:"_drawXYLines",value:function(c){var d=this,m=c.xCount,v=c.tickAmount,b=this.w;if(b.config.grid.xaxis.lines.show||b.config.xaxis.axisTicks.show){var S,T=b.globals.padHorizontal,M=b.globals.gridHeight;b.globals.timescaleLabels.length?function(re){for(var ce=re.xC,ye=re.x1,_e=re.y1,Ee=re.x2,O=re.y2,X=0;X<ce;X++)ye=d.xaxisLabels[X].position,Ee=d.xaxisLabels[X].position,d._drawGridLines({i:X,x1:ye,y1:_e,x2:Ee,y2:O,xCount:m,parent:d.elgridLinesV})}({xC:m,x1:T,y1:0,x2:S,y2:M}):(b.globals.isXNumeric&&(m=b.globals.xAxisScale.result.length),function(re){for(var ce=re.xC,ye=re.x1,_e=re.y1,Ee=re.x2,O=re.y2,X=0;X<ce+(b.globals.isXNumeric?0:1);X++)X===0&&ce===1&&b.globals.dataPoints===1&&(Ee=ye=b.globals.gridWidth/2),d._drawGridLines({i:X,x1:ye,y1:_e,x2:Ee,y2:O,xCount:m,parent:d.elgridLinesV}),Ee=ye+=b.globals.gridWidth/(b.globals.isXNumeric?ce-1:ce)}({xC:m,x1:T,y1:0,x2:S,y2:M}))}if(b.config.grid.yaxis.lines.show){var z=0,$=0,H=b.globals.gridWidth,B=v+1;this.isRangeBar&&(B=b.globals.labels.length);for(var ee=0;ee<B+(this.isRangeBar?1:0);ee++)this._drawGridLine({i:ee,xCount:B+(this.isRangeBar?1:0),x1:0,y1:z,x2:H,y2:$,parent:this.elgridLinesH}),$=z+=b.globals.gridHeight/(this.isRangeBar?B:v)}}},{key:"_drawInvertedXYLines",value:function(c){var d=c.xCount,m=this.w;if(m.config.grid.xaxis.lines.show||m.config.xaxis.axisTicks.show)for(var v,b=m.globals.padHorizontal,S=m.globals.gridHeight,T=0;T<d+1;T++)m.config.grid.xaxis.lines.show&&this._drawGridLine({i:T,xCount:d+1,x1:b,y1:0,x2:v,y2:S,parent:this.elgridLinesV}),new Cr(this.ctx).drawXaxisTicks(b,0,m.globals.dom.elGraphical),v=b=b+m.globals.gridWidth/d+.3;if(m.config.grid.yaxis.lines.show)for(var M=0,z=0,$=m.globals.gridWidth,H=0;H<m.globals.dataPoints+1;H++)this._drawGridLine({i:H,xCount:m.globals.dataPoints+1,x1:0,y1:M,x2:$,y2:z,parent:this.elgridLinesH}),z=M+=m.globals.gridHeight/m.globals.dataPoints}},{key:"renderGrid",value:function(){var c=this.w,d=new de(this.ctx);this.elg=d.group({class:"apexcharts-grid"}),this.elgridLinesH=d.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=d.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=d.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),c.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var m,v=c.globals.yAxisScale.length?c.globals.yAxisScale[0].result.length-1:5,b=0;b<c.globals.series.length&&(c.globals.yAxisScale[b]!==void 0&&(v=c.globals.yAxisScale[b].result.length-1),!(v>2));b++);return!c.globals.isBarHorizontal||this.isRangeBar?(m=this.xaxisLabels.length,this.isRangeBar&&(m--,v=c.globals.labels.length,c.config.xaxis.tickAmount&&c.config.xaxis.labels.formatter&&(m=c.config.xaxis.tickAmount)),this._drawXYLines({xCount:m,tickAmount:v})):(m=v,v=c.globals.xTickAmount,this._drawInvertedXYLines({xCount:m,tickAmount:v})),this.drawGridBands(m,v),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:c.globals.gridWidth/m}}},{key:"drawGridBands",value:function(c,d){var m=this.w;if(m.config.grid.row.colors!==void 0&&m.config.grid.row.colors.length>0)for(var v=0,b=m.globals.gridHeight/d,S=m.globals.gridWidth,T=0,M=0;T<d;T++,M++)M>=m.config.grid.row.colors.length&&(M=0),this._drawGridBandRect({c:M,x1:0,y1:v,x2:S,y2:b,type:"row"}),v+=m.globals.gridHeight/d;if(m.config.grid.column.colors!==void 0&&m.config.grid.column.colors.length>0)for(var z=m.globals.isBarHorizontal||m.config.xaxis.tickPlacement!=="on"||m.config.xaxis.type!=="category"&&!m.config.xaxis.convertedCatToNumeric?c:c-1,$=m.globals.padHorizontal,H=m.globals.padHorizontal+m.globals.gridWidth/z,B=m.globals.gridHeight,ee=0,re=0;ee<c;ee++,re++)re>=m.config.grid.column.colors.length&&(re=0),this._drawGridBandRect({c:re,x1:$,y1:0,x2:H,y2:B,type:"column"}),$+=m.globals.gridWidth/z}}]),pe}(),nn=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"niceScale",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,b=arguments.length>4?arguments[4]:void 0,S=this.w,T=Math.abs(d-c);if((m=this._adjustTicksForSmallRange(m,v,T))==="dataPoints"&&(m=S.globals.dataPoints-1),c===Number.MIN_VALUE&&d===0||!W.isNumber(c)&&!W.isNumber(d)||c===Number.MIN_VALUE&&d===-Number.MAX_VALUE)return c=0,d=m,this.linearScale(c,d,m);c>d?(console.warn("axis.min cannot be greater than axis.max"),d=c+.1):c===d&&(c=c===0?0:c-.5,d=d===0?2:d+.5);var M=[];T<1&&b&&(S.config.chart.type==="candlestick"||S.config.series[v].type==="candlestick"||S.config.chart.type==="boxPlot"||S.config.series[v].type==="boxPlot"||S.globals.isRangeData)&&(d*=1.01);var z=m+1;z<2?z=2:z>2&&(z-=2);var $=T/z,H=Math.floor(W.log10($)),B=Math.pow(10,H),ee=Math.round($/B);ee<1&&(ee=1);var re=ee*B,ce=re*Math.floor(c/re),ye=re*Math.ceil(d/re),_e=ce;if(b&&T>2){for(;M.push(W.stripNumber(_e,7)),!((_e+=re)>ye););return{result:M,niceMin:M[0],niceMax:M[M.length-1]}}var Ee=c;(M=[]).push(W.stripNumber(Ee,7));for(var O=Math.abs(d-c)/m,X=0;X<=m;X++)Ee+=O,M.push(Ee);return M[M.length-2]>=d&&M.pop(),{result:M,niceMin:M[0],niceMax:M[M.length-1]}}},{key:"linearScale",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,v=arguments.length>3?arguments[3]:void 0,b=Math.abs(d-c);(m=this._adjustTicksForSmallRange(m,v,b))==="dataPoints"&&(m=this.w.globals.dataPoints-1);var S=b/m;m===Number.MAX_VALUE&&(m=10,S=1);for(var T=[],M=c;m>=0;)T.push(M),M+=S,m-=1;return{result:T,niceMin:T[0],niceMax:T[T.length-1]}}},{key:"logarithmicScaleNice",value:function(c,d,m){d<=0&&(d=Math.max(c,m)),c<=0&&(c=Math.min(d,m));for(var v=[],b=Math.ceil(Math.log(d)/Math.log(m)+1),S=Math.floor(Math.log(c)/Math.log(m));S<b;S++)v.push(Math.pow(m,S));return{result:v,niceMin:v[0],niceMax:v[v.length-1]}}},{key:"logarithmicScale",value:function(c,d,m){d<=0&&(d=Math.max(c,m)),c<=0&&(c=Math.min(d,m));for(var v=[],b=Math.log(d)/Math.log(m),S=Math.log(c)/Math.log(m),T=b-S,M=Math.round(T),z=T/M,$=0,H=S;$<M;$++,H+=z)v.push(Math.pow(m,H));return v.push(Math.pow(m,b)),{result:v,niceMin:c,niceMax:d}}},{key:"_adjustTicksForSmallRange",value:function(c,d,m){var v=c;if(d!==void 0&&this.w.config.yaxis[d].labels.formatter&&this.w.config.yaxis[d].tickAmount===void 0){var b=Number(this.w.config.yaxis[d].labels.formatter(1));W.isNumber(b)&&this.w.globals.yValueDecimal===0&&(v=Math.ceil(m))}return v<c?v:c}},{key:"setYScaleForIndex",value:function(c,d,m){var v=this.w.globals,b=this.w.config,S=v.isBarHorizontal?b.xaxis:b.yaxis[c];v.yAxisScale[c]===void 0&&(v.yAxisScale[c]=[]);var T=Math.abs(m-d);if(S.logarithmic&&T<=5&&(v.invalidLogScale=!0),S.logarithmic&&T>5)v.allSeriesCollapsed=!1,v.yAxisScale[c]=this.logarithmicScale(d,m,S.logBase),v.yAxisScale[c]=S.forceNiceScale?this.logarithmicScaleNice(d,m,S.logBase):this.logarithmicScale(d,m,S.logBase);else if(m!==-Number.MAX_VALUE&&W.isNumber(m))if(v.allSeriesCollapsed=!1,S.min===void 0&&S.max===void 0||S.forceNiceScale){var M=b.yaxis[c].max===void 0&&b.yaxis[c].min===void 0||b.yaxis[c].forceNiceScale;v.yAxisScale[c]=this.niceScale(d,m,S.tickAmount?S.tickAmount:T<5&&T>1?T+1:5,c,M)}else v.yAxisScale[c]=this.linearScale(d,m,S.tickAmount,c);else v.yAxisScale[c]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(c,d){var m=this.w,v=m.globals,b=m.config.xaxis,S=Math.abs(d-c);return d!==-Number.MAX_VALUE&&W.isNumber(d)?v.xAxisScale=this.linearScale(c,d,b.tickAmount?b.tickAmount:S<5&&S>1?S+1:5,0):v.xAxisScale=this.linearScale(0,5,5),v.xAxisScale}},{key:"setMultipleYScales",value:function(){var c=this,d=this.w.globals,m=this.w.config,v=d.minYArr.concat([]),b=d.maxYArr.concat([]),S=[];m.yaxis.forEach(function(T,M){var z=M;m.series.forEach(function(B,ee){B.name===T.seriesName&&(z=ee,M!==ee?S.push({index:ee,similarIndex:M,alreadyExists:!0}):S.push({index:ee}))});var $=v[z],H=b[z];c.setYScaleForIndex(M,$,H)}),this.sameScaleInMultipleAxes(v,b,S)}},{key:"sameScaleInMultipleAxes",value:function(c,d,m){var v=this,b=this.w.config,S=this.w.globals,T=[];m.forEach(function(ce){ce.alreadyExists&&(T[ce.index]===void 0&&(T[ce.index]=[]),T[ce.index].push(ce.index),T[ce.index].push(ce.similarIndex))}),S.yAxisSameScaleIndices=T,T.forEach(function(ce,ye){T.forEach(function(_e,Ee){var O,X;ye!==Ee&&(O=ce,X=_e,O.filter(function(Q){return X.indexOf(Q)!==-1})).length>0&&(T[ye]=T[ye].concat(T[Ee]))})});var M=T.map(function(ce){return ce.filter(function(ye,_e){return ce.indexOf(ye)===_e})}).map(function(ce){return ce.sort()});T=T.filter(function(ce){return!!ce});var z=M.slice(),$=z.map(function(ce){return JSON.stringify(ce)});z=z.filter(function(ce,ye){return $.indexOf(JSON.stringify(ce))===ye});var H=[],B=[];c.forEach(function(ce,ye){z.forEach(function(_e,Ee){_e.indexOf(ye)>-1&&(H[Ee]===void 0&&(H[Ee]=[],B[Ee]=[]),H[Ee].push({key:ye,value:ce}),B[Ee].push({key:ye,value:d[ye]}))})});var ee=Array.apply(null,Array(z.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),re=Array.apply(null,Array(z.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);H.forEach(function(ce,ye){ce.forEach(function(_e,Ee){ee[ye]=Math.min(_e.value,ee[ye])})}),B.forEach(function(ce,ye){ce.forEach(function(_e,Ee){re[ye]=Math.max(_e.value,re[ye])})}),c.forEach(function(ce,ye){B.forEach(function(_e,Ee){var O=ee[Ee],X=re[Ee];b.chart.stacked&&(X=0,_e.forEach(function(Q,xe){Q.value!==-Number.MAX_VALUE&&(X+=Q.value),O!==Number.MIN_VALUE&&(O+=H[Ee][xe].value)})),_e.forEach(function(Q,xe){_e[xe].key===ye&&(b.yaxis[ye].min!==void 0&&(O=typeof b.yaxis[ye].min=="function"?b.yaxis[ye].min(S.minY):b.yaxis[ye].min),b.yaxis[ye].max!==void 0&&(X=typeof b.yaxis[ye].max=="function"?b.yaxis[ye].max(S.maxY):b.yaxis[ye].max),v.setYScaleForIndex(ye,O,X))})})})}},{key:"autoScaleY",value:function(c,d,m){c||(c=this);var v=c.w;if(v.globals.isMultipleYAxis||v.globals.collapsedSeries.length)return console.warn("autoScaleYaxis not supported in a multi-yaxis chart."),d;var b=v.globals.seriesX[0],S=v.config.chart.stacked;return d.forEach(function(T,M){for(var z=0,$=0;$<b.length;$++)if(b[$]>=m.xaxis.min){z=$;break}var H,B,ee=v.globals.minYArr[M],re=v.globals.maxYArr[M],ce=v.globals.stackedSeriesTotals;v.globals.series.forEach(function(ye,_e){var Ee=ye[z];S?(Ee=ce[z],H=B=Ee,ce.forEach(function(O,X){b[X]<=m.xaxis.max&&b[X]>=m.xaxis.min&&(O>B&&O!==null&&(B=O),ye[X]<H&&ye[X]!==null&&(H=ye[X]))})):(H=B=Ee,ye.forEach(function(O,X){if(b[X]<=m.xaxis.max&&b[X]>=m.xaxis.min){var Q=O,xe=O;v.globals.series.forEach(function(ke,Le){O!==null&&(Q=Math.min(ke[X],Q),xe=Math.max(ke[X],xe))}),xe>B&&xe!==null&&(B=xe),Q<H&&Q!==null&&(H=Q)}})),H===void 0&&B===void 0&&(H=ee,B=re),B*=B<0?.9:1.1,(H*=H<0?1.1:.9)===0&&B===0&&(H=-1,B=1),B<0&&B<re&&(B=re),H<0&&H>ee&&(H=ee),d.length>1?(d[_e].min=T.min===void 0?H:T.min,d[_e].max=T.max===void 0?B:T.max):(d[0].min=T.min===void 0?H:T.min,d[0].max=T.max===void 0?B:T.max)})}),d}}]),pe}(),Br=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.scales=new nn(c)}return s(pe,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,b=this.w.config,S=this.w.globals,T=-Number.MAX_VALUE,M=Number.MIN_VALUE;v===null&&(v=c+1);var z=S.series,$=z,H=z;b.chart.type==="candlestick"?($=S.seriesCandleL,H=S.seriesCandleH):b.chart.type==="boxPlot"?($=S.seriesCandleO,H=S.seriesCandleC):S.isRangeData&&($=S.seriesRangeStart,H=S.seriesRangeEnd);for(var B=c;B<v;B++){S.dataPoints=Math.max(S.dataPoints,z[B].length),S.categoryLabels.length&&(S.dataPoints=S.categoryLabels.filter(function(ce){return ce!==void 0}).length),S.labels.length&&b.xaxis.type!=="datetime"&&S.series.reduce(function(ce,ye){return ce+ye.length},0)!==0&&(S.dataPoints=Math.max(S.dataPoints,S.labels.length));for(var ee=0;ee<S.series[B].length;ee++){var re=z[B][ee];re!==null&&W.isNumber(re)?(H[B][ee]!==void 0&&(T=Math.max(T,H[B][ee]),d=Math.min(d,H[B][ee])),$[B][ee]!==void 0&&(d=Math.min(d,$[B][ee]),m=Math.max(m,$[B][ee])),this.w.config.chart.type!=="candlestick"&&this.w.config.chart.type!=="boxPlot"&&this.w.config.chart.type==="rangeArea"&&this.w.config.chart.type==="rangeBar"||(this.w.config.chart.type!=="candlestick"&&this.w.config.chart.type!=="boxPlot"||S.seriesCandleC[B][ee]!==void 0&&(T=Math.max(T,S.seriesCandleO[B][ee]),T=Math.max(T,S.seriesCandleH[B][ee]),T=Math.max(T,S.seriesCandleL[B][ee]),T=Math.max(T,S.seriesCandleC[B][ee]),this.w.config.chart.type==="boxPlot"&&(T=Math.max(T,S.seriesCandleM[B][ee]))),!b.series[B].type||b.series[B].type==="candlestick"&&b.series[B].type==="boxPlot"&&b.series[B].type==="rangeArea"&&b.series[B].type==="rangeBar"||(T=Math.max(T,S.series[B][ee]),d=Math.min(d,S.series[B][ee])),m=T),S.seriesGoals[B]&&S.seriesGoals[B][ee]&&Array.isArray(S.seriesGoals[B][ee])&&S.seriesGoals[B][ee].forEach(function(ce){M!==Number.MIN_VALUE&&(M=Math.min(M,ce.value),d=M),T=Math.max(T,ce.value),m=T}),W.isFloat(re)&&(re=W.noExponents(re),S.yValueDecimal=Math.max(S.yValueDecimal,re.toString().split(".")[1].length)),M>$[B][ee]&&$[B][ee]<0&&(M=$[B][ee])):S.hasNullValues=!0}}return b.chart.type==="rangeBar"&&S.seriesRangeStart.length&&S.isBarHorizontal&&(M=d),b.chart.type==="bar"&&(M<0&&T<0&&(T=0),M===Number.MIN_VALUE&&(M=0)),{minY:M,maxY:T,lowestY:d,highestY:m}}},{key:"setYRange",value:function(){var c=this.w.globals,d=this.w.config;c.maxY=-Number.MAX_VALUE,c.minY=Number.MIN_VALUE;var m=Number.MAX_VALUE;if(c.isMultipleYAxis)for(var v=0;v<c.series.length;v++){var b=this.getMinYMaxY(v,m,null,v+1);c.minYArr.push(b.minY),c.maxYArr.push(b.maxY),m=b.lowestY}var S=this.getMinYMaxY(0,m,null,c.series.length);if(c.minY=S.minY,c.maxY=S.maxY,m=S.lowestY,d.chart.stacked&&this._setStackedMinMax(),(d.chart.type==="line"||d.chart.type==="area"||d.chart.type==="candlestick"||d.chart.type==="boxPlot"||d.chart.type==="rangeBar"&&!c.isBarHorizontal)&&c.minY===Number.MIN_VALUE&&m!==-Number.MAX_VALUE&&m!==c.maxY){var T=c.maxY-m;(m>=0&&m<=10||d.yaxis[0].min!==void 0||d.yaxis[0].max!==void 0)&&(T=0),c.minY=m-5*T/100,m>0&&c.minY<0&&(c.minY=0),c.maxY=c.maxY+5*T/100}return d.yaxis.forEach(function(M,z){M.max!==void 0&&(typeof M.max=="number"?c.maxYArr[z]=M.max:typeof M.max=="function"&&(c.maxYArr[z]=M.max(c.isMultipleYAxis?c.maxYArr[z]:c.maxY)),c.maxY=c.maxYArr[z]),M.min!==void 0&&(typeof M.min=="number"?c.minYArr[z]=M.min:typeof M.min=="function"&&(c.minYArr[z]=M.min(c.isMultipleYAxis?c.minYArr[z]===Number.MIN_VALUE?0:c.minYArr[z]:c.minY)),c.minY=c.minYArr[z])}),c.isBarHorizontal&&["min","max"].forEach(function(M){d.xaxis[M]!==void 0&&typeof d.xaxis[M]=="number"&&(M==="min"?c.minY=d.xaxis[M]:c.maxY=d.xaxis[M])}),c.isMultipleYAxis?(this.scales.setMultipleYScales(),c.minY=m,c.yAxisScale.forEach(function(M,z){c.minYArr[z]=M.niceMin,c.maxYArr[z]=M.niceMax})):(this.scales.setYScaleForIndex(0,c.minY,c.maxY),c.minY=c.yAxisScale[0].niceMin,c.maxY=c.yAxisScale[0].niceMax,c.minYArr[0]=c.yAxisScale[0].niceMin,c.maxYArr[0]=c.yAxisScale[0].niceMax),{minY:c.minY,maxY:c.maxY,minYArr:c.minYArr,maxYArr:c.maxYArr,yAxisScale:c.yAxisScale}}},{key:"setXRange",value:function(){var c=this.w.globals,d=this.w.config,m=d.xaxis.type==="numeric"||d.xaxis.type==="datetime"||d.xaxis.type==="category"&&!c.noLabelsProvided||c.noLabelsProvided||c.isXNumeric;if(c.isXNumeric&&function(){for(var T=0;T<c.series.length;T++)if(c.labels[T])for(var M=0;M<c.labels[T].length;M++)c.labels[T][M]!==null&&W.isNumber(c.labels[T][M])&&(c.maxX=Math.max(c.maxX,c.labels[T][M]),c.initialMaxX=Math.max(c.maxX,c.labels[T][M]),c.minX=Math.min(c.minX,c.labels[T][M]),c.initialMinX=Math.min(c.minX,c.labels[T][M]))}(),c.noLabelsProvided&&d.xaxis.categories.length===0&&(c.maxX=c.labels[c.labels.length-1],c.initialMaxX=c.labels[c.labels.length-1],c.minX=1,c.initialMinX=1),c.isXNumeric||c.noLabelsProvided||c.dataFormatXNumeric){var v;if(d.xaxis.tickAmount===void 0?(v=Math.round(c.svgWidth/150),d.xaxis.type==="numeric"&&c.dataPoints<30&&(v=c.dataPoints-1),v>c.dataPoints&&c.dataPoints!==0&&(v=c.dataPoints-1)):d.xaxis.tickAmount==="dataPoints"?(c.series.length>1&&(v=c.series[c.maxValsInArrayIndex].length-1),c.isXNumeric&&(v=c.maxX-c.minX-1)):v=d.xaxis.tickAmount,c.xTickAmount=v,d.xaxis.max!==void 0&&typeof d.xaxis.max=="number"&&(c.maxX=d.xaxis.max),d.xaxis.min!==void 0&&typeof d.xaxis.min=="number"&&(c.minX=d.xaxis.min),d.xaxis.range!==void 0&&(c.minX=c.maxX-d.xaxis.range),c.minX!==Number.MAX_VALUE&&c.maxX!==-Number.MAX_VALUE)if(d.xaxis.convertedCatToNumeric&&!c.dataFormatXNumeric){for(var b=[],S=c.minX-1;S<c.maxX;S++)b.push(S+1);c.xAxisScale={result:b,niceMin:b[0],niceMax:b[b.length-1]}}else c.xAxisScale=this.scales.setXScale(c.minX,c.maxX);else c.xAxisScale=this.scales.linearScale(0,v,v),c.noLabelsProvided&&c.labels.length>0&&(c.xAxisScale=this.scales.linearScale(1,c.labels.length,v-1),c.seriesX=c.labels.slice());m&&(c.labels=c.xAxisScale.result.slice())}return c.isBarHorizontal&&c.labels.length&&(c.xTickAmount=c.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:c.minX,maxX:c.maxX}}},{key:"setZRange",value:function(){var c=this.w.globals;if(c.isDataXYZ){for(var d=0;d<c.series.length;d++)if(c.seriesZ[d]!==void 0)for(var m=0;m<c.seriesZ[d].length;m++)c.seriesZ[d][m]!==null&&W.isNumber(c.seriesZ[d][m])&&(c.maxZ=Math.max(c.maxZ,c.seriesZ[d][m]),c.minZ=Math.min(c.minZ,c.seriesZ[d][m]))}}},{key:"_handleSingleDataPoint",value:function(){var c=this.w.globals,d=this.w.config;if(c.minX===c.maxX){var m=new ft(this.ctx);if(d.xaxis.type==="datetime"){var v=m.getDate(c.minX);d.xaxis.labels.datetimeUTC?v.setUTCDate(v.getUTCDate()-2):v.setDate(v.getDate()-2),c.minX=new Date(v).getTime();var b=m.getDate(c.maxX);d.xaxis.labels.datetimeUTC?b.setUTCDate(b.getUTCDate()+2):b.setDate(b.getDate()+2),c.maxX=new Date(b).getTime()}else(d.xaxis.type==="numeric"||d.xaxis.type==="category"&&!c.noLabelsProvided)&&(c.minX=c.minX-2,c.initialMinX=c.minX,c.maxX=c.maxX+2,c.initialMaxX=c.maxX)}}},{key:"_getMinXDiff",value:function(){var c=this.w.globals;c.isXNumeric&&c.seriesX.forEach(function(d,m){d.length===1&&d.push(c.seriesX[c.maxValsInArrayIndex][c.seriesX[c.maxValsInArrayIndex].length-1]);var v=d.slice();v.sort(function(b,S){return b-S}),v.forEach(function(b,S){if(S>0){var T=b-v[S-1];T>0&&(c.minXDiff=Math.min(T,c.minXDiff))}}),c.dataPoints!==1&&c.minXDiff!==Number.MAX_VALUE||(c.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var c=this,d=this.w.globals;if(d.series.length){var m=d.seriesGroups;m.length||(m=[this.w.config.series.map(function(S){return S.name})]);var v={},b={};m.forEach(function(S){v[S]=[],b[S]=[],c.w.config.series.map(function(T,M){return S.indexOf(T.name)>-1?M:null}).filter(function(T){return T!==null}).forEach(function(T){for(var M=0;M<d.series[d.maxValsInArrayIndex].length;M++)v[S][M]===void 0&&(v[S][M]=0,b[S][M]=0),d.series[T][M]!==null&&W.isNumber(d.series[T][M])&&(d.series[T][M]>0?v[S][M]+=parseFloat(d.series[T][M])+1e-4:b[S][M]+=parseFloat(d.series[T][M]))})}),Object.entries(v).forEach(function(S){var T=Z(S,1)[0];v[T].forEach(function(M,z){d.maxY=Math.max(d.maxY,v[T][z]),d.minY=Math.min(d.minY,b[T][z])})})}}}]),pe}(),Sn=function(){function pe(c,d){f(this,pe),this.ctx=c,this.elgrid=d,this.w=c.w;var m=this.w;this.xaxisFontSize=m.config.xaxis.labels.style.fontSize,this.axisFontFamily=m.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=m.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=m.config.chart.type==="bar"&&m.config.plotOptions.bar.horizontal,this.xAxisoffX=0,m.config.xaxis.position==="bottom"&&(this.xAxisoffX=m.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Tr(c)}return s(pe,[{key:"drawYaxis",value:function(c){var d=this,m=this.w,v=new de(this.ctx),b=m.config.yaxis[c].labels.style,S=b.fontSize,T=b.fontFamily,M=b.fontWeight,z=v.group({class:"apexcharts-yaxis",rel:c,transform:"translate("+m.globals.translateYAxisX[c]+", 0)"});if(this.axesUtils.isYAxisHidden(c))return z;var $=v.group({class:"apexcharts-yaxis-texts-g"});z.add($);var H=m.globals.yAxisScale[c].result.length-1,B=m.globals.gridHeight/H,ee=m.globals.translateY,re=m.globals.yLabelFormatters[c],ce=m.globals.yAxisScale[c].result.slice();ce=this.axesUtils.checkForReversedLabels(c,ce);var ye="";if(m.config.yaxis[c].labels.show)for(var _e=function(rt){var Ze=ce[rt];Ze=re(Ze,rt,m);var Et=m.config.yaxis[c].labels.padding;m.config.yaxis[c].opposite&&m.config.yaxis.length!==0&&(Et*=-1);var Bt="end";m.config.yaxis[c].opposite&&(Bt="start"),m.config.yaxis[c].labels.align==="left"?Bt="start":m.config.yaxis[c].labels.align==="center"?Bt="middle":m.config.yaxis[c].labels.align==="right"&&(Bt="end");var Nt=d.axesUtils.getYAxisForeColor(b.colors,c),hr=m.config.yaxis[c].labels.offsetY;m.config.chart.type==="heatmap"&&(hr-=(m.globals.gridHeight/m.globals.series.length-1)/2);var ar=v.drawText({x:Et,y:ee+H/10+hr+1,text:Ze,textAnchor:Bt,fontSize:S,fontFamily:T,fontWeight:M,maxWidth:m.config.yaxis[c].labels.maxWidth,foreColor:Array.isArray(Nt)?Nt[rt]:Nt,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+b.cssClass});rt===H&&(ye=ar),$.add(ar);var Jr=document.createElementNS(m.globals.SVGNS,"title");if(Jr.textContent=Array.isArray(Ze)?Ze.join(" "):Ze,ar.node.appendChild(Jr),m.config.yaxis[c].labels.rotate!==0){var tn=v.rotateAroundCenter(ye.node),pn=v.rotateAroundCenter(ar.node);ar.node.setAttribute("transform","rotate(".concat(m.config.yaxis[c].labels.rotate," ").concat(tn.x," ").concat(pn.y,")"))}ee+=B},Ee=H;Ee>=0;Ee--)_e(Ee);if(m.config.yaxis[c].title.text!==void 0){var O=v.group({class:"apexcharts-yaxis-title"}),X=0;m.config.yaxis[c].opposite&&(X=m.globals.translateYAxisX[c]);var Q=v.drawText({x:X,y:m.globals.gridHeight/2+m.globals.translateY+m.config.yaxis[c].title.offsetY,text:m.config.yaxis[c].title.text,textAnchor:"end",foreColor:m.config.yaxis[c].title.style.color,fontSize:m.config.yaxis[c].title.style.fontSize,fontWeight:m.config.yaxis[c].title.style.fontWeight,fontFamily:m.config.yaxis[c].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+m.config.yaxis[c].title.style.cssClass});O.add(Q),z.add(O)}var xe=m.config.yaxis[c].axisBorder,ke=31+xe.offsetX;if(m.config.yaxis[c].opposite&&(ke=-31-xe.offsetX),xe.show){var Le=v.drawLine(ke,m.globals.translateY+xe.offsetY-2,ke,m.globals.gridHeight+m.globals.translateY+xe.offsetY+2,xe.color,0,xe.width);z.add(Le)}return m.config.yaxis[c].axisTicks.show&&this.axesUtils.drawYAxisTicks(ke,H,xe,m.config.yaxis[c].axisTicks,c,B,z),z}},{key:"drawYaxisInversed",value:function(c){var d=this.w,m=new de(this.ctx),v=m.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),b=m.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(d.globals.translateXAxisX,", ").concat(d.globals.translateXAxisY,")")});v.add(b);var S=d.globals.yAxisScale[c].result.length-1,T=d.globals.gridWidth/S+.1,M=T+d.config.xaxis.labels.offsetX,z=d.globals.xLabelFormatter,$=d.globals.yAxisScale[c].result.slice(),H=d.globals.timescaleLabels;H.length>0&&(this.xaxisLabels=H.slice(),S=($=H.slice()).length),$=this.axesUtils.checkForReversedLabels(c,$);var B=H.length;if(d.config.xaxis.labels.show)for(var ee=B?0:S;B?ee<B:ee>=0;B?ee++:ee--){var re=$[ee];re=z(re,ee,d);var ce=d.globals.gridWidth+d.globals.padHorizontal-(M-T+d.config.xaxis.labels.offsetX);if(H.length){var ye=this.axesUtils.getLabel($,H,ce,ee,this.drawnLabels,this.xaxisFontSize);ce=ye.x,re=ye.text,this.drawnLabels.push(ye.text),ee===0&&d.globals.skipFirstTimelinelabel&&(re=""),ee===$.length-1&&d.globals.skipLastTimelinelabel&&(re="")}var _e=m.drawText({x:ce,y:this.xAxisoffX+d.config.xaxis.labels.offsetY+30-(d.config.xaxis.position==="top"?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:re,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[c]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:d.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+d.config.xaxis.labels.style.cssClass});b.add(_e),_e.tspan(re);var Ee=document.createElementNS(d.globals.SVGNS,"title");Ee.textContent=re,_e.node.appendChild(Ee),M+=T}return this.inversedYAxisTitleText(v),this.inversedYAxisBorder(v),v}},{key:"inversedYAxisBorder",value:function(c){var d=this.w,m=new de(this.ctx),v=d.config.xaxis.axisBorder;if(v.show){var b=0;d.config.chart.type==="bar"&&d.globals.isXNumeric&&(b-=15);var S=m.drawLine(d.globals.padHorizontal+b+v.offsetX,this.xAxisoffX,d.globals.gridWidth,this.xAxisoffX,v.color,0,v.height);this.elgrid&&this.elgrid.elGridBorders&&d.config.grid.show?this.elgrid.elGridBorders.add(S):c.add(S)}}},{key:"inversedYAxisTitleText",value:function(c){var d=this.w,m=new de(this.ctx);if(d.config.xaxis.title.text!==void 0){var v=m.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),b=m.drawText({x:d.globals.gridWidth/2+d.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(d.config.xaxis.title.style.fontSize)+d.config.xaxis.title.offsetY+20,text:d.config.xaxis.title.text,textAnchor:"middle",fontSize:d.config.xaxis.title.style.fontSize,fontFamily:d.config.xaxis.title.style.fontFamily,fontWeight:d.config.xaxis.title.style.fontWeight,foreColor:d.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+d.config.xaxis.title.style.cssClass});v.add(b),c.add(v)}}},{key:"yAxisTitleRotate",value:function(c,d){var m=this.w,v=new de(this.ctx),b={width:0,height:0},S={width:0,height:0},T=m.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(c,"'] .apexcharts-yaxis-texts-g"));T!==null&&(b=T.getBoundingClientRect());var M=m.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(c,"'] .apexcharts-yaxis-title text"));if(M!==null&&(S=M.getBoundingClientRect()),M!==null){var z=this.xPaddingForYAxisTitle(c,b,S,d);M.setAttribute("x",z.xPos-(d?10:0))}if(M!==null){var $=v.rotateAroundCenter(M);M.setAttribute("transform","rotate(".concat(d?-1*m.config.yaxis[c].title.rotate:m.config.yaxis[c].title.rotate," ").concat($.x," ").concat($.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(c,d,m,v){var b=this.w,S=0,T=0,M=10;return b.config.yaxis[c].title.text===void 0||c<0?{xPos:T,padd:0}:(v?(T=d.width+b.config.yaxis[c].title.offsetX+m.width/2+M/2,(S+=1)===0&&(T-=M/2)):(T=-1*d.width+b.config.yaxis[c].title.offsetX+M/2+m.width/2,b.globals.isBarHorizontal&&(M=25,T=-1*d.width-b.config.yaxis[c].title.offsetX-M)),{xPos:T,padd:M})}},{key:"setYAxisXPosition",value:function(c,d){var m=this.w,v=0,b=0,S=18,T=1;m.config.yaxis.length>1&&(this.multipleYs=!0),m.config.yaxis.map(function(M,z){var $=m.globals.ignoreYAxisIndexes.indexOf(z)>-1||!M.show||M.floating||c[z].width===0,H=c[z].width+d[z].width;M.opposite?m.globals.isBarHorizontal?(b=m.globals.gridWidth+m.globals.translateX-1,m.globals.translateYAxisX[z]=b-M.labels.offsetX):(b=m.globals.gridWidth+m.globals.translateX+T,$||(T=T+H+20),m.globals.translateYAxisX[z]=b-M.labels.offsetX+20):(v=m.globals.translateX-S,$||(S=S+H+20),m.globals.translateYAxisX[z]=v+M.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var c=this.w,d=c.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(d=W.listToArray(d)).forEach(function(m,v){var b=c.config.yaxis[v];if(b&&!b.floating&&b.labels.align!==void 0){var S=c.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(v,"'] .apexcharts-yaxis-texts-g")),T=c.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(v,"'] .apexcharts-yaxis-label"));T=W.listToArray(T);var M=S.getBoundingClientRect();b.labels.align==="left"?(T.forEach(function(z,$){z.setAttribute("text-anchor","start")}),b.opposite||S.setAttribute("transform","translate(-".concat(M.width,", 0)"))):b.labels.align==="center"?(T.forEach(function(z,$){z.setAttribute("text-anchor","middle")}),S.setAttribute("transform","translate(".concat(M.width/2*(b.opposite?1:-1),", 0)"))):b.labels.align==="right"&&(T.forEach(function(z,$){z.setAttribute("text-anchor","end")}),b.opposite&&S.setAttribute("transform","translate(".concat(M.width,", 0)")))}})}}]),pe}(),on=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.documentEvent=W.bind(this.documentEvent,this)}return s(pe,[{key:"addEventListener",value:function(c,d){var m=this.w;m.globals.events.hasOwnProperty(c)?m.globals.events[c].push(d):m.globals.events[c]=[d]}},{key:"removeEventListener",value:function(c,d){var m=this.w;if(m.globals.events.hasOwnProperty(c)){var v=m.globals.events[c].indexOf(d);v!==-1&&m.globals.events[c].splice(v,1)}}},{key:"fireEvent",value:function(c,d){var m=this.w;if(m.globals.events.hasOwnProperty(c)){d&&d.length||(d=[]);for(var v=m.globals.events[c],b=v.length,S=0;S<b;S++)v[S].apply(null,d)}}},{key:"setupEventHandlers",value:function(){var c=this,d=this.w,m=this.ctx,v=d.globals.dom.baseEl.querySelector(d.globals.chartClass);this.ctx.eventList.forEach(function(b){v.addEventListener(b,function(S){var T=Object.assign({},d,{seriesIndex:d.globals.capturedSeriesIndex,dataPointIndex:d.globals.capturedDataPointIndex});S.type==="mousemove"||S.type==="touchmove"?typeof d.config.chart.events.mouseMove=="function"&&d.config.chart.events.mouseMove(S,m,T):S.type==="mouseleave"||S.type==="touchleave"?typeof d.config.chart.events.mouseLeave=="function"&&d.config.chart.events.mouseLeave(S,m,T):(S.type==="mouseup"&&S.which===1||S.type==="touchend")&&(typeof d.config.chart.events.click=="function"&&d.config.chart.events.click(S,m,T),m.ctx.events.fireEvent("click",[S,m,T]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(b){d.globals.dom.baseEl.addEventListener(b,c.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(c){var d=this.w,m=c.target.className;if(c.type==="click"){var v=d.globals.dom.baseEl.querySelector(".apexcharts-menu");v&&v.classList.contains("apexcharts-menu-open")&&m!=="apexcharts-menu-icon"&&v.classList.remove("apexcharts-menu-open")}d.globals.clientX=c.type==="touchmove"?c.touches[0].clientX:c.clientX,d.globals.clientY=c.type==="touchmove"?c.touches[0].clientY:c.clientY}}]),pe}(),Gr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"setCurrentLocaleValues",value:function(c){var d=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(d=this.w.config.chart.locales.concat(window.Apex.chart.locales));var m=d.filter(function(b){return b.name===c})[0];if(!m)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var v=W.extend(Ve,m);this.w.globals.locale=v.options}}]),pe}(),Zi=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"drawAxis",value:function(c,d){var m,v,b=this,S=this.w.globals,T=this.w.config,M=new Cr(this.ctx,d),z=new Sn(this.ctx,d);S.axisCharts&&c!=="radar"&&(S.isBarHorizontal?(v=z.drawYaxisInversed(0),m=M.drawXaxisInversed(0),S.dom.elGraphical.add(m),S.dom.elGraphical.add(v)):(m=M.drawXaxis(),S.dom.elGraphical.add(m),T.yaxis.map(function($,H){if(S.ignoreYAxisIndexes.indexOf(H)===-1&&(v=z.drawYaxis(H),S.dom.Paper.add(v),b.w.config.grid.position==="back")){var B=S.dom.Paper.children()[1];B.remove(),S.dom.Paper.add(B)}})))}}]),pe}(),Kr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"drawXCrosshairs",value:function(){var c=this.w,d=new de(this.ctx),m=new he(this.ctx),v=c.config.xaxis.crosshairs.fill.gradient,b=c.config.xaxis.crosshairs.dropShadow,S=c.config.xaxis.crosshairs.fill.type,T=v.colorFrom,M=v.colorTo,z=v.opacityFrom,$=v.opacityTo,H=v.stops,B=b.enabled,ee=b.left,re=b.top,ce=b.blur,ye=b.color,_e=b.opacity,Ee=c.config.xaxis.crosshairs.fill.color;if(c.config.xaxis.crosshairs.show){S==="gradient"&&(Ee=d.drawGradient("vertical",T,M,z,$,null,H,null));var O=d.drawRect();c.config.xaxis.crosshairs.width===1&&(O=d.drawLine());var X=c.globals.gridHeight;(!W.isNumber(X)||X<0)&&(X=0);var Q=c.config.xaxis.crosshairs.width;(!W.isNumber(Q)||Q<0)&&(Q=0),O.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:X,width:Q,height:X,fill:Ee,filter:"none","fill-opacity":c.config.xaxis.crosshairs.opacity,stroke:c.config.xaxis.crosshairs.stroke.color,"stroke-width":c.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":c.config.xaxis.crosshairs.stroke.dashArray}),B&&(O=m.dropShadow(O,{left:ee,top:re,blur:ce,color:ye,opacity:_e})),c.globals.dom.elGraphical.add(O)}}},{key:"drawYCrosshairs",value:function(){var c=this.w,d=new de(this.ctx),m=c.config.yaxis[0].crosshairs,v=c.globals.barPadForNumericAxis;if(c.config.yaxis[0].crosshairs.show){var b=d.drawLine(-v,0,c.globals.gridWidth+v,0,m.stroke.color,m.stroke.dashArray,m.stroke.width);b.attr({class:"apexcharts-ycrosshairs"}),c.globals.dom.elGraphical.add(b)}var S=d.drawLine(-v,0,c.globals.gridWidth+v,0,m.stroke.color,0,0);S.attr({class:"apexcharts-ycrosshairs-hidden"}),c.globals.dom.elGraphical.add(S)}}]),pe}(),En=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"checkResponsiveConfig",value:function(c){var d=this,m=this.w,v=m.config;if(v.responsive.length!==0){var b=v.responsive.slice();b.sort(function(z,$){return z.breakpoint>$.breakpoint?1:$.breakpoint>z.breakpoint?-1:0}).reverse();var S=new Xt({}),T=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=b[0].breakpoint,H=window.innerWidth>0?window.innerWidth:screen.width;if(H>$){var B=Ae.extendArrayProps(S,m.globals.initialConfig,m);z=W.extend(B,z),z=W.extend(m.config,z),d.overrideResponsiveOptions(z)}else for(var ee=0;ee<b.length;ee++)H<b[ee].breakpoint&&(z=Ae.extendArrayProps(S,b[ee].options,m),z=W.extend(m.config,z),d.overrideResponsiveOptions(z))};if(c){var M=Ae.extendArrayProps(S,c,m);M=W.extend(m.config,M),T(M=W.extend(M,c))}else T({})}}},{key:"overrideResponsiveOptions",value:function(c){var d=new Xt(c).init({responsiveOverride:!0});this.w.config=d}}]),pe}(),wi=function(){function pe(c){f(this,pe),this.ctx=c,this.colors=[],this.w=c.w;var d=this.w;this.isColorFn=!1,this.isHeatmapDistributed=d.config.chart.type==="treemap"&&d.config.plotOptions.treemap.distributed||d.config.chart.type==="heatmap"&&d.config.plotOptions.heatmap.distributed,this.isBarDistributed=d.config.plotOptions.bar.distributed&&(d.config.chart.type==="bar"||d.config.chart.type==="rangeBar")}return s(pe,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var c,d=this,m=this.w,v=new W;if(m.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(m.config.theme.mode)),m.config.colors===void 0||((c=m.config.colors)===null||c===void 0?void 0:c.length)===0?m.globals.colors=this.predefined():(m.globals.colors=m.config.colors,Array.isArray(m.config.colors)&&m.config.colors.length>0&&typeof m.config.colors[0]=="function"&&(m.globals.colors=m.config.series.map(function(re,ce){var ye=m.config.colors[ce];return ye||(ye=m.config.colors[0]),typeof ye=="function"?(d.isColorFn=!0,ye({value:m.globals.axisCharts?m.globals.series[ce][0]?m.globals.series[ce][0]:0:m.globals.series[ce],seriesIndex:ce,dataPointIndex:ce,w:m})):ye}))),m.globals.seriesColors.map(function(re,ce){re&&(m.globals.colors[ce]=re)}),m.config.theme.monochrome.enabled){var b=[],S=m.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(S=m.globals.series[0].length*m.globals.series.length);for(var T=m.config.theme.monochrome.color,M=1/(S/m.config.theme.monochrome.shadeIntensity),z=m.config.theme.monochrome.shadeTo,$=0,H=0;H<S;H++){var B=void 0;z==="dark"?(B=v.shadeColor(-1*$,T),$+=M):(B=v.shadeColor($,T),$+=M),b.push(B)}m.globals.colors=b.slice()}var ee=m.globals.colors.slice();this.pushExtraColors(m.globals.colors),["fill","stroke"].forEach(function(re){m.config[re].colors===void 0?m.globals[re].colors=d.isColorFn?m.config.colors:ee:m.globals[re].colors=m.config[re].colors.slice(),d.pushExtraColors(m.globals[re].colors)}),m.config.dataLabels.style.colors===void 0?m.globals.dataLabels.style.colors=ee:m.globals.dataLabels.style.colors=m.config.dataLabels.style.colors.slice(),this.pushExtraColors(m.globals.dataLabels.style.colors,50),m.config.plotOptions.radar.polygons.fill.colors===void 0?m.globals.radarPolygons.fill.colors=[m.config.theme.mode==="dark"?"#424242":"none"]:m.globals.radarPolygons.fill.colors=m.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(m.globals.radarPolygons.fill.colors,20),m.config.markers.colors===void 0?m.globals.markers.colors=ee:m.globals.markers.colors=m.config.markers.colors.slice(),this.pushExtraColors(m.globals.markers.colors)}},{key:"pushExtraColors",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=this.w,b=d||v.globals.series.length;if(m===null&&(m=this.isBarDistributed||this.isHeatmapDistributed||v.config.chart.type==="heatmap"&&v.config.plotOptions.heatmap.colorScale.inverse),m&&v.globals.series.length&&(b=v.globals.series[v.globals.maxValsInArrayIndex].length*v.globals.series.length),c.length<b)for(var S=b-c.length,T=0;T<S;T++)c.push(c[T])}},{key:"updateThemeOptions",value:function(c){c.chart=c.chart||{},c.tooltip=c.tooltip||{};var d=c.theme.mode||"light",m=c.theme.palette?c.theme.palette:d==="dark"?"palette4":"palette1",v=c.chart.foreColor?c.chart.foreColor:d==="dark"?"#f6f7f8":"#373d3f";return c.tooltip.theme=d,c.chart.foreColor=v,c.theme.palette=m,c}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),pe}(),Hi=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(c){var d=this.w,m=c==="title"?d.config.title:d.config.subtitle,v=d.globals.svgWidth/2,b=m.offsetY,S="middle";if(m.align==="left"?(v=10,S="start"):m.align==="right"&&(v=d.globals.svgWidth-10,S="end"),v+=m.offsetX,b=b+parseInt(m.style.fontSize,10)+m.margin/2,m.text!==void 0){var T=new de(this.ctx).drawText({x:v,y:b,text:m.text,textAnchor:S,fontSize:m.style.fontSize,fontFamily:m.style.fontFamily,fontWeight:m.style.fontWeight,foreColor:m.style.color,opacity:1});T.node.setAttribute("class","apexcharts-".concat(c,"-text")),d.globals.dom.Paper.add(T)}}}]),pe}(),Tt=function(){function pe(c){f(this,pe),this.w=c.w,this.dCtx=c}return s(pe,[{key:"getTitleSubtitleCoords",value:function(c){var d=this.w,m=0,v=0,b=c==="title"?d.config.title.floating:d.config.subtitle.floating,S=d.globals.dom.baseEl.querySelector(".apexcharts-".concat(c,"-text"));if(S!==null&&!b){var T=S.getBoundingClientRect();m=T.width,v=d.globals.axisCharts?T.height+5:T.height}return{width:m,height:v}}},{key:"getLegendsRect",value:function(){var c=this.w,d=c.globals.dom.elLegendWrap;c.config.legend.height||c.config.legend.position!=="top"&&c.config.legend.position!=="bottom"||(d.style.maxHeight=c.globals.svgHeight/2+"px");var m=Object.assign({},W.getBoundingClientRect(d));return d!==null&&!c.config.legend.floating&&c.config.legend.show?this.dCtx.lgRect={x:m.x,y:m.y,height:m.height,width:m.height===0?0:m.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},c.config.legend.position!=="left"&&c.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>c.globals.svgWidth&&(this.dCtx.lgRect.width=c.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(c,d){var m=c;if(this.w.globals.isMultiLineX){var v=d.map(function(S,T){return Array.isArray(S)?S.length:1}),b=Math.max.apply(Math,ae(v));m=d[v.indexOf(b)]}return m}}]),pe}(),pr=function(){function pe(c){f(this,pe),this.w=c.w,this.dCtx=c}return s(pe,[{key:"getxAxisLabelsCoords",value:function(){var c,d=this.w,m=d.globals.labels.slice();if(d.config.xaxis.convertedCatToNumeric&&m.length===0&&(m=d.globals.categoryLabels),d.globals.timescaleLabels.length>0){var v=this.getxAxisTimeScaleLabelsCoords();c={width:v.width,height:v.height},d.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=d.config.legend.position!=="left"&&d.config.legend.position!=="right"||d.config.legend.floating?0:this.dCtx.lgRect.width;var b=d.globals.xLabelFormatter,S=W.getLargestStringFromArr(m),T=this.dCtx.dimHelpers.getLargestStringFromMultiArr(S,m);d.globals.isBarHorizontal&&(T=S=d.globals.yAxisScale[0].result.reduce(function(re,ce){return re.length>ce.length?re:ce},0));var M=new Pt(this.dCtx.ctx),z=S;S=M.xLabelFormat(b,S,z,{i:void 0,dateFormatter:new ft(this.dCtx.ctx).formatDate,w:d}),T=M.xLabelFormat(b,T,z,{i:void 0,dateFormatter:new ft(this.dCtx.ctx).formatDate,w:d}),(d.config.xaxis.convertedCatToNumeric&&S===void 0||String(S).trim()==="")&&(T=S="1");var $=new de(this.dCtx.ctx),H=$.getTextRects(S,d.config.xaxis.labels.style.fontSize),B=H;if(S!==T&&(B=$.getTextRects(T,d.config.xaxis.labels.style.fontSize)),(c={width:H.width>=B.width?H.width:B.width,height:H.height>=B.height?H.height:B.height}).width*m.length>d.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&d.config.xaxis.labels.rotate!==0||d.config.xaxis.labels.rotateAlways){if(!d.globals.isBarHorizontal){d.globals.rotateXLabels=!0;var ee=function(re){return $.getTextRects(re,d.config.xaxis.labels.style.fontSize,d.config.xaxis.labels.style.fontFamily,"rotate(".concat(d.config.xaxis.labels.rotate," 0 0)"),!1)};H=ee(S),S!==T&&(B=ee(T)),c.height=(H.height>B.height?H.height:B.height)/1.5,c.width=H.width>B.width?H.width:B.width}}else d.globals.rotateXLabels=!1}return d.config.xaxis.labels.show||(c={width:0,height:0}),{width:c.width,height:c.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var c,d=this.w;if(!d.globals.hasXaxisGroups)return{width:0,height:0};var m,v=((c=d.config.xaxis.group.style)===null||c===void 0?void 0:c.fontSize)||d.config.xaxis.labels.style.fontSize,b=d.globals.groups.map(function(H){return H.title}),S=W.getLargestStringFromArr(b),T=this.dCtx.dimHelpers.getLargestStringFromMultiArr(S,b),M=new de(this.dCtx.ctx),z=M.getTextRects(S,v),$=z;return S!==T&&($=M.getTextRects(T,v)),m={width:z.width>=$.width?z.width:$.width,height:z.height>=$.height?z.height:$.height},d.config.xaxis.labels.show||(m={width:0,height:0}),{width:m.width,height:m.height}}},{key:"getxAxisTitleCoords",value:function(){var c=this.w,d=0,m=0;if(c.config.xaxis.title.text!==void 0){var v=new de(this.dCtx.ctx).getTextRects(c.config.xaxis.title.text,c.config.xaxis.title.style.fontSize);d=v.width,m=v.height}return{width:d,height:m}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var c,d=this.w;this.dCtx.timescaleLabels=d.globals.timescaleLabels.slice();var m=this.dCtx.timescaleLabels.map(function(b){return b.value}),v=m.reduce(function(b,S){return b===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):b.length>S.length?b:S},0);return 1.05*(c=new de(this.dCtx.ctx).getTextRects(v,d.config.xaxis.labels.style.fontSize)).width*m.length>d.globals.gridWidth&&d.config.xaxis.labels.rotate!==0&&(d.globals.overlappingXLabels=!0),c}},{key:"additionalPaddingXLabels",value:function(c){var d=this,m=this.w,v=m.globals,b=m.config,S=b.xaxis.type,T=c.width;v.skipLastTimelinelabel=!1,v.skipFirstTimelinelabel=!1;var M=m.config.yaxis[0].opposite&&m.globals.isBarHorizontal,z=function($,H){b.yaxis.length>1&&function(B){return v.collapsedSeriesIndices.indexOf(B)!==-1}(H)||function(B){if(d.dCtx.timescaleLabels&&d.dCtx.timescaleLabels.length){var ee=d.dCtx.timescaleLabels[0],re=d.dCtx.timescaleLabels[d.dCtx.timescaleLabels.length-1].position+T/1.75-d.dCtx.yAxisWidthRight,ce=ee.position-T/1.75+d.dCtx.yAxisWidthLeft,ye=m.config.legend.position==="right"&&d.dCtx.lgRect.width>0?d.dCtx.lgRect.width:0;re>v.svgWidth-v.translateX-ye&&(v.skipLastTimelinelabel=!0),ce<-(B.show&&!B.floating||b.chart.type!=="bar"&&b.chart.type!=="candlestick"&&b.chart.type!=="rangeBar"&&b.chart.type!=="boxPlot"?10:T/1.75)&&(v.skipFirstTimelinelabel=!0)}else S==="datetime"?d.dCtx.gridPad.right<T&&!v.rotateXLabels&&(v.skipLastTimelinelabel=!0):S!=="datetime"&&d.dCtx.gridPad.right<T/2-d.dCtx.yAxisWidthRight&&!v.rotateXLabels&&!m.config.xaxis.labels.trim&&(m.config.xaxis.tickPlacement!=="between"||m.globals.isBarHorizontal)&&(d.dCtx.xPadRight=T/2+1)}($)};b.yaxis.forEach(function($,H){M?(d.dCtx.gridPad.left<T&&(d.dCtx.xPadLeft=T/2+1),d.dCtx.xPadRight=T/2+1):z($,H)})}}]),pe}(),Er=function(){function pe(c){f(this,pe),this.w=c.w,this.dCtx=c}return s(pe,[{key:"getyAxisLabelsCoords",value:function(){var c=this,d=this.w,m=[],v=10,b=new Tr(this.dCtx.ctx);return d.config.yaxis.map(function(S,T){var M={seriesIndex:T,dataPointIndex:-1,w:d},z=d.globals.yAxisScale[T],$=0;if(!b.isYAxisHidden(T)&&S.labels.show&&S.labels.minWidth!==void 0&&($=S.labels.minWidth),!b.isYAxisHidden(T)&&S.labels.show&&z.result.length){var H=d.globals.yLabelFormatters[T],B=z.niceMin===Number.MIN_VALUE?0:z.niceMin,ee=z.result.reduce(function(X,Q){var xe,ke;return((xe=String(H(X,M)))===null||xe===void 0?void 0:xe.length)>((ke=String(H(Q,M)))===null||ke===void 0?void 0:ke.length)?X:Q},B),re=ee=H(ee,M);if(ee!==void 0&&ee.length!==0||(ee=z.niceMax),d.globals.isBarHorizontal){v=0;var ce=d.globals.labels.slice();ee=W.getLargestStringFromArr(ce),ee=H(ee,{seriesIndex:T,dataPointIndex:-1,w:d}),re=c.dCtx.dimHelpers.getLargestStringFromMultiArr(ee,ce)}var ye=new de(c.dCtx.ctx),_e="rotate(".concat(S.labels.rotate," 0 0)"),Ee=ye.getTextRects(ee,S.labels.style.fontSize,S.labels.style.fontFamily,_e,!1),O=Ee;ee!==re&&(O=ye.getTextRects(re,S.labels.style.fontSize,S.labels.style.fontFamily,_e,!1)),m.push({width:($>O.width||$>Ee.width?$:O.width>Ee.width?O.width:Ee.width)+v,height:O.height>Ee.height?O.height:Ee.height})}else m.push({width:0,height:0})}),m}},{key:"getyAxisTitleCoords",value:function(){var c=this,d=this.w,m=[];return d.config.yaxis.map(function(v,b){if(v.show&&v.title.text!==void 0){var S=new de(c.dCtx.ctx),T="rotate(".concat(v.title.rotate," 0 0)"),M=S.getTextRects(v.title.text,v.title.style.fontSize,v.title.style.fontFamily,T,!1);m.push({width:M.width,height:M.height})}else m.push({width:0,height:0})}),m}},{key:"getTotalYAxisWidth",value:function(){var c=this.w,d=0,m=0,v=0,b=c.globals.yAxisScale.length>1?10:0,S=new Tr(this.dCtx.ctx),T=function(M,z){var $=c.config.yaxis[z].floating,H=0;M.width>0&&!$?(H=M.width+b,function(B){return c.globals.ignoreYAxisIndexes.indexOf(B)>-1}(z)&&(H=H-M.width-b)):H=$||S.isYAxisHidden(z)?0:5,c.config.yaxis[z].opposite?v+=H:m+=H,d+=H};return c.globals.yLabelsCoords.map(function(M,z){T(M,z)}),c.globals.yTitleCoords.map(function(M,z){T(M,z)}),c.globals.isBarHorizontal&&!c.config.yaxis[0].floating&&(d=c.globals.yLabelsCoords[0].width+c.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=m,this.dCtx.yAxisWidthRight=v,d}}]),pe}(),Mr=function(){function pe(c){f(this,pe),this.w=c.w,this.dCtx=c}return s(pe,[{key:"gridPadForColumnsInNumericAxis",value:function(c){var d=this.w;if(d.globals.noData||d.globals.allSeriesCollapsed)return 0;var m=function($){return $==="bar"||$==="rangeBar"||$==="candlestick"||$==="boxPlot"},v=d.config.chart.type,b=0,S=m(v)?d.config.series.length:1;if(d.globals.comboBarCount>0&&(S=d.globals.comboBarCount),d.globals.collapsedSeries.forEach(function($){m($.type)&&(S-=1)}),d.config.chart.stacked&&(S=1),(m(v)||d.globals.comboBarCount>0)&&d.globals.isXNumeric&&!d.globals.isBarHorizontal&&S>0){var T,M,z=Math.abs(d.globals.initialMaxX-d.globals.initialMinX);z<=3&&(z=d.globals.dataPoints),T=z/c,d.globals.minXDiff&&d.globals.minXDiff/T>0&&(M=d.globals.minXDiff/T),M>c/2&&(M/=2),(b=M/S*parseInt(d.config.plotOptions.bar.columnWidth,10)/100)<1&&(b=1),b=b/(S>1?1:1.5)+5,d.globals.barPadForNumericAxis=b}return b}},{key:"gridPadFortitleSubtitle",value:function(){var c=this,d=this.w,m=d.globals,v=this.dCtx.isSparkline||!d.globals.axisCharts?0:10;["title","subtitle"].forEach(function(T){d.config[T].text!==void 0?v+=d.config[T].margin:v+=c.dCtx.isSparkline||!d.globals.axisCharts?0:5}),!d.config.legend.show||d.config.legend.position!=="bottom"||d.config.legend.floating||d.globals.axisCharts||(v+=10);var b=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),S=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");m.gridHeight=m.gridHeight-b.height-S.height-v,m.translateY=m.translateY+b.height+S.height+v}},{key:"setGridXPosForDualYAxis",value:function(c,d){var m=this.w,v=new Tr(this.dCtx.ctx);m.config.yaxis.map(function(b,S){m.globals.ignoreYAxisIndexes.indexOf(S)!==-1||b.floating||v.isYAxisHidden(S)||(b.opposite&&(m.globals.translateX=m.globals.translateX-(d[S].width+c[S].width)-parseInt(m.config.yaxis[S].labels.style.fontSize,10)/1.2-12),m.globals.translateX<2&&(m.globals.translateX=2))})}}]),pe}(),Zt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Tt(this),this.dimYAxis=new Er(this),this.dimXAxis=new pr(this),this.dimGrid=new Mr(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return s(pe,[{key:"plotCoords",value:function(){var c=this,d=this.w,m=d.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((d.config.markers.discrete.length>0||d.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(b){var S=Z(b,2),T=S[0],M=S[1];c.gridPad[T]=Math.max(M,c.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(d.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(d.config.stroke.width/2,this.gridPad.bottom)),m.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),m.gridHeight=m.gridHeight-this.gridPad.top-this.gridPad.bottom,m.gridWidth=m.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var v=this.dimGrid.gridPadForColumnsInNumericAxis(m.gridWidth);m.gridWidth=m.gridWidth-2*v,m.translateX=m.translateX+this.gridPad.left+this.xPadLeft+(v>0?v+4:0),m.translateY=m.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var c=this,d=this.w,m=d.globals,v=this.dimYAxis.getyAxisLabelsCoords(),b=this.dimYAxis.getyAxisTitleCoords();d.globals.yLabelsCoords=[],d.globals.yTitleCoords=[],d.config.yaxis.map(function(ee,re){d.globals.yLabelsCoords.push({width:v[re].width,index:re}),d.globals.yTitleCoords.push({width:b[re].width,index:re})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var S=this.dimXAxis.getxAxisLabelsCoords(),T=this.dimXAxis.getxAxisGroupLabelsCoords(),M=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(S,M,T),m.translateXAxisY=d.globals.rotateXLabels?this.xAxisHeight/8:-4,m.translateXAxisX=d.globals.rotateXLabels&&d.globals.isXNumeric&&d.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,d.globals.isBarHorizontal&&(m.rotateXLabels=!1,m.translateXAxisY=parseInt(d.config.xaxis.labels.style.fontSize,10)/1.5*-1),m.translateXAxisY=m.translateXAxisY+d.config.xaxis.labels.offsetY,m.translateXAxisX=m.translateXAxisX+d.config.xaxis.labels.offsetX;var z=this.yAxisWidth,$=this.xAxisHeight;m.xAxisLabelsHeight=this.xAxisHeight-M.height,m.xAxisGroupLabelsHeight=m.xAxisLabelsHeight-S.height,m.xAxisLabelsWidth=this.xAxisWidth,m.xAxisHeight=this.xAxisHeight;var H=10;(d.config.chart.type==="radar"||this.isSparkline)&&(z=0,$=m.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||d.config.chart.type==="treemap")&&(z=0,$=0,H=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(S);var B=function(){m.translateX=z,m.gridHeight=m.svgHeight-c.lgRect.height-$-(c.isSparkline||d.config.chart.type==="treemap"?0:d.globals.rotateXLabels?10:15),m.gridWidth=m.svgWidth-z};switch(d.config.xaxis.position==="top"&&(H=m.xAxisHeight-d.config.xaxis.axisTicks.height-5),d.config.legend.position){case"bottom":m.translateY=H,B();break;case"top":m.translateY=this.lgRect.height+H,B();break;case"left":m.translateY=H,m.translateX=this.lgRect.width+z,m.gridHeight=m.svgHeight-$-12,m.gridWidth=m.svgWidth-this.lgRect.width-z;break;case"right":m.translateY=H,m.translateX=z,m.gridHeight=m.svgHeight-$-12,m.gridWidth=m.svgWidth-this.lgRect.width-z-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(b,v),new Sn(this.ctx).setYAxisXPosition(v,b)}},{key:"setDimensionsForNonAxisCharts",value:function(){var c=this.w,d=c.globals,m=c.config,v=0;c.config.legend.show&&!c.config.legend.floating&&(v=20);var b=m.chart.type==="pie"||m.chart.type==="polarArea"||m.chart.type==="donut"?"pie":"radialBar",S=m.plotOptions[b].offsetY,T=m.plotOptions[b].offsetX;if(!m.legend.show||m.legend.floating)return d.gridHeight=d.svgHeight-m.grid.padding.left+m.grid.padding.right,d.gridWidth=d.gridHeight,d.translateY=S,void(d.translateX=T+(d.svgWidth-d.gridWidth)/2);switch(m.legend.position){case"bottom":d.gridHeight=d.svgHeight-this.lgRect.height-d.goldenPadding,d.gridWidth=d.svgWidth,d.translateY=S-10,d.translateX=T+(d.svgWidth-d.gridWidth)/2;break;case"top":d.gridHeight=d.svgHeight-this.lgRect.height-d.goldenPadding,d.gridWidth=d.svgWidth,d.translateY=this.lgRect.height+S+10,d.translateX=T+(d.svgWidth-d.gridWidth)/2;break;case"left":d.gridWidth=d.svgWidth-this.lgRect.width-v,d.gridHeight=m.chart.height!=="auto"?d.svgHeight:d.gridWidth,d.translateY=S,d.translateX=T+this.lgRect.width+v;break;case"right":d.gridWidth=d.svgWidth-this.lgRect.width-v-5,d.gridHeight=m.chart.height!=="auto"?d.svgHeight:d.gridWidth,d.translateY=S,d.translateX=T+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(c,d,m){var v=this.w,b=v.globals.hasXaxisGroups?2:1,S=m.height+c.height+d.height,T=v.globals.isMultiLineX?1.2:v.globals.LINE_HEIGHT_RATIO,M=v.globals.rotateXLabels?22:10,z=v.globals.rotateXLabels&&v.config.legend.position==="bottom"?10:0;this.xAxisHeight=S*T+b*M+z,this.xAxisWidth=c.width,this.xAxisHeight-d.height>v.config.xaxis.labels.maxHeight&&(this.xAxisHeight=v.config.xaxis.labels.maxHeight),v.config.xaxis.labels.minHeight&&this.xAxisHeight<v.config.xaxis.labels.minHeight&&(this.xAxisHeight=v.config.xaxis.labels.minHeight),v.config.xaxis.floating&&(this.xAxisHeight=0);var $=0,H=0;v.config.yaxis.forEach(function(B){$+=B.labels.minWidth,H+=B.labels.maxWidth}),this.yAxisWidth<$&&(this.yAxisWidth=$),this.yAxisWidth>H&&(this.yAxisWidth=H)}}]),pe}(),gr=function(){function pe(c){f(this,pe),this.w=c.w,this.lgCtx=c}return s(pe,[{key:"getLegendStyles",value:function(){var c=document.createElement("style");c.setAttribute("type","text/css");var d=document.createTextNode(`	
    	
      .apexcharts-legend {	
        display: flex;	
        overflow: auto;	
        padding: 0 10px;	
      }	
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {	
        flex-wrap: wrap	
      }	
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {	
        flex-direction: column;	
        bottom: 0;	
      }	
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {	
        justify-content: flex-start;	
      }	
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {	
        justify-content: center;  	
      }	
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {	
        justify-content: flex-end;	
      }	
      .apexcharts-legend-series {	
        cursor: pointer;	
        line-height: normal;	
      }	
      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{	
        display: flex;	
        align-items: center;	
      }	
      .apexcharts-legend-text {	
        position: relative;	
        font-size: 14px;	
      }	
      .apexcharts-legend-text *, .apexcharts-legend-marker * {	
        pointer-events: none;	
      }	
      .apexcharts-legend-marker {	
        position: relative;	
        display: inline-block;	
        cursor: pointer;	
        margin-right: 3px;	
        border-style: solid;
      }	
      	
      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{	
        display: inline-block;	
      }	
      .apexcharts-legend-series.apexcharts-no-click {	
        cursor: auto;	
      }	
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {	
        display: none !important;	
      }	
      .apexcharts-inactive-legend {	
        opacity: 0.45;	
      }`);return c.appendChild(d),c}},{key:"getLegendBBox",value:function(){var c=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),d=c.width;return{clwh:c.height,clww:d}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(c,d){var m=this,v=this.w;if(v.globals.axisCharts||v.config.chart.type==="radialBar"){v.globals.resized=!0;var b=null,S=null;v.globals.risingSeries=[],v.globals.axisCharts?(b=v.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(c,"']")),S=parseInt(b.getAttribute("data:realIndex"),10)):(b=v.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(c+1,"']")),S=parseInt(b.getAttribute("rel"),10)-1),d?[{cs:v.globals.collapsedSeries,csi:v.globals.collapsedSeriesIndices},{cs:v.globals.ancillaryCollapsedSeries,csi:v.globals.ancillaryCollapsedSeriesIndices}].forEach(function($){m.riseCollapsedSeries($.cs,$.csi,S)}):this.hideSeries({seriesEl:b,realIndex:S})}else{var T=v.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(c+1,"'] path")),M=v.config.chart.type;if(M==="pie"||M==="polarArea"||M==="donut"){var z=v.config.plotOptions.pie.donut.labels;new de(this.lgCtx.ctx).pathMouseDown(T.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(T.members[0].node,z)}T.fire("click")}}},{key:"hideSeries",value:function(c){var d=c.seriesEl,m=c.realIndex,v=this.w,b=W.clone(v.config.series);if(v.globals.axisCharts){var S=!1;if(v.config.yaxis[m]&&v.config.yaxis[m].show&&v.config.yaxis[m].showAlways&&(S=!0,v.globals.ancillaryCollapsedSeriesIndices.indexOf(m)<0&&(v.globals.ancillaryCollapsedSeries.push({index:m,data:b[m].data.slice(),type:d.parentNode.className.baseVal.split("-")[1]}),v.globals.ancillaryCollapsedSeriesIndices.push(m))),!S){v.globals.collapsedSeries.push({index:m,data:b[m].data.slice(),type:d.parentNode.className.baseVal.split("-")[1]}),v.globals.collapsedSeriesIndices.push(m);var T=v.globals.risingSeries.indexOf(m);v.globals.risingSeries.splice(T,1)}}else v.globals.collapsedSeries.push({index:m,data:b[m]}),v.globals.collapsedSeriesIndices.push(m);for(var M=d.childNodes,z=0;z<M.length;z++)M[z].classList.contains("apexcharts-series-markers-wrap")&&(M[z].classList.contains("apexcharts-hide")?M[z].classList.remove("apexcharts-hide"):M[z].classList.add("apexcharts-hide"));v.globals.allSeriesCollapsed=v.globals.collapsedSeries.length===v.config.series.length,b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,v.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(c,d,m){var v=this.w,b=W.clone(v.config.series);if(c.length>0){for(var S=0;S<c.length;S++)c[S].index===m&&(v.globals.axisCharts?(b[m].data=c[S].data.slice(),c.splice(S,1),d.splice(S,1),v.globals.risingSeries.push(m)):(b[m]=c[S].data,c.splice(S,1),d.splice(S,1),v.globals.risingSeries.push(m)));b=this._getSeriesBasedOnCollapsedState(b),this.lgCtx.ctx.updateHelpers._updateSeries(b,v.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(c){var d=this.w;return d.globals.axisCharts?c.forEach(function(m,v){d.globals.collapsedSeriesIndices.indexOf(v)>-1&&(c[v].data=[])}):c.forEach(function(m,v){d.globals.collapsedSeriesIndices.indexOf(v)>-1&&(c[v]=0)}),c}}]),pe}(),Xr=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new gr(this)}return s(pe,[{key:"init",value:function(){var c=this.w,d=c.globals,m=c.config;if((m.legend.showForSingleSeries&&d.series.length===1||this.isBarsDistributed||d.series.length>1||!d.axisCharts)&&m.legend.show){for(;d.dom.elLegendWrap.firstChild;)d.dom.elLegendWrap.removeChild(d.dom.elLegendWrap.firstChild);this.drawLegends(),W.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),m.legend.position==="bottom"||m.legend.position==="top"?this.legendAlignHorizontal():m.legend.position!=="right"&&m.legend.position!=="left"||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var c=this,d=this.w,m=d.config.legend.fontFamily,v=d.globals.seriesNames,b=d.globals.colors.slice();if(d.config.chart.type==="heatmap"){var S=d.config.plotOptions.heatmap.colorScale.ranges;v=S.map(function(Nt){return Nt.name?Nt.name:Nt.from+" - "+Nt.to}),b=S.map(function(Nt){return Nt.color})}else this.isBarsDistributed&&(v=d.globals.labels.slice());d.config.legend.customLegendItems.length&&(v=d.config.legend.customLegendItems);for(var T=d.globals.legendFormatter,M=d.config.legend.inverseOrder,z=M?v.length-1:0;M?z>=0:z<=v.length-1;M?z--:z++){var $,H=T(v[z],{seriesIndex:z,w:d}),B=!1,ee=!1;if(d.globals.collapsedSeries.length>0)for(var re=0;re<d.globals.collapsedSeries.length;re++)d.globals.collapsedSeries[re].index===z&&(B=!0);if(d.globals.ancillaryCollapsedSeriesIndices.length>0)for(var ce=0;ce<d.globals.ancillaryCollapsedSeriesIndices.length;ce++)d.globals.ancillaryCollapsedSeriesIndices[ce]===z&&(ee=!0);var ye=document.createElement("span");ye.classList.add("apexcharts-legend-marker");var _e=d.config.legend.markers.offsetX,Ee=d.config.legend.markers.offsetY,O=d.config.legend.markers.height,X=d.config.legend.markers.width,Q=d.config.legend.markers.strokeWidth,xe=d.config.legend.markers.strokeColor,ke=d.config.legend.markers.radius,Le=ye.style;Le.background=b[z],Le.color=b[z],Le.setProperty("background",b[z],"important"),d.config.legend.markers.fillColors&&d.config.legend.markers.fillColors[z]&&(Le.background=d.config.legend.markers.fillColors[z]),d.globals.seriesColors[z]!==void 0&&(Le.background=d.globals.seriesColors[z],Le.color=d.globals.seriesColors[z]),Le.height=Array.isArray(O)?parseFloat(O[z])+"px":parseFloat(O)+"px",Le.width=Array.isArray(X)?parseFloat(X[z])+"px":parseFloat(X)+"px",Le.left=(Array.isArray(_e)?parseFloat(_e[z]):parseFloat(_e))+"px",Le.top=(Array.isArray(Ee)?parseFloat(Ee[z]):parseFloat(Ee))+"px",Le.borderWidth=Array.isArray(Q)?Q[z]:Q,Le.borderColor=Array.isArray(xe)?xe[z]:xe,Le.borderRadius=Array.isArray(ke)?parseFloat(ke[z])+"px":parseFloat(ke)+"px",d.config.legend.markers.customHTML&&(Array.isArray(d.config.legend.markers.customHTML)?d.config.legend.markers.customHTML[z]&&(ye.innerHTML=d.config.legend.markers.customHTML[z]()):ye.innerHTML=d.config.legend.markers.customHTML()),de.setAttrs(ye,{rel:z+1,"data:collapsed":B||ee}),(B||ee)&&ye.classList.add("apexcharts-inactive-legend");var rt=document.createElement("div"),Ze=document.createElement("span");Ze.classList.add("apexcharts-legend-text"),Ze.innerHTML=Array.isArray(H)?H.join(" "):H;var Et=d.config.legend.labels.useSeriesColors?d.globals.colors[z]:Array.isArray(d.config.legend.labels.colors)?($=d.config.legend.labels.colors)===null||$===void 0?void 0:$[z]:d.config.legend.labels.colors;Et||(Et=d.config.chart.foreColor),Ze.style.color=Et,Ze.style.fontSize=parseFloat(d.config.legend.fontSize)+"px",Ze.style.fontWeight=d.config.legend.fontWeight,Ze.style.fontFamily=m||d.config.chart.fontFamily,de.setAttrs(Ze,{rel:z+1,i:z,"data:default-text":encodeURIComponent(H),"data:collapsed":B||ee}),rt.appendChild(ye),rt.appendChild(Ze);var Bt=new Ae(this.ctx);d.config.legend.showForZeroSeries||Bt.getSeriesTotalByIndex(z)===0&&Bt.seriesHaveSameValues(z)&&!Bt.isSeriesNull(z)&&d.globals.collapsedSeriesIndices.indexOf(z)===-1&&d.globals.ancillaryCollapsedSeriesIndices.indexOf(z)===-1&&rt.classList.add("apexcharts-hidden-zero-series"),d.config.legend.showForNullSeries||Bt.isSeriesNull(z)&&d.globals.collapsedSeriesIndices.indexOf(z)===-1&&d.globals.ancillaryCollapsedSeriesIndices.indexOf(z)===-1&&rt.classList.add("apexcharts-hidden-null-series"),d.globals.dom.elLegendWrap.appendChild(rt),d.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(d.config.legend.horizontalAlign)),d.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+d.config.legend.position),rt.classList.add("apexcharts-legend-series"),rt.style.margin="".concat(d.config.legend.itemMargin.vertical,"px ").concat(d.config.legend.itemMargin.horizontal,"px"),d.globals.dom.elLegendWrap.style.width=d.config.legend.width?d.config.legend.width+"px":"",d.globals.dom.elLegendWrap.style.height=d.config.legend.height?d.config.legend.height+"px":"",de.setAttrs(rt,{rel:z+1,seriesName:W.escapeString(v[z]),"data:collapsed":B||ee}),(B||ee)&&rt.classList.add("apexcharts-inactive-legend"),d.config.legend.onItemClick.toggleDataSeries||rt.classList.add("apexcharts-no-click")}d.globals.dom.elWrap.addEventListener("click",c.onLegendClick,!0),d.config.legend.onItemHover.highlightDataSeries&&d.config.legend.customLegendItems.length===0&&(d.globals.dom.elWrap.addEventListener("mousemove",c.onLegendHovered,!0),d.globals.dom.elWrap.addEventListener("mouseout",c.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(c,d){var m=this.w,v=m.globals.dom.elLegendWrap,b=v.getBoundingClientRect(),S=0,T=0;if(m.config.legend.position==="bottom")T+=m.globals.svgHeight-b.height/2;else if(m.config.legend.position==="top"){var M=new Zt(this.ctx),z=M.dimHelpers.getTitleSubtitleCoords("title").height,$=M.dimHelpers.getTitleSubtitleCoords("subtitle").height;T=T+(z>0?z-10:0)+($>0?$-10:0)}v.style.position="absolute",S=S+c+m.config.legend.offsetX,T=T+d+m.config.legend.offsetY,v.style.left=S+"px",v.style.top=T+"px",m.config.legend.position==="bottom"?(v.style.top="auto",v.style.bottom=5-m.config.legend.offsetY+"px"):m.config.legend.position==="right"&&(v.style.left="auto",v.style.right=25+m.config.legend.offsetX+"px"),["width","height"].forEach(function(H){v.style[H]&&(v.style[H]=parseInt(m.config.legend[H],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var c=this.w;c.globals.dom.elLegendWrap.style.right=0;var d=this.legendHelpers.getLegendBBox(),m=new Zt(this.ctx),v=m.dimHelpers.getTitleSubtitleCoords("title"),b=m.dimHelpers.getTitleSubtitleCoords("subtitle"),S=0;c.config.legend.position==="bottom"?S=-d.clwh/1.8:c.config.legend.position==="top"&&(S=v.height+b.height+c.config.title.margin+c.config.subtitle.margin-10),this.setLegendWrapXY(20,S)}},{key:"legendAlignVertical",value:function(){var c=this.w,d=this.legendHelpers.getLegendBBox(),m=0;c.config.legend.position==="left"&&(m=20),c.config.legend.position==="right"&&(m=c.globals.svgWidth-d.clww-10),this.setLegendWrapXY(m,20)}},{key:"onLegendHovered",value:function(c){var d=this.w,m=c.target.classList.contains("apexcharts-legend-series")||c.target.classList.contains("apexcharts-legend-text")||c.target.classList.contains("apexcharts-legend-marker");if(d.config.chart.type==="heatmap"||this.isBarsDistributed){if(m){var v=parseInt(c.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,v,this.w]),new Dt(this.ctx).highlightRangeInSeries(c,c.target)}}else!c.target.classList.contains("apexcharts-inactive-legend")&&m&&new Dt(this.ctx).toggleSeriesOnHover(c,c.target)}},{key:"onLegendClick",value:function(c){var d=this.w;if(!d.config.legend.customLegendItems.length&&(c.target.classList.contains("apexcharts-legend-series")||c.target.classList.contains("apexcharts-legend-text")||c.target.classList.contains("apexcharts-legend-marker"))){var m=parseInt(c.target.getAttribute("rel"),10)-1,v=c.target.getAttribute("data:collapsed")==="true",b=this.w.config.chart.events.legendClick;typeof b=="function"&&b(this.ctx,m,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,m,this.w]);var S=this.w.config.legend.markers.onClick;typeof S=="function"&&c.target.classList.contains("apexcharts-legend-marker")&&(S(this.ctx,m,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,m,this.w])),d.config.chart.type!=="treemap"&&d.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&d.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(m,v)}}}]),pe}(),Hn=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w;var d=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=d.globals.minX,this.maxX=d.globals.maxX}return s(pe,[{key:"createToolbar",value:function(){var c=this,d=this.w,m=function(){return document.createElement("div")},v=m();if(v.setAttribute("class","apexcharts-toolbar"),v.style.top=d.config.chart.toolbar.offsetY+"px",v.style.right=3-d.config.chart.toolbar.offsetX+"px",d.globals.dom.elWrap.appendChild(v),this.elZoom=m(),this.elZoomIn=m(),this.elZoomOut=m(),this.elPan=m(),this.elSelection=m(),this.elZoomReset=m(),this.elMenuIcon=m(),this.elMenu=m(),this.elCustomIcons=[],this.t=d.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var b=0;b<this.t.customIcons.length;b++)this.elCustomIcons.push(m());var S=[],T=function(H,B,ee){var re=H.toLowerCase();c.t[re]&&d.config.chart.zoom.enabled&&S.push({el:B,icon:typeof c.t[re]=="string"?c.t[re]:ee,title:c.localeValues[H],class:"apexcharts-".concat(re,"-icon")})};T("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),T("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var M=function(H){c.t[H]&&d.config.chart[H].enabled&&S.push({el:H==="zoom"?c.elZoom:c.elSelection,icon:typeof c.t[H]=="string"?c.t[H]:H==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:c.localeValues[H==="zoom"?"selectionZoom":"selection"],class:d.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(H,"-icon")})};M("zoom"),M("selection"),this.t.pan&&d.config.chart.zoom.enabled&&S.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:d.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),T("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&S.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var z=0;z<this.elCustomIcons.length;z++)S.push({el:this.elCustomIcons[z],icon:this.t.customIcons[z].icon,title:this.t.customIcons[z].title,index:this.t.customIcons[z].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[z].class});S.forEach(function(H,B){H.index&&W.moveIndexInArray(S,B,H.index)});for(var $=0;$<S.length;$++)de.setAttrs(S[$].el,{class:S[$].class,title:S[$].title}),S[$].el.innerHTML=S[$].icon,v.appendChild(S[$].el);this._createHamburgerMenu(v),d.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):d.globals.panEnabled?this.elPan.classList.add(this.selectedClass):d.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(c){this.elMenuItems=[],c.appendChild(this.elMenu),de.setAttrs(this.elMenu,{class:"apexcharts-menu"});var d=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||d.splice(2,1);for(var m=0;m<d.length;m++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[m].innerHTML=d[m].title,de.setAttrs(this.elMenuItems[m],{class:"apexcharts-menu-item ".concat(d[m].name),title:d[m].title}),this.elMenu.appendChild(this.elMenuItems[m])}},{key:"addToolbarEventListeners",value:function(){var c=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(m){m.classList.contains("exportSVG")?m.addEventListener("click",c.handleDownload.bind(c,"svg")):m.classList.contains("exportPNG")?m.addEventListener("click",c.handleDownload.bind(c,"png")):m.classList.contains("exportCSV")&&m.addEventListener("click",c.handleDownload.bind(c,"csv"))});for(var d=0;d<this.t.customIcons.length;d++)this.elCustomIcons[d].addEventListener("click",this.t.customIcons[d].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(c){this.ctx.getSyncedCharts().forEach(function(d){d.ctx.toolbar.toggleOtherControls();var m=c==="selection"?d.ctx.toolbar.elSelection:d.ctx.toolbar.elZoom,v=c==="selection"?"selectionEnabled":"zoomEnabled";d.w.globals[v]=!d.w.globals[v],m.classList.contains(d.ctx.toolbar.selectedClass)?m.classList.remove(d.ctx.toolbar.selectedClass):m.classList.add(d.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var c=this.w;this.elZoom||(this.elZoom=c.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=c.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=c.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(c){this.toggleOtherControls(),c==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var d=c==="pan"?this.elPan:this.elZoom,m=c==="pan"?this.elZoom:this.elPan;d&&d.classList.add(this.selectedClass),m&&m.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(c){c.ctx.toolbar.toggleOtherControls(),c.w.globals.panEnabled=!c.w.globals.panEnabled,c.ctx.toolbar.elPan.classList.contains(c.ctx.toolbar.selectedClass)?c.ctx.toolbar.elPan.classList.remove(c.ctx.toolbar.selectedClass):c.ctx.toolbar.elPan.classList.add(c.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var c=this,d=this.w;d.globals.panEnabled=!1,d.globals.zoomEnabled=!1,d.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(m){m&&m.classList.remove(c.selectedClass)})}},{key:"handleZoomIn",value:function(){var c=this.w;c.globals.isRangeBar&&(this.minX=c.globals.minY,this.maxX=c.globals.maxY);var d=(this.minX+this.maxX)/2,m=(this.minX+d)/2,v=(this.maxX+d)/2,b=this._getNewMinXMaxX(m,v);c.globals.disableZoomIn||this.zoomUpdateOptions(b.minX,b.maxX)}},{key:"handleZoomOut",value:function(){var c=this.w;if(c.globals.isRangeBar&&(this.minX=c.globals.minY,this.maxX=c.globals.maxY),!(c.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var d=(this.minX+this.maxX)/2,m=this.minX-(d-this.minX),v=this.maxX-(d-this.maxX),b=this._getNewMinXMaxX(m,v);c.globals.disableZoomOut||this.zoomUpdateOptions(b.minX,b.maxX)}}},{key:"_getNewMinXMaxX",value:function(c,d){var m=this.w.config.xaxis.convertedCatToNumeric;return{minX:m?Math.floor(c):c,maxX:m?Math.floor(d):d}}},{key:"zoomUpdateOptions",value:function(c,d){var m=this.w;if(c!==void 0||d!==void 0){if(!(m.config.xaxis.convertedCatToNumeric&&(c<1&&(c=1,d=m.globals.dataPoints),d-c<2))){var v={min:c,max:d},b=this.getBeforeZoomRange(v);b&&(v=b.xaxis);var S={xaxis:v},T=W.clone(m.globals.initialConfig.yaxis);m.config.chart.zoom.autoScaleYaxis&&(T=new nn(this.ctx).autoScaleY(this.ctx,T,{xaxis:v})),m.config.chart.group||(S.yaxis=T),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(S,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(v,T)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(c,d){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:c,yaxis:d})}},{key:"getBeforeZoomRange",value:function(c,d){var m=null;return typeof this.ev.beforeZoom=="function"&&(m=this.ev.beforeZoom(this,{xaxis:c,yaxis:d})),m}},{key:"toggleMenu",value:function(){var c=this;window.setTimeout(function(){c.elMenu.classList.contains("apexcharts-menu-open")?c.elMenu.classList.remove("apexcharts-menu-open"):c.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(c){var d=this.w,m=new fr(this.ctx);switch(c){case"svg":m.exportToSVG(this.ctx);break;case"png":m.exportToPng(this.ctx);break;case"csv":m.exportToCSV({series:d.config.series,columnDelimiter:d.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(c){this.ctx.getSyncedCharts().forEach(function(d){var m=d.w;if(m.globals.lastXAxis.min=m.globals.initialConfig.xaxis.min,m.globals.lastXAxis.max=m.globals.initialConfig.xaxis.max,d.updateHelpers.revertDefaultAxisMinMax(),typeof m.config.chart.events.beforeResetZoom=="function"){var v=m.config.chart.events.beforeResetZoom(d,m);v&&d.updateHelpers.revertDefaultAxisMinMax(v)}typeof m.config.chart.events.zoomed=="function"&&d.ctx.toolbar.zoomCallback({min:m.config.xaxis.min,max:m.config.xaxis.max}),m.globals.zoomed=!1;var b=d.ctx.series.emptyCollapsedSeries(W.clone(m.globals.initialSeries));d.updateHelpers._updateSeries(b,m.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),pe}(),ti=function(pe){I(d,Hn);var c=q(d);function d(m){var v;return f(this,d),(v=c.call(this,m)).ctx=m,v.w=m.w,v.dragged=!1,v.graphics=new de(v.ctx),v.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],v.clientX=0,v.clientY=0,v.startX=0,v.endX=0,v.dragX=0,v.startY=0,v.endY=0,v.dragY=0,v.moveDirection="none",v}return s(d,[{key:"init",value:function(m){var v=this,b=m.xyRatios,S=this.w,T=this;this.xyRatios=b,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=S.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),S.globals.dom.elGraphical.add(this.zoomRect),S.globals.dom.elGraphical.add(this.selectionRect),S.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:S.globals.gridWidth,maxY:S.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):S.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:S.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=S.globals.dom.baseEl.querySelector("".concat(S.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(M){v.hoverArea.addEventListener(M,T.svgMouseEvents.bind(T,b),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(m,v){var b=this.w,S=this,T=this.ctx.toolbar,M=b.globals.zoomEnabled?b.config.chart.zoom.type:b.config.chart.selection.type,z=b.config.chart.toolbar.autoSelected;if(v.shiftKey?(this.shiftWasPressed=!0,T.enableZoomPanFromToolbar(z==="pan"?"zoom":"pan")):this.shiftWasPressed&&(T.enableZoomPanFromToolbar(z),this.shiftWasPressed=!1),v.target){var $,H=v.target.classList;if(v.target.parentNode&&v.target.parentNode!==null&&($=v.target.parentNode.classList),!(H.contains("apexcharts-selection-rect")||H.contains("apexcharts-legend-marker")||H.contains("apexcharts-legend-text")||$&&$.contains("apexcharts-toolbar"))){if(S.clientX=v.type==="touchmove"||v.type==="touchstart"?v.touches[0].clientX:v.type==="touchend"?v.changedTouches[0].clientX:v.clientX,S.clientY=v.type==="touchmove"||v.type==="touchstart"?v.touches[0].clientY:v.type==="touchend"?v.changedTouches[0].clientY:v.clientY,v.type==="mousedown"&&v.which===1){var B=S.gridRect.getBoundingClientRect();S.startX=S.clientX-B.left,S.startY=S.clientY-B.top,S.dragged=!1,S.w.globals.mousedown=!0}if((v.type==="mousemove"&&v.which===1||v.type==="touchmove")&&(S.dragged=!0,b.globals.panEnabled?(b.globals.selection=null,S.w.globals.mousedown&&S.panDragging({context:S,zoomtype:M,xyRatios:m})):(S.w.globals.mousedown&&b.globals.zoomEnabled||S.w.globals.mousedown&&b.globals.selectionEnabled)&&(S.selection=S.selectionDrawing({context:S,zoomtype:M}))),v.type==="mouseup"||v.type==="touchend"||v.type==="mouseleave"){var ee=S.gridRect.getBoundingClientRect();S.w.globals.mousedown&&(S.endX=S.clientX-ee.left,S.endY=S.clientY-ee.top,S.dragX=Math.abs(S.endX-S.startX),S.dragY=Math.abs(S.endY-S.startY),(b.globals.zoomEnabled||b.globals.selectionEnabled)&&S.selectionDrawn({context:S,zoomtype:M}),b.globals.panEnabled&&b.config.xaxis.convertedCatToNumeric&&S.delayedPanScrolled()),b.globals.zoomEnabled&&S.hideSelectionRect(this.selectionRect),S.dragged=!1,S.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var m=this.w;if(this.selectionRect){var v=this.selectionRect.node.getBoundingClientRect();v.width>0&&v.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:m.globals.gridWidth,maxY:m.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var m=this.w,v=this.xyRatios;if(!m.globals.zoomEnabled){if(m.globals.selection!==void 0&&m.globals.selection!==null)this.drawSelectionRect(m.globals.selection);else if(m.config.chart.selection.xaxis.min!==void 0&&m.config.chart.selection.xaxis.max!==void 0){var b=(m.config.chart.selection.xaxis.min-m.globals.minX)/v.xRatio,S={x:b,y:0,width:m.globals.gridWidth-(m.globals.maxX-m.config.chart.selection.xaxis.max)/v.xRatio-b,height:m.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(S),this.makeSelectionRectDraggable(),typeof m.config.chart.events.selection=="function"&&m.config.chart.events.selection(this.ctx,{xaxis:{min:m.config.chart.selection.xaxis.min,max:m.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(m){var v=m.x,b=m.y,S=m.width,T=m.height,M=m.translateX,z=M===void 0?0:M,$=m.translateY,H=$===void 0?0:$,B=this.w,ee=this.zoomRect,re=this.selectionRect;if(this.dragged||B.globals.selection!==null){var ce={transform:"translate("+z+", "+H+")"};B.globals.zoomEnabled&&this.dragged&&(S<0&&(S=1),ee.attr({x:v,y:b,width:S,height:T,fill:B.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":B.config.chart.zoom.zoomedArea.fill.opacity,stroke:B.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":B.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":B.config.chart.zoom.zoomedArea.stroke.opacity}),de.setAttrs(ee.node,ce)),B.globals.selectionEnabled&&(re.attr({x:v,y:b,width:S>0?S:0,height:T>0?T:0,fill:B.config.chart.selection.fill.color,"fill-opacity":B.config.chart.selection.fill.opacity,stroke:B.config.chart.selection.stroke.color,"stroke-width":B.config.chart.selection.stroke.width,"stroke-dasharray":B.config.chart.selection.stroke.dashArray,"stroke-opacity":B.config.chart.selection.stroke.opacity}),de.setAttrs(re.node,ce))}}},{key:"hideSelectionRect",value:function(m){m&&m.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(m){var v=m.context,b=m.zoomtype,S=this.w,T=v,M=this.gridRect.getBoundingClientRect(),z=T.startX-1,$=T.startY,H=!1,B=!1,ee=T.clientX-M.left-z,re=T.clientY-M.top-$,ce={};return Math.abs(ee+z)>S.globals.gridWidth?ee=S.globals.gridWidth-z:T.clientX-M.left<0&&(ee=z),z>T.clientX-M.left&&(H=!0,ee=Math.abs(ee)),$>T.clientY-M.top&&(B=!0,re=Math.abs(re)),ce=b==="x"?{x:H?z-ee:z,y:0,width:ee,height:S.globals.gridHeight}:b==="y"?{x:0,y:B?$-re:$,width:S.globals.gridWidth,height:re}:{x:H?z-ee:z,y:B?$-re:$,width:ee,height:re},T.drawSelectionRect(ce),T.selectionDragging("resizing"),ce}},{key:"selectionDragging",value:function(m,v){var b=this,S=this.w,T=this.xyRatios,M=this.selectionRect,z=0;m==="resizing"&&(z=30);var $=function(B){return parseFloat(M.node.getAttribute(B))},H={x:$("x"),y:$("y"),width:$("width"),height:$("height")};S.globals.selection=H,typeof S.config.chart.events.selection=="function"&&S.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var B=b.gridRect.getBoundingClientRect(),ee=M.node.getBoundingClientRect(),re={xaxis:{min:S.globals.xAxisScale.niceMin+(ee.left-B.left)*T.xRatio,max:S.globals.xAxisScale.niceMin+(ee.right-B.left)*T.xRatio},yaxis:{min:S.globals.yAxisScale[0].niceMin+(B.bottom-ee.bottom)*T.yRatio[0],max:S.globals.yAxisScale[0].niceMax-(ee.top-B.top)*T.yRatio[0]}};S.config.chart.events.selection(b.ctx,re),S.config.chart.brush.enabled&&S.config.chart.events.brushScrolled!==void 0&&S.config.chart.events.brushScrolled(b.ctx,re)},z))}},{key:"selectionDrawn",value:function(m){var v=m.context,b=m.zoomtype,S=this.w,T=v,M=this.xyRatios,z=this.ctx.toolbar;if(T.startX>T.endX){var $=T.startX;T.startX=T.endX,T.endX=$}if(T.startY>T.endY){var H=T.startY;T.startY=T.endY,T.endY=H}var B=void 0,ee=void 0;S.globals.isRangeBar?(B=S.globals.yAxisScale[0].niceMin+T.startX*M.invertedYRatio,ee=S.globals.yAxisScale[0].niceMin+T.endX*M.invertedYRatio):(B=S.globals.xAxisScale.niceMin+T.startX*M.xRatio,ee=S.globals.xAxisScale.niceMin+T.endX*M.xRatio);var re=[],ce=[];if(S.config.yaxis.forEach(function(ke,Le){re.push(S.globals.yAxisScale[Le].niceMax-M.yRatio[Le]*T.startY),ce.push(S.globals.yAxisScale[Le].niceMax-M.yRatio[Le]*T.endY)}),T.dragged&&(T.dragX>10||T.dragY>10)&&B!==ee){if(S.globals.zoomEnabled){var ye=W.clone(S.globals.initialConfig.yaxis),_e=W.clone(S.globals.initialConfig.xaxis);if(S.globals.zoomed=!0,S.config.xaxis.convertedCatToNumeric&&(B=Math.floor(B),ee=Math.floor(ee),B<1&&(B=1,ee=S.globals.dataPoints),ee-B<2&&(ee=B+1)),b!=="xy"&&b!=="x"||(_e={min:B,max:ee}),b!=="xy"&&b!=="y"||ye.forEach(function(ke,Le){ye[Le].min=ce[Le],ye[Le].max=re[Le]}),S.config.chart.zoom.autoScaleYaxis){var Ee=new nn(T.ctx);ye=Ee.autoScaleY(T.ctx,ye,{xaxis:_e})}if(z){var O=z.getBeforeZoomRange(_e,ye);O&&(_e=O.xaxis?O.xaxis:_e,ye=O.yaxis?O.yaxis:ye)}var X={xaxis:_e};S.config.chart.group||(X.yaxis=ye),T.ctx.updateHelpers._updateOptions(X,!1,T.w.config.chart.animations.dynamicAnimation.enabled),typeof S.config.chart.events.zoomed=="function"&&z.zoomCallback(_e,ye)}else if(S.globals.selectionEnabled){var Q,xe=null;Q={min:B,max:ee},b!=="xy"&&b!=="y"||(xe=W.clone(S.config.yaxis)).forEach(function(ke,Le){xe[Le].min=ce[Le],xe[Le].max=re[Le]}),S.globals.selection=T.selection,typeof S.config.chart.events.selection=="function"&&S.config.chart.events.selection(T.ctx,{xaxis:Q,yaxis:xe})}}}},{key:"panDragging",value:function(m){var v=m.context,b=this.w,S=v;if(b.globals.lastClientPosition.x!==void 0){var T=b.globals.lastClientPosition.x-S.clientX,M=b.globals.lastClientPosition.y-S.clientY;Math.abs(T)>Math.abs(M)&&T>0?this.moveDirection="left":Math.abs(T)>Math.abs(M)&&T<0?this.moveDirection="right":Math.abs(M)>Math.abs(T)&&M>0?this.moveDirection="up":Math.abs(M)>Math.abs(T)&&M<0&&(this.moveDirection="down")}b.globals.lastClientPosition={x:S.clientX,y:S.clientY};var z=b.globals.isRangeBar?b.globals.minY:b.globals.minX,$=b.globals.isRangeBar?b.globals.maxY:b.globals.maxX;b.config.xaxis.convertedCatToNumeric||S.panScrolled(z,$)}},{key:"delayedPanScrolled",value:function(){var m=this.w,v=m.globals.minX,b=m.globals.maxX,S=(m.globals.maxX-m.globals.minX)/2;this.moveDirection==="left"?(v=m.globals.minX+S,b=m.globals.maxX+S):this.moveDirection==="right"&&(v=m.globals.minX-S,b=m.globals.maxX-S),v=Math.floor(v),b=Math.floor(b),this.updateScrolledChart({xaxis:{min:v,max:b}},v,b)}},{key:"panScrolled",value:function(m,v){var b=this.w,S=this.xyRatios,T=W.clone(b.globals.initialConfig.yaxis),M=S.xRatio,z=b.globals.minX,$=b.globals.maxX;b.globals.isRangeBar&&(M=S.invertedYRatio,z=b.globals.minY,$=b.globals.maxY),this.moveDirection==="left"?(m=z+b.globals.gridWidth/15*M,v=$+b.globals.gridWidth/15*M):this.moveDirection==="right"&&(m=z-b.globals.gridWidth/15*M,v=$-b.globals.gridWidth/15*M),b.globals.isRangeBar||(m<b.globals.initialMinX||v>b.globals.initialMaxX)&&(m=z,v=$);var H={min:m,max:v};b.config.chart.zoom.autoScaleYaxis&&(T=new nn(this.ctx).autoScaleY(this.ctx,T,{xaxis:H}));var B={xaxis:{min:m,max:v}};b.config.chart.group||(B.yaxis=T),this.updateScrolledChart(B,m,v)}},{key:"updateScrolledChart",value:function(m,v,b){var S=this.w;this.ctx.updateHelpers._updateOptions(m,!1,!1),typeof S.config.chart.events.scrolled=="function"&&S.config.chart.events.scrolled(this.ctx,{xaxis:{min:v,max:b}})}}]),d}(),qn=function(){function pe(c){f(this,pe),this.w=c.w,this.ttCtx=c,this.ctx=c.ctx}return s(pe,[{key:"getNearestValues",value:function(c){var d=c.hoverArea,m=c.elGrid,v=c.clientX,b=c.clientY,S=this.w,T=m.getBoundingClientRect(),M=T.width,z=T.height,$=M/(S.globals.dataPoints-1),H=z/S.globals.dataPoints,B=this.hasBars();!S.globals.comboCharts&&!B||S.config.xaxis.convertedCatToNumeric||($=M/S.globals.dataPoints);var ee=v-T.left-S.globals.barPadForNumericAxis,re=b-T.top;ee<0||re<0||ee>M||re>z?(d.classList.remove("hovering-zoom"),d.classList.remove("hovering-pan")):S.globals.zoomEnabled?(d.classList.remove("hovering-pan"),d.classList.add("hovering-zoom")):S.globals.panEnabled&&(d.classList.remove("hovering-zoom"),d.classList.add("hovering-pan"));var ce=Math.round(ee/$),ye=Math.floor(re/H);B&&!S.config.xaxis.convertedCatToNumeric&&(ce=Math.ceil(ee/$),ce-=1);var _e=null,Ee=null,O=S.globals.seriesXvalues.map(function(Le){return Le.filter(function(rt){return W.isNumber(rt)})}),X=S.globals.seriesYvalues.map(function(Le){return Le.filter(function(rt){return W.isNumber(rt)})});if(S.globals.isXNumeric){var Q=this.ttCtx.getElGrid().getBoundingClientRect(),xe=ee*(Q.width/M),ke=re*(Q.height/z);_e=(Ee=this.closestInMultiArray(xe,ke,O,X)).index,ce=Ee.j,_e!==null&&(O=S.globals.seriesXvalues[_e],ce=(Ee=this.closestInArray(xe,O)).index)}return S.globals.capturedSeriesIndex=_e===null?-1:_e,(!ce||ce<1)&&(ce=0),S.globals.isBarHorizontal?S.globals.capturedDataPointIndex=ye:S.globals.capturedDataPointIndex=ce,{capturedSeries:_e,j:S.globals.isBarHorizontal?ye:ce,hoverX:ee,hoverY:re}}},{key:"closestInMultiArray",value:function(c,d,m,v){var b=this.w,S=0,T=null,M=-1;b.globals.series.length>1?S=this.getFirstActiveXArray(m):T=0;var z=m[S][0],$=Math.abs(c-z);if(m.forEach(function(ee){ee.forEach(function(re,ce){var ye=Math.abs(c-re);ye<=$&&($=ye,M=ce)})}),M!==-1){var H=v[S][M],B=Math.abs(d-H);T=S,v.forEach(function(ee,re){var ce=Math.abs(d-ee[M]);ce<=B&&(B=ce,T=re)})}return{index:T,j:M}}},{key:"getFirstActiveXArray",value:function(c){for(var d=this.w,m=0,v=c.map(function(S,T){return S.length>0?T:-1}),b=0;b<v.length;b++)if(v[b]!==-1&&d.globals.collapsedSeriesIndices.indexOf(b)===-1&&d.globals.ancillaryCollapsedSeriesIndices.indexOf(b)===-1){m=v[b];break}return m}},{key:"closestInArray",value:function(c,d){for(var m=d[0],v=null,b=Math.abs(c-m),S=0;S<d.length;S++){var T=Math.abs(c-d[S]);T<b&&(b=T,v=S)}return{index:v}}},{key:"isXoverlap",value:function(c){var d=[],m=this.w.globals.seriesX.filter(function(b){return b[0]!==void 0});if(m.length>0)for(var v=0;v<m.length-1;v++)m[v][c]!==void 0&&m[v+1][c]!==void 0&&m[v][c]!==m[v+1][c]&&d.push("unEqual");return d.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var c=!0,d=this.w.globals.initialSeries,m=0;m<d.length-1;m++)if(d[m].data.length!==d[m+1].data.length){c=!1;break}return c}},{key:"getBarsHeight",value:function(c){return ae(c).reduce(function(d,m){return d+m.getBBox().height},0)}},{key:"getElMarkers",value:function(c){return typeof c=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(c,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var c=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(c=ae(c)).sort(function(m,v){var b=Number(m.getAttribute("data:realIndex")),S=Number(v.getAttribute("data:realIndex"));return S<b?1:S>b?-1:0});var d=[];return c.forEach(function(m){d.push(m.querySelector(".apexcharts-marker"))}),d}},{key:"hasMarkers",value:function(c){return this.getElMarkers(c).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(c){var d=this.w,m=d.config.markers.hover.size;return m===void 0&&(m=d.globals.markers.size[c]+d.config.markers.hover.sizeOffset),m}},{key:"toggleAllTooltipSeriesGroups",value:function(c){var d=this.w,m=this.ttCtx;m.allTooltipSeriesGroups.length===0&&(m.allTooltipSeriesGroups=d.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var v=m.allTooltipSeriesGroups,b=0;b<v.length;b++)c==="enable"?(v[b].classList.add("apexcharts-active"),v[b].style.display=d.config.tooltip.items.display):(v[b].classList.remove("apexcharts-active"),v[b].style.display="none")}}]),pe}(),Ii=function(){function pe(c){f(this,pe),this.w=c.w,this.ctx=c.ctx,this.ttCtx=c,this.tooltipUtil=new qn(c)}return s(pe,[{key:"drawSeriesTexts",value:function(c){var d=c.shared,m=d===void 0||d,v=c.ttItems,b=c.i,S=b===void 0?0:b,T=c.j,M=T===void 0?null:T,z=c.y1,$=c.y2,H=c.e,B=this.w;B.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:S,j:M,y1:z,y2:$,w:B}):this.toggleActiveInactiveSeries(m);var ee=this.getValuesToPrint({i:S,j:M});this.printLabels({i:S,j:M,values:ee,ttItems:v,shared:m,e:H});var re=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=re.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=re.getBoundingClientRect().height}},{key:"printLabels",value:function(c){var d,m=this,v=c.i,b=c.j,S=c.values,T=c.ttItems,M=c.shared,z=c.e,$=this.w,H=[],B=function(Q){return $.globals.seriesGoals[Q]&&$.globals.seriesGoals[Q][b]&&Array.isArray($.globals.seriesGoals[Q][b])},ee=S.xVal,re=S.zVal,ce=S.xAxisTTVal,ye="",_e=$.globals.colors[v];b!==null&&$.config.plotOptions.bar.distributed&&(_e=$.globals.colors[b]);for(var Ee=function(Q,xe){var ke=m.getFormatters(v);ye=m.getSeriesName({fn:ke.yLbTitleFormatter,index:v,seriesIndex:v,j:b}),$.config.chart.type==="treemap"&&(ye=ke.yLbTitleFormatter(String($.config.series[v].data[b].x),{series:$.globals.series,seriesIndex:v,dataPointIndex:b,w:$}));var Le=$.config.tooltip.inverseOrder?xe:Q;if($.globals.axisCharts){var rt=function(Bt){var Nt,hr,ar,Jr;return $.globals.isRangeData?ke.yLbFormatter((Nt=$.globals.seriesRangeStart)===null||Nt===void 0||(hr=Nt[Bt])===null||hr===void 0?void 0:hr[b],{series:$.globals.seriesRangeStart,seriesIndex:Bt,dataPointIndex:b,w:$})+" - "+ke.yLbFormatter((ar=$.globals.seriesRangeEnd)===null||ar===void 0||(Jr=ar[Bt])===null||Jr===void 0?void 0:Jr[b],{series:$.globals.seriesRangeEnd,seriesIndex:Bt,dataPointIndex:b,w:$}):ke.yLbFormatter($.globals.series[Bt][b],{series:$.globals.series,seriesIndex:Bt,dataPointIndex:b,w:$})};if(M)ke=m.getFormatters(Le),ye=m.getSeriesName({fn:ke.yLbTitleFormatter,index:Le,seriesIndex:v,j:b}),_e=$.globals.colors[Le],d=rt(Le),B(Le)&&(H=$.globals.seriesGoals[Le][b].map(function(Bt){return{attrs:Bt,val:ke.yLbFormatter(Bt.value,{seriesIndex:Le,dataPointIndex:b,w:$})}}));else{var Ze,Et=z==null||(Ze=z.target)===null||Ze===void 0?void 0:Ze.getAttribute("fill");Et&&(_e=Et.indexOf("url")!==-1?document.querySelector(Et.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):Et),d=rt(v),B(v)&&Array.isArray($.globals.seriesGoals[v][b])&&(H=$.globals.seriesGoals[v][b].map(function(Bt){return{attrs:Bt,val:ke.yLbFormatter(Bt.value,{seriesIndex:v,dataPointIndex:b,w:$})}}))}}b===null&&(d=ke.yLbFormatter($.globals.series[v],n(n({},$),{},{seriesIndex:v,dataPointIndex:v}))),m.DOMHandling({i:v,t:Le,j:b,ttItems:T,values:{val:d,goalVals:H,xVal:ee,xAxisTTVal:ce,zVal:re},seriesName:ye,shared:M,pColor:_e})},O=0,X=$.globals.series.length-1;O<$.globals.series.length;O++,X--)Ee(O,X)}},{key:"getFormatters",value:function(c){var d,m=this.w,v=m.globals.yLabelFormatters[c];return m.globals.ttVal!==void 0?Array.isArray(m.globals.ttVal)?(v=m.globals.ttVal[c]&&m.globals.ttVal[c].formatter,d=m.globals.ttVal[c]&&m.globals.ttVal[c].title&&m.globals.ttVal[c].title.formatter):(v=m.globals.ttVal.formatter,typeof m.globals.ttVal.title.formatter=="function"&&(d=m.globals.ttVal.title.formatter)):d=m.config.tooltip.y.title.formatter,typeof v!="function"&&(v=m.globals.yLabelFormatters[0]?m.globals.yLabelFormatters[0]:function(b){return b}),typeof d!="function"&&(d=function(b){return b}),{yLbFormatter:v,yLbTitleFormatter:d}}},{key:"getSeriesName",value:function(c){var d=c.fn,m=c.index,v=c.seriesIndex,b=c.j,S=this.w;return d(String(S.globals.seriesNames[m]),{series:S.globals.series,seriesIndex:v,dataPointIndex:b,w:S})}},{key:"DOMHandling",value:function(c){c.i;var d=c.t,m=c.j,v=c.ttItems,b=c.values,S=c.seriesName,T=c.shared,M=c.pColor,z=this.w,$=this.ttCtx,H=b.val,B=b.goalVals,ee=b.xVal,re=b.xAxisTTVal,ce=b.zVal,ye=null;ye=v[d].children,z.config.tooltip.fillSeriesColor&&(v[d].style.backgroundColor=M,ye[0].style.display="none"),$.showTooltipTitle&&($.tooltipTitle===null&&($.tooltipTitle=z.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),$.tooltipTitle.innerHTML=ee),$.isXAxisTooltipEnabled&&($.xaxisTooltipText.innerHTML=re!==""?re:ee);var _e=v[d].querySelector(".apexcharts-tooltip-text-y-label");_e&&(_e.innerHTML=S||"");var Ee=v[d].querySelector(".apexcharts-tooltip-text-y-value");Ee&&(Ee.innerHTML=H!==void 0?H:""),ye[0]&&ye[0].classList.contains("apexcharts-tooltip-marker")&&(z.config.tooltip.marker.fillColors&&Array.isArray(z.config.tooltip.marker.fillColors)&&(M=z.config.tooltip.marker.fillColors[d]),ye[0].style.backgroundColor=M),z.config.tooltip.marker.show||(ye[0].style.display="none");var O=v[d].querySelector(".apexcharts-tooltip-text-goals-label"),X=v[d].querySelector(".apexcharts-tooltip-text-goals-value");if(B.length&&z.globals.seriesGoals[d]){var Q=function(){var xe="<div >",ke="<div>";B.forEach(function(Le,rt){xe+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(Le.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(Le.attrs.name,"</div>"),ke+="<div>".concat(Le.val,"</div>")}),O.innerHTML=xe+"</div>",X.innerHTML=ke+"</div>"};T?z.globals.seriesGoals[d][m]&&Array.isArray(z.globals.seriesGoals[d][m])?Q():(O.innerHTML="",X.innerHTML=""):Q()}else O.innerHTML="",X.innerHTML="";ce!==null&&(v[d].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=z.config.tooltip.z.title,v[d].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=ce!==void 0?ce:""),T&&ye[0]&&(H==null||z.globals.ancillaryCollapsedSeriesIndices.indexOf(d)>-1||z.globals.collapsedSeriesIndices.indexOf(d)>-1?ye[0].parentNode.style.display="none":ye[0].parentNode.style.display=z.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(c){var d=this.w;if(c)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var m=d.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");m&&(m.classList.add("apexcharts-active"),m.style.display=d.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(c){var d=c.i,m=c.j,v=this.w,b=this.ctx.series.filteredSeriesX(),S="",T="",M=null,z=null,$={series:v.globals.series,seriesIndex:d,dataPointIndex:m,w:v},H=v.globals.ttZFormatter;m===null?z=v.globals.series[d]:v.globals.isXNumeric&&v.config.chart.type!=="treemap"?(S=b[d][m],b[d].length===0&&(S=b[this.tooltipUtil.getFirstActiveXArray(b)][m])):S=v.globals.labels[m]!==void 0?v.globals.labels[m]:"";var B=S;return v.globals.isXNumeric&&v.config.xaxis.type==="datetime"?S=new Pt(this.ctx).xLabelFormat(v.globals.ttKeyFormatter,B,B,{i:void 0,dateFormatter:new ft(this.ctx).formatDate,w:this.w}):S=v.globals.isBarHorizontal?v.globals.yLabelFormatters[0](B,$):v.globals.xLabelFormatter(B,$),v.config.tooltip.x.formatter!==void 0&&(S=v.globals.ttKeyFormatter(B,$)),v.globals.seriesZ.length>0&&v.globals.seriesZ[d].length>0&&(M=H(v.globals.seriesZ[d][m],v)),T=typeof v.config.xaxis.tooltip.formatter=="function"?v.globals.xaxisTooltipFormatter(B,$):S,{val:Array.isArray(z)?z.join(" "):z,xVal:Array.isArray(S)?S.join(" "):S,xAxisTTVal:Array.isArray(T)?T.join(" "):T,zVal:M}}},{key:"handleCustomTooltip",value:function(c){var d=c.i,m=c.j,v=c.y1,b=c.y2,S=c.w,T=this.ttCtx.getElTooltip(),M=S.config.tooltip.custom;Array.isArray(M)&&M[d]&&(M=M[d]),T.innerHTML=M({ctx:this.ctx,series:S.globals.series,seriesIndex:d,dataPointIndex:m,y1:v,y2:b,w:S})}}]),pe}(),zi=function(){function pe(c){f(this,pe),this.ttCtx=c,this.ctx=c.ctx,this.w=c.w}return s(pe,[{key:"moveXCrosshairs",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,m=this.ttCtx,v=this.w,b=m.getElXCrosshairs(),S=c-m.xcrosshairsWidth/2,T=v.globals.labels.slice().length;if(d!==null&&(S=v.globals.gridWidth/T*d),b===null||v.globals.isBarHorizontal||(b.setAttribute("x",S),b.setAttribute("x1",S),b.setAttribute("x2",S),b.setAttribute("y2",v.globals.gridHeight),b.classList.add("apexcharts-active")),S<0&&(S=0),S>v.globals.gridWidth&&(S=v.globals.gridWidth),m.isXAxisTooltipEnabled){var M=S;v.config.xaxis.crosshairs.width!=="tickWidth"&&v.config.xaxis.crosshairs.width!=="barWidth"||(M=S+m.xcrosshairsWidth/2),this.moveXAxisTooltip(M)}}},{key:"moveYCrosshairs",value:function(c){var d=this.ttCtx;d.ycrosshairs!==null&&de.setAttrs(d.ycrosshairs,{y1:c,y2:c}),d.ycrosshairsHidden!==null&&de.setAttrs(d.ycrosshairsHidden,{y1:c,y2:c})}},{key:"moveXAxisTooltip",value:function(c){var d=this.w,m=this.ttCtx;if(m.xaxisTooltip!==null&&m.xcrosshairsWidth!==0){m.xaxisTooltip.classList.add("apexcharts-active");var v=m.xaxisOffY+d.config.xaxis.tooltip.offsetY+d.globals.translateY+1+d.config.xaxis.offsetY;if(c-=m.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(c)){c+=d.globals.translateX;var b;b=new de(this.ctx).getTextRects(m.xaxisTooltipText.innerHTML),m.xaxisTooltipText.style.minWidth=b.width+"px",m.xaxisTooltip.style.left=c+"px",m.xaxisTooltip.style.top=v+"px"}}}},{key:"moveYAxisTooltip",value:function(c){var d=this.w,m=this.ttCtx;m.yaxisTTEls===null&&(m.yaxisTTEls=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var v=parseInt(m.ycrosshairsHidden.getAttribute("y1"),10),b=d.globals.translateY+v,S=m.yaxisTTEls[c].getBoundingClientRect().height,T=d.globals.translateYAxisX[c]-2;d.config.yaxis[c].opposite&&(T-=26),b-=S/2,d.globals.ignoreYAxisIndexes.indexOf(c)===-1?(m.yaxisTTEls[c].classList.add("apexcharts-active"),m.yaxisTTEls[c].style.top=b+"px",m.yaxisTTEls[c].style.left=T+d.config.yaxis[c].tooltip.offsetX+"px"):m.yaxisTTEls[c].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=this.w,b=this.ttCtx,S=b.getElTooltip(),T=b.tooltipRect,M=m!==null?parseFloat(m):1,z=parseFloat(c)+M+5,$=parseFloat(d)+M/2;if(z>v.globals.gridWidth/2&&(z=z-T.ttWidth-M-10),z>v.globals.gridWidth-T.ttWidth-10&&(z=v.globals.gridWidth-T.ttWidth),z<-20&&(z=-20),v.config.tooltip.followCursor){var H=b.getElGrid().getBoundingClientRect();(z=b.e.clientX-H.left)>v.globals.gridWidth/2&&(z-=b.tooltipRect.ttWidth),($=b.e.clientY+v.globals.translateY-H.top)>v.globals.gridHeight/2&&($-=b.tooltipRect.ttHeight)}else v.globals.isBarHorizontal||T.ttHeight/2+$>v.globals.gridHeight&&($=v.globals.gridHeight-T.ttHeight+v.globals.translateY);isNaN(z)||(z+=v.globals.translateX,S.style.left=z+"px",S.style.top=$+"px")}},{key:"moveMarkers",value:function(c,d){var m=this.w,v=this.ttCtx;if(m.globals.markers.size[c]>0)for(var b=m.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(c,"'] .apexcharts-marker")),S=0;S<b.length;S++)parseInt(b[S].getAttribute("rel"),10)===d&&(v.marker.resetPointsSize(),v.marker.enlargeCurrentPoint(d,b[S]));else v.marker.resetPointsSize(),this.moveDynamicPointOnHover(d,c)}},{key:"moveDynamicPointOnHover",value:function(c,d){var m,v,b=this.w,S=this.ttCtx,T=b.globals.pointsArray,M=S.tooltipUtil.getHoverMarkerSize(d),z=b.config.series[d].type;if(!z||z!=="column"&&z!=="candlestick"&&z!=="boxPlot"){m=T[d][c][0],v=T[d][c][1]?T[d][c][1]:0;var $=b.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(d,"'] .apexcharts-series-markers circle"));$&&v<b.globals.gridHeight&&v>0&&($.setAttribute("r",M),$.setAttribute("cx",m),$.setAttribute("cy",v)),this.moveXCrosshairs(m),S.fixedTooltip||this.moveTooltip(m,v,M)}}},{key:"moveDynamicPointsOnHover",value:function(c){var d,m=this.ttCtx,v=m.w,b=0,S=0,T=v.globals.pointsArray;d=new Dt(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var M=m.tooltipUtil.getHoverMarkerSize(d);T[d]&&(b=T[d][c][0],S=T[d][c][1]);var z=m.tooltipUtil.getAllMarkers();if(z!==null)for(var $=0;$<v.globals.series.length;$++){var H=T[$];if(v.globals.comboCharts&&H===void 0&&z.splice($,0,null),H&&H.length){var B=T[$][c][1],ee=void 0;if(z[$].setAttribute("cx",b),v.config.chart.type==="rangeArea"&&!v.globals.comboCharts){var re=c+v.globals.series[$].length;ee=T[$][re][1],B-=Math.abs(B-ee)/2}B!==null&&!isNaN(B)&&B<v.globals.gridHeight+M&&B+M>0?(z[$]&&z[$].setAttribute("r",M),z[$]&&z[$].setAttribute("cy",B)):z[$]&&z[$].setAttribute("r",0)}}this.moveXCrosshairs(b),m.fixedTooltip||this.moveTooltip(b,S||v.globals.gridHeight,M)}},{key:"moveStickyTooltipOverBars",value:function(c,d){var m=this.w,v=this.ttCtx,b=m.globals.columnSeries?m.globals.columnSeries.length:m.globals.series.length,S=b>=2&&b%2==0?Math.floor(b/2):Math.floor(b/2)+1;m.globals.isBarHorizontal&&(S=new Dt(this.ctx).getActiveConfigSeriesIndex("desc")+1);var T=m.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(S,"'] path[j='").concat(c,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(S,"'] path[j='").concat(c,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(S,"'] path[j='").concat(c,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(S,"'] path[j='").concat(c,"']"));T||typeof d!="number"||(T=m.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(d,"'] path[j='").concat(c,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(d,"'] path[j='").concat(c,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(d,"'] path[j='").concat(c,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(d,"'] path[j='").concat(c,"']")));var M=T?parseFloat(T.getAttribute("cx")):0,z=T?parseFloat(T.getAttribute("cy")):0,$=T?parseFloat(T.getAttribute("barWidth")):0,H=v.getElGrid().getBoundingClientRect(),B=T&&(T.classList.contains("apexcharts-candlestick-area")||T.classList.contains("apexcharts-boxPlot-area"));m.globals.isXNumeric?(T&&!B&&(M-=b%2!=0?$/2:0),T&&B&&m.globals.comboCharts&&(M-=$/2)):m.globals.isBarHorizontal||(M=v.xAxisTicksPositions[c-1]+v.dataPointsDividedWidth/2,isNaN(M)&&(M=v.xAxisTicksPositions[c]-v.dataPointsDividedWidth/2)),m.globals.isBarHorizontal?z-=v.tooltipRect.ttHeight:m.config.tooltip.followCursor?z=v.e.clientY-H.top-v.tooltipRect.ttHeight/2:z+v.tooltipRect.ttHeight+15>m.globals.gridHeight&&(z=m.globals.gridHeight),m.globals.isBarHorizontal||this.moveXCrosshairs(M),v.fixedTooltip||this.moveTooltip(M,z||m.globals.gridHeight)}}]),pe}(),Fn=function(){function pe(c){f(this,pe),this.w=c.w,this.ttCtx=c,this.ctx=c.ctx,this.tooltipPosition=new zi(c)}return s(pe,[{key:"drawDynamicPoints",value:function(){var c=this.w,d=new de(this.ctx),m=new Vt(this.ctx),v=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series");v=ae(v),c.config.chart.stacked&&v.sort(function(H,B){return parseFloat(H.getAttribute("data:realIndex"))-parseFloat(B.getAttribute("data:realIndex"))});for(var b=0;b<v.length;b++){var S=v[b].querySelector(".apexcharts-series-markers-wrap");if(S!==null){var T=void 0,M="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));c.config.chart.type!=="line"&&c.config.chart.type!=="area"||c.globals.comboCharts||c.config.tooltip.intersect||(M+=" no-pointer-events");var z=m.getMarkerConfig({cssClass:M,seriesIndex:Number(S.getAttribute("data:realIndex"))});(T=d.drawMarker(0,0,z)).node.setAttribute("default-marker-size",0);var $=document.createElementNS(c.globals.SVGNS,"g");$.classList.add("apexcharts-series-markers"),$.appendChild(T.node),S.appendChild($)}}}},{key:"enlargeCurrentPoint",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,b=this.w;b.config.chart.type!=="bubble"&&this.newPointSize(c,d);var S=d.getAttribute("cx"),T=d.getAttribute("cy");if(m!==null&&v!==null&&(S=m,T=v),this.tooltipPosition.moveXCrosshairs(S),!this.fixedTooltip){if(b.config.chart.type==="radar"){var M=this.ttCtx.getElGrid().getBoundingClientRect();S=this.ttCtx.e.clientX-M.left}this.tooltipPosition.moveTooltip(S,T,b.config.markers.hover.size)}}},{key:"enlargePoints",value:function(c){for(var d=this.w,m=this,v=this.ttCtx,b=c,S=d.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),T=d.config.markers.hover.size,M=0;M<S.length;M++){var z=S[M].getAttribute("rel"),$=S[M].getAttribute("index");if(T===void 0&&(T=d.globals.markers.size[$]+d.config.markers.hover.sizeOffset),b===parseInt(z,10)){m.newPointSize(b,S[M]);var H=S[M].getAttribute("cx"),B=S[M].getAttribute("cy");m.tooltipPosition.moveXCrosshairs(H),v.fixedTooltip||m.tooltipPosition.moveTooltip(H,B,T)}else m.oldPointSize(S[M])}}},{key:"newPointSize",value:function(c,d){var m=this.w,v=m.config.markers.hover.size,b=c===0?d.parentNode.firstChild:d.parentNode.lastChild;if(b.getAttribute("default-marker-size")!=="0"){var S=parseInt(b.getAttribute("index"),10);v===void 0&&(v=m.globals.markers.size[S]+m.config.markers.hover.sizeOffset),v<0&&(v=0),b.setAttribute("r",v)}}},{key:"oldPointSize",value:function(c){var d=parseFloat(c.getAttribute("default-marker-size"));c.setAttribute("r",d)}},{key:"resetPointsSize",value:function(){for(var c=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),d=0;d<c.length;d++){var m=parseFloat(c[d].getAttribute("default-marker-size"));W.isNumber(m)&&m>=0?c[d].setAttribute("r",m):c[d].setAttribute("r",0)}}}]),pe}(),Ki=function(){function pe(c){f(this,pe),this.w=c.w;var d=this.w;this.ttCtx=c,this.isVerticalGroupedRangeBar=!d.globals.isBarHorizontal&&d.config.chart.type==="rangeBar"&&d.config.plotOptions.bar.rangeBarGroupRows}return s(pe,[{key:"getAttr",value:function(c,d){return parseFloat(c.target.getAttribute(d))}},{key:"handleHeatTreeTooltip",value:function(c){var d=c.e,m=c.opt,v=c.x,b=c.y,S=c.type,T=this.ttCtx,M=this.w;if(d.target.classList.contains("apexcharts-".concat(S,"-rect"))){var z=this.getAttr(d,"i"),$=this.getAttr(d,"j"),H=this.getAttr(d,"cx"),B=this.getAttr(d,"cy"),ee=this.getAttr(d,"width"),re=this.getAttr(d,"height");if(T.tooltipLabels.drawSeriesTexts({ttItems:m.ttItems,i:z,j:$,shared:!1,e:d}),M.globals.capturedSeriesIndex=z,M.globals.capturedDataPointIndex=$,v=H+T.tooltipRect.ttWidth/2+ee,b=B+T.tooltipRect.ttHeight/2-re/2,T.tooltipPosition.moveXCrosshairs(H+ee/2),v>M.globals.gridWidth/2&&(v=H-T.tooltipRect.ttWidth/2+ee),T.w.config.tooltip.followCursor){var ce=M.globals.dom.elWrap.getBoundingClientRect();v=M.globals.clientX-ce.left-(v>M.globals.gridWidth/2?T.tooltipRect.ttWidth:0),b=M.globals.clientY-ce.top-(b>M.globals.gridHeight/2?T.tooltipRect.ttHeight:0)}}return{x:v,y:b}}},{key:"handleMarkerTooltip",value:function(c){var d,m,v=c.e,b=c.opt,S=c.x,T=c.y,M=this.w,z=this.ttCtx;if(v.target.classList.contains("apexcharts-marker")){var $=parseInt(b.paths.getAttribute("cx"),10),H=parseInt(b.paths.getAttribute("cy"),10),B=parseFloat(b.paths.getAttribute("val"));if(m=parseInt(b.paths.getAttribute("rel"),10),d=parseInt(b.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,z.intersect){var ee=W.findAncestor(b.paths,"apexcharts-series");ee&&(d=parseInt(ee.getAttribute("data:realIndex"),10))}if(z.tooltipLabels.drawSeriesTexts({ttItems:b.ttItems,i:d,j:m,shared:!z.showOnIntersect&&M.config.tooltip.shared,e:v}),v.type==="mouseup"&&z.markerClick(v,d,m),M.globals.capturedSeriesIndex=d,M.globals.capturedDataPointIndex=m,S=$,T=H+M.globals.translateY-1.4*z.tooltipRect.ttHeight,z.w.config.tooltip.followCursor){var re=z.getElGrid().getBoundingClientRect();T=z.e.clientY+M.globals.translateY-re.top}B<0&&(T=H),z.marker.enlargeCurrentPoint(m,b.paths,S,T)}return{x:S,y:T}}},{key:"handleBarTooltip",value:function(c){var d,m,v=c.e,b=c.opt,S=this.w,T=this.ttCtx,M=T.getElTooltip(),z=0,$=0,H=0,B=this.getBarTooltipXY({e:v,opt:b});d=B.i;var ee=B.barHeight,re=B.j;S.globals.capturedSeriesIndex=d,S.globals.capturedDataPointIndex=re,S.globals.isBarHorizontal&&T.tooltipUtil.hasBars()||!S.config.tooltip.shared?($=B.x,H=B.y,m=Array.isArray(S.config.stroke.width)?S.config.stroke.width[d]:S.config.stroke.width,z=$):S.globals.comboCharts||S.config.tooltip.shared||(z/=2),isNaN(H)&&(H=S.globals.svgHeight-T.tooltipRect.ttHeight);var ce=parseInt(b.paths.parentNode.getAttribute("data:realIndex"),10),ye=S.globals.isMultipleYAxis?S.config.yaxis[ce]&&S.config.yaxis[ce].reversed:S.config.yaxis[0].reversed;if($+T.tooltipRect.ttWidth>S.globals.gridWidth&&!ye?$-=T.tooltipRect.ttWidth:$<0&&($=0),T.w.config.tooltip.followCursor){var _e=T.getElGrid().getBoundingClientRect();H=T.e.clientY-_e.top}T.tooltip===null&&(T.tooltip=S.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),S.config.tooltip.shared||(S.globals.comboBarCount>0?T.tooltipPosition.moveXCrosshairs(z+m/2):T.tooltipPosition.moveXCrosshairs(z)),!T.fixedTooltip&&(!S.config.tooltip.shared||S.globals.isBarHorizontal&&T.tooltipUtil.hasBars())&&(ye&&($-=T.tooltipRect.ttWidth)<0&&($=0),!ye||S.globals.isBarHorizontal&&T.tooltipUtil.hasBars()||(H=H+ee-2*(S.globals.series[d][re]<0?ee:0)),H=H+S.globals.translateY-T.tooltipRect.ttHeight/2,M.style.left=$+S.globals.translateX+"px",M.style.top=H+"px")}},{key:"getBarTooltipXY",value:function(c){var d=this,m=c.e,v=c.opt,b=this.w,S=null,T=this.ttCtx,M=0,z=0,$=0,H=0,B=0,ee=m.target.classList;if(ee.contains("apexcharts-bar-area")||ee.contains("apexcharts-candlestick-area")||ee.contains("apexcharts-boxPlot-area")||ee.contains("apexcharts-rangebar-area")){var re=m.target,ce=re.getBoundingClientRect(),ye=v.elGrid.getBoundingClientRect(),_e=ce.height;B=ce.height;var Ee=ce.width,O=parseInt(re.getAttribute("cx"),10),X=parseInt(re.getAttribute("cy"),10);H=parseFloat(re.getAttribute("barWidth"));var Q=m.type==="touchmove"?m.touches[0].clientX:m.clientX;S=parseInt(re.getAttribute("j"),10),M=parseInt(re.parentNode.getAttribute("rel"),10)-1;var xe=re.getAttribute("data-range-y1"),ke=re.getAttribute("data-range-y2");b.globals.comboCharts&&(M=parseInt(re.parentNode.getAttribute("data:realIndex"),10));var Le=function(Ze){return b.globals.isXNumeric?O-Ee/2:d.isVerticalGroupedRangeBar?O+Ee/2:O-T.dataPointsDividedWidth+Ee/2},rt=function(){return X-T.dataPointsDividedHeight+_e/2-T.tooltipRect.ttHeight/2};T.tooltipLabels.drawSeriesTexts({ttItems:v.ttItems,i:M,j:S,y1:xe?parseInt(xe,10):null,y2:ke?parseInt(ke,10):null,shared:!T.showOnIntersect&&b.config.tooltip.shared,e:m}),b.config.tooltip.followCursor?b.globals.isBarHorizontal?(z=Q-ye.left+15,$=rt()):(z=Le(),$=m.clientY-ye.top-T.tooltipRect.ttHeight/2-15):b.globals.isBarHorizontal?((z=O)<T.xyRatios.baseLineInvertedY&&(z=O-T.tooltipRect.ttWidth),$=rt()):(z=Le(),$=X)}return{x:z,y:$,barHeight:B,barWidth:H,i:M,j:S}}}]),pe}(),Si=function(){function pe(c){f(this,pe),this.w=c.w,this.ttCtx=c}return s(pe,[{key:"drawXaxisTooltip",value:function(){var c=this.w,d=this.ttCtx,m=c.config.xaxis.position==="bottom";d.xaxisOffY=m?c.globals.gridHeight+1:-c.globals.xAxisHeight-c.config.xaxis.axisTicks.height+3;var v=m?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",b=c.globals.dom.elWrap;d.isXAxisTooltipEnabled&&c.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(d.xaxisTooltip=document.createElement("div"),d.xaxisTooltip.setAttribute("class",v+" apexcharts-theme-"+c.config.tooltip.theme),b.appendChild(d.xaxisTooltip),d.xaxisTooltipText=document.createElement("div"),d.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),d.xaxisTooltipText.style.fontFamily=c.config.xaxis.tooltip.style.fontFamily||c.config.chart.fontFamily,d.xaxisTooltipText.style.fontSize=c.config.xaxis.tooltip.style.fontSize,d.xaxisTooltip.appendChild(d.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var c=this.w,d=this.ttCtx,m=function(b){var S=c.config.yaxis[b].opposite||c.config.yaxis[b].crosshairs.opposite;d.yaxisOffX=S?c.globals.gridWidth+1:1;var T="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(b,S?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");c.globals.yAxisSameScaleIndices.map(function(z,$){z.map(function(H,B){B===b&&(T+=c.config.yaxis[B].show?" ":" apexcharts-yaxistooltip-hidden")})});var M=c.globals.dom.elWrap;c.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(b))===null&&(d.yaxisTooltip=document.createElement("div"),d.yaxisTooltip.setAttribute("class",T+" apexcharts-theme-"+c.config.tooltip.theme),M.appendChild(d.yaxisTooltip),b===0&&(d.yaxisTooltipText=[]),d.yaxisTooltipText[b]=document.createElement("div"),d.yaxisTooltipText[b].classList.add("apexcharts-yaxistooltip-text"),d.yaxisTooltip.appendChild(d.yaxisTooltipText[b]))},v=0;v<c.config.yaxis.length;v++)m(v)}},{key:"setXCrosshairWidth",value:function(){var c=this.w,d=this.ttCtx,m=d.getElXCrosshairs();if(d.xcrosshairsWidth=parseInt(c.config.xaxis.crosshairs.width,10),c.globals.comboCharts){var v=c.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(v!==null&&c.config.xaxis.crosshairs.width==="barWidth"){var b=parseFloat(v.getAttribute("barWidth"));d.xcrosshairsWidth=b}else if(c.config.xaxis.crosshairs.width==="tickWidth"){var S=c.globals.labels.length;d.xcrosshairsWidth=c.globals.gridWidth/S}}else if(c.config.xaxis.crosshairs.width==="tickWidth"){var T=c.globals.labels.length;d.xcrosshairsWidth=c.globals.gridWidth/T}else if(c.config.xaxis.crosshairs.width==="barWidth"){var M=c.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(M!==null){var z=parseFloat(M.getAttribute("barWidth"));d.xcrosshairsWidth=z}else d.xcrosshairsWidth=1}c.globals.isBarHorizontal&&(d.xcrosshairsWidth=0),m!==null&&d.xcrosshairsWidth>0&&m.setAttribute("width",d.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var c=this.w,d=this.ttCtx;d.ycrosshairs=c.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),d.ycrosshairsHidden=c.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(c,d,m){var v=this.ttCtx,b=this.w,S=b.globals.yLabelFormatters[c];if(v.yaxisTooltips[c]){var T=v.getElGrid().getBoundingClientRect(),M=(d-T.top)*m.yRatio[c],z=b.globals.maxYArr[c]-b.globals.minYArr[c],$=b.globals.minYArr[c]+(z-M);v.tooltipPosition.moveYCrosshairs(d-T.top),v.yaxisTooltipText[c].innerHTML=S($),v.tooltipPosition.moveYAxisTooltip(c)}}}]),pe}(),is=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w;var d=this.w;this.tConfig=d.config.tooltip,this.tooltipUtil=new qn(this),this.tooltipLabels=new Ii(this),this.tooltipPosition=new zi(this),this.marker=new Fn(this),this.intersect=new Ki(this),this.axesTooltip=new Si(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!d.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return s(pe,[{key:"getElTooltip",value:function(c){return c||(c=this),c.w.globals.dom.baseEl?c.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(c){var d=this.w;this.xyRatios=c,this.isXAxisTooltipEnabled=d.config.xaxis.tooltip.enabled&&d.globals.axisCharts,this.yaxisTooltips=d.config.yaxis.map(function(S,T){return!!(S.show&&S.tooltip.enabled&&d.globals.axisCharts)}),this.allTooltipSeriesGroups=[],d.globals.axisCharts||(this.showTooltipTitle=!1);var m=document.createElement("div");if(m.classList.add("apexcharts-tooltip"),d.config.tooltip.cssClass&&m.classList.add(d.config.tooltip.cssClass),m.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),d.globals.dom.elWrap.appendChild(m),d.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var v=new Cr(this.ctx);this.xAxisTicksPositions=v.getXAxisTicksPositions()}if(!d.globals.comboCharts&&!this.tConfig.intersect&&d.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),d.config.markers.size!==0&&d.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),d.globals.collapsedSeries.length!==d.globals.series.length){this.dataPointsDividedHeight=d.globals.gridHeight/d.globals.dataPoints,this.dataPointsDividedWidth=d.globals.gridWidth/d.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||d.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,m.appendChild(this.tooltipTitle));var b=d.globals.series.length;(d.globals.xyCharts||d.globals.comboCharts)&&this.tConfig.shared&&(b=this.showOnIntersect?1:d.globals.series.length),this.legendLabels=d.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(b),this.addSVGEvents()}}},{key:"createTTElements",value:function(c){for(var d=this,m=this.w,v=[],b=this.getElTooltip(),S=function(M){var z=document.createElement("div");z.classList.add("apexcharts-tooltip-series-group"),z.style.order=m.config.tooltip.inverseOrder?c-M:M+1,d.tConfig.shared&&d.tConfig.enabledOnSeries&&Array.isArray(d.tConfig.enabledOnSeries)&&d.tConfig.enabledOnSeries.indexOf(M)<0&&z.classList.add("apexcharts-tooltip-series-group-hidden");var $=document.createElement("span");$.classList.add("apexcharts-tooltip-marker"),$.style.backgroundColor=m.globals.colors[M],z.appendChild($);var H=document.createElement("div");H.classList.add("apexcharts-tooltip-text"),H.style.fontFamily=d.tConfig.style.fontFamily||m.config.chart.fontFamily,H.style.fontSize=d.tConfig.style.fontSize,["y","goals","z"].forEach(function(B){var ee=document.createElement("div");ee.classList.add("apexcharts-tooltip-".concat(B,"-group"));var re=document.createElement("span");re.classList.add("apexcharts-tooltip-text-".concat(B,"-label")),ee.appendChild(re);var ce=document.createElement("span");ce.classList.add("apexcharts-tooltip-text-".concat(B,"-value")),ee.appendChild(ce),H.appendChild(ee)}),z.appendChild(H),b.appendChild(z),v.push(z)},T=0;T<c;T++)S(T);return v}},{key:"addSVGEvents",value:function(){var c=this.w,d=c.config.chart.type,m=this.getElTooltip(),v=!(d!=="bar"&&d!=="candlestick"&&d!=="boxPlot"&&d!=="rangeBar"),b=d==="area"||d==="line"||d==="scatter"||d==="bubble"||d==="radar",S=c.globals.dom.Paper.node,T=this.getElGrid();T&&(this.seriesBound=T.getBoundingClientRect());var M,z=[],$=[],H={hoverArea:S,elGrid:T,tooltipEl:m,tooltipY:z,tooltipX:$,ttItems:this.ttItems};if(c.globals.axisCharts&&(b?M=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):v?M=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):d!=="heatmap"&&d!=="treemap"||(M=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),M&&M.length))for(var B=0;B<M.length;B++)z.push(M[B].getAttribute("cy")),$.push(M[B].getAttribute("cx"));if(c.globals.xyCharts&&!this.showOnIntersect||c.globals.comboCharts&&!this.showOnIntersect||v&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([S],H);else if(v&&!c.globals.comboCharts||b&&this.showOnIntersect)this.addDatapointEventsListeners(H);else if(!c.globals.axisCharts||d==="heatmap"||d==="treemap"){var ee=c.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(ee,H)}if(this.showOnIntersect){var re=c.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");re.length>0&&this.addPathsEventListeners(re,H),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(H)}}},{key:"drawFixedTooltipRect",value:function(){var c=this.w,d=this.getElTooltip(),m=d.getBoundingClientRect(),v=m.width+10,b=m.height+10,S=this.tConfig.fixed.offsetX,T=this.tConfig.fixed.offsetY,M=this.tConfig.fixed.position.toLowerCase();return M.indexOf("right")>-1&&(S=S+c.globals.svgWidth-v+10),M.indexOf("bottom")>-1&&(T=T+c.globals.svgHeight-b-10),d.style.left=S+"px",d.style.top=T+"px",{x:S,y:T,ttWidth:v,ttHeight:b}}},{key:"addDatapointEventsListeners",value:function(c){var d=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(d,c)}},{key:"addPathsEventListeners",value:function(c,d){for(var m=this,v=function(S){var T={paths:c[S],tooltipEl:d.tooltipEl,tooltipY:d.tooltipY,tooltipX:d.tooltipX,elGrid:d.elGrid,hoverArea:d.hoverArea,ttItems:d.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(M){return c[S].addEventListener(M,m.onSeriesHover.bind(m,T),{capture:!1,passive:!0})})},b=0;b<c.length;b++)v(b)}},{key:"onSeriesHover",value:function(c,d){var m=this,v=Date.now()-this.lastHoverTime;v>=100?this.seriesHover(c,d):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){m.seriesHover(c,d)},100-v))}},{key:"seriesHover",value:function(c,d){var m=this;this.lastHoverTime=Date.now();var v=[],b=this.w;b.config.chart.group&&(v=this.ctx.getGroupedCharts()),b.globals.axisCharts&&(b.globals.minX===-1/0&&b.globals.maxX===1/0||b.globals.dataPoints===0)||(v.length?v.forEach(function(S){var T=m.getElTooltip(S),M={paths:c.paths,tooltipEl:T,tooltipY:c.tooltipY,tooltipX:c.tooltipX,elGrid:c.elGrid,hoverArea:c.hoverArea,ttItems:S.w.globals.tooltip.ttItems};S.w.globals.minX===m.w.globals.minX&&S.w.globals.maxX===m.w.globals.maxX&&S.w.globals.tooltip.seriesHoverByContext({chartCtx:S,ttCtx:S.w.globals.tooltip,opt:M,e:d})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:c,e:d}))}},{key:"seriesHoverByContext",value:function(c){var d=c.chartCtx,m=c.ttCtx,v=c.opt,b=c.e,S=d.w,T=this.getElTooltip();T&&(m.tooltipRect={x:0,y:0,ttWidth:T.getBoundingClientRect().width,ttHeight:T.getBoundingClientRect().height},m.e=b,m.tooltipUtil.hasBars()&&!S.globals.comboCharts&&!m.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Dt(d).toggleSeriesOnHover(b,b.target.parentNode),m.fixedTooltip&&m.drawFixedTooltipRect(),S.globals.axisCharts?m.axisChartsTooltips({e:b,opt:v,tooltipRect:m.tooltipRect}):m.nonAxisChartsTooltips({e:b,opt:v,tooltipRect:m.tooltipRect}))}},{key:"axisChartsTooltips",value:function(c){var d,m,v=c.e,b=c.opt,S=this.w,T=b.elGrid.getBoundingClientRect(),M=v.type==="touchmove"?v.touches[0].clientX:v.clientX,z=v.type==="touchmove"?v.touches[0].clientY:v.clientY;if(this.clientY=z,this.clientX=M,S.globals.capturedSeriesIndex=-1,S.globals.capturedDataPointIndex=-1,z<T.top||z>T.top+T.height)this.handleMouseOut(b);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!S.config.tooltip.shared){var $=parseInt(b.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf($)<0)return void this.handleMouseOut(b)}var H=this.getElTooltip(),B=this.getElXCrosshairs(),ee=S.globals.xyCharts||S.config.chart.type==="bar"&&!S.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||S.globals.comboCharts&&this.tooltipUtil.hasBars();if(v.type==="mousemove"||v.type==="touchmove"||v.type==="mouseup"){if(S.globals.collapsedSeries.length+S.globals.ancillaryCollapsedSeries.length===S.globals.series.length)return;B!==null&&B.classList.add("apexcharts-active");var re=this.yaxisTooltips.filter(function(_e){return _e===!0});if(this.ycrosshairs!==null&&re.length&&this.ycrosshairs.classList.add("apexcharts-active"),ee&&!this.showOnIntersect)this.handleStickyTooltip(v,M,z,b);else if(S.config.chart.type==="heatmap"||S.config.chart.type==="treemap"){var ce=this.intersect.handleHeatTreeTooltip({e:v,opt:b,x:d,y:m,type:S.config.chart.type});d=ce.x,m=ce.y,H.style.left=d+"px",H.style.top=m+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:v,opt:b}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:v,opt:b,x:d,y:m});if(this.yaxisTooltips.length)for(var ye=0;ye<S.config.yaxis.length;ye++)this.axesTooltip.drawYaxisTooltipText(ye,z,this.xyRatios);b.tooltipEl.classList.add("apexcharts-active")}else v.type!=="mouseout"&&v.type!=="touchend"||this.handleMouseOut(b)}}},{key:"nonAxisChartsTooltips",value:function(c){var d=c.e,m=c.opt,v=c.tooltipRect,b=this.w,S=m.paths.getAttribute("rel"),T=this.getElTooltip(),M=b.globals.dom.elWrap.getBoundingClientRect();if(d.type==="mousemove"||d.type==="touchmove"){T.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:m.ttItems,i:parseInt(S,10)-1,shared:!1});var z=b.globals.clientX-M.left-v.ttWidth/2,$=b.globals.clientY-M.top-v.ttHeight-10;if(T.style.left=z+"px",T.style.top=$+"px",b.config.legend.tooltipHoverFormatter){var H=S-1,B=(0,b.config.legend.tooltipHoverFormatter)(this.legendLabels[H].getAttribute("data:default-text"),{seriesIndex:H,dataPointIndex:H,w:b});this.legendLabels[H].innerHTML=B}}else d.type!=="mouseout"&&d.type!=="touchend"||(T.classList.remove("apexcharts-active"),b.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(ee){var re=ee.getAttribute("data:default-text");ee.innerHTML=decodeURIComponent(re)}))}},{key:"handleStickyTooltip",value:function(c,d,m,v){var b=this.w,S=this.tooltipUtil.getNearestValues({context:this,hoverArea:v.hoverArea,elGrid:v.elGrid,clientX:d,clientY:m}),T=S.j,M=S.capturedSeries;b.globals.collapsedSeriesIndices.includes(M)&&(M=null);var z=v.elGrid.getBoundingClientRect();if(S.hoverX<0||S.hoverX>z.width)this.handleMouseOut(v);else if(M!==null)this.handleStickyCapturedSeries(c,M,v,T);else if(this.tooltipUtil.isXoverlap(T)||b.globals.isBarHorizontal){var $=b.globals.series.findIndex(function(H,B){return!b.globals.collapsedSeriesIndices.includes(B)});this.create(c,this,$,T,v.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(c,d,m,v){var b=this.w;if(!this.tConfig.shared&&b.globals.series[d][v]===null)return void this.handleMouseOut(m);if(b.globals.series[d][v]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(v)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(c,this,d,v,m.ttItems):this.create(c,this,d,v,m.ttItems,!1);else if(this.tooltipUtil.isXoverlap(v)){var S=b.globals.series.findIndex(function(T,M){return!b.globals.collapsedSeriesIndices.includes(M)});this.create(c,this,S,v,m.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var c=this.w,d=new de(this.ctx),m=c.globals.dom.Paper.select(".apexcharts-bar-area"),v=0;v<m.length;v++)d.pathMouseLeave(m[v])}},{key:"handleMouseOut",value:function(c){var d=this.w,m=this.getElXCrosshairs();if(c.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),d.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),m!==null&&m.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=d.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var v=0;v<this.yaxisTTEls.length;v++)this.yaxisTTEls[v].classList.remove("apexcharts-active")}d.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(b){var S=b.getAttribute("data:default-text");b.innerHTML=decodeURIComponent(S)})}},{key:"markerClick",value:function(c,d,m){var v=this.w;typeof v.config.chart.events.markerClick=="function"&&v.config.chart.events.markerClick(c,this.ctx,{seriesIndex:d,dataPointIndex:m,w:v}),this.ctx.events.fireEvent("markerClick",[c,this.ctx,{seriesIndex:d,dataPointIndex:m,w:v}])}},{key:"create",value:function(c,d,m,v,b){var S,T,M,z,$,H,B,ee,re,ce,ye,_e,Ee,O,X,Q,xe=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,ke=this.w,Le=d;c.type==="mouseup"&&this.markerClick(c,m,v),xe===null&&(xe=this.tConfig.shared);var rt=this.tooltipUtil.hasMarkers(m),Ze=this.tooltipUtil.getElBars();if(ke.config.legend.tooltipHoverFormatter){var Et=ke.config.legend.tooltipHoverFormatter,Bt=Array.from(this.legendLabels);Bt.forEach(function(it){var Rt=it.getAttribute("data:default-text");it.innerHTML=decodeURIComponent(Rt)});for(var Nt=0;Nt<Bt.length;Nt++){var hr=Bt[Nt],ar=parseInt(hr.getAttribute("i"),10),Jr=decodeURIComponent(hr.getAttribute("data:default-text")),tn=Et(Jr,{seriesIndex:xe?ar:m,dataPointIndex:v,w:ke});if(xe)hr.innerHTML=ke.globals.collapsedSeriesIndices.indexOf(ar)<0?tn:Jr;else if(hr.innerHTML=ar===m?tn:Jr,m===ar)break}}var pn=n(n({ttItems:b,i:m,j:v},((S=ke.globals.seriesRange)===null||S===void 0||(T=S[m])===null||T===void 0||(M=T[v])===null||M===void 0||(z=M.y[0])===null||z===void 0?void 0:z.y1)!==void 0&&{y1:($=ke.globals.seriesRange)===null||$===void 0||(H=$[m])===null||H===void 0||(B=H[v])===null||B===void 0||(ee=B.y[0])===null||ee===void 0?void 0:ee.y1}),((re=ke.globals.seriesRange)===null||re===void 0||(ce=re[m])===null||ce===void 0||(ye=ce[v])===null||ye===void 0||(_e=ye.y[0])===null||_e===void 0?void 0:_e.y2)!==void 0&&{y2:(Ee=ke.globals.seriesRange)===null||Ee===void 0||(O=Ee[m])===null||O===void 0||(X=O[v])===null||X===void 0||(Q=X.y[0])===null||Q===void 0?void 0:Q.y2});if(xe){if(Le.tooltipLabels.drawSeriesTexts(n(n({},pn),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),rt)ke.globals.markers.largestSize>0?Le.marker.enlargePoints(v):Le.tooltipPosition.moveDynamicPointsOnHover(v);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(Ze),this.barSeriesHeight>0)){var bn=new de(this.ctx),Pn=ke.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(v,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(v,m);for(var Jn=0;Jn<Pn.length;Jn++)bn.pathMouseEnter(Pn[Jn])}}else Le.tooltipLabels.drawSeriesTexts(n({shared:!1},pn)),this.tooltipUtil.hasBars()&&Le.tooltipPosition.moveStickyTooltipOverBars(v,m),rt&&Le.tooltipPosition.moveMarkers(m,v)}}]),pe}(),Ds=function(){function pe(c){f(this,pe),this.w=c.w,this.barCtx=c,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return s(pe,[{key:"handleBarDataLabels",value:function(c){var d=c.x,m=c.y,v=c.y1,b=c.y2,S=c.i,T=c.j,M=c.realIndex,z=c.groupIndex,$=c.series,H=c.barHeight,B=c.barWidth,ee=c.barXPosition,re=c.barYPosition,ce=c.visibleSeries,ye=c.renderedPath,_e=this.w,Ee=new de(this.barCtx.ctx),O=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[M]:this.barCtx.strokeWidth,X=d+parseFloat(B*ce),Q=m+parseFloat(H*ce);_e.globals.isXNumeric&&!_e.globals.isBarHorizontal&&(X=d+parseFloat(B*(ce+1)),Q=m+parseFloat(H*(ce+1))-O);var xe,ke=null,Le=d,rt=m,Ze={},Et=_e.config.dataLabels,Bt=this.barCtx.barOptions.dataLabels,Nt=this.barCtx.barOptions.dataLabels.total;re!==void 0&&this.barCtx.isRangeBar&&(Q=re,rt=re),ee!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(X=ee,Le=ee);var hr=Et.offsetX,ar=Et.offsetY,Jr={width:0,height:0};if(_e.config.dataLabels.enabled){var tn=this.barCtx.series[S][T];Jr=Ee.getTextRects(_e.globals.yLabelFormatters[0](tn),parseFloat(Et.style.fontSize))}var pn={x:d,y:m,i:S,j:T,realIndex:M,groupIndex:z||-1,renderedPath:ye,bcx:X,bcy:Q,barHeight:H,barWidth:B,textRects:Jr,strokeWidth:O,dataLabelsX:Le,dataLabelsY:rt,dataLabelsConfig:Et,barDataLabelsConfig:Bt,barTotalDataLabelsConfig:Nt,offX:hr,offY:ar};return Ze=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(pn):this.calculateColumnsDataLabelsPosition(pn),ye.attr({cy:Ze.bcy,cx:Ze.bcx,j:T,val:$[S][T],barHeight:H,barWidth:B}),xe=this.drawCalculatedDataLabels({x:Ze.dataLabelsX,y:Ze.dataLabelsY,val:this.barCtx.isRangeBar?[v,b]:$[S][T],i:M,j:T,barWidth:B,barHeight:H,textRects:Jr,dataLabelsConfig:Et}),_e.config.chart.stacked&&Nt.enabled&&(ke=this.drawTotalDataLabels({x:Ze.totalDataLabelsX,y:Ze.totalDataLabelsY,realIndex:M,textAnchor:Ze.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:M,j:T}),dataLabelsConfig:Et,barTotalDataLabelsConfig:Nt})),{dataLabels:xe,totalDataLabels:ke}}},{key:"getStackedTotalDataLabel",value:function(c){var d=c.realIndex,m=c.j,v=this.w,b=this.barCtx.stackedSeriesTotals[m];return this.totalFormatter&&(b=this.totalFormatter(b,n(n({},v),{},{seriesIndex:d,dataPointIndex:m,w:v}))),b}},{key:"calculateColumnsDataLabelsPosition",value:function(c){var d,m,v=this.w,b=c.i,S=c.j,T=c.realIndex,M=c.groupIndex,z=c.y,$=c.bcx,H=c.barWidth,B=c.barHeight,ee=c.textRects,re=c.dataLabelsX,ce=c.dataLabelsY,ye=c.dataLabelsConfig,_e=c.barDataLabelsConfig,Ee=c.barTotalDataLabelsConfig,O=c.strokeWidth,X=c.offX,Q=c.offY;B=Math.abs(B);var xe=v.config.plotOptions.bar.dataLabels.orientation==="vertical",ke=this.barCtx.barHelpers.getZeroValueEncounters({i:b,j:S}).zeroEncounters;$=$-O/2+(M!==-1?M*H:0);var Le=v.globals.gridWidth/v.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?re+=H/2:(re=v.globals.isXNumeric?$-H/2+X:$-Le+H/2+X,ke>0&&v.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(re-=H*ke)),xe&&(re=re+ee.height/2-O/2-2);var rt=this.barCtx.series[b][S]<0,Ze=z;switch(this.barCtx.isReversed&&(Ze=z-B+(rt?2*B:0),z-=B),_e.position){case"center":ce=xe?rt?Ze-B/2+Q:Ze+B/2-Q:rt?Ze-B/2+ee.height/2+Q:Ze+B/2+ee.height/2-Q;break;case"bottom":ce=xe?rt?Ze-B+Q:Ze+B-Q:rt?Ze-B+ee.height+O+Q:Ze+B-ee.height/2+O-Q;break;case"top":ce=xe?rt?Ze+Q:Ze-Q:rt?Ze-ee.height/2-Q:Ze+ee.height+Q}if(this.barCtx.lastActiveBarSerieIndex===T&&Ee.enabled){var Et=new de(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:T,j:S}),ye.fontSize);d=rt?Ze-Et.height/2-Q-Ee.offsetY+18:Ze+Et.height+Q+Ee.offsetY-18,m=re+Ee.offsetX}return v.config.chart.stacked||(ce<0?ce=0+O:ce+ee.height/3>v.globals.gridHeight&&(ce=v.globals.gridHeight-O)),{bcx:$,bcy:z,dataLabelsX:re,dataLabelsY:ce,totalDataLabelsX:m,totalDataLabelsY:d,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(c){var d=this.w,m=c.x,v=c.i,b=c.j,S=c.realIndex,T=c.groupIndex,M=c.bcy,z=c.barHeight,$=c.barWidth,H=c.textRects,B=c.dataLabelsX,ee=c.strokeWidth,re=c.dataLabelsConfig,ce=c.barDataLabelsConfig,ye=c.barTotalDataLabelsConfig,_e=c.offX,Ee=c.offY,O=d.globals.gridHeight/d.globals.dataPoints;$=Math.abs($);var X,Q,xe=(M+=T!==-1?T*z:0)-(this.barCtx.isRangeBar?0:O)+z/2+H.height/2+Ee-3,ke="start",Le=this.barCtx.series[v][b]<0,rt=m;switch(this.barCtx.isReversed&&(rt=m+$-(Le?2*$:0),m=d.globals.gridWidth-$),ce.position){case"center":B=Le?rt+$/2-_e:Math.max(H.width/2,rt-$/2)+_e;break;case"bottom":B=Le?rt+$-ee-Math.round(H.width/2)-_e:rt-$+ee+Math.round(H.width/2)+_e;break;case"top":B=Le?rt-ee+Math.round(H.width/2)-_e:rt-ee-Math.round(H.width/2)+_e}if(this.barCtx.lastActiveBarSerieIndex===S&&ye.enabled){var Ze=new de(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:S,j:b}),re.fontSize);Le?(X=rt-ee+Math.round(Ze.width/2)-_e-ye.offsetX-15,ke="end"):X=rt-ee-Math.round(Ze.width/2)+_e+ye.offsetX+15,Q=xe+ye.offsetY}return d.config.chart.stacked||(B<0?B=B+H.width+ee:B+H.width/2>d.globals.gridWidth&&(B=d.globals.gridWidth-H.width-ee)),{bcx:m,bcy:M,dataLabelsX:B,dataLabelsY:xe,totalDataLabelsX:X,totalDataLabelsY:Q,totalDataLabelsAnchor:ke}}},{key:"drawCalculatedDataLabels",value:function(c){var d=c.x,m=c.y,v=c.val,b=c.i,S=c.j,T=c.textRects,M=c.barHeight,z=c.barWidth,$=c.dataLabelsConfig,H=this.w,B="rotate(0)";H.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(B="rotate(-90, ".concat(d,", ").concat(m,")"));var ee=new vt(this.barCtx.ctx),re=new de(this.barCtx.ctx),ce=$.formatter,ye=null,_e=H.globals.collapsedSeriesIndices.indexOf(b)>-1;if($.enabled&&!_e){ye=re.group({class:"apexcharts-data-labels",transform:B});var Ee="";v!==void 0&&(Ee=ce(v,n(n({},H),{},{seriesIndex:b,dataPointIndex:S,w:H}))),!v&&H.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(Ee="");var O=H.globals.series[b][S]<0,X=H.config.plotOptions.bar.dataLabels.position;H.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(X==="top"&&($.textAnchor=O?"end":"start"),X==="center"&&($.textAnchor="middle"),X==="bottom"&&($.textAnchor=O?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&z<re.getTextRects(Ee,parseFloat($.style.fontSize)).width&&(Ee=""),H.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?T.width/1.6>Math.abs(z)&&(Ee=""):T.height/1.6>Math.abs(M)&&(Ee=""));var Q=n({},$);this.barCtx.isHorizontal&&v<0&&($.textAnchor==="start"?Q.textAnchor="end":$.textAnchor==="end"&&(Q.textAnchor="start")),ee.plotDataLabelsText({x:d,y:m,text:Ee,i:b,j:S,parent:ye,dataLabelsConfig:Q,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return ye}},{key:"drawTotalDataLabels",value:function(c){var d,m=c.x,v=c.y,b=c.val,S=c.realIndex,T=c.textAnchor,M=c.barTotalDataLabelsConfig,z=new de(this.barCtx.ctx);return M.enabled&&m!==void 0&&v!==void 0&&this.barCtx.lastActiveBarSerieIndex===S&&(d=z.drawText({x:m,y:v,foreColor:M.style.color,text:b,textAnchor:T,fontFamily:M.style.fontFamily,fontSize:M.style.fontSize,fontWeight:M.style.fontWeight})),d}}]),pe}(),Ge=function(){function pe(c){f(this,pe),this.w=c.w,this.barCtx=c}return s(pe,[{key:"initVariables",value:function(c){var d=this.w;this.barCtx.series=c,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var m=0;m<c.length;m++)if(c[m].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=c[m].length),d.globals.isXNumeric)for(var v=0;v<c[m].length;v++)d.globals.seriesX[m][v]>d.globals.minX&&d.globals.seriesX[m][v]<d.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=d.globals.dataPoints;this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],d.globals.comboCharts||this.checkZeroSeries({series:c})}},{key:"initialPositions",value:function(){var c,d,m,v,b,S,T,M,z=this.w,$=z.globals.dataPoints;this.barCtx.isRangeBar&&($=z.globals.labels.length);var H=this.barCtx.seriesLen;if(z.config.plotOptions.bar.rangeBarGroupRows&&(H=1),this.barCtx.isHorizontal)b=(m=z.globals.gridHeight/$)/H,z.globals.isXNumeric&&(b=(m=z.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),b=b*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(b=parseInt(this.barCtx.barOptions.barHeight,10)),M=this.barCtx.baseLineInvertedY+z.globals.padHorizontal+(this.barCtx.isReversed?z.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(M=z.globals.gridWidth/2),d=(m-b*this.barCtx.seriesLen)/2;else{if(v=z.globals.gridWidth/this.barCtx.visibleItems,z.config.xaxis.convertedCatToNumeric&&(v=z.globals.gridWidth/z.globals.dataPoints),S=v/H*parseInt(this.barCtx.barOptions.columnWidth,10)/100,z.globals.isXNumeric){var B=this.barCtx.xRatio;z.config.xaxis.convertedCatToNumeric&&(B=this.barCtx.initialXRatio),z.globals.minXDiff&&z.globals.minXDiff!==.5&&z.globals.minXDiff/B>0&&(v=z.globals.minXDiff/B),(S=v/H*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(S=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(S=parseInt(this.barCtx.barOptions.columnWidth,10)),T=z.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?z.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),c=z.globals.padHorizontal+(v-S*this.barCtx.seriesLen)/2}return{x:c,y:d,yDivision:m,xDivision:v,barHeight:b,barWidth:S,zeroH:T,zeroW:M}}},{key:"initializeStackedPrevVars",value:function(c){var d=c.w;d.globals.hasSeriesGroups?d.globals.seriesGroups.forEach(function(m){c[m]||(c[m]={}),c[m].prevY=[],c[m].prevX=[],c[m].prevYF=[],c[m].prevXF=[],c[m].prevYVal=[],c[m].prevXVal=[]}):(c.prevY=[],c.prevX=[],c.prevYF=[],c.prevXF=[],c.prevYVal=[],c.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(c){var d=c.w;d.globals.hasSeriesGroups?d.globals.seriesGroups.forEach(function(m){c[m]||(c[m]={}),c[m].xArrj=[],c[m].xArrjF=[],c[m].xArrjVal=[],c[m].yArrj=[],c[m].yArrjF=[],c[m].yArrjVal=[]}):(c.xArrj=[],c.xArrjF=[],c.xArrjVal=[],c.yArrj=[],c.yArrjF=[],c.yArrjVal=[])}},{key:"getPathFillColor",value:function(c,d,m,v){var b,S,T,M,z=this.w,$=new ut(this.barCtx.ctx),H=null,B=this.barCtx.barOptions.distributed?m:d;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(ee){c[d][m]>=ee.from&&c[d][m]<=ee.to&&(H=ee.color)}),z.config.series[d].data[m]&&z.config.series[d].data[m].fillColor&&(H=z.config.series[d].data[m].fillColor),$.fillPath({seriesNumber:this.barCtx.barOptions.distributed?B:v,dataPointIndex:m,color:H,value:c[d][m],fillConfig:(b=z.config.series[d].data[m])===null||b===void 0?void 0:b.fill,fillType:(S=z.config.series[d].data[m])!==null&&S!==void 0&&(T=S.fill)!==null&&T!==void 0&&T.type?(M=z.config.series[d].data[m])===null||M===void 0?void 0:M.fill.type:z.config.fill.type})}},{key:"getStrokeWidth",value:function(c,d,m){var v=0,b=this.w;return this.barCtx.series[c][d]?this.barCtx.isNullValue=!1:this.barCtx.isNullValue=!0,b.config.stroke.show&&(this.barCtx.isNullValue||(v=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[m]:this.barCtx.strokeWidth)),v}},{key:"shouldApplyRadius",value:function(c){var d=this.w,m=!1;return d.config.plotOptions.bar.borderRadius>0&&(d.config.chart.stacked&&d.config.plotOptions.bar.borderRadiusWhenStacked==="last"?this.barCtx.lastActiveBarSerieIndex===c&&(m=!0):m=!0),m}},{key:"barBackground",value:function(c){var d=c.j,m=c.i,v=c.x1,b=c.x2,S=c.y1,T=c.y2,M=c.elSeries,z=this.w,$=new de(this.barCtx.ctx),H=new Dt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&H===m){d>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(d%=this.barCtx.barOptions.colors.backgroundBarColors.length);var B=this.barCtx.barOptions.colors.backgroundBarColors[d],ee=$.drawRect(v!==void 0?v:0,S!==void 0?S:0,b!==void 0?b:z.globals.gridWidth,T!==void 0?T:z.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,B,this.barCtx.barOptions.colors.backgroundBarOpacity);M.add(ee),ee.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(c){var d,m=c.barWidth,v=c.barXPosition,b=c.y1,S=c.y2,T=c.strokeWidth,M=c.seriesGroup,z=c.realIndex,$=c.i,H=c.j,B=c.w,ee=new de(this.barCtx.ctx);(T=Array.isArray(T)?T[z]:T)||(T=0);var re=m,ce=v;(d=B.config.series[z].data[H])!==null&&d!==void 0&&d.columnWidthOffset&&(ce=v-B.config.series[z].data[H].columnWidthOffset/2,re=m+B.config.series[z].data[H].columnWidthOffset);var ye=ce,_e=ce+re;b+=.001,S+=.001;var Ee=ee.move(ye,b),O=ee.move(ye,b),X=ee.line(_e-T,b);if(B.globals.previousPaths.length>0&&(O=this.barCtx.getPreviousPath(z,H,!1)),Ee=Ee+ee.line(ye,S)+ee.line(_e-T,S)+ee.line(_e-T,b)+(B.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),O=O+ee.line(ye,b)+X+X+X+X+X+ee.line(ye,b)+(B.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(z)&&(Ee=ee.roundPathCorners(Ee,B.config.plotOptions.bar.borderRadius)),B.config.chart.stacked){var Q=this.barCtx;B.globals.hasSeriesGroups&&M&&(Q=this.barCtx[M]),Q.yArrj.push(S),Q.yArrjF.push(Math.abs(b-S)),Q.yArrjVal.push(this.barCtx.series[$][H])}return{pathTo:Ee,pathFrom:O}}},{key:"getBarpaths",value:function(c){var d,m=c.barYPosition,v=c.barHeight,b=c.x1,S=c.x2,T=c.strokeWidth,M=c.seriesGroup,z=c.realIndex,$=c.i,H=c.j,B=c.w,ee=new de(this.barCtx.ctx);(T=Array.isArray(T)?T[z]:T)||(T=0);var re=m,ce=v;(d=B.config.series[z].data[H])!==null&&d!==void 0&&d.barHeightOffset&&(re=m-B.config.series[z].data[H].barHeightOffset/2,ce=v+B.config.series[z].data[H].barHeightOffset);var ye=re,_e=re+ce;b+=.001,S+=.001;var Ee=ee.move(b,ye),O=ee.move(b,ye);B.globals.previousPaths.length>0&&(O=this.barCtx.getPreviousPath(z,H,!1));var X=ee.line(b,_e-T);if(Ee=Ee+ee.line(S,ye)+ee.line(S,_e-T)+X+(B.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),O=O+ee.line(b,ye)+X+X+X+X+X+ee.line(b,ye)+(B.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(z)&&(Ee=ee.roundPathCorners(Ee,B.config.plotOptions.bar.borderRadius)),B.config.chart.stacked){var Q=this.barCtx;B.globals.hasSeriesGroups&&M&&(Q=this.barCtx[M]),Q.xArrj.push(S),Q.xArrjF.push(Math.abs(b-S)),Q.xArrjVal.push(this.barCtx.series[$][H])}return{pathTo:Ee,pathFrom:O}}},{key:"checkZeroSeries",value:function(c){for(var d=c.series,m=this.w,v=0;v<d.length;v++){for(var b=0,S=0;S<d[m.globals.maxValsInArrayIndex].length;S++)b+=d[v][S];b===0&&this.barCtx.zeroSerieses.push(v)}}},{key:"getXForValue",value:function(c,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?d:null;return c!=null&&(m=d+c/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?c/this.barCtx.invertedYRatio:0)),m}},{key:"getYForValue",value:function(c,d){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?d:null;return c!=null&&(m=d-c/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?c/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),m}},{key:"getGoalValues",value:function(c,d,m,v,b){var S=this,T=this.w,M=[],z=function(B,ee){var re;M.push((k(re={},c,c==="x"?S.getXForValue(B,d,!1):S.getYForValue(B,m,!1)),k(re,"attrs",ee),re))};if(T.globals.seriesGoals[v]&&T.globals.seriesGoals[v][b]&&Array.isArray(T.globals.seriesGoals[v][b])&&T.globals.seriesGoals[v][b].forEach(function(B){z(B.value,B)}),this.barCtx.barOptions.isDumbbell&&T.globals.seriesRange.length){var $=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:T.globals.colors,H={strokeHeight:c==="x"?0:T.globals.markers.size[v],strokeWidth:c==="x"?T.globals.markers.size[v]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray($[v])?$[v][0]:$[v]};z(T.globals.seriesRangeStart[v][b],H),z(T.globals.seriesRangeEnd[v][b],n(n({},H),{},{strokeColor:Array.isArray($[v])?$[v][1]:$[v]}))}return M}},{key:"drawGoalLine",value:function(c){var d=c.barXPosition,m=c.barYPosition,v=c.goalX,b=c.goalY,S=c.barWidth,T=c.barHeight,M=new de(this.barCtx.ctx),z=M.group({className:"apexcharts-bar-goals-groups"});z.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:z.node}),z.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var $=null;return this.barCtx.isHorizontal?Array.isArray(v)&&v.forEach(function(H){var B=H.attrs.strokeHeight!==void 0?H.attrs.strokeHeight:T/2,ee=m+B+T/2;$=M.drawLine(H.x,ee-2*B,H.x,ee,H.attrs.strokeColor?H.attrs.strokeColor:void 0,H.attrs.strokeDashArray,H.attrs.strokeWidth?H.attrs.strokeWidth:2,H.attrs.strokeLineCap),z.add($)}):Array.isArray(b)&&b.forEach(function(H){var B=H.attrs.strokeWidth!==void 0?H.attrs.strokeWidth:S/2,ee=d+B+S/2;$=M.drawLine(ee-2*B,H.y,ee,H.y,H.attrs.strokeColor?H.attrs.strokeColor:void 0,H.attrs.strokeDashArray,H.attrs.strokeHeight?H.attrs.strokeHeight:2,H.attrs.strokeLineCap),z.add($)}),z}},{key:"drawBarShadow",value:function(c){var d=c.prevPaths,m=c.currPaths,v=c.color,b=this.w,S=d.x,T=d.x1,M=d.barYPosition,z=m.x,$=m.x1,H=m.barYPosition,B=M+m.barHeight,ee=new de(this.barCtx.ctx),re=new W,ce=ee.move(T,B)+ee.line(S,B)+ee.line(z,H)+ee.line($,H)+ee.line(T,B)+(b.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z");return ee.drawPath({d:ce,fill:re.shadeColor(.5,W.rgb2hex(v)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(c){var d=c.i,m=c.j,v=this.w,b=0,S=0;return v.globals.seriesPercent.forEach(function(T,M){T[m]&&b++,M<d&&T[m]===0&&S++}),{nonZeroColumns:b,zeroEncounters:S}}}]),pe}(),we=function(){function pe(c,d){f(this,pe),this.ctx=c,this.w=c.w;var m=this.w;this.barOptions=m.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=m.config.stroke.width,this.isNullValue=!1,this.isRangeBar=m.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!m.globals.isBarHorizontal&&m.globals.seriesRange.length&&m.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=d,this.xyRatios!==null&&(this.xRatio=d.xRatio,this.initialXRatio=d.initialXRatio,this.yRatio=d.yRatio,this.invertedXRatio=d.invertedXRatio,this.invertedYRatio=d.invertedYRatio,this.baseLineY=d.baseLineY,this.baseLineInvertedY=d.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var v=new Dt(this.ctx);this.lastActiveBarSerieIndex=v.getActiveConfigSeriesIndex("desc",["bar","column"]);var b=v.getBarSeriesIndices(),S=new Ae(this.ctx);this.stackedSeriesTotals=S.getStackedSeriesTotals(this.w.config.series.map(function(T,M){return b.indexOf(M)===-1?M:-1}).filter(function(T){return T!==-1})),this.barHelpers=new Ge(this)}return s(pe,[{key:"draw",value:function(c,d){var m=this.w,v=new de(this.ctx),b=new Ae(this.ctx,m);c=b.getLogSeries(c),this.series=c,this.yRatio=b.getLogYRatios(this.yRatio),this.barHelpers.initVariables(c);var S=v.group({class:"apexcharts-bar-series apexcharts-plot-series"});m.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var T=0,M=0;T<c.length;T++,M++){var z,$,H,B,ee=void 0,re=void 0,ce=[],ye=[],_e=m.globals.comboCharts?d[T]:T,Ee=v.group({class:"apexcharts-series",rel:T+1,seriesName:W.escapeString(m.globals.seriesNames[_e]),"data:realIndex":_e});this.ctx.series.addCollapsedClassToSeries(Ee,_e),c[T].length>0&&(this.visibleI=this.visibleI+1);var O=0,X=0;this.yRatio.length>1&&(this.yaxisIndex=_e),this.isReversed=m.config.yaxis[this.yaxisIndex]&&m.config.yaxis[this.yaxisIndex].reversed;var Q=this.barHelpers.initialPositions();re=Q.y,O=Q.barHeight,$=Q.yDivision,B=Q.zeroW,ee=Q.x,X=Q.barWidth,z=Q.xDivision,H=Q.zeroH,this.horizontal||ye.push(ee+X/2);var xe=v.group({class:"apexcharts-datalabels","data:realIndex":_e});m.globals.delayedElements.push({el:xe.node}),xe.node.classList.add("apexcharts-element-hidden");var ke=v.group({class:"apexcharts-bar-goals-markers"}),Le=v.group({class:"apexcharts-bar-shadows"});m.globals.delayedElements.push({el:Le.node}),Le.node.classList.add("apexcharts-element-hidden");for(var rt=0;rt<m.globals.dataPoints;rt++){var Ze=this.barHelpers.getStrokeWidth(T,rt,_e),Et=null,Bt={indexes:{i:T,j:rt,realIndex:_e,bc:M},x:ee,y:re,strokeWidth:Ze,elSeries:Ee};this.isHorizontal?(Et=this.drawBarPaths(n(n({},Bt),{},{barHeight:O,zeroW:B,yDivision:$})),X=this.series[T][rt]/this.invertedYRatio):(Et=this.drawColumnPaths(n(n({},Bt),{},{xDivision:z,barWidth:X,zeroH:H})),O=this.series[T][rt]/this.yRatio[this.yaxisIndex]);var Nt=this.barHelpers.getPathFillColor(c,T,rt,_e);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&rt>0){var hr=this.barHelpers.drawBarShadow({color:typeof Nt=="string"&&(Nt==null?void 0:Nt.indexOf("url"))===-1?Nt:W.hexToRgba(m.globals.colors[T]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:Et});hr&&Le.add(hr)}this.pathArr.push(Et);var ar=this.barHelpers.drawGoalLine({barXPosition:Et.barXPosition,barYPosition:Et.barYPosition,goalX:Et.goalX,goalY:Et.goalY,barHeight:O,barWidth:X});ar&&ke.add(ar),re=Et.y,ee=Et.x,rt>0&&ye.push(ee+X/2),ce.push(re),this.renderSeries({realIndex:_e,pathFill:Nt,j:rt,i:T,pathFrom:Et.pathFrom,pathTo:Et.pathTo,strokeWidth:Ze,elSeries:Ee,x:ee,y:re,series:c,barHeight:Et.barHeight?Et.barHeight:O,barWidth:Et.barWidth?Et.barWidth:X,elDataLabelsWrap:xe,elGoalsMarkers:ke,elBarShadows:Le,visibleSeries:this.visibleI,type:"bar"})}m.globals.seriesXvalues[_e]=ye,m.globals.seriesYvalues[_e]=ce,S.add(Ee)}return S}},{key:"renderSeries",value:function(c){var d=c.realIndex,m=c.pathFill,v=c.lineFill,b=c.j,S=c.i,T=c.groupIndex,M=c.pathFrom,z=c.pathTo,$=c.strokeWidth,H=c.elSeries,B=c.x,ee=c.y,re=c.y1,ce=c.y2,ye=c.series,_e=c.barHeight,Ee=c.barWidth,O=c.barXPosition,X=c.barYPosition,Q=c.elDataLabelsWrap,xe=c.elGoalsMarkers,ke=c.elBarShadows,Le=c.visibleSeries,rt=c.type,Ze=this.w,Et=new de(this.ctx);v||(v=this.barOptions.distributed?Ze.globals.stroke.colors[b]:Ze.globals.stroke.colors[d]),Ze.config.series[S].data[b]&&Ze.config.series[S].data[b].strokeColor&&(v=Ze.config.series[S].data[b].strokeColor),this.isNullValue&&(m="none");var Bt=b/Ze.config.chart.animations.animateGradually.delay*(Ze.config.chart.animations.speed/Ze.globals.dataPoints)/2.4,Nt=Et.renderPaths({i:S,j:b,realIndex:d,pathFrom:M,pathTo:z,stroke:v,strokeWidth:$,strokeLineCap:Ze.config.stroke.lineCap,fill:m,animationDelay:Bt,initialSpeed:Ze.config.chart.animations.speed,dataChangeSpeed:Ze.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(rt,"-area")});Nt.attr("clip-path","url(#gridRectMask".concat(Ze.globals.cuid,")"));var hr=Ze.config.forecastDataPoints;hr.count>0&&b>=Ze.globals.dataPoints-hr.count&&(Nt.node.setAttribute("stroke-dasharray",hr.dashArray),Nt.node.setAttribute("stroke-width",hr.strokeWidth),Nt.node.setAttribute("fill-opacity",hr.fillOpacity)),re!==void 0&&ce!==void 0&&(Nt.attr("data-range-y1",re),Nt.attr("data-range-y2",ce)),new he(this.ctx).setSelectionFilter(Nt,d,b),H.add(Nt);var ar=new Ds(this).handleBarDataLabels({x:B,y:ee,y1:re,y2:ce,i:S,j:b,series:ye,realIndex:d,groupIndex:T,barHeight:_e,barWidth:Ee,barXPosition:O,barYPosition:X,renderedPath:Nt,visibleSeries:Le});return ar.dataLabels!==null&&Q.add(ar.dataLabels),ar.totalDataLabels&&Q.add(ar.totalDataLabels),H.add(Q),xe&&H.add(xe),ke&&H.add(ke),H}},{key:"drawBarPaths",value:function(c){var d,m=c.indexes,v=c.barHeight,b=c.strokeWidth,S=c.zeroW,T=c.x,M=c.y,z=c.yDivision,$=c.elSeries,H=this.w,B=m.i,ee=m.j;if(H.globals.isXNumeric)d=(M=(H.globals.seriesX[B][ee]-H.globals.minX)/this.invertedXRatio-v)+v*this.visibleI;else if(H.config.plotOptions.bar.hideZeroBarsWhenGrouped){var re=0,ce=0;H.globals.seriesPercent.forEach(function(_e,Ee){_e[ee]&&re++,Ee<B&&_e[ee]===0&&ce++}),re>0&&(v=this.seriesLen*v/re),d=M+v*this.visibleI,d-=v*ce}else d=M+v*this.visibleI;this.isFunnel&&(S-=(this.barHelpers.getXForValue(this.series[B][ee],S)-S)/2),T=this.barHelpers.getXForValue(this.series[B][ee],S);var ye=this.barHelpers.getBarpaths({barYPosition:d,barHeight:v,x1:S,x2:T,strokeWidth:b,series:this.series,realIndex:m.realIndex,i:B,j:ee,w:H});return H.globals.isXNumeric||(M+=z),this.barHelpers.barBackground({j:ee,i:B,y1:d-v*this.visibleI,y2:v*this.seriesLen,elSeries:$}),{pathTo:ye.pathTo,pathFrom:ye.pathFrom,x1:S,x:T,y:M,goalX:this.barHelpers.getGoalValues("x",S,null,B,ee),barYPosition:d,barHeight:v}}},{key:"drawColumnPaths",value:function(c){var d,m=c.indexes,v=c.x,b=c.y,S=c.xDivision,T=c.barWidth,M=c.zeroH,z=c.strokeWidth,$=c.elSeries,H=this.w,B=m.realIndex,ee=m.i,re=m.j,ce=m.bc;if(H.globals.isXNumeric){var ye=this.getBarXForNumericXAxis({x:v,j:re,realIndex:B,barWidth:T});v=ye.x,d=ye.barXPosition}else if(H.config.plotOptions.bar.hideZeroBarsWhenGrouped){var _e=this.barHelpers.getZeroValueEncounters({i:ee,j:re}),Ee=_e.nonZeroColumns,O=_e.zeroEncounters;Ee>0&&(T=this.seriesLen*T/Ee),d=v+T*this.visibleI,d-=T*O}else d=v+T*this.visibleI;b=this.barHelpers.getYForValue(this.series[ee][re],M);var X=this.barHelpers.getColumnPaths({barXPosition:d,barWidth:T,y1:M,y2:b,strokeWidth:z,series:this.series,realIndex:m.realIndex,i:ee,j:re,w:H});return H.globals.isXNumeric||(v+=S),this.barHelpers.barBackground({bc:ce,j:re,i:ee,x1:d-z/2-T*this.visibleI,x2:T*this.seriesLen+z/2,elSeries:$}),{pathTo:X.pathTo,pathFrom:X.pathFrom,x:v,y:b,goalY:this.barHelpers.getGoalValues("y",null,M,ee,re),barXPosition:d,barWidth:T}}},{key:"getBarXForNumericXAxis",value:function(c){var d=c.x,m=c.barWidth,v=c.realIndex,b=c.j,S=this.w,T=v;return S.globals.seriesX[v].length||(T=S.globals.maxValsInArrayIndex),S.globals.seriesX[T][b]&&(d=(S.globals.seriesX[T][b]-S.globals.minX)/this.xRatio-m*this.seriesLen/2),{barXPosition:d+m*this.visibleI,x:d}}},{key:"getPreviousPath",value:function(c,d){for(var m,v=this.w,b=0;b<v.globals.previousPaths.length;b++){var S=v.globals.previousPaths[b];S.paths&&S.paths.length>0&&parseInt(S.realIndex,10)===parseInt(c,10)&&v.globals.previousPaths[b].paths[d]!==void 0&&(m=v.globals.previousPaths[b].paths[d].d)}return m}}]),pe}(),Ce=function(pe){I(d,we);var c=q(d);function d(){return f(this,d),c.apply(this,arguments)}return s(d,[{key:"draw",value:function(m,v){var b=this,S=this.w;this.graphics=new de(this.ctx),this.bar=new we(this.ctx,this.xyRatios);var T=new Ae(this.ctx,S);m=T.getLogSeries(m),this.yRatio=T.getLogYRatios(this.yRatio),this.barHelpers.initVariables(m),S.config.chart.stackType==="100%"&&(m=S.globals.seriesPercent.slice()),this.series=m,this.barHelpers.initializeStackedPrevVars(this);for(var M=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),z=0,$=0,H=function(re,ce){var ye=void 0,_e=void 0,Ee=void 0,O=void 0,X=-1;b.groupCtx=b,S.globals.seriesGroups.forEach(function(Pn,Jn){Pn.indexOf(S.config.series[re].name)>-1&&(X=Jn)}),X!==-1&&(b.groupCtx=b[S.globals.seriesGroups[X]]);var Q=[],xe=[],ke=S.globals.comboCharts?v[re]:re;b.yRatio.length>1&&(b.yaxisIndex=ke),b.isReversed=S.config.yaxis[b.yaxisIndex]&&S.config.yaxis[b.yaxisIndex].reversed;var Le=b.graphics.group({class:"apexcharts-series",seriesName:W.escapeString(S.globals.seriesNames[ke]),rel:re+1,"data:realIndex":ke});b.ctx.series.addCollapsedClassToSeries(Le,ke);var rt=b.graphics.group({class:"apexcharts-datalabels","data:realIndex":ke}),Ze=b.graphics.group({class:"apexcharts-bar-goals-markers"}),Et=0,Bt=0,Nt=b.initialPositions(z,$,ye,_e,Ee,O);$=Nt.y,Et=Nt.barHeight,_e=Nt.yDivision,O=Nt.zeroW,z=Nt.x,Bt=Nt.barWidth,ye=Nt.xDivision,Ee=Nt.zeroH,b.barHelpers.initializeStackedXYVars(b),b.groupCtx.prevY.length===1&&b.groupCtx.prevY[0].every(function(Pn){return isNaN(Pn)})&&(b.groupCtx.prevY[0]=b.groupCtx.prevY[0].map(function(Pn){return Ee}),b.groupCtx.prevYF[0]=b.groupCtx.prevYF[0].map(function(Pn){return 0}));for(var hr=0;hr<S.globals.dataPoints;hr++){var ar=b.barHelpers.getStrokeWidth(re,hr,ke),Jr={indexes:{i:re,j:hr,realIndex:ke,bc:ce},strokeWidth:ar,x:z,y:$,elSeries:Le,groupIndex:X,seriesGroup:S.globals.seriesGroups[X]},tn=null;b.isHorizontal?(tn=b.drawStackedBarPaths(n(n({},Jr),{},{zeroW:O,barHeight:Et,yDivision:_e})),Bt=b.series[re][hr]/b.invertedYRatio):(tn=b.drawStackedColumnPaths(n(n({},Jr),{},{xDivision:ye,barWidth:Bt,zeroH:Ee})),Et=b.series[re][hr]/b.yRatio[b.yaxisIndex]);var pn=b.barHelpers.drawGoalLine({barXPosition:tn.barXPosition,barYPosition:tn.barYPosition,goalX:tn.goalX,goalY:tn.goalY,barHeight:Et,barWidth:Bt});pn&&Ze.add(pn),$=tn.y,z=tn.x,Q.push(z),xe.push($);var bn=b.barHelpers.getPathFillColor(m,re,hr,ke);Le=b.renderSeries({realIndex:ke,pathFill:bn,j:hr,i:re,groupIndex:X,pathFrom:tn.pathFrom,pathTo:tn.pathTo,strokeWidth:ar,elSeries:Le,x:z,y:$,series:m,barHeight:Et,barWidth:Bt,elDataLabelsWrap:rt,elGoalsMarkers:Ze,type:"bar",visibleSeries:0})}S.globals.seriesXvalues[ke]=Q,S.globals.seriesYvalues[ke]=xe,b.groupCtx.prevY.push(b.groupCtx.yArrj),b.groupCtx.prevYF.push(b.groupCtx.yArrjF),b.groupCtx.prevYVal.push(b.groupCtx.yArrjVal),b.groupCtx.prevX.push(b.groupCtx.xArrj),b.groupCtx.prevXF.push(b.groupCtx.xArrjF),b.groupCtx.prevXVal.push(b.groupCtx.xArrjVal),M.add(Le)},B=0,ee=0;B<m.length;B++,ee++)H(B,ee);return M}},{key:"initialPositions",value:function(m,v,b,S,T,M){var z,$,H,B,ee=this.w;return this.isHorizontal?(H=(H=S=ee.globals.gridHeight/ee.globals.dataPoints)*parseInt(ee.config.plotOptions.bar.barHeight,10)/100,String(ee.config.plotOptions.bar.barHeight).indexOf("%")===-1&&(H=parseInt(ee.config.plotOptions.bar.barHeight,10)),M=this.baseLineInvertedY+ee.globals.padHorizontal+(this.isReversed?ee.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),v=(S-H)/2):(B=b=ee.globals.gridWidth/ee.globals.dataPoints,B=ee.globals.isXNumeric&&ee.globals.dataPoints>1?(b=ee.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:B*parseInt(ee.config.plotOptions.bar.columnWidth,10)/100,String(ee.config.plotOptions.bar.columnWidth).indexOf("%")===-1&&(B=parseInt(ee.config.plotOptions.bar.columnWidth,10)),T=ee.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?ee.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),m=ee.globals.padHorizontal+(b-B)/2),{x:m,y:v,yDivision:S,xDivision:b,barHeight:(z=ee.globals.seriesGroups)!==null&&z!==void 0&&z.length?H/ee.globals.seriesGroups.length:H,barWidth:($=ee.globals.seriesGroups)!==null&&$!==void 0&&$.length?B/ee.globals.seriesGroups.length:B,zeroH:T,zeroW:M}}},{key:"drawStackedBarPaths",value:function(m){for(var v,b=m.indexes,S=m.barHeight,T=m.strokeWidth,M=m.zeroW,z=m.x,$=m.y,H=m.groupIndex,B=m.seriesGroup,ee=m.yDivision,re=m.elSeries,ce=this.w,ye=$+(H!==-1?H*S:0),_e=b.i,Ee=b.j,O=0,X=0;X<this.groupCtx.prevXF.length;X++)O+=this.groupCtx.prevXF[X][Ee];var Q=_e;if(B&&(Q=B.indexOf(ce.config.series[_e].name)),Q>0){var xe=M;this.groupCtx.prevXVal[Q-1][Ee]<0?xe=this.series[_e][Ee]>=0?this.groupCtx.prevX[Q-1][Ee]+O-2*(this.isReversed?O:0):this.groupCtx.prevX[Q-1][Ee]:this.groupCtx.prevXVal[Q-1][Ee]>=0&&(xe=this.series[_e][Ee]>=0?this.groupCtx.prevX[Q-1][Ee]:this.groupCtx.prevX[Q-1][Ee]-O+2*(this.isReversed?O:0)),v=xe}else v=M;z=this.series[_e][Ee]===null?v:v+this.series[_e][Ee]/this.invertedYRatio-2*(this.isReversed?this.series[_e][Ee]/this.invertedYRatio:0);var ke=this.barHelpers.getBarpaths({barYPosition:ye,barHeight:S,x1:v,x2:z,strokeWidth:T,series:this.series,realIndex:b.realIndex,seriesGroup:B,i:_e,j:Ee,w:ce});return this.barHelpers.barBackground({j:Ee,i:_e,y1:ye,y2:S,elSeries:re}),$+=ee,{pathTo:ke.pathTo,pathFrom:ke.pathFrom,goalX:this.barHelpers.getGoalValues("x",M,null,_e,Ee),barYPosition:ye,x:z,y:$}}},{key:"drawStackedColumnPaths",value:function(m){var v=m.indexes,b=m.x,S=m.y,T=m.xDivision,M=m.barWidth,z=m.zeroH,$=m.groupIndex,H=m.seriesGroup,B=m.elSeries,ee=this.w,re=v.i,ce=v.j,ye=v.bc;if(ee.globals.isXNumeric){var _e=ee.globals.seriesX[re][ce];_e||(_e=0),b=(_e-ee.globals.minX)/this.xRatio-M/2,ee.globals.seriesGroups.length&&(b=(_e-ee.globals.minX)/this.xRatio-M/2*ee.globals.seriesGroups.length)}for(var Ee,O=b+($!==-1?$*M:0),X=0,Q=0;Q<this.groupCtx.prevYF.length;Q++)X+=isNaN(this.groupCtx.prevYF[Q][ce])?0:this.groupCtx.prevYF[Q][ce];var xe=re;if(H&&(xe=H.indexOf(ee.config.series[re].name)),xe>0&&!ee.globals.isXNumeric||xe>0&&ee.globals.isXNumeric&&ee.globals.seriesX[re-1][ce]===ee.globals.seriesX[re][ce]){var ke,Le,rt,Ze=Math.min(this.yRatio.length+1,re+1);if(this.groupCtx.prevY[xe-1]!==void 0&&this.groupCtx.prevY[xe-1].length)for(var Et=1;Et<Ze;Et++){var Bt;if(!isNaN((Bt=this.groupCtx.prevY[xe-Et])===null||Bt===void 0?void 0:Bt[ce])){rt=this.groupCtx.prevY[xe-Et][ce];break}}for(var Nt=1;Nt<Ze;Nt++){var hr,ar;if(((hr=this.groupCtx.prevYVal[xe-Nt])===null||hr===void 0?void 0:hr[ce])<0){Le=this.series[re][ce]>=0?rt-X+2*(this.isReversed?X:0):rt;break}if(((ar=this.groupCtx.prevYVal[xe-Nt])===null||ar===void 0?void 0:ar[ce])>=0){Le=this.series[re][ce]>=0?rt:rt+X-2*(this.isReversed?X:0);break}}Le===void 0&&(Le=ee.globals.gridHeight),Ee=(ke=this.groupCtx.prevYF[0])!==null&&ke!==void 0&&ke.every(function(tn){return tn===0})&&this.groupCtx.prevYF.slice(1,xe).every(function(tn){return tn.every(function(pn){return isNaN(pn)})})?z:Le}else Ee=z;S=this.series[re][ce]?Ee-this.series[re][ce]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[re][ce]/this.yRatio[this.yaxisIndex]:0):Ee;var Jr=this.barHelpers.getColumnPaths({barXPosition:O,barWidth:M,y1:Ee,y2:S,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:H,realIndex:v.realIndex,i:re,j:ce,w:ee});return this.barHelpers.barBackground({bc:ye,j:ce,i:re,x1:O,x2:M,elSeries:B}),b+=T,{pathTo:Jr.pathTo,pathFrom:Jr.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,z,re,ce),barXPosition:O,x:ee.globals.isXNumeric?b-T:b,y:S}}}]),d}(),He=function(pe){I(d,we);var c=q(d);function d(){return f(this,d),c.apply(this,arguments)}return s(d,[{key:"draw",value:function(m,v,b){var S=this,T=this.w,M=new de(this.ctx),z=T.globals.comboCharts?v:T.config.chart.type,$=new ut(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=T.config.plotOptions.bar.horizontal;var H=new Ae(this.ctx,T);m=H.getLogSeries(m),this.series=m,this.yRatio=H.getLogYRatios(this.yRatio),this.barHelpers.initVariables(m);for(var B=M.group({class:"apexcharts-".concat(z,"-series apexcharts-plot-series")}),ee=function(ce){S.isBoxPlot=T.config.chart.type==="boxPlot"||T.config.series[ce].type==="boxPlot";var ye,_e,Ee,O,X=void 0,Q=void 0,xe=[],ke=[],Le=T.globals.comboCharts?b[ce]:ce,rt=M.group({class:"apexcharts-series",seriesName:W.escapeString(T.globals.seriesNames[Le]),rel:ce+1,"data:realIndex":Le});S.ctx.series.addCollapsedClassToSeries(rt,Le),m[ce].length>0&&(S.visibleI=S.visibleI+1);var Ze,Et;S.yRatio.length>1&&(S.yaxisIndex=Le);var Bt=S.barHelpers.initialPositions();Q=Bt.y,Ze=Bt.barHeight,_e=Bt.yDivision,O=Bt.zeroW,X=Bt.x,Et=Bt.barWidth,ye=Bt.xDivision,Ee=Bt.zeroH,ke.push(X+Et/2);for(var Nt=M.group({class:"apexcharts-datalabels","data:realIndex":Le}),hr=function(Jr){var tn=S.barHelpers.getStrokeWidth(ce,Jr,Le),pn=null,bn={indexes:{i:ce,j:Jr,realIndex:Le},x:X,y:Q,strokeWidth:tn,elSeries:rt};pn=S.isHorizontal?S.drawHorizontalBoxPaths(n(n({},bn),{},{yDivision:_e,barHeight:Ze,zeroW:O})):S.drawVerticalBoxPaths(n(n({},bn),{},{xDivision:ye,barWidth:Et,zeroH:Ee})),Q=pn.y,X=pn.x,Jr>0&&ke.push(X+Et/2),xe.push(Q),pn.pathTo.forEach(function(Pn,Jn){var it=!S.isBoxPlot&&S.candlestickOptions.wick.useFillColor?pn.color[Jn]:T.globals.stroke.colors[ce],Rt=$.fillPath({seriesNumber:Le,dataPointIndex:Jr,color:pn.color[Jn],value:m[ce][Jr]});S.renderSeries({realIndex:Le,pathFill:Rt,lineFill:it,j:Jr,i:ce,pathFrom:pn.pathFrom,pathTo:Pn,strokeWidth:tn,elSeries:rt,x:X,y:Q,series:m,barHeight:Ze,barWidth:Et,elDataLabelsWrap:Nt,visibleSeries:S.visibleI,type:T.config.chart.type})})},ar=0;ar<T.globals.dataPoints;ar++)hr(ar);T.globals.seriesXvalues[Le]=ke,T.globals.seriesYvalues[Le]=xe,B.add(rt)},re=0;re<m.length;re++)ee(re);return B}},{key:"drawVerticalBoxPaths",value:function(m){var v=m.indexes,b=m.x;m.y;var S=m.xDivision,T=m.barWidth,M=m.zeroH,z=m.strokeWidth,$=this.w,H=new de(this.ctx),B=v.i,ee=v.j,re=!0,ce=$.config.plotOptions.candlestick.colors.upward,ye=$.config.plotOptions.candlestick.colors.downward,_e="";this.isBoxPlot&&(_e=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var Ee=this.yRatio[this.yaxisIndex],O=v.realIndex,X=this.getOHLCValue(O,ee),Q=M,xe=M;X.o>X.c&&(re=!1);var ke=Math.min(X.o,X.c),Le=Math.max(X.o,X.c),rt=X.m;$.globals.isXNumeric&&(b=($.globals.seriesX[O][ee]-$.globals.minX)/this.xRatio-T/2);var Ze=b+T*this.visibleI;this.series[B][ee]===void 0||this.series[B][ee]===null?(ke=M,Le=M):(ke=M-ke/Ee,Le=M-Le/Ee,Q=M-X.h/Ee,xe=M-X.l/Ee,rt=M-X.m/Ee);var Et=H.move(Ze,M),Bt=H.move(Ze+T/2,ke);return $.globals.previousPaths.length>0&&(Bt=this.getPreviousPath(O,ee,!0)),Et=this.isBoxPlot?[H.move(Ze,ke)+H.line(Ze+T/2,ke)+H.line(Ze+T/2,Q)+H.line(Ze+T/4,Q)+H.line(Ze+T-T/4,Q)+H.line(Ze+T/2,Q)+H.line(Ze+T/2,ke)+H.line(Ze+T,ke)+H.line(Ze+T,rt)+H.line(Ze,rt)+H.line(Ze,ke+z/2),H.move(Ze,rt)+H.line(Ze+T,rt)+H.line(Ze+T,Le)+H.line(Ze+T/2,Le)+H.line(Ze+T/2,xe)+H.line(Ze+T-T/4,xe)+H.line(Ze+T/4,xe)+H.line(Ze+T/2,xe)+H.line(Ze+T/2,Le)+H.line(Ze,Le)+H.line(Ze,rt)+"z"]:[H.move(Ze,Le)+H.line(Ze+T/2,Le)+H.line(Ze+T/2,Q)+H.line(Ze+T/2,Le)+H.line(Ze+T,Le)+H.line(Ze+T,ke)+H.line(Ze+T/2,ke)+H.line(Ze+T/2,xe)+H.line(Ze+T/2,ke)+H.line(Ze,ke)+H.line(Ze,Le-z/2)],Bt+=H.move(Ze,ke),$.globals.isXNumeric||(b+=S),{pathTo:Et,pathFrom:Bt,x:b,y:Le,barXPosition:Ze,color:this.isBoxPlot?_e:re?[ce]:[ye]}}},{key:"drawHorizontalBoxPaths",value:function(m){var v=m.indexes;m.x;var b=m.y,S=m.yDivision,T=m.barHeight,M=m.zeroW,z=m.strokeWidth,$=this.w,H=new de(this.ctx),B=v.i,ee=v.j,re=this.boxOptions.colors.lower;this.isBoxPlot&&(re=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var ce=this.invertedYRatio,ye=v.realIndex,_e=this.getOHLCValue(ye,ee),Ee=M,O=M,X=Math.min(_e.o,_e.c),Q=Math.max(_e.o,_e.c),xe=_e.m;$.globals.isXNumeric&&(b=($.globals.seriesX[ye][ee]-$.globals.minX)/this.invertedXRatio-T/2);var ke=b+T*this.visibleI;this.series[B][ee]===void 0||this.series[B][ee]===null?(X=M,Q=M):(X=M+X/ce,Q=M+Q/ce,Ee=M+_e.h/ce,O=M+_e.l/ce,xe=M+_e.m/ce);var Le=H.move(M,ke),rt=H.move(X,ke+T/2);return $.globals.previousPaths.length>0&&(rt=this.getPreviousPath(ye,ee,!0)),Le=[H.move(X,ke)+H.line(X,ke+T/2)+H.line(Ee,ke+T/2)+H.line(Ee,ke+T/2-T/4)+H.line(Ee,ke+T/2+T/4)+H.line(Ee,ke+T/2)+H.line(X,ke+T/2)+H.line(X,ke+T)+H.line(xe,ke+T)+H.line(xe,ke)+H.line(X+z/2,ke),H.move(xe,ke)+H.line(xe,ke+T)+H.line(Q,ke+T)+H.line(Q,ke+T/2)+H.line(O,ke+T/2)+H.line(O,ke+T-T/4)+H.line(O,ke+T/4)+H.line(O,ke+T/2)+H.line(Q,ke+T/2)+H.line(Q,ke)+H.line(xe,ke)+"z"],rt+=H.move(X,ke),$.globals.isXNumeric||(b+=S),{pathTo:Le,pathFrom:rt,x:Q,y:b,barYPosition:ke,color:re}}},{key:"getOHLCValue",value:function(m,v){var b=this.w;return{o:this.isBoxPlot?b.globals.seriesCandleH[m][v]:b.globals.seriesCandleO[m][v],h:this.isBoxPlot?b.globals.seriesCandleO[m][v]:b.globals.seriesCandleH[m][v],m:b.globals.seriesCandleM[m][v],l:this.isBoxPlot?b.globals.seriesCandleC[m][v]:b.globals.seriesCandleL[m][v],c:this.isBoxPlot?b.globals.seriesCandleL[m][v]:b.globals.seriesCandleC[m][v]}}}]),d}(),Qe=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"checkColorRange",value:function(){var c=this.w,d=!1,m=c.config.plotOptions[c.config.chart.type];return m.colorScale.ranges.length>0&&m.colorScale.ranges.map(function(v,b){v.from<=0&&(d=!0)}),d}},{key:"getShadeColor",value:function(c,d,m,v){var b=this.w,S=1,T=b.config.plotOptions[c].shadeIntensity,M=this.determineColor(c,d,m);b.globals.hasNegs||v?S=b.config.plotOptions[c].reverseNegativeShade?M.percent<0?M.percent/100*(1.25*T):(1-M.percent/100)*(1.25*T):M.percent<=0?1-(1+M.percent/100)*T:(1-M.percent/100)*T:(S=1-M.percent/100,c==="treemap"&&(S=(1-M.percent/100)*(1.25*T)));var z=M.color,$=new W;return b.config.plotOptions[c].enableShades&&(z=this.w.config.theme.mode==="dark"?W.hexToRgba($.shadeColor(-1*S,M.color),b.config.fill.opacity):W.hexToRgba($.shadeColor(S,M.color),b.config.fill.opacity)),{color:z,colorProps:M}}},{key:"determineColor",value:function(c,d,m){var v=this.w,b=v.globals.series[d][m],S=v.config.plotOptions[c],T=S.colorScale.inverse?m:d;S.distributed&&v.config.chart.type==="treemap"&&(T=m);var M=v.globals.colors[T],z=null,$=Math.min.apply(Math,ae(v.globals.series[d])),H=Math.max.apply(Math,ae(v.globals.series[d]));S.distributed||c!=="heatmap"||($=v.globals.minY,H=v.globals.maxY),S.colorScale.min!==void 0&&($=S.colorScale.min<v.globals.minY?S.colorScale.min:v.globals.minY,H=S.colorScale.max>v.globals.maxY?S.colorScale.max:v.globals.maxY);var B=Math.abs(H)+Math.abs($),ee=100*b/(B===0?B-1e-6:B);return S.colorScale.ranges.length>0&&S.colorScale.ranges.map(function(re,ce){if(b>=re.from&&b<=re.to){M=re.color,z=re.foreColor?re.foreColor:null,$=re.from,H=re.to;var ye=Math.abs(H)+Math.abs($);ee=100*b/(ye===0?ye-1e-6:ye)}}),{color:M,foreColor:z,percent:ee}}},{key:"calculateDataLabels",value:function(c){var d=c.text,m=c.x,v=c.y,b=c.i,S=c.j,T=c.colorProps,M=c.fontSize,z=this.w.config.dataLabels,$=new de(this.ctx),H=new vt(this.ctx),B=null;if(z.enabled){B=$.group({class:"apexcharts-data-labels"});var ee=z.offsetX,re=z.offsetY,ce=m+ee,ye=v+parseFloat(z.style.fontSize)/3+re;H.plotDataLabelsText({x:ce,y:ye,text:d,i:b,j:S,color:T.foreColor,parent:B,fontSize:M,dataLabelsConfig:z})}return B}},{key:"addListeners",value:function(c){var d=new de(this.ctx);c.node.addEventListener("mouseenter",d.pathMouseEnter.bind(this,c)),c.node.addEventListener("mouseleave",d.pathMouseLeave.bind(this,c)),c.node.addEventListener("mousedown",d.pathMouseDown.bind(this,c))}}]),pe}(),ot=function(){function pe(c,d){f(this,pe),this.ctx=c,this.w=c.w,this.xRatio=d.xRatio,this.yRatio=d.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Qe(c),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return s(pe,[{key:"draw",value:function(c){var d=this.w,m=new de(this.ctx),v=m.group({class:"apexcharts-heatmap"});v.attr("clip-path","url(#gridRectMask".concat(d.globals.cuid,")"));var b=d.globals.gridWidth/d.globals.dataPoints,S=d.globals.gridHeight/d.globals.series.length,T=0,M=!1;this.negRange=this.helpers.checkColorRange();var z=c.slice();d.config.yaxis[0].reversed&&(M=!0,z.reverse());for(var $=M?0:z.length-1;M?$<z.length:$>=0;M?$++:$--){var H=m.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:W.escapeString(d.globals.seriesNames[$]),rel:$+1,"data:realIndex":$});if(this.ctx.series.addCollapsedClassToSeries(H,$),d.config.chart.dropShadow.enabled){var B=d.config.chart.dropShadow;new he(this.ctx).dropShadow(H,B,$)}for(var ee=0,re=d.config.plotOptions.heatmap.shadeIntensity,ce=0;ce<z[$].length;ce++){var ye=this.helpers.getShadeColor(d.config.chart.type,$,ce,this.negRange),_e=ye.color,Ee=ye.colorProps;d.config.fill.type==="image"&&(_e=new ut(this.ctx).fillPath({seriesNumber:$,dataPointIndex:ce,opacity:d.globals.hasNegs?Ee.percent<0?1-(1+Ee.percent/100):re+Ee.percent/100:Ee.percent/100,patternID:W.randomId(),width:d.config.fill.image.width?d.config.fill.image.width:b,height:d.config.fill.image.height?d.config.fill.image.height:S}));var O=this.rectRadius,X=m.drawRect(ee,T,b,S,O);if(X.attr({cx:ee,cy:T}),X.node.classList.add("apexcharts-heatmap-rect"),H.add(X),X.attr({fill:_e,i:$,index:$,j:ce,val:z[$][ce],"stroke-width":this.strokeWidth,stroke:d.config.plotOptions.heatmap.useFillColorAsStroke?_e:d.globals.stroke.colors[0],color:_e}),this.helpers.addListeners(X),d.config.chart.animations.enabled&&!d.globals.dataChanged){var Q=1;d.globals.resized||(Q=d.config.chart.animations.speed),this.animateHeatMap(X,ee,T,b,S,Q)}if(d.globals.dataChanged){var xe=1;if(this.dynamicAnim.enabled&&d.globals.shouldAnimate){xe=this.dynamicAnim.speed;var ke=d.globals.previousPaths[$]&&d.globals.previousPaths[$][ce]&&d.globals.previousPaths[$][ce].color;ke||(ke="rgba(255, 255, 255, 0)"),this.animateHeatColor(X,W.isColorHex(ke)?ke:W.rgb2hex(ke),W.isColorHex(_e)?_e:W.rgb2hex(_e),xe)}}var Le=(0,d.config.dataLabels.formatter)(d.globals.series[$][ce],{value:d.globals.series[$][ce],seriesIndex:$,dataPointIndex:ce,w:d}),rt=this.helpers.calculateDataLabels({text:Le,x:ee+b/2,y:T+S/2,i:$,j:ce,colorProps:Ee,series:z});rt!==null&&H.add(rt),ee+=b}T+=S,v.add(H)}var Ze=d.globals.yAxisScale[0].result.slice();return d.config.yaxis[0].reversed?Ze.unshift(""):Ze.push(""),d.globals.yAxisScale[0].result=Ze,v}},{key:"animateHeatMap",value:function(c,d,m,v,b,S){var T=new K(this.ctx);T.animateRect(c,{x:d+v/2,y:m+b/2,width:0,height:0},{x:d,y:m,width:v,height:b},S,function(){T.animationCompleted(c)})}},{key:"animateHeatColor",value:function(c,d,m,v){c.attr({fill:d}).animate(v).attr({fill:m})}}]),pe}(),gt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"drawYAxisTexts",value:function(c,d,m,v){var b=this.w,S=b.config.yaxis[0],T=b.globals.yLabelFormatters[0];return new de(this.ctx).drawText({x:c+S.labels.offsetX,y:d+S.labels.offsetY,text:T(v,m),textAnchor:"middle",fontSize:S.labels.style.fontSize,fontFamily:S.labels.style.fontFamily,foreColor:Array.isArray(S.labels.style.colors)?S.labels.style.colors[m]:S.labels.style.colors})}}]),pe}(),yt=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w;var d=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=d.globals.stroke.colors!==void 0?d.globals.stroke.colors:d.globals.colors,this.defaultSize=Math.min(d.globals.gridWidth,d.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=d.globals.gridWidth/2,d.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(d.config.plotOptions.pie.endAngle-d.config.plotOptions.pie.startAngle),this.initialAngle=d.config.plotOptions.pie.startAngle%this.fullAngle,d.globals.radialSize=this.defaultSize/2.05-d.config.stroke.width-(d.config.chart.sparkline.enabled?0:d.config.chart.dropShadow.blur),this.donutSize=d.globals.radialSize*parseInt(d.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return s(pe,[{key:"draw",value:function(c){var d=this,m=this.w,v=new de(this.ctx);if(this.ret=v.group({class:"apexcharts-pie"}),m.globals.noData)return this.ret;for(var b=0,S=0;S<c.length;S++)b+=W.negToZero(c[S]);var T=[],M=v.group();b===0&&(b=1e-5),c.forEach(function(ke){d.maxY=Math.max(d.maxY,ke)}),m.config.yaxis[0].max&&(this.maxY=m.config.yaxis[0].max),m.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret);for(var z=0;z<c.length;z++){var $=this.fullAngle*W.negToZero(c[z])/b;T.push($),this.chartType==="polarArea"?(T[z]=this.fullAngle/c.length,this.sliceSizes.push(m.globals.radialSize*c[z]/this.maxY)):this.sliceSizes.push(m.globals.radialSize)}if(m.globals.dataChanged){for(var H,B=0,ee=0;ee<m.globals.previousPaths.length;ee++)B+=W.negToZero(m.globals.previousPaths[ee]);for(var re=0;re<m.globals.previousPaths.length;re++)H=this.fullAngle*W.negToZero(m.globals.previousPaths[re])/B,this.prevSectorAngleArr.push(H)}this.donutSize<0&&(this.donutSize=0);var ce=m.config.plotOptions.pie.customScale,ye=m.globals.gridWidth/2,_e=m.globals.gridHeight/2,Ee=ye-m.globals.gridWidth/2*ce,O=_e-m.globals.gridHeight/2*ce;if(this.chartType==="donut"){var X=v.drawCircle(this.donutSize);X.attr({cx:this.centerX,cy:this.centerY,fill:m.config.plotOptions.pie.donut.background?m.config.plotOptions.pie.donut.background:"transparent"}),M.add(X)}var Q=this.drawArcs(T,c);if(this.sliceLabels.forEach(function(ke){Q.add(ke)}),M.attr({transform:"translate(".concat(Ee,", ").concat(O,") scale(").concat(ce,")")}),M.add(Q),this.ret.add(M),this.donutDataLabels.show){var xe=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:Ee,translateY:O});this.ret.add(xe)}return m.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(c,d){var m=this.w,v=new he(this.ctx),b=new de(this.ctx),S=new ut(this.ctx),T=b.group({class:"apexcharts-slices"}),M=this.initialAngle,z=this.initialAngle,$=this.initialAngle,H=this.initialAngle;this.strokeWidth=m.config.stroke.show?m.config.stroke.width:0;for(var B=0;B<c.length;B++){var ee=b.group({class:"apexcharts-series apexcharts-pie-series",seriesName:W.escapeString(m.globals.seriesNames[B]),rel:B+1,"data:realIndex":B});T.add(ee),z=H,$=(M=$)+c[B],H=z+this.prevSectorAngleArr[B];var re=$<M?this.fullAngle+$-M:$-M,ce=S.fillPath({seriesNumber:B,size:this.sliceSizes[B],value:d[B]}),ye=this.getChangedPath(z,H),_e=b.drawPath({d:ye,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[B]:this.lineColorArr,strokeWidth:0,fill:ce,fillOpacity:m.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(B)});if(_e.attr({index:0,j:B}),v.setSelectionFilter(_e,0,B),m.config.chart.dropShadow.enabled){var Ee=m.config.chart.dropShadow;v.dropShadow(_e,Ee,B)}this.addListeners(_e,this.donutDataLabels),de.setAttrs(_e.node,{"data:angle":re,"data:startAngle":M,"data:strokeWidth":this.strokeWidth,"data:value":d[B]});var O={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?O=W.polarToCartesian(this.centerX,this.centerY,m.globals.radialSize/1.25+m.config.plotOptions.pie.dataLabels.offset,(M+re/2)%this.fullAngle):this.chartType==="donut"&&(O=W.polarToCartesian(this.centerX,this.centerY,(m.globals.radialSize+this.donutSize)/2+m.config.plotOptions.pie.dataLabels.offset,(M+re/2)%this.fullAngle)),ee.add(_e);var X=0;if(!this.initialAnim||m.globals.resized||m.globals.dataChanged?this.animBeginArr.push(0):((X=re/this.fullAngle*m.config.chart.animations.speed)===0&&(X=1),this.animDur=X+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&m.globals.dataChanged?this.animatePaths(_e,{size:this.sliceSizes[B],endAngle:$,startAngle:M,prevStartAngle:z,prevEndAngle:H,animateStartingPos:!0,i:B,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:m.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(_e,{size:this.sliceSizes[B],endAngle:$,startAngle:M,i:B,totalItems:c.length-1,animBeginArr:this.animBeginArr,dur:X}),m.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&_e.click(this.pieClicked.bind(this,B)),m.globals.selectedDataPoints[0]!==void 0&&m.globals.selectedDataPoints[0].indexOf(B)>-1&&this.pieClicked(B),m.config.dataLabels.enabled){var Q=O.x,xe=O.y,ke=100*re/this.fullAngle+"%";if(re!==0&&m.config.plotOptions.pie.dataLabels.minAngleToShowLabel<c[B]){var Le=m.config.dataLabels.formatter;Le!==void 0&&(ke=Le(m.globals.seriesPercent[B][0],{seriesIndex:B,w:m}));var rt=m.globals.dataLabels.style.colors[B],Ze=b.group({class:"apexcharts-datalabels"}),Et=b.drawText({x:Q,y:xe,text:ke,textAnchor:"middle",fontSize:m.config.dataLabels.style.fontSize,fontFamily:m.config.dataLabels.style.fontFamily,fontWeight:m.config.dataLabels.style.fontWeight,foreColor:rt});if(Ze.add(Et),m.config.dataLabels.dropShadow.enabled){var Bt=m.config.dataLabels.dropShadow;v.dropShadow(Et,Bt)}Et.node.classList.add("apexcharts-pie-label"),m.config.chart.animations.animate&&m.globals.resized===!1&&(Et.node.classList.add("apexcharts-pie-label-delay"),Et.node.style.animationDelay=m.config.chart.animations.speed/940+"s"),this.sliceLabels.push(Ze)}}}return T}},{key:"addListeners",value:function(c,d){var m=new de(this.ctx);c.node.addEventListener("mouseenter",m.pathMouseEnter.bind(this,c)),c.node.addEventListener("mouseleave",m.pathMouseLeave.bind(this,c)),c.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,c.node,d)),c.node.addEventListener("mousedown",m.pathMouseDown.bind(this,c)),this.donutDataLabels.total.showAlways||(c.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,c.node,d)),c.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,c.node,d)))}},{key:"animatePaths",value:function(c,d){var m=this.w,v=d.endAngle<d.startAngle?this.fullAngle+d.endAngle-d.startAngle:d.endAngle-d.startAngle,b=v,S=d.startAngle,T=d.startAngle;d.prevStartAngle!==void 0&&d.prevEndAngle!==void 0&&(S=d.prevEndAngle,b=d.prevEndAngle<d.prevStartAngle?this.fullAngle+d.prevEndAngle-d.prevStartAngle:d.prevEndAngle-d.prevStartAngle),d.i===m.config.series.length-1&&(v+T>this.fullAngle?d.endAngle=d.endAngle-(v+T):v+T<this.fullAngle&&(d.endAngle=d.endAngle+(this.fullAngle-(v+T)))),v===this.fullAngle&&(v=this.fullAngle-.01),this.animateArc(c,S,T,v,b,d)}},{key:"animateArc",value:function(c,d,m,v,b,S){var T,M=this,z=this.w,$=new K(this.ctx),H=S.size;(isNaN(d)||isNaN(b))&&(d=m,b=v,S.dur=0);var B=v,ee=m,re=d<m?this.fullAngle+d-m:d-m;z.globals.dataChanged&&S.shouldSetPrevPaths&&S.prevEndAngle&&(T=M.getPiePath({me:M,startAngle:S.prevStartAngle,angle:S.prevEndAngle<S.prevStartAngle?this.fullAngle+S.prevEndAngle-S.prevStartAngle:S.prevEndAngle-S.prevStartAngle,size:H}),c.attr({d:T})),S.dur!==0?c.animate(S.dur,z.globals.easing,S.animBeginArr[S.i]).afterAll(function(){M.chartType!=="pie"&&M.chartType!=="donut"&&M.chartType!=="polarArea"||this.animate(z.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":M.strokeWidth}),S.i===z.config.series.length-1&&$.animationCompleted(c)}).during(function(ce){B=re+(v-re)*ce,S.animateStartingPos&&(B=b+(v-b)*ce,ee=d-b+(m-(d-b))*ce),T=M.getPiePath({me:M,startAngle:ee,angle:B,size:H}),c.node.setAttribute("data:pathOrig",T),c.attr({d:T})}):(T=M.getPiePath({me:M,startAngle:ee,angle:v,size:H}),S.isTrack||(z.globals.animationEnded=!0),c.node.setAttribute("data:pathOrig",T),c.attr({d:T,"stroke-width":M.strokeWidth}))}},{key:"pieClicked",value:function(c){var d,m=this.w,v=this,b=v.sliceSizes[c]+(m.config.plotOptions.pie.expandOnClick?4:0),S=m.globals.dom.Paper.select(".apexcharts-".concat(v.chartType.toLowerCase(),"-slice-").concat(c)).members[0];if(S.attr("data:pieClicked")!=="true"){var T=m.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(T,function(H){H.setAttribute("data:pieClicked","false");var B=H.getAttribute("data:pathOrig");B&&H.setAttribute("d",B)}),S.attr("data:pieClicked","true");var M=parseInt(S.attr("data:startAngle"),10),z=parseInt(S.attr("data:angle"),10);d=v.getPiePath({me:v,startAngle:M,angle:z,size:b}),z!==360&&S.plot(d)}else{S.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(S.node,this.donutDataLabels);var $=S.attr("data:pathOrig");S.attr({d:$})}}},{key:"getChangedPath",value:function(c,d){var m="";return this.dynamicAnim&&this.w.globals.dataChanged&&(m=this.getPiePath({me:this,startAngle:c,angle:d-c,size:this.size})),m}},{key:"getPiePath",value:function(c){var d=c.me,m=c.startAngle,v=c.angle,b=c.size,S=m,T=Math.PI*(S-90)/180,M=v+m;Math.ceil(M)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(M=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(M)>this.fullAngle&&(M-=this.fullAngle);var z=Math.PI*(M-90)/180,$=d.centerX+b*Math.cos(T),H=d.centerY+b*Math.sin(T),B=d.centerX+b*Math.cos(z),ee=d.centerY+b*Math.sin(z),re=W.polarToCartesian(d.centerX,d.centerY,d.donutSize,M),ce=W.polarToCartesian(d.centerX,d.centerY,d.donutSize,S),ye=v>180?1:0,_e=["M",$,H,"A",b,b,0,ye,1,B,ee];return d.chartType==="donut"?[].concat(_e,["L",re.x,re.y,"A",d.donutSize,d.donutSize,0,ye,0,ce.x,ce.y,"L",$,H,"z"]).join(" "):d.chartType==="pie"||d.chartType==="polarArea"?[].concat(_e,["L",d.centerX,d.centerY,"L",$,H]).join(" "):[].concat(_e).join(" ")}},{key:"drawPolarElements",value:function(c){var d=this.w,m=new nn(this.ctx),v=new de(this.ctx),b=new gt(this.ctx),S=v.group(),T=v.group(),M=m.niceScale(0,Math.ceil(this.maxY),d.config.yaxis[0].tickAmount,0,!0),z=M.result.reverse(),$=M.result.length;this.maxY=M.niceMax;for(var H=d.globals.radialSize,B=H/($-1),ee=0;ee<$-1;ee++){var re=v.drawCircle(H);if(re.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":d.config.plotOptions.polarArea.rings.strokeWidth,stroke:d.config.plotOptions.polarArea.rings.strokeColor}),d.config.yaxis[0].show){var ce=b.drawYAxisTexts(this.centerX,this.centerY-H+parseInt(d.config.yaxis[0].labels.style.fontSize,10)/2,ee,z[ee]);T.add(ce)}S.add(re),H-=B}this.drawSpokes(c),c.add(S),c.add(T)}},{key:"renderInnerDataLabels",value:function(c,d){var m=this.w,v=new de(this.ctx),b=v.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(d.translateX?d.translateX:0,", ").concat(d.translateY?d.translateY:0,") scale(").concat(m.config.plotOptions.pie.customScale,")")}),S=c.total.show;b.node.style.opacity=d.opacity;var T,M,z=d.centerX,$=d.centerY;T=c.name.color===void 0?m.globals.colors[0]:c.name.color;var H=c.name.fontSize,B=c.name.fontFamily,ee=c.name.fontWeight;M=c.value.color===void 0?m.config.chart.foreColor:c.value.color;var re=c.value.formatter,ce="",ye="";if(S?(T=c.total.color,H=c.total.fontSize,B=c.total.fontFamily,ee=c.total.fontWeight,ye=c.total.label,ce=c.total.formatter(m)):m.globals.series.length===1&&(ce=re(m.globals.series[0],m),ye=m.globals.seriesNames[0]),ye&&(ye=c.name.formatter(ye,c.total.show,m)),c.name.show){var _e=v.drawText({x:z,y:$+parseFloat(c.name.offsetY),text:ye,textAnchor:"middle",foreColor:T,fontSize:H,fontWeight:ee,fontFamily:B});_e.node.classList.add("apexcharts-datalabel-label"),b.add(_e)}if(c.value.show){var Ee=c.name.show?parseFloat(c.value.offsetY)+16:c.value.offsetY,O=v.drawText({x:z,y:$+Ee,text:ce,textAnchor:"middle",foreColor:M,fontWeight:c.value.fontWeight,fontSize:c.value.fontSize,fontFamily:c.value.fontFamily});O.node.classList.add("apexcharts-datalabel-value"),b.add(O)}return b}},{key:"printInnerLabels",value:function(c,d,m,v){var b,S=this.w;v?b=c.name.color===void 0?S.globals.colors[parseInt(v.parentNode.getAttribute("rel"),10)-1]:c.name.color:S.globals.series.length>1&&c.total.show&&(b=c.total.color);var T=S.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),M=S.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");m=(0,c.value.formatter)(m,S),v||typeof c.total.formatter!="function"||(m=c.total.formatter(S));var z=d===c.total.label;d=c.name.formatter(d,z,S),T!==null&&(T.textContent=d),M!==null&&(M.textContent=m),T!==null&&(T.style.fill=b)}},{key:"printDataLabelsInner",value:function(c,d){var m=this.w,v=c.getAttribute("data:value"),b=m.globals.seriesNames[parseInt(c.parentNode.getAttribute("rel"),10)-1];m.globals.series.length>1&&this.printInnerLabels(d,b,v,c);var S=m.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");S!==null&&(S.style.opacity=1)}},{key:"drawSpokes",value:function(c){var d=this,m=this.w,v=new de(this.ctx),b=m.config.plotOptions.polarArea.spokes;if(b.strokeWidth!==0){for(var S=[],T=360/m.globals.series.length,M=0;M<m.globals.series.length;M++)S.push(W.polarToCartesian(this.centerX,this.centerY,m.globals.radialSize,m.config.plotOptions.pie.startAngle+T*M));S.forEach(function(z,$){var H=v.drawLine(z.x,z.y,d.centerX,d.centerY,Array.isArray(b.connectorColors)?b.connectorColors[$]:b.connectorColors);c.add(H)})}}},{key:"revertDataLabelsInner",value:function(c,d,m){var v=this,b=this.w,S=b.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),T=!1,M=b.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),z=function(B){var ee=B.makeSliceOut,re=B.printLabel;Array.prototype.forEach.call(M,function(ce){ce.getAttribute("data:pieClicked")==="true"&&(ee&&(T=!0),re&&v.printDataLabelsInner(ce,d))})};if(z({makeSliceOut:!0,printLabel:!1}),d.total.show&&b.globals.series.length>1)T&&!d.total.showAlways?z({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(d,d.total.label,d.total.formatter(b));else if(z({makeSliceOut:!1,printLabel:!0}),!T)if(b.globals.selectedDataPoints.length&&b.globals.series.length>1)if(b.globals.selectedDataPoints[0].length>0){var $=b.globals.selectedDataPoints[0],H=b.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat($));this.printDataLabelsInner(H,d)}else S&&b.globals.selectedDataPoints.length&&b.globals.selectedDataPoints[0].length===0&&(S.style.opacity=0);else S&&b.globals.series.length>1&&(S.style.opacity=0)}}]),pe}(),ct=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var d=this.w;this.graphics=new de(this.ctx),this.lineColorArr=d.globals.stroke.colors!==void 0?d.globals.stroke.colors:d.globals.colors,this.defaultSize=d.globals.svgHeight<d.globals.svgWidth?d.globals.gridHeight+1.5*d.globals.goldenPadding:d.globals.gridWidth,this.isLog=d.config.yaxis[0].logarithmic,this.coreUtils=new Ae(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(d.globals.maxY,0):d.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):d.globals.minY,this.polygons=d.config.plotOptions.radar.polygons,this.strokeWidth=d.config.stroke.show?d.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-d.config.chart.dropShadow.blur,d.config.xaxis.labels.show&&(this.size=this.size-d.globals.xAxisLabelsWidth/1.75),d.config.plotOptions.radar.size!==void 0&&(this.size=d.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return s(pe,[{key:"draw",value:function(c){var d=this,m=this.w,v=new ut(this.ctx),b=[],S=new vt(this.ctx);c.length&&(this.dataPointsLen=c[m.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var T=m.globals.gridWidth/2,M=m.globals.gridHeight/2,z=T+m.config.plotOptions.radar.offsetX,$=M+m.config.plotOptions.radar.offsetY,H=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(z||0,", ").concat($||0,")")}),B=[],ee=null,re=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),c.forEach(function(ye,_e){var Ee=ye.length===m.globals.dataPoints,O=d.graphics.group().attr({class:"apexcharts-series","data:longestSeries":Ee,seriesName:W.escapeString(m.globals.seriesNames[_e]),rel:_e+1,"data:realIndex":_e});d.dataRadiusOfPercent[_e]=[],d.dataRadius[_e]=[],d.angleArr[_e]=[],ye.forEach(function(Nt,hr){var ar=Math.abs(d.maxValue-d.minValue);Nt+=Math.abs(d.minValue),d.isLog&&(Nt=d.coreUtils.getLogVal(Nt,0)),d.dataRadiusOfPercent[_e][hr]=Nt/ar,d.dataRadius[_e][hr]=d.dataRadiusOfPercent[_e][hr]*d.size,d.angleArr[_e][hr]=hr*d.disAngle}),B=d.getDataPointsPos(d.dataRadius[_e],d.angleArr[_e]);var X=d.createPaths(B,{x:0,y:0});ee=d.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),re=d.graphics.group({class:"apexcharts-datalabels","data:realIndex":_e}),m.globals.delayedElements.push({el:ee.node,index:_e});var Q={i:_e,realIndex:_e,animationDelay:_e,initialSpeed:m.config.chart.animations.speed,dataChangeSpeed:m.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:m.globals.stroke.colors[_e],strokeLineCap:m.config.stroke.lineCap},xe=null;m.globals.previousPaths.length>0&&(xe=d.getPreviousPath(_e));for(var ke=0;ke<X.linePathsTo.length;ke++){var Le=d.graphics.renderPaths(n(n({},Q),{},{pathFrom:xe===null?X.linePathsFrom[ke]:xe,pathTo:X.linePathsTo[ke],strokeWidth:Array.isArray(d.strokeWidth)?d.strokeWidth[_e]:d.strokeWidth,fill:"none",drawShadow:!1}));O.add(Le);var rt=v.fillPath({seriesNumber:_e}),Ze=d.graphics.renderPaths(n(n({},Q),{},{pathFrom:xe===null?X.areaPathsFrom[ke]:xe,pathTo:X.areaPathsTo[ke],strokeWidth:0,fill:rt,drawShadow:!1}));if(m.config.chart.dropShadow.enabled){var Et=new he(d.ctx),Bt=m.config.chart.dropShadow;Et.dropShadow(Ze,Object.assign({},Bt,{noUserSpaceOnUse:!0}),_e)}O.add(Ze)}ye.forEach(function(Nt,hr){var ar=new Vt(d.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:_e,dataPointIndex:hr}),Jr=d.graphics.drawMarker(B[hr].x,B[hr].y,ar);Jr.attr("rel",hr),Jr.attr("j",hr),Jr.attr("index",_e),Jr.node.setAttribute("default-marker-size",ar.pSize);var tn=d.graphics.group({class:"apexcharts-series-markers"});tn&&tn.add(Jr),ee.add(tn),O.add(ee);var pn=m.config.dataLabels;if(pn.enabled){var bn=pn.formatter(m.globals.series[_e][hr],{seriesIndex:_e,dataPointIndex:hr,w:m});S.plotDataLabelsText({x:B[hr].x,y:B[hr].y,text:bn,textAnchor:"middle",i:_e,j:_e,parent:re,offsetCorrection:!1,dataLabelsConfig:n({},pn)})}O.add(re)}),b.push(O)}),this.drawPolygons({parent:H}),m.config.xaxis.labels.show){var ce=this.drawXAxisTexts();H.add(ce)}return b.forEach(function(ye){H.add(ye)}),H.add(this.yaxisLabels),H}},{key:"drawPolygons",value:function(c){for(var d=this,m=this.w,v=c.parent,b=new gt(this.ctx),S=m.globals.yAxisScale[0].result.reverse(),T=S.length,M=[],z=this.size/(T-1),$=0;$<T;$++)M[$]=z*$;M.reverse();var H=[],B=[];M.forEach(function(ee,re){var ce=W.getPolygonPos(ee,d.dataPointsLen),ye="";ce.forEach(function(_e,Ee){if(re===0){var O=d.graphics.drawLine(_e.x,_e.y,0,0,Array.isArray(d.polygons.connectorColors)?d.polygons.connectorColors[Ee]:d.polygons.connectorColors);B.push(O)}Ee===0&&d.yaxisLabelsTextsPos.push({x:_e.x,y:_e.y}),ye+=_e.x+","+_e.y+" "}),H.push(ye)}),H.forEach(function(ee,re){var ce=d.polygons.strokeColors,ye=d.polygons.strokeWidth,_e=d.graphics.drawPolygon(ee,Array.isArray(ce)?ce[re]:ce,Array.isArray(ye)?ye[re]:ye,m.globals.radarPolygons.fill.colors[re]);v.add(_e)}),B.forEach(function(ee){v.add(ee)}),m.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(ee,re){var ce=b.drawYAxisTexts(ee.x,ee.y,re,S[re]);d.yaxisLabels.add(ce)})}},{key:"drawXAxisTexts",value:function(){var c=this,d=this.w,m=d.config.xaxis.labels,v=this.graphics.group({class:"apexcharts-xaxis"}),b=W.getPolygonPos(this.size,this.dataPointsLen);return d.globals.labels.forEach(function(S,T){var M=d.config.xaxis.labels.formatter,z=new vt(c.ctx);if(b[T]){var $=c.getTextPos(b[T],c.size),H=M(S,{seriesIndex:-1,dataPointIndex:T,w:d});z.plotDataLabelsText({x:$.newX,y:$.newY,text:H,textAnchor:$.textAnchor,i:T,j:T,parent:v,color:Array.isArray(m.style.colors)&&m.style.colors[T]?m.style.colors[T]:"#a8a8a8",dataLabelsConfig:n({textAnchor:$.textAnchor,dropShadow:{enabled:!1}},m),offsetCorrection:!1})}}),v}},{key:"createPaths",value:function(c,d){var m=this,v=[],b=[],S=[],T=[];if(c.length){b=[this.graphics.move(d.x,d.y)],T=[this.graphics.move(d.x,d.y)];var M=this.graphics.move(c[0].x,c[0].y),z=this.graphics.move(c[0].x,c[0].y);c.forEach(function($,H){M+=m.graphics.line($.x,$.y),z+=m.graphics.line($.x,$.y),H===c.length-1&&(M+="Z",z+="Z")}),v.push(M),S.push(z)}return{linePathsFrom:b,linePathsTo:v,areaPathsFrom:T,areaPathsTo:S}}},{key:"getTextPos",value:function(c,d){var m="middle",v=c.x,b=c.y;return Math.abs(c.x)>=10?c.x>0?(m="start",v+=10):c.x<0&&(m="end",v-=10):m="middle",Math.abs(c.y)>=d-10&&(c.y<0?b-=10:c.y>0&&(b+=10)),{textAnchor:m,newX:v,newY:b}}},{key:"getPreviousPath",value:function(c){for(var d=this.w,m=null,v=0;v<d.globals.previousPaths.length;v++){var b=d.globals.previousPaths[v];b.paths.length>0&&parseInt(b.realIndex,10)===parseInt(c,10)&&d.globals.previousPaths[v].paths[0]!==void 0&&(m=d.globals.previousPaths[v].paths[0].d)}return m}},{key:"getDataPointsPos",value:function(c,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;c=c||[],d=d||[];for(var v=[],b=0;b<m;b++){var S={};S.x=c[b]*Math.sin(d[b]),S.y=-c[b]*Math.cos(d[b]),v.push(S)}return v}}]),pe}(),bt=function(pe){I(d,yt);var c=q(d);function d(m){var v;f(this,d),(v=c.call(this,m)).ctx=m,v.w=m.w,v.animBeginArr=[0],v.animDur=0;var b=v.w;return v.startAngle=b.config.plotOptions.radialBar.startAngle,v.endAngle=b.config.plotOptions.radialBar.endAngle,v.totalAngle=Math.abs(b.config.plotOptions.radialBar.endAngle-b.config.plotOptions.radialBar.startAngle),v.trackStartAngle=b.config.plotOptions.radialBar.track.startAngle,v.trackEndAngle=b.config.plotOptions.radialBar.track.endAngle,v.donutDataLabels=v.w.config.plotOptions.radialBar.dataLabels,v.radialDataLabels=v.donutDataLabels,v.trackStartAngle||(v.trackStartAngle=v.startAngle),v.trackEndAngle||(v.trackEndAngle=v.endAngle),v.endAngle===360&&(v.endAngle=359.99),v.margin=parseInt(b.config.plotOptions.radialBar.track.margin,10),v}return s(d,[{key:"draw",value:function(m){var v=this.w,b=new de(this.ctx),S=b.group({class:"apexcharts-radialbar"});if(v.globals.noData)return S;var T=b.group(),M=this.defaultSize/2,z=v.globals.gridWidth/2,$=this.defaultSize/2.05;v.config.chart.sparkline.enabled||($=$-v.config.stroke.width-v.config.chart.dropShadow.blur);var H=v.globals.fill.colors;if(v.config.plotOptions.radialBar.track.show){var B=this.drawTracks({size:$,centerX:z,centerY:M,colorArr:H,series:m});T.add(B)}var ee=this.drawArcs({size:$,centerX:z,centerY:M,colorArr:H,series:m}),re=360;v.config.plotOptions.radialBar.startAngle<0&&(re=this.totalAngle);var ce=(360-re)/360;if(v.globals.radialSize=$-$*ce,this.radialDataLabels.value.show){var ye=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);v.globals.radialSize+=ye*ce}return T.add(ee.g),v.config.plotOptions.radialBar.hollow.position==="front"&&(ee.g.add(ee.elHollow),ee.dataLabels&&ee.g.add(ee.dataLabels)),S.add(T),S}},{key:"drawTracks",value:function(m){var v=this.w,b=new de(this.ctx),S=b.group({class:"apexcharts-tracks"}),T=new he(this.ctx),M=new ut(this.ctx),z=this.getStrokeWidth(m);m.size=m.size-z/2;for(var $=0;$<m.series.length;$++){var H=b.group({class:"apexcharts-radialbar-track apexcharts-track"});S.add(H),H.attr({rel:$+1}),m.size=m.size-z-this.margin;var B=v.config.plotOptions.radialBar.track,ee=M.fillPath({seriesNumber:0,size:m.size,fillColors:Array.isArray(B.background)?B.background[$]:B.background,solid:!0}),re=this.trackStartAngle,ce=this.trackEndAngle;Math.abs(ce)+Math.abs(re)>=360&&(ce=360-Math.abs(this.startAngle)-.1);var ye=b.drawPath({d:"",stroke:ee,strokeWidth:z*parseInt(B.strokeWidth,10)/100,fill:"none",strokeOpacity:B.opacity,classes:"apexcharts-radialbar-area"});if(B.dropShadow.enabled){var _e=B.dropShadow;T.dropShadow(ye,_e)}H.add(ye),ye.attr("id","apexcharts-radialbarTrack-"+$),this.animatePaths(ye,{centerX:m.centerX,centerY:m.centerY,endAngle:ce,startAngle:re,size:m.size,i:$,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:v.globals.easing})}return S}},{key:"drawArcs",value:function(m){var v=this.w,b=new de(this.ctx),S=new ut(this.ctx),T=new he(this.ctx),M=b.group(),z=this.getStrokeWidth(m);m.size=m.size-z/2;var $=v.config.plotOptions.radialBar.hollow.background,H=m.size-z*m.series.length-this.margin*m.series.length-z*parseInt(v.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,B=H-v.config.plotOptions.radialBar.hollow.margin;v.config.plotOptions.radialBar.hollow.image!==void 0&&($=this.drawHollowImage(m,M,H,$));var ee=this.drawHollow({size:B,centerX:m.centerX,centerY:m.centerY,fill:$||"transparent"});if(v.config.plotOptions.radialBar.hollow.dropShadow.enabled){var re=v.config.plotOptions.radialBar.hollow.dropShadow;T.dropShadow(ee,re)}var ce=1;!this.radialDataLabels.total.show&&v.globals.series.length>1&&(ce=0);var ye=null;this.radialDataLabels.show&&(ye=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:H,centerX:m.centerX,centerY:m.centerY,opacity:ce})),v.config.plotOptions.radialBar.hollow.position==="back"&&(M.add(ee),ye&&M.add(ye));var _e=!1;v.config.plotOptions.radialBar.inverseOrder&&(_e=!0);for(var Ee=_e?m.series.length-1:0;_e?Ee>=0:Ee<m.series.length;_e?Ee--:Ee++){var O=b.group({class:"apexcharts-series apexcharts-radial-series",seriesName:W.escapeString(v.globals.seriesNames[Ee])});M.add(O),O.attr({rel:Ee+1,"data:realIndex":Ee}),this.ctx.series.addCollapsedClassToSeries(O,Ee),m.size=m.size-z-this.margin;var X=S.fillPath({seriesNumber:Ee,size:m.size,value:m.series[Ee]}),Q=this.startAngle,xe=void 0,ke=W.negToZero(m.series[Ee]>100?100:m.series[Ee])/100,Le=Math.round(this.totalAngle*ke)+this.startAngle,rt=void 0;v.globals.dataChanged&&(xe=this.startAngle,rt=Math.round(this.totalAngle*W.negToZero(v.globals.previousPaths[Ee])/100)+xe),Math.abs(Le)+Math.abs(Q)>=360&&(Le-=.01),Math.abs(rt)+Math.abs(xe)>=360&&(rt-=.01);var Ze=Le-Q,Et=Array.isArray(v.config.stroke.dashArray)?v.config.stroke.dashArray[Ee]:v.config.stroke.dashArray,Bt=b.drawPath({d:"",stroke:X,strokeWidth:z,fill:"none",fillOpacity:v.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+Ee,strokeDashArray:Et});if(de.setAttrs(Bt.node,{"data:angle":Ze,"data:value":m.series[Ee]}),v.config.chart.dropShadow.enabled){var Nt=v.config.chart.dropShadow;T.dropShadow(Bt,Nt,Ee)}T.setSelectionFilter(Bt,0,Ee),this.addListeners(Bt,this.radialDataLabels),O.add(Bt),Bt.attr({index:0,j:Ee});var hr=0;!this.initialAnim||v.globals.resized||v.globals.dataChanged||(hr=v.config.chart.animations.speed),v.globals.dataChanged&&(hr=v.config.chart.animations.dynamicAnimation.speed),this.animDur=hr/(1.2*m.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(Bt,{centerX:m.centerX,centerY:m.centerY,endAngle:Le,startAngle:Q,prevEndAngle:rt,prevStartAngle:xe,size:m.size,i:Ee,totalItems:2,animBeginArr:this.animBeginArr,dur:hr,shouldSetPrevPaths:!0,easing:v.globals.easing})}return{g:M,elHollow:ee,dataLabels:ye}}},{key:"drawHollow",value:function(m){var v=new de(this.ctx).drawCircle(2*m.size);return v.attr({class:"apexcharts-radialbar-hollow",cx:m.centerX,cy:m.centerY,r:m.size,fill:m.fill}),v}},{key:"drawHollowImage",value:function(m,v,b,S){var T=this.w,M=new ut(this.ctx),z=W.randomId(),$=T.config.plotOptions.radialBar.hollow.image;if(T.config.plotOptions.radialBar.hollow.imageClipped)M.clippedImgArea({width:b,height:b,image:$,patternID:"pattern".concat(T.globals.cuid).concat(z)}),S="url(#pattern".concat(T.globals.cuid).concat(z,")");else{var H=T.config.plotOptions.radialBar.hollow.imageWidth,B=T.config.plotOptions.radialBar.hollow.imageHeight;if(H===void 0&&B===void 0){var ee=T.globals.dom.Paper.image($).loaded(function(ce){this.move(m.centerX-ce.width/2+T.config.plotOptions.radialBar.hollow.imageOffsetX,m.centerY-ce.height/2+T.config.plotOptions.radialBar.hollow.imageOffsetY)});v.add(ee)}else{var re=T.globals.dom.Paper.image($).loaded(function(ce){this.move(m.centerX-H/2+T.config.plotOptions.radialBar.hollow.imageOffsetX,m.centerY-B/2+T.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(H,B)});v.add(re)}}return S}},{key:"getStrokeWidth",value:function(m){var v=this.w;return m.size*(100-parseInt(v.config.plotOptions.radialBar.hollow.size,10))/100/(m.series.length+1)-this.margin}}]),d}(),qt=function(pe){I(d,we);var c=q(d);function d(){return f(this,d),c.apply(this,arguments)}return s(d,[{key:"draw",value:function(m,v){var b=this.w,S=new de(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=m,this.seriesRangeStart=b.globals.seriesRangeStart,this.seriesRangeEnd=b.globals.seriesRangeEnd,this.barHelpers.initVariables(m);for(var T=S.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),M=0;M<m.length;M++){var z,$,H,B,ee=void 0,re=void 0,ce=b.globals.comboCharts?v[M]:M,ye=S.group({class:"apexcharts-series",seriesName:W.escapeString(b.globals.seriesNames[ce]),rel:M+1,"data:realIndex":ce});this.ctx.series.addCollapsedClassToSeries(ye,ce),m[M].length>0&&(this.visibleI=this.visibleI+1);var _e=0,Ee=0;this.yRatio.length>1&&(this.yaxisIndex=ce);var O=this.barHelpers.initialPositions();re=O.y,B=O.zeroW,ee=O.x,Ee=O.barWidth,_e=O.barHeight,z=O.xDivision,$=O.yDivision,H=O.zeroH;for(var X=S.group({class:"apexcharts-datalabels","data:realIndex":ce}),Q=S.group({class:"apexcharts-rangebar-goals-markers"}),xe=0;xe<b.globals.dataPoints;xe++){var ke,Le=this.barHelpers.getStrokeWidth(M,xe,ce),rt=this.seriesRangeStart[M][xe],Ze=this.seriesRangeEnd[M][xe],Et=null,Bt=null,Nt=null,hr={x:ee,y:re,strokeWidth:Le,elSeries:ye},ar=this.seriesLen;if(b.config.plotOptions.bar.rangeBarGroupRows&&(ar=1),b.config.series[M].data[xe]===void 0)break;if(this.isHorizontal){Nt=re+_e*this.visibleI;var Jr=($-_e*ar)/2;if(b.config.series[M].data[xe].x){var tn=this.detectOverlappingBars({i:M,j:xe,barYPosition:Nt,srty:Jr,barHeight:_e,yDivision:$,initPositions:O});_e=tn.barHeight,Nt=tn.barYPosition}Ee=(Et=this.drawRangeBarPaths(n({indexes:{i:M,j:xe,realIndex:ce},barHeight:_e,barYPosition:Nt,zeroW:B,yDivision:$,y1:rt,y2:Ze},hr))).barWidth}else{b.globals.isXNumeric&&(ee=(b.globals.seriesX[M][xe]-b.globals.minX)/this.xRatio-Ee/2),Bt=ee+Ee*this.visibleI;var pn=(z-Ee*ar)/2;if(b.config.series[M].data[xe].x){var bn=this.detectOverlappingBars({i:M,j:xe,barXPosition:Bt,srtx:pn,barWidth:Ee,xDivision:z,initPositions:O});Ee=bn.barWidth,Bt=bn.barXPosition}_e=(Et=this.drawRangeColumnPaths(n({indexes:{i:M,j:xe,realIndex:ce},barWidth:Ee,barXPosition:Bt,zeroH:H,xDivision:z},hr))).barHeight}var Pn=this.barHelpers.drawGoalLine({barXPosition:Et.barXPosition,barYPosition:Nt,goalX:Et.goalX,goalY:Et.goalY,barHeight:_e,barWidth:Ee});Pn&&Q.add(Pn),re=Et.y,ee=Et.x;var Jn=this.barHelpers.getPathFillColor(m,M,xe,ce),it=b.globals.stroke.colors[ce];this.renderSeries((k(ke={realIndex:ce,pathFill:Jn,lineFill:it,j:xe,i:M,x:ee,y:re,y1:rt,y2:Ze,pathFrom:Et.pathFrom,pathTo:Et.pathTo,strokeWidth:Le,elSeries:ye,series:m,barHeight:_e,barWidth:Ee,barXPosition:Bt,barYPosition:Nt},"barWidth",Ee),k(ke,"elDataLabelsWrap",X),k(ke,"elGoalsMarkers",Q),k(ke,"visibleSeries",this.visibleI),k(ke,"type","rangebar"),ke))}T.add(ye)}return T}},{key:"detectOverlappingBars",value:function(m){var v=m.i,b=m.j,S=m.barYPosition,T=m.barXPosition,M=m.srty,z=m.srtx,$=m.barHeight,H=m.barWidth,B=m.yDivision,ee=m.xDivision,re=m.initPositions,ce=this.w,ye=[],_e=ce.config.series[v].data[b].rangeName,Ee=ce.config.series[v].data[b].x,O=Array.isArray(Ee)?Ee.join(" "):Ee,X=ce.globals.labels.map(function(xe){return Array.isArray(xe)?xe.join(" "):xe}).indexOf(O),Q=ce.globals.seriesRange[v].findIndex(function(xe){return xe.x===O&&xe.overlaps.length>0});return this.isHorizontal?(S=ce.config.plotOptions.bar.rangeBarGroupRows?M+B*X:M+$*this.visibleI+B*X,Q>-1&&!ce.config.plotOptions.bar.rangeBarOverlap&&(ye=ce.globals.seriesRange[v][Q].overlaps).indexOf(_e)>-1&&(S=($=re.barHeight/ye.length)*this.visibleI+B*(100-parseInt(this.barOptions.barHeight,10))/100/2+$*(this.visibleI+ye.indexOf(_e))+B*X)):(X>-1&&(T=ce.config.plotOptions.bar.rangeBarGroupRows?z+ee*X:z+H*this.visibleI+ee*X),Q>-1&&!ce.config.plotOptions.bar.rangeBarOverlap&&(ye=ce.globals.seriesRange[v][Q].overlaps).indexOf(_e)>-1&&(T=(H=re.barWidth/ye.length)*this.visibleI+ee*(100-parseInt(this.barOptions.barWidth,10))/100/2+H*(this.visibleI+ye.indexOf(_e))+ee*X)),{barYPosition:S,barXPosition:T,barHeight:$,barWidth:H}}},{key:"drawRangeColumnPaths",value:function(m){var v=m.indexes,b=m.x,S=m.xDivision,T=m.barWidth,M=m.barXPosition,z=m.zeroH,$=this.w,H=v.i,B=v.j,ee=this.yRatio[this.yaxisIndex],re=v.realIndex,ce=this.getRangeValue(re,B),ye=Math.min(ce.start,ce.end),_e=Math.max(ce.start,ce.end);this.series[H][B]===void 0||this.series[H][B]===null?ye=z:(ye=z-ye/ee,_e=z-_e/ee);var Ee=Math.abs(_e-ye),O=this.barHelpers.getColumnPaths({barXPosition:M,barWidth:T,y1:ye,y2:_e,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:v.realIndex,i:re,j:B,w:$});if($.globals.isXNumeric){var X=this.getBarXForNumericXAxis({x:b,j:B,realIndex:re,barWidth:T});b=X.x,M=X.barXPosition}else b+=S;return{pathTo:O.pathTo,pathFrom:O.pathFrom,barHeight:Ee,x:b,y:_e,goalY:this.barHelpers.getGoalValues("y",null,z,H,B),barXPosition:M}}},{key:"drawRangeBarPaths",value:function(m){var v=m.indexes,b=m.y,S=m.y1,T=m.y2,M=m.yDivision,z=m.barHeight,$=m.barYPosition,H=m.zeroW,B=this.w,ee=H+S/this.invertedYRatio,re=H+T/this.invertedYRatio,ce=Math.abs(re-ee),ye=this.barHelpers.getBarpaths({barYPosition:$,barHeight:z,x1:ee,x2:re,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:v.realIndex,realIndex:v.realIndex,j:v.j,w:B});return B.globals.isXNumeric||(b+=M),{pathTo:ye.pathTo,pathFrom:ye.pathFrom,barWidth:ce,x:re,goalX:this.barHelpers.getGoalValues("x",H,null,v.realIndex,v.j),y:b}}},{key:"getRangeValue",value:function(m,v){var b=this.w;return{start:b.globals.seriesRangeStart[m][v],end:b.globals.seriesRangeEnd[m][v]}}}]),d}(),Kt=function(){function pe(c){f(this,pe),this.w=c.w,this.lineCtx=c}return s(pe,[{key:"sameValueSeriesFix",value:function(c,d){var m=this.w;if((m.config.fill.type==="gradient"||m.config.fill.type[c]==="gradient")&&new Ae(this.lineCtx.ctx,m).seriesHaveSameValues(c)){var v=d[c].slice();v[v.length-1]=v[v.length-1]+1e-6,d[c]=v}return d}},{key:"calculatePoints",value:function(c){var d=c.series,m=c.realIndex,v=c.x,b=c.y,S=c.i,T=c.j,M=c.prevY,z=this.w,$=[],H=[];if(T===0){var B=this.lineCtx.categoryAxisCorrection+z.config.markers.offsetX;z.globals.isXNumeric&&(B=(z.globals.seriesX[m][0]-z.globals.minX)/this.lineCtx.xRatio+z.config.markers.offsetX),$.push(B),H.push(W.isNumber(d[S][0])?M+z.config.markers.offsetY:null),$.push(v+z.config.markers.offsetX),H.push(W.isNumber(d[S][T+1])?b+z.config.markers.offsetY:null)}else $.push(v+z.config.markers.offsetX),H.push(W.isNumber(d[S][T+1])?b+z.config.markers.offsetY:null);return{x:$,y:H}}},{key:"checkPreviousPaths",value:function(c){for(var d=c.pathFromLine,m=c.pathFromArea,v=c.realIndex,b=this.w,S=0;S<b.globals.previousPaths.length;S++){var T=b.globals.previousPaths[S];(T.type==="line"||T.type==="area")&&T.paths.length>0&&parseInt(T.realIndex,10)===parseInt(v,10)&&(T.type==="line"?(this.lineCtx.appendPathFrom=!1,d=b.globals.previousPaths[S].paths[0].d):T.type==="area"&&(this.lineCtx.appendPathFrom=!1,m=b.globals.previousPaths[S].paths[0].d,b.config.stroke.show&&b.globals.previousPaths[S].paths[1]&&(d=b.globals.previousPaths[S].paths[1].d)))}return{pathFromLine:d,pathFromArea:m}}},{key:"determineFirstPrevY",value:function(c){var d,m=c.i,v=c.series,b=c.prevY,S=c.lineYPosition,T=this.w;if(((d=v[m])===null||d===void 0?void 0:d[0])!==void 0)b=(S=T.config.chart.stacked&&m>0?this.lineCtx.prevSeriesY[m-1][0]:this.lineCtx.zeroY)-v[m][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?v[m][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(T.config.chart.stacked&&m>0&&v[m][0]===void 0){for(var M=m-1;M>=0;M--)if(v[M][0]!==null&&v[M][0]!==void 0){b=S=this.lineCtx.prevSeriesY[M][0];break}}return{prevY:b,lineYPosition:S}}}]),pe}(),Gt=function(pe){for(var c,d,m,v,b=function($){for(var H=[],B=$[0],ee=$[1],re=H[0]=Vr(B,ee),ce=1,ye=$.length-1;ce<ye;ce++)B=ee,ee=$[ce+1],H[ce]=.5*(re+(re=Vr(B,ee)));return H[ce]=re,H}(pe),S=pe.length-1,T=[],M=0;M<S;M++)m=Vr(pe[M],pe[M+1]),Math.abs(m)<1e-6?b[M]=b[M+1]=0:(v=(c=b[M]/m)*c+(d=b[M+1]/m)*d)>9&&(v=3*m/Math.sqrt(v),b[M]=v*c,b[M+1]=v*d);for(var z=0;z<=S;z++)v=(pe[Math.min(S,z+1)][0]-pe[Math.max(0,z-1)][0])/(6*(1+b[z]*b[z])),T.push([v||0,b[z]*v||0]);return T},Dr=function(pe){for(var c="",d=0;d<pe.length;d++){var m=pe[d],v=pe[d-1],b=m.length,S=v==null?void 0:v.length;d>1&&Math.abs(m[b-2]-v[S-2])<30?(c+="Q".concat(m[0],", ").concat(m[1]),c+=", ".concat(m[2],", ").concat(m[3])):b>4?(c+="C".concat(m[0],", ").concat(m[1]),c+=", ".concat(m[2],", ").concat(m[3]),c+=", ".concat(m[4],", ").concat(m[5])):b>2&&(c+="S".concat(m[0],", ").concat(m[1]),c+=", ".concat(m[2],", ").concat(m[3]))}return c},Qr=function(pe){var c=Gt(pe),d=pe[1],m=pe[0],v=[],b=c[1],S=c[0];v.push(m,[m[0]+S[0],m[1]+S[1],d[0]-b[0],d[1]-b[1],d[0],d[1]]);for(var T=2,M=c.length;T<M;T++){var z=pe[T],$=c[T];v.push([z[0]-$[0],z[1]-$[1],z[0],z[1]])}return v};function Vr(pe,c){return(c[1]-pe[1])/(c[0]-pe[0])}var jr=function(){function pe(c,d,m){f(this,pe),this.ctx=c,this.w=c.w,this.xyRatios=d,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||m,this.scatter=new ir(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Kt(this),this.markers=new Vt(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return s(pe,[{key:"draw",value:function(c,d,m,v){var b,S=this.w,T=new de(this.ctx),M=S.globals.comboCharts?d:S.config.chart.type,z=T.group({class:"apexcharts-".concat(M,"-series apexcharts-plot-series")}),$=new Ae(this.ctx,S);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,c=$.getLogSeries(c),this.yRatio=$.getLogYRatios(this.yRatio);for(var H=[],B=0;B<c.length;B++){c=this.lineHelpers.sameValueSeriesFix(B,c);var ee=S.globals.comboCharts?m[B]:B;this._initSerieVariables(c,B,ee);var re=[],ce=[],ye=[],_e=S.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,ee),S.globals.isXNumeric&&S.globals.seriesX.length>0&&(_e=(S.globals.seriesX[ee][0]-S.globals.minX)/this.xRatio),ye.push(_e);var Ee=_e,O=this.zeroY,X=this.zeroY;O=this.lineHelpers.determineFirstPrevY({i:B,series:c,prevY:O,lineYPosition:0}).prevY,S.config.stroke.curve==="smooth"&&c[B][0]===null?re.push(null):re.push(O),M==="rangeArea"&&(X=this.lineHelpers.determineFirstPrevY({i:B,series:v,prevY:X,lineYPosition:0}).prevY,ce.push(X));var Q={type:M,series:c,realIndex:ee,i:B,x:_e,y:1,pathsFrom:this._calculatePathsFrom({type:M,series:c,i:B,realIndex:ee,prevX:Ee,prevY:O,prevY2:X}),linePaths:[],areaPaths:[],seriesIndex:m,lineYPosition:0,xArrj:ye,yArrj:re,y2Arrj:ce,seriesRangeEnd:v},xe=this._iterateOverDataPoints(n(n({},Q),{},{iterations:M==="rangeArea"?c[B].length-1:void 0,isRangeStart:!0}));if(M==="rangeArea"){var ke=this._calculatePathsFrom({series:v,i:B,realIndex:ee,prevX:Ee,prevY:X}),Le=this._iterateOverDataPoints(n(n({},Q),{},{series:v,pathsFrom:ke,iterations:v[B].length-1,isRangeStart:!1}));xe.linePaths[0]=Le.linePath+xe.linePath,xe.pathFromLine=Le.pathFromLine+xe.pathFromLine}this._handlePaths({type:M,realIndex:ee,i:B,paths:xe}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),H.push(this.elSeries)}if(((b=S.config.series[0])===null||b===void 0?void 0:b.zIndex)!==void 0&&H.sort(function(Et,Bt){return Number(Et.node.getAttribute("zIndex"))-Number(Bt.node.getAttribute("zIndex"))}),S.config.chart.stacked)for(var rt=H.length;rt>0;rt--)z.add(H[rt-1]);else for(var Ze=0;Ze<H.length;Ze++)z.add(H[Ze]);return z}},{key:"_initSerieVariables",value:function(c,d,m){var v=this.w,b=new de(this.ctx);this.xDivision=v.globals.gridWidth/(v.globals.dataPoints-(v.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(v.config.stroke.width)?v.config.stroke.width[m]:v.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=m),this.isReversed=v.config.yaxis[this.yaxisIndex]&&v.config.yaxis[this.yaxisIndex].reversed,this.zeroY=v.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?v.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>v.globals.gridHeight||v.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=v.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=b.group({class:"apexcharts-series",zIndex:v.config.series[m].zIndex!==void 0?v.config.series[m].zIndex:m,seriesName:W.escapeString(v.globals.seriesNames[m])}),this.elPointsMain=b.group({class:"apexcharts-series-markers-wrap","data:realIndex":m}),this.elDataLabelsWrap=b.group({class:"apexcharts-datalabels","data:realIndex":m});var S=c[d].length===v.globals.dataPoints;this.elSeries.attr({"data:longestSeries":S,rel:d+1,"data:realIndex":m}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(c){var d,m,v,b,S=c.type,T=c.series,M=c.i,z=c.realIndex,$=c.prevX,H=c.prevY,B=c.prevY2,ee=this.w,re=new de(this.ctx);if(T[M][0]===null){for(var ce=0;ce<T[M].length;ce++)if(T[M][ce]!==null){$=this.xDivision*ce,H=this.zeroY-T[M][ce]/this.yRatio[this.yaxisIndex],d=re.move($,H),m=re.move($,this.areaBottomY);break}}else d=re.move($,H),S==="rangeArea"&&(d=re.move($,B)+re.line($,H)),m=re.move($,this.areaBottomY)+re.line($,H);if(v=re.move(-1,this.zeroY)+re.line(-1,this.zeroY),b=re.move(-1,this.zeroY)+re.line(-1,this.zeroY),ee.globals.previousPaths.length>0){var ye=this.lineHelpers.checkPreviousPaths({pathFromLine:v,pathFromArea:b,realIndex:z});v=ye.pathFromLine,b=ye.pathFromArea}return{prevX:$,prevY:H,linePath:d,areaPath:m,pathFromLine:v,pathFromArea:b}}},{key:"_handlePaths",value:function(c){var d=c.type,m=c.realIndex,v=c.i,b=c.paths,S=this.w,T=new de(this.ctx),M=new ut(this.ctx);this.prevSeriesY.push(b.yArrj),S.globals.seriesXvalues[m]=b.xArrj,S.globals.seriesYvalues[m]=b.yArrj;var z=S.config.forecastDataPoints;if(z.count>0&&d!=="rangeArea"){var $=S.globals.seriesXvalues[m][S.globals.seriesXvalues[m].length-z.count-1],H=T.drawRect($,0,S.globals.gridWidth,S.globals.gridHeight,0);S.globals.dom.elForecastMask.appendChild(H.node);var B=T.drawRect(0,0,$,S.globals.gridHeight,0);S.globals.dom.elNonForecastMask.appendChild(B.node)}this.pointsChart||S.globals.delayedElements.push({el:this.elPointsMain.node,index:m});var ee={i:v,realIndex:m,animationDelay:v,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(d)};if(d==="area")for(var re=M.fillPath({seriesNumber:m}),ce=0;ce<b.areaPaths.length;ce++){var ye=T.renderPaths(n(n({},ee),{},{pathFrom:b.pathFromArea,pathTo:b.areaPaths[ce],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:re}));this.elSeries.add(ye)}if(S.config.stroke.show&&!this.pointsChart){var _e=null;if(d==="line")_e=M.fillPath({seriesNumber:m,i:v});else if(S.config.stroke.fill.type==="solid")_e=S.globals.stroke.colors[m];else{var Ee=S.config.fill;S.config.fill=S.config.stroke.fill,_e=M.fillPath({seriesNumber:m,i:v}),S.config.fill=Ee}for(var O=0;O<b.linePaths.length;O++){var X=_e;d==="rangeArea"&&(X=M.fillPath({seriesNumber:m}));var Q=n(n({},ee),{},{pathFrom:b.pathFromLine,pathTo:b.linePaths[O],stroke:_e,strokeWidth:this.strokeWidth,strokeLineCap:S.config.stroke.lineCap,fill:d==="rangeArea"?X:"none"}),xe=T.renderPaths(Q);if(this.elSeries.add(xe),xe.attr("fill-rule","evenodd"),z.count>0&&d!=="rangeArea"){var ke=T.renderPaths(Q);ke.node.setAttribute("stroke-dasharray",z.dashArray),z.strokeWidth&&ke.node.setAttribute("stroke-width",z.strokeWidth),this.elSeries.add(ke),ke.attr("clip-path","url(#forecastMask".concat(S.globals.cuid,")")),xe.attr("clip-path","url(#nonForecastMask".concat(S.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(c){var d=this,m=c.type,v=c.series,b=c.iterations,S=c.realIndex,T=c.i,M=c.x,z=c.y,$=c.pathsFrom,H=c.linePaths,B=c.areaPaths,ee=c.seriesIndex,re=c.lineYPosition,ce=c.xArrj,ye=c.yArrj,_e=c.y2Arrj,Ee=c.isRangeStart,O=c.seriesRangeEnd,X=this.w,Q=new de(this.ctx),xe=this.yRatio,ke=$.prevY,Le=$.linePath,rt=$.areaPath,Ze=$.pathFromLine,Et=$.pathFromArea,Bt=W.isNumber(X.globals.minYArr[S])?X.globals.minYArr[S]:X.globals.minY;b||(b=X.globals.dataPoints>1?X.globals.dataPoints-1:X.globals.dataPoints);for(var Nt=function(Pn,Jn){return Jn-Pn/xe[d.yaxisIndex]+2*(d.isReversed?Pn/xe[d.yaxisIndex]:0)},hr=z,ar=0;ar<b;ar++){var Jr=v[T][ar+1]===void 0||v[T][ar+1]===null;if(X.globals.isXNumeric){var tn=X.globals.seriesX[S][ar+1];X.globals.seriesX[S][ar+1]===void 0&&(tn=X.globals.seriesX[S][b-1]),M=(tn-X.globals.minX)/this.xRatio}else M+=this.xDivision;X.config.chart.stacked?T>0&&X.globals.collapsedSeries.length<X.config.series.length-1?re=this.prevSeriesY[function(Pn){for(var Jn=Pn,it=0;it<X.globals.series.length;it++)if(X.globals.collapsedSeriesIndices.indexOf(Pn)>-1){Jn--;break}return Jn>=0?Jn:0}(T-1)][ar+1]:re=this.zeroY:re=this.zeroY,Jr?z=Nt(Bt,re):(z=Nt(v[T][ar+1],re),m==="rangeArea"&&(hr=Nt(O[T][ar+1],re))),ce.push(M),Jr&&X.config.stroke.curve==="smooth"?ye.push(null):ye.push(z),_e.push(hr);var pn=this.lineHelpers.calculatePoints({series:v,x:M,y:z,realIndex:S,i:T,j:ar,prevY:ke}),bn=this._createPaths({type:m,series:v,i:T,realIndex:S,j:ar,x:M,y:z,y2:hr,xArrj:ce,yArrj:ye,y2Arrj:_e,linePath:Le,areaPath:rt,linePaths:H,areaPaths:B,seriesIndex:ee,isRangeStart:Ee});B=bn.areaPaths,H=bn.linePaths,rt=bn.areaPath,Le=bn.linePath,!this.appendPathFrom||X.config.stroke.curve==="smooth"&&m==="rangeArea"||(Ze+=Q.line(M,this.zeroY),Et+=Q.line(M,this.zeroY)),this.handleNullDataPoints(v,pn,T,ar,S),this._handleMarkersAndLabels({type:m,pointsPos:pn,i:T,j:ar,realIndex:S,isRangeStart:Ee})}return{yArrj:ye,xArrj:ce,pathFromArea:Et,areaPaths:B,pathFromLine:Ze,linePaths:H,linePath:Le,areaPath:rt}}},{key:"_handleMarkersAndLabels",value:function(c){var d=c.type,m=c.pointsPos,v=c.isRangeStart,b=c.i,S=c.j,T=c.realIndex,M=this.w,z=new vt(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,S,{realIndex:T,pointsPos:m,zRatio:this.zRatio,elParent:this.elPointsMain});else{M.globals.series[b].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var $=this.markers.plotChartMarkers(m,T,S+1);$!==null&&this.elPointsMain.add($)}var H=z.drawDataLabel({type:d,isRangeStart:v,pos:m,i:T,j:S+1});H!==null&&this.elDataLabelsWrap.add(H)}},{key:"_createPaths",value:function(c){var d=c.type,m=c.series,v=c.i,b=c.realIndex,S=c.j,T=c.x,M=c.y,z=c.xArrj,$=c.yArrj,H=c.y2,B=c.y2Arrj,ee=c.linePath,re=c.areaPath,ce=c.linePaths,ye=c.areaPaths,_e=c.seriesIndex,Ee=c.isRangeStart,O=this.w,X=new de(this.ctx),Q=O.config.stroke.curve,xe=this.areaBottomY;if(Array.isArray(O.config.stroke.curve)&&(Q=Array.isArray(_e)?O.config.stroke.curve[_e[v]]:O.config.stroke.curve[v]),d==="rangeArea"&&(O.globals.hasNullValues||O.config.forecastDataPoints.count>0)&&Q==="smooth"&&(Q="straight"),Q==="smooth"){var ke=d==="rangeArea"?z.length===O.globals.dataPoints:S===m[v].length-2,Le=z.map(function(ar,Jr){return[z[Jr],$[Jr]]}).filter(function(ar){return ar[1]!==null});if(ke&&Le.length>1){var rt=Qr(Le);if(ee+=Dr(rt),m[v][0]===null?re=ee:re+=Dr(rt),d==="rangeArea"&&Ee){ee+=X.line(z[z.length-1],B[B.length-1]);var Ze=z.slice().reverse(),Et=B.slice().reverse(),Bt=Ze.map(function(ar,Jr){return[Ze[Jr],Et[Jr]]}),Nt=Qr(Bt);re=ee+=Dr(Nt)}else re+=X.line(Le[Le.length-1][0],xe)+X.line(Le[0][0],xe)+X.move(Le[0][0],Le[0][1])+"z";ce.push(ee),ye.push(re)}}else{if(m[v][S+1]===null){ee+=X.move(T,M);var hr=O.globals.isXNumeric?(O.globals.seriesX[b][S]-O.globals.minX)/this.xRatio:T-this.xDivision;re=re+X.line(hr,xe)+X.move(T,M)+"z"}m[v][S]===null&&(ee+=X.move(T,M),re+=X.move(T,xe)),Q==="stepline"?(ee=ee+X.line(T,null,"H")+X.line(null,M,"V"),re=re+X.line(T,null,"H")+X.line(null,M,"V")):Q==="straight"&&(ee+=X.line(T,M),re+=X.line(T,M)),S===m[v].length-2&&(re=re+X.line(T,xe)+X.move(T,M)+"z",d==="rangeArea"&&Ee?ee=ee+X.line(T,H)+X.move(T,H)+"z":(ce.push(ee),ye.push(re)))}return{linePaths:ce,areaPaths:ye,linePath:ee,areaPath:re}}},{key:"handleNullDataPoints",value:function(c,d,m,v,b){var S=this.w;if(c[m][v]===null&&S.config.markers.showNullDataPoints||c[m].length===1){var T=this.markers.plotChartMarkers(d,b,v+1,this.strokeWidth-S.config.markers.strokeWidth/2,!0);T!==null&&this.elPointsMain.add(T)}}}]),pe}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function pe(T,M,z,$){this.xoffset=T,this.yoffset=M,this.height=$,this.width=z,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(H){var B,ee=[],re=this.xoffset,ce=this.yoffset,ye=b(H)/this.height,_e=b(H)/this.width;if(this.width>=this.height)for(B=0;B<H.length;B++)ee.push([re,ce,re+ye,ce+H[B]/ye]),ce+=H[B]/ye;else for(B=0;B<H.length;B++)ee.push([re,ce,re+H[B]/_e,ce+_e]),re+=H[B]/_e;return ee},this.cutArea=function(H){var B;if(this.width>=this.height){var ee=H/this.height,re=this.width-ee;B=new pe(this.xoffset+ee,this.yoffset,re,this.height)}else{var ce=H/this.width,ye=this.height-ce;B=new pe(this.xoffset,this.yoffset+ce,this.width,ye)}return B}}function c(T,M,z,$,H){$=$===void 0?0:$,H=H===void 0?0:H;var B=d(function(ee,re){var ce,ye=[],_e=re/b(ee);for(ce=0;ce<ee.length;ce++)ye[ce]=ee[ce]*_e;return ye}(T,M*z),[],new pe($,H,M,z),[]);return function(ee){var re,ce,ye=[];for(re=0;re<ee.length;re++)for(ce=0;ce<ee[re].length;ce++)ye.push(ee[re][ce]);return ye}(B)}function d(T,M,z,$){var H,B,ee;if(T.length!==0)return H=z.shortestEdge(),function(re,ce,ye){var _e;if(re.length===0)return!0;(_e=re.slice()).push(ce);var Ee=m(re,ye),O=m(_e,ye);return Ee>=O}(M,B=T[0],H)?(M.push(B),d(T.slice(1),M,z,$)):(ee=z.cutArea(b(M),$),$.push(z.getCoordinates(M)),d(T,[],ee,$)),$;$.push(z.getCoordinates(M))}function m(T,M){var z=Math.min.apply(Math,T),$=Math.max.apply(Math,T),H=b(T);return Math.max(Math.pow(M,2)*$/Math.pow(H,2),Math.pow(H,2)/(Math.pow(M,2)*z))}function v(T){return T&&T.constructor===Array}function b(T){var M,z=0;for(M=0;M<T.length;M++)z+=T[M];return z}function S(T){var M,z=0;if(v(T[0]))for(M=0;M<T.length;M++)z+=S(T[M]);else z=b(T);return z}return function T(M,z,$,H,B){H=H===void 0?0:H,B=B===void 0?0:B;var ee,re,ce=[],ye=[];if(v(M[0])){for(re=0;re<M.length;re++)ce[re]=S(M[re]);for(ee=c(ce,z,$,H,B),re=0;re<M.length;re++)ye.push(T(M[re],ee[re][2]-ee[re][0],ee[re][3]-ee[re][1],ee[re][0],ee[re][1]))}else ye=c(M,z,$,H,B);return ye}}();var Rr,Cn,Bn=function(){function pe(c,d){f(this,pe),this.ctx=c,this.w=c.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Qe(c),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return s(pe,[{key:"draw",value:function(c){var d=this,m=this.w,v=new de(this.ctx),b=new ut(this.ctx),S=v.group({class:"apexcharts-treemap"});if(m.globals.noData)return S;var T=[];return c.forEach(function(M){var z=M.map(function($){return Math.abs($)});T.push(z)}),this.negRange=this.helpers.checkColorRange(),m.config.series.forEach(function(M,z){M.data.forEach(function($){Array.isArray(d.labels[z])||(d.labels[z]=[]),d.labels[z].push($.x)})}),window.TreemapSquared.generate(T,m.globals.gridWidth,m.globals.gridHeight).forEach(function(M,z){var $=v.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:W.escapeString(m.globals.seriesNames[z]),rel:z+1,"data:realIndex":z});if(m.config.chart.dropShadow.enabled){var H=m.config.chart.dropShadow;new he(d.ctx).dropShadow(S,H,z)}var B=v.group({class:"apexcharts-data-labels"});M.forEach(function(ee,re){var ce=ee[0],ye=ee[1],_e=ee[2],Ee=ee[3],O=v.drawRect(ce,ye,_e-ce,Ee-ye,0,"#fff",1,d.strokeWidth,m.config.plotOptions.treemap.useFillColorAsStroke?Q:m.globals.stroke.colors[z]);O.attr({cx:ce,cy:ye,index:z,i:z,j:re,width:_e-ce,height:Ee-ye});var X=d.helpers.getShadeColor(m.config.chart.type,z,re,d.negRange),Q=X.color;m.config.series[z].data[re]!==void 0&&m.config.series[z].data[re].fillColor&&(Q=m.config.series[z].data[re].fillColor);var xe=b.fillPath({color:Q,seriesNumber:z,dataPointIndex:re});O.node.classList.add("apexcharts-treemap-rect"),O.attr({fill:xe}),d.helpers.addListeners(O);var ke={x:ce+(_e-ce)/2,y:ye+(Ee-ye)/2,width:0,height:0},Le={x:ce,y:ye,width:_e-ce,height:Ee-ye};if(m.config.chart.animations.enabled&&!m.globals.dataChanged){var rt=1;m.globals.resized||(rt=m.config.chart.animations.speed),d.animateTreemap(O,ke,Le,rt)}if(m.globals.dataChanged){var Ze=1;d.dynamicAnim.enabled&&m.globals.shouldAnimate&&(Ze=d.dynamicAnim.speed,m.globals.previousPaths[z]&&m.globals.previousPaths[z][re]&&m.globals.previousPaths[z][re].rect&&(ke=m.globals.previousPaths[z][re].rect),d.animateTreemap(O,ke,Le,Ze))}var Et=d.getFontSize(ee),Bt=m.config.dataLabels.formatter(d.labels[z][re],{value:m.globals.series[z][re],seriesIndex:z,dataPointIndex:re,w:m});m.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Et=parseInt(m.config.dataLabels.style.fontSize,10),Bt=d.truncateLabels(Bt,Et,ce,ye,_e,Ee));var Nt=d.helpers.calculateDataLabels({text:Bt,x:(ce+_e)/2,y:(ye+Ee)/2+d.strokeWidth/2+Et/3,i:z,j:re,colorProps:X,fontSize:Et,series:c});m.config.dataLabels.enabled&&Nt&&d.rotateToFitLabel(Nt,Et,Bt,ce,ye,_e,Ee),$.add(O),Nt!==null&&$.add(Nt)}),$.add(B),S.add($)}),S}},{key:"getFontSize",value:function(c){var d=this.w,m,v,b,S,T=function M(z){var $,H=0;if(Array.isArray(z[0]))for($=0;$<z.length;$++)H+=M(z[$]);else for($=0;$<z.length;$++)H+=z[$].length;return H}(this.labels)/function M(z){var $,H=0;if(Array.isArray(z[0]))for($=0;$<z.length;$++)H+=M(z[$]);else for($=0;$<z.length;$++)H+=1;return H}(this.labels);return m=c[2]-c[0],v=c[3]-c[1],b=m*v,S=Math.pow(b,.5),Math.min(S/T,parseInt(d.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(c,d,m,v,b,S,T){var M=new de(this.ctx),z=M.getTextRects(m,d);if(z.width+this.w.config.stroke.width+5>S-v&&z.width<=T-b){var $=M.rotateAroundCenter(c.node);c.node.setAttribute("transform","rotate(-90 ".concat($.x," ").concat($.y,") translate(").concat(z.height/3,")"))}}},{key:"truncateLabels",value:function(c,d,m,v,b,S){var T=new de(this.ctx),M=T.getTextRects(c,d).width+this.w.config.stroke.width+5>b-m&&S-v>b-m?S-v:b-m,z=T.getTextBasedOnMaxWidth({text:c,maxWidth:M,fontSize:d});return c.length!==z.length&&M/d<5?"":z}},{key:"animateTreemap",value:function(c,d,m,v){var b=new K(this.ctx);b.animateRect(c,{x:d.x,y:d.y,width:d.width,height:d.height},{x:m.x,y:m.y,width:m.width,height:m.height},v,function(){b.animationCompleted(c)})}}]),pe}(),$n=86400,gn=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return s(pe,[{key:"calculateTimeScaleTicks",value:function(c,d){var m=this,v=this.w;if(v.globals.allSeriesCollapsed)return v.globals.labels=[],v.globals.timescaleLabels=[],[];var b=new ft(this.ctx),S=(d-c)/864e5;this.determineInterval(S),v.globals.disableZoomIn=!1,v.globals.disableZoomOut=!1,S<.00011574074074074075?v.globals.disableZoomIn=!0:S>5e4&&(v.globals.disableZoomOut=!0);var T=b.getTimeUnitsfromTimestamp(c,d,this.utc),M=v.globals.gridWidth/S,z=M/24,$=z/60,H=$/60,B=Math.floor(24*S),ee=Math.floor(1440*S),re=Math.floor(S*$n),ce=Math.floor(S),ye=Math.floor(S/30),_e=Math.floor(S/365),Ee={minMillisecond:T.minMillisecond,minSecond:T.minSecond,minMinute:T.minMinute,minHour:T.minHour,minDate:T.minDate,minMonth:T.minMonth,minYear:T.minYear},O={firstVal:Ee,currentMillisecond:Ee.minMillisecond,currentSecond:Ee.minSecond,currentMinute:Ee.minMinute,currentHour:Ee.minHour,currentMonthDate:Ee.minDate,currentDate:Ee.minDate,currentMonth:Ee.minMonth,currentYear:Ee.minYear,daysWidthOnXAxis:M,hoursWidthOnXAxis:z,minutesWidthOnXAxis:$,secondsWidthOnXAxis:H,numberOfSeconds:re,numberOfMinutes:ee,numberOfHours:B,numberOfDays:ce,numberOfMonths:ye,numberOfYears:_e};switch(this.tickInterval){case"years":this.generateYearScale(O);break;case"months":case"half_year":this.generateMonthScale(O);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(O);break;case"hours":this.generateHourScale(O);break;case"minutes_fives":case"minutes":this.generateMinuteScale(O);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(O)}var X=this.timeScaleArray.map(function(Q){var xe={position:Q.position,unit:Q.unit,year:Q.year,day:Q.day?Q.day:1,hour:Q.hour?Q.hour:0,month:Q.month+1};return Q.unit==="month"?n(n({},xe),{},{day:1,value:Q.value+1}):Q.unit==="day"||Q.unit==="hour"?n(n({},xe),{},{value:Q.value}):Q.unit==="minute"?n(n({},xe),{},{value:Q.value,minute:Q.value}):Q.unit==="second"?n(n({},xe),{},{value:Q.value,minute:Q.minute,second:Q.second}):Q});return X.filter(function(Q){var xe=1,ke=Math.ceil(v.globals.gridWidth/120),Le=Q.value;v.config.xaxis.tickAmount!==void 0&&(ke=v.config.xaxis.tickAmount),X.length>ke&&(xe=Math.floor(X.length/ke));var rt=!1,Ze=!1;switch(m.tickInterval){case"years":Q.unit==="year"&&(rt=!0);break;case"half_year":xe=7,Q.unit==="year"&&(rt=!0);break;case"months":xe=1,Q.unit==="year"&&(rt=!0);break;case"months_fortnight":xe=15,Q.unit!=="year"&&Q.unit!=="month"||(rt=!0),Le===30&&(Ze=!0);break;case"months_days":xe=10,Q.unit==="month"&&(rt=!0),Le===30&&(Ze=!0);break;case"week_days":xe=8,Q.unit==="month"&&(rt=!0);break;case"days":xe=1,Q.unit==="month"&&(rt=!0);break;case"hours":Q.unit==="day"&&(rt=!0);break;case"minutes_fives":case"seconds_fives":Le%5!=0&&(Ze=!0);break;case"seconds_tens":Le%10!=0&&(Ze=!0)}if(m.tickInterval==="hours"||m.tickInterval==="minutes_fives"||m.tickInterval==="seconds_tens"||m.tickInterval==="seconds_fives"){if(!Ze)return!0}else if((Le%xe==0||rt)&&!Ze)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(c,d){var m=this.w,v=this.formatDates(c),b=this.removeOverlappingTS(v);m.globals.timescaleLabels=b.slice(),new Zt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(c){var d=24*c,m=60*d;switch(!0){case c/365>5:this.tickInterval="years";break;case c>800:this.tickInterval="half_year";break;case c>180:this.tickInterval="months";break;case c>90:this.tickInterval="months_fortnight";break;case c>60:this.tickInterval="months_days";break;case c>30:this.tickInterval="week_days";break;case c>2:this.tickInterval="days";break;case d>2.4:this.tickInterval="hours";break;case m>15:this.tickInterval="minutes_fives";break;case m>5:this.tickInterval="minutes";break;case m>1:this.tickInterval="seconds_tens";break;case 60*m>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(c){var d=c.firstVal,m=c.currentMonth,v=c.currentYear,b=c.daysWidthOnXAxis,S=c.numberOfYears,T=d.minYear,M=0,z=new ft(this.ctx),$="year";if(d.minDate>1||d.minMonth>0){var H=z.determineRemainingDaysOfYear(d.minYear,d.minMonth,d.minDate);M=(z.determineDaysOfYear(d.minYear)-H+1)*b,T=d.minYear+1,this.timeScaleArray.push({position:M,value:T,unit:$,year:T,month:W.monthMod(m+1)})}else d.minDate===1&&d.minMonth===0&&this.timeScaleArray.push({position:M,value:T,unit:$,year:v,month:W.monthMod(m+1)});for(var B=T,ee=M,re=0;re<S;re++)B++,ee=z.determineDaysOfYear(B-1)*b+ee,this.timeScaleArray.push({position:ee,value:B,unit:$,year:B,month:1})}},{key:"generateMonthScale",value:function(c){var d=c.firstVal,m=c.currentMonthDate,v=c.currentMonth,b=c.currentYear,S=c.daysWidthOnXAxis,T=c.numberOfMonths,M=v,z=0,$=new ft(this.ctx),H="month",B=0;if(d.minDate>1){z=($.determineDaysOfMonths(v+1,d.minYear)-m+1)*S,M=W.monthMod(v+1);var ee=b+B,re=W.monthMod(M),ce=M;M===0&&(H="year",ce=ee,re=1,ee+=B+=1),this.timeScaleArray.push({position:z,value:ce,unit:H,year:ee,month:re})}else this.timeScaleArray.push({position:z,value:M,unit:H,year:b,month:W.monthMod(v)});for(var ye=M+1,_e=z,Ee=0,O=1;Ee<T;Ee++,O++){(ye=W.monthMod(ye))===0?(H="year",B+=1):H="month";var X=this._getYear(b,ye,B);_e=$.determineDaysOfMonths(ye,X)*S+_e;var Q=ye===0?X:ye;this.timeScaleArray.push({position:_e,value:Q,unit:H,year:X,month:ye===0?1:ye}),ye++}}},{key:"generateDayScale",value:function(c){var d=c.firstVal,m=c.currentMonth,v=c.currentYear,b=c.hoursWidthOnXAxis,S=c.numberOfDays,T=new ft(this.ctx),M="day",z=d.minDate+1,$=z,H=function(O,X,Q){return O>T.determineDaysOfMonths(X+1,Q)&&($=1,M="month",ee=X+=1),X},B=(24-d.minHour)*b,ee=z,re=H($,m,v);d.minHour===0&&d.minDate===1?(B=0,ee=W.monthMod(d.minMonth),M="month",$=d.minDate):d.minDate!==1&&d.minHour===0&&d.minMinute===0&&(B=0,z=d.minDate,ee=z,re=H($=z,m,v)),this.timeScaleArray.push({position:B,value:ee,unit:M,year:this._getYear(v,re,0),month:W.monthMod(re),day:$});for(var ce=B,ye=0;ye<S;ye++){M="day",re=H($+=1,re,this._getYear(v,re,0));var _e=this._getYear(v,re,0);ce=24*b+ce;var Ee=$===1?W.monthMod(re):$;this.timeScaleArray.push({position:ce,value:Ee,unit:M,year:_e,month:W.monthMod(re),day:Ee})}}},{key:"generateHourScale",value:function(c){var d=c.firstVal,m=c.currentDate,v=c.currentMonth,b=c.currentYear,S=c.minutesWidthOnXAxis,T=c.numberOfHours,M=new ft(this.ctx),z="hour",$=function(xe,ke){return xe>M.determineDaysOfMonths(ke+1,b)&&(ye=1,ke+=1),{month:ke,date:ye}},H=function(xe,ke){return xe>M.determineDaysOfMonths(ke+1,b)?ke+=1:ke},B=60-(d.minMinute+d.minSecond/60),ee=B*S,re=d.minHour+1,ce=re;B===60&&(ee=0,ce=(re=d.minHour)+1);var ye=m;ce>=24&&(ce=0,ye+=1,z="day");var _e=$(ye,v).month;_e=H(ye,_e),this.timeScaleArray.push({position:ee,value:re,unit:z,day:ye,hour:ce,year:b,month:W.monthMod(_e)}),ce++;for(var Ee=ee,O=0;O<T;O++){z="hour",ce>=24&&(ce=0,z="day",_e=$(ye+=1,_e).month,_e=H(ye,_e));var X=this._getYear(b,_e,0);Ee=60*S+Ee;var Q=ce===0?ye:ce;this.timeScaleArray.push({position:Ee,value:Q,unit:z,hour:ce,day:ye,year:X,month:W.monthMod(_e)}),ce++}}},{key:"generateMinuteScale",value:function(c){for(var d=c.currentMillisecond,m=c.currentSecond,v=c.currentMinute,b=c.currentHour,S=c.currentDate,T=c.currentMonth,M=c.currentYear,z=c.minutesWidthOnXAxis,$=c.secondsWidthOnXAxis,H=c.numberOfMinutes,B=v+1,ee=S,re=T,ce=M,ye=b,_e=(60-m-d/1e3)*$,Ee=0;Ee<H;Ee++)B>=60&&(B=0,(ye+=1)===24&&(ye=0)),this.timeScaleArray.push({position:_e,value:B,unit:"minute",hour:ye,minute:B,day:ee,year:this._getYear(ce,re,0),month:W.monthMod(re)}),_e+=z,B++}},{key:"generateSecondScale",value:function(c){for(var d=c.currentMillisecond,m=c.currentSecond,v=c.currentMinute,b=c.currentHour,S=c.currentDate,T=c.currentMonth,M=c.currentYear,z=c.secondsWidthOnXAxis,$=c.numberOfSeconds,H=m+1,B=v,ee=S,re=T,ce=M,ye=b,_e=(1e3-d)/1e3*z,Ee=0;Ee<$;Ee++)H>=60&&(H=0,++B>=60&&(B=0,++ye===24&&(ye=0))),this.timeScaleArray.push({position:_e,value:H,unit:"second",hour:ye,minute:B,second:H,day:ee,year:this._getYear(ce,re,0),month:W.monthMod(re)}),_e+=z,H++}},{key:"createRawDateString",value:function(c,d){var m=c.year;return c.month===0&&(c.month=1),m+="-"+("0"+c.month.toString()).slice(-2),c.unit==="day"?m+=c.unit==="day"?"-"+("0"+d).slice(-2):"-01":m+="-"+("0"+(c.day?c.day:"1")).slice(-2),c.unit==="hour"?m+=c.unit==="hour"?"T"+("0"+d).slice(-2):"T00":m+="T"+("0"+(c.hour?c.hour:"0")).slice(-2),c.unit==="minute"?m+=":"+("0"+d).slice(-2):m+=":"+(c.minute?("0"+c.minute).slice(-2):"00"),c.unit==="second"?m+=":"+("0"+d).slice(-2):m+=":00",this.utc&&(m+=".000Z"),m}},{key:"formatDates",value:function(c){var d=this,m=this.w;return c.map(function(v){var b=v.value.toString(),S=new ft(d.ctx),T=d.createRawDateString(v,b),M=S.getDate(S.parseDate(T));if(d.utc||(M=S.getDate(S.parseDateWithTimezone(T))),m.config.xaxis.labels.format===void 0){var z="dd MMM",$=m.config.xaxis.labels.datetimeFormatter;v.unit==="year"&&(z=$.year),v.unit==="month"&&(z=$.month),v.unit==="day"&&(z=$.day),v.unit==="hour"&&(z=$.hour),v.unit==="minute"&&(z=$.minute),v.unit==="second"&&(z=$.second),b=S.formatDate(M,z)}else b=S.formatDate(M,m.config.xaxis.labels.format);return{dateString:T,position:v.position,value:b,unit:v.unit,year:v.year,month:v.month}})}},{key:"removeOverlappingTS",value:function(c){var d,m=this,v=new de(this.ctx),b=!1;c.length>0&&c[0].value&&c.every(function(M){return M.value.length===c[0].value.length})&&(b=!0,d=v.getTextRects(c[0].value).width);var S=0,T=c.map(function(M,z){if(z>0&&m.w.config.xaxis.labels.hideOverlappingLabels){var $=b?d:v.getTextRects(c[S].value).width,H=c[S].position;return M.position>H+$+10?(S=z,M):null}return M});return T=T.filter(function(M){return M!==null})}},{key:"_getYear",value:function(c,d,m){return c+Math.floor(d/12)+m}}]),pe}(),Ni=function(){function pe(c,d){f(this,pe),this.ctx=d,this.w=d.w,this.el=c}return s(pe,[{key:"setupElements",value:function(){var c=this.w.globals,d=this.w.config,m=d.chart.type;c.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(m)>-1,c.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(m)>-1,c.isBarHorizontal=(d.chart.type==="bar"||d.chart.type==="rangeBar"||d.chart.type==="boxPlot")&&d.plotOptions.bar.horizontal,c.chartClass=".apexcharts"+c.chartID,c.dom.baseEl=this.el,c.dom.elWrap=document.createElement("div"),de.setAttrs(c.dom.elWrap,{id:c.chartClass.substring(1),class:"apexcharts-canvas "+c.chartClass.substring(1)}),this.el.appendChild(c.dom.elWrap),c.dom.Paper=new window.SVG.Doc(c.dom.elWrap),c.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(d.chart.offsetX,", ").concat(d.chart.offsetY,")")}),c.dom.Paper.node.style.background=d.theme.mode!=="dark"||d.chart.background?d.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),c.dom.elLegendForeign=document.createElementNS(c.SVGNS,"foreignObject"),de.setAttrs(c.dom.elLegendForeign,{x:0,y:0,width:c.svgWidth,height:c.svgHeight}),c.dom.elLegendWrap=document.createElement("div"),c.dom.elLegendWrap.classList.add("apexcharts-legend"),c.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),c.dom.elLegendForeign.appendChild(c.dom.elLegendWrap),c.dom.Paper.node.appendChild(c.dom.elLegendForeign),c.dom.elGraphical=c.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),c.dom.elDefs=c.dom.Paper.defs(),c.dom.Paper.add(c.dom.elGraphical),c.dom.elGraphical.add(c.dom.elDefs)}},{key:"plotChartType",value:function(c,d){var m=this.w,v=m.config,b=m.globals,S={series:[],i:[]},T={series:[],i:[]},M={series:[],i:[]},z={series:[],i:[]},$={series:[],i:[]},H={series:[],i:[]},B={series:[],i:[]},ee={series:[],i:[]},re={series:[],seriesRangeEnd:[],i:[]};b.series.map(function(ke,Le){var rt=0;c[Le].type!==void 0?(c[Le].type==="column"||c[Le].type==="bar"?(b.series.length>1&&v.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),$.series.push(ke),$.i.push(Le),rt++,m.globals.columnSeries=$.series):c[Le].type==="area"?(T.series.push(ke),T.i.push(Le),rt++):c[Le].type==="line"?(S.series.push(ke),S.i.push(Le),rt++):c[Le].type==="scatter"?(M.series.push(ke),M.i.push(Le)):c[Le].type==="bubble"?(z.series.push(ke),z.i.push(Le),rt++):c[Le].type==="candlestick"?(H.series.push(ke),H.i.push(Le),rt++):c[Le].type==="boxPlot"?(B.series.push(ke),B.i.push(Le),rt++):c[Le].type==="rangeBar"?(ee.series.push(ke),ee.i.push(Le),rt++):c[Le].type==="rangeArea"?(re.series.push(b.seriesRangeStart[Le]),re.seriesRangeEnd.push(b.seriesRangeEnd[Le]),re.i.push(Le),rt++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),rt>1&&(b.comboCharts=!0)):(S.series.push(ke),S.i.push(Le))});var ce=new jr(this.ctx,d),ye=new He(this.ctx,d);this.ctx.pie=new yt(this.ctx);var _e=new bt(this.ctx);this.ctx.rangeBar=new qt(this.ctx,d);var Ee=new ct(this.ctx),O=[];if(b.comboCharts){if(T.series.length>0&&O.push(ce.draw(T.series,"area",T.i)),$.series.length>0)if(m.config.chart.stacked){var X=new Ce(this.ctx,d);O.push(X.draw($.series,$.i))}else this.ctx.bar=new we(this.ctx,d),O.push(this.ctx.bar.draw($.series,$.i));if(re.series.length>0&&O.push(ce.draw(re.series,"rangeArea",re.i,re.seriesRangeEnd)),S.series.length>0&&O.push(ce.draw(S.series,"line",S.i)),H.series.length>0&&O.push(ye.draw(H.series,"candlestick",H.i)),B.series.length>0&&O.push(ye.draw(B.series,"boxPlot",B.i)),ee.series.length>0&&O.push(this.ctx.rangeBar.draw(ee.series,ee.i)),M.series.length>0){var Q=new jr(this.ctx,d,!0);O.push(Q.draw(M.series,"scatter",M.i))}if(z.series.length>0){var xe=new jr(this.ctx,d,!0);O.push(xe.draw(z.series,"bubble",z.i))}}else switch(v.chart.type){case"line":O=ce.draw(b.series,"line");break;case"area":O=ce.draw(b.series,"area");break;case"bar":v.chart.stacked?O=new Ce(this.ctx,d).draw(b.series):(this.ctx.bar=new we(this.ctx,d),O=this.ctx.bar.draw(b.series));break;case"candlestick":O=new He(this.ctx,d).draw(b.series,"candlestick");break;case"boxPlot":O=new He(this.ctx,d).draw(b.series,v.chart.type);break;case"rangeBar":O=this.ctx.rangeBar.draw(b.series);break;case"rangeArea":O=ce.draw(b.seriesRangeStart,"rangeArea",void 0,b.seriesRangeEnd);break;case"heatmap":O=new ot(this.ctx,d).draw(b.series);break;case"treemap":O=new Bn(this.ctx,d).draw(b.series);break;case"pie":case"donut":case"polarArea":O=this.ctx.pie.draw(b.series);break;case"radialBar":O=_e.draw(b.series);break;case"radar":O=Ee.draw(b.series);break;default:O=ce.draw(b.series)}return O}},{key:"setSVGDimensions",value:function(){var c=this.w.globals,d=this.w.config;c.svgWidth=d.chart.width,c.svgHeight=d.chart.height;var m=W.getDimensions(this.el),v=d.chart.width.toString().split(/[0-9]+/g).pop();v==="%"?W.isNumber(m[0])&&(m[0].width===0&&(m=W.getDimensions(this.el.parentNode)),c.svgWidth=m[0]*parseInt(d.chart.width,10)/100):v!=="px"&&v!==""||(c.svgWidth=parseInt(d.chart.width,10));var b=d.chart.height.toString().split(/[0-9]+/g).pop();if(c.svgHeight!=="auto"&&c.svgHeight!=="")if(b==="%"){var S=W.getDimensions(this.el.parentNode);c.svgHeight=S[1]*parseInt(d.chart.height,10)/100}else c.svgHeight=parseInt(d.chart.height,10);else c.axisCharts?c.svgHeight=c.svgWidth/1.61:c.svgHeight=c.svgWidth/1.2;if(c.svgWidth<0&&(c.svgWidth=0),c.svgHeight<0&&(c.svgHeight=0),de.setAttrs(c.dom.Paper.node,{width:c.svgWidth,height:c.svgHeight}),b!=="%"){var T=d.chart.sparkline.enabled?0:c.axisCharts?d.chart.parentHeightOffset:0;c.dom.Paper.node.parentNode.parentNode.style.minHeight=c.svgHeight+T+"px"}c.dom.elWrap.style.width=c.svgWidth+"px",c.dom.elWrap.style.height=c.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var c=this.w.globals,d=c.translateY,m={transform:"translate("+c.translateX+", "+d+")"};de.setAttrs(c.dom.elGraphical.node,m)}},{key:"resizeNonAxisCharts",value:function(){var c=this.w,d=c.globals,m=0,v=c.config.chart.sparkline.enabled?1:15;v+=c.config.grid.padding.bottom,c.config.legend.position!=="top"&&c.config.legend.position!=="bottom"||!c.config.legend.show||c.config.legend.floating||(m=new Xr(this.ctx).legendHelpers.getLegendBBox().clwh+10);var b=c.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),S=2.05*c.globals.radialSize;if(b&&!c.config.chart.sparkline.enabled&&c.config.plotOptions.radialBar.startAngle!==0){var T=W.getBoundingClientRect(b);S=T.bottom;var M=T.bottom-T.top;S=Math.max(2.05*c.globals.radialSize,M)}var z=S+d.translateY+m+v;d.dom.elLegendForeign&&d.dom.elLegendForeign.setAttribute("height",z),c.config.chart.height&&String(c.config.chart.height).indexOf("%")>0||(d.dom.elWrap.style.height=z+"px",de.setAttrs(d.dom.Paper.node,{height:z}),d.dom.Paper.node.parentNode.parentNode.style.minHeight=z+"px")}},{key:"coreCalculations",value:function(){new Br(this.ctx).init()}},{key:"resetGlobals",value:function(){var c=this,d=function(){return c.w.config.series.map(function(b){return[]})},m=new Wt,v=this.w.globals;m.initGlobalVars(v),v.seriesXvalues=d(),v.seriesYvalues=d()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var c=null,d=this.w;if(d.globals.axisCharts){if(d.config.xaxis.crosshairs.position==="back"&&new Kr(this.ctx).drawXCrosshairs(),d.config.yaxis[0].crosshairs.position==="back"&&new Kr(this.ctx).drawYCrosshairs(),d.config.xaxis.type==="datetime"&&d.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new gn(this.ctx);var m=[];isFinite(d.globals.minX)&&isFinite(d.globals.maxX)&&!d.globals.isBarHorizontal?m=this.ctx.timeScale.calculateTimeScaleTicks(d.globals.minX,d.globals.maxX):d.globals.isBarHorizontal&&(m=this.ctx.timeScale.calculateTimeScaleTicks(d.globals.minY,d.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(m)}c=new Ae(this.ctx).getCalculatedRatios()}return c}},{key:"updateSourceChart",value:function(c){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:c.w.globals.minX,max:c.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var c=this,d=this.w;if(d.config.chart.brush.enabled&&typeof d.config.chart.events.selection!="function"){var m=Array.isArray(d.config.chart.brush.targets)||[d.config.chart.brush.target];m.forEach(function(v){var b=ApexCharts.getChartByID(v);b.w.globals.brushSource=c.ctx,typeof b.w.config.chart.events.zoomed!="function"&&(b.w.config.chart.events.zoomed=function(){c.updateSourceChart(b)}),typeof b.w.config.chart.events.scrolled!="function"&&(b.w.config.chart.events.scrolled=function(){c.updateSourceChart(b)})}),d.config.chart.events.selection=function(v,b){m.forEach(function(S){var T=ApexCharts.getChartByID(S),M=W.clone(d.config.yaxis);if(d.config.chart.brush.autoScaleYaxis&&T.w.globals.series.length===1){var z=new nn(T);M=z.autoScaleY(T,M,b)}var $=T.w.config.yaxis.reduce(function(H,B,ee){return[].concat(ae(H),[n(n({},T.w.config.yaxis[ee]),{},{min:M[0].min,max:M[0].max})])},[]);T.ctx.updateHelpers._updateOptions({xaxis:{min:b.xaxis.min,max:b.xaxis.max},yaxis:$},!1,!1,!1,!1)})}}}}]),pe}(),Wn=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"_updateOptions",value:function(c){var d=this,m=arguments.length>1&&arguments[1]!==void 0&&arguments[1],v=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],b=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],S=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(T){var M=[d.ctx];b&&(M=d.ctx.getSyncedCharts()),d.ctx.w.globals.isExecCalled&&(M=[d.ctx],d.ctx.w.globals.isExecCalled=!1),M.forEach(function(z,$){var H=z.w;if(H.globals.shouldAnimate=v,m||(H.globals.resized=!0,H.globals.dataChanged=!0,v&&z.series.getPreviousPaths()),c&&o(c)==="object"&&(z.config=new Xt(c),c=Ae.extendArrayProps(z.config,c,H),z.w.globals.chartID!==d.ctx.w.globals.chartID&&delete c.series,H.config=W.extend(H.config,c),S&&(H.globals.lastXAxis=c.xaxis?W.clone(c.xaxis):[],H.globals.lastYAxis=c.yaxis?W.clone(c.yaxis):[],H.globals.initialConfig=W.extend({},H.config),H.globals.initialSeries=W.clone(H.config.series),c.series))){for(var B=0;B<H.globals.collapsedSeriesIndices.length;B++){var ee=H.config.series[H.globals.collapsedSeriesIndices[B]];H.globals.collapsedSeries[B].data=H.globals.axisCharts?ee.data.slice():ee}for(var re=0;re<H.globals.ancillaryCollapsedSeriesIndices.length;re++){var ce=H.config.series[H.globals.ancillaryCollapsedSeriesIndices[re]];H.globals.ancillaryCollapsedSeries[re].data=H.globals.axisCharts?ce.data.slice():ce}z.series.emptyCollapsedSeries(H.config.series)}return z.update(c).then(function(){$===M.length-1&&T(z)})})})}},{key:"_updateSeries",value:function(c,d){var m=this,v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(b){var S,T=m.w;return T.globals.shouldAnimate=d,T.globals.dataChanged=!0,d&&m.ctx.series.getPreviousPaths(),T.globals.axisCharts?((S=c.map(function(M,z){return m._extendSeries(M,z)})).length===0&&(S=[{data:[]}]),T.config.series=S):T.config.series=c.slice(),v&&(T.globals.initialConfig.series=W.clone(T.config.series),T.globals.initialSeries=W.clone(T.config.series)),m.ctx.update().then(function(){b(m.ctx)})})}},{key:"_extendSeries",value:function(c,d){var m=this.w,v=m.config.series[d];return n(n({},m.config.series[d]),{},{name:c.name?c.name:v==null?void 0:v.name,color:c.color?c.color:v==null?void 0:v.color,type:c.type?c.type:v==null?void 0:v.type,group:c.group?c.group:v==null?void 0:v.group,data:c.data?c.data:v==null?void 0:v.data,zIndex:c.zIndex!==void 0?c.zIndex:d})}},{key:"toggleDataPointSelection",value:function(c,d){var m=this.w,v=null,b=".apexcharts-series[data\\:realIndex='".concat(c,"']");return m.globals.axisCharts?v=m.globals.dom.Paper.select("".concat(b," path[j='").concat(d,"'], ").concat(b," circle[j='").concat(d,"'], ").concat(b," rect[j='").concat(d,"']")).members[0]:d===void 0&&(v=m.globals.dom.Paper.select("".concat(b," path[j='").concat(c,"']")).members[0],m.config.chart.type!=="pie"&&m.config.chart.type!=="polarArea"&&m.config.chart.type!=="donut"||this.ctx.pie.pieClicked(c)),v?(new de(this.ctx).pathMouseDown(v,null),v.node?v.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(c){var d=this.w;if(["min","max"].forEach(function(v){c.xaxis[v]!==void 0&&(d.config.xaxis[v]=c.xaxis[v],d.globals.lastXAxis[v]=c.xaxis[v])}),c.xaxis.categories&&c.xaxis.categories.length&&(d.config.xaxis.categories=c.xaxis.categories),d.config.xaxis.convertedCatToNumeric){var m=new mt(c);c=m.convertCatToNumericXaxis(c,this.ctx)}return c}},{key:"forceYAxisUpdate",value:function(c){return c.chart&&c.chart.stacked&&c.chart.stackType==="100%"&&(Array.isArray(c.yaxis)?c.yaxis.forEach(function(d,m){c.yaxis[m].min=0,c.yaxis[m].max=100}):(c.yaxis.min=0,c.yaxis.max=100)),c}},{key:"revertDefaultAxisMinMax",value:function(c){var d=this,m=this.w,v=m.globals.lastXAxis,b=m.globals.lastYAxis;c&&c.xaxis&&(v=c.xaxis),c&&c.yaxis&&(b=c.yaxis),m.config.xaxis.min=v.min,m.config.xaxis.max=v.max;var S=function(T){b[T]!==void 0&&(m.config.yaxis[T].min=b[T].min,m.config.yaxis[T].max=b[T].max)};m.config.yaxis.map(function(T,M){m.globals.zoomed||b[M]!==void 0?S(M):d.ctx.opts.yaxis[M]!==void 0&&(T.min=d.ctx.opts.yaxis[M].min,T.max=d.ctx.opts.yaxis[M].max)})}}]),pe}();Rr=typeof window<"u"?window:void 0,Cn=function(pe,c){var d=(this!==void 0?this:pe).SVG=function(O){if(d.supported)return O=new d.Doc(O),d.parser.draw||d.prepare(),O};if(d.ns="http://www.w3.org/2000/svg",d.xmlns="http://www.w3.org/2000/xmlns/",d.xlink="http://www.w3.org/1999/xlink",d.svgjs="http://svgjs.dev",d.supported=!0,!d.supported)return!1;d.did=1e3,d.eid=function(O){return"Svgjs"+$(O)+d.did++},d.create=function(O){var X=c.createElementNS(this.ns,O);return X.setAttribute("id",this.eid(O)),X},d.extend=function(){var O,X;X=(O=[].slice.call(arguments)).pop();for(var Q=O.length-1;Q>=0;Q--)if(O[Q])for(var xe in X)O[Q].prototype[xe]=X[xe];d.Set&&d.Set.inherit&&d.Set.inherit()},d.invent=function(O){var X=typeof O.create=="function"?O.create:function(){this.constructor.call(this,d.create(O.create))};return O.inherit&&(X.prototype=new O.inherit),O.extend&&d.extend(X,O.extend),O.construct&&d.extend(O.parent||d.Container,O.construct),X},d.adopt=function(O){return O?O.instance?O.instance:((X=O.nodeName=="svg"?O.parentNode instanceof pe.SVGElement?new d.Nested:new d.Doc:O.nodeName=="linearGradient"?new d.Gradient("linear"):O.nodeName=="radialGradient"?new d.Gradient("radial"):d[$(O.nodeName)]?new d[$(O.nodeName)]:new d.Element(O)).type=O.nodeName,X.node=O,O.instance=X,X instanceof d.Doc&&X.namespace().defs(),X.setData(JSON.parse(O.getAttribute("svgjs:data"))||{}),X):null;var X},d.prepare=function(){var O=c.getElementsByTagName("body")[0],X=(O?new d.Doc(O):d.adopt(c.documentElement).nested()).size(2,0);d.parser={body:O||c.documentElement,draw:X.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:X.polyline().node,path:X.path().node,native:d.create("svg")}},d.parser={native:d.create("svg")},c.addEventListener("DOMContentLoaded",function(){d.parser.draw||d.prepare()},!1),d.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},d.utils={map:function(O,X){for(var Q=O.length,xe=[],ke=0;ke<Q;ke++)xe.push(X(O[ke]));return xe},filter:function(O,X){for(var Q=O.length,xe=[],ke=0;ke<Q;ke++)X(O[ke])&&xe.push(O[ke]);return xe},filterSVGElements:function(O){return this.filter(O,function(X){return X instanceof pe.SVGElement})}},d.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},d.Color=function(O){var X,Q;this.r=0,this.g=0,this.b=0,O&&(typeof O=="string"?d.regex.isRgb.test(O)?(X=d.regex.rgb.exec(O.replace(d.regex.whitespace,"")),this.r=parseInt(X[1]),this.g=parseInt(X[2]),this.b=parseInt(X[3])):d.regex.isHex.test(O)&&(X=d.regex.hex.exec((Q=O).length==4?["#",Q.substring(1,2),Q.substring(1,2),Q.substring(2,3),Q.substring(2,3),Q.substring(3,4),Q.substring(3,4)].join(""):Q),this.r=parseInt(X[1],16),this.g=parseInt(X[2],16),this.b=parseInt(X[3],16)):o(O)==="object"&&(this.r=O.r,this.g=O.g,this.b=O.b))},d.extend(d.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+H(this.r)+H(this.g)+H(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(O){return this.destination=new d.Color(O),this},at:function(O){return this.destination?(O=O<0?0:O>1?1:O,new d.Color({r:~~(this.r+(this.destination.r-this.r)*O),g:~~(this.g+(this.destination.g-this.g)*O),b:~~(this.b+(this.destination.b-this.b)*O)})):this}}),d.Color.test=function(O){return O+="",d.regex.isHex.test(O)||d.regex.isRgb.test(O)},d.Color.isRgb=function(O){return O&&typeof O.r=="number"&&typeof O.g=="number"&&typeof O.b=="number"},d.Color.isColor=function(O){return d.Color.isRgb(O)||d.Color.test(O)},d.Array=function(O,X){(O=(O||[]).valueOf()).length==0&&X&&(O=X.valueOf()),this.value=this.parse(O)},d.extend(d.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(O){return O=O.valueOf(),Array.isArray(O)?O:this.split(O)}}),d.PointArray=function(O,X){d.Array.call(this,O,X||[[0,0]])},d.PointArray.prototype=new d.Array,d.PointArray.prototype.constructor=d.PointArray;for(var m={M:function(O,X,Q){return X.x=Q.x=O[0],X.y=Q.y=O[1],["M",X.x,X.y]},L:function(O,X){return X.x=O[0],X.y=O[1],["L",O[0],O[1]]},H:function(O,X){return X.x=O[0],["H",O[0]]},V:function(O,X){return X.y=O[0],["V",O[0]]},C:function(O,X){return X.x=O[4],X.y=O[5],["C",O[0],O[1],O[2],O[3],O[4],O[5]]},Q:function(O,X){return X.x=O[2],X.y=O[3],["Q",O[0],O[1],O[2],O[3]]},S:function(O,X){return X.x=O[2],X.y=O[3],["S",O[0],O[1],O[2],O[3]]},Z:function(O,X,Q){return X.x=Q.x,X.y=Q.y,["Z"]}},v="mlhvqtcsaz".split(""),b=0,S=v.length;b<S;++b)m[v[b]]=function(O){return function(X,Q,xe){if(O=="H")X[0]=X[0]+Q.x;else if(O=="V")X[0]=X[0]+Q.y;else if(O=="A")X[5]=X[5]+Q.x,X[6]=X[6]+Q.y;else for(var ke=0,Le=X.length;ke<Le;++ke)X[ke]=X[ke]+(ke%2?Q.y:Q.x);if(m&&typeof m[O]=="function")return m[O](X,Q,xe)}}(v[b].toUpperCase());d.PathArray=function(O,X){d.Array.call(this,O,X||[["M",0,0]])},d.PathArray.prototype=new d.Array,d.PathArray.prototype.constructor=d.PathArray,d.extend(d.PathArray,{toString:function(){return function(O){for(var X=0,Q=O.length,xe="";X<Q;X++)xe+=O[X][0],O[X][1]!=null&&(xe+=O[X][1],O[X][2]!=null&&(xe+=" ",xe+=O[X][2],O[X][3]!=null&&(xe+=" ",xe+=O[X][3],xe+=" ",xe+=O[X][4],O[X][5]!=null&&(xe+=" ",xe+=O[X][5],xe+=" ",xe+=O[X][6],O[X][7]!=null&&(xe+=" ",xe+=O[X][7])))));return xe+" "}(this.value)},move:function(O,X){var Q=this.bbox();return Q.x,Q.y,this},at:function(O){if(!this.destination)return this;for(var X=this.value,Q=this.destination.value,xe=[],ke=new d.PathArray,Le=0,rt=X.length;Le<rt;Le++){xe[Le]=[X[Le][0]];for(var Ze=1,Et=X[Le].length;Ze<Et;Ze++)xe[Le][Ze]=X[Le][Ze]+(Q[Le][Ze]-X[Le][Ze])*O;xe[Le][0]==="A"&&(xe[Le][4]=+(xe[Le][4]!=0),xe[Le][5]=+(xe[Le][5]!=0))}return ke.value=xe,ke},parse:function(O){if(O instanceof d.PathArray)return O.valueOf();var X,Q={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};O=typeof O=="string"?O.replace(d.regex.numbersWithDots,M).replace(d.regex.pathLetters," $& ").replace(d.regex.hyphen,"$1 -").trim().split(d.regex.delimiter):O.reduce(function(Et,Bt){return[].concat.call(Et,Bt)},[]);var xe=[],ke=new d.Point,Le=new d.Point,rt=0,Ze=O.length;do d.regex.isPathLetter.test(O[rt])?(X=O[rt],++rt):X=="M"?X="L":X=="m"&&(X="l"),xe.push(m[X].call(null,O.slice(rt,rt+=Q[X.toUpperCase()]).map(parseFloat),ke,Le));while(Ze>rt);return xe},bbox:function(){return d.parser.draw||d.prepare(),d.parser.path.setAttribute("d",this.toString()),d.parser.path.getBBox()}}),d.Number=d.invent({create:function(O,X){this.value=0,this.unit=X||"",typeof O=="number"?this.value=isNaN(O)?0:isFinite(O)?O:O<0?-34e37:34e37:typeof O=="string"?(X=O.match(d.regex.numberAndUnit))&&(this.value=parseFloat(X[1]),X[5]=="%"?this.value/=100:X[5]=="s"&&(this.value*=1e3),this.unit=X[5]):O instanceof d.Number&&(this.value=O.valueOf(),this.unit=O.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(O){return O=new d.Number(O),new d.Number(this+O,this.unit||O.unit)},minus:function(O){return O=new d.Number(O),new d.Number(this-O,this.unit||O.unit)},times:function(O){return O=new d.Number(O),new d.Number(this*O,this.unit||O.unit)},divide:function(O){return O=new d.Number(O),new d.Number(this/O,this.unit||O.unit)},to:function(O){var X=new d.Number(this);return typeof O=="string"&&(X.unit=O),X},morph:function(O){return this.destination=new d.Number(O),O.relative&&(this.destination.value+=this.value),this},at:function(O){return this.destination?new d.Number(this.destination).minus(this).times(O).plus(this):this}}}),d.Element=d.invent({create:function(O){this._stroke=d.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=O)&&(this.type=O.nodeName,this.node.instance=this,this._stroke=O.getAttribute("stroke")||this._stroke)},extend:{x:function(O){return this.attr("x",O)},y:function(O){return this.attr("y",O)},cx:function(O){return O==null?this.x()+this.width()/2:this.x(O-this.width()/2)},cy:function(O){return O==null?this.y()+this.height()/2:this.y(O-this.height()/2)},move:function(O,X){return this.x(O).y(X)},center:function(O,X){return this.cx(O).cy(X)},width:function(O){return this.attr("width",O)},height:function(O){return this.attr("height",O)},size:function(O,X){var Q=B(this,O,X);return this.width(new d.Number(Q.width)).height(new d.Number(Q.height))},clone:function(O){this.writeDataToDom();var X=ce(this.node.cloneNode(!0));return O?O.add(X):this.after(X),X},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(O){return this.after(O).remove(),O},addTo:function(O){return O.put(this)},putIn:function(O){return O.add(this)},id:function(O){return this.attr("id",O)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var O=this.attr("class");return O==null?[]:O.trim().split(d.regex.delimiter)},hasClass:function(O){return this.classes().indexOf(O)!=-1},addClass:function(O){if(!this.hasClass(O)){var X=this.classes();X.push(O),this.attr("class",X.join(" "))}return this},removeClass:function(O){return this.hasClass(O)&&this.attr("class",this.classes().filter(function(X){return X!=O}).join(" ")),this},toggleClass:function(O){return this.hasClass(O)?this.removeClass(O):this.addClass(O)},reference:function(O){return d.get(this.attr(O))},parent:function(O){var X=this;if(!X.node.parentNode)return null;if(X=d.adopt(X.node.parentNode),!O)return X;for(;X&&X.node instanceof pe.SVGElement;){if(typeof O=="string"?X.matches(O):X instanceof O)return X;if(!X.node.parentNode||X.node.parentNode.nodeName=="#document")return null;X=d.adopt(X.node.parentNode)}},doc:function(){return this instanceof d.Doc?this:this.parent(d.Doc)},parents:function(O){var X=[],Q=this;do{if(!(Q=Q.parent(O))||!Q.node)break;X.push(Q)}while(Q.parent);return X},matches:function(O){return function(X,Q){return(X.matches||X.matchesSelector||X.msMatchesSelector||X.mozMatchesSelector||X.webkitMatchesSelector||X.oMatchesSelector).call(X,Q)}(this.node,O)},native:function(){return this.node},svg:function(O){var X=c.createElement("svg");if(!(O&&this instanceof d.Parent))return X.appendChild(O=c.createElement("svg")),this.writeDataToDom(),O.appendChild(this.node.cloneNode(!0)),X.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");X.innerHTML="<svg>"+O.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var Q=0,xe=X.firstChild.childNodes.length;Q<xe;Q++)this.node.appendChild(X.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(O){return this.dom=O,this},is:function(O){return function(X,Q){return X instanceof Q}(this,O)}}}),d.easing={"-":function(O){return O},"<>":function(O){return-Math.cos(O*Math.PI)/2+.5},">":function(O){return Math.sin(O*Math.PI/2)},"<":function(O){return 1-Math.cos(O*Math.PI/2)}},d.morph=function(O){return function(X,Q){return new d.MorphObj(X,Q).at(O)}},d.Situation=d.invent({create:function(O){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new d.Number(O.duration).valueOf(),this.delay=new d.Number(O.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=O.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),d.FX=d.invent({create:function(O){this._target=O,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(O,X,Q){o(O)==="object"&&(X=O.ease,Q=O.delay,O=O.duration);var xe=new d.Situation({duration:O||1e3,delay:Q||0,ease:d.easing[X||"-"]||X});return this.queue(xe),this},target:function(O){return O&&O instanceof d.Element?(this._target=O,this):this._target},timeToAbsPos:function(O){return(O-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(O){return this.situation.duration/this._speed*O+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=pe.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){pe.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(O){return(typeof O=="function"||O instanceof d.Situation)&&this.situations.push(O),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof d.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var O,X=this.situation;if(X.init)return this;for(var Q in X.animations){O=this.target()[Q](),Array.isArray(O)||(O=[O]),Array.isArray(X.animations[Q])||(X.animations[Q]=[X.animations[Q]]);for(var xe=O.length;xe--;)X.animations[Q][xe]instanceof d.Number&&(O[xe]=new d.Number(O[xe])),X.animations[Q][xe]=O[xe].morph(X.animations[Q][xe])}for(var Q in X.attrs)X.attrs[Q]=new d.MorphObj(this.target().attr(Q),X.attrs[Q]);for(var Q in X.styles)X.styles[Q]=new d.MorphObj(this.target().style(Q),X.styles[Q]);return X.initialTransformation=this.target().matrixify(),X.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(O,X){var Q=this.active;return this.active=!1,X&&this.clearQueue(),O&&this.situation&&(!Q&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(O){var X=this.last();return this.target().on("finished.fx",function Q(xe){xe.detail.situation==X&&(O.call(this,X),this.off("finished.fx",Q))}),this._callStart()},during:function(O){var X=this.last(),Q=function(xe){xe.detail.situation==X&&O.call(this,xe.detail.pos,d.morph(xe.detail.pos),xe.detail.eased,X)};return this.target().off("during.fx",Q).on("during.fx",Q),this.after(function(){this.off("during.fx",Q)}),this._callStart()},afterAll:function(O){var X=function Q(xe){O.call(this),this.off("allfinished.fx",Q)};return this.target().off("allfinished.fx",X).on("allfinished.fx",X),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(O,X,Q){return this.last()[Q||"animations"][O]=X,this._callStart()},step:function(O){var X,Q,xe;O||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(X=Math.max(this.absPos,0),Q=Math.floor(X),this.situation.loops===!0||Q<this.situation.loops?(this.pos=X-Q,xe=this.situation.loop,this.situation.loop=Q):(this.absPos=this.situation.loops,this.pos=1,xe=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-xe)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var ke=this.situation.ease(this.pos);for(var Le in this.situation.once)Le>this.lastPos&&Le<=ke&&(this.situation.once[Le].call(this.target(),this.pos,ke),delete this.situation.once[Le]);return this.active&&this.target().fire("during",{pos:this.pos,eased:ke,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=ke,this):this},eachAt:function(){var O,X=this,Q=this.target(),xe=this.situation;for(var ke in xe.animations)O=[].concat(xe.animations[ke]).map(function(Ze){return typeof Ze!="string"&&Ze.at?Ze.at(xe.ease(X.pos),X.pos):Ze}),Q[ke].apply(Q,O);for(var ke in xe.attrs)O=[ke].concat(xe.attrs[ke]).map(function(Et){return typeof Et!="string"&&Et.at?Et.at(xe.ease(X.pos),X.pos):Et}),Q.attr.apply(Q,O);for(var ke in xe.styles)O=[ke].concat(xe.styles[ke]).map(function(Et){return typeof Et!="string"&&Et.at?Et.at(xe.ease(X.pos),X.pos):Et}),Q.style.apply(Q,O);if(xe.transforms.length){O=xe.initialTransformation,ke=0;for(var Le=xe.transforms.length;ke<Le;ke++){var rt=xe.transforms[ke];rt instanceof d.Matrix?O=rt.relative?O.multiply(new d.Matrix().morph(rt).at(xe.ease(this.pos))):O.morph(rt).at(xe.ease(this.pos)):(rt.relative||rt.undo(O.extract()),O=O.multiply(rt.at(xe.ease(this.pos))))}Q.matrix(O)}return this},once:function(O,X,Q){var xe=this.last();return Q||(O=xe.ease(O)),xe.once[O]=X,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:d.Element,construct:{animate:function(O,X,Q){return(this.fx||(this.fx=new d.FX(this))).animate(O,X,Q)},delay:function(O){return(this.fx||(this.fx=new d.FX(this))).delay(O)},stop:function(O,X){return this.fx&&this.fx.stop(O,X),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),d.MorphObj=d.invent({create:function(O,X){return d.Color.isColor(X)?new d.Color(O).morph(X):d.regex.delimiter.test(O)?d.regex.pathLetters.test(O)?new d.PathArray(O).morph(X):new d.Array(O).morph(X):d.regex.numberAndUnit.test(X)?new d.Number(O).morph(X):(this.value=O,void(this.destination=X))},extend:{at:function(O,X){return X<1?this.value:this.destination},valueOf:function(){return this.value}}}),d.extend(d.FX,{attr:function(O,X,Q){if(o(O)==="object")for(var xe in O)this.attr(xe,O[xe]);else this.add(O,X,"attrs");return this},plot:function(O,X,Q,xe){return arguments.length==4?this.plot([O,X,Q,xe]):this.add("plot",new(this.target()).morphArray(O))}}),d.Box=d.invent({create:function(O,X,Q,xe){if(!(o(O)!=="object"||O instanceof d.Element))return d.Box.call(this,O.left!=null?O.left:O.x,O.top!=null?O.top:O.y,O.width,O.height);var ke;arguments.length==4&&(this.x=O,this.y=X,this.width=Q,this.height=xe),(ke=this).x==null&&(ke.x=0,ke.y=0,ke.width=0,ke.height=0),ke.w=ke.width,ke.h=ke.height,ke.x2=ke.x+ke.width,ke.y2=ke.y+ke.height,ke.cx=ke.x+ke.width/2,ke.cy=ke.y+ke.height/2}}),d.BBox=d.invent({create:function(O){if(d.Box.apply(this,[].slice.call(arguments)),O instanceof d.Element){var X;try{if(!c.documentElement.contains){for(var Q=O.node;Q.parentNode;)Q=Q.parentNode;if(Q!=c)throw new Error("Element not in the dom")}X=O.node.getBBox()}catch{if(O instanceof d.Shape){d.parser.draw||d.prepare();var xe=O.clone(d.parser.draw.instance).show();xe&&xe.node&&typeof xe.node.getBBox=="function"&&(X=xe.node.getBBox()),xe&&typeof xe.remove=="function"&&xe.remove()}else X={x:O.node.clientLeft,y:O.node.clientTop,width:O.node.clientWidth,height:O.node.clientHeight}}d.Box.call(this,X)}},inherit:d.Box,parent:d.Element,construct:{bbox:function(){return new d.BBox(this)}}}),d.BBox.prototype.constructor=d.BBox,d.Matrix=d.invent({create:function(O){var X=re([1,0,0,1,0,0]);O=O===null?X:O instanceof d.Element?O.matrixify():typeof O=="string"?re(O.split(d.regex.delimiter).map(parseFloat)):arguments.length==6?re([].slice.call(arguments)):Array.isArray(O)?re(O):O&&o(O)==="object"?O:X;for(var Q=_e.length-1;Q>=0;--Q)this[_e[Q]]=O[_e[Q]]!=null?O[_e[Q]]:X[_e[Q]]},extend:{extract:function(){var O=ee(this,0,1);ee(this,1,0);var X=180/Math.PI*Math.atan2(O.y,O.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(X*Math.PI/180)+this.f*Math.sin(X*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(X*Math.PI/180)+this.e*Math.sin(-X*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:X,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new d.Matrix(this)}},clone:function(){return new d.Matrix(this)},morph:function(O){return this.destination=new d.Matrix(O),this},multiply:function(O){return new d.Matrix(this.native().multiply(function(X){return X instanceof d.Matrix||(X=new d.Matrix(X)),X}(O).native()))},inverse:function(){return new d.Matrix(this.native().inverse())},translate:function(O,X){return new d.Matrix(this.native().translate(O||0,X||0))},native:function(){for(var O=d.parser.native.createSVGMatrix(),X=_e.length-1;X>=0;X--)O[_e[X]]=this[_e[X]];return O},toString:function(){return"matrix("+ye(this.a)+","+ye(this.b)+","+ye(this.c)+","+ye(this.d)+","+ye(this.e)+","+ye(this.f)+")"}},parent:d.Element,construct:{ctm:function(){return new d.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof d.Nested){var O=this.rect(1,1),X=O.node.getScreenCTM();return O.remove(),new d.Matrix(X)}return new d.Matrix(this.node.getScreenCTM())}}}),d.Point=d.invent({create:function(O,X){var Q;Q=Array.isArray(O)?{x:O[0],y:O[1]}:o(O)==="object"?{x:O.x,y:O.y}:O!=null?{x:O,y:X??O}:{x:0,y:0},this.x=Q.x,this.y=Q.y},extend:{clone:function(){return new d.Point(this)},morph:function(O,X){return this.destination=new d.Point(O,X),this}}}),d.extend(d.Element,{point:function(O,X){return new d.Point(O,X).transform(this.screenCTM().inverse())}}),d.extend(d.Element,{attr:function(O,X,Q){if(O==null){for(O={},Q=(X=this.node.attributes).length-1;Q>=0;Q--)O[X[Q].nodeName]=d.regex.isNumber.test(X[Q].nodeValue)?parseFloat(X[Q].nodeValue):X[Q].nodeValue;return O}if(o(O)==="object")for(var xe in O)this.attr(xe,O[xe]);else if(X===null)this.node.removeAttribute(O);else{if(X==null)return(X=this.node.getAttribute(O))==null?d.defaults.attrs[O]:d.regex.isNumber.test(X)?parseFloat(X):X;O=="stroke-width"?this.attr("stroke",parseFloat(X)>0?this._stroke:null):O=="stroke"&&(this._stroke=X),O!="fill"&&O!="stroke"||(d.regex.isImage.test(X)&&(X=this.doc().defs().image(X,0,0)),X instanceof d.Image&&(X=this.doc().defs().pattern(0,0,function(){this.add(X)}))),typeof X=="number"?X=new d.Number(X):d.Color.isColor(X)?X=new d.Color(X):Array.isArray(X)&&(X=new d.Array(X)),O=="leading"?this.leading&&this.leading(X):typeof Q=="string"?this.node.setAttributeNS(Q,O,X.toString()):this.node.setAttribute(O,X.toString()),!this.rebuild||O!="font-size"&&O!="x"||this.rebuild(O,X)}return this}}),d.extend(d.Element,{transform:function(O,X){var Q;return o(O)!=="object"?(Q=new d.Matrix(this).extract(),typeof O=="string"?Q[O]:Q):(Q=new d.Matrix(this),X=!!X||!!O.relative,O.a!=null&&(Q=X?Q.multiply(new d.Matrix(O)):new d.Matrix(O)),this.attr("transform",Q))}}),d.extend(d.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(d.regex.transforms).slice(0,-1).map(function(O){var X=O.trim().split("(");return[X[0],X[1].split(d.regex.delimiter).map(function(Q){return parseFloat(Q)})]}).reduce(function(O,X){return X[0]=="matrix"?O.multiply(re(X[1])):O[X[0]].apply(O,X[1])},new d.Matrix)},toParent:function(O){if(this==O)return this;var X=this.screenCTM(),Q=O.screenCTM().inverse();return this.addTo(O).untransform().transform(Q.multiply(X)),this},toDoc:function(){return this.toParent(this.doc())}}),d.Transformation=d.invent({create:function(O,X){if(arguments.length>1&&typeof X!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(O))for(var Q=0,xe=this.arguments.length;Q<xe;++Q)this[this.arguments[Q]]=O[Q];else if(O&&o(O)==="object")for(Q=0,xe=this.arguments.length;Q<xe;++Q)this[this.arguments[Q]]=O[this.arguments[Q]];this.inversed=!1,X===!0&&(this.inversed=!0)}}),d.Translate=d.invent({parent:d.Matrix,inherit:d.Transformation,create:function(O,X){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),d.extend(d.Element,{style:function(O,X){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(o(O)==="object")for(var Q in O)this.style(Q,O[Q]);else{if(!d.regex.isCss.test(O))return this.node.style[z(O)];for(O=O.split(/\s*;\s*/).filter(function(xe){return!!xe}).map(function(xe){return xe.split(/\s*:\s*/)});X=O.pop();)this.style(X[0],X[1])}else this.node.style[z(O)]=X===null||d.regex.isBlank.test(X)?"":X;return this}}),d.Parent=d.invent({create:function(O){this.constructor.call(this,O)},inherit:d.Element,extend:{children:function(){return d.utils.map(d.utils.filterSVGElements(this.node.childNodes),function(O){return d.adopt(O)})},add:function(O,X){return X==null?this.node.appendChild(O.node):O.node!=this.node.childNodes[X]&&this.node.insertBefore(O.node,this.node.childNodes[X]),this},put:function(O,X){return this.add(O,X),O},has:function(O){return this.index(O)>=0},index:function(O){return[].slice.call(this.node.childNodes).indexOf(O.node)},get:function(O){return d.adopt(this.node.childNodes[O])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(O,X){for(var Q=this.children(),xe=0,ke=Q.length;xe<ke;xe++)Q[xe]instanceof d.Element&&O.apply(Q[xe],[xe,Q]),X&&Q[xe]instanceof d.Container&&Q[xe].each(O,X);return this},removeElement:function(O){return this.node.removeChild(O.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),d.extend(d.Parent,{ungroup:function(O,X){return X===0||this instanceof d.Defs||this.node==d.parser.draw||(O=O||(this instanceof d.Doc?this:this.parent(d.Parent)),X=X||1/0,this.each(function(){return this instanceof d.Defs?this:this instanceof d.Parent?this.ungroup(O,X-1):this.toParent(O)}),this.node.firstChild||this.remove()),this},flatten:function(O,X){return this.ungroup(O,X)}}),d.Container=d.invent({create:function(O){this.constructor.call(this,O)},inherit:d.Parent}),d.ViewBox=d.invent({parent:d.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(O){d.Element.prototype[O]=function(X){return d.on(this.node,O,X),this}}),d.listeners=[],d.handlerMap=[],d.listenerId=0,d.on=function(O,X,Q,xe,ke){var Le=Q.bind(xe||O.instance||O),rt=(d.handlerMap.indexOf(O)+1||d.handlerMap.push(O))-1,Ze=X.split(".")[0],Et=X.split(".")[1]||"*";d.listeners[rt]=d.listeners[rt]||{},d.listeners[rt][Ze]=d.listeners[rt][Ze]||{},d.listeners[rt][Ze][Et]=d.listeners[rt][Ze][Et]||{},Q._svgjsListenerId||(Q._svgjsListenerId=++d.listenerId),d.listeners[rt][Ze][Et][Q._svgjsListenerId]=Le,O.addEventListener(Ze,Le,ke||{passive:!0})},d.off=function(O,X,Q){var xe=d.handlerMap.indexOf(O),ke=X&&X.split(".")[0],Le=X&&X.split(".")[1],rt="";if(xe!=-1)if(Q){if(typeof Q=="function"&&(Q=Q._svgjsListenerId),!Q)return;d.listeners[xe][ke]&&d.listeners[xe][ke][Le||"*"]&&(O.removeEventListener(ke,d.listeners[xe][ke][Le||"*"][Q],!1),delete d.listeners[xe][ke][Le||"*"][Q])}else if(Le&&ke){if(d.listeners[xe][ke]&&d.listeners[xe][ke][Le]){for(var Ze in d.listeners[xe][ke][Le])d.off(O,[ke,Le].join("."),Ze);delete d.listeners[xe][ke][Le]}}else if(Le)for(var Et in d.listeners[xe])for(var rt in d.listeners[xe][Et])Le===rt&&d.off(O,[Et,Le].join("."));else if(ke){if(d.listeners[xe][ke]){for(var rt in d.listeners[xe][ke])d.off(O,[ke,rt].join("."));delete d.listeners[xe][ke]}}else{for(var Et in d.listeners[xe])d.off(O,Et);delete d.listeners[xe],delete d.handlerMap[xe]}},d.extend(d.Element,{on:function(O,X,Q,xe){return d.on(this.node,O,X,Q,xe),this},off:function(O,X){return d.off(this.node,O,X),this},fire:function(O,X){return O instanceof pe.Event?this.node.dispatchEvent(O):this.node.dispatchEvent(O=new d.CustomEvent(O,{detail:X,cancelable:!0})),this._event=O,this},event:function(){return this._event}}),d.Defs=d.invent({create:"defs",inherit:d.Container}),d.G=d.invent({create:"g",inherit:d.Container,extend:{x:function(O){return O==null?this.transform("x"):this.transform({x:O-this.x()},!0)}},construct:{group:function(){return this.put(new d.G)}}}),d.Doc=d.invent({create:function(O){O&&((O=typeof O=="string"?c.getElementById(O):O).nodeName=="svg"?this.constructor.call(this,O):(this.constructor.call(this,d.create("svg")),O.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:d.Container,extend:{namespace:function(){return this.attr({xmlns:d.ns,version:"1.1"}).attr("xmlns:xlink",d.xlink,d.xmlns).attr("xmlns:svgjs",d.svgjs,d.xmlns)},defs:function(){var O;return this._defs||((O=this.node.getElementsByTagName("defs")[0])?this._defs=d.adopt(O):this._defs=new d.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,d.parser.draw&&!d.parser.draw.parentNode&&this.node.appendChild(d.parser.draw),this},clone:function(O){this.writeDataToDom();var X=this.node,Q=ce(X.cloneNode(!0));return O?(O.node||O).appendChild(Q.node):X.parentNode.insertBefore(Q.node,X.nextSibling),Q}}}),d.extend(d.Element,{}),d.Gradient=d.invent({create:function(O){this.constructor.call(this,d.create(O+"Gradient")),this.type=O},inherit:d.Container,extend:{at:function(O,X,Q){return this.put(new d.Stop).update(O,X,Q)},update:function(O){return this.clear(),typeof O=="function"&&O.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(O,X,Q){return O=="transform"&&(O="gradientTransform"),d.Container.prototype.attr.call(this,O,X,Q)}},construct:{gradient:function(O,X){return this.defs().gradient(O,X)}}}),d.extend(d.Gradient,d.FX,{from:function(O,X){return(this._target||this).type=="radial"?this.attr({fx:new d.Number(O),fy:new d.Number(X)}):this.attr({x1:new d.Number(O),y1:new d.Number(X)})},to:function(O,X){return(this._target||this).type=="radial"?this.attr({cx:new d.Number(O),cy:new d.Number(X)}):this.attr({x2:new d.Number(O),y2:new d.Number(X)})}}),d.extend(d.Defs,{gradient:function(O,X){return this.put(new d.Gradient(O)).update(X)}}),d.Stop=d.invent({create:"stop",inherit:d.Element,extend:{update:function(O){return(typeof O=="number"||O instanceof d.Number)&&(O={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),O.opacity!=null&&this.attr("stop-opacity",O.opacity),O.color!=null&&this.attr("stop-color",O.color),O.offset!=null&&this.attr("offset",new d.Number(O.offset)),this}}}),d.Pattern=d.invent({create:"pattern",inherit:d.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(O){return this.clear(),typeof O=="function"&&O.call(this,this),this},toString:function(){return this.fill()},attr:function(O,X,Q){return O=="transform"&&(O="patternTransform"),d.Container.prototype.attr.call(this,O,X,Q)}},construct:{pattern:function(O,X,Q){return this.defs().pattern(O,X,Q)}}}),d.extend(d.Defs,{pattern:function(O,X,Q){return this.put(new d.Pattern).update(Q).attr({x:0,y:0,width:O,height:X,patternUnits:"userSpaceOnUse"})}}),d.Shape=d.invent({create:function(O){this.constructor.call(this,O)},inherit:d.Element}),d.Symbol=d.invent({create:"symbol",inherit:d.Container,construct:{symbol:function(){return this.put(new d.Symbol)}}}),d.Use=d.invent({create:"use",inherit:d.Shape,extend:{element:function(O,X){return this.attr("href",(X||"")+"#"+O,d.xlink)}},construct:{use:function(O,X){return this.put(new d.Use).element(O,X)}}}),d.Rect=d.invent({create:"rect",inherit:d.Shape,construct:{rect:function(O,X){return this.put(new d.Rect).size(O,X)}}}),d.Circle=d.invent({create:"circle",inherit:d.Shape,construct:{circle:function(O){return this.put(new d.Circle).rx(new d.Number(O).divide(2)).move(0,0)}}}),d.extend(d.Circle,d.FX,{rx:function(O){return this.attr("r",O)},ry:function(O){return this.rx(O)}}),d.Ellipse=d.invent({create:"ellipse",inherit:d.Shape,construct:{ellipse:function(O,X){return this.put(new d.Ellipse).size(O,X).move(0,0)}}}),d.extend(d.Ellipse,d.Rect,d.FX,{rx:function(O){return this.attr("rx",O)},ry:function(O){return this.attr("ry",O)}}),d.extend(d.Circle,d.Ellipse,{x:function(O){return O==null?this.cx()-this.rx():this.cx(O+this.rx())},y:function(O){return O==null?this.cy()-this.ry():this.cy(O+this.ry())},cx:function(O){return O==null?this.attr("cx"):this.attr("cx",O)},cy:function(O){return O==null?this.attr("cy"):this.attr("cy",O)},width:function(O){return O==null?2*this.rx():this.rx(new d.Number(O).divide(2))},height:function(O){return O==null?2*this.ry():this.ry(new d.Number(O).divide(2))},size:function(O,X){var Q=B(this,O,X);return this.rx(new d.Number(Q.width).divide(2)).ry(new d.Number(Q.height).divide(2))}}),d.Line=d.invent({create:"line",inherit:d.Shape,extend:{array:function(){return new d.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(O,X,Q,xe){return O==null?this.array():(O=X!==void 0?{x1:O,y1:X,x2:Q,y2:xe}:new d.PointArray(O).toLine(),this.attr(O))},move:function(O,X){return this.attr(this.array().move(O,X).toLine())},size:function(O,X){var Q=B(this,O,X);return this.attr(this.array().size(Q.width,Q.height).toLine())}},construct:{line:function(O,X,Q,xe){return d.Line.prototype.plot.apply(this.put(new d.Line),O!=null?[O,X,Q,xe]:[0,0,0,0])}}}),d.Polyline=d.invent({create:"polyline",inherit:d.Shape,construct:{polyline:function(O){return this.put(new d.Polyline).plot(O||new d.PointArray)}}}),d.Polygon=d.invent({create:"polygon",inherit:d.Shape,construct:{polygon:function(O){return this.put(new d.Polygon).plot(O||new d.PointArray)}}}),d.extend(d.Polyline,d.Polygon,{array:function(){return this._array||(this._array=new d.PointArray(this.attr("points")))},plot:function(O){return O==null?this.array():this.clear().attr("points",typeof O=="string"?O:this._array=new d.PointArray(O))},clear:function(){return delete this._array,this},move:function(O,X){return this.attr("points",this.array().move(O,X))},size:function(O,X){var Q=B(this,O,X);return this.attr("points",this.array().size(Q.width,Q.height))}}),d.extend(d.Line,d.Polyline,d.Polygon,{morphArray:d.PointArray,x:function(O){return O==null?this.bbox().x:this.move(O,this.bbox().y)},y:function(O){return O==null?this.bbox().y:this.move(this.bbox().x,O)},width:function(O){var X=this.bbox();return O==null?X.width:this.size(O,X.height)},height:function(O){var X=this.bbox();return O==null?X.height:this.size(X.width,O)}}),d.Path=d.invent({create:"path",inherit:d.Shape,extend:{morphArray:d.PathArray,array:function(){return this._array||(this._array=new d.PathArray(this.attr("d")))},plot:function(O){return O==null?this.array():this.clear().attr("d",typeof O=="string"?O:this._array=new d.PathArray(O))},clear:function(){return delete this._array,this}},construct:{path:function(O){return this.put(new d.Path).plot(O||new d.PathArray)}}}),d.Image=d.invent({create:"image",inherit:d.Shape,extend:{load:function(O){if(!O)return this;var X=this,Q=new pe.Image;return d.on(Q,"load",function(){d.off(Q);var xe=X.parent(d.Pattern);xe!==null&&(X.width()==0&&X.height()==0&&X.size(Q.width,Q.height),xe&&xe.width()==0&&xe.height()==0&&xe.size(X.width(),X.height()),typeof X._loaded=="function"&&X._loaded.call(X,{width:Q.width,height:Q.height,ratio:Q.width/Q.height,url:O}))}),d.on(Q,"error",function(xe){d.off(Q),typeof X._error=="function"&&X._error.call(X,xe)}),this.attr("href",Q.src=this.src=O,d.xlink)},loaded:function(O){return this._loaded=O,this},error:function(O){return this._error=O,this}},construct:{image:function(O,X,Q){return this.put(new d.Image).load(O).size(X||0,Q||X||0)}}}),d.Text=d.invent({create:function(){this.constructor.call(this,d.create("text")),this.dom.leading=new d.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",d.defaults.attrs["font-family"])},inherit:d.Shape,extend:{x:function(O){return O==null?this.attr("x"):this.attr("x",O)},text:function(O){if(O===void 0){O="";for(var X=this.node.childNodes,Q=0,xe=X.length;Q<xe;++Q)Q!=0&&X[Q].nodeType!=3&&d.adopt(X[Q]).dom.newLined==1&&(O+=`
`),O+=X[Q].textContent;return O}if(this.clear().build(!0),typeof O=="function")O.call(this,this);else{Q=0;for(var ke=(O=O.split(`
`)).length;Q<ke;Q++)this.tspan(O[Q]).newLine()}return this.build(!1).rebuild()},size:function(O){return this.attr("font-size",O).rebuild()},leading:function(O){return O==null?this.dom.leading:(this.dom.leading=new d.Number(O),this.rebuild())},lines:function(){var O=(this.textPath&&this.textPath()||this).node,X=d.utils.map(d.utils.filterSVGElements(O.childNodes),function(Q){return d.adopt(Q)});return new d.Set(X)},rebuild:function(O){if(typeof O=="boolean"&&(this._rebuild=O),this._rebuild){var X=this,Q=0,xe=this.dom.leading*new d.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(X.textPath()||this.attr("x",X.attr("x")),this.text()==`
`?Q+=xe:(this.attr("dy",xe+Q),Q=0))}),this.fire("rebuild")}return this},build:function(O){return this._build=!!O,this},setData:function(O){return this.dom=O,this.dom.leading=new d.Number(O.leading||1.3),this}},construct:{text:function(O){return this.put(new d.Text).text(O)},plain:function(O){return this.put(new d.Text).plain(O)}}}),d.Tspan=d.invent({create:"tspan",inherit:d.Shape,extend:{text:function(O){return O==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof O=="function"?O.call(this,this):this.plain(O),this)},dx:function(O){return this.attr("dx",O)},dy:function(O){return this.attr("dy",O)},newLine:function(){var O=this.parent(d.Text);return this.dom.newLined=!0,this.dy(O.dom.leading*O.attr("font-size")).attr("x",O.x())}}}),d.extend(d.Text,d.Tspan,{plain:function(O){return this._build===!1&&this.clear(),this.node.appendChild(c.createTextNode(O)),this},tspan:function(O){var X=(this.textPath&&this.textPath()||this).node,Q=new d.Tspan;return this._build===!1&&this.clear(),X.appendChild(Q.node),Q.text(O)},clear:function(){for(var O=(this.textPath&&this.textPath()||this).node;O.hasChildNodes();)O.removeChild(O.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),d.TextPath=d.invent({create:"textPath",inherit:d.Parent,parent:d.Text,construct:{morphArray:d.PathArray,array:function(){var O=this.track();return O?O.array():null},plot:function(O){var X=this.track(),Q=null;return X&&(Q=X.plot(O)),O==null?Q:this},track:function(){var O=this.textPath();if(O)return O.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return d.adopt(this.node.firstChild)}}}),d.Nested=d.invent({create:function(){this.constructor.call(this,d.create("svg")),this.style("overflow","visible")},inherit:d.Container,construct:{nested:function(){return this.put(new d.Nested)}}});var T={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(O,X){return X=="color"?O:O+"-"+X}};function M(O,X,Q,xe){return Q+xe.replace(d.regex.dots," .")}function z(O){return O.toLowerCase().replace(/-(.)/g,function(X,Q){return Q.toUpperCase()})}function $(O){return O.charAt(0).toUpperCase()+O.slice(1)}function H(O){var X=O.toString(16);return X.length==1?"0"+X:X}function B(O,X,Q){if(X==null||Q==null){var xe=O.bbox();X==null?X=xe.width/xe.height*Q:Q==null&&(Q=xe.height/xe.width*X)}return{width:X,height:Q}}function ee(O,X,Q){return{x:X*O.a+Q*O.c+0,y:X*O.b+Q*O.d+0}}function re(O){return{a:O[0],b:O[1],c:O[2],d:O[3],e:O[4],f:O[5]}}function ce(O){for(var X=O.childNodes.length-1;X>=0;X--)O.childNodes[X]instanceof pe.SVGElement&&ce(O.childNodes[X]);return d.adopt(O).id(d.eid(O.nodeName))}function ye(O){return Math.abs(O)>1e-37?O:0}["fill","stroke"].forEach(function(O){var X={};X[O]=function(Q){if(Q===void 0)return this;if(typeof Q=="string"||d.Color.isRgb(Q)||Q&&typeof Q.fill=="function")this.attr(O,Q);else for(var xe=T[O].length-1;xe>=0;xe--)Q[T[O][xe]]!=null&&this.attr(T.prefix(O,T[O][xe]),Q[T[O][xe]]);return this},d.extend(d.Element,d.FX,X)}),d.extend(d.Element,d.FX,{translate:function(O,X){return this.transform({x:O,y:X})},matrix:function(O){return this.attr("transform",new d.Matrix(arguments.length==6?[].slice.call(arguments):O))},opacity:function(O){return this.attr("opacity",O)},dx:function(O){return this.x(new d.Number(O).plus(this instanceof d.FX?0:this.x()),!0)},dy:function(O){return this.y(new d.Number(O).plus(this instanceof d.FX?0:this.y()),!0)}}),d.extend(d.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(O){return this.node.getPointAtLength(O)}}),d.Set=d.invent({create:function(O){Array.isArray(O)?this.members=O:this.clear()},extend:{add:function(){for(var O=[].slice.call(arguments),X=0,Q=O.length;X<Q;X++)this.members.push(O[X]);return this},remove:function(O){var X=this.index(O);return X>-1&&this.members.splice(X,1),this},each:function(O){for(var X=0,Q=this.members.length;X<Q;X++)O.apply(this.members[X],[X,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(O){return this.index(O)>=0},index:function(O){return this.members.indexOf(O)},get:function(O){return this.members[O]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(O){return new d.Set(O)}}}),d.FX.Set=d.invent({create:function(O){this.set=O}}),d.Set.inherit=function(){var O=[];for(var X in d.Shape.prototype)typeof d.Shape.prototype[X]=="function"&&typeof d.Set.prototype[X]!="function"&&O.push(X);for(var X in O.forEach(function(xe){d.Set.prototype[xe]=function(){for(var ke=0,Le=this.members.length;ke<Le;ke++)this.members[ke]&&typeof this.members[ke][xe]=="function"&&this.members[ke][xe].apply(this.members[ke],arguments);return xe=="animate"?this.fx||(this.fx=new d.FX.Set(this)):this}}),O=[],d.FX.prototype)typeof d.FX.prototype[X]=="function"&&typeof d.FX.Set.prototype[X]!="function"&&O.push(X);O.forEach(function(Q){d.FX.Set.prototype[Q]=function(){for(var xe=0,ke=this.set.members.length;xe<ke;xe++)this.set.members[xe].fx[Q].apply(this.set.members[xe].fx,arguments);return this}})},d.extend(d.Element,{}),d.extend(d.Element,{remember:function(O,X){if(o(arguments[0])==="object")for(var Q in O)this.remember(Q,O[Q]);else{if(arguments.length==1)return this.memory()[O];this.memory()[O]=X}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var O=arguments.length-1;O>=0;O--)delete this.memory()[arguments[O]];return this},memory:function(){return this._memory||(this._memory={})}}),d.get=function(O){var X=c.getElementById(function(Q){var xe=(Q||"").toString().match(d.regex.reference);if(xe)return xe[1]}(O)||O);return d.adopt(X)},d.select=function(O,X){return new d.Set(d.utils.map((X||c).querySelectorAll(O),function(Q){return d.adopt(Q)}))},d.extend(d.Parent,{select:function(O){return d.select(O,this.node)}});var _e="abcdef".split("");if(typeof pe.CustomEvent!="function"){var Ee=function(O,X){X=X||{bubbles:!1,cancelable:!1,detail:void 0};var Q=c.createEvent("CustomEvent");return Q.initCustomEvent(O,X.bubbles,X.cancelable,X.detail),Q};Ee.prototype=pe.Event.prototype,d.CustomEvent=Ee}else d.CustomEvent=pe.CustomEvent;return d},o(t)==="object"?e.exports=Rr.document?Cn(Rr,Rr.document):function(pe){return Cn(pe,pe.document)}:Rr.SVG=Cn(Rr,Rr.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(S,T){return this.add(S,T),!S.attr("in")&&this.autoSetIn&&S.attr("in",this.source),S.attr("result")||S.attr("result",S),S},blend:function(S,T,M){return this.put(new SVG.BlendEffect(S,T,M))},colorMatrix:function(S,T){return this.put(new SVG.ColorMatrixEffect(S,T))},convolveMatrix:function(S){return this.put(new SVG.ConvolveMatrixEffect(S))},componentTransfer:function(S){return this.put(new SVG.ComponentTransferEffect(S))},composite:function(S,T,M){return this.put(new SVG.CompositeEffect(S,T,M))},flood:function(S,T){return this.put(new SVG.FloodEffect(S,T))},offset:function(S,T){return this.put(new SVG.OffsetEffect(S,T))},image:function(S){return this.put(new SVG.ImageEffect(S))},merge:function(){var S=[void 0];for(var T in arguments)S.push(arguments[T]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,S)))},gaussianBlur:function(S,T){return this.put(new SVG.GaussianBlurEffect(S,T))},morphology:function(S,T){return this.put(new SVG.MorphologyEffect(S,T))},diffuseLighting:function(S,T,M){return this.put(new SVG.DiffuseLightingEffect(S,T,M))},displacementMap:function(S,T,M,z,$){return this.put(new SVG.DisplacementMapEffect(S,T,M,z,$))},specularLighting:function(S,T,M,z){return this.put(new SVG.SpecularLightingEffect(S,T,M,z))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(S,T,M,z,$){return this.put(new SVG.TurbulenceEffect(S,T,M,z,$))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(S){var T=this.put(new SVG.Filter);return typeof S=="function"&&S.call(T,T),T}}),SVG.extend(SVG.Container,{filter:function(S){return this.defs().filter(S)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(S){return this.filterer=S instanceof SVG.Element?S:this.doc().filter(S),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(S){return this.filterer&&S===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(S){return S==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",S)},result:function(S){return S==null?this.attr("result"):this.attr("result",S)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(S){return S==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",S)},result:function(S){return S==null?this.attr("result"):this.attr("result",S)},toString:function(){return this.result()}}});var pe={blend:function(S,T){return this.parent()&&this.parent().blend(this,S,T)},colorMatrix:function(S,T){return this.parent()&&this.parent().colorMatrix(S,T).in(this)},convolveMatrix:function(S){return this.parent()&&this.parent().convolveMatrix(S).in(this)},componentTransfer:function(S){return this.parent()&&this.parent().componentTransfer(S).in(this)},composite:function(S,T){return this.parent()&&this.parent().composite(this,S,T)},flood:function(S,T){return this.parent()&&this.parent().flood(S,T)},offset:function(S,T){return this.parent()&&this.parent().offset(S,T).in(this)},image:function(S){return this.parent()&&this.parent().image(S)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(S,T){return this.parent()&&this.parent().gaussianBlur(S,T).in(this)},morphology:function(S,T){return this.parent()&&this.parent().morphology(S,T).in(this)},diffuseLighting:function(S,T,M){return this.parent()&&this.parent().diffuseLighting(S,T,M).in(this)},displacementMap:function(S,T,M,z){return this.parent()&&this.parent().displacementMap(this,S,T,M,z)},specularLighting:function(S,T,M,z){return this.parent()&&this.parent().specularLighting(S,T,M,z).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(S,T,M,z,$){return this.parent()&&this.parent().turbulence(S,T,M,z,$).in(this)}};SVG.extend(SVG.Effect,pe),SVG.extend(SVG.ParentEffect,pe),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(S){this.attr("in",S)}}});var c={blend:function(S,T,M){this.attr({in:S,in2:T,mode:M||"normal"})},colorMatrix:function(S,T){S=="matrix"&&(T=v(T)),this.attr({type:S,values:T===void 0?null:T})},convolveMatrix:function(S){S=v(S),this.attr({order:Math.sqrt(S.split(" ").length),kernelMatrix:S})},composite:function(S,T,M){this.attr({in:S,in2:T,operator:M})},flood:function(S,T){this.attr("flood-color",S),T!=null&&this.attr("flood-opacity",T)},offset:function(S,T){this.attr({dx:S,dy:T})},image:function(S){this.attr("href",S,SVG.xlink)},displacementMap:function(S,T,M,z,$){this.attr({in:S,in2:T,scale:M,xChannelSelector:z,yChannelSelector:$})},gaussianBlur:function(S,T){S!=null||T!=null?this.attr("stdDeviation",function(M){if(!Array.isArray(M))return M;for(var z=0,$=M.length,H=[];z<$;z++)H.push(M[z]);return H.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(S,T){this.attr({operator:S,radius:T})},tile:function(){},turbulence:function(S,T,M,z,$){this.attr({numOctaves:T,seed:M,stitchTiles:z,baseFrequency:S,type:$})}},d={merge:function(){var S;if(arguments[0]instanceof SVG.Set){var T=this;arguments[0].each(function(z){this instanceof SVG.MergeNode?T.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&T.put(new SVG.MergeNode(this))})}else{S=Array.isArray(arguments[0])?arguments[0]:arguments;for(var M=0;M<S.length;M++)S[M]instanceof SVG.MergeNode?this.put(S[M]):this.put(new SVG.MergeNode(S[M]))}},componentTransfer:function(S){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(M){this[M]=new SVG["Func"+M.toUpperCase()]("identity"),this.rgb.add(this[M]),this.node.appendChild(this[M].node)}).bind(this)),S)for(var T in S.rgb&&(["r","g","b"].forEach((function(M){this[M].attr(S.rgb)}).bind(this)),delete S.rgb),S)this[T].attr(S[T])},diffuseLighting:function(S,T,M){this.attr({surfaceScale:S,diffuseConstant:T,kernelUnitLength:M})},specularLighting:function(S,T,M,z){this.attr({surfaceScale:S,diffuseConstant:T,specularExponent:M,kernelUnitLength:z})}},m={distantLight:function(S,T){this.attr({azimuth:S,elevation:T})},pointLight:function(S,T,M){this.attr({x:S,y:T,z:M})},spotLight:function(S,T,M,z,$,H){this.attr({x:S,y:T,z:M,pointsAtX:z,pointsAtY:$,pointsAtZ:H})},mergeNode:function(S){this.attr("in",S)}};function v(S){return Array.isArray(S)&&(S=new SVG.Array(S)),S.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function b(){var S=function(){};for(var T in typeof arguments[arguments.length-1]=="function"&&(S=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var M in arguments[T])S(arguments[T][M],M,arguments[T])}["r","g","b","a"].forEach(function(S){m["Func"+S.toUpperCase()]=function(T){switch(this.attr("type",T),T){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),b(c,function(S,T){var M=T.charAt(0).toUpperCase()+T.slice(1);SVG[M+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),S.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),b(d,function(S,T){var M=T.charAt(0).toUpperCase()+T.slice(1);SVG[M+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),S.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),b(m,function(S,T){var M=T.charAt(0).toUpperCase()+T.slice(1);SVG[M]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+M)),S.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(S){return S instanceof SVG.MergeNode?this.add(S,0):this.add(new SVG.MergeNode(S),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(S){return S==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",S)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function pe(b,S,T,M,z,$,H){for(var B=b.slice(S,T||H),ee=M.slice(z,$||H),re=0,ce={pos:[0,0],start:[0,0]},ye={pos:[0,0],start:[0,0]};B[re]=c.call(ce,B[re]),ee[re]=c.call(ye,ee[re]),B[re][0]!=ee[re][0]||B[re][0]=="M"||B[re][0]=="A"&&(B[re][4]!=ee[re][4]||B[re][5]!=ee[re][5])?(Array.prototype.splice.apply(B,[re,1].concat(m.call(ce,B[re]))),Array.prototype.splice.apply(ee,[re,1].concat(m.call(ye,ee[re])))):(B[re]=d.call(ce,B[re]),ee[re]=d.call(ye,ee[re])),!(++re==B.length&&re==ee.length);)re==B.length&&B.push(["C",ce.pos[0],ce.pos[1],ce.pos[0],ce.pos[1],ce.pos[0],ce.pos[1]]),re==ee.length&&ee.push(["C",ye.pos[0],ye.pos[1],ye.pos[0],ye.pos[1],ye.pos[0],ye.pos[1]]);return{start:B,dest:ee}}function c(b){switch(b[0]){case"z":case"Z":b[0]="L",b[1]=this.start[0],b[2]=this.start[1];break;case"H":b[0]="L",b[2]=this.pos[1];break;case"V":b[0]="L",b[2]=b[1],b[1]=this.pos[0];break;case"T":b[0]="Q",b[3]=b[1],b[4]=b[2],b[1]=this.reflection[1],b[2]=this.reflection[0];break;case"S":b[0]="C",b[6]=b[4],b[5]=b[3],b[4]=b[2],b[3]=b[1],b[2]=this.reflection[1],b[1]=this.reflection[0]}return b}function d(b){var S=b.length;return this.pos=[b[S-2],b[S-1]],"SCQT".indexOf(b[0])!=-1&&(this.reflection=[2*this.pos[0]-b[S-4],2*this.pos[1]-b[S-3]]),b}function m(b){var S=[b];switch(b[0]){case"M":return this.pos=this.start=[b[1],b[2]],S;case"L":b[5]=b[3]=b[1],b[6]=b[4]=b[2],b[1]=this.pos[0],b[2]=this.pos[1];break;case"Q":b[6]=b[4],b[5]=b[3],b[4]=1*b[4]/3+2*b[2]/3,b[3]=1*b[3]/3+2*b[1]/3,b[2]=1*this.pos[1]/3+2*b[2]/3,b[1]=1*this.pos[0]/3+2*b[1]/3;break;case"A":S=function(T,M){var z,$,H,B,ee,re,ce,ye,_e,Ee,O,X,Q,xe,ke,Le,rt,Ze,Et,Bt,Nt,hr,ar,Jr,tn,pn,bn=Math.abs(M[1]),Pn=Math.abs(M[2]),Jn=M[3]%360,it=M[4],Rt=M[5],nr=M[6],Yr=M[7],Or=new SVG.Point(T),$r=new SVG.Point(nr,Yr),ri=[];if(bn===0||Pn===0||Or.x===$r.x&&Or.y===$r.y)return[["C",Or.x,Or.y,$r.x,$r.y,$r.x,$r.y]];for(z=new SVG.Point((Or.x-$r.x)/2,(Or.y-$r.y)/2).transform(new SVG.Matrix().rotate(Jn)),($=z.x*z.x/(bn*bn)+z.y*z.y/(Pn*Pn))>1&&(bn*=$=Math.sqrt($),Pn*=$),H=new SVG.Matrix().rotate(Jn).scale(1/bn,1/Pn).rotate(-Jn),Or=Or.transform(H),$r=$r.transform(H),B=[$r.x-Or.x,$r.y-Or.y],re=B[0]*B[0]+B[1]*B[1],ee=Math.sqrt(re),B[0]/=ee,B[1]/=ee,ce=re<4?Math.sqrt(1-re/4):0,it===Rt&&(ce*=-1),ye=new SVG.Point(($r.x+Or.x)/2+ce*-B[1],($r.y+Or.y)/2+ce*B[0]),_e=new SVG.Point(Or.x-ye.x,Or.y-ye.y),Ee=new SVG.Point($r.x-ye.x,$r.y-ye.y),O=Math.acos(_e.x/Math.sqrt(_e.x*_e.x+_e.y*_e.y)),_e.y<0&&(O*=-1),X=Math.acos(Ee.x/Math.sqrt(Ee.x*Ee.x+Ee.y*Ee.y)),Ee.y<0&&(X*=-1),Rt&&O>X&&(X+=2*Math.PI),!Rt&&O<X&&(X-=2*Math.PI),xe=Math.ceil(2*Math.abs(O-X)/Math.PI),Le=[],rt=O,Q=(X-O)/xe,ke=4*Math.tan(Q/4)/3,Nt=0;Nt<=xe;Nt++)Et=Math.cos(rt),Ze=Math.sin(rt),Bt=new SVG.Point(ye.x+Et,ye.y+Ze),Le[Nt]=[new SVG.Point(Bt.x+ke*Ze,Bt.y-ke*Et),Bt,new SVG.Point(Bt.x-ke*Ze,Bt.y+ke*Et)],rt+=Q;for(Le[0][0]=Le[0][1].clone(),Le[Le.length-1][2]=Le[Le.length-1][1].clone(),H=new SVG.Matrix().rotate(Jn).scale(bn,Pn).rotate(-Jn),Nt=0,hr=Le.length;Nt<hr;Nt++)Le[Nt][0]=Le[Nt][0].transform(H),Le[Nt][1]=Le[Nt][1].transform(H),Le[Nt][2]=Le[Nt][2].transform(H);for(Nt=1,hr=Le.length;Nt<hr;Nt++)ar=(Bt=Le[Nt-1][2]).x,Jr=Bt.y,tn=(Bt=Le[Nt][0]).x,pn=Bt.y,nr=(Bt=Le[Nt][1]).x,Yr=Bt.y,ri.push(["C",ar,Jr,tn,pn,nr,Yr]);return ri}(this.pos,b),b=S[0]}return b[0]="C",this.pos=[b[5],b[6]],this.reflection=[2*b[5]-b[3],2*b[6]-b[4]],S}function v(b,S){if(S===!1)return!1;for(var T=S,M=b.length;T<M;++T)if(b[T][0]=="M")return T;return!1}SVG.extend(SVG.PathArray,{morph:function(b){for(var S=this.value,T=this.parse(b),M=0,z=0,$=!1,H=!1;M!==!1||z!==!1;){var B;$=v(S,M!==!1&&M+1),H=v(T,z!==!1&&z+1),M===!1&&(M=(B=new SVG.PathArray(ee.start).bbox()).height==0||B.width==0?S.push(S[0])-1:S.push(["M",B.x+B.width/2,B.y+B.height/2])-1),z===!1&&(z=(B=new SVG.PathArray(ee.dest).bbox()).height==0||B.width==0?T.push(T[0])-1:T.push(["M",B.x+B.width/2,B.y+B.height/2])-1);var ee=pe(S,M,$,T,z,H);S=S.slice(0,M).concat(ee.start,$===!1?[]:S.slice($)),T=T.slice(0,z).concat(ee.dest,H===!1?[]:T.slice(H)),M=$!==!1&&M+ee.start.length,z=H!==!1&&z+ee.dest.length}return this.value=S,this.destination=new SVG.PathArray,this.destination.value=T,this}})}(),(function(){function pe(c){c.remember("_draggable",this),this.el=c}pe.prototype.init=function(c,d){var m=this;this.constraint=c,this.value=d,this.el.on("mousedown.drag",function(v){m.start(v)}),this.el.on("touchstart.drag",function(v){m.start(v)})},pe.prototype.transformPoint=function(c,d){var m=(c=c||window.event).changedTouches&&c.changedTouches[0]||c;return this.p.x=m.clientX-(d||0),this.p.y=m.clientY,this.p.matrixTransform(this.m)},pe.prototype.getBBox=function(){var c=this.el.bbox();return this.el instanceof SVG.Nested&&(c=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(c.x=this.el.x(),c.y=this.el.y()),c},pe.prototype.start=function(c){if(c.type!="click"&&c.type!="mousedown"&&c.type!="mousemove"||(c.which||c.buttons)==1){var d=this;if(this.el.fire("beforedrag",{event:c,handler:this}),!this.el.event().defaultPrevented){c.preventDefault(),c.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var m,v=this.getBBox();if(this.el instanceof SVG.Text)switch(m=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":m/=2;break;case"start":m=0}this.startPoints={point:this.transformPoint(c,m),box:v,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(b){d.drag(b)}),SVG.on(window,"touchmove.drag",function(b){d.drag(b)}),SVG.on(window,"mouseup.drag",function(b){d.end(b)}),SVG.on(window,"touchend.drag",function(b){d.end(b)}),this.el.fire("dragstart",{event:c,p:this.startPoints.point,m:this.m,handler:this})}}},pe.prototype.drag=function(c){var d=this.getBBox(),m=this.transformPoint(c),v=this.startPoints.box.x+m.x-this.startPoints.point.x,b=this.startPoints.box.y+m.y-this.startPoints.point.y,S=this.constraint,T=m.x-this.startPoints.point.x,M=m.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:c,p:m,m:this.m,handler:this}),this.el.event().defaultPrevented)return m;if(typeof S=="function"){var z=S.call(this.el,v,b,this.m);typeof z=="boolean"&&(z={x:z,y:z}),z.x===!0?this.el.x(v):z.x!==!1&&this.el.x(z.x),z.y===!0?this.el.y(b):z.y!==!1&&this.el.y(z.y)}else typeof S=="object"&&(S.minX!=null&&v<S.minX?T=(v=S.minX)-this.startPoints.box.x:S.maxX!=null&&v>S.maxX-d.width&&(T=(v=S.maxX-d.width)-this.startPoints.box.x),S.minY!=null&&b<S.minY?M=(b=S.minY)-this.startPoints.box.y:S.maxY!=null&&b>S.maxY-d.height&&(M=(b=S.maxY-d.height)-this.startPoints.box.y),S.snapToGrid!=null&&(v-=v%S.snapToGrid,b-=b%S.snapToGrid,T-=T%S.snapToGrid,M-=M%S.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:T,y:M},!0):this.el.move(v,b));return m},pe.prototype.end=function(c){var d=this.drag(c);this.el.fire("dragend",{event:c,p:d,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(c,d){typeof c!="function"&&typeof c!="object"||(d=c,c=!0);var m=this.remember("_draggable")||new pe(this);return(c=c===void 0||c)?m.init(d||{},c):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function pe(c){this.el=c,c.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(d,m,v){var b=typeof d!="string"?d:m[d];return v?b/2:b},this.pointCoords=function(d,m){var v=this.pointsList[d];return{x:this.pointCoord(v[0],m,d==="t"||d==="b"),y:this.pointCoord(v[1],m,d==="r"||d==="l")}}}pe.prototype.init=function(c,d){var m=this.el.bbox();this.options={};var v=this.el.selectize.defaults.points;for(var b in this.el.selectize.defaults)this.options[b]=this.el.selectize.defaults[b],d[b]!==void 0&&(this.options[b]=d[b]);var S=["points","pointsExclude"];for(var b in S){var T=this.options[S[b]];typeof T=="string"?T=T.length>0?T.split(/\s*,\s*/i):[]:typeof T=="boolean"&&S[b]==="points"&&(T=T?v:[]),this.options[S[b]]=T}this.options.points=[v,this.options.points].reduce(function(M,z){return M.filter(function($){return z.indexOf($)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(M,z){return M.filter(function($){return z.indexOf($)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(m.x,m.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(c):this.selectRect(c),this.observe(),this.cleanup()},pe.prototype.selectPoints=function(c){return this.pointSelection.isSelected=c,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},pe.prototype.getPointArray=function(){var c=this.el.bbox();return this.el.array().valueOf().map(function(d){return[d[0]-c.x,d[1]-c.y]})},pe.prototype.drawPoints=function(){for(var c=this,d=this.getPointArray(),m=0,v=d.length;m<v;++m){var b=function(T){return function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation();var z=M.pageX||M.touches[0].pageX,$=M.pageY||M.touches[0].pageY;c.el.fire("point",{x:z,y:$,i:T,event:M})}}(m),S=this.drawPoint(d[m][0],d[m][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",b).on("mousedown",b);this.pointSelection.set.add(S)}},pe.prototype.drawPoint=function(c,d){var m=this.options.pointType;switch(m){case"circle":return this.drawCircle(c,d);case"rect":return this.drawRect(c,d);default:if(typeof m=="function")return m.call(this,c,d);throw new Error("Unknown "+m+" point type!")}},pe.prototype.drawCircle=function(c,d){return this.nested.circle(this.options.pointSize).center(c,d)},pe.prototype.drawRect=function(c,d){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(c,d)},pe.prototype.updatePointSelection=function(){var c=this.getPointArray();this.pointSelection.set.each(function(d){this.cx()===c[d][0]&&this.cy()===c[d][1]||this.center(c[d][0],c[d][1])})},pe.prototype.updateRectSelection=function(){var c=this,d=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:d.width,height:d.height}),this.options.points.length&&this.options.points.map(function(v,b){var S=c.pointCoords(v,d);c.rectSelection.set.get(b+1).center(S.x,S.y)}),this.options.rotationPoint){var m=this.rectSelection.set.length();this.rectSelection.set.get(m-1).center(d.width/2,20)}},pe.prototype.selectRect=function(c){var d=this,m=this.el.bbox();function v(T){return function(M){(M=M||window.event).preventDefault?M.preventDefault():M.returnValue=!1,M.stopPropagation();var z=M.pageX||M.touches[0].pageX,$=M.pageY||M.touches[0].pageY;d.el.fire(T,{x:z,y:$,event:M})}}if(this.rectSelection.isSelected=c,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(m.width,m.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(T,M){var z=d.pointCoords(T,m),$=d.drawPoint(z.x,z.y).attr("class",d.options.classPoints+"_"+T).on("mousedown",v(T)).on("touchstart",v(T));d.rectSelection.set.add($)}),this.rectSelection.set.each(function(){this.addClass(d.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var b=function(T){(T=T||window.event).preventDefault?T.preventDefault():T.returnValue=!1,T.stopPropagation();var M=T.pageX||T.touches[0].pageX,z=T.pageY||T.touches[0].pageY;d.el.fire("rot",{x:M,y:z,event:T})},S=this.drawPoint(m.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",b).on("mousedown",b);this.rectSelection.set.add(S)}},pe.prototype.handler=function(){var c=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(c.x,c.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},pe.prototype.observe=function(){var c=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){c.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){c.handler()})},pe.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(c,d){return typeof c=="object"&&(d=c,c=!0),(this.remember("_selectHandler")||new pe(this)).init(c===void 0||c,d||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function pe(c){c.remember("_resizeHandler",this),this.el=c,this.parameters={},this.lastUpdateCall=null,this.p=c.doc().node.createSVGPoint()}pe.prototype.transformPoint=function(c,d,m){return this.p.x=c-(this.offset.x-window.pageXOffset),this.p.y=d-(this.offset.y-window.pageYOffset),this.p.matrixTransform(m||this.m)},pe.prototype._extractPosition=function(c){return{x:c.clientX!=null?c.clientX:c.touches[0].clientX,y:c.clientY!=null?c.clientY:c.touches[0].clientY}},pe.prototype.init=function(c){var d=this;if(this.stop(),c!=="stop"){for(var m in this.options={},this.el.resize.defaults)this.options[m]=this.el.resize.defaults[m],c[m]!==void 0&&(this.options[m]=c[m]);this.el.on("lt.resize",function(v){d.resize(v||window.event)}),this.el.on("rt.resize",function(v){d.resize(v||window.event)}),this.el.on("rb.resize",function(v){d.resize(v||window.event)}),this.el.on("lb.resize",function(v){d.resize(v||window.event)}),this.el.on("t.resize",function(v){d.resize(v||window.event)}),this.el.on("r.resize",function(v){d.resize(v||window.event)}),this.el.on("b.resize",function(v){d.resize(v||window.event)}),this.el.on("l.resize",function(v){d.resize(v||window.event)}),this.el.on("rot.resize",function(v){d.resize(v||window.event)}),this.el.on("point.resize",function(v){d.resize(v||window.event)}),this.update()}},pe.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},pe.prototype.resize=function(c){var d=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var m=this._extractPosition(c.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(m.x,m.y),x:c.detail.x,y:c.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),c.detail.i!==void 0){var v=this.el.array().valueOf();this.parameters.i=c.detail.i,this.parameters.pointCoords=[v[c.detail.i][0],v[c.detail.i][1]]}switch(c.type){case"lt":this.calc=function(b,S){var T=this.snapToGrid(b,S);if(this.parameters.box.width-T[0]>0&&this.parameters.box.height-T[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+T[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-T[0]);T=this.checkAspectRatio(T),this.el.move(this.parameters.box.x+T[0],this.parameters.box.y+T[1]).size(this.parameters.box.width-T[0],this.parameters.box.height-T[1])}};break;case"rt":this.calc=function(b,S){var T=this.snapToGrid(b,S,2);if(this.parameters.box.width+T[0]>0&&this.parameters.box.height-T[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-T[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+T[0]);T=this.checkAspectRatio(T,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+T[1]).size(this.parameters.box.width+T[0],this.parameters.box.height-T[1])}};break;case"rb":this.calc=function(b,S){var T=this.snapToGrid(b,S,0);if(this.parameters.box.width+T[0]>0&&this.parameters.box.height+T[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-T[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+T[0]);T=this.checkAspectRatio(T),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+T[0],this.parameters.box.height+T[1])}};break;case"lb":this.calc=function(b,S){var T=this.snapToGrid(b,S,1);if(this.parameters.box.width-T[0]>0&&this.parameters.box.height+T[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+T[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-T[0]);T=this.checkAspectRatio(T,!0),this.el.move(this.parameters.box.x+T[0],this.parameters.box.y).size(this.parameters.box.width-T[0],this.parameters.box.height+T[1])}};break;case"t":this.calc=function(b,S){var T=this.snapToGrid(b,S,2);if(this.parameters.box.height-T[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+T[1]).height(this.parameters.box.height-T[1])}};break;case"r":this.calc=function(b,S){var T=this.snapToGrid(b,S,0);if(this.parameters.box.width+T[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+T[0])}};break;case"b":this.calc=function(b,S){var T=this.snapToGrid(b,S,0);if(this.parameters.box.height+T[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+T[1])}};break;case"l":this.calc=function(b,S){var T=this.snapToGrid(b,S,1);if(this.parameters.box.width-T[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+T[0],this.parameters.box.y).width(this.parameters.box.width-T[0])}};break;case"rot":this.calc=function(b,S){var T=b+this.parameters.p.x,M=S+this.parameters.p.y,z=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),$=Math.atan2(M-this.parameters.box.y-this.parameters.box.height/2,T-this.parameters.box.x-this.parameters.box.width/2),H=this.parameters.rotation+180*($-z)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(H-H%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(b,S){var T=this.snapToGrid(b,S,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),M=this.el.array().valueOf();M[this.parameters.i][0]=this.parameters.pointCoords[0]+T[0],M[this.parameters.i][1]=this.parameters.pointCoords[1]+T[1],this.el.plot(M)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:c}),SVG.on(window,"touchmove.resize",function(b){d.update(b||window.event)}),SVG.on(window,"touchend.resize",function(){d.done()}),SVG.on(window,"mousemove.resize",function(b){d.update(b||window.event)}),SVG.on(window,"mouseup.resize",function(){d.done()})},pe.prototype.update=function(c){if(c){var d=this._extractPosition(c),m=this.transformPoint(d.x,d.y),v=m.x-this.parameters.p.x,b=m.y-this.parameters.p.y;this.lastUpdateCall=[v,b],this.calc(v,b),this.el.fire("resizing",{dx:v,dy:b,event:c})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},pe.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},pe.prototype.snapToGrid=function(c,d,m,v){var b;return v!==void 0?b=[(m+c)%this.options.snapToGrid,(v+d)%this.options.snapToGrid]:(m=m??3,b=[(this.parameters.box.x+c+(1&m?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+d+(2&m?0:this.parameters.box.height))%this.options.snapToGrid]),c<0&&(b[0]-=this.options.snapToGrid),d<0&&(b[1]-=this.options.snapToGrid),c-=Math.abs(b[0])<this.options.snapToGrid/2?b[0]:b[0]-(c<0?-this.options.snapToGrid:this.options.snapToGrid),d-=Math.abs(b[1])<this.options.snapToGrid/2?b[1]:b[1]-(d<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(c,d,m,v)},pe.prototype.constraintToBox=function(c,d,m,v){var b,S,T=this.options.constraint||{};return v!==void 0?(b=m,S=v):(b=this.parameters.box.x+(1&m?0:this.parameters.box.width),S=this.parameters.box.y+(2&m?0:this.parameters.box.height)),T.minX!==void 0&&b+c<T.minX&&(c=T.minX-b),T.maxX!==void 0&&b+c>T.maxX&&(c=T.maxX-b),T.minY!==void 0&&S+d<T.minY&&(d=T.minY-S),T.maxY!==void 0&&S+d>T.maxY&&(d=T.maxY-S),[c,d]},pe.prototype.checkAspectRatio=function(c,d){if(!this.options.saveAspectRatio)return c;var m=c.slice(),v=this.parameters.box.width/this.parameters.box.height,b=this.parameters.box.width+c[0],S=this.parameters.box.height-c[1],T=b/S;return T<v?(m[1]=b/v-this.parameters.box.height,d&&(m[1]=-m[1])):T>v&&(m[0]=this.parameters.box.width-S*v,d&&(m[0]=-m[0])),m},SVG.extend(SVG.Element,{resize:function(c){return(this.remember("_resizeHandler")||new pe(this)).init(c||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),window.Apex===void 0&&(window.Apex={});var Yn=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new K(this.ctx),this.ctx.axes=new Zi(this.ctx),this.ctx.core=new Ni(this.ctx.el,this.ctx),this.ctx.config=new Xt({}),this.ctx.data=new ur(this.ctx),this.ctx.grid=new mr(this.ctx),this.ctx.graphics=new de(this.ctx),this.ctx.coreUtils=new Ae(this.ctx),this.ctx.crosshairs=new Kr(this.ctx),this.ctx.events=new on(this.ctx),this.ctx.exports=new fr(this.ctx),this.ctx.localization=new Gr(this.ctx),this.ctx.options=new Fe,this.ctx.responsive=new En(this.ctx),this.ctx.series=new Dt(this.ctx),this.ctx.theme=new wi(this.ctx),this.ctx.formatters=new Pt(this.ctx),this.ctx.titleSubtitle=new Hi(this.ctx),this.ctx.legend=new Xr(this.ctx),this.ctx.toolbar=new Hn(this.ctx),this.ctx.tooltip=new is(this.ctx),this.ctx.dimensions=new Zt(this.ctx),this.ctx.updateHelpers=new Wn(this.ctx),this.ctx.zoomPanSelection=new ti(this.ctx),this.ctx.w.globals.tooltip=new is(this.ctx)}}]),pe}(),zs=function(){function pe(c){f(this,pe),this.ctx=c,this.w=c.w}return s(pe,[{key:"clear",value:function(c){var d=c.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:d})}},{key:"killSVG",value:function(c){c.each(function(d,m){this.removeClass("*"),this.off(),this.stop()},!0),c.ungroup(),c.clear()}},{key:"clearDomElements",value:function(c){var d=this,m=c.isUpdating,v=this.w.globals.dom.Paper.node;v.parentNode&&v.parentNode.parentNode&&!m&&(v.parentNode.parentNode.style.minHeight="unset");var b=this.w.globals.dom.baseEl;b&&this.ctx.eventList.forEach(function(T){b.removeEventListener(T,d.ctx.events.documentEvent)});var S=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(S.Paper),S.Paper.remove(),S.elWrap=null,S.elGraphical=null,S.elLegendWrap=null,S.elLegendForeign=null,S.baseEl=null,S.elGridRect=null,S.elGridRectMask=null,S.elGridRectMarkerMask=null,S.elForecastMask=null,S.elNonForecastMask=null,S.elDefs=null}}]),pe}(),Ys=new WeakMap,hs=function(){function pe(c,d){f(this,pe),this.opts=d,this.ctx=this,this.w=new Ot(d).init(),this.el=c,this.w.globals.cuid=W.randomId(),this.w.globals.chartID=this.w.config.chart.id?W.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Yn(this).initModules(),this.create=W.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return s(pe,[{key:"render",value:function(){var c=this;return new Promise(function(d,m){if(c.el!==null){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),c.w.config.chart.id&&Apex._chartInstances.push({id:c.w.globals.chartID,group:c.w.config.chart.group,chart:c}),c.setLocale(c.w.config.chart.defaultLocale);var v=c.w.config.chart.events.beforeMount;if(typeof v=="function"&&v(c,c.w),c.events.fireEvent("beforeMount",[c,c.w]),window.addEventListener("resize",c.windowResizeHandler),function($,H){var B=!1;if($.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var ee=$.getBoundingClientRect();$.style.display!=="none"&&ee.width!==0||(B=!0)}var re=new ResizeObserver(function(ce){B&&H.call($,ce),B=!0});$.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from($.children).forEach(function(ce){return re.observe(ce)}):re.observe($),Ys.set(H,re)}(c.el.parentNode,c.parentResizeHandler),!c.css){var b=c.el.getRootNode&&c.el.getRootNode(),S=W.is("ShadowRoot",b),T=c.el.ownerDocument,M=T.getElementById("apexcharts-css");!S&&M||(c.css=document.createElement("style"),c.css.id="apexcharts-css",c.css.textContent=`@keyframes opaque {
  0% {
      opacity: 0
  }

  to {
      opacity: 1
  }
}

@keyframes resizeanim {
  0%,to {
      opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0,0,0,.5);
  box-shadow: 0 0 1px rgba(255,255,255,.5);
  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

.legend-mouseover-inactive {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255,255,255,.96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30,30,30,.8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0,0,0,.7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-series-group-hidden {
  opacity: 0;
  height: 0;
  line-height: 0;
  padding: 0!important
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0,0,0,.7);
  border: 1px solid rgba(0,0,0,.5);
  color: #fff
}

.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0,0,0,.5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0,0,0,.5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0,0,0,.7);
  border: 1px solid rgba(0,0,0,.5);
  color: #fff
}

.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0,0,0,.5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0,0,0,.5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_boundingRect,.svg_select_points_rot {
  pointer-events: none;
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {
  cursor: ew-resize;
  opacity: 1;
  visibility: visible
}

.svg_select_points {
  fill: #efefef;
  stroke: #333;
  rx: 2
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0,0,0,.7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
      opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {
  opacity: 0
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}
.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {
  pointer-events: none
}

.apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,.resize-triggers,.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers{
  pointer-events: none
}

.apexcharts-bar-shadows{
  pointer-events: none
}

.apexcharts-rangebar-goals-markers{
  pointer-events: none
}`,S?b.prepend(c.css):T.head.appendChild(c.css))}var z=c.create(c.w.config.series,{});if(!z)return d(c);c.mount(z).then(function(){typeof c.w.config.chart.events.mounted=="function"&&c.w.config.chart.events.mounted(c,c.w),c.events.fireEvent("mounted",[c,c.w]),d(z)}).catch(function($){m($)})}else m(new Error("Element not found"))})}},{key:"create",value:function(c,d){var m=this.w;new Yn(this).initModules();var v=this.w.globals;if(v.noData=!1,v.animationEnded=!1,this.responsive.checkResponsiveConfig(d),m.config.xaxis.convertedCatToNumeric&&new mt(m.config).convertCatToNumericXaxis(m.config,this.ctx),this.el===null||(this.core.setupElements(),m.config.chart.type==="treemap"&&(m.config.grid.show=!1,m.config.yaxis[0].show=!1),v.svgWidth===0))return v.animationEnded=!0,null;var b=Ae.checkComboSeries(c);v.comboCharts=b.comboCharts,v.comboBarCount=b.comboBarCount;var S=c.every(function($){return $.data&&$.data.length===0});(c.length===0||S)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(c),this.theme.init(),new Vt(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),v.noData&&v.collapsedSeries.length!==v.series.length&&!m.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),v.axisCharts&&(this.core.coreCalculations(),m.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=m.globals.minX,this.ctx.toolbar.maxX=m.globals.maxX),this.formatters.heatmapLabelFormatters(),new Ae(this).getLargestMarkerSize(),this.dimensions.plotCoords();var T=this.core.xySettings();this.grid.createGridMask();var M=this.core.plotChartType(c,T),z=new vt(this);return z.bringForward(),m.config.dataLabels.background.enabled&&z.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:M,xyRatios:T,dimensions:{plot:{left:m.globals.translateX,top:m.globals.translateY,width:m.globals.gridWidth,height:m.globals.gridHeight}}}}},{key:"mount",value:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,m=this,v=m.w;return new Promise(function(b,S){if(m.el===null)return S(new Error("Not enough data to display or target element not found"));(d===null||v.globals.allSeriesCollapsed)&&m.series.handleNoData(),m.grid=new mr(m);var T,M,z=m.grid.drawGrid();if(m.annotations=new Ye(m),m.annotations.drawImageAnnos(),m.annotations.drawTextAnnos(),v.config.grid.position==="back"&&(z&&v.globals.dom.elGraphical.add(z.el),z!=null&&(T=z.elGridBorders)!==null&&T!==void 0&&T.node&&v.globals.dom.elGraphical.add(z.elGridBorders)),Array.isArray(d.elGraph))for(var $=0;$<d.elGraph.length;$++)v.globals.dom.elGraphical.add(d.elGraph[$]);else v.globals.dom.elGraphical.add(d.elGraph);v.config.grid.position==="front"&&(z&&v.globals.dom.elGraphical.add(z.el),z!=null&&(M=z.elGridBorders)!==null&&M!==void 0&&M.node&&v.globals.dom.elGraphical.add(z.elGridBorders)),v.config.xaxis.crosshairs.position==="front"&&m.crosshairs.drawXCrosshairs(),v.config.yaxis[0].crosshairs.position==="front"&&m.crosshairs.drawYCrosshairs(),v.config.chart.type!=="treemap"&&m.axes.drawAxis(v.config.chart.type,z);var H=new Cr(c.ctx,z),B=new Sn(c.ctx,z);if(z!==null&&(H.xAxisLabelCorrections(z.xAxisTickWidth),B.setYAxisTextAlignments(),v.config.yaxis.map(function(re,ce){v.globals.ignoreYAxisIndexes.indexOf(ce)===-1&&B.yAxisTitleRotate(ce,re.opposite)})),m.annotations.drawAxesAnnotations(),!v.globals.noData){if(v.config.tooltip.enabled&&!v.globals.noData&&m.w.globals.tooltip.drawTooltip(d.xyRatios),v.globals.axisCharts&&(v.globals.isXNumeric||v.config.xaxis.convertedCatToNumeric||v.globals.isRangeBar))(v.config.chart.zoom.enabled||v.config.chart.selection&&v.config.chart.selection.enabled||v.config.chart.pan&&v.config.chart.pan.enabled)&&m.zoomPanSelection.init({xyRatios:d.xyRatios});else{var ee=v.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(re){ee[re]=!1})}v.config.chart.toolbar.show&&!v.globals.allSeriesCollapsed&&m.toolbar.createToolbar()}v.globals.memory.methodsToExec.length>0&&v.globals.memory.methodsToExec.forEach(function(re){re.method(re.params,!1,re.context)}),v.globals.axisCharts||v.globals.noData||m.core.resizeNonAxisCharts(),b(m)})}},{key:"destroy",value:function(){var c,d;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,c=this.parentResizeHandler,(d=Ys.get(c))&&(d.disconnect(),Ys.delete(c));var m=this.w.config.chart.id;m&&Apex._chartInstances.forEach(function(v,b){v.id===W.escapeString(m)&&Apex._chartInstances.splice(b,1)}),new zs(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(c){var d=this,m=arguments.length>1&&arguments[1]!==void 0&&arguments[1],v=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],b=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],S=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],T=this.w;return T.globals.selection=void 0,c.series&&(this.series.resetSeries(!1,!0,!1),c.series.length&&c.series[0].data&&(c.series=c.series.map(function(M,z){return d.updateHelpers._extendSeries(M,z)})),this.updateHelpers.revertDefaultAxisMinMax()),c.xaxis&&(c=this.updateHelpers.forceXAxisUpdate(c)),c.yaxis&&(c=this.updateHelpers.forceYAxisUpdate(c)),T.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),c.theme&&(c=this.theme.updateThemeOptions(c)),this.updateHelpers._updateOptions(c,m,v,b,S)}},{key:"updateSeries",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(c,d,m)}},{key:"appendSeries",value:function(c){var d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=this.w.config.series.slice();return v.push(c),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(v,d,m)}},{key:"appendData",value:function(c){var d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=this;m.w.globals.dataChanged=!0,m.series.getPreviousPaths();for(var v=m.w.config.series.slice(),b=0;b<v.length;b++)if(c[b]!==null&&c[b]!==void 0)for(var S=0;S<c[b].data.length;S++)v[b].data.push(c[b].data[S]);return m.w.config.series=v,d&&(m.w.globals.initialSeries=W.clone(m.w.config.series)),this.update()}},{key:"update",value:function(c){var d=this;return new Promise(function(m,v){new zs(d.ctx).clear({isUpdating:!0});var b=d.create(d.w.config.series,c);if(!b)return m(d);d.mount(b).then(function(){typeof d.w.config.chart.events.updated=="function"&&d.w.config.chart.events.updated(d,d.w),d.events.fireEvent("updated",[d,d.w]),d.w.globals.isDirty=!0,m(d)}).catch(function(S){v(S)})})}},{key:"getSyncedCharts",value:function(){var c=this.getGroupedCharts(),d=[this];return c.length&&(d=[],c.forEach(function(m){d.push(m)})),d}},{key:"getGroupedCharts",value:function(){var c=this;return Apex._chartInstances.filter(function(d){if(d.group)return!0}).map(function(d){return c.w.config.chart.group===d.group?d.chart:c})}},{key:"toggleSeries",value:function(c){return this.series.toggleSeries(c)}},{key:"highlightSeriesOnLegendHover",value:function(c,d){return this.series.toggleSeriesOnHover(c,d)}},{key:"showSeries",value:function(c){this.series.showSeries(c)}},{key:"hideSeries",value:function(c){this.series.hideSeries(c)}},{key:"isSeriesHidden",value:function(c){this.series.isSeriesHidden(c)}},{key:"resetSeries",value:function(){var c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(c,d)}},{key:"addEventListener",value:function(c,d){this.events.addEventListener(c,d)}},{key:"removeEventListener",value:function(c,d){this.events.removeEventListener(c,d)}},{key:"addXaxisAnnotation",value:function(c){var d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,v=this;m&&(v=m),v.annotations.addXaxisAnnotationExternal(c,d,v)}},{key:"addYaxisAnnotation",value:function(c){var d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,v=this;m&&(v=m),v.annotations.addYaxisAnnotationExternal(c,d,v)}},{key:"addPointAnnotation",value:function(c){var d=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,v=this;m&&(v=m),v.annotations.addPointAnnotationExternal(c,d,v)}},{key:"clearAnnotations",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,d=this;c&&(d=c),d.annotations.clearAnnotations(d)}},{key:"removeAnnotation",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,m=this;d&&(m=d),m.annotations.removeAnnotation(m,c)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(c,d){return this.coreUtils.getSeriesTotalsXRange(c,d)}},{key:"getHighestValueInSeries",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Br(this.ctx).getMinYMaxY(c).highestY}},{key:"getLowestValueInSeries",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Br(this.ctx).getMinYMaxY(c).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(c,d){return this.updateHelpers.toggleDataPointSelection(c,d)}},{key:"zoomX",value:function(c,d){this.ctx.toolbar.zoomUpdateOptions(c,d)}},{key:"setLocale",value:function(c){this.localization.setCurrentLocaleValues(c)}},{key:"dataURI",value:function(c){return new fr(this.ctx).dataURI(c)}},{key:"exportToCSV",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new fr(this.ctx).exportToCSV(c)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var c=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){c.w.globals.resized=!0,c.w.globals.dataChanged=!1,c.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var c=this.w.config.chart.redrawOnWindowResize;typeof c=="function"&&(c=c()),c&&this._windowResize()}}],[{key:"getChartByID",value:function(c){var d=W.escapeString(c);if(Apex._chartInstances){var m=Apex._chartInstances.filter(function(v){return v.id===d})[0];return m&&m.chart}}},{key:"initOnLoad",value:function(){for(var c=document.querySelectorAll("[data-apexcharts]"),d=0;d<c.length;d++)new pe(c[d],JSON.parse(c[d].getAttribute("data-options"))).render()}},{key:"exec",value:function(c,d){var m=this.getChartByID(c);if(m){m.w.globals.isExecCalled=!0;var v=null;if(m.publicMethods.indexOf(d)!==-1){for(var b=arguments.length,S=new Array(b>2?b-2:0),T=2;T<b;T++)S[T-2]=arguments[T];v=m[d].apply(m,S)}return v}}},{key:"merge",value:function(c,d){return W.extend(c,d)}}]),pe}();e.exports=hs})(RA,RA.exports);var V1e=RA.exports,Z8;Object.defineProperty(Y8,"__esModule",{value:!0});var H1e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W1e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G1e=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),X1e=V1e,K8=BR(X1e),J8=le,Yy=BR(J8),q1e=vue,Yc=BR(q1e);function BR(e){return e&&e.__esModule?e:{default:e}}function Y1e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z1e(e,t){var r,n={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function K1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J1e(e,t){if(e)return!t||typeof t!="object"&&typeof t!="function"?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Q1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}window.ApexCharts=K8.default;var n4=function(){function e(t){K1e(this,e);var r=J1e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return Yy.default.createRef?r.chartRef=Yy.default.createRef():r.setRef=function(n){return r.chartRef=n},r.chart=null,r}return Q1e(e,J8.Component),G1e(e,[{key:"render",value:function(){var t=Z1e(this.props,[]);return Yy.default.createElement("div",W1e({ref:Yy.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var t=Yy.default.createRef?this.chartRef.current:this.chartRef;this.chart=new K8.default(t,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var f=this.props,t=f.type,r=f.height,n=f.width,o=f.series,f=f.options;return this.extend(f,{chart:{type:t,height:r,width:n},series:o})}},{key:"isObject",value:function(t){return t&&(t===void 0?"undefined":H1e(t))==="object"&&!Array.isArray(t)&&t!=null}},{key:"extend",value:function(t,r){var n=this,o=(typeof Object.assign!="function"&&(Object.assign=function(f){if(f==null)throw new TypeError("Cannot convert undefined or null to object");for(var y=Object(f),s=1;s<arguments.length;s++){var k=arguments[s];if(k!=null)for(var I in k)k.hasOwnProperty(I)&&(y[I]=k[I])}return y}),Object.assign({},t));return this.isObject(t)&&this.isObject(r)&&Object.keys(r).forEach(function(f){n.isObject(r[f])&&f in t?o[f]=n.extend(t[f],r[f]):Object.assign(o,Y1e({},f,r[f]))}),o}},{key:"componentDidUpdate",value:function(t){if(!this.chart)return null;var o=this.props,s=o.options,r=o.series,n=o.height,o=o.width,f=JSON.stringify(t.options),y=JSON.stringify(t.series),s=JSON.stringify(s),k=JSON.stringify(r);f===s&&y===k&&n===t.height&&o===t.width||(y!==k&&f===s&&n===t.height&&o===t.width?this.chart.updateSeries(r):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&typeof this.chart.destroy=="function"&&this.chart.destroy()}}]),e}();(Z8=Y8.default=n4).propTypes={type:Yc.default.string.isRequired,width:Yc.default.oneOfType([Yc.default.string,Yc.default.number]),height:Yc.default.oneOfType([Yc.default.string,Yc.default.number]),series:Yc.default.array.isRequired,options:Yc.default.object.isRequired},n4.defaultProps={type:"line",width:"100%",height:"auto"};const Cv=({months:e,userCounts:t})=>{const r={options:{chart:{id:"basic-bar"},xaxis:{categories:e}},series:[{name:"",data:t}]};return A.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md",children:A.jsx(Z8,{options:r.options,series:r.series,type:"bar",width:"100%",height:350})})},ewe=Object.freeze(Object.defineProperty({__proto__:null,default:Cv},Symbol.toStringTag,{value:"Module"}));function twe(){const[e,t]=le.useState(null);le.useEffect(()=>{(async()=>{try{const N=await Gs.get(ws.dashboard);console.log("response",N),t(N.data)}catch(N){rn(N)}})()},[]);const r=e==null?void 0:e.quickRides.map(D=>{const N=new Date(D.date);return{month:N.getMonth(),year:N.getFullYear()}}),n={};r==null||r.forEach(D=>{const N=`${D.year}-${D.month}`;n[N]=(n[N]||0)+1});const o=Object.keys(n),f=Object.values(n),y=e==null?void 0:e.scheduledRides.map(D=>{const N=new Date(D.date);return{month:N.getMonth(),year:N.getFullYear()}}),s={};y==null||y.forEach(D=>{const N=`${D.year}-${D.month}`;s[N]=(s[N]||0)+1});const k=Object.keys(s),I=Object.values(s);return A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-wrap justify-around m-10 cursor-pointer",children:[A.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-blue-200 mb-4 sm:w-auto sm:mb-0 sm:mr-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h3",{className:"text-3xl font-bold text-gray-800 text-center",children:"Completed Rides"}),A.jsx("h3",{className:"text-4xl font-bold text-blue-500 text-center",children:e==null?void 0:e.driverData.RideDetails.completedRides})]})}),A.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-green-200 mb-4 sm:w-auto sm:mb-0 sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Total Revenue"}),A.jsxs("h1",{className:"text-4xl font-bold text-green-500 text-center",children:[" ",parseInt((e==null?void 0:e.driverData.revenue)??"0")]})]})}),A.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-purple-200 mb-4 sm:w-auto sm:mb-0 sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Quick Rides"}),A.jsx("h1",{className:"text-4xl font-bold text-purple-500 text-center",children:e==null?void 0:e.quickRidesCount})]})}),A.jsx("div",{className:"w-full max-w-sm overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-yellow-200 sm:w-auto sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Scheduled Rides"}),A.jsx("h1",{className:"text-4xl font-bold text-yellow-500 text-center",children:e==null?void 0:e.scheduledRidesCount})]})})]}),A.jsx("div",{className:"flex flex-col md:flex-row w-10/12 mx-auto mt-20 justify-center",children:A.jsx("div",{className:"w-full overflow-hidden rounded-3xl bg-blue-200 shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center justify-around",children:[A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black text-blue-900",children:"Quick Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(Cv,{months:o,userCounts:f})})]}),A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black text-blue-900",children:"Scheduled Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(Cv,{months:k,userCounts:I})})]})]})})})]})}function $l(){const[e,t]=le.useState(!1),r=Yo(N=>N.driver.loggedIn),n=Yo(N=>N.driver.document),o=Yo(N=>N.driver.vehicle),[f,y]=le.useState(!1),s=Va(),k=Cs(),I=()=>{t(!e)},D=()=>{try{s(D1e()),k(Ti.login)}catch(N){Zr.error(N.message)}};return A.jsx("div",{className:"flex justify-center",children:A.jsx("nav",{className:`relative w-5/6 mt-4 text-white ${e?"bg-blue-600":"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700"} hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2`,children:A.jsx("div",{className:"container px-6 py-4 mx-auto",children:A.jsxs("div",{className:"lg:flex lg:items-center lg:justify-between",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Un,{to:Ti.dashboard,children:A.jsx("div",{className:"w-auto h-6 sm:h-7",children:"Dashboard"})}),A.jsx("div",{className:"flex lg:hidden",children:A.jsx("button",{onClick:I,type:"button",className:"text-gray-500 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-400 focus:outline-none focus:text-gray-600 dark:focus:text-gray-400","aria-label":"toggle menu",children:e?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8h16M4 16h16"})})})})]}),A.jsxs("div",{className:`absolute inset-x-0 z-20 me-10 w-full px-6 py-4 transition-all duration-300 ease-in-out bg-white dark:bg-gray-800 lg:mt-0 lg:p-0 lg:top-0 lg:relative lg:bg-transparent lg:w-auto lg:opacity-100 lg:translate-x-0 lg:flex lg:items-center ${e?"translate-x-0 opacity-100":"opacity-0 -translate-x-full"}`,children:[A.jsxs("div",{className:"flex flex-col text-xl -mx-6 lg:flex-row lg:items-center lg:mx-8",children:[A.jsx(Un,{to:Ti.rideNotification,className:"px-3 py-2 mx-3 mt-2 text-black-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-black-200 hover:text-gray-100 dark:hover:bg-blue-700",children:"Notification"}),A.jsx(Un,{to:Ti.currentRide,className:"px-3 py-2 mx-3 mt-2 text-black-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-black-200 hover:text-gray-100 dark:hover:bg-blue-700",children:"Ride"}),A.jsx("div",{className:"avatar placeholder",onClick:()=>y(!f),"aria-label":"toggle dropdown",children:A.jsx("div",{className:"relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600",children:A.jsx("svg",{className:"absolute w-12 h-12 text-gray-400 -left-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})})]}),f&&A.jsxs("div",{onClick:()=>y(!1),className:"absolute right-0 z-20 w-48 py-2 mt-48 origin-top-right shadow-xl rounded-3xl overflow-hidden bg-white",children:[n&&o&&A.jsxs(A.Fragment,{children:[A.jsx(Un,{to:Ti.driverProfile,className:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Your Profile"}),A.jsx(Un,{to:Ti.rideHistory,className:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Ride History"})]}),!n&&A.jsx(Un,{to:Ti.addPersonalInfo,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Add Personale"}),!o&&A.jsx(Un,{to:Ti.addVehicleInfo,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Add Vehicel"}),r?A.jsx("p",{onClick:D,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Sign Out"}):A.jsx(Un,{to:Ti.login,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Login"})]})]})]})})})})}function Ul(){return A.jsxs("footer",{className:"footer bg-gray-200 footer-center p-10 text-base-content rounded",children:[A.jsxs("nav",{className:"grid grid-flow-col justify-center gap-4",children:[A.jsx("a",{className:"link link-hover",children:"About us"}),A.jsx("a",{className:"link link-hover",children:"Contact"}),A.jsx("a",{className:"link link-hover",children:"Jobs"}),A.jsx("a",{className:"link link-hover",children:"Press kit"})]}),A.jsx("nav",{children:A.jsxs("div",{className:"grid grid-flow-col justify-center gap-4 my-8",children:[A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})}),A.jsx("aside",{className:"justify-center text-center",children:A.jsx("p",{children:"Copyright  2023 - All right reserved by Book@ Ltd"})})]})}function rwe(){return A.jsxs("div",{className:"bg-gray-100 h-auto",children:[A.jsx($l,{}),A.jsx(twe,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}const al=async(e,t,r,n)=>{try{if(e){const o=nwe(e),f=new File([o],t||"default-image-name.jpg",{type:"image/jpeg"}),y=P0e(z0e,`/images/${r}/${n}/${f.name}`);await A0e(y,f);const s=await I0e(y);return console.log("download",s),s}else throw new Error("Invalid image data")}catch{throw new Error("Invalid image data")}};function nwe(e){const t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]);let o=n.length;const f=new Uint8Array(o);for(;o--;)f[o]=n.charCodeAt(o);return new Blob([f],{type:r})}function iwe(){const[e,t]=le.useState(!0),[r,n]=le.useState(!0),[o,f]=le.useState(null),[y,s]=le.useState(null),[k,I]=le.useState(null),D="pl-2 border-b-4 w-full outline-none rounded-lg p-2.5 sm:text-sm appearance-none block  bg-gray-200 text-gray-700 border mb-3 leading-tight",N=Va();le.useEffect(()=>{(async()=>{try{const W=await Gs.get(ws.profie);console.log("co",W);const K={name:W.data.name,email:W.data.email,mobile:W.data.mobile,aadharId:W.data.aadhar.aadharId,licenseId:W.data.license.licenseId,aadharImageUrl:W.data.aadhar.aadharImage,licenseImageUrl:W.data.license.licenseImage,driverImageUrl:W.data.driverImageUrl,vehicleVerified:W.data.vehicle.vehicleVerified,driverVerified:W.data.driver.driverVerified,refrel:W.data.refrel,isAvailable:W.data.isAvailable,totalRides:"",joinedAt:"",vehicleDocuments:{vehicleModel:"",registration:{registrationId:""}}};q.setValues(K)}catch(W){rn(W)}})()},[r]);const U=async()=>{try{const ie=await Gs.patch(`${ws.available}`);n(!r),N(Qv({available:ie.data.isAvailable}))}catch(ie){rn(ie)}},q=cd({initialValues:{name:"",email:"",mobile:"",aadharId:"",licenseId:"",refrel:"",aadharImageUrl:"",licenseImageUrl:"",driverImageUrl:"",vehicleVerified:"",driverVerified:"",isAvailable:!1},validationSchema:Au({name:$i().min(3,"Type a valid Name").required("Please Enter the value"),email:$i().email("Please Enter a valid Email").required("Please Enter value"),mobile:$i().length(10,"Please Enter a valid number").required("Please Enter value"),aadharId:$i().matches(/^\d{12}$/,"Please Enter a valid Aadhar number").required("Please Enter value"),licenseId:$i().matches(/^\d{16}$/,"Please Enter a valid Driving ID").required("Please Enter value")}),onSubmit:async(ie,W)=>{try{if(Zr.loading("Updating the Profile please wait...",{style:gc}),o&&o!==ie.aadharImageUrl){console.log("aadhar before",ie.aadharImageUrl);const K=await al(ie.aadharImageUrl,o,"driver","aadhar");q.setFieldValue("aadharImageUrl",K)}if(y&&y!==ie.licenseImageUrl){const K=await al(ie.licenseImageUrl,y,"driver","license");q.setFieldValue("licenseImageUrl",K)}if(k&&k!==ie.driverImageUrl){const K=await al(ie.driverImageUrl,k,"driver","driver");q.setFieldValue("driverImageUrl",K)}await Gs.post(ws.updateProfile,ie),Zr.dismiss(),t(!e),Zr.success("Updated profile successfully"),n(!r)}catch(K){Zr.dismiss(),rn(K)}finally{W.setSubmitting(!1)}}}),Z=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("aadharImageUrl",K.result),f(W.name)},K.readAsDataURL(W)}else f(null)},ae=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("licenseImageUrl",K.result),s(W.name)},K.readAsDataURL(W)}else s(null)},ve=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("driverImageUrl",K.result),I(W.name)},K.readAsDataURL(W)}else I(null)};return A.jsx("div",{className:"flex justify-center",children:q.values&&A.jsx("div",{className:"w-full lg:w-11/12 overflow-hidden rounded-3xl bg-white shadow-2xl my-11 ",children:A.jsx("div",{className:"w-full",children:A.jsx("section",{className:"bg-white ",children:A.jsxs("form",{className:"relative flex flex-col lg:flex-row",onSubmit:q.handleSubmit,children:[A.jsxs("div",{className:"min-h-screen mt-4 lg:w-1/3 flex flex-col text-center justify-center items-center",children:[A.jsxs("div",{children:[A.jsx("label",{htmlFor:"driverImageInput",children:A.jsx("img",{className:"object-cover object-center w-full lg:w-[20rem] rounded-lg",src:q.values.driverImageUrl,alt:""})}),A.jsx("input",{id:"driverImageInput",type:"file",name:"driverImageUrl",placeholder:"driverImageUrl",className:"hidden",onChange:ve})]}),A.jsx("div",{className:"w-full p-7 max-w-md overflow-hidden rounded-2xlshadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:" ms-7 flex space-x-5",children:[A.jsx("p",{className:"mt-2",children:"Account Status"}),q.values.vehicleVerified&&q.values.driverVerified?A.jsx("div",{className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 ",children:"Verifyed"}):A.jsx("div",{className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600  shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:"Not Verifyed"})]})})}),A.jsxs("div",{className:"flex",children:[A.jsx(Un,{to:Ti.vehicleInfo,children:A.jsx("p",{className:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"vehicle Info"})}),A.jsxs("label",{className:"relative inline-flex items-center mb-6 ms-7 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:q.values.isAvailable,className:"sr-only peer",onChange:U}),A.jsx("div",{className:`w-11 h-6 bg-gray-200 ${q.values.isAvailable?"bg-green-600":"bg-gray-200"} peer-focus:outline-none peer-focus:ring-4  rounded-full peer dark:bg-red-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-green-600`}),A.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-gray-600",children:"Available"})]})]})]}),A.jsxs("div",{className:"w-full min-h-screen bg-gray-200 lg:w-2/3",children:[A.jsxs("h1",{className:"text-2xl my-5 items-center font-semibold flex flex-col text-center justify-center text-gray-800 capitalize lg:text-3xl dark:text-black",children:[A.jsx("input",{type:"text",name:"name",placeholder:"name",readOnly:e,value:q.values.name,onChange:q.handleChange,onBlur:q.handleBlur,className:"text-blue-500 bg-gray-200 outline-none"}),q.touched.name&&q.errors.name&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.name})]}),A.jsx("div",{className:"lg:flex lg:items-center lg:ms-7",children:A.jsxs("div",{className:"p-8 me-5 bg-white rounded-2xl w-full",children:[A.jsx("div",{children:e?A.jsx("div",{onClick:()=>t(!e),children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:A.jsx("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})})}):A.jsxs("div",{className:"flex",children:[A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Save"}),A.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"cancel"})]})}),A.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 mx-3 mb-6",children:[A.jsxs("div",{className:"w-full md:w-full px-3 lg:mb-6 lg:mt-4",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Email"}),A.jsx("input",{type:"text",name:"email",placeholder:"email",readOnly:e,value:q.values.email,onChange:q.handleChange,onBlur:q.handleBlur,className:D}),q.touched.email&&q.errors.email&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.email})]}),A.jsxs("div",{className:"w-full md:w-full px-3 lg:mb-6",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Mobile"}),A.jsx("input",{type:"text",name:"mobile",placeholder:"mobile",readOnly:e,value:q.values.mobile,onChange:q.handleChange,onBlur:q.handleBlur,className:D}),q.touched.mobile&&q.errors.mobile&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.mobile})]}),A.jsxs("div",{className:"w-full md:w-full px-3 lg:mb-6",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Refrel"}),A.jsx("p",{className:"pl-2  border-b-4 w-full rounded-lg p-2.5 sm:text-sm appearance-none block  bg-gray-200 text-gray-700 border mb-3 leading-tight focus:outline-none focus:bg-white",children:q.values.refrel})]})]}),A.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 mx-3 mb-6",children:[A.jsxs("div",{className:"w-full md:w-4/5 px-3 mb-6 lg:mt-4",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Aadhar Id"}),A.jsx("input",{type:"text",name:"aadharId",placeholder:"AadharId",readOnly:e,value:q.values.aadharId,onChange:q.handleChange,onBlur:q.handleBlur,className:D}),q.touched.aadharId&&q.errors.aadharId&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.aadharId})]}),A.jsxs("div",{className:"w-full md:w-4/5 px-3 mb-6 md:mb-0",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"license"}),A.jsx("input",{type:"text",name:"licenseId",placeholder:"licenseId",readOnly:e,value:q.values.licenseId,onChange:q.handleChange,onBlur:q.handleBlur,className:D}),q.touched.licenseId&&q.errors.licenseId&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.licenseId})]})]}),A.jsxs("div",{className:"flex flex-col lg:flex-row space-y-4 mx-3 mb-6",children:[A.jsx("div",{className:"w-full md:w-4/5 px-3 mb-6",children:A.jsxs("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:["Aadhar Image",A.jsx("img",{src:q.values.aadharImageUrl,className:"rounded-lg max-h-44"}),A.jsx("input",{type:"file",name:"aadharImageUrl",placeholder:"Aadhar Image",className:"hidden",onChange:Z})]})}),A.jsx("div",{className:"w-full md:w-4/5 px-3 mb-6",children:A.jsxs("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:["license Image",A.jsx("img",{src:q.values.licenseImageUrl,className:"rounded-lg max-h-44"}),A.jsx("input",{type:"file",name:"licenseImageUrl",placeholder:"License Image",className:"hidden",onChange:ae})]})})]})]})})]})]})})})})})}function swe(){return A.jsxs("div",{className:" bg-gray-100",children:[A.jsx($l,{}),A.jsx(iwe,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}function owe(){const e=Va(),t=Cs(),[r,n]=le.useState(null),[o,f]=le.useState(null),[y,s]=le.useState(null),[k,I]=le.useState(null),[D,N]=le.useState(null),[U,q]=le.useState(null),Z="pl-2 outline-none border-4 w-full rounded-lg p-2.5 sm:text-sm",ae="pl-2 outline-none border-2 border-red-400 w-full rounded-lg p-2.5 sm:text-sm",ve=de=>{const Ae=de.target.files&&de.target.files[0];if(Ae){const Te=new FileReader;Te.onloadend=()=>{n(Te.result),f(Ae.name)},Te.readAsDataURL(Ae)}else n(null),f(null)},ie=de=>{const Ae=de.target.files&&de.target.files[0];if(Ae){const Te=new FileReader;Te.onloadend=()=>{s(Te.result),I(Ae.name)},Te.readAsDataURL(Ae)}else s(null),I(null)},W=de=>{const Ae=de.target.files&&de.target.files[0];if(Ae){const Te=new FileReader;Te.onloadend=()=>{N(Te.result),q(Ae.name)},Te.readAsDataURL(Ae)}else N(null),q(null)},K=cd({initialValues:{aadharId:"",drivingLicenseId:"",address:""},validationSchema:Au({aadharId:$i().matches(/^\d{12}$/,"Please Enter a valid Aadhar number").required("Please Enter value"),drivingLicenseId:$i().matches(/^\d{16}$/,"Please Enter a valid Driving ID").required("Please Enter value"),address:$i().min(20,"Type a valid Address").required("Please Enter value")}),onSubmit:de=>{he(de)}}),he=async de=>{try{if(r&&y&&D)try{Zr.loading("Submitting the form please wait...",{style:gc});const Ae=await al(r,o,"driver","aadhar"),Te=await al(y,k,"driver","license"),Ue=await al(D,U,"driver","driver"),Pe={...de,aadharImageUrl:Ae,licenseImageUrl:Te,driverImageUrl:Ue},$e=await Gs.post(ws.addPersonalInfo,Pe),Ve=$e.data.driver.driverDocuments,{vehicle:Fe,driverId:Ye,vehicleType:ft}=$e.data;console.log($e.data),console.log("document",Ve,Fe),e(z1e()),e(jR({document:Ve,vehicle:Fe,driverId:Ye,vehicleType:ft})),Zr.dismiss(),Zr.success("Form submitted successfully"),t(Ti.addVehicleInfo)}catch(Ae){console.log(Ae),Zr.dismiss(),rn(Ae)}}catch(Ae){Zr.error(Ae.message),console.error("Error uploading image:",Ae)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:A.jsx("div",{className:"w-full max-w-4xl overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"text-3xl text-center font-black text-blue mt-6",children:"Personal Info"}),A.jsx("div",{className:"p-8",children:A.jsxs("form",{className:"mt-8",onSubmit:K.handleSubmit,children:[A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row  sm:space-x-20",children:[A.jsx("input",{type:"text",name:"aadharId",placeholder:"Aadhar ID",required:!0,value:K.values.aadharId,onChange:K.handleChange,onBlur:K.handleBlur,className:K.touched.aadharId&&K.errors.aadharId?ae:Z}),A.jsx("input",{type:"text",name:"drivingLicenseId",placeholder:"License ID",required:!0,value:K.values.drivingLicenseId,onChange:K.handleChange,onBlur:K.handleBlur,className:K.touched.drivingLicenseId&&K.errors.drivingLicenseId?ae:Z})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("div",{children:K.touched.aadharId&&K.errors.aadharId&&A.jsx("div",{className:"text-red-500 text-xs",children:K.errors.aadharId})}),A.jsx("div",{children:K.touched.drivingLicenseId&&K.errors.drivingLicenseId&&A.jsx("div",{className:"text-red-500 text-xs",children:K.errors.drivingLicenseId})})]}),A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row space-x-0 sm:space-x-20",children:[A.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[r?A.jsx("img",{src:typeof r=="string"?r:URL.createObjectURL(r),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"Aadhar Image"})]}),A.jsx("input",{type:"file",name:"aadharImage",placeholder:"Aadhar Image",required:!0,className:"hidden",onChange:ve})]}),A.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[y?A.jsx("img",{src:typeof y=="string"?y:URL.createObjectURL(y),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"License Image"})]}),A.jsx("input",{type:"file",name:"licenseImage",placeholder:"License Image",required:!0,className:"hidden",onChange:ie})]})]}),A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row space-x-0 sm:space-x-20",children:[A.jsx("textarea",{id:"textArea",name:"address",placeholder:"Address",value:K.values.address,onChange:K.handleChange,onBlur:K.handleBlur,className:K.touched.address&&K.errors.address?ae:Z}),A.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[D?A.jsx("img",{src:typeof D=="string"?D:URL.createObjectURL(D),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"Driver Image"})]}),A.jsx("input",{type:"file",name:"driverImage",placeholder:"Driver Image",required:!0,className:"hidden",onChange:W})]})]}),A.jsx("div",{children:K.touched.address&&K.errors.address&&A.jsx("div",{className:"text-red-500 text-xs",children:K.errors.address})}),A.jsx("div",{className:"flex justify-end",children:A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Submit"})})]})})]})})})})}function awe(){return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx($l,{}),A.jsx(owe,{}),A.jsx(Ul,{})]})}function lwe(){const e=Va(),t=Cs(),[r,n]=le.useState(null),[o,f]=le.useState(null),[y,s]=le.useState(null),[k,I]=le.useState(null),[D,N]=le.useState(null),[U,q]=le.useState(null),[Z,ae]=le.useState(),ve="pl-2 outline-none border-4 w-full rounded-lg p-2.5 sm:text-sm",ie="pl-2 outline-none border-2 border-red-400 w-full rounded-lg p-2.5 sm:text-sm  placeholder:text-red-500";le.useEffect(()=>{(async()=>{try{const Ue=await Gs.get(ws.getCabs);console.log(Ue),ae(Ue.data)}catch(Ue){rn(Ue)}})()},[]);const W=Te=>{const Ue=Te.target.files&&Te.target.files[0];if(Ue){const Pe=new FileReader;Pe.onloadend=()=>{n(Pe.result),f(Ue.name)},Pe.readAsDataURL(Ue)}else n(null),f(null)},K=Te=>{const Ue=Te.target.files&&Te.target.files[0];if(Ue){const Pe=new FileReader;Pe.onloadend=()=>{s(Pe.result),I(Ue.name)},Pe.readAsDataURL(Ue)}else s(null),I(null)},he=Te=>{const Ue=Te.target.files&&Te.target.files[0];if(Ue){const Pe=new FileReader;Pe.onloadend=()=>{N(Pe.result),q(Ue.name)},Pe.readAsDataURL(Ue)}else N(null),q(null)},de=cd({initialValues:{registrationId:"",vehicleModel:"",maxPersons:"",vehicleType:""},validationSchema:Au({registrationId:$i().matches(/^([A-Z]{2} \d{2} [A-Z]{1,2} \d{4})$/,"Please Enter a valid Vehicle Registration Number").required("Please Enter value"),vehicleModel:$i().matches(/^[a-zA-Z]{3,20}$/,"Please enter a valid Model").required("Please Enter value"),maxPersons:$i().matches(/^[1-7]$/,"Please enter a valid Input").required("Please Enter value")}),onSubmit:Te=>{Ae(Te)}}),Ae=async Te=>{try{if(r&&y&&D)try{Zr.loading("Submitting the form please wait...",{style:gc});const Ue=await al(r,o,"vehicle","rc"),Pe=await al(y,k,"vehicle","vehicleImage1"),$e=await al(D,U,"vehicle","vehicleImage2"),Ve={...Te,rcImageUrl:Ue,vehicleImageUrl1:Pe,vehicleImageUrl2:$e},Fe=await Gs.post(ws.addVehicleInfo,Ve),{document:Ye,driverId:ft,vehicle:Pt,vehicleType:or}=Fe.data;e(jR({document:Ye,vehicle:Pt,driverId:ft,vehicleType:or})),e(N1e()),Zr.dismiss(),Zr.success("Submitted the form successfully"),t(Ti.dashboard)}catch(Ue){console.log(Ue),Zr.dismiss(),rn(Ue)}}catch(Ue){Zr.error(Ue.message),console.error("Error uploading image:",Ue)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:A.jsx("div",{className:"w-full max-w-4xl overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"text-3xl text-center font-black text-blue mt-6",children:"Vehicle Info"}),A.jsx("div",{className:"p-8",children:A.jsxs("form",{className:"mt-8",onSubmit:de.handleSubmit,children:[A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-20",children:[A.jsx("input",{type:"text",name:"registrationId",placeholder:"Registration No",required:!0,value:de.values.registrationId,onChange:de.handleChange,onBlur:de.handleBlur,className:de.touched.registrationId&&de.errors.registrationId?ie:ve}),A.jsx("div",{className:"pl-2 flex outline-none border-4 w-full rounded-lg p-2.5 sm:text-sm",children:A.jsx("div",{className:"flex",children:Z&&Z.map(Te=>A.jsxs("div",{className:"flex items-center mr-4",children:[A.jsx("input",{id:`cabType-${Te.cabType}`,type:"radio",name:"vehicleType",value:Te.cabType,checked:de.values.vehicleType===Te.cabType,onChange:de.handleChange,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),A.jsx("label",{htmlFor:`cabType-${Te.cabType}`,className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-700",children:Te.cabType})]}))})})]}),A.jsx("div",{className:"mt-0",children:de.touched.registrationId&&de.errors.registrationId&&A.jsx("div",{className:"text-red-500 text-xs mt-0",children:de.errors.registrationId})}),A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-20",children:[A.jsxs("label",{className:"lg:w-96 w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[r?A.jsx("img",{src:typeof r=="string"?r:URL.createObjectURL(r),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"Registration Certificate Image"})]}),A.jsx("input",{type:"file",name:"rcImage",placeholder:"RC Image",required:!0,className:"hidden",onChange:W})]}),A.jsxs("div",{className:"mb-6 space-y-3",children:[A.jsx("input",{type:"text",name:"vehicleModel",placeholder:de.touched.vehicleModel&&de.errors.vehicleModel?de.errors.vehicleModel:"Vehicle Model",required:!0,value:de.values.vehicleModel,onChange:de.handleChange,onBlur:de.handleBlur,className:de.touched.vehicleModel&&de.errors.vehicleModel?ie:ve}),A.jsx("input",{type:"text",name:"maxPersons",placeholder:de.touched.maxPersons&&de.errors.maxPersons?de.errors.maxPersons:"Max Persons",required:!0,value:de.values.maxPersons,onChange:de.handleChange,onBlur:de.handleBlur,className:de.touched.maxPersons&&de.errors.maxPersons?ie:ve})]})]}),A.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-20",children:[A.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[y?A.jsx("img",{src:typeof y=="string"?y:URL.createObjectURL(y),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"Vehicle Image"})]}),A.jsx("input",{type:"file",name:"vehicleImage1",placeholder:"Aadhar Image",required:!0,className:"hidden",onChange:K})]}),A.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[D?A.jsx("img",{src:typeof D=="string"?D:URL.createObjectURL(D),className:"max-h-32 w-full object-cover mt-4"}):A.jsxs(A.Fragment,{children:[A.jsx("svg",{className:"w-8 h-12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),A.jsx("span",{className:"mt-2 text-base leading-normal",children:"Vehicle Image"})]}),A.jsx("input",{type:"file",name:"vehicleImage2",placeholder:"License Image",required:!0,className:"hidden",onChange:he})]})]}),A.jsx("div",{className:"flex justify-end",children:A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Submit"})})]})})]})})})})}function cwe(){return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx($l,{}),A.jsx(lwe,{}),A.jsx(Ul,{})]})}function uwe(){const[e,t]=le.useState(!0),[r,n]=le.useState(!0),[o,f]=le.useState(),[y,s]=le.useState(null),[k,I]=le.useState(null),[D,N]=le.useState(null),U="pl-2 border-b-4 w-full outline-none rounded-lg p-2.5 sm:text-sm appearance-none block  bg-gray-200 text-gray-700 border mb-3 leading-tight";le.useEffect(()=>{(async()=>{try{const W=await Gs.get(ws.vehicle);console.log(W),f(W.data.cabs);const K=W.data.vehicle.vehicleDocuments,he={registrationId:K.registration.registrationId,rcImageUrl:K.registration.registrationImage,vehicleModel:K.vehicleModel,maxPersons:K.maxPersons,vehicleType:K.vehicleType,vehicleImageUrl1:K.vehicleImage1,vehicleImageUrl2:K.vehicleImage2};q.setValues(he)}catch(W){rn(W)}})()},[r]);const q=cd({initialValues:{registrationId:"",rcImageUrl:"",vehicleModel:"",maxPersons:"",vehicleType:"",vehicleImageUrl1:"",vehicleImageUrl2:" "},validationSchema:Au({registrationId:$i().matches(/^([A-Z]{2} \d{2} [A-Z]{1,2} \d{4})$/,"Please Enter a valid Vehicle Registration Number").required("Please Enter value"),vehicleModel:$i().matches(/^[a-zA-Z]{3,30}$/,"Please enter a valid Model").required("Please Enter value"),maxPersons:$i().matches(/^[1-7]$/,"Please enter a valid Input").required("Please Enter value")}),onSubmit:async(ie,W)=>{try{if(Zr.loading("Updating the Vehicle info please wait...",{style:gc}),y&&y!==ie.rcImageUrl){const K=await al(ie.rcImageUrl,y,"vehicle","rc");q.setFieldValue("rcImageUrl",K)}if(k&&k!==ie.vehicleImageUrl1){const K=await al(ie.vehicleImageUrl1,k,"vehicle","vehicleImageUrl1");console.log("vehicle image",K),q.setFieldValue("vehicleImageUrl1",K)}if(D&&D!==ie.vehicleImageUrl2){const K=await al(ie.vehicleImageUrl2,D,"driver","vehicleImageUrl2");q.setFieldValue("vehicleImageUrl2",K)}console.log("values",ie),await Gs.post(ws.updateVehicle,ie),Zr.dismiss(),t(!e),Zr.success("Updated profile successfully"),n(!r)}catch(K){console.log(K),rn(K)}finally{W.setSubmitting(!1)}}}),Z=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("rcImageUrl",K.result),s(W.name)},K.readAsDataURL(W)}else s(null)},ae=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("vehicleImageUrl1",K.result),I(W.name)},K.readAsDataURL(W)}else I(null)},ve=ie=>{const W=ie.target.files&&ie.target.files[0];if(W){const K=new FileReader;K.onloadend=()=>{q.setFieldValue("vehicleImageUrl2",K.result),N(W.name)},K.readAsDataURL(W)}else N(null)};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex justify-center mt-10",children:A.jsx("div",{className:"lg:w-10/12 w-11/12 overflow-hidden rounded-3xl shadow-2xl mt-14 mb-11",children:A.jsxs("form",{className:"w-full",onSubmit:q.handleSubmit,children:[A.jsx("div",{className:"m-5",children:e?A.jsx("div",{onClick:()=>t(!e),children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:A.jsx("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})})}):A.jsxs("div",{className:"flex",children:[A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 shadow-lg shadow-green-500/50 dark:shadow-lg dark:shadow-green-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Save"}),A.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"cancel"})]})}),A.jsxs("div",{className:"rounded-3xl",children:[A.jsxs("div",{className:"flex mt-5 flex-wrap justify-around mx-3 mb-6",children:[A.jsxs("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Registration ID"}),A.jsx("input",{type:"text",name:"registrationId",placeholder:"Registration ID",readOnly:e,value:q.values.registrationId,onChange:q.handleChange,onBlur:q.handleBlur,className:U}),q.touched.registrationId&&q.errors.registrationId&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.registrationId})]}),A.jsxs("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Vehicle Model"}),A.jsx("input",{type:"text",name:"vehicleModel",placeholder:"Vehicle Model",readOnly:e,value:q.values.vehicleModel,onChange:q.handleChange,onBlur:q.handleBlur,className:U}),q.touched.vehicleModel&&q.errors.vehicleModel&&A.jsx("div",{className:"text-red-500 text-xs",children:q.errors.vehicleModel})]}),A.jsxs("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Vehicle Type"}),A.jsx("div",{className:"pl-2 flex outline-none border-4 w-full rounded-lg p-2.5 sm:text-sm",children:A.jsx("div",{className:"flex",children:o&&o.map(ie=>A.jsxs("div",{className:"flex items-center mr-4",children:[A.jsx("input",{id:`inline-radio-${ie.cabType}`,type:"radio",name:"vehicleType",value:ie.cabType,disabled:e,checked:q.values.vehicleType==ie.cabType,onChange:q.handleChange,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),A.jsx("label",{htmlFor:`inline-radio-${ie.cabType}`,className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-700",children:ie.cabType})]}))})})]})]}),A.jsxs("div",{className:"flex flex-wrap justify-around mx-3 mb-6",children:[A.jsx("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:A.jsxs("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:["Registration Image",A.jsx("img",{src:q.values.rcImageUrl,className:"rounded-lg max-h-44"}),A.jsx("input",{type:"file",name:"rcImageUrl",placeholder:"Rc Image",className:"hidden",onChange:Z})]})}),A.jsx("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:A.jsxs("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:["Vehicle Image",A.jsx("img",{src:q.values.vehicleImageUrl1,className:"rounded-lg max-h-44"}),A.jsx("input",{type:"file",name:"vehicleImageUrl1",placeholder:"Vehicle Image",className:"hidden",onChange:ae})]})}),A.jsx("div",{className:"px-3 mb-6 w-full md:w-1/2 lg:w-1/3 md:mb-0",children:A.jsxs("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:["Vehicle Image",A.jsx("img",{src:q.values.vehicleImageUrl2,className:"rounded-lg max-h-44"}),A.jsx("input",{type:"file",name:"vehicleImageUrl2",placeholder:"Vehicle Image",className:"hidden",onChange:ve})]})})]})]})]})})})})}function hwe(){return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx(uwe,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}function Q8(e){const{id:t,passwordResetServer:r,successNavigation:n}=e,[o,f]=le.useState(!1),y=Cs(),s="pl-2 outline-none border-b-4 w-full rounded-lg p-2.5 sm:text-sm",k="pl-2 outline-none border-b border-red-400 w-full rounded-lg p-2.5 sm:text-sm",I=cd({initialValues:{password:"",confirmPassword:""},validationSchema:Au({password:$i().min(8,"Minimum 8 Charecter required").matches(/^(?=.*[A-Z])/,"Must include One uppercase letter").matches(/^(?=.*\d)/,"Must include one digit").required("Passowrd is required"),confirmPassword:$i().oneOf([u8("password")],"Password must match").required("Please re-enter the password")}),onSubmit:N=>{D(N)}}),D=async N=>{try{const U={id:t,password:N.password};await Vi.post(r,U),Zr.success("Reset Password Successfully"),y(n)}catch(U){console.log(U),rn(U)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:A.jsx("div",{className:"w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-2xl text-blue-600",children:"Reset Password"}),A.jsxs("form",{className:"mt-8",onSubmit:I.handleSubmit,children:[A.jsxs("div",{className:"mb-6",children:[A.jsx("input",{type:o?"text":"password",name:"password",placeholder:"password",required:!0,value:I.values.password,onChange:I.handleChange,onBlur:I.handleBlur,className:I.touched.password&&I.errors.password?k:s}),I.touched.password&&I.errors.password&&A.jsx("div",{className:"text-red-500 text-xs",children:I.errors.password})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("input",{type:o?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",required:!0,value:I.values.confirmPassword,onChange:I.handleChange,onBlur:I.handleBlur,className:I.touched.confirmPassword&&I.errors.confirmPassword?k:s}),I.touched.confirmPassword&&I.errors.confirmPassword&&A.jsx("div",{className:"text-red-500 text-xs",children:I.errors.confirmPassword})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{type:"checkbox",id:"showPassword",onChange:()=>f(!o),className:"mr-2"}),A.jsx("label",{htmlFor:"showPassword",children:"Show Password"})]}),A.jsx("div",{className:"flex justify-end",children:A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Submit"})})]})]})]})})})})})}function dwe(){const e=$a(),r=new URLSearchParams(e.search).get("id"),n={passwordResetServer:ws.resetPassword,id:r,successNavigation:Ti.login};return A.jsx(A.Fragment,{children:A.jsx(Q8,{...n})})}const dE=(()=>{const e={};let t=1;return{set(r,n,o){typeof r[n]>"u"&&(r[n]={key:n,id:t},t++),e[r[n].id]=o},get(r,n){if(!r||typeof r[n]>"u")return null;const o=r[n];return o.key===n?e[o.id]:null},delete(r,n){if(typeof r[n]>"u")return;const o=r[n];o.key===n&&(delete e[o.id],delete r[n])}}})(),lf={setData(e,t,r){dE.set(e,t,r)},getData(e,t){return dE.get(e,t)},removeData(e,t){dE.delete(e,t)}},fwe=1e6,pwe=1e3,MA="transitionend",mwe=e=>e==null?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),gwe=e=>{do e+=Math.floor(Math.random()*fwe);while(document.getElementById(e));return e},eH=e=>{let t=e.getAttribute("data-te-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t},ywe=e=>{const t=eH(e);return t&&document.querySelector(t)?t:null},$R=e=>{const t=eH(e);return t?document.querySelector(t):null},xwe=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const n=Number.parseFloat(t),o=Number.parseFloat(r);return!n&&!o?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*pwe)},vwe=e=>{e.dispatchEvent(new Event(MA))},UR=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),LA=e=>UR(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(e):null,kv=(e,t,r)=>{Object.keys(r).forEach(n=>{const o=r[n],f=t[n],y=f&&UR(f)?"element":mwe(f);if(!new RegExp(o).test(y))throw new Error(`${e.toUpperCase()}: Option "${n}" provided type "${y}" but expected type "${o}".`)})},WS=e=>{if(!e||e.getClientRects().length===0)return!1;if(e.style&&e.parentNode&&e.parentNode.style){const t=getComputedStyle(e),r=getComputedStyle(e.parentNode);return getComputedStyle(e).getPropertyValue("visibility")==="visible"||t.display!=="none"&&r.display!=="none"&&t.visibility!=="hidden"}return!1},GS=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",tH=e=>{e.offsetHeight},rH=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-te-no-jquery")?e:null},fE=[],bwe=e=>{document.readyState==="loading"?(fE.length||document.addEventListener("DOMContentLoaded",()=>{fE.forEach(t=>t())}),fE.push(e)):e()},pa=()=>document.documentElement.dir==="rtl",nH=e=>document.createElement(e),ef=e=>{typeof e=="function"&&e()},iH=(e,t,r=!0)=>{if(!r){ef(e);return}const n=5,o=xwe(t)+n;let f=!1;const y=({target:s})=>{s===t&&(f=!0,t.removeEventListener(MA,y),ef(e))};t.addEventListener(MA,y),setTimeout(()=>{f||vwe(t)},o)},_we=/[^.]*(?=\..*)\.|.*/,wwe=/\..*/,Swe=/::\d+$/,pE={};let i4=1;const Cwe={mouseenter:"mouseover",mouseleave:"mouseout"},kwe=/^(mouseenter|mouseleave)/i,sH=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function oH(e,t){return t&&`${t}::${i4++}`||e.uidEvent||i4++}function aH(e){const t=oH(e);return e.uidEvent=t,pE[t]=pE[t]||{},pE[t]}function Ewe(e,t){return function r(n){return n.delegateTarget=e,r.oneOff&&Zn.off(e,n.type,t),t.apply(e,[n])}}function Twe(e,t,r){return function n(o){const f=e.querySelectorAll(t);for(let{target:y}=o;y&&y!==this;y=y.parentNode)for(let s=f.length;s--;"")if(f[s]===y)return o.delegateTarget=y,n.oneOff&&Zn.off(e,o.type,r),r.apply(y,[o]);return null}}function lH(e,t,r=null){const n=Object.keys(e);for(let o=0,f=n.length;o<f;o++){const y=e[n[o]];if(y.originalHandler===t&&y.delegationSelector===r)return y}return null}function cH(e,t,r){const n=typeof t=="string",o=n?r:t;let f=uH(e);return sH.has(f)||(f=e),[n,o,f]}function s4(e,t,r,n,o){if(typeof t!="string"||!e)return;if(r||(r=n,n=null),kwe.test(t)){const q=Z=>function(ae){if(!ae.relatedTarget||ae.relatedTarget!==ae.delegateTarget&&!ae.delegateTarget.contains(ae.relatedTarget))return Z.call(this,ae)};n?n=q(n):r=q(r)}const[f,y,s]=cH(t,r,n),k=aH(e),I=k[s]||(k[s]={}),D=lH(I,y,f?r:null);if(D){D.oneOff=D.oneOff&&o;return}const N=oH(y,t.replace(_we,"")),U=f?Twe(e,r,n):Ewe(e,r);U.delegationSelector=f?r:null,U.originalHandler=y,U.oneOff=o,U.uidEvent=N,I[N]=U,e.addEventListener(s,U,f)}function OA(e,t,r,n,o){const f=lH(t[r],n,o);f&&(e.removeEventListener(r,f,!!o),delete t[r][f.uidEvent])}function Awe(e,t,r,n){const o=t[r]||{};Object.keys(o).forEach(f=>{if(f.includes(n)){const y=o[f];OA(e,t,r,y.originalHandler,y.delegationSelector)}})}function uH(e){return e=e.replace(wwe,""),Cwe[e]||e}const Zn={on(e,t,r,n){s4(e,t,r,n,!1)},one(e,t,r,n){s4(e,t,r,n,!0)},off(e,t,r,n){if(typeof t!="string"||!e)return;const[o,f,y]=cH(t,r,n),s=y!==t,k=aH(e),I=t.startsWith(".");if(typeof f<"u"){if(!k||!k[y])return;OA(e,k,y,f,o?r:null);return}I&&Object.keys(k).forEach(N=>{Awe(e,k,N,t.slice(1))});const D=k[y]||{};Object.keys(D).forEach(N=>{const U=N.replace(Swe,"");if(!s||t.includes(U)){const q=D[N];OA(e,k,y,q.originalHandler,q.delegationSelector)}})},trigger(e,t,r){if(typeof t!="string"||!e)return null;const n=rH(),o=uH(t),f=t!==o,y=sH.has(o);let s,k=!0,I=!0,D=!1,N=null;return f&&n&&(s=n.Event(t,r),n(e).trigger(s),k=!s.isPropagationStopped(),I=!s.isImmediatePropagationStopped(),D=s.isDefaultPrevented()),y?(N=document.createEvent("HTMLEvents"),N.initEvent(o,k,!0)):N=new CustomEvent(t,{bubbles:k,cancelable:!0}),typeof r<"u"&&Object.keys(r).forEach(U=>{Object.defineProperty(N,U,{get(){return r[U]}})}),D&&N.preventDefault(),I&&e.dispatchEvent(N),N.defaultPrevented&&typeof s<"u"&&s.preventDefault(),N}},Iwe="5.1.3";class Pwe{constructor(t){t=LA(t),t&&(this._element=t,lf.setData(this._element,this.constructor.DATA_KEY,this))}dispose(){lf.removeData(this._element,this.constructor.DATA_KEY),Zn.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(t=>{this[t]=null})}_queueCallback(t,r,n=!0){iH(t,r,n)}static getInstance(t){return lf.getData(LA(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return Iwe}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`te.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}function mE(e){return e==="true"?!0:e==="false"?!1:e===Number(e).toString()?Number(e):e===""||e==="null"?null:e}function gE(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Es={setDataAttribute(e,t,r){e.setAttribute(`data-te-${gE(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-te-${gE(t)}`)},getDataAttributes(e){if(!e)return{};const t={};return Object.keys(e.dataset).filter(r=>r.startsWith("te")).forEach(r=>{if(r.startsWith("teClass"))return;let n=r.replace(/^te/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=mE(e.dataset[r])}),t},getDataClassAttributes(e){if(!e)return{};const t={...e.dataset};return Object.keys(t).filter(r=>r.startsWith("teClass")).forEach(r=>{let n=r.replace(/^teClass/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=mE(t[r])}),t},getDataAttribute(e,t){return mE(e.getAttribute(`data-te-${gE(t)}`))},offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position(e){return{top:e.offsetTop,left:e.offsetLeft}},style(e,t){Object.assign(e.style,t)},toggleClass(e,t){e&&yE(t).forEach(r=>{e.classList.contains(r)?e.classList.remove(r):e.classList.add(r)})},addClass(e,t){yE(t).forEach(r=>!e.classList.contains(r)&&e.classList.add(r))},addStyle(e,t){Object.keys(t).forEach(r=>{e.style[r]=t[r]})},removeClass(e,t){yE(t).forEach(r=>e.classList.contains(r)&&e.classList.remove(r))},hasClass(e,t){return e.classList.contains(t)},maxOffset(e){const t=e.getBoundingClientRect();return{top:t.top+Math.max(document.body.scrollTop,document.documentElement.scrollTop,window.scrollY),left:t.left+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft,window.scrollX)}}};function yE(e){return typeof e=="string"?e.split(" "):Array.isArray(e)?e:!1}const Rwe=3,po={closest(e,t){return e.closest(t)},matches(e,t){return e.matches(t)},find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){const r=[];let n=e.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&n.nodeType!==Rwe;)this.matches(n,t)&&r.push(n),n=n.parentNode;return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(this.matches(r,t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(", ");return this.find(t,e).filter(r=>!GS(r)&&WS(r))}};pa();pa();pa();pa();pa();pa();const o4=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",a4=".sticky-top";let Mwe=class{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",r=>r+t),this._setElementAttributes(o4,"paddingRight",r=>r+t),this._setElementAttributes(a4,"marginRight",r=>r-t)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,n){const o=this.getWidth(),f=y=>{if(y!==this._element&&window.innerWidth>y.clientWidth+o)return;this._saveInitialAttribute(y,r);const s=window.getComputedStyle(y)[r];y.style[r]=`${n(Number.parseFloat(s))}px`};this._applyManipulationCallback(t,f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes(o4,"paddingRight"),this._resetElementAttributes(a4,"marginRight")}_saveInitialAttribute(t,r){const n=t.style[r];n&&Es.setDataAttribute(t,r,n)}_resetElementAttributes(t,r){const n=o=>{const f=Es.getDataAttribute(o,r);typeof f>"u"?o.style.removeProperty(r):(Es.removeDataAttribute(o,r),o.style[r]=f)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,r){UR(t)?r(t):po.find(t,this._element).forEach(r)}isOverflowing(){return this.getWidth()>0}};const Lwe={isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null,backdropClasses:null},Owe={isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)",backdropClasses:"(array|null)"},hH="backdrop",l4=`mousedown.te.${hH}`;class Dwe{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){if(!this._config.isVisible){ef(t);return}this._append(),this._config.isAnimated&&tH(this._getElement());const r=this._config.backdropClasses||["opacity-50","transition-all","duration-300","ease-in-out","fixed","top-0","left-0","z-[1040]","bg-black","w-screen","h-screen"];Es.removeClass(this._getElement(),"opacity-0"),Es.addClass(this._getElement(),r),this._element.setAttribute("data-te-backdrop-show",""),this._emulateAnimation(()=>{ef(t)})}hide(t){if(!this._config.isVisible){ef(t);return}this._element.removeAttribute("data-te-backdrop-show"),this._getElement().classList.add("opacity-0"),this._getElement().classList.remove("opacity-50"),this._emulateAnimation(()=>{this.dispose(),ef(t)})}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("opacity-50"),this._element=t}return this._element}_getConfig(t){return t={...Lwe,...typeof t=="object"?t:{}},t.rootElement=LA(t.rootElement),kv(hH,t,Owe),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),Zn.on(this._getElement(),l4,()=>{ef(this._config.clickCallback)}),this._isAppended=!0)}dispose(){this._isAppended&&(Zn.off(this._element,l4),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){iH(t,this._getElement(),this._config.isAnimated)}}class zwe{constructor(t,r={},n){this._element=t,this._toggler=n,this._event=r.event||"blur",this._condition=r.condition||(()=>!0),this._selector=r.selector||'button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])',this._onlyVisible=r.onlyVisible||!1,this._focusableElements=[],this._firstElement=null,this._lastElement=null,this.handler=o=>{this._condition(o)&&!o.shiftKey&&o.target===this._lastElement?(o.preventDefault(),this._firstElement.focus()):this._condition(o)&&o.shiftKey&&o.target===this._firstElement&&(o.preventDefault(),this._lastElement.focus())}}trap(){this._setElements(),this._init(),this._setFocusTrap()}disable(){this._focusableElements.forEach(t=>{t.removeEventListener(this._event,this.handler)}),this._toggler&&this._toggler.focus()}update(){this._setElements(),this._setFocusTrap()}_init(){const t=r=>{!this._firstElement||r.key!=="Tab"||this._focusableElements.includes(r.target)||(r.preventDefault(),this._firstElement.focus(),window.removeEventListener("keydown",t))};window.addEventListener("keydown",t)}_filterVisible(t){return t.filter(r=>{if(!WS(r))return!1;const n=po.parents(r,"*");for(let o=0;o<n.length;o++){const f=window.getComputedStyle(n[o]);if(f&&(f.display==="none"||f.visibility==="hidden"))return!1}return!0})}_setElements(){this._focusableElements=po.focusableChildren(this._element),this._onlyVisible&&(this._focusableElements=this._filterVisible(this._focusableElements)),this._firstElement=this._focusableElements[0],this._lastElement=this._focusableElements[this._focusableElements.length-1]}_setFocusTrap(){this._focusableElements.forEach((t,r)=>{r===this._focusableElements.length-1||r===0?t.addEventListener(this._event,this.handler):t.removeEventListener(this._event,this.handler)})}}let c4=[];const Nwe=(e,t="hide")=>{const r=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;c4.includes(n)||(c4.push(n),Zn.on(document,r,`[data-te-${n}-dismiss]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),GS(this))return;const f=$R(this)||this.closest(`.${n}`)||this.closest(`[data-te-${n}-init]`);f&&e.getOrCreateInstance(f)[t]()}))},xE="modal",jwe="te.modal",Vl=`.${jwe}`,u4="Escape",h4={backdrop:!0,keyboard:!0,focus:!0,modalNonInvasive:!1},Fwe={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",modalNonInvasive:"boolean"},Bwe={show:"transform-none",static:"scale-[1.02]",staticProperties:"transition-scale duration-300 ease-in-out"},$we={show:"string",static:"string",staticProperties:"string"},Uwe=`hide${Vl}`,Vwe=`hidePrevented${Vl}`,Hwe=`hidden${Vl}`,Wwe=`show${Vl}`,Gwe=`shown${Vl}`,d4=`resize${Vl}`,f4=`click.dismiss${Vl}`,p4=`keydown.dismiss${Vl}`,Xwe=`mouseup.dismiss${Vl}`,m4=`mousedown.dismiss${Vl}`,g4="data-te-modal-open",y4="data-te-open",Zy="[data-te-modal-dialog-ref]",qwe="[data-te-modal-body-ref]";class Rf extends Pwe{constructor(t,r,n){super(t),this._config=this._getConfig(r),this._classes=this._getClasses(n),this._dialog=po.findOne(Zy,this._element),this._backdrop=this._config.modalNonInvasive?null:this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new Mwe,this._didInit=!1,this._init()}static get Default(){return h4}static get NAME(){return xE}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||Zn.trigger(this._element,Wwe,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),!this._config.modalNonInvasive&&this._scrollBar.hide(),document.body.setAttribute(g4,"true"),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),Zn.on(this._dialog,m4,()=>{Zn.one(this._element,Xwe,r=>{r.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showElement(t),!this._config.modalNonInvasive&&this._showBackdrop())}hide(){if(!this._isShown||this._isTransitioning||Zn.trigger(this._element,Uwe).defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.disable(),po.findOne(Zy,this._element).classList.remove(this._classes.show),Zn.off(this._element,f4),Zn.off(this._dialog,m4),this._queueCallback(()=>this._hideModal(),this._element,t),this._element.removeAttribute(y4)}dispose(){[window,this._dialog].forEach(t=>Zn.off(t,Vl)),this._backdrop&&this._backdrop.dispose(),this._focustrap.disable(),super.dispose()}handleUpdate(){this._adjustDialog()}_init(){this._didInit||(Nwe(Rf),this._didInit=!0)}_initializeBackDrop(){return new Dwe({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new zwe(this._element,{event:"keydown",condition:t=>t.key==="Tab"})}_getConfig(t){return t={...h4,...Es.getDataAttributes(this._element),...typeof t=="object"?t:{}},kv(xE,t,Fwe),t}_getClasses(t){const r=Es.getDataClassAttributes(this._element);return t={...Bwe,...r,...t},kv(xE,t,$we),t}_showElement(t){const r=this._isAnimated(),n=po.findOne(qwe,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.classList.remove("hidden"),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.setAttribute(`${y4}`,"true"),this._element.scrollTop=0;const o=po.findOne(Zy,this._element);o.classList.add(this._classes.show),o.classList.remove("opacity-0"),o.classList.add("opacity-100"),n&&(n.scrollTop=0),r&&tH(this._element);const f=()=>{this._config.focus&&this._focustrap.trap(),this._isTransitioning=!1,Zn.trigger(this._element,Gwe,{relatedTarget:t})};this._queueCallback(f,this._dialog,r)}_setEscapeEvent(){this._isShown?Zn.on(document,p4,t=>{this._config.keyboard&&t.key===u4?(t.preventDefault(),this.hide()):!this._config.keyboard&&t.key===u4&&this._triggerBackdropTransition()}):Zn.off(this._element,p4)}_setResizeEvent(){this._isShown?Zn.on(window,d4,()=>this._adjustDialog()):Zn.off(window,d4)}_hideModal(){const t=po.findOne(Zy,this._element);t.classList.remove(this._classes.show),t.classList.remove("opacity-100"),t.classList.add("opacity-0"),setTimeout(()=>{this._element.style.display="none"},300),this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop&&this._backdrop.hide(()=>{document.body.removeAttribute(g4),this._resetAdjustments(),!this._config.modalNonInvasive&&this._scrollBar.reset(),Zn.trigger(this._element,Hwe)})}_showBackdrop(t){Zn.on(this._element,f4,r=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}r.target===r.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop&&this._backdrop.show(t)}_isAnimated(){return!!po.findOne(Zy,this._element)}_triggerBackdropTransition(){if(Zn.trigger(this._element,Vwe).defaultPrevented)return;const{classList:t,scrollHeight:r,style:n}=this._element,o=r>document.documentElement.clientHeight;!o&&n.overflowY==="hidden"||t.contains(this._classes.static)||(o||(n.overflowY="hidden"),t.add(...this._classes.static.split(" ")),t.add(...this._classes.staticProperties.split(" ")),this._queueCallback(()=>{t.remove(this._classes.static),setTimeout(()=>{t.remove(...this._classes.staticProperties.split(" "))},300),o||this._queueCallback(()=>{n.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),n=r>0;(!n&&t&&!pa()||n&&!t&&pa())&&(this._element.style.paddingLeft=`${r}px`),(n&&!t&&!pa()||!n&&t&&pa())&&(this._element.style.paddingRight=`${r}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){const n=Rf.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](r)}})}}pa(),pa();(()=>{var e={454:(n,o,f)=>{f.d(o,{Z:()=>k});var y=f(645),s=f.n(y)()(function(I){return I[1]});s.push([n.id,"INPUT:-webkit-autofill,SELECT:-webkit-autofill,TEXTAREA:-webkit-autofill{animation-name:onautofillstart}INPUT:not(:-webkit-autofill),SELECT:not(:-webkit-autofill),TEXTAREA:not(:-webkit-autofill){animation-name:onautofillcancel}@keyframes onautofillstart{}@keyframes onautofillcancel{}",""]);const k=s},645:n=>{n.exports=function(o){var f=[];return f.toString=function(){return this.map(function(y){var s=o(y);return y[2]?"@media ".concat(y[2]," {").concat(s,"}"):s}).join("")},f.i=function(y,s,k){typeof y=="string"&&(y=[[null,y,""]]);var I={};if(k)for(var D=0;D<this.length;D++){var N=this[D][0];N!=null&&(I[N]=!0)}for(var U=0;U<y.length;U++){var q=[].concat(y[U]);k&&I[q[0]]||(s&&(q[2]?q[2]="".concat(s," and ").concat(q[2]):q[2]=s),f.push(q))}},f}},810:()=>{(function(){if(typeof window<"u")try{var n=new window.CustomEvent("test",{cancelable:!0});if(n.preventDefault(),n.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch{var o=function(f,y){var s,k;return(y=y||{}).bubbles=!!y.bubbles,y.cancelable=!!y.cancelable,(s=document.createEvent("CustomEvent")).initCustomEvent(f,y.bubbles,y.cancelable,y.detail),k=s.preventDefault,s.preventDefault=function(){k.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch{this.defaultPrevented=!0}},s};o.prototype=window.Event.prototype,window.CustomEvent=o}})()},379:(n,o,f)=>{var y,s=function(){var K={};return function(he){if(K[he]===void 0){var de=document.querySelector(he);if(window.HTMLIFrameElement&&de instanceof window.HTMLIFrameElement)try{de=de.contentDocument.head}catch{de=null}K[he]=de}return K[he]}}(),k=[];function I(K){for(var he=-1,de=0;de<k.length;de++)if(k[de].identifier===K){he=de;break}return he}function D(K,he){for(var de={},Ae=[],Te=0;Te<K.length;Te++){var Ue=K[Te],Pe=he.base?Ue[0]+he.base:Ue[0],$e=de[Pe]||0,Ve="".concat(Pe," ").concat($e);de[Pe]=$e+1;var Fe=I(Ve),Ye={css:Ue[1],media:Ue[2],sourceMap:Ue[3]};Fe!==-1?(k[Fe].references++,k[Fe].updater(Ye)):k.push({identifier:Ve,updater:W(Ye,he),references:1}),Ae.push(Ve)}return Ae}function N(K){var he=document.createElement("style"),de=K.attributes||{};if(de.nonce===void 0){var Ae=f.nc;Ae&&(de.nonce=Ae)}if(Object.keys(de).forEach(function(Ue){he.setAttribute(Ue,de[Ue])}),typeof K.insert=="function")K.insert(he);else{var Te=s(K.insert||"head");if(!Te)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Te.appendChild(he)}return he}var U,q=(U=[],function(K,he){return U[K]=he,U.filter(Boolean).join(`
`)});function Z(K,he,de,Ae){var Te=de?"":Ae.media?"@media ".concat(Ae.media," {").concat(Ae.css,"}"):Ae.css;if(K.styleSheet)K.styleSheet.cssText=q(he,Te);else{var Ue=document.createTextNode(Te),Pe=K.childNodes;Pe[he]&&K.removeChild(Pe[he]),Pe.length?K.insertBefore(Ue,Pe[he]):K.appendChild(Ue)}}function ae(K,he,de){var Ae=de.css,Te=de.media,Ue=de.sourceMap;if(Te?K.setAttribute("media",Te):K.removeAttribute("media"),Ue&&typeof btoa<"u"&&(Ae+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(Ue))))," */")),K.styleSheet)K.styleSheet.cssText=Ae;else{for(;K.firstChild;)K.removeChild(K.firstChild);K.appendChild(document.createTextNode(Ae))}}var ve=null,ie=0;function W(K,he){var de,Ae,Te;if(he.singleton){var Ue=ie++;de=ve||(ve=N(he)),Ae=Z.bind(null,de,Ue,!1),Te=Z.bind(null,de,Ue,!0)}else de=N(he),Ae=ae.bind(null,de,he),Te=function(){(function(Pe){if(Pe.parentNode===null)return!1;Pe.parentNode.removeChild(Pe)})(de)};return Ae(K),function(Pe){if(Pe){if(Pe.css===K.css&&Pe.media===K.media&&Pe.sourceMap===K.sourceMap)return;Ae(K=Pe)}else Te()}}n.exports=function(K,he){(he=he||{}).singleton||typeof he.singleton=="boolean"||(he.singleton=(y===void 0&&(y=!!(window&&document&&document.all&&!window.atob)),y));var de=D(K=K||[],he);return function(Ae){if(Ae=Ae||[],Object.prototype.toString.call(Ae)==="[object Array]"){for(var Te=0;Te<de.length;Te++){var Ue=I(de[Te]);k[Ue].references--}for(var Pe=D(Ae,he),$e=0;$e<de.length;$e++){var Ve=I(de[$e]);k[Ve].references===0&&(k[Ve].updater(),k.splice(Ve,1))}de=Pe}}}}},t={};function r(n){var o=t[n];if(o!==void 0)return o.exports;var f=t[n]={id:n,exports:{}};return e[n](f,f.exports,r),f.exports}r.n=n=>{var o=n&&n.__esModule?()=>n.default:()=>n;return r.d(o,{a:o}),o},r.d=(n,o)=>{for(var f in o)r.o(o,f)&&!r.o(n,f)&&Object.defineProperty(n,f,{enumerable:!0,get:o[f]})},r.o=(n,o)=>Object.prototype.hasOwnProperty.call(n,o),(()=>{var n=r(379),o=r.n(n),f=r(454);function y(k){if(!k.hasAttribute("autocompleted")){k.setAttribute("autocompleted","");var I=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null});k.dispatchEvent(I)||(k.value="")}}function s(k){k.hasAttribute("autocompleted")&&(k.removeAttribute("autocompleted"),k.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}o()(f.Z,{insert:"head",singleton:!1}),f.Z.locals,r(810),document.addEventListener("animationstart",function(k){k.animationName==="onautofillstart"?y(k.target):s(k.target)},!0),document.addEventListener("input",function(k){k.inputType!=="insertReplacementText"&&"data"in k?s(k.target):y(k.target)},!0)})()})();const vE="ripple",r_="te.ripple",Ywe="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%",Zwe=["[data-te-ripple-init]"],bE=[0,0,0],Kwe=[{name:"primary",gradientColor:"#3B71CA"},{name:"secondary",gradientColor:"#9FA6B2"},{name:"success",gradientColor:"#14A44D"},{name:"danger",gradientColor:"#DC4C64"},{name:"warning",gradientColor:"#E4A11B"},{name:"info",gradientColor:"#54B4D3"},{name:"light",gradientColor:"#fbfbfb"},{name:"dark",gradientColor:"#262626"}],x4=.5,Jwe={rippleCentered:!1,rippleColor:"",rippleColorDark:"",rippleDuration:"500ms",rippleRadius:0,rippleUnbound:!1},Qwe={rippleCentered:"boolean",rippleColor:"string",rippleColorDark:"string",rippleDuration:"string",rippleRadius:"number",rippleUnbound:"boolean"},eSe={ripple:"relative overflow-hidden inline-block align-bottom",rippleWave:"rounded-[50%] opacity-50 pointer-events-none absolute touch-none scale-0 transition-[transform,_opacity] ease-[cubic-bezier(0,0,0.15,1),_cubic-bezier(0,0,0.15,1)] z-[999]",unbound:"overflow-visible"},tSe={ripple:"string",rippleWave:"string",unbound:"string"};let XS=class dH{constructor(t,r,n){this._element=t,this._options=this._getConfig(r),this._classes=this._getClasses(n),this._element&&(lf.setData(t,r_,this),Es.addClass(this._element,this._classes.ripple)),this._clickHandler=this._createRipple.bind(this),this._rippleTimer=null,this._isMinWidthSet=!1,this._initialClasses=null,this.init()}static get NAME(){return vE}init(){this._addClickEvent(this._element)}dispose(){lf.removeData(this._element,r_),Zn.off(this._element,"click",this._clickHandler),this._element=null,this._options=null}_autoInit(t){Zwe.forEach(r=>{po.closest(t.target,r)&&(this._element=po.closest(t.target,r))}),this._element.style.minWidth||(Es.style(this._element,{"min-width":getComputedStyle(this._element).width}),this._isMinWidthSet=!0),this._options=this._getConfig(),this._classes=this._getClasses(),this._initialClasses=[...this._element.classList],Es.addClass(this._element,this._classes.ripple),this._createRipple(t)}_addClickEvent(t){Zn.on(t,"mousedown",this._clickHandler)}_createRipple(t){this._element.className.indexOf(this._classes.ripple)<0&&Es.addClass(this._element,this._classes.ripple);const{layerX:r,layerY:n}=t,o=t.offsetX||r,f=t.offsetY||n,y=this._element.offsetHeight,s=this._element.offsetWidth,k=this._durationToMsNumber(this._options.rippleDuration),I={offsetX:this._options.rippleCentered?y/2:o,offsetY:this._options.rippleCentered?s/2:f,height:y,width:s},D=this._getDiameter(I),N=this._options.rippleRadius||D/2,U={delay:k*x4,duration:k-k*x4},q={left:this._options.rippleCentered?`${s/2-N}px`:`${o-N}px`,top:this._options.rippleCentered?`${y/2-N}px`:`${f-N}px`,height:`${this._options.rippleRadius*2||D}px`,width:`${this._options.rippleRadius*2||D}px`,transitionDelay:`0s, ${U.delay}ms`,transitionDuration:`${k}ms, ${U.duration}ms`},Z=nH("div");this._createHTMLRipple({wrapper:this._element,ripple:Z,styles:q}),this._removeHTMLRipple({ripple:Z,duration:k})}_createHTMLRipple({wrapper:t,ripple:r,styles:n}){Object.keys(n).forEach(o=>r.style[o]=n[o]),Es.addClass(r,this._classes.rippleWave),r.setAttribute("data-te-ripple-ref",""),this._addColor(r,t),this._toggleUnbound(t),this._appendRipple(r,t)}_removeHTMLRipple({ripple:t,duration:r}){this._rippleTimer&&(clearTimeout(this._rippleTimer),this._rippleTimer=null),t&&setTimeout(()=>{t.classList.add("!opacity-0")},10),this._rippleTimer=setTimeout(()=>{if(t&&(t.remove(),this._element)){po.find("[data-te-ripple-ref]",this._element).forEach(o=>{o.remove()}),this._isMinWidthSet&&(Es.style(this._element,{"min-width":""}),this._isMinWidthSet=!1);const n=this._initialClasses?this._addedNewRippleClasses(this._classes.ripple,this._initialClasses):this._classes.ripple.split(" ");Es.removeClass(this._element,n)}},r)}_addedNewRippleClasses(t,r){return t.split(" ").filter(n=>r.findIndex(o=>n===o)===-1)}_durationToMsNumber(t){return Number(t.replace("ms","").replace("s","000"))}_getConfig(t={}){const r=Es.getDataAttributes(this._element);return t={...Jwe,...r,...t},kv(vE,t,Qwe),t}_getClasses(t={}){const r=Es.getDataClassAttributes(this._element);return t={...eSe,...r,...t},kv(vE,t,tSe),t}_getDiameter({offsetX:t,offsetY:r,height:n,width:o}){const f=r<=n/2,y=t<=o/2,s=(U,q)=>Math.sqrt(U**2+q**2),k=r===n/2&&t===o/2,I={first:f===!0&&y===!1,second:f===!0&&y===!0,third:f===!1&&y===!0,fourth:f===!1&&y===!1},D={topLeft:s(t,r),topRight:s(o-t,r),bottomLeft:s(t,n-r),bottomRight:s(o-t,n-r)};let N=0;return k||I.fourth?N=D.topLeft:I.third?N=D.topRight:I.second?N=D.bottomRight:I.first&&(N=D.bottomLeft),N*2}_appendRipple(t,r){r.appendChild(t),setTimeout(()=>{Es.addClass(t,"opacity-0 scale-100")},50)}_toggleUnbound(t){this._options.rippleUnbound===!0?Es.addClass(t,this._classes.unbound):Es.removeClass(t,this._classes.unbound)}_addColor(t){let r=this._options.rippleColor||"rgb(0,0,0)";(localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(r=this._options.rippleColorDark||this._options.rippleColor);const n=Kwe.find(y=>y.name===r.toLowerCase()),o=n?this._colorToRGB(n.gradientColor).join(","):this._colorToRGB(r).join(","),f=Ywe.split("{{color}}").join(`${o}`);t.style.backgroundImage=`radial-gradient(circle, ${f})`}_colorToRGB(t){function r(f){return f.length<7&&(f=`#${f[1]}${f[1]}${f[2]}${f[2]}${f[3]}${f[3]}`),[parseInt(f.substr(1,2),16),parseInt(f.substr(3,2),16),parseInt(f.substr(5,2),16)]}function n(f){const y=document.body.appendChild(document.createElement("fictum")),s="rgb(1, 2, 3)";return y.style.color=s,y.style.color!==s||(y.style.color=f,y.style.color===s||y.style.color==="")?bE:(f=getComputedStyle(y).color,document.body.removeChild(y),f)}function o(f){return f=f.match(/[.\d]+/g).map(y=>+Number(y)),f.length=3,f}return t.toLowerCase()==="transparent"?bE:t[0]==="#"?r(t):(t.indexOf("rgb")===-1&&(t=n(t)),t.indexOf("rgb")===0?o(t):bE)}static autoInitial(t){return function(r){t._autoInit(r)}}static jQueryInterface(t){return this.each(function(){return lf.getData(this,r_)?null:new dH(this,t)})}static getInstance(t){return lf.getData(t,r_)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}};pa();pa();gwe("chips-input-");const ah={plugins:{legend:{labels:{color:"rgb(102,102,102)"}}}},rSe={line:{options:{...ah,elements:{line:{backgroundColor:"rgba(59, 112, 202, 0.0)",borderColor:"rgb(59, 112, 202)",borderWidth:2,tension:0},point:{borderColor:"rgb(59, 112, 202)",backgroundColor:"rgb(59, 112, 202)"}},responsive:!0,legend:{display:!0},tooltips:{intersect:!1,mode:"index"},datasets:{borderColor:"red"},scales:{x:{stacked:!0,grid:{display:!1},ticks:{fontColor:"rgba(0,0,0, 0.5)"}},y:{stacked:!1,grid:{borderDash:[2],drawBorder:!1,zeroLineColor:"rgba(0,0,0,0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{fontColor:"rgba(0,0,0, 0.5)"}}}}},bar:{options:{...ah,backgroundColor:"rgb(59, 112, 202)",borderWidth:0,responsive:!0,legend:{display:!0},tooltips:{intersect:!1,mode:"index"},scales:{x:{stacked:!0,grid:{display:!1},ticks:{fontColor:"rgba(0,0,0, 0.5)"}},y:{stacked:!0,grid:{borderDash:[2],drawBorder:!1,zeroLineColor:"rgba(0,0,0,0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{fontColor:"rgba(0,0,0, 0.5)"}}}}},pie:{options:{...ah,elements:{arc:{backgroundColor:"rgb(59, 112, 202)"}},responsive:!0,legend:{display:!0}}},doughnut:{options:{...ah,elements:{arc:{backgroundColor:"rgb(59, 112, 202)"}},responsive:!0,legend:{display:!0}}},polarArea:{options:{...ah,elements:{arc:{backgroundColor:"rgba(59, 112, 202, 0.5)"}},responsive:!0,legend:{display:!0}}},radar:{options:{...ah,elements:{line:{backgroundColor:"rgba(59, 112, 202, 0.5)",borderColor:"rgb(59, 112, 202)",borderWidth:2},point:{borderColor:"rgb(59, 112, 202)",backgroundColor:"rgb(59, 112, 202)"}},responsive:!0,legend:{display:!0}}},scatter:{options:{...ah,elements:{line:{backgroundColor:"rgba(59, 112, 202, 0.5)",borderColor:"rgb(59, 112, 202)",borderWidth:2,tension:0},point:{borderColor:"rgb(59, 112, 202)",backgroundColor:"rgba(59, 112, 202, 0.5)"}},responsive:!0,legend:{display:!0},tooltips:{intersect:!1,mode:"index"},datasets:{borderColor:"red"},scales:{x:{stacked:!0,grid:{display:!1},ticks:{fontColor:"rgba(0,0,0, 0.5)"}},y:{stacked:!1,grid:{borderDash:[2],drawBorder:!1,zeroLineColor:"rgba(0,0,0,0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{fontColor:"rgba(0,0,0, 0.5)"}}}}},bubble:{options:{...ah,elements:{point:{borderColor:"rgb(59, 112, 202)",backgroundColor:"rgba(59, 112, 202, 0.5)"}},responsive:!0,legend:{display:!0},scales:{x:{grid:{display:!1},ticks:{fontColor:"rgba(0,0,0, 0.5)"}},y:{grid:{borderDash:[2],drawBorder:!1,zeroLineColor:"rgba(0,0,0,0)",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{fontColor:"rgba(0,0,0, 0.5)"}}}}}};var qS=function(e){this.element=e,this.handlers={}},fH={isEmpty:{configurable:!0}};qS.prototype.bind=function(e,t){typeof this.handlers[e]>"u"&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)};qS.prototype.unbind=function(e,t){var r=this;this.handlers[e]=this.handlers[e].filter(function(n){return t&&n!==t?!0:(r.element.removeEventListener(e,n,!1),!1)})};qS.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)};fH.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(qS.prototype,fH);typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),typeof navigator<"u"&&navigator.msMaxTouchPoints,typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent);nH("div");const nSe=e=>{bwe(()=>{const t=rH();if(t){const r=e.NAME,n=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=n,e.jQueryInterface)}})},iSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}`,t,function(r){r.preventDefault(),e.getOrCreateInstance(this).toggle()})},sSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}.data-api`,t,function(r){["A","AREA"].includes(this.tagName)&&r.preventDefault(),!GS(this)&&e.getOrCreateInstance(this).show()})},oSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}.data-api`,t,function(r){const n=$R(this);if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),GS(this))return;Zn.one(n,e.EVENT_HIDDEN,()=>{WS(this)&&this.focus()});const o=po.findOne(e.OPEN_SELECTOR);o&&o!==n&&e.getInstance(o).hide(),e.getOrCreateInstance(n).toggle(this)})},aSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}`,t,r=>{r.preventDefault();const n=r.target.closest(t);e.getOrCreateInstance(n).toggle()})},lSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}`,t,function(r){const n=$R(this);["A","AREA"].includes(this.tagName)&&r.preventDefault(),Zn.one(n,e.EVENT_SHOW,f=>{f.defaultPrevented||Zn.one(n,e.EVENT_HIDDEN,()=>{WS(this)&&this.focus()})});const o=po.findOne(`[${e.OPEN_SELECTOR}="true"]`);o&&e.getInstance(o).hide(),e.getOrCreateInstance(n).toggle(this)})},cSe=(e,t)=>{Zn.one(document,"mousedown",t,e.autoInitial(new e))},uSe=(e,t)=>{Zn.on(document,`click.te.${e.NAME}.data-api`,t,function(r){(r.target.tagName==="A"||r.delegateTarget&&r.delegateTarget.tagName==="A")&&r.preventDefault();const n=ywe(this);po.find(n).forEach(o=>{e.getOrCreateInstance(o,{toggle:!1}).toggle()})})},hSe=(e,t)=>{[].slice.call(document.querySelectorAll(t)).map(function(r){return new e(r)})},dSe=(e,t)=>{[].slice.call(document.querySelectorAll(t)).map(function(r){return new e(r)})},fSe=(e,t)=>{po.find(t).forEach(r=>{new e(r)}),Zn.on(document,`click.te.${e.NAME}.data-api`,`${t} img:not([data-te-lightbox-disabled])`,e.toggle())},pSe=(e,t)=>{const r=f=>f[0]==="{"&&f[f.length-1]==="}"||f[0]==="["&&f[f.length-1]==="]",n=f=>typeof f!="string"?f:r(f)?JSON.parse(f.replace(/'/g,'"')):f,o=f=>{const y={};return Object.keys(f).forEach(s=>{if(s.match(/dataset.*/)){const k=s.slice(7,8).toLowerCase().concat(s.slice(8));y[k]=n(f[s])}}),y};po.find(t).forEach(f=>{if(Es.getDataAttribute(f,"chart")!=="bubble"&&Es.getDataAttribute(f,"chart")!=="scatter"){const y=Es.getDataAttributes(f),s={data:{datasets:[o(y)]}};return y.chart&&(s.type=y.chart),y.labels&&(s.data.labels=JSON.parse(y.labels.replace(/'/g,'"'))),new e(f,{...s,...rSe[s.type]})}return null})};class mSe{constructor(){this.inits=[]}get initialized(){return this.inits}isInited(t){return this.inits.includes(t)}add(t){this.isInited(t)||this.inits.push(t)}}const DA=new mSe,ux={alert:{name:"Alert",selector:"[data-te-alert-init]",isToggler:!1},animation:{name:"Animate",selector:"[data-te-animation-init]",isToggler:!1},carousel:{name:"Carousel",selector:"[data-te-carousel-init]",isToggler:!1},chips:{name:"ChipsInput",selector:"[data-te-chips-input-init]",isToggler:!1},chip:{name:"Chip",selector:"[data-te-chip-init]",isToggler:!1,onInit:"init"},datepicker:{name:"Datepicker",selector:"[data-te-datepicker-init]",isToggler:!1},datetimepicker:{name:"Datetimepicker",selector:"[data-te-date-timepicker-init]",isToggler:!1},input:{name:"Input",selector:"[data-te-input-wrapper-init]",isToggler:!1},perfectScrollbar:{name:"PerfectScrollbar",selector:"[data-te-perfect-scrollbar-init]",isToggler:!1},rating:{name:"Rating",selector:"[data-te-rating-init]",isToggler:!1},scrollspy:{name:"ScrollSpy",selector:"[data-te-spy='scroll']",isToggler:!1},select:{name:"Select",selector:"[data-te-select-init]",isToggler:!1},sidenav:{name:"Sidenav",selector:"[data-te-sidenav-init]",isToggler:!1},stepper:{name:"Stepper",selector:"[data-te-stepper-init]",isToggler:!1},timepicker:{name:"Timepicker",selector:"[data-te-timepicker-init]",isToggler:!1},toast:{name:"Toast",selector:"[data-te-toast-init]",isToggler:!1},datatable:{name:"Datatable",selector:"[data-te-datatable-init]"},popconfirm:{name:"Popconfirm",selector:"[data-te-toggle='popconfirm']"},validation:{name:"Validation",selector:"[data-te-validation-init]"},smoothScroll:{name:"SmoothScroll",selector:"a[data-te-smooth-scroll-init]"},lazyLoad:{name:"LazyLoad",selector:"[data-te-lazy-load-init]"},clipboard:{name:"Clipboard",selector:"[data-te-clipboard-init]"},infiniteScroll:{name:"InfiniteScroll",selector:"[data-te-infinite-scroll-init]"},loadingManagement:{name:"LoadingManagement",selector:"[data-te-loading-management-init]"},sticky:{name:"Sticky",selector:"[data-te-sticky-init]"},chart:{name:"Chart",selector:"[data-te-chart]",isToggler:!1,advanced:pSe},button:{name:"Button",selector:"[data-te-toggle='button']",isToggler:!0,callback:aSe},collapse:{name:"Collapse",selector:"[data-te-collapse-init]",isToggler:!0,callback:uSe},dropdown:{name:"Dropdown",selector:"[data-te-dropdown-toggle-ref]",isToggler:!0,callback:iSe},modal:{name:"Modal",selector:"[data-te-toggle='modal']",isToggler:!0,callback:lSe},ripple:{name:"Ripple",selector:"[data-te-ripple-init]",isToggler:!0,callback:cSe},offcanvas:{name:"Offcanvas",selector:"[data-te-offcanvas-toggle]",isToggler:!0,callback:oSe},tab:{name:"Tab",selector:"[data-te-toggle='tab'], [data-te-toggle='pill'], [data-te-toggle='list']",isToggler:!0,callback:sSe},tooltip:{name:"Tooltip",selector:"[data-te-toggle='tooltip']",isToggler:!1,callback:hSe},popover:{name:"Popover",selector:"[data-te-toggle='popover']",isToggler:!0,callback:dSe},lightbox:{name:"Lightbox",selector:"[data-te-lightbox-init]",isToggler:!0,callback:fSe},touch:{name:"Touch",selector:"[data-te-touch-init]"}},gSe=e=>ux[e.NAME]||null,ySe=(e,t)=>{if(!e||!t.allowReinits&&DA.isInited(e.NAME))return;DA.add(e.NAME);const r=gSe(e),n=(r==null?void 0:r.isToggler)||!1;if(nSe(e),r!=null&&r.advanced){r==null||r.advanced(e,r==null?void 0:r.selector);return}if(n){r==null||r.callback(e,r==null?void 0:r.selector);return}po.find(r==null?void 0:r.selector).forEach(o=>{let f=e.getInstance(o);f||(f=new e(o),r!=null&&r.onInit&&f[r.onInit]())})},xSe=(e,t)=>{e.forEach(r=>ySe(r,t))},vSe={allowReinits:!1,checkOtherImports:!1},YS=(e,t={})=>{t={...vSe,...t};const r=Object.keys(ux).map(n=>{if(document.querySelector(ux[n].selector)){const o=e[ux[n].name];return!o&&!DA.isInited(n)&&t.checkOtherImports&&console.warn(`Please import ${ux[n].name} from "tw-elements" package and add it to a object parameter inside "initTE" function`),o}});xSe(r,t)},Ac=Object.create(null);Ac.open="0";Ac.close="1";Ac.ping="2";Ac.pong="3";Ac.message="4";Ac.upgrade="5";Ac.noop="6";const J_=Object.create(null);Object.keys(Ac).forEach(e=>{J_[Ac[e]]=e});const zA={type:"error",data:"parser error"},pH=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",mH=typeof ArrayBuffer=="function",gH=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,VR=({type:e,data:t},r,n)=>pH&&t instanceof Blob?r?n(t):v4(t,n):mH&&(t instanceof ArrayBuffer||gH(t))?r?n(t):v4(new Blob([t]),n):n(Ac[e]+(t||"")),v4=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function b4(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let _E;function bSe(e,t){if(pH&&e.data instanceof Blob)return e.data.arrayBuffer().then(b4).then(t);if(mH&&(e.data instanceof ArrayBuffer||gH(e.data)))return t(b4(e.data));VR(e,!1,r=>{_E||(_E=new TextEncoder),t(_E.encode(r))})}const _4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<_4.length;e++)hx[_4.charCodeAt(e)]=e;const _Se=e=>{let t=e.length*.75,r=e.length,n,o=0,f,y,s,k;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const I=new ArrayBuffer(t),D=new Uint8Array(I);for(n=0;n<r;n+=4)f=hx[e.charCodeAt(n)],y=hx[e.charCodeAt(n+1)],s=hx[e.charCodeAt(n+2)],k=hx[e.charCodeAt(n+3)],D[o++]=f<<2|y>>4,D[o++]=(y&15)<<4|s>>2,D[o++]=(s&3)<<6|k&63;return I},wSe=typeof ArrayBuffer=="function",HR=(e,t)=>{if(typeof e!="string")return{type:"message",data:yH(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:SSe(e.substring(1),t)}:J_[r]?e.length>1?{type:J_[r],data:e.substring(1)}:{type:J_[r]}:zA},SSe=(e,t)=>{if(wSe){const r=_Se(e);return yH(r,t)}else return{base64:!0,data:e}},yH=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},xH=String.fromCharCode(30),CSe=(e,t)=>{const r=e.length,n=new Array(r);let o=0;e.forEach((f,y)=>{VR(f,!1,s=>{n[y]=s,++o===r&&t(n.join(xH))})})},kSe=(e,t)=>{const r=e.split(xH),n=[];for(let o=0;o<r.length;o++){const f=HR(r[o],t);if(n.push(f),f.type==="error")break}return n};function ESe(){return new TransformStream({transform(e,t){bSe(e,r=>{const n=r.length;let o;if(n<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,n);else if(n<65536){o=new Uint8Array(3);const f=new DataView(o.buffer);f.setUint8(0,126),f.setUint16(1,n)}else{o=new Uint8Array(9);const f=new DataView(o.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(r)})}})}let wE;function n_(e){return e.reduce((t,r)=>t+r.length,0)}function i_(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let o=0;o<t;o++)r[o]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function TSe(e,t){wE||(wE=new TextDecoder);const r=[];let n=0,o=-1,f=!1;return new TransformStream({transform(y,s){for(r.push(y);;){if(n===0){if(n_(r)<1)break;const k=i_(r,1);f=(k[0]&128)===128,o=k[0]&127,o<126?n=3:o===126?n=1:n=2}else if(n===1){if(n_(r)<2)break;const k=i_(r,2);o=new DataView(k.buffer,k.byteOffset,k.length).getUint16(0),n=3}else if(n===2){if(n_(r)<8)break;const k=i_(r,8),I=new DataView(k.buffer,k.byteOffset,k.length),D=I.getUint32(0);if(D>Math.pow(2,53-32)-1){s.enqueue(zA);break}o=D*Math.pow(2,32)+I.getUint32(4),n=3}else{if(n_(r)<o)break;const k=i_(r,o);s.enqueue(HR(f?k:wE.decode(k),t)),n=0}if(o===0||o>e){s.enqueue(zA);break}}}})}const vH=4;function Xs(e){if(e)return ASe(e)}function ASe(e){for(var t in Xs.prototype)e[t]=Xs.prototype[t];return e}Xs.prototype.on=Xs.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Xs.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Xs.prototype.off=Xs.prototype.removeListener=Xs.prototype.removeAllListeners=Xs.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===t||n.fn===t){r.splice(o,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Xs.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,t)}return this};Xs.prototype.emitReserved=Xs.prototype.emit;Xs.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Xs.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nl=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function bH(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const ISe=nl.setTimeout,PSe=nl.clearTimeout;function ZS(e,t){t.useNativeTimers?(e.setTimeoutFn=ISe.bind(nl),e.clearTimeoutFn=PSe.bind(nl)):(e.setTimeoutFn=nl.setTimeout.bind(nl),e.clearTimeoutFn=nl.clearTimeout.bind(nl))}const RSe=1.33;function MSe(e){return typeof e=="string"?LSe(e):Math.ceil((e.byteLength||e.size)*RSe)}function LSe(e){let t=0,r=0;for(let n=0,o=e.length;n<o;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function OSe(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function DSe(e){let t={},r=e.split("&");for(let n=0,o=r.length;n<o;n++){let f=r[n].split("=");t[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return t}class zSe extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class WR extends Xs{constructor(t){super(),this.writable=!1,ZS(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,r,n){return super.emitReserved("error",new zSe(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=HR(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=OSe(t);return r.length?"?"+r:""}}const _H="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),NA=64,NSe={};let w4=0,s_=0,S4;function C4(e){let t="";do t=_H[e%NA]+t,e=Math.floor(e/NA);while(e>0);return t}function wH(){const e=C4(+new Date);return e!==S4?(w4=0,S4=e):e+"."+C4(w4++)}for(;s_<NA;s_++)NSe[_H[s_]]=s_;let SH=!1;try{SH=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const jSe=SH;function CH(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||jSe))return new XMLHttpRequest}catch{}if(!t)try{return new nl[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function FSe(){}const BSe=function(){return new CH({xdomain:!1}).responseType!=null}();class $Se extends WR{constructor(t){if(super(t),this.polling=!1,typeof location<"u"){const n=location.protocol==="https:";let o=location.port;o||(o=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||o!==t.port}const r=t&&t.forceBase64;this.supportsBinary=BSe&&!r,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};kSe(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,CSe(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=wH()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Ec(this.uri(),t)}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(o,f)=>{this.onError("xhr post error",o,f)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class Ec extends Xs{constructor(t,r){super(),ZS(this,r),this.opts=r,this.method=r.method||"GET",this.uri=t,this.data=r.data!==void 0?r.data:null,this.create()}create(){var t;const r=bH(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;const n=this.xhr=new CH(r);try{n.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let o in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.opts.extraHeaders[o])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this.opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{var o;n.readyState===3&&((o=this.opts.cookieJar)===null||o===void 0||o.parseCookies(n)),n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}typeof document<"u"&&(this.index=Ec.requestsCount++,Ec.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=FSe,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Ec.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Ec.requestsCount=0;Ec.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",k4);else if(typeof addEventListener=="function"){const e="onpagehide"in nl?"pagehide":"unload";addEventListener(e,k4,!1)}}function k4(){for(let e in Ec.requests)Ec.requests.hasOwnProperty(e)&&Ec.requests[e].abort()}const GR=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0))(),o_=nl.WebSocket||nl.MozWebSocket,E4=!0,USe="arraybuffer",T4=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class VSe extends WR{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),r=this.opts.protocols,n=T4?{}:bH(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=E4&&!T4?r?new o_(t,r):new o_(t):new o_(t,r,n)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;VR(n,this.supportsBinary,f=>{const y={};try{E4&&this.ws.send(f)}catch{}o&&GR(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=wH()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}check(){return!!o_}}class HSe extends WR{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(t=>{const r=TSe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),o=ESe();o.readable.pipeTo(t.writable),this.writer=o.writable.getWriter();const f=()=>{n.read().then(({done:s,value:k})=>{s||(this.onPacket(k),f())}).catch(s=>{})};f();const y={type:"open"};this.query.sid&&(y.data=`{"sid":"${this.query.sid}"}`),this.writer.write(y).then(()=>this.onOpen())})}))}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],o=r===t.length-1;this.writer.write(n).then(()=>{o&&GR(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this.transport)===null||t===void 0||t.close()}}const WSe={websocket:VSe,webtransport:HSe,polling:$Se},GSe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,XSe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jA(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let o=GSe.exec(e||""),f={},y=14;for(;y--;)f[XSe[y]]=o[y]||"";return r!=-1&&n!=-1&&(f.source=t,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=qSe(f,f.path),f.queryKey=YSe(f,f.query),f}function qSe(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function YSe(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,f){o&&(r[o]=f)}),r}let kH=class Hp extends Xs{constructor(t,r={}){super(),this.binaryType=USe,this.writeBuffer=[],t&&typeof t=="object"&&(r=t,t=null),t?(t=jA(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=jA(r.host).host),ZS(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=r.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=DSe(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=vH,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new WSe[t](n)}open(){let t;if(this.opts.rememberUpgrade&&Hp.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",r=>this.onClose("transport close",r))}probe(t){let r=this.createTransport(t),n=!1;Hp.priorWebsocketSuccess=!1;const o=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",N=>{if(!n)if(N.type==="pong"&&N.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Hp.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(D(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const U=new Error("probe error");U.transport=r.name,this.emitReserved("upgradeError",U)}}))};function f(){n||(n=!0,D(),r.close(),r=null)}const y=N=>{const U=new Error("probe error: "+N);U.transport=r.name,f(),this.emitReserved("upgradeError",U)};function s(){y("transport closed")}function k(){y("socket closed")}function I(N){r&&N.name!==r.name&&f()}const D=()=>{r.removeListener("open",o),r.removeListener("error",y),r.removeListener("close",s),this.off("close",k),this.off("upgrading",I)};r.once("open",o),r.once("error",y),r.once("close",s),this.once("close",k),this.once("upgrading",I),this.upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onOpen(){if(this.readyState="open",Hp.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let t=0;const r=this.upgrades.length;for(;t<r;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const o=this.writeBuffer[n].data;if(o&&(r+=MSe(o)),n>0&&r>this.maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}write(t,r,n){return this.sendPacket("message",t,r,n),this}send(t,r,n){return this.sendPacket("message",t,r,n),this}sendPacket(t,r,n,o){if(typeof r=="function"&&(o=r,r=void 0),typeof n=="function"&&(o=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const f={type:t,data:r,options:n};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}onError(t){Hp.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,r){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const r=[];let n=0;const o=t.length;for(;n<o;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}};kH.protocol=vH;function ZSe(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=jA(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const f=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+f+":"+n.port+t,n.href=n.protocol+"://"+f+(r&&r.port===n.port?"":":"+n.port),n}const KSe=typeof ArrayBuffer=="function",JSe=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,EH=Object.prototype.toString,QSe=typeof Blob=="function"||typeof Blob<"u"&&EH.call(Blob)==="[object BlobConstructor]",e2e=typeof File=="function"||typeof File<"u"&&EH.call(File)==="[object FileConstructor]";function XR(e){return KSe&&(e instanceof ArrayBuffer||JSe(e))||QSe&&e instanceof Blob||e2e&&e instanceof File}function Q_(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Q_(e[r]))return!0;return!1}if(XR(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Q_(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Q_(e[r]))return!0;return!1}function t2e(e){const t=[],r=e.data,n=e;return n.data=FA(r,t),n.attachments=t.length,{packet:n,buffers:t}}function FA(e,t){if(!e)return e;if(XR(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=FA(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=FA(e[n],t));return r}return e}function r2e(e,t){return e.data=BA(e.data,t),delete e.attachments,e}function BA(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=BA(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=BA(e[r],t));return e}const n2e=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],i2e=5;var Xn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Xn||(Xn={}));class s2e{constructor(t){this.replacer=t}encode(t){return(t.type===Xn.EVENT||t.type===Xn.ACK)&&Q_(t)?this.encodeAsBinary({type:t.type===Xn.EVENT?Xn.BINARY_EVENT:Xn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Xn.BINARY_EVENT||t.type===Xn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=t2e(t),n=this.encodeAsString(r.packet),o=r.buffers;return o.unshift(n),o}}function A4(e){return Object.prototype.toString.call(e)==="[object Object]"}class qR extends Xs{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Xn.BINARY_EVENT;n||r.type===Xn.BINARY_ACK?(r.type=n?Xn.EVENT:Xn.ACK,this.reconstructor=new o2e(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(XR(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Xn[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Xn.BINARY_EVENT||n.type===Xn.BINARY_ACK){const f=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const y=t.substring(f,r);if(y!=Number(y)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(y)}if(t.charAt(r+1)==="/"){const f=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(f,r)}else n.nsp="/";const o=t.charAt(r+1);if(o!==""&&Number(o)==o){const f=r+1;for(;++r;){const y=t.charAt(r);if(y==null||Number(y)!=y){--r;break}if(r===t.length)break}n.id=Number(t.substring(f,r+1))}if(t.charAt(++r)){const f=this.tryParse(t.substr(r));if(qR.isPayloadValid(n.type,f))n.data=f;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Xn.CONNECT:return A4(r);case Xn.DISCONNECT:return r===void 0;case Xn.CONNECT_ERROR:return typeof r=="string"||A4(r);case Xn.EVENT:case Xn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&n2e.indexOf(r[0])===-1);case Xn.ACK:case Xn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class o2e{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=r2e(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const a2e=Object.freeze(Object.defineProperty({__proto__:null,Decoder:qR,Encoder:s2e,get PacketType(){return Xn},protocol:i2e},Symbol.toStringTag,{value:"Module"}));function Rl(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const l2e=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class TH extends Xs{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Rl(t,"open",this.onopen.bind(this)),Rl(t,"packet",this.onpacket.bind(this)),Rl(t,"error",this.onerror.bind(this)),Rl(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){if(l2e.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const n={type:Xn.EVENT,data:r};if(n.options={},n.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const y=this.ids++,s=r.pop();this._registerAckCallback(y,s),n.id=y}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,r){var n;const o=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(o===void 0){this.acks[t]=r;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let y=0;y<this.sendBuffer.length;y++)this.sendBuffer[y].id===t&&this.sendBuffer.splice(y,1);r.call(this,new Error("operation has timed out"))},o);this.acks[t]=(...y)=>{this.io.clearTimeoutFn(f),r.apply(this,[null,...y])}}emitWithAck(t,...r){const n=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,f)=>{r.push((y,s)=>n?y?f(y):o(s):o(y)),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...f)=>n!==this._queue[0]?void 0:(o!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(o)):(this._queue.shift(),r&&r(null,...f)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Xn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Xn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xn.EVENT:case Xn.BINARY_EVENT:this.onevent(t);break;case Xn.ACK:case Xn.BINARY_ACK:this.onack(t);break;case Xn.DISCONNECT:this.ondisconnect();break;case Xn.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...o){n||(n=!0,r.packet({type:Xn.ACK,id:t,data:o}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(r.apply(this,t.data),delete this.acks[t.id])}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Xn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function pg(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}pg.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};pg.prototype.reset=function(){this.attempts=0};pg.prototype.setMin=function(e){this.ms=e};pg.prototype.setMax=function(e){this.max=e};pg.prototype.setJitter=function(e){this.jitter=e};class $A extends Xs{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ZS(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new pg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const o=r.parser||a2e;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new kH(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const o=Rl(r,"open",function(){n.onopen(),t&&t()}),f=s=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",s),t?t(s):this.maybeReconnectOnOpen()},y=Rl(r,"error",f);if(this._timeout!==!1){const s=this._timeout,k=this.setTimeoutFn(()=>{o(),f(new Error("timeout")),r.close()},s);this.opts.autoUnref&&k.unref(),this.subs.push(()=>{this.clearTimeoutFn(k)})}return this.subs.push(o),this.subs.push(y),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Rl(t,"ping",this.onping.bind(this)),Rl(t,"data",this.ondata.bind(this)),Rl(t,"error",this.onerror.bind(this)),Rl(t,"close",this.onclose.bind(this)),Rl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){GR(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new TH(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,r){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ky={};function Wh(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=ZSe(e,t.path||"/socket.io"),n=r.source,o=r.id,f=r.path,y=Ky[o]&&f in Ky[o].nsps,s=t.forceNew||t["force new connection"]||t.multiplex===!1||y;let k;return s?k=new $A(n,t):(Ky[o]||(Ky[o]=new $A(n,t)),k=Ky[o]),r.query&&!t.query&&(t.query=r.queryKey),k.socket(r.path,t)}Object.assign(Wh,{Manager:$A,Socket:TH,io:Wh,connect:Wh});const AH="%[a-f0-9]{2}",I4=new RegExp("("+AH+")|([^%]+?)","gi"),P4=new RegExp("("+AH+")+","gi");function UA(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;const r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],UA(r),UA(n))}function c2e(e){try{return decodeURIComponent(e)}catch{let t=e.match(I4)||[];for(let r=1;r<t.length;r++)e=UA(t,r).join(""),t=e.match(I4)||[];return e}}function u2e(e){const t={"%FE%FF":"","%FF%FE":""};let r=P4.exec(e);for(;r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{const o=c2e(r[0]);o!==r[0]&&(t[r[0]]=o)}r=P4.exec(e)}t["%C2"]="";const n=Object.keys(t);for(const o of n)e=e.replace(new RegExp(o,"g"),t[o]);return e}function h2e(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return u2e(e)}}function IH(e,t){if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e===""||t==="")return[];const r=e.indexOf(t);return r===-1?[]:[e.slice(0,r),e.slice(r+t.length)]}function d2e(e,t){const r={};if(Array.isArray(t))for(const n of t){const o=Object.getOwnPropertyDescriptor(e,n);o!=null&&o.enumerable&&Object.defineProperty(r,n,o)}else for(const n of Reflect.ownKeys(e)){const o=Object.getOwnPropertyDescriptor(e,n);if(o.enumerable){const f=e[n];t(n,f,e)&&Object.defineProperty(r,n,o)}}return r}const f2e=e=>e==null,p2e=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),VA=Symbol("encodeFragmentIdentifier");function m2e(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[$s(t,e),"[",o,"]"].join("")]:[...r,[$s(t,e),"[",$s(o,e),"]=",$s(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[$s(t,e),"[]"].join("")]:[...r,[$s(t,e),"[]=",$s(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[$s(t,e),":list="].join("")]:[...r,[$s(t,e),":list=",$s(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[$s(r,e),t,$s(o,e)].join("")]:[[n,$s(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,$s(t,e)]:[...r,[$s(t,e),"=",$s(n,e)].join("")]}}function g2e(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[...o[r],n]};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[...o[r],n]};case"comma":case"separator":return(r,n,o)=>{const f=typeof n=="string"&&n.includes(e.arrayFormatSeparator),y=typeof n=="string"&&!f&&eu(n,e).includes(e.arrayFormatSeparator);n=y?eu(n,e):n;const s=f||y?n.split(e.arrayFormatSeparator).map(k=>eu(k,e)):n===null?n:eu(n,e);o[r]=s};case"bracket-separator":return(r,n,o)=>{const f=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!f){o[r]=n&&eu(n,e);return}const y=n===null?[]:n.split(e.arrayFormatSeparator).map(s=>eu(s,e));if(o[r]===void 0){o[r]=y;return}o[r]=[...o[r],...y]};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[...[o[r]].flat(),n]}}}function PH(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function $s(e,t){return t.encode?t.strict?p2e(e):encodeURIComponent(e):e}function eu(e,t){return t.decode?h2e(e):e}function RH(e){return Array.isArray(e)?e.sort():typeof e=="object"?RH(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function MH(e){const t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function y2e(e){let t="";const r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function R4(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function YR(e){e=MH(e);const t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function ZR(e,t){t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...t},PH(t.arrayFormatSeparator);const r=g2e(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(const o of e.split("&")){if(o==="")continue;const f=t.decode?o.replace(/\+/g," "):o;let[y,s]=IH(f,"=");y===void 0&&(y=f),s=s===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:eu(s,t),r(eu(y,t),s,n)}for(const[o,f]of Object.entries(n))if(typeof f=="object"&&f!==null)for(const[y,s]of Object.entries(f))f[y]=R4(s,t);else n[o]=R4(f,t);return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,f)=>{const y=n[f];return y&&typeof y=="object"&&!Array.isArray(y)?o[f]=RH(y):o[f]=y,o},Object.create(null))}function LH(e,t){if(!e)return"";t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t},PH(t.arrayFormatSeparator);const r=y=>t.skipNull&&f2e(e[y])||t.skipEmptyString&&e[y]==="",n=m2e(t),o={};for(const[y,s]of Object.entries(e))r(y)||(o[y]=s);const f=Object.keys(o);return t.sort!==!1&&f.sort(t.sort),f.map(y=>{const s=e[y];return s===void 0?"":s===null?$s(y,t):Array.isArray(s)?s.length===0&&t.arrayFormat==="bracket-separator"?$s(y,t)+"[]":s.reduce(n(y),[]).join("&"):$s(y,t)+"="+$s(s,t)}).filter(y=>y.length>0).join("&")}function OH(e,t){var o;t={decode:!0,...t};let[r,n]=IH(e,"#");return r===void 0&&(r=e),{url:((o=r==null?void 0:r.split("?"))==null?void 0:o[0])??"",query:ZR(YR(e),t),...t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:eu(n,t)}:{}}}function DH(e,t){t={encode:!0,strict:!0,[VA]:!0,...t};const r=MH(e.url).split("?")[0]||"",n=YR(e.url),o={...ZR(n,{sort:!1}),...e.query};let f=LH(o,t);f&&(f=`?${f}`);let y=y2e(e.url);if(e.fragmentIdentifier){const s=new URL(r);s.hash=e.fragmentIdentifier,y=t[VA]?s.hash:`#${e.fragmentIdentifier}`}return`${r}${f}${y}`}function zH(e,t,r){r={parseFragmentIdentifier:!0,[VA]:!1,...r};const{url:n,query:o,fragmentIdentifier:f}=OH(e,r);return DH({url:n,query:d2e(o,t),fragmentIdentifier:f},r)}function x2e(e,t,r){const n=Array.isArray(t)?o=>!t.includes(o):(o,f)=>!t(o,f);return zH(e,n,r)}const ba=Object.freeze(Object.defineProperty({__proto__:null,exclude:x2e,extract:YR,parse:ZR,parseUrl:OH,pick:zH,stringify:LH,stringifyUrl:DH},Symbol.toStringTag,{value:"Module"}));YS({Modal:Rf,Ripple:XS});function v2e(){const e=Yo(ve=>ve.driver.driverId),t=Yo(ve=>ve.driver.vehicleType),[r,n]=le.useState(null),[o,f]=le.useState(null),[y,s]=le.useState(null),[k,I]=le.useState(null),[D,N]=le.useState(15),U=Va(),q=Cs();if(le.useEffect(()=>{const ve=Wh("http://localhost:8000",{transports:["websocket"]});return n(ve),ve?ve.on("connect",()=>{console.log("Connected to the Socket.IO server")}):console.log("Can not connect"),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(ie){s(ie.coords.latitude),I(ie.coords.longitude)}),()=>{r==null||r.disconnect(),ve.disconnect(),n(null)}},[]),r&&y&&k){const ve={latitude:y,longitude:k,driverId:e,vehicleType:t};r.on("driverlocationUpdate",ie=>{console.log("Received from server:",ie),r.emit("getdriverlocationUpdate",ve)}),r.on("getDriverLocation",ie=>{if(console.log("getDriverLocation data",ie),ie.driverId==e){const W={latitude:y,longitude:k,driverId:e};r.emit("locationUpdateFromDriver",W)}}),r.on("getDriverConfirmation",ie=>{console.log("getDriverConfirmation data",ie),e==ie.driverId&&f(ie)})}const Z=()=>{r&&(f(null),r.emit("rejectedRide"))},ae=()=>{if(r){const ve={driverId:e};r.emit("approveRide",ve)}};return r&&r.on("sendRideDetails",ve=>{if(console.log("ride confirm data",ve),e==ve.driverId){console.log("driver ride confirm",ve);const ie=ba.stringify(ve);q(`${Ti.rideconfirm}?${ie}`),U(Qv(!1))}}),le.useEffect(()=>{let ve;if(o)return ve=setInterval(()=>{N(ie=>ie-1)},1e3),setTimeout(()=>{f(null)},15e3),()=>{clearInterval(ve)};N(15)},[o]),A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen justify-center mt-9",children:A.jsx("div",{className:"w-10/12 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:"",className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.scheduleRideNotification,className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Ride Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"User Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"count down"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),A.jsx("tbody",{children:o&&A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:o.amount}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:o.userFromLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:o.userToLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:o.rideDistance}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:o.distance}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:D>0?D+"s":"Time's up!"}),A.jsxs("td",{className:"px-6 py-4  dark:text-white",children:[A.jsx("button",{className:"me-5",type:"button",onClick:ae,children:"Approve"}),A.jsx("button",{type:"button",onClick:Z,children:"Reject"})]})]})})]})})]})})})})})}function M4(){return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx(v2e,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}var NH={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Ta,function(){var r,n,o;function f(s,k){if(!r)r=k;else if(!n)n=k;else{var I="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",D={};r(D),o=k(D),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(o.workerUrl=window.URL.createObjectURL(new Blob([I],{type:"text/javascript"})))}}f(["exports"],function(s){var k=typeof self<"u"?self:{},I="2.15.0";let D;const N={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(D==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{D={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):a}catch{D=a}}return D},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!N.API_URL)return null;try{const a=new URL(N.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},U={supported:!1,testSupport:function(a){!ae&&Z&&(ve?ie(a):q=a)}};let q,Z,ae=!1,ve=!1;function ie(a){const i=a.createTexture();a.bindTexture(a.TEXTURE_2D,i);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Z),a.isContextLost())return;U.supported=!0}catch{}a.deleteTexture(i),ae=!0}k.document&&(Z=k.document.createElement("img"),Z.onload=function(){q&&ie(q),q=null,ve=!0},Z.onerror=function(){ae=!0,q=null},Z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const W="01";function K(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var he=de;function de(a,i,u,p){this.cx=3*a,this.bx=3*(u-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=u,this.p2y=p}de.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var u=a,p=0;p<8;p++){var x=this.sampleCurveX(u)-a;if(Math.abs(x)<i)return u;var w=this.sampleCurveDerivativeX(u);if(Math.abs(w)<1e-6)break;u-=x/w}var E=0,R=1;for(u=a,p=0;p<20&&(x=this.sampleCurveX(u),!(Math.abs(x-a)<i));p++)a>x?E=u:R=u,u=.5*(R-E)+E;return u},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var Ae=K(he),Te=Ue;function Ue(a,i){this.x=a,this.y=i}Ue.prototype={clone:function(){return new Ue(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,u=a.y-this.y;return i*i+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),u=Math.sin(a),p=u*this.x+i*this.y;return this.x=i*this.x-u*this.y,this.y=p,this},_rotateAround:function(a,i){var u=Math.cos(a),p=Math.sin(a),x=i.y+p*(this.x-i.x)+u*(this.y-i.y);return this.x=i.x+u*(this.x-i.x)-p*(this.y-i.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ue.convert=function(a){return a instanceof Ue?a:Array.isArray(a)?new Ue(a[0],a[1]):a};var Pe=K(Te);const $e=Math.PI/180,Ve=180/Math.PI;function Fe(a){return a*$e}function Ye(a){return a*Ve}const ft=[[0,0],[1,0],[1,1],[0,1]];function Pt(a){if(a<=0)return 0;if(a>=1)return 1;const i=a*a,u=i*a;return 4*(a<.5?u:3*(a-i)+u-.75)}function or(a,i,u,p){const x=new Ae(a,i,u,p);return function(w){return x.solve(w)}}const xr=or(.25,.1,.25,1);function mt(a,i,u){return Math.min(u,Math.max(i,a))}function Xt(a,i,u){return(u=mt((u-a)/(i-a),0,1))*u*(3-2*u)}function Wt(a,i,u){const p=u-i,x=((a-i)%p+p)%p+i;return x===i?u:x}function Ot(a,i,u){if(!a.length)return u(null,[]);let p=a.length;const x=new Array(a.length);let w=null;a.forEach((E,R)=>{i(E,(j,F)=>{j&&(w=j),x[R]=F,--p==0&&u(w,x)})})}function ut(a){const i=[];for(const u in a)i.push(a[u]);return i}function Vt(a,...i){for(const u of i)for(const p in u)a[p]=u[p];return a}let ir=1;function vt(){return ir++}function Dt(){return function a(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function ur(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Tr(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function fr(a,i){a.forEach(u=>{i[u]&&(i[u]=i[u].bind(i))})}function Cr(a,i){return a.indexOf(i,a.length-i.length)!==-1}function mr(a,i,u){const p={};for(const x in a)p[x]=i.call(u||this,a[x],x,a);return p}function nn(a,i,u){const p={};for(const x in a)i.call(u||this,a[x],x,a)&&(p[x]=a[x]);return p}function Br(a){return Array.isArray(a)?a.map(Br):typeof a=="object"&&a?mr(a,Br):a}const Sn={};function on(a){Sn[a]||(typeof console<"u"&&console.warn(a),Sn[a]=!0)}function Gr(a,i,u){return(u.y-a.y)*(i.x-a.x)>(i.y-a.y)*(u.x-a.x)}function Zi(a){let i=0;for(let u,p,x=0,w=a.length,E=w-1;x<w;E=x++)u=a[x],p=a[E],i+=(p.x-u.x)*(u.y+p.y);return i}function Kr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function En(a){const i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,x,w)=>{const E=x||w;return i[p]=!E||E.toLowerCase(),""}),i["max-age"]){const u=parseInt(i["max-age"],10);isNaN(u)?delete i["max-age"]:i["max-age"]=u}return i}let wi=null;function Hi(a){if(wi==null){const i=a.navigator?a.navigator.userAgent:null;wi=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return wi}function Tt(a){try{const i=k[a];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function pr(a,i){return[a[4*i],a[4*i+1],a[4*i+2],a[4*i+3]]}const Er="mapbox-tiles";let Mr=500,Zt=50,gr,Xr;function Hn(){try{return k.caches}catch{}}function ti(){Hn()&&!gr&&(gr=k.caches.open(Er))}function qn(a){const i=a.indexOf("?");if(i<0)return a;const u=function(x){const w=x.indexOf("?");return w>0?x.slice(w+1).split("&"):[]}(a),p=u.filter(x=>{const w=x.split("=");return w[0]==="language"||w[0]==="worldview"});return p.length?`${a.slice(0,i)}?${p.join("&")}`:a.slice(0,i)}let Ii=1/0;const zi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(zi);class Fn extends Error{constructor(i,u,p){u===401&&gt(p)&&(i+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(i),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ki=Kr()?()=>self.worker&&self.worker.referrer:()=>(k.location.protocol==="blob:"?k.parent:k).location.href,Si=function(a,i){if(!(/^file:/.test(u=a.url)||/^file:/.test(Ki())&&!/^\w+:/.test(u))){if(k.fetch&&k.Request&&k.AbortController&&k.Request.prototype.hasOwnProperty("signal"))return function(p,x){const w=new k.AbortController,E=new k.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:Ki(),referrerPolicy:p.referrerPolicy,signal:w.signal});let R=!1,j=!1;const F=(Y=E.url).indexOf("sku=")>0&&gt(Y);var Y;p.type==="json"&&E.headers.set("Accept","application/json");const te=(ue,fe,be)=>{if(j)return;if(ue&&ue.message!=="SecurityError"&&on(ue.toString()),fe&&be)return ne(fe);const Re=Date.now();k.fetch(E).then(je=>{if(je.ok){const Je=F?je.clone():null;return ne(je,Je,Re)}return x(new Fn(je.statusText,je.status,p.url))}).catch(je=>{je.name!=="AbortError"&&x(new Error(`${je.message} ${p.url}`))})},ne=(ue,fe,be)=>{(p.type==="arrayBuffer"?ue.arrayBuffer():p.type==="json"?ue.json():ue.text()).then(Re=>{j||(fe&&be&&function(je,Je,Be){if(ti(),!gr)return;const Ke={status:Je.status,statusText:Je.statusText,headers:new k.Headers};Je.headers.forEach((kt,wt)=>Ke.headers.set(wt,kt));const nt=En(Je.headers.get("Cache-Control")||"");if(nt["no-store"])return;nt["max-age"]&&Ke.headers.set("Expires",new Date(Be+1e3*nt["max-age"]).toUTCString());const tt=Ke.headers.get("Expires");tt&&(new Date(tt).getTime()-Be<42e4||function(kt,wt){if(Xr===void 0)try{new Response(new ReadableStream),Xr=!0}catch{Xr=!1}Xr?wt(kt.body):kt.blob().then(wt)}(Je,kt=>{const wt=new k.Response(kt,Ke);ti(),gr&&gr.then(zt=>zt.put(qn(je.url),wt)).catch(zt=>on(zt.message))}))}(E,fe,be),R=!0,x(null,Re,ue.headers.get("Cache-Control"),ue.headers.get("Expires")))}).catch(Re=>{j||x(new Error(Re.message))})};return F?function(ue,fe){if(ti(),!gr)return fe(null);const be=qn(ue.url);gr.then(Re=>{Re.match(be).then(je=>{const Je=function(Be){if(!Be)return!1;const Ke=new Date(Be.headers.get("Expires")||0),nt=En(Be.headers.get("Cache-Control")||"");return Ke>Date.now()&&!nt["no-cache"]}(je);Re.delete(be),Je&&Re.put(be,je.clone()),fe(null,je,Je)}).catch(fe)}).catch(fe)}(E,te):te(null,null),{cancel:()=>{j=!0,R||w.abort()}}}(a,i);if(Kr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,i,void 0,!0)}var u;return function(p,x){const w=new k.XMLHttpRequest;w.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(w.responseType="arraybuffer");for(const E in p.headers)w.setRequestHeader(E,p.headers[E]);return p.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=p.credentials==="include",w.onerror=()=>{x(new Error(w.statusText))},w.onload=()=>{if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){let E=w.response;if(p.type==="json")try{E=JSON.parse(w.response)}catch(R){return x(R)}x(null,E,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else x(new Fn(w.statusText,w.status,p.url))},w.send(p.body),{cancel:()=>w.abort()}}(a,i)},is=function(a,i){return Si(Vt(a,{type:"arrayBuffer"}),i)};function Ds(a){const i=k.document.createElement("a");return i.href=a,i.protocol===k.document.location.protocol&&i.host===k.document.location.host}const Ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let we,Ce;we=[],Ce=0;const He=function(a,i){if(U.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Ce>=N.MAX_PARALLEL_IMAGE_REQUESTS){const w={requestParameters:a,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return we.push(w),w}Ce++;let u=!1;const p=()=>{if(!u)for(u=!0,Ce--;we.length&&Ce<N.MAX_PARALLEL_IMAGE_REQUESTS;){const w=we.shift(),{requestParameters:E,callback:R,cancelled:j}=w;j||(w.cancel=He(E,R).cancel)}},x=is(a,(w,E,R,j)=>{p(),w?i(w):E&&(k.createImageBitmap?function(F,Y){const te=new k.Blob([new Uint8Array(F)],{type:"image/png"});k.createImageBitmap(te).then(ne=>{Y(null,ne)}).catch(ne=>{Y(new Error(`Could not load image because of ${ne.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(E,(F,Y)=>i(F,Y,R,j)):function(F,Y){const te=new k.Image,ne=k.URL;te.onload=()=>{Y(null,te),ne.revokeObjectURL(te.src),te.onload=null,k.requestAnimationFrame(()=>{te.src=Ge})},te.onerror=()=>Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ue=new k.Blob([new Uint8Array(F)],{type:"image/png"});te.src=F.byteLength?ne.createObjectURL(ue):Ge}(E,(F,Y)=>i(F,Y,R,j)))});return{cancel:()=>{x.cancel(),p()}}},Qe="NO_ACCESS_TOKEN";function ot(a){return a.indexOf("mapbox:")===0}function gt(a){return N.API_URL_REGEX.test(a)}function yt(a){return N.API_CDN_URL_REGEX.test(a)}function ct(a){return N.API_STYLE_REGEX.test(a)&&!bt(a)}function bt(a){return N.API_SPRITE_REGEX.test(a)}const qt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Kt(a){const i=a.match(qt);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Gt(a){const i=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${i}`}const Dr="mapbox.eventData";function Qr(a){if(!a)return null;const i=a.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(k.atob(i[1]).split("").map(u=>"%"+("00"+u.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Vr{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const u=Qr(N.ACCESS_TOKEN);let p="";return p=u&&u.u?k.btoa(encodeURIComponent(u.u).replace(/%([0-9A-F]{2})/g,(x,w)=>String.fromCharCode(+("0x"+w)))):N.ACCESS_TOKEN||"",i?`${Dr}.${i}:${p}`:`${Dr}:${p}`}fetchEventData(){const i=Tt("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(i)try{const x=k.localStorage.getItem(u);x&&(this.eventData=JSON.parse(x));const w=k.localStorage.getItem(p);w&&(this.anonId=w)}catch{on("Unable to read from LocalStorage")}}saveEventData(){const i=Tt("localStorage"),u=this.getStorageKey(),p=this.getStorageKey("uuid");if(i)try{k.localStorage.setItem(p,this.anonId),Object.keys(this.eventData).length>=1&&k.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{on("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,u,p,x){if(!N.EVENTS_URL)return;const w=Kt(N.EVENTS_URL);w.params.push(`access_token=${x||N.ACCESS_TOKEN||""}`);const E={event:this.type,created:new Date(i).toISOString()},R=u?Vt(E,u):E,j={url:Gt(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([R])};this.pendingRequest=function(F,Y){return Si(Vt(F,{method:"POST"}),Y)}(j,F=>{this.pendingRequest=null,p(F),this.saveEventData(),this.processRequests(x)})}queueRequest(i,u){this.queue.push(i),this.processRequests(u)}}const jr=new class extends Vr{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,i){N.EVENTS_URL&&N.ACCESS_TOKEN&&Array.isArray(a)&&a.some(u=>ot(u)||gt(u))&&this.queueRequest(Date.now(),i)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=Qr(N.ACCESS_TOKEN),u=i?i.u:N.ACCESS_TOKEN;let p=u!==this.eventData.tokenU;Tr(this.anonId)||(this.anonId=Dt(),p=!0);const x=this.queue.shift();if(this.eventData.lastSuccess){const w=new Date(this.eventData.lastSuccess),E=new Date(x),R=(x-this.eventData.lastSuccess)/864e5;p=p||R>=1||R<-1||w.getDate()!==E.getDate()}else p=!0;p?this.postEvent(x,{sdkIdentifier:"mapbox-gl-js",sdkVersion:I,skuId:W,"enabled.telemetry":!1,userId:this.anonId},w=>{w||(this.eventData.lastSuccess=x,this.eventData.tokenU=u)},a):this.processRequests()}},Rr=jr.postTurnstileEvent.bind(jr),Cn=new class extends Vr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,i,u,p){this.skuToken=i,this.errorCb=p,N.EVENTS_URL&&(u||N.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(Qe)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:u}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),Tr(this.anonId)||(this.anonId=Dt()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:I,skuId:W,skuToken:this.skuToken,userId:this.anonId},p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},a))}},Bn=Cn.postMapLoadEvent.bind(Cn),$n=new class extends Vr{constructor(){super("gljs.performance")}postPerformanceEvent(a,i){N.EVENTS_URL&&(a||N.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:i,performanceData:u}=this.queue.shift(),p=function(x){const w=k.performance.getEntriesByType("resource"),E=k.performance.getEntriesByType("mark"),R=function(ne){const ue={};if(ne){for(const fe in ne)if(fe!=="other")for(const be of ne[fe]){const Re=`${fe}ResolveRangeMin`,je=`${fe}ResolveRangeMax`,Je=`${fe}RequestCount`,Be=`${fe}RequestCachedCount`;ue[Re]=Math.min(ue[Re]||1/0,be.startTime),ue[je]=Math.max(ue[je]||-1/0,be.responseEnd);const Ke=nt=>{ue[nt]===void 0&&(ue[nt]=0),++ue[nt]};be.transferSize!==void 0&&be.transferSize===0&&Ke(Be),Ke(Je)}}return ue}(function(ne,ue){const fe={};if(ne)for(const be of ne){const Re=ue(be);fe[Re]===void 0&&(fe[Re]=[]),fe[Re].push(be)}return fe}(w,hs)),j=k.devicePixelRatio,F=k.navigator.connection||k.navigator.mozConnection||k.navigator.webkitConnection,Y={counters:[],metadata:[],attributes:[]},te=(ne,ue,fe)=>{fe!=null&&ne.push({name:ue,value:fe.toString()})};for(const ne in R)te(Y.counters,ne,R[ne]);if(x.interactionRange[0]!==1/0&&x.interactionRange[1]!==-1/0&&(te(Y.counters,"interactionRangeMin",x.interactionRange[0]),te(Y.counters,"interactionRangeMax",x.interactionRange[1])),E)for(const ne of Object.keys(zs)){const ue=zs[ne],fe=E.find(be=>be.name===ue);fe&&te(Y.counters,ue,fe.startTime)}return te(Y.counters,"visibilityHidden",x.visibilityHidden),te(Y.attributes,"style",function(ne){if(ne)for(const ue of ne){const fe=ue.name.split("?")[0];if(ct(fe)){const be=fe.split("/").slice(-2);if(be.length===2)return`mapbox://styles/${be[0]}/${be[1]}`}}}(w)),te(Y.attributes,"terrainEnabled",x.terrainEnabled?"true":"false"),te(Y.attributes,"fogEnabled",x.fogEnabled?"true":"false"),te(Y.attributes,"projection",x.projection),te(Y.attributes,"zoom",x.zoom),te(Y.metadata,"devicePixelRatio",j),te(Y.metadata,"connectionEffectiveType",F?F.effectiveType:void 0),te(Y.metadata,"navigatorUserAgent",k.navigator.userAgent),te(Y.metadata,"screenWidth",k.screen.width),te(Y.metadata,"screenHeight",k.screen.height),te(Y.metadata,"windowWidth",k.innerWidth),te(Y.metadata,"windowHeight",k.innerHeight),te(Y.metadata,"mapWidth",x.width/j),te(Y.metadata,"mapHeight",x.height/j),te(Y.metadata,"webglRenderer",x.renderer),te(Y.metadata,"webglVendor",x.vendor),te(Y.metadata,"sdkVersion",I),te(Y.metadata,"sdkIdentifier","mapbox-gl-js"),Y}(u);for(const x of p.metadata);for(const x of p.counters);for(const x of p.attributes);this.postEvent(i,p,()=>{},a)}},gn=$n.postPerformanceEvent.bind($n),Ni=new class extends Vr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,i,u,p){if(!N.API_URL||!N.SESSION_PATH)return;const x=Kt(N.API_URL+N.SESSION_PATH);x.params.push(`sku=${i||""}`),x.params.push(`access_token=${p||N.ACCESS_TOKEN||""}`);const w={url:Gt(x),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(E,R){return Si(Vt(E,{method:"GET"}),R)}(w,E=>{this.pendingRequest=null,u(E),this.saveEventData(),this.processRequests(p)})}getSessionAPI(a,i,u,p){this.skuToken=i,this.errorCb=p,N.SESSION_PATH&&N.API_URL&&(u||N.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},u):this.errorCb(new Error(Qe)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:u}=this.queue.shift();i&&this.success[i]||this.getSession(u,this.skuToken,p=>{p?this.errorCb(p):i&&(this.success[i]=!0)},a)}},Wn=Ni.getSessionAPI.bind(Ni),Yn=new Set,zs={create:"create",load:"load",fullLoad:"fullLoad"},Ys={mark(a){k.performance.mark(a)},measure(a,i,u){k.performance.measure(a,i,u)}};function hs(a){const i=a.name.split("?")[0];return yt(i)&&i.includes("mapbox-gl.js")?"javascript":yt(i)&&i.includes("mapbox-gl.css")?"css":function(u){return N.API_FONTS_REGEX.test(u)}(i)?"fontRange":bt(i)?"sprite":ct(i)?"style":function(u){return N.API_TILEJSON_REGEX.test(u)}(i)?"tilejson":"other"}const pe=k.performance;function c(a){const i=a?a.url.toString():void 0;return pe.getEntriesByName(i)}let d,m,v,b;const S={now:()=>v!==void 0?v:k.performance.now(),setNow(a){v=a},restoreNow(){v=void 0},frame(a){const i=k.requestAnimationFrame(a);return{cancel:()=>k.cancelAnimationFrame(i)}},getImageData(a,i=0){const{width:u,height:p}=a;b||(b=k.document.createElement("canvas"));const x=b.getContext("2d",{willReadFrequently:!0});if(!x)throw new Error("failed to create canvas 2d context");return(u>b.width||p>b.height)&&(b.width=u,b.height=p),x.clearRect(-i,-i,u+2*i,p+2*i),x.drawImage(a,0,0,u,p),x.getImageData(-i,-i,u+2*i,p+2*i)},resolveURL:a=>(d||(d=k.document.createElement("a")),d.href=a,d.href),get devicePixelRatio(){return k.devicePixelRatio},get prefersReducedMotion(){return!!k.matchMedia&&(m==null&&(m=k.matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};function T(a,i,u){u[a]&&u[a].indexOf(i)!==-1||(u[a]=u[a]||[],u[a].push(i))}function M(a,i,u){if(u&&u[a]){const p=u[a].indexOf(i);p!==-1&&u[a].splice(p,1)}}class z{constructor(i,u={}){Vt(this,u),this.type=i}}class $ extends z{constructor(i,u={}){super("error",Vt({error:i},u))}}class H{on(i,u){return this._listeners=this._listeners||{},T(i,u,this._listeners),this}off(i,u){return M(i,u,this._listeners),M(i,u,this._oneTimeListeners),this}once(i,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},T(i,u,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,u){typeof i=="string"&&(i=new z(i,u||{}));const p=i.type;if(this.listens(p)){i.target=this;const x=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const R of x)R.call(this,i);const w=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const R of w)M(p,R,this._oneTimeListeners),R.call(this,i);const E=this._eventedParent;E&&(Vt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(i))}else i instanceof $&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,u){return this._eventedParent=i,this._eventedParentData=u,this}}var B=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ee(a,...i){for(const u of i)for(const p in u)a[p]=u[p];return a}function re(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ce(a){if(Array.isArray(a))return a.map(ce);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const i={};for(const u in a)i[u]=ce(a[u]);return i}return re(a)}class ye extends Error{constructor(i,u){super(u),this.message=u,this.key=i}}var _e=ye;class Ee{constructor(i,u=[]){this.parent=i,this.bindings={};for(const[p,x]of u)this.bindings[p]=x}concat(i){return new Ee(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var O=Ee;const X={kind:"null"},Q={kind:"number"},xe={kind:"string"},ke={kind:"boolean"},Le={kind:"color"},rt={kind:"object"},Ze={kind:"value"},Et={kind:"collator"},Bt={kind:"formatted"},Nt={kind:"resolvedImage"};function hr(a,i){return{kind:"array",itemType:a,N:i}}function ar(a){if(a.kind==="array"){const i=ar(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}const Jr=[X,Q,xe,ke,Le,Bt,rt,hr(Ze),Nt];function tn(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!tn(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(const u of Jr)if(!tn(u,i))return null}}return`Expected ${ar(a)} but found ${ar(i)} instead.`}function pn(a,i){return i.some(u=>u.kind===a.kind)}function bn(a,i){return i.some(u=>u==="null"?a===null:u==="array"?Array.isArray(a):u==="object"?a&&!Array.isArray(a)&&typeof a=="object":u===typeof a)}var Pn,Jn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function it(a){return(a=Math.round(a))<0?0:a>255?255:a}function Rt(a){return it(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function nr(a){return(i=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:i>1?1:i;var i}function Yr(a,i,u){return u<0?u+=1:u>1&&(u-=1),6*u<1?a+(i-a)*u*6:2*u<1?i:3*u<2?a+(i-a)*(2/3-u)*6:a}try{Pn={}.parseCSSColor=function(a){var i,u=a.replace(/ /g,"").toLowerCase();if(u in Jn)return Jn[u].slice();if(u[0]==="#")return u.length===4?(i=parseInt(u.substr(1),16))>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null:u.length===7&&(i=parseInt(u.substr(1),16))>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null;var p=u.indexOf("("),x=u.indexOf(")");if(p!==-1&&x+1===u.length){var w=u.substr(0,p),E=u.substr(p+1,x-(p+1)).split(","),R=1;switch(w){case"rgba":if(E.length!==4)return null;R=nr(E.pop());case"rgb":return E.length!==3?null:[Rt(E[0]),Rt(E[1]),Rt(E[2]),R];case"hsla":if(E.length!==4)return null;R=nr(E.pop());case"hsl":if(E.length!==3)return null;var j=(parseFloat(E[0])%360+360)%360/360,F=nr(E[1]),Y=nr(E[2]),te=Y<=.5?Y*(F+1):Y+F-Y*F,ne=2*Y-te;return[it(255*Yr(ne,te,j+1/3)),it(255*Yr(ne,te,j)),it(255*Yr(ne,te,j-1/3)),R];default:return null}}return null}}catch{}class Or{constructor(i,u,p,x=1){this.r=i,this.g=u,this.b=p,this.a=x}static parse(i){if(!i)return;if(i instanceof Or)return i;if(typeof i!="string")return;const u=Pn(i);return u?new Or(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toString(){const[i,u,p,x]=this.toArray();return`rgba(${Math.round(i)},${Math.round(u)},${Math.round(p)},${x})`}toArray(){const{r:i,g:u,b:p,a:x}=this;return x===0?[0,0,0,0]:[255*i/x,255*u/x,255*p/x,x]}toArray01(){const{r:i,g:u,b:p,a:x}=this;return x===0?[0,0,0,0]:[i/x,u/x,p/x,x]}toArray01PremultipliedAlpha(){const{r:i,g:u,b:p,a:x}=this;return[i,u,p,x]}}Or.black=new Or(0,0,0,1),Or.white=new Or(1,1,1,1),Or.transparent=new Or(0,0,0,0),Or.red=new Or(1,0,0,1),Or.blue=new Or(0,0,1,1);var $r=Or;class ri{constructor(i,u,p){this.sensitivity=i?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,u){return this.collator.compare(i,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qn{constructor(i,u,p,x,w){this.text=i.normalize?i.normalize():i,this.image=u,this.scale=p,this.fontStack=x,this.textColor=w}}class ni{constructor(i){this.sections=i}static fromString(i){return new ni([new Qn(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof ni?i:ni.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const u of this.sections){if(u.image){i.push(["image",u.image.name]);continue}i.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toArray())),i.push(p)}return i}}class Tn{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Tn({name:i,available:!1}):null}serialize(){return["image",this.name]}}function Fo(a,i,u,p){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[a,i,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[a,i,u,p]:[a,i,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Li(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof $r||a instanceof ri||a instanceof ni||a instanceof Tn)return!0;if(Array.isArray(a)){for(const i of a)if(!Li(i))return!1;return!0}if(typeof a=="object"){for(const i in a)if(!Li(a[i]))return!1;return!0}return!1}function ii(a){if(a===null)return X;if(typeof a=="string")return xe;if(typeof a=="boolean")return ke;if(typeof a=="number")return Q;if(a instanceof $r)return Le;if(a instanceof ri)return Et;if(a instanceof ni)return Bt;if(a instanceof Tn)return Nt;if(Array.isArray(a)){const i=a.length;let u;for(const p of a){const x=ii(p);if(u){if(u===x)continue;u=Ze;break}u=x}return hr(u||Ze,i)}return rt}function Jo(a){const i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof $r||a instanceof ni||a instanceof Tn?a.toString():JSON.stringify(a)}class Bo{constructor(i,u){this.type=i,this.value=u}static parse(i,u){if(i.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Li(i[1]))return u.error("invalid value");const p=i[1];let x=ii(p);const w=u.expectedType;return x.kind!=="array"||x.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(x=w),new Bo(x,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $r?["rgba"].concat(this.value.toArray()):this.value instanceof ni?this.value.serialize():this.value}}var Zs=Bo,Ci=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const Qo={string:xe,number:Q,boolean:ke,object:rt};class ea{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");let p,x=1;const w=i[0];if(w==="array"){let R,j;if(i.length>2){const F=i[1];if(typeof F!="string"||!(F in Qo)||F==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);R=Qo[F],x++}else R=Ze;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return u.error('The length argument to "array" must be a positive integer literal',2);j=i[2],x++}p=hr(R,j)}else p=Qo[w];const E=[];for(;x<i.length;x++){const R=u.parse(i[x],x,Ze);if(!R)return null;E.push(R)}return new ea(p,E)}evaluate(i){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(i);if(!tn(this.type,ii(p)))return p;if(u===this.args.length-1)throw new Ci(`Expected value to be of type ${ar(this.type)}, but found ${ar(ii(p))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,u=[i.kind];if(i.kind==="array"){const p=i.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){u.push(p.kind);const x=i.N;(typeof x=="number"||this.args.length>1)&&u.push(x)}}return u.concat(this.args.map(p=>p.serialize()))}}var Xe=ea;class ht{constructor(i){this.type=Bt,this.sections=i}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const x=[];let w=!1;for(let E=1;E<=i.length-1;++E){const R=i[E];if(w&&typeof R=="object"&&!Array.isArray(R)){w=!1;let j=null;if(R["font-scale"]&&(j=u.parse(R["font-scale"],1,Q),!j))return null;let F=null;if(R["text-font"]&&(F=u.parse(R["text-font"],1,hr(xe)),!F))return null;let Y=null;if(R["text-color"]&&(Y=u.parse(R["text-color"],1,Le),!Y))return null;const te=x[x.length-1];te.scale=j,te.font=F,te.textColor=Y}else{const j=u.parse(i[E],1,Ze);if(!j)return null;const F=j.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,x.push({content:j,scale:null,font:null,textColor:null})}}return new ht(x)}evaluate(i){return new ni(this.sections.map(u=>{const p=u.content.evaluate(i);return ii(p)===Nt?new Qn("",p,null,null,null):new Qn(Jo(p),null,u.scale?u.scale.evaluate(i):null,u.font?u.font.evaluate(i).join(","):null,u.textColor?u.textColor.evaluate(i):null)}))}eachChild(i){for(const u of this.sections)i(u.content),u.scale&&i(u.scale),u.font&&i(u.font),u.textColor&&i(u.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const u of this.sections){i.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),i.push(p)}return i}}class Se{constructor(i){this.type=Nt,this.input=i}static parse(i,u){if(i.length!==2)return u.error("Expected two arguments.");const p=u.parse(i[1],1,xe);return p?new Se(p):u.error("No image name provided.")}evaluate(i){const u=this.input.evaluate(i),p=Tn.fromString(u);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(u)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const et={"to-boolean":ke,"to-color":Le,"to-number":Q,"to-string":xe};class Mt{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expected at least one argument.");const p=i[0];if((p==="to-boolean"||p==="to-string")&&i.length!==2)return u.error("Expected one argument.");const x=et[p],w=[];for(let E=1;E<i.length;E++){const R=u.parse(i[E],E,Ze);if(!R)return null;w.push(R)}return new Mt(x,w)}evaluate(i){if(this.type.kind==="boolean")return!!this.args[0].evaluate(i);if(this.type.kind==="color"){let u,p;for(const x of this.args){if(u=x.evaluate(i),p=null,u instanceof $r)return u;if(typeof u=="string"){const w=i.parseColor(u);if(w)return w}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Fo(u[0],u[1],u[2],u[3]),!p))return new $r(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Ci(p||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const p of this.args){if(u=p.evaluate(i),u===null)return 0;const x=Number(u);if(!isNaN(x))return x}throw new Ci(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?ni.fromString(Jo(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Tn.fromString(Jo(this.args[0].evaluate(i))):Jo(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ht([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Se(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(u=>{i.push(u.serialize())}),i}}var dr=Mt;const Hr=["Unknown","Point","LineString","Polygon"];var kr=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:u,y:p}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(u*i-a[0])+this.featureDistanceData.bearing[1]*(p*i-a[1])}return 0}parseColor(a){let i=this._parseColorCache[a];return i||(i=this._parseColorCache[a]=$r.parse(a)),i}};class en{constructor(i,u,p,x){this.name=i,this.type=u,this._evaluate=p,this.args=x}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,u){const p=i[0],x=en.definitions[p];if(!x)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(x)?x[0]:x.type,E=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,R=E.filter(([F])=>!Array.isArray(F)||F.length===i.length-1);let j=null;for(const[F,Y]of R){j=new vg(u.registry,u.path,null,u.scope);const te=[];let ne=!1;for(let ue=1;ue<i.length;ue++){const fe=i[ue],be=Array.isArray(F)?F[ue-1]:F.type,Re=j.parse(fe,1+te.length,be);if(!Re){ne=!0;break}te.push(Re)}if(!ne)if(Array.isArray(F)&&F.length!==te.length)j.error(`Expected ${F.length} arguments, but found ${te.length} instead.`);else{for(let ue=0;ue<te.length;ue++){const fe=Array.isArray(F)?F[ue]:F.type,be=te[ue];j.concat(ue+1).checkSubtype(fe,be.type)}if(j.errors.length===0)return new en(p,w,Y,te)}}if(R.length===1)u.errors.push(...j.errors);else{const F=(R.length?R:E).map(([te])=>{return ne=te,Array.isArray(ne)?`(${ne.map(ar).join(", ")})`:`(${ar(ne.type)}...)`;var ne}).join(" | "),Y=[];for(let te=1;te<i.length;te++){const ne=u.parse(i[te],1+Y.length);if(!ne)return null;Y.push(ar(ne.type))}u.error(`Expected arguments of type ${F}, but found (${Y.join(", ")}) instead.`)}return null}static register(i,u){en.definitions=u;for(const p in u)i[p]=en}}var wn=en;class Rn{constructor(i,u,p){this.type=Et,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=u}static parse(i,u){if(i.length!==2)return u.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const x=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,ke);if(!x)return null;const w=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,ke);if(!w)return null;let E=null;return p.locale&&(E=u.parse(p.locale,1,xe),!E)?null:new Rn(x,w,E)}evaluate(i){return new ri(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const kn=8192;function ss(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function os(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function ji(a,i){const u=(180+a[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,x=Math.pow(2,i.z);return[Math.round(u*x*kn),Math.round(p*x*kn)]}function yo(a,i,u){const p=a[0]-i[0],x=a[1]-i[1],w=a[0]-u[0],E=a[1]-u[1];return p*E-w*x==0&&p*w<=0&&x*E<=0}function Ks(a,i){let u=!1;for(let E=0,R=i.length;E<R;E++){const j=i[E];for(let F=0,Y=j.length;F<Y-1;F++){if(yo(a,j[F],j[F+1]))return!1;(x=j[F])[1]>(p=a)[1]!=(w=j[F+1])[1]>p[1]&&p[0]<(w[0]-x[0])*(p[1]-x[1])/(w[1]-x[1])+x[0]&&(u=!u)}}var p,x,w;return u}function ta(a,i){for(let u=0;u<i.length;u++)if(Ks(a,i[u]))return!0;return!1}function $o(a,i,u,p){const x=p[0]-u[0],w=p[1]-u[1],E=(a[0]-u[0])*w-x*(a[1]-u[1]),R=(i[0]-u[0])*w-x*(i[1]-u[1]);return E>0&&R<0||E<0&&R>0}function Co(a,i,u){for(const F of u)for(let Y=0;Y<F.length-1;++Y)if((R=[(E=F[Y+1])[0]-(w=F[Y])[0],E[1]-w[1]])[0]*(j=[(x=i)[0]-(p=a)[0],x[1]-p[1]])[1]-R[1]*j[0]!=0&&$o(p,x,w,E)&&$o(w,E,p,x))return!0;var p,x,w,E,R,j;return!1}function Mn(a,i){for(let u=0;u<a.length;++u)if(!Ks(a[u],i))return!1;for(let u=0;u<a.length-1;++u)if(Co(a[u],a[u+1],i))return!1;return!0}function Pu(a,i){for(let u=0;u<i.length;u++)if(Mn(a,i[u]))return!0;return!1}function Hl(a,i,u){const p=[];for(let x=0;x<a.length;x++){const w=[];for(let E=0;E<a[x].length;E++){const R=ji(a[x][E],u);ss(i,R),w.push(R)}p.push(w)}return p}function r0(a,i,u){const p=[];for(let x=0;x<a.length;x++){const w=Hl(a[x],i,u);p.push(w)}return p}function yg(a,i,u,p){if(a[0]<u[0]||a[0]>u[2]){const x=.5*p;let w=a[0]-u[0]>x?-p:u[0]-a[0]>x?p:0;w===0&&(w=a[0]-u[2]>x?-p:u[2]-a[0]>x?p:0),a[0]+=w}ss(i,a)}function n0(a,i,u,p){const x=Math.pow(2,p.z)*kn,w=[p.x*kn,p.y*kn],E=[];if(!a)return E;for(const R of a)for(const j of R){const F=[j.x+w[0],j.y+w[1]];yg(F,i,u,x),E.push(F)}return E}function xg(a,i,u,p){const x=Math.pow(2,p.z)*kn,w=[p.x*kn,p.y*kn],E=[];if(!a)return E;for(const j of a){const F=[];for(const Y of j){const te=[Y.x+w[0],Y.y+w[1]];ss(i,te),F.push(te)}E.push(F)}if(i[2]-i[0]<=x/2){(R=i)[0]=R[1]=1/0,R[2]=R[3]=-1/0;for(const j of E)for(const F of j)yg(F,i,u,x)}var R;return E}class Ru{constructor(i,u){this.type=ke,this.geojson=i,this.geometries=u}static parse(i,u){if(i.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Li(i[1])){const p=i[1];if(p.type==="FeatureCollection")for(let x=0;x<p.features.length;++x){const w=p.features[x].geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new Ru(p,p.features[x].geometry)}else if(p.type==="Feature"){const x=p.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Ru(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ru(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(u,p){const x=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=u.canonicalID();if(!E)return!1;if(p.type==="Polygon"){const R=Hl(p.coordinates,w,E),j=n0(u.geometry(),x,w,E);if(!os(x,w))return!1;for(const F of j)if(!Ks(F,R))return!1}if(p.type==="MultiPolygon"){const R=r0(p.coordinates,w,E),j=n0(u.geometry(),x,w,E);if(!os(x,w))return!1;for(const F of j)if(!ta(F,R))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(u,p){const x=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],E=u.canonicalID();if(!E)return!1;if(p.type==="Polygon"){const R=Hl(p.coordinates,w,E),j=xg(u.geometry(),x,w,E);if(!os(x,w))return!1;for(const F of j)if(!Mn(F,R))return!1}if(p.type==="MultiPolygon"){const R=r0(p.coordinates,w,E),j=xg(u.geometry(),x,w,E);if(!os(x,w))return!1;for(const F of j)if(!Pu(F,R))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Xf=Ru;function Mu(a){if(a instanceof wn&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Xf)return!1;let i=!0;return a.eachChild(u=>{i&&!Mu(u)&&(i=!1)}),i}function dl(a){if(a instanceof wn&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(u=>{i&&!dl(u)&&(i=!1)}),i}function Mc(a,i){if(a instanceof wn&&i.indexOf(a.name)>=0)return!1;let u=!0;return a.eachChild(p=>{u&&!Mc(p,i)&&(u=!1)}),u}class qf{constructor(i,u){this.type=u.type,this.name=i,this.boundExpression=u}static parse(i,u){if(i.length!==2||typeof i[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=i[1];return u.scope.has(p)?new qf(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var i0=qf;class hd{constructor(i,u=[],p,x=new O,w=[]){this.registry=i,this.path=u,this.key=u.map(E=>`[${E}]`).join(""),this.scope=x,this.errors=w,this.expectedType=p}parse(i,u,p,x,w={}){return u?this.concat(u,p,x)._parse(i,w):this._parse(i,w)}_parse(i,u){function p(x,w,E){return E==="assert"?new Xe(w,[x]):E==="coerce"?new dr(w,[x]):x}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=i[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[x];if(w){let E=w.parse(i,this);if(!E)return null;if(this.expectedType){const R=this.expectedType,j=E.type;if(R.kind!=="string"&&R.kind!=="number"&&R.kind!=="boolean"&&R.kind!=="object"&&R.kind!=="array"||j.kind!=="value")if(R.kind!=="color"&&R.kind!=="formatted"&&R.kind!=="resolvedImage"||j.kind!=="value"&&j.kind!=="string"){if(this.checkSubtype(R,j))return null}else E=p(E,R,u.typeAnnotation||"coerce");else E=p(E,R,u.typeAnnotation||"assert")}if(!(E instanceof Zs)&&E.type.kind!=="resolvedImage"&&bg(E)){const R=new kr;try{E=new Zs(E.type,E.evaluate(R))}catch(j){return this.error(j.message),null}}return E}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,u,p){const x=typeof i=="number"?this.path.concat(i):this.path,w=p?this.scope.concat(p):this.scope;return new hd(this.registry,x,u||null,w,this.errors)}error(i,...u){const p=`${this.key}${u.map(x=>`[${x}]`).join("")}`;this.errors.push(new _e(p,i))}checkSubtype(i,u){const p=tn(i,u);return p&&this.error(p),p}}var vg=hd;function bg(a){if(a instanceof i0)return bg(a.boundExpression);if(a instanceof wn&&a.name==="error"||a instanceof Rn||a instanceof Xf)return!1;const i=a instanceof dr||a instanceof Xe;let u=!0;return a.eachChild(p=>{u=i?u&&bg(p):u&&p instanceof Zs}),!!u&&Mu(a)&&Mc(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Yf(a,i){const u=a.length-1;let p,x,w=0,E=u,R=0;for(;w<=E;)if(R=Math.floor((w+E)/2),p=a[R],x=a[R+1],p<=i){if(R===u||i<x)return R;w=R+1}else{if(!(p>i))throw new Ci("Input is not a number.");E=R-1}return 0}class Zf{constructor(i,u,p){this.type=i,this.input=u,this.labels=[],this.outputs=[];for(const[x,w]of p)this.labels.push(x),this.outputs.push(w)}static parse(i,u){if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(i[1],1,Q);if(!p)return null;const x=[];let w=null;u.expectedType&&u.expectedType.kind!=="value"&&(w=u.expectedType);for(let E=1;E<i.length;E+=2){const R=E===1?-1/0:i[E],j=i[E+1],F=E,Y=E+1;if(typeof R!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(x.length&&x[x.length-1][0]>=R)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const te=u.parse(j,Y,w);if(!te)return null;w=w||te.type,x.push([R,te])}return new Zf(w,p,x)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const x=this.input.evaluate(i);if(x<=u[0])return p[0].evaluate(i);const w=u.length;return x>=u[w-1]?p[w-1].evaluate(i):p[Yf(u,x)].evaluate(i)}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&i.push(this.labels[u]),i.push(this.outputs[u].serialize());return i}}var _g=Zf;function Ln(a,i,u){return a*(1-u)+i*u}var dd=Object.freeze({__proto__:null,array:function(a,i,u){return a.map((p,x)=>Ln(p,i[x],u))},color:function(a,i,u){return new $r(Ln(a.r,i.r,u),Ln(a.g,i.g,u),Ln(a.b,i.b,u),Ln(a.a,i.a,u))},number:Ln});const s0=.95047,wg=1.08883,o0=4/29,Lc=6/29,Sg=3*Lc*Lc,i2=Lc*Lc*Lc,s2=Math.PI/180,o2=180/Math.PI;function Cg(a){return a>i2?Math.pow(a,1/3):a/Sg+o0}function kg(a){return a>Lc?a*a*a:Sg*(a-o0)}function Eg(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function Kf(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function a0(a){const i=Kf(a.r),u=Kf(a.g),p=Kf(a.b),x=Cg((.4124564*i+.3575761*u+.1804375*p)/s0),w=Cg((.2126729*i+.7151522*u+.072175*p)/1);return{l:116*w-16,a:500*(x-w),b:200*(w-Cg((.0193339*i+.119192*u+.9503041*p)/wg)),alpha:a.a}}function l0(a){let i=(a.l+16)/116,u=isNaN(a.a)?i:i+a.a/500,p=isNaN(a.b)?i:i-a.b/200;return i=1*kg(i),u=s0*kg(u),p=wg*kg(p),new $r(Eg(3.2404542*u-1.5371385*i-.4985314*p),Eg(-.969266*u+1.8760108*i+.041556*p),Eg(.0556434*u-.2040259*i+1.0572252*p),a.alpha)}function a2(a,i,u){const p=i-a;return a+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const fd={forward:a0,reverse:l0,interpolate:function(a,i,u){return{l:Ln(a.l,i.l,u),a:Ln(a.a,i.a,u),b:Ln(a.b,i.b,u),alpha:Ln(a.alpha,i.alpha,u)}}},Lu={forward:function(a){const{l:i,a:u,b:p}=a0(a),x=Math.atan2(p,u)*o2;return{h:x<0?x+360:x,c:Math.sqrt(u*u+p*p),l:i,alpha:a.a}},reverse:function(a){const i=a.h*s2,u=a.c;return l0({l:a.l,a:Math.cos(i)*u,b:Math.sin(i)*u,alpha:a.alpha})},interpolate:function(a,i,u){return{h:a2(a.h,i.h,u),c:Ln(a.c,i.c,u),l:Ln(a.l,i.l,u),alpha:Ln(a.alpha,i.alpha,u)}}};var Tg=Object.freeze({__proto__:null,hcl:Lu,lab:fd});class pd{constructor(i,u,p,x,w){this.type=i,this.operator=u,this.interpolation=p,this.input=x,this.labels=[],this.outputs=[];for(const[E,R]of w)this.labels.push(E),this.outputs.push(R)}static interpolationFactor(i,u,p,x){let w=0;if(i.name==="exponential")w=Ag(u,i.base,p,x);else if(i.name==="linear")w=Ag(u,1,p,x);else if(i.name==="cubic-bezier"){const E=i.controlPoints;w=new Ae(E[0],E[1],E[2],E[3]).solve(Ag(u,1,p,x))}return w}static parse(i,u){let[p,x,w,...E]=i;if(!Array.isArray(x)||x.length===0)return u.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const F=x[1];if(typeof F!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:F}}else{if(x[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const F=x.slice(1);if(F.length!==4||F.some(Y=>typeof Y!="number"||Y<0||Y>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:F}}}if(i.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(w=u.parse(w,2,Q),!w)return null;const R=[];let j=null;p==="interpolate-hcl"||p==="interpolate-lab"?j=Le:u.expectedType&&u.expectedType.kind!=="value"&&(j=u.expectedType);for(let F=0;F<E.length;F+=2){const Y=E[F],te=E[F+1],ne=F+3,ue=F+4;if(typeof Y!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(R.length&&R[R.length-1][0]>=Y)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const fe=u.parse(te,ue,j);if(!fe)return null;j=j||fe.type,R.push([Y,fe])}return j.kind==="number"||j.kind==="color"||j.kind==="array"&&j.itemType.kind==="number"&&typeof j.N=="number"?new pd(j,p,x,w,R):u.error(`Type ${ar(j)} is not interpolatable.`)}evaluate(i){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(i);const x=this.input.evaluate(i);if(x<=u[0])return p[0].evaluate(i);const w=u.length;if(x>=u[w-1])return p[w-1].evaluate(i);const E=Yf(u,x),R=pd.interpolationFactor(this.interpolation,x,u[E],u[E+1]),j=p[E].evaluate(i),F=p[E+1].evaluate(i);return this.operator==="interpolate"?dd[this.type.kind.toLowerCase()](j,F,R):this.operator==="interpolate-hcl"?Lu.reverse(Lu.interpolate(Lu.forward(j),Lu.forward(F),R)):fd.reverse(fd.interpolate(fd.forward(j),fd.forward(F),R))}eachChild(i){i(this.input);for(const u of this.outputs)i(u)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,i,this.input.serialize()];for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function Ag(a,i,u,p){const x=p-u,w=a-u;return x===0?0:i===1?w/x:(Math.pow(i,w)-1)/(Math.pow(i,x)-1)}var Ha=pd;class Jf{constructor(i,u){this.type=i,this.args=u}static parse(i,u){if(i.length<2)return u.error("Expectected at least one argument.");let p=null;const x=u.expectedType;x&&x.kind!=="value"&&(p=x);const w=[];for(const R of i.slice(1)){const j=u.parse(R,1+w.length,p,void 0,{typeAnnotation:"omit"});if(!j)return null;p=p||j.type,w.push(j)}const E=x&&w.some(R=>tn(x,R.type));return new Jf(E?Ze:p,w)}evaluate(i){let u,p=null,x=0;for(const w of this.args){if(x++,p=w.evaluate(i),p&&p instanceof Tn&&!p.available&&(u||(u=p),p=null,x===this.args.length))return u;if(p!==null)break}return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(u=>{i.push(u.serialize())}),i}}var Ig=Jf;class Qf{constructor(i,u){this.type=u.type,this.bindings=[].concat(i),this.result=u}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const u of this.bindings)i(u[1]);i(this.result)}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let w=1;w<i.length-1;w+=2){const E=i[w];if(typeof E!="string")return u.error(`Expected string, but found ${typeof E} instead.`,w);if(/[^a-zA-Z0-9_]/.test(E))return u.error("Variable names must contain only alphanumeric characters or '_'.",w);const R=u.parse(i[w+1],w+1);if(!R)return null;p.push([E,R])}const x=u.parse(i[i.length-1],i.length-1,u.expectedType,p);return x?new Qf(p,x):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[u,p]of this.bindings)i.push(u,p.serialize());return i.push(this.result.serialize()),i}}var c0=Qf;class Pg{constructor(i,u,p){this.type=i,this.index=u,this.input=p}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Q),x=u.parse(i[2],2,hr(u.expectedType||Ze));return p&&x?new Pg(x.type.itemType,p,x):null}evaluate(i){const u=this.index.evaluate(i),p=this.input.evaluate(i);if(u<0)throw new Ci(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new Ci(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new Ci(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var l2=Pg;class Rg{constructor(i,u){this.type=ke,this.needle=i,this.haystack=u}static parse(i,u){if(i.length!==3)return u.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Ze),x=u.parse(i[2],2,Ze);return p&&x?pn(p.type,[ke,xe,Q,X,Ze])?new Rg(p,x):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ar(p.type)} instead`):null}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(p==null)return!1;if(!bn(u,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${ar(ii(u))} instead.`);if(!bn(p,["string","array"]))throw new Ci(`Expected second argument to be of type array or string, but found ${ar(ii(p))} instead.`);return p.indexOf(u)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ep=Rg;class md{constructor(i,u,p){this.type=Q,this.needle=i,this.haystack=u,this.fromIndex=p}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Ze),x=u.parse(i[2],2,Ze);if(!p||!x)return null;if(!pn(p.type,[ke,xe,Q,X,Ze]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ar(p.type)} instead`);if(i.length===4){const w=u.parse(i[3],3,Q);return w?new md(p,x,w):null}return new md(p,x)}evaluate(i){const u=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!bn(u,["boolean","string","number","null"]))throw new Ci(`Expected first argument to be of type boolean, string, number or null, but found ${ar(ii(u))} instead.`);if(!bn(p,["string","array"]))throw new Ci(`Expected second argument to be of type array or string, but found ${ar(ii(p))} instead.`);if(this.fromIndex){const x=this.fromIndex.evaluate(i);return p.indexOf(u,x)}return p.indexOf(u)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var u0=md;class Mg{constructor(i,u,p,x,w,E){this.inputType=i,this.type=u,this.input=p,this.cases=x,this.outputs=w,this.otherwise=E}static parse(i,u){if(i.length<5)return u.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return u.error("Expected an even number of arguments.");let p,x;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);const w={},E=[];for(let F=2;F<i.length-1;F+=2){let Y=i[F];const te=i[F+1];Array.isArray(Y)||(Y=[Y]);const ne=u.concat(F);if(Y.length===0)return ne.error("Expected at least one branch label.");for(const fe of Y){if(typeof fe!="number"&&typeof fe!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof fe=="number"&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof fe=="number"&&Math.floor(fe)!==fe)return ne.error("Numeric branch labels must be integer values.");if(p){if(ne.checkSubtype(p,ii(fe)))return null}else p=ii(fe);if(w[String(fe)]!==void 0)return ne.error("Branch labels must be unique.");w[String(fe)]=E.length}const ue=u.parse(te,F,x);if(!ue)return null;x=x||ue.type,E.push(ue)}const R=u.parse(i[1],1,Ze);if(!R)return null;const j=u.parse(i[i.length-1],i.length-1,x);return j?R.type.kind!=="value"&&u.concat(1).checkSubtype(p,R.type)?null:new Mg(p,x,R,w,E,j):null}evaluate(i){const u=this.input.evaluate(i);return(ii(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],x={};for(const E of u){const R=x[this.cases[E]];R===void 0?(x[this.cases[E]]=p.length,p.push([this.cases[E],[E]])):p[R][1].push(E)}const w=E=>this.inputType.kind==="number"?Number(E):E;for(const[E,R]of p)i.push(R.length===1?w(R[0]):R.map(w)),i.push(this.outputs[E].serialize());return i.push(this.otherwise.serialize()),i}}var c2=Mg;class Lg{constructor(i,u,p){this.type=i,this.branches=u,this.otherwise=p}static parse(i,u){if(i.length<4)return u.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const x=[];for(let E=1;E<i.length-1;E+=2){const R=u.parse(i[E],E,ke);if(!R)return null;const j=u.parse(i[E+1],E+1,p);if(!j)return null;x.push([R,j]),p=p||j.type}const w=u.parse(i[i.length-1],i.length-1,p);return w?new Lg(p,x,w):null}evaluate(i){for(const[u,p]of this.branches)if(u.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[u,p]of this.branches)i(u),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(u=>{i.push(u.serialize())}),i}}var h0=Lg;class gd{constructor(i,u,p,x){this.type=i,this.input=u,this.beginIndex=p,this.endIndex=x}static parse(i,u){if(i.length<=2||i.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=u.parse(i[1],1,Ze),x=u.parse(i[2],2,Q);if(!p||!x)return null;if(!pn(p.type,[hr(Ze),xe,Ze]))return u.error(`Expected first argument to be of type array or string, but found ${ar(p.type)} instead`);if(i.length===4){const w=u.parse(i[3],3,Q);return w?new gd(p.type,p,x,w):null}return new gd(p.type,p,x)}evaluate(i){const u=this.input.evaluate(i),p=this.beginIndex.evaluate(i);if(!bn(u,["string","array"]))throw new Ci(`Expected first argument to be of type array or string, but found ${ar(ii(u))} instead.`);if(this.endIndex){const x=this.endIndex.evaluate(i);return u.slice(p,x)}return u.slice(p)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var d0=gd;function tp(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function f0(a,i,u,p){return p.compare(i,u)===0}function Ou(a,i,u){const p=a!=="=="&&a!=="!=";return class jH{constructor(w,E,R){this.type=ke,this.lhs=w,this.rhs=E,this.collator=R,this.hasUntypedArgument=w.type.kind==="value"||E.type.kind==="value"}static parse(w,E){if(w.length!==3&&w.length!==4)return E.error("Expected two or three arguments.");const R=w[0];let j=E.parse(w[1],1,Ze);if(!j)return null;if(!tp(R,j.type))return E.concat(1).error(`"${R}" comparisons are not supported for type '${ar(j.type)}'.`);let F=E.parse(w[2],2,Ze);if(!F)return null;if(!tp(R,F.type))return E.concat(2).error(`"${R}" comparisons are not supported for type '${ar(F.type)}'.`);if(j.type.kind!==F.type.kind&&j.type.kind!=="value"&&F.type.kind!=="value")return E.error(`Cannot compare types '${ar(j.type)}' and '${ar(F.type)}'.`);p&&(j.type.kind==="value"&&F.type.kind!=="value"?j=new Xe(F.type,[j]):j.type.kind!=="value"&&F.type.kind==="value"&&(F=new Xe(j.type,[F])));let Y=null;if(w.length===4){if(j.type.kind!=="string"&&F.type.kind!=="string"&&j.type.kind!=="value"&&F.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(Y=E.parse(w[3],3,Et),!Y)return null}return new jH(j,F,Y)}evaluate(w){const E=this.lhs.evaluate(w),R=this.rhs.evaluate(w);if(p&&this.hasUntypedArgument){const j=ii(E),F=ii(R);if(j.kind!==F.kind||j.kind!=="string"&&j.kind!=="number")throw new Ci(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${j.kind}, ${F.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const j=ii(E),F=ii(R);if(j.kind!=="string"||F.kind!=="string")return i(w,E,R)}return this.collator?u(w,E,R,this.collator.evaluate(w)):i(w,E,R)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}serialize(){const w=[a];return this.eachChild(E=>{w.push(E.serialize())}),w}}}const u2=Ou("==",function(a,i,u){return i===u},f0),h2=Ou("!=",function(a,i,u){return i!==u},function(a,i,u,p){return!f0(0,i,u,p)}),d2=Ou("<",function(a,i,u){return i<u},function(a,i,u,p){return p.compare(i,u)<0}),f2=Ou(">",function(a,i,u){return i>u},function(a,i,u,p){return p.compare(i,u)>0}),p2=Ou("<=",function(a,i,u){return i<=u},function(a,i,u,p){return p.compare(i,u)<=0}),p0=Ou(">=",function(a,i,u){return i>=u},function(a,i,u,p){return p.compare(i,u)>=0});class rp{constructor(i,u,p,x,w,E){this.type=xe,this.number=i,this.locale=u,this.currency=p,this.unit=x,this.minFractionDigits=w,this.maxFractionDigits=E}static parse(i,u){if(i.length!==3)return u.error("Expected two arguments.");const p=u.parse(i[1],1,Q);if(!p)return null;const x=i[2];if(typeof x!="object"||Array.isArray(x))return u.error("NumberFormat options argument must be an object.");let w=null;if(x.locale&&(w=u.parse(x.locale,1,xe),!w))return null;let E=null;if(x.currency&&(E=u.parse(x.currency,1,xe),!E))return null;let R=null;if(x.unit&&(R=u.parse(x.unit,1,xe),!R))return null;let j=null;if(x["min-fraction-digits"]&&(j=u.parse(x["min-fraction-digits"],1,Q),!j))return null;let F=null;return x["max-fraction-digits"]&&(F=u.parse(x["max-fraction-digits"],1,Q),!F)?null:new rp(p,w,E,R,j,F)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class Du{constructor(i){this.type=Q,this.input=i}static parse(i,u){if(i.length!==2)return u.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=u.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ar(p.type)} instead.`):new Du(p):null}evaluate(i){const u=this.input.evaluate(i);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Ci(`Expected value to be of type string or array, but found ${ar(ii(u))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(u=>{i.push(u.serialize())}),i}}const m0={"==":u2,"!=":h2,">":f2,"<":d2,">=":p0,"<=":p2,array:Xe,at:l2,boolean:Xe,case:h0,coalesce:Ig,collator:Rn,format:ht,image:Se,in:ep,"index-of":u0,interpolate:Ha,"interpolate-hcl":Ha,"interpolate-lab":Ha,length:Du,let:c0,literal:Zs,match:c2,number:Xe,"number-format":rp,object:Xe,slice:d0,step:_g,string:Xe,"to-boolean":dr,"to-color":dr,"to-number":dr,"to-string":dr,var:i0,within:Xf};function g0(a,[i,u,p,x]){i=i.evaluate(a),u=u.evaluate(a),p=p.evaluate(a);const w=x?x.evaluate(a):1,E=Fo(i,u,p,w);if(E)throw new Ci(E);return new $r(i/255*w,u/255*w,p/255*w,w)}function fl(a,i){return a in i}function np(a,i){const u=i[a];return u===void 0?null:u}function ra(a){return{type:a}}wn.register(m0,{error:[{kind:"error"},[xe],(a,[i])=>{throw new Ci(i.evaluate(a))}],typeof:[xe,[Ze],(a,[i])=>ar(ii(i.evaluate(a)))],"to-rgba":[hr(Q,4),[Le],(a,[i])=>i.evaluate(a).toArray()],rgb:[Le,[Q,Q,Q],g0],rgba:[Le,[Q,Q,Q,Q],g0],has:{type:ke,overloads:[[[xe],(a,[i])=>fl(i.evaluate(a),a.properties())],[[xe,rt],(a,[i,u])=>fl(i.evaluate(a),u.evaluate(a))]]},get:{type:Ze,overloads:[[[xe],(a,[i])=>np(i.evaluate(a),a.properties())],[[xe,rt],(a,[i,u])=>np(i.evaluate(a),u.evaluate(a))]]},"feature-state":[Ze,[xe],(a,[i])=>np(i.evaluate(a),a.featureState||{})],properties:[rt,[],a=>a.properties()],"geometry-type":[xe,[],a=>a.geometryType()],id:[Ze,[],a=>a.id()],zoom:[Q,[],a=>a.globals.zoom],pitch:[Q,[],a=>a.globals.pitch||0],"distance-from-center":[Q,[],a=>a.distanceFromCenter()],"heatmap-density":[Q,[],a=>a.globals.heatmapDensity||0],"line-progress":[Q,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[Q,[],a=>a.globals.skyRadialProgress||0],accumulated:[Ze,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Q,ra(Q),(a,i)=>{let u=0;for(const p of i)u+=p.evaluate(a);return u}],"*":[Q,ra(Q),(a,i)=>{let u=1;for(const p of i)u*=p.evaluate(a);return u}],"-":{type:Q,overloads:[[[Q,Q],(a,[i,u])=>i.evaluate(a)-u.evaluate(a)],[[Q],(a,[i])=>-i.evaluate(a)]]},"/":[Q,[Q,Q],(a,[i,u])=>i.evaluate(a)/u.evaluate(a)],"%":[Q,[Q,Q],(a,[i,u])=>i.evaluate(a)%u.evaluate(a)],ln2:[Q,[],()=>Math.LN2],pi:[Q,[],()=>Math.PI],e:[Q,[],()=>Math.E],"^":[Q,[Q,Q],(a,[i,u])=>Math.pow(i.evaluate(a),u.evaluate(a))],sqrt:[Q,[Q],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Q,[Q],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Q,[Q],(a,[i])=>Math.log(i.evaluate(a))],log2:[Q,[Q],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Q,[Q],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Q,[Q],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Q,[Q],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Q,[Q],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Q,[Q],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Q,[Q],(a,[i])=>Math.atan(i.evaluate(a))],min:[Q,ra(Q),(a,i)=>Math.min(...i.map(u=>u.evaluate(a)))],max:[Q,ra(Q),(a,i)=>Math.max(...i.map(u=>u.evaluate(a)))],abs:[Q,[Q],(a,[i])=>Math.abs(i.evaluate(a))],round:[Q,[Q],(a,[i])=>{const u=i.evaluate(a);return u<0?-Math.round(-u):Math.round(u)}],floor:[Q,[Q],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Q,[Q],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[ke,[xe,Ze],(a,[i,u])=>a.properties()[i.value]===u.value],"filter-id-==":[ke,[Ze],(a,[i])=>a.id()===i.value],"filter-type-==":[ke,[xe],(a,[i])=>a.geometryType()===i.value],"filter-<":[ke,[xe,Ze],(a,[i,u])=>{const p=a.properties()[i.value],x=u.value;return typeof p==typeof x&&p<x}],"filter-id-<":[ke,[Ze],(a,[i])=>{const u=a.id(),p=i.value;return typeof u==typeof p&&u<p}],"filter->":[ke,[xe,Ze],(a,[i,u])=>{const p=a.properties()[i.value],x=u.value;return typeof p==typeof x&&p>x}],"filter-id->":[ke,[Ze],(a,[i])=>{const u=a.id(),p=i.value;return typeof u==typeof p&&u>p}],"filter-<=":[ke,[xe,Ze],(a,[i,u])=>{const p=a.properties()[i.value],x=u.value;return typeof p==typeof x&&p<=x}],"filter-id-<=":[ke,[Ze],(a,[i])=>{const u=a.id(),p=i.value;return typeof u==typeof p&&u<=p}],"filter->=":[ke,[xe,Ze],(a,[i,u])=>{const p=a.properties()[i.value],x=u.value;return typeof p==typeof x&&p>=x}],"filter-id->=":[ke,[Ze],(a,[i])=>{const u=a.id(),p=i.value;return typeof u==typeof p&&u>=p}],"filter-has":[ke,[Ze],(a,[i])=>i.value in a.properties()],"filter-has-id":[ke,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[ke,[hr(xe)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[ke,[hr(Ze)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[ke,[xe,hr(Ze)],(a,[i,u])=>u.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[ke,[xe,hr(Ze)],(a,[i,u])=>function(p,x,w,E){for(;w<=E;){const R=w+E>>1;if(x[R]===p)return!0;x[R]>p?E=R-1:w=R+1}return!1}(a.properties()[i.value],u.value,0,u.value.length-1)],all:{type:ke,overloads:[[[ke,ke],(a,[i,u])=>i.evaluate(a)&&u.evaluate(a)],[ra(ke),(a,i)=>{for(const u of i)if(!u.evaluate(a))return!1;return!0}]]},any:{type:ke,overloads:[[[ke,ke],(a,[i,u])=>i.evaluate(a)||u.evaluate(a)],[ra(ke),(a,i)=>{for(const u of i)if(u.evaluate(a))return!0;return!1}]]},"!":[ke,[ke],(a,[i])=>!i.evaluate(a)],"is-supported-script":[ke,[xe],(a,[i])=>{const u=a.globals&&a.globals.isSupportedScript;return!u||u(i.evaluate(a))}],upcase:[xe,[xe],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[xe,[xe],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[xe,ra(Ze),(a,i)=>i.map(u=>Jo(u.evaluate(a))).join("")],"resolved-locale":[xe,[Et],(a,[i])=>i.evaluate(a).resolvedLocale()]});var yd=m0;function y0(a){return{result:"success",value:a}}function Oc(a){return{result:"error",value:a}}function zu(a){return a["property-type"]==="data-driven"}function ip(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function sp(a){return!!a.expression&&a.expression.interpolated}function On(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function xd(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function x0(a){return a}function op(a,i){const u=i.type==="color",p=a.stops&&typeof a.stops[0][0]=="object",x=p||!(p||a.property!==void 0),w=a.type||(sp(i)?"exponential":"interval");if(u&&((a=ee({},a)).stops&&(a.stops=a.stops.map(F=>[F[0],$r.parse(F[1])])),a.default=$r.parse(a.default?a.default:i.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Tg[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let E,R,j;if(w==="exponential")E=pl;else if(w==="interval")E=ap;else if(w==="categorical"){E=v0,R=Object.create(null);for(const F of a.stops)R[F[0]]=F[1];j=typeof a.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);E=b0}if(p){const F={},Y=[];for(let ue=0;ue<a.stops.length;ue++){const fe=a.stops[ue],be=fe[0].zoom;F[be]===void 0&&(F[be]={zoom:be,type:a.type,property:a.property,default:a.default,stops:[]},Y.push(be)),F[be].stops.push([fe[0].value,fe[1]])}const te=[];for(const ue of Y)te.push([F[ue].zoom,op(F[ue],i)]);const ne={name:"linear"};return{kind:"composite",interpolationType:ne,interpolationFactor:Ha.interpolationFactor.bind(void 0,ne),zoomStops:te.map(ue=>ue[0]),evaluate:({zoom:ue},fe)=>pl({stops:te,base:a.base},i,ue).evaluate(ue,fe)}}if(x){const F=w==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Ha.interpolationFactor.bind(void 0,F),zoomStops:a.stops.map(Y=>Y[0]),evaluate:({zoom:Y})=>E(a,i,Y,R,j)}}return{kind:"source",evaluate(F,Y){const te=Y&&Y.properties?Y.properties[a.property]:void 0;return te===void 0?Nu(a.default,i.default):E(a,i,te,R,j)}}}function Nu(a,i,u){return a!==void 0?a:i!==void 0?i:u!==void 0?u:void 0}function v0(a,i,u,p,x){return Nu(typeof u===x?p[u]:void 0,a.default,i.default)}function ap(a,i,u){if(On(u)!=="number")return Nu(a.default,i.default);const p=a.stops.length;if(p===1||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[p-1][0])return a.stops[p-1][1];const x=Yf(a.stops.map(w=>w[0]),u);return a.stops[x][1]}function pl(a,i,u){const p=a.base!==void 0?a.base:1;if(On(u)!=="number")return Nu(a.default,i.default);const x=a.stops.length;if(x===1||u<=a.stops[0][0])return a.stops[0][1];if(u>=a.stops[x-1][0])return a.stops[x-1][1];const w=Yf(a.stops.map(Y=>Y[0]),u),E=function(Y,te,ne,ue){const fe=ue-ne,be=Y-ne;return fe===0?0:te===1?be/fe:(Math.pow(te,be)-1)/(Math.pow(te,fe)-1)}(u,p,a.stops[w][0],a.stops[w+1][0]),R=a.stops[w][1],j=a.stops[w+1][1];let F=dd[i.type]||x0;if(a.colorSpace&&a.colorSpace!=="rgb"){const Y=Tg[a.colorSpace];F=(te,ne)=>Y.reverse(Y.interpolate(Y.forward(te),Y.forward(ne),E))}return typeof R.evaluate=="function"?{evaluate(...Y){const te=R.evaluate.apply(void 0,Y),ne=j.evaluate.apply(void 0,Y);if(te!==void 0&&ne!==void 0)return F(te,ne,E)}}:F(R,j,E)}function b0(a,i,u){return i.type==="color"?u=$r.parse(u):i.type==="formatted"?u=ni.fromString(u.toString()):i.type==="resolvedImage"?u=Tn.fromString(u.toString()):On(u)===i.type||i.type==="enum"&&i.values[u]||(u=void 0),Nu(u,a.default,i.default)}class lp{constructor(i,u){this.expression=i,this._warningHistory={},this._evaluator=new kr,this._defaultValue=u?function(p){return p.type==="color"&&(xd(p.default)||Array.isArray(p.default))?new $r(0,0,0,0):p.type==="color"?$r.parse(p.default)||null:p.default===void 0?null:p.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(i,u,p,x,w,E,R,j){return this._evaluator.globals=i,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=x||null,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=j||null,this.expression.evaluate(this._evaluator)}evaluate(i,u,p,x,w,E,R,j){this._evaluator.globals=i,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=x||null,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=E||null,this._evaluator.featureTileCoord=R||null,this._evaluator.featureDistanceData=j||null;try{const F=this.expression.evaluate(this._evaluator);if(F==null||typeof F=="number"&&F!=F)return this._defaultValue;if(this._enumValues&&!(F in this._enumValues))throw new Ci(`Expected value to be one of ${Object.keys(this._enumValues).map(Y=>JSON.stringify(Y)).join(", ")}, but found ${JSON.stringify(F)} instead.`);return F}catch(F){return this._warningHistory[F.message]||(this._warningHistory[F.message]=!0,typeof console<"u"&&console.warn(F.message)),this._defaultValue}}}function ju(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in yd}function Fu(a,i){const u=new vg(yd,[],i?function(x){const w={color:Le,string:xe,number:Q,enum:xe,boolean:ke,formatted:Bt,resolvedImage:Nt};return x.type==="array"?hr(w[x.value]||Ze,x.length):w[x.type]}(i):void 0),p=u.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?y0(new lp(p,i)):Oc(u.errors)}class Og{constructor(i,u){this.kind=i,this._styleExpression=u,this.isStateDependent=i!=="constant"&&!dl(u.expression)}evaluateWithoutErrorHandling(i,u,p,x,w,E){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,x,w,E)}evaluate(i,u,p,x,w,E){return this._styleExpression.evaluate(i,u,p,x,w,E)}}class vd{constructor(i,u,p,x){this.kind=i,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=i!=="camera"&&!dl(u.expression),this.interpolationType=x}evaluateWithoutErrorHandling(i,u,p,x,w,E){return this._styleExpression.evaluateWithoutErrorHandling(i,u,p,x,w,E)}evaluate(i,u,p,x,w,E){return this._styleExpression.evaluate(i,u,p,x,w,E)}interpolationFactor(i,u,p){return this.interpolationType?Ha.interpolationFactor(this.interpolationType,i,u,p):0}}function bd(a,i){if((a=Fu(a,i)).result==="error")return a;const u=a.value.expression,p=Mu(u);if(!p&&!zu(i))return Oc([new _e("","data expressions not supported")]);const x=Mc(u,["zoom","pitch","distance-from-center"]);if(!x&&!ip(i))return Oc([new _e("","zoom expressions not supported")]);const w=up(u);return w||x?w instanceof _e?Oc([w]):w instanceof Ha&&!sp(i)?Oc([new _e("",'"interpolate" expressions cannot be used with this property')]):y0(w?new vd(p?"camera":"composite",a.value,w.labels,w instanceof Ha?w.interpolation:void 0):new Og(p?"constant":"source",a.value)):Oc([new _e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class cp{constructor(i,u){this._parameters=i,this._specification=u,ee(this,op(this._parameters,this._specification))}static deserialize(i){return new cp(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function up(a){let i=null;if(a instanceof c0)i=up(a.result);else if(a instanceof Ig){for(const u of a.args)if(i=up(u),i)break}else(a instanceof _g||a instanceof Ha)&&a.input instanceof wn&&a.input.name==="zoom"&&(i=a);return i instanceof _e||a.eachChild(u=>{const p=up(u);p instanceof _e?i=p:!i&&p?i=new _e("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new _e("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Sr{constructor(i,u,p,x){this.message=(i?`${i}: `:"")+p,x&&(this.identifier=x),u!=null&&u.__line__&&(this.line=u.__line__)}}function _a(a){const i=a.key,u=a.value,p=a.valueSpec||{},x=a.objectElementValidators||{},w=a.style,E=a.styleSpec;let R=[];const j=On(u);if(j!=="object")return[new Sr(i,u,`object expected, ${j} found`)];for(const F in u){const Y=F.split(".")[0];let te;x[Y]?te=x[Y]:p[Y]?te=so:x["*"]?te=x["*"]:p["*"]&&(te=so),te?R=R.concat(te({key:(i&&`${i}.`)+F,value:u[F],valueSpec:p[Y]||p["*"],style:w,styleSpec:E,object:u,objectKey:F},u)):R.push(new Sr(i,u[F],`unknown property "${F}"`))}for(const F in p)x[F]||p[F].required&&p[F].default===void 0&&u[F]===void 0&&R.push(new Sr(i,u,`missing required property "${F}"`));return R}function _0(a){const i=a.value,u=a.valueSpec,p=a.style,x=a.styleSpec,w=a.key,E=a.arrayElementValidator||so;if(On(i)!=="array")return[new Sr(w,i,`array expected, ${On(i)} found`)];if(u.length&&i.length!==u.length)return[new Sr(w,i,`array length ${u.length} expected, length ${i.length} found`)];if(u["min-length"]&&i.length<u["min-length"])return[new Sr(w,i,`array length at least ${u["min-length"]} expected, length ${i.length} found`)];let R={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};x.$version<7&&(R.function=u.function),On(u.value)==="object"&&(R=u.value);let j=[];for(let F=0;F<i.length;F++)j=j.concat(E({array:i,arrayIndex:F,value:i[F],valueSpec:R,style:p,styleSpec:x,key:`${w}[${F}]`}));return j}function _d(a){const i=a.key,u=a.value,p=a.valueSpec;let x=On(u);if(x==="number"&&u!=u&&(x="NaN"),x!=="number")return[new Sr(i,u,`number expected, ${x} found`)];if("minimum"in p){let w=p.minimum;if(On(p.minimum)==="array"&&(w=p.minimum[a.arrayIndex]),u<w)return[new Sr(i,u,`${u} is less than the minimum value ${w}`)]}if("maximum"in p){let w=p.maximum;if(On(p.maximum)==="array"&&(w=p.maximum[a.arrayIndex]),u>w)return[new Sr(i,u,`${u} is greater than the maximum value ${w}`)]}return[]}function wd(a){const i=a.valueSpec,u=re(a.value.type);let p,x,w,E={};const R=u!=="categorical"&&a.value.property===void 0,j=!R,F=On(a.value.stops)==="array"&&On(a.value.stops[0])==="array"&&On(a.value.stops[0][0])==="object",Y=_a({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(ue){if(u==="identity")return[new Sr(ue.key,ue.value,'identity function may not have a "stops" property')];let fe=[];const be=ue.value;return fe=fe.concat(_0({key:ue.key,value:be,valueSpec:ue.valueSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:te})),On(be)==="array"&&be.length===0&&fe.push(new Sr(ue.key,be,"array must have at least one stop")),fe},default:function(ue){return so({key:ue.key,value:ue.value,valueSpec:i,style:ue.style,styleSpec:ue.styleSpec})}}});return u==="identity"&&R&&Y.push(new Sr(a.key,a.value,'missing required property "property"')),u==="identity"||a.value.stops||Y.push(new Sr(a.key,a.value,'missing required property "stops"')),u==="exponential"&&a.valueSpec.expression&&!sp(a.valueSpec)&&Y.push(new Sr(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(j&&!zu(a.valueSpec)?Y.push(new Sr(a.key,a.value,"property functions not supported")):R&&!ip(a.valueSpec)&&Y.push(new Sr(a.key,a.value,"zoom functions not supported"))),u!=="categorical"&&!F||a.value.property!==void 0||Y.push(new Sr(a.key,a.value,'"property" property is required')),Y;function te(ue){let fe=[];const be=ue.value,Re=ue.key;if(On(be)!=="array")return[new Sr(Re,be,`array expected, ${On(be)} found`)];if(be.length!==2)return[new Sr(Re,be,`array length 2 expected, length ${be.length} found`)];if(F){if(On(be[0])!=="object")return[new Sr(Re,be,`object expected, ${On(be[0])} found`)];if(be[0].zoom===void 0)return[new Sr(Re,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new Sr(Re,be,"object stop key must have value")];const je=re(be[0].zoom);if(typeof je!="number")return[new Sr(Re,be[0].zoom,"stop zoom values must be numbers")];if(w&&w>je)return[new Sr(Re,be[0].zoom,"stop zoom values must appear in ascending order")];je!==w&&(w=je,x=void 0,E={}),fe=fe.concat(_a({key:`${Re}[0]`,value:be[0],valueSpec:{zoom:{}},style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:_d,value:ne}}))}else fe=fe.concat(ne({key:`${Re}[0]`,value:be[0],valueSpec:{},style:ue.style,styleSpec:ue.styleSpec},be));return ju(ce(be[1]))?fe.concat([new Sr(`${Re}[1]`,be[1],"expressions are not allowed in function stops.")]):fe.concat(so({key:`${Re}[1]`,value:be[1],valueSpec:i,style:ue.style,styleSpec:ue.styleSpec}))}function ne(ue,fe){const be=On(ue.value),Re=re(ue.value),je=ue.value!==null?ue.value:fe;if(p){if(be!==p)return[new Sr(ue.key,je,`${be} stop domain type must match previous stop domain type ${p}`)]}else p=be;if(be!=="number"&&be!=="string"&&be!=="boolean"&&typeof Re!="number"&&typeof Re!="string"&&typeof Re!="boolean")return[new Sr(ue.key,je,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&u!=="categorical"){let Je=`number expected, ${be} found`;return zu(i)&&u===void 0&&(Je+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Sr(ue.key,je,Je)]}return u!=="categorical"||be!=="number"||typeof Re=="number"&&isFinite(Re)&&Math.floor(Re)===Re?u!=="categorical"&&be==="number"&&typeof Re=="number"&&typeof x=="number"&&x!==void 0&&Re<x?[new Sr(ue.key,je,"stop domain values must appear in ascending order")]:(x=Re,u==="categorical"&&Re in E?[new Sr(ue.key,je,"stop domain values must be unique")]:(E[Re]=!0,[])):[new Sr(ue.key,je,`integer expected, found ${String(Re)}`)]}}function Ns(a){const i=(a.expressionContext==="property"?bd:Fu)(ce(a.value),a.valueSpec);if(i.result==="error")return i.value.map(p=>new Sr(`${a.key}${p.key}`,a.value,p.message));const u=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!u.outputDefined())return[new Sr(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!dl(u))return[new Sr(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return Sd(u,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Mc(u,["zoom","feature-state"]))return[new Sr(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Mu(u))return[new Sr(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sd(a,i){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const x of i.valueSpec.expression.parameters)u.delete(x);if(u.size===0)return[];const p=[];return a instanceof wn&&u.has(a.name)?[new Sr(i.key,i.value,`["${a.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(a.eachChild(x=>{p.push(...Sd(x,i))}),p)}function hp(a){const i=a.key,u=a.value,p=a.valueSpec,x=[];return Array.isArray(p.values)?p.values.indexOf(re(u))===-1&&x.push(new Sr(i,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(re(u))===-1&&x.push(new Sr(i,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),x}function Dg(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const i of a.slice(1))if(!Dg(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function dp(a,i="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Dg(a)||(a=$u(a));const u=a;let p=!0;try{p=function(F){if(!Bu(F))return F;let Y=ce(F);return fp(Y),Y=w0(Y),Y}(u)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(u,null,2)}
        `)}const x=B[`filter_${i}`],w=Fu(p,x);let E=null;if(w.result==="error")throw new Error(w.value.map(F=>`${F.key}: ${F.message}`).join(", "));E=(F,Y,te)=>w.value.evaluate(F,Y,{},te);let R=null,j=null;if(p!==u){const F=Fu(u,x);if(F.result==="error")throw new Error(F.value.map(Y=>`${Y.key}: ${Y.message}`).join(", "));R=(Y,te,ne,ue,fe)=>F.value.evaluate(Y,te,{},ne,void 0,void 0,ue,fe),j=!Mu(F.value.expression)}return{filter:E,dynamicFilter:R||void 0,needGeometry:S0(p),needFeature:!!j}}function w0(a){if(!Array.isArray(a))return a;const i=function(u){if(zg.has(u[0])){for(let p=1;p<u.length;p++)if(Bu(u[p]))return!0}return u}(a);return i===!0?i:i.map(u=>w0(u))}function fp(a){let i=!1;const u=[];if(a[0]==="case"){for(let p=1;p<a.length-1;p+=2)i=i||Bu(a[p]),u.push(a[p+1]);u.push(a[a.length-1])}else if(a[0]==="match"){i=i||Bu(a[1]);for(let p=2;p<a.length-1;p+=2)u.push(a[p+1]);u.push(a[a.length-1])}else if(a[0]==="step"){i=i||Bu(a[1]);for(let p=1;p<a.length-1;p+=2)u.push(a[p+1])}i&&(a.length=0,a.push("any",...u));for(let p=1;p<a.length;p++)fp(a[p])}function Bu(a){if(!Array.isArray(a))return!1;if((i=a[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let u=1;u<a.length;u++)if(Bu(a[u]))return!0;return!1}const zg=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function m2(a,i){return a<i?-1:a>i?1:0}function S0(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let i=1;i<a.length;i++)if(S0(a[i]))return!0;return!1}function $u(a){if(!a)return!0;const i=a[0];return a.length<=1?i!=="any":i==="=="?Ng(a[1],a[2],"=="):i==="!="?pp(Ng(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Ng(a[1],a[2],i):i==="any"?(u=a.slice(1),["any"].concat(u.map($u))):i==="all"?["all"].concat(a.slice(1).map($u)):i==="none"?["all"].concat(a.slice(1).map($u).map(pp)):i==="in"?jg(a[1],a.slice(2)):i==="!in"?pp(jg(a[1],a.slice(2))):i==="has"?Fg(a[1]):i==="!has"?pp(Fg(a[1])):i!=="within"||a;var u}function Ng(a,i,u){switch(a){case"$type":return[`filter-type-${u}`,i];case"$id":return[`filter-id-${u}`,i];default:return[`filter-${u}`,a,i]}}function jg(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(u=>typeof u!=typeof i[0])?["filter-in-large",a,["literal",i.sort(m2)]]:["filter-in-small",a,["literal",i]]}}function Fg(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function pp(a){return["!",a]}function Cd(a){return Dg(ce(a.value))?Ns(ee({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):kd(a)}function kd(a){const i=a.value,u=a.key;if(On(i)!=="array")return[new Sr(u,i,`array expected, ${On(i)} found`)];const p=a.styleSpec;let x,w=[];if(i.length<1)return[new Sr(u,i,"filter array must have at least 1 element")];switch(w=w.concat(hp({key:`${u}[0]`,value:i[0],valueSpec:p.filter_operator,style:a.style,styleSpec:a.styleSpec})),re(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&re(i[1])==="$type"&&w.push(new Sr(u,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&w.push(new Sr(u,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(x=On(i[1]),x!=="string"&&w.push(new Sr(`${u}[1]`,i[1],`string expected, ${x} found`)));for(let E=2;E<i.length;E++)x=On(i[E]),re(i[1])==="$type"?w=w.concat(hp({key:`${u}[${E}]`,value:i[E],valueSpec:p.geometry_type,style:a.style,styleSpec:a.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&w.push(new Sr(`${u}[${E}]`,i[E],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let E=1;E<i.length;E++)w=w.concat(kd({key:`${u}[${E}]`,value:i[E],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":x=On(i[1]),i.length!==2?w.push(new Sr(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):x!=="string"&&w.push(new Sr(`${u}[1]`,i[1],`string expected, ${x} found`));break;case"within":x=On(i[1]),i.length!==2?w.push(new Sr(u,i,`filter array for "${i[0]}" operator must have 2 elements`)):x!=="object"&&w.push(new Sr(`${u}[1]`,i[1],`object expected, ${x} found`))}return w}function Bg(a,i){const u=a.key,p=a.style,x=a.styleSpec,w=a.value,E=a.objectKey,R=x[`${i}_${a.layerType}`];if(!R)return[];const j=E.match(/^(.*)-transition$/);if(i==="paint"&&j&&R[j[1]]&&R[j[1]].transition)return so({key:u,value:w,valueSpec:x.transition,style:p,styleSpec:x});const F=a.valueSpec||R[E];if(!F)return[new Sr(u,w,`unknown property "${E}"`)];let Y;if(On(w)==="string"&&zu(F)&&!F.tokens&&(Y=/^{([^}]+)}$/.exec(w))){const ne=`\`{ "type": "identity", "property": ${Y?JSON.stringify(Y[1]):'"_"'} }\``;return[new Sr(u,w,`"${E}" does not support interpolation syntax
Use an identity property function instead: ${ne}.`)]}const te=[];return a.layerType==="symbol"&&(E==="text-field"&&p&&!p.glyphs&&te.push(new Sr(u,w,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&xd(ce(w))&&re(w.type)==="identity"&&te.push(new Sr(u,w,'"text-font" does not support identity functions'))),te.concat(so({key:a.key,value:w,valueSpec:F,style:p,styleSpec:x,expressionContext:"property",propertyType:i,propertyKey:E}))}function C0(a){return Bg(a,"paint")}function $g(a){return Bg(a,"layout")}function k0(a){let i=[];const u=a.value,p=a.key,x=a.style,w=a.styleSpec;u.type||u.ref||i.push(new Sr(p,u,'either "type" or "ref" is required'));let E=re(u.type);const R=re(u.ref);if(u.id){const j=re(u.id);for(let F=0;F<a.arrayIndex;F++){const Y=x.layers[F];re(Y.id)===j&&i.push(new Sr(p,u.id,`duplicate layer id "${u.id}", previously used at line ${Y.id.__line__}`))}}if("ref"in u){let j;["type","source","source-layer","filter","layout"].forEach(F=>{F in u&&i.push(new Sr(p,u[F],`"${F}" is prohibited for ref layers`))}),x.layers.forEach(F=>{re(F.id)===R&&(j=F)}),j?j.ref?i.push(new Sr(p,u.ref,"ref cannot reference another ref layer")):E=re(j.type):typeof R=="string"&&i.push(new Sr(p,u.ref,`ref layer "${R}" not found`))}else if(E!=="background"&&E!=="sky")if(u.source){const j=x.sources&&x.sources[u.source],F=j&&re(j.type);j?F==="vector"&&E==="raster"?i.push(new Sr(p,u.source,`layer "${u.id}" requires a raster source`)):F==="raster"&&E!=="raster"?i.push(new Sr(p,u.source,`layer "${u.id}" requires a vector source`)):F!=="vector"||u["source-layer"]?F==="raster-dem"&&E!=="hillshade"?i.push(new Sr(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||F==="geojson"&&j.lineMetrics||i.push(new Sr(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Sr(p,u,`layer "${u.id}" must specify a "source-layer"`)):i.push(new Sr(p,u.source,`source "${u.source}" not found`))}else i.push(new Sr(p,u,'missing required property "source"'));return i=i.concat(_a({key:p,value:u,valueSpec:w.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>so({key:`${p}.type`,value:u.type,valueSpec:w.layer.type,style:a.style,styleSpec:a.styleSpec,object:u,objectKey:"type"}),filter:j=>Cd(ee({layerType:E},j)),layout:j=>_a({layer:u,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":F=>$g(ee({layerType:E},F))}}),paint:j=>_a({layer:u,key:j.key,value:j.value,valueSpec:{},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":F=>C0(ee({layerType:E},F))}})}})),i}function Wl(a){const i=a.value,u=a.key,p=On(i);return p!=="string"?[new Sr(u,i,`string expected, ${p} found`)]:[]}const E0={promoteId:function({key:a,value:i}){if(On(i)==="string")return Wl({key:a,value:i});{const u=[];for(const p in i)u.push(...Wl({key:`${a}.${p}`,value:i[p]}));return u}}};function T0(a){const i=a.value,u=a.key,p=a.styleSpec,x=a.style;if(!i.type)return[new Sr(u,i,'"type" is required')];const w=re(i.type);let E;switch(w){case"vector":case"raster":case"raster-dem":return E=_a({key:u,value:i,valueSpec:p[`source_${w.replace("-","_")}`],style:a.style,styleSpec:p,objectElementValidators:E0}),E;case"geojson":if(E=_a({key:u,value:i,valueSpec:p.source_geojson,style:x,styleSpec:p,objectElementValidators:E0}),i.cluster)for(const R in i.clusterProperties){const[j,F]=i.clusterProperties[R],Y=typeof j=="string"?[j,["accumulated"],["get",R]]:j;E.push(...Ns({key:`${u}.${R}.map`,value:F,expressionContext:"cluster-map"})),E.push(...Ns({key:`${u}.${R}.reduce`,value:Y,expressionContext:"cluster-reduce"}))}return E;case"video":return _a({key:u,value:i,valueSpec:p.source_video,style:x,styleSpec:p});case"image":return _a({key:u,value:i,valueSpec:p.source_image,style:x,styleSpec:p});case"canvas":return[new Sr(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return hp({key:`${u}.type`,value:i.type,valueSpec:{values:g2(p)},style:x,styleSpec:p})}}function g2(a){return a.source.reduce((i,u)=>{const p=a[u];return p.type.type==="enum"&&(i=i.concat(Object.keys(p.type.values))),i},[])}function A0(a){const i=a.value,u=a.styleSpec,p=u.light,x=a.style;let w=[];const E=On(i);if(i===void 0)return w;if(E!=="object")return w=w.concat([new Sr("light",i,`object expected, ${E} found`)]),w;for(const R in i){const j=R.match(/^(.*)-transition$/);w=w.concat(j&&p[j[1]]&&p[j[1]].transition?so({key:R,value:i[R],valueSpec:u.transition,style:x,styleSpec:u}):p[R]?so({key:R,value:i[R],valueSpec:p[R],style:x,styleSpec:u}):[new Sr(R,i[R],`unknown property "${R}"`)])}return w}function Ug(a){const i=a.value,u=a.key,p=a.style,x=a.styleSpec,w=x.terrain;let E=[];const R=On(i);if(i===void 0)return E;if(R!=="object")return E=E.concat([new Sr("terrain",i,`object expected, ${R} found`)]),E;for(const j in i){const F=j.match(/^(.*)-transition$/);E=E.concat(F&&w[F[1]]&&w[F[1]].transition?so({key:j,value:i[j],valueSpec:x.transition,style:p,styleSpec:x}):w[j]?so({key:j,value:i[j],valueSpec:w[j],style:p,styleSpec:x}):[new Sr(j,i[j],`unknown property "${j}"`)])}if(i.source){const j=p.sources&&p.sources[i.source],F=j&&re(j.type);j?F!=="raster-dem"&&E.push(new Sr(u,i.source,`terrain cannot be used with a source of type ${String(F)}, it only be used with a "raster-dem" source type`)):E.push(new Sr(u,i.source,`source "${i.source}" not found`))}else E.push(new Sr(u,i,'terrain is missing required property "source"'));return E}function I0(a){const i=a.value,u=a.style,p=a.styleSpec,x=p.fog;let w=[];const E=On(i);if(i===void 0)return w;if(E!=="object")return w=w.concat([new Sr("fog",i,`object expected, ${E} found`)]),w;for(const R in i){const j=R.match(/^(.*)-transition$/);w=w.concat(j&&x[j[1]]&&x[j[1]].transition?so({key:R,value:i[R],valueSpec:p.transition,style:u,styleSpec:p}):x[R]?so({key:R,value:i[R],valueSpec:x[R],style:u,styleSpec:p}):[new Sr(R,i[R],`unknown property "${R}"`)])}return w}const P0={"*":()=>[],array:_0,boolean:function(a){const i=a.value,u=a.key,p=On(i);return p!=="boolean"?[new Sr(u,i,`boolean expected, ${p} found`)]:[]},number:_d,color:function(a){const i=a.key,u=a.value,p=On(u);return p!=="string"?[new Sr(i,u,`color expected, ${p} found`)]:Pn(u)===null?[new Sr(i,u,`color expected, "${u}" found`)]:[]},enum:hp,filter:Cd,function:wd,layer:k0,object:_a,source:T0,light:A0,terrain:Ug,fog:I0,string:Wl,formatted:function(a){return Wl(a).length===0?[]:Ns(a)},resolvedImage:function(a){return Wl(a).length===0?[]:Ns(a)},projection:function(a){const i=a.value,u=a.styleSpec,p=u.projection,x=a.style;let w=[];const E=On(i);if(E==="object")for(const R in i)w=w.concat(so({key:R,value:i[R],valueSpec:p[R],style:x,styleSpec:u}));else E!=="string"&&(w=w.concat([new Sr("projection",i,`object or string expected, ${E} found`)]));return w}};function so(a){const i=a.value,u=a.valueSpec,p=a.styleSpec;return u.expression&&xd(re(i))?wd(a):u.expression&&ju(ce(i))?Ns(a):u.type&&P0[u.type]?P0[u.type](a):_a(ee({},a,{valueSpec:u.type?p[u.type]:u}))}function y2(a){const i=a.value,u=a.key,p=Wl(a);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new Sr(u,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new Sr(u,i,'"glyphs" url must include a "{range}" token'))),p}function R0(a,i=B){return na(so({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,objectElementValidators:{glyphs:y2,"*":()=>[]}}))}const x2=a=>na(C0(a)),v2=a=>na($g(a));function na(a){return a.slice().sort((i,u)=>i.line&&u.line?i.line-u.line:0)}function M0(a,i){let u=!1;if(i&&i.length)for(const p of i)a.fire(new $(new Error(p.message))),u=!0;return u}var b2=Wa,wa=3;function Wa(a,i,u){var p=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var x=new Int32Array(this.arrayBuffer);a=x[0],this.d=(i=x[1])+2*(u=x[2]);for(var w=0;w<this.d*this.d;w++){var E=x[wa+w],R=x[wa+w+1];p.push(E===R?null:x.subarray(E,R))}var j=x[wa+p.length+1];this.keys=x.subarray(x[wa+p.length],j),this.bboxes=x.subarray(j),this.insert=this._insertReadonly}else{this.d=i+2*u;for(var F=0;F<this.d*this.d;F++)p.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=a,this.padding=u,this.scale=i/a,this.uid=0;var Y=u/i*a;this.min=-Y,this.max=a+Y}Wa.prototype.insert=function(a,i,u,p,x){this._forEachCell(i,u,p,x,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(x)},Wa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Wa.prototype._insertCell=function(a,i,u,p,x,w){this.cells[x].push(w)},Wa.prototype.query=function(a,i,u,p,x){var w=this.min,E=this.max;if(a<=w&&i<=w&&E<=u&&E<=p&&!x)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(a,i,u,p,this._queryCell,R,{},x),R},Wa.prototype._queryCell=function(a,i,u,p,x,w,E,R){var j=this.cells[x];if(j!==null)for(var F=this.keys,Y=this.bboxes,te=0;te<j.length;te++){var ne=j[te];if(E[ne]===void 0){var ue=4*ne;(R?R(Y[ue+0],Y[ue+1],Y[ue+2],Y[ue+3]):a<=Y[ue+2]&&i<=Y[ue+3]&&u>=Y[ue+0]&&p>=Y[ue+1])?(E[ne]=!0,w.push(F[ne])):E[ne]=!1}}},Wa.prototype._forEachCell=function(a,i,u,p,x,w,E,R){for(var j=this._convertToCellCoord(a),F=this._convertToCellCoord(i),Y=this._convertToCellCoord(u),te=this._convertToCellCoord(p),ne=j;ne<=Y;ne++)for(var ue=F;ue<=te;ue++){var fe=this.d*ue+ne;if((!R||R(this._convertFromCellCoord(ne),this._convertFromCellCoord(ue),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(ue+1)))&&x.call(this,a,i,u,p,fe,w,E,R))return}},Wa.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},Wa.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},Wa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,i=wa+this.cells.length+1+1,u=0,p=0;p<this.cells.length;p++)u+=this.cells[p].length;var x=new Int32Array(i+u+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var w=i,E=0;E<a.length;E++){var R=a[E];x[wa+E]=w,x.set(R,w),w+=R.length}return x[wa+a.length]=w,x.set(this.keys,w),x[wa+a.length+1]=w+=this.keys.length,x.set(this.bboxes,w),w+=this.bboxes.length,x.buffer};var Dc=K(b2);const mp={};function Ar(a,i,u={}){Object.defineProperty(a,"_classRegistryKey",{value:i,writeable:!1}),mp[i]={klass:a,omit:u.omit||[]}}Ar(Object,"Object"),Dc.serialize=function(a,i){const u=a.toArrayBuffer();return i&&i.push(u),{buffer:u}},Dc.deserialize=function(a){return new Dc(a.buffer)},Object.defineProperty(Dc,"name",{value:"Grid"}),Ar(Dc,"Grid"),Ar($r,"Color"),Ar(Error,"Error"),Ar(Fn,"AJAXError"),Ar(Tn,"ResolvedImage"),Ar(cp,"StylePropertyFunction"),Ar(lp,"StyleExpression",{omit:["_evaluator"]}),Ar(vd,"ZoomDependentExpression"),Ar(Og,"ZoomConstantExpression"),Ar(wn,"CompoundExpression",{omit:["_evaluate"]});for(const a in yd)mp[yd[a]._classRegistryKey]||Ar(yd[a],`Expression${a}`);function Vg(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Hg(a){return k.ImageBitmap&&a instanceof k.ImageBitmap}function Uu(a,i){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(Vg(a)||Hg(a))return i&&i.push(a),a;if(ArrayBuffer.isView(a)){const u=a;return i&&i.push(u.buffer),u}if(a instanceof k.ImageData)return i&&i.push(a.data.buffer),a;if(Array.isArray(a)){const u=[];for(const p of a)u.push(Uu(p,i));return u}if(typeof a=="object"){const u=a.constructor,p=u._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${p}`);const x=u.serialize?u.serialize(a,i):{};if(!u.serialize){for(const w in a)a.hasOwnProperty(w)&&(mp[p].omit.indexOf(w)>=0||(x[w]=Uu(a[w],i)));a instanceof Error&&(x.message=a.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(x.$name=p),x}throw new Error("can't serialize object of type "+typeof a)}function zc(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||Vg(a)||Hg(a)||ArrayBuffer.isView(a)||a instanceof k.ImageData)return a;if(Array.isArray(a))return a.map(zc);if(typeof a=="object"){const i=a.$name||"Object",{klass:u}=mp[i];if(!u)throw new Error(`can't deserialize unregistered class ${i}`);if(u.deserialize)return u.deserialize(a);const p=Object.create(u.prototype);for(const x of Object.keys(a))x!=="$name"&&(p[x]=zc(a[x]));return p}throw new Error("can't deserialize object of type "+typeof a)}const wr={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Wg(a){for(const i of a)if(Gg(i.charCodeAt(0)))return!0;return!1}function _2(a){for(const i of a)if(!L0(i.charCodeAt(0)))return!1;return!0}function L0(a){return!(wr.Arabic(a)||wr["Arabic Supplement"](a)||wr["Arabic Extended-A"](a)||wr["Arabic Presentation Forms-A"](a)||wr["Arabic Presentation Forms-B"](a))}function Gg(a){return!(a!==746&&a!==747&&(a<4352||!(wr["Bopomofo Extended"](a)||wr.Bopomofo(a)||wr["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||wr["CJK Compatibility Ideographs"](a)||wr["CJK Compatibility"](a)||wr["CJK Radicals Supplement"](a)||wr["CJK Strokes"](a)||!(!wr["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||wr["CJK Unified Ideographs Extension A"](a)||wr["CJK Unified Ideographs"](a)||wr["Enclosed CJK Letters and Months"](a)||wr["Hangul Compatibility Jamo"](a)||wr["Hangul Jamo Extended-A"](a)||wr["Hangul Jamo Extended-B"](a)||wr["Hangul Jamo"](a)||wr["Hangul Syllables"](a)||wr.Hiragana(a)||wr["Ideographic Description Characters"](a)||wr.Kanbun(a)||wr["Kangxi Radicals"](a)||wr["Katakana Phonetic Extensions"](a)||wr.Katakana(a)&&a!==12540||!(!wr["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!wr["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||wr["Unified Canadian Aboriginal Syllabics"](a)||wr["Unified Canadian Aboriginal Syllabics Extended"](a)||wr["Vertical Forms"](a)||wr["Yijing Hexagram Symbols"](a)||wr["Yi Syllables"](a)||wr["Yi Radicals"](a))))}function O0(a){return!(Gg(a)||function(i){return!!(wr["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||wr["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||wr["Letterlike Symbols"](i)||wr["Number Forms"](i)||wr["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||wr["Control Pictures"](i)&&i!==9251||wr["Optical Character Recognition"](i)||wr["Enclosed Alphanumerics"](i)||wr["Geometric Shapes"](i)||wr["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||wr["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||wr["CJK Symbols and Punctuation"](i)||wr.Katakana(i)||wr["Private Use Area"](i)||wr["CJK Compatibility Forms"](i)||wr["Small Form Variants"](i)||wr["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}function D0(a){return a>=1424&&a<=2303||wr["Arabic Presentation Forms-A"](a)||wr["Arabic Presentation Forms-B"](a)}function w2(a,i){return!(!i&&D0(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||wr.Khmer(a))}function S2(a){for(const i of a)if(D0(i.charCodeAt(0)))return!0;return!1}const Xg="deferred",qg="loading",Yg="loaded";let Vu=null,_="unavailable",h=null;const g=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(_="error"),Vu&&Vu(a)};function C(){P.fire(new z("pluginStateChange",{pluginStatus:_,pluginURL:h}))}const P=new H,L=function(){return _},V=function(){if(_!==Xg||!h)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");_=qg,C(),h&&is({url:h},a=>{a?g(a):(_=Yg,C())})},G={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>_===Yg||G.applyArabicShaping!=null,isLoading:()=>_===qg,setState(a){_=a.pluginStatus,h=a.pluginURL},isParsed:()=>G.applyArabicShaping!=null&&G.processBidirectionalText!=null&&G.processStyledBidirectionalText!=null,getPluginURL:()=>h};class J{constructor(i,u){this.zoom=i,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(i){return function(u,p){for(const x of u)if(!w2(x.charCodeAt(0),p))return!1;return!0}(i,G.isLoaded())}}class oe{constructor(i,u){this.property=i,this.value=u,this.expression=function(p,x){if(xd(p))return new cp(p,x);if(ju(p)){const w=bd(p,x);if(w.result==="error")throw new Error(w.value.map(E=>`${E.key}: ${E.message}`).join(", "));return w.value}{let w=p;return typeof p=="string"&&x.type==="color"&&(w=$r.parse(p)),{kind:"constant",evaluate:()=>w}}}(u===void 0?i.specification.default:u,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,u,p){return this.property.possiblyEvaluate(this,i,u,p)}}class se{constructor(i){this.property=i,this.value=new oe(i,void 0)}transitioned(i,u){return new Ie(this.property,this.value,u,Vt({},i.transition,this.transition),i.now)}untransitioned(){return new Ie(this.property,this.value,null,{},0)}}class me{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Br(this._values[i].value.value)}setValue(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new se(this._values[i].property)),this._values[i].value=new oe(this._values[i].property,u===null?void 0:Br(u))}getTransition(i){return Br(this._values[i].transition)}setTransition(i,u){this._values.hasOwnProperty(i)||(this._values[i]=new se(this._values[i].property)),this._values[i].transition=Br(u)||void 0}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p);const x=this.getTransition(u);x!==void 0&&(i[`${u}-transition`]=x)}return i}transitioned(i,u){const p=new Oe(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].transitioned(i,u._values[x]);return p}untransitioned(){const i=new Oe(this._properties);for(const u of Object.keys(this._values))i._values[u]=this._values[u].untransitioned();return i}}class Ie{constructor(i,u,p,x,w){const E=x.delay||0,R=x.duration||0;w=w||0,this.property=i,this.value=u,this.begin=w+E,this.end=this.begin+R,i.specification.transition&&(x.delay||x.duration)&&(this.prior=p)}possiblyEvaluate(i,u,p){const x=i.now||0,w=this.value.possiblyEvaluate(i,u,p),E=this.prior;if(E){if(x>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(x<this.begin)return E.possiblyEvaluate(i,u,p);{const R=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(i,u,p),w,Pt(R))}}return w}}class Oe{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,u,p){const x=new Ne(this._properties);for(const w of Object.keys(this._values))x._values[w]=this._values[w].possiblyEvaluate(i,u,p);return x}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class ze{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return Br(this._values[i].value)}setValue(i,u){this._values[i]=new oe(this._values[i].property,u===null?void 0:Br(u))}serialize(){const i={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(i[u]=p)}return i}possiblyEvaluate(i,u,p){const x=new Ne(this._properties);for(const w of Object.keys(this._values))x._values[w]=this._values[w].possiblyEvaluate(i,u,p);return x}}class De{constructor(i,u,p){this.property=i,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,u,p,x){return this.property.evaluate(this.value,this.parameters,i,u,p,x)}}class Ne{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class ge{constructor(i){this.specification=i}possiblyEvaluate(i,u){return i.expression.evaluate(u)}interpolate(i,u,p){const x=dd[this.specification.type];return x?x(i,u,p):i}}class Me{constructor(i,u){this.specification=i,this.overrides=u}possiblyEvaluate(i,u,p,x){return new De(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(u,null,{},p,x)}:i.expression,u)}interpolate(i,u,p){if(i.value.kind!=="constant"||u.value.kind!=="constant")return i;if(i.value.value===void 0||u.value.value===void 0)return new De(this,{kind:"constant",value:void 0},i.parameters);const x=dd[this.specification.type];return x?new De(this,{kind:"constant",value:x(i.value.value,u.value.value,p)},i.parameters):i}evaluate(i,u,p,x,w,E){return i.kind==="constant"?i.value:i.evaluate(u,p,x,w,E)}}class We{constructor(i){this.specification=i}possiblyEvaluate(i,u,p,x){return!!i.expression.evaluate(u,null,{},p,x)}interpolate(){return!1}}class qe{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new J(0,{});for(const p in i){const x=i[p];x.specification.overridable&&this.overridableProperties.push(p);const w=this.defaultPropertyValues[p]=new oe(x,void 0),E=this.defaultTransitionablePropertyValues[p]=new se(x);this.defaultTransitioningPropertyValues[p]=E.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=w.possiblyEvaluate(u)}}}function st(a,i){return 256*(a=mt(Math.floor(a),0,255))+mt(Math.floor(i),0,255)}Ar(Me,"DataDrivenProperty"),Ar(ge,"DataConstantProperty"),Ar(We,"ColorRampProperty");const lt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class at{constructor(i,u){this._structArray=i,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,u){return i._trim(),u&&(i.isTransferred=!0,u.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const u=Object.create(this.prototype);return u.arrayBuffer=i.arrayBuffer,u.length=i.length,u.capacity=i.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function dt(a,i=1){let u=0,p=0;return{members:a.map(x=>{const w=lt[x.type].BYTES_PER_ELEMENT,E=u=Ct(u,Math.max(i,w)),R=x.components||1;return p=Math.max(p,w),u+=w*R,{name:x.name,type:x.type,components:R,offset:E}}),size:Ct(u,Math.max(p,i)),alignment:i}}function Ct(a,i){return Math.ceil(a/i)*i}class Qt extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const x=2*i;return this.int16[x+0]=u,this.int16[x+1]=p,i}}Qt.prototype.bytesPerElement=4,Ar(Qt,"StructArrayLayout2i4");class _t extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,p)}emplace(i,u,p,x){const w=3*i;return this.int16[w+0]=u,this.int16[w+1]=p,this.int16[w+2]=x,i}}_t.prototype.bytesPerElement=6,Ar(_t,"StructArrayLayout3i6");class Ft extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,p,x)}emplace(i,u,p,x,w){const E=4*i;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=x,this.int16[E+3]=w,i}}Ft.prototype.bytesPerElement=8,Ar(Ft,"StructArrayLayout4i8");class At extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R){const j=this.length;return this.resize(j+1),this.emplace(j,i,u,p,x,w,E,R)}emplace(i,u,p,x,w,E,R,j){const F=6*i,Y=12*i,te=3*i;return this.int16[F+0]=u,this.int16[F+1]=p,this.uint8[Y+4]=x,this.uint8[Y+5]=w,this.uint8[Y+6]=E,this.uint8[Y+7]=R,this.float32[te+2]=j,i}}At.prototype.bytesPerElement=12,Ar(At,"StructArrayLayout2i4ub1f12");class Jt extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,p,x)}emplace(i,u,p,x,w){const E=4*i;return this.float32[E+0]=u,this.float32[E+1]=p,this.float32[E+2]=x,this.float32[E+3]=w,i}}Jt.prototype.bytesPerElement=16,Ar(Jt,"StructArrayLayout4f16");class St extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,p,x,w)}emplace(i,u,p,x,w,E){const R=6*i,j=3*i;return this.uint16[R+0]=u,this.uint16[R+1]=p,this.uint16[R+2]=x,this.uint16[R+3]=w,this.float32[j+2]=E,i}}St.prototype.bytesPerElement=12,Ar(St,"StructArrayLayout4ui1f12");class jt extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,p,x)}emplace(i,u,p,x,w){const E=4*i;return this.uint16[E+0]=u,this.uint16[E+1]=p,this.uint16[E+2]=x,this.uint16[E+3]=w,i}}jt.prototype.bytesPerElement=8,Ar(jt,"StructArrayLayout4ui8");class rr extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E){const R=this.length;return this.resize(R+1),this.emplace(R,i,u,p,x,w,E)}emplace(i,u,p,x,w,E,R){const j=6*i;return this.int16[j+0]=u,this.int16[j+1]=p,this.int16[j+2]=x,this.int16[j+3]=w,this.int16[j+4]=E,this.int16[j+5]=R,i}}rr.prototype.bytesPerElement=12,Ar(rr,"StructArrayLayout6i12");class Ht extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R,j,F,Y,te,ne){const ue=this.length;return this.resize(ue+1),this.emplace(ue,i,u,p,x,w,E,R,j,F,Y,te,ne)}emplace(i,u,p,x,w,E,R,j,F,Y,te,ne,ue){const fe=12*i;return this.int16[fe+0]=u,this.int16[fe+1]=p,this.int16[fe+2]=x,this.int16[fe+3]=w,this.uint16[fe+4]=E,this.uint16[fe+5]=R,this.uint16[fe+6]=j,this.uint16[fe+7]=F,this.int16[fe+8]=Y,this.int16[fe+9]=te,this.int16[fe+10]=ne,this.int16[fe+11]=ue,i}}Ht.prototype.bytesPerElement=24,Ar(Ht,"StructArrayLayout4i4ui4i24");class sr extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E){const R=this.length;return this.resize(R+1),this.emplace(R,i,u,p,x,w,E)}emplace(i,u,p,x,w,E,R){const j=10*i,F=5*i;return this.int16[j+0]=u,this.int16[j+1]=p,this.int16[j+2]=x,this.float32[F+2]=w,this.float32[F+3]=E,this.float32[F+4]=R,i}}sr.prototype.bytesPerElement=20,Ar(sr,"StructArrayLayout3i3f20");class zr extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint32[1*i+0]=u,i}}zr.prototype.bytesPerElement=4,Ar(zr,"StructArrayLayout1ul4");class sn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R,j,F,Y,te,ne,ue){const fe=this.length;return this.resize(fe+1),this.emplace(fe,i,u,p,x,w,E,R,j,F,Y,te,ne,ue)}emplace(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe){const be=20*i,Re=10*i;return this.int16[be+0]=u,this.int16[be+1]=p,this.int16[be+2]=x,this.int16[be+3]=w,this.int16[be+4]=E,this.float32[Re+3]=R,this.float32[Re+4]=j,this.float32[Re+5]=F,this.float32[Re+6]=Y,this.int16[be+14]=te,this.uint32[Re+8]=ne,this.uint16[be+18]=ue,this.uint16[be+19]=fe,i}}sn.prototype.bytesPerElement=40,Ar(sn,"StructArrayLayout5i4f1i1ul2ui40");class Ir extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R){const j=this.length;return this.resize(j+1),this.emplace(j,i,u,p,x,w,E,R)}emplace(i,u,p,x,w,E,R,j){const F=8*i;return this.int16[F+0]=u,this.int16[F+1]=p,this.int16[F+2]=x,this.int16[F+4]=w,this.int16[F+5]=E,this.int16[F+6]=R,this.int16[F+7]=j,i}}Ir.prototype.bytesPerElement=16,Ar(Ir,"StructArrayLayout3i2i2i16");class Wr extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,p,x,w)}emplace(i,u,p,x,w,E){const R=4*i,j=8*i;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=x,this.int16[j+6]=w,this.int16[j+7]=E,i}}Wr.prototype.bytesPerElement=16,Ar(Wr,"StructArrayLayout2f1f2i16");class vn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,p,x)}emplace(i,u,p,x,w){const E=12*i,R=3*i;return this.uint8[E+0]=u,this.uint8[E+1]=p,this.float32[R+1]=x,this.float32[R+2]=w,i}}vn.prototype.bytesPerElement=12,Ar(vn,"StructArrayLayout2ub2f12");class yn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,p)}emplace(i,u,p,x){const w=3*i;return this.float32[w+0]=u,this.float32[w+1]=p,this.float32[w+2]=x,i}}yn.prototype.bytesPerElement=12,Ar(yn,"StructArrayLayout3f12");class Lr extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p){const x=this.length;return this.resize(x+1),this.emplace(x,i,u,p)}emplace(i,u,p,x){const w=3*i;return this.uint16[w+0]=u,this.uint16[w+1]=p,this.uint16[w+2]=x,i}}Lr.prototype.bytesPerElement=6,Ar(Lr,"StructArrayLayout3ui6");class Gn extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt){const tt=this.length;return this.resize(tt+1),this.emplace(tt,i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt)}emplace(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt,tt){const kt=30*i,wt=15*i,zt=60*i;return this.int16[kt+0]=u,this.int16[kt+1]=p,this.int16[kt+2]=x,this.float32[wt+2]=w,this.float32[wt+3]=E,this.uint16[kt+8]=R,this.uint16[kt+9]=j,this.uint32[wt+5]=F,this.uint32[wt+6]=Y,this.uint32[wt+7]=te,this.uint16[kt+16]=ne,this.uint16[kt+17]=ue,this.uint16[kt+18]=fe,this.float32[wt+10]=be,this.float32[wt+11]=Re,this.uint8[zt+48]=je,this.uint8[zt+49]=Je,this.uint8[zt+50]=Be,this.uint32[wt+13]=Ke,this.int16[kt+28]=nt,this.uint8[zt+58]=tt,i}}Gn.prototype.bytesPerElement=60,Ar(Gn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class si extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt,tt,kt,wt,zt,er,It,$t,Ut,Yt){const lr=this.length;return this.resize(lr+1),this.emplace(lr,i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt,tt,kt,wt,zt,er,It,$t,Ut,Yt)}emplace(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re,je,Je,Be,Ke,nt,tt,kt,wt,zt,er,It,$t,Ut,Yt,lr){const Lt=38*i,vr=19*i;return this.int16[Lt+0]=u,this.int16[Lt+1]=p,this.int16[Lt+2]=x,this.float32[vr+2]=w,this.float32[vr+3]=E,this.int16[Lt+8]=R,this.int16[Lt+9]=j,this.int16[Lt+10]=F,this.int16[Lt+11]=Y,this.int16[Lt+12]=te,this.int16[Lt+13]=ne,this.uint16[Lt+14]=ue,this.uint16[Lt+15]=fe,this.uint16[Lt+16]=be,this.uint16[Lt+17]=Re,this.uint16[Lt+18]=je,this.uint16[Lt+19]=Je,this.uint16[Lt+20]=Be,this.uint16[Lt+21]=Ke,this.uint16[Lt+22]=nt,this.uint16[Lt+23]=tt,this.uint16[Lt+24]=kt,this.uint16[Lt+25]=wt,this.uint16[Lt+26]=zt,this.uint16[Lt+27]=er,this.uint16[Lt+28]=It,this.uint32[vr+15]=$t,this.float32[vr+16]=Ut,this.float32[vr+17]=Yt,this.float32[vr+18]=lr,i}}si.prototype.bytesPerElement=76,Ar(si,"StructArrayLayout3i2f6i15ui1ul3f76");class oi extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.float32[1*i+0]=u,i}}oi.prototype.bytesPerElement=4,Ar(oi,"StructArrayLayout1f4");class ai extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u,p,x,w){const E=this.length;return this.resize(E+1),this.emplace(E,i,u,p,x,w)}emplace(i,u,p,x,w,E){const R=5*i;return this.float32[R+0]=u,this.float32[R+1]=p,this.float32[R+2]=x,this.float32[R+3]=w,this.float32[R+4]=E,i}}ai.prototype.bytesPerElement=20,Ar(ai,"StructArrayLayout5f20");class oo extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u,p,x){const w=this.length;return this.resize(w+1),this.emplace(w,i,u,p,x)}emplace(i,u,p,x,w){const E=6*i;return this.uint32[3*i+0]=u,this.uint16[E+2]=p,this.uint16[E+3]=x,this.uint16[E+4]=w,i}}oo.prototype.bytesPerElement=12,Ar(oo,"StructArrayLayout1ul3ui12");class js extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const x=2*i;return this.uint16[x+0]=u,this.uint16[x+1]=p,i}}js.prototype.bytesPerElement=4,Ar(js,"StructArrayLayout2ui4");class ia extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const u=this.length;return this.resize(u+1),this.emplace(u,i)}emplace(i,u){return this.uint16[1*i+0]=u,i}}ia.prototype.bytesPerElement=2,Ar(ia,"StructArrayLayout1ui2");class Ga extends pt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,u){const p=this.length;return this.resize(p+1),this.emplace(p,i,u)}emplace(i,u,p){const x=2*i;return this.float32[x+0]=u,this.float32[x+1]=p,i}}Ga.prototype.bytesPerElement=8,Ar(Ga,"StructArrayLayout2f8");class Oi extends at{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Oi.prototype.size=40;class li extends sn{get(i){return new Oi(this,i)}}Ar(li,"CollisionBoxArray");class Nn extends at{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}Nn.prototype.size=60;class ds extends Gn{get(i){return new Nn(this,i)}}Ar(ds,"PlacedSymbolArray");class xo extends at{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}xo.prototype.size=76;class Pi extends si{get(i){return new xo(this,i)}}Ar(Pi,"SymbolInstanceArray");class ko extends oi{getoffsetX(i){return this.float32[1*i+0]}}Ar(ko,"GlyphOffsetArray");class gp extends Qt{getx(i){return this.int16[2*i+0]}gety(i){return this.int16[2*i+1]}}Ar(gp,"SymbolLineVertexArray");class Nc extends at{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Nc.prototype.size=12;class Ed extends oo{get(i){return new Nc(this,i)}}Ar(Ed,"FeatureIndexArray");class ml extends js{geta_centroid_pos0(i){return this.uint16[2*i+0]}geta_centroid_pos1(i){return this.uint16[2*i+1]}}Ar(ml,"FillExtrusionCentroidArray");const Gl=dt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),jc=dt([{name:"a_dash",components:4,type:"Uint16"}]);var yp={exports:{}},Td={exports:{}};Td.exports=function(a,i){var u,p,x,w,E,R,j,F;for(p=a.length-(u=3&a.length),x=i,E=3432918353,R=461845907,F=0;F<p;)j=255&a.charCodeAt(F)|(255&a.charCodeAt(++F))<<8|(255&a.charCodeAt(++F))<<16|(255&a.charCodeAt(++F))<<24,++F,x=27492+(65535&(w=5*(65535&(x=(x^=j=(65535&(j=(j=(65535&j)*E+(((j>>>16)*E&65535)<<16)&4294967295)<<15|j>>>17))*R+(((j>>>16)*R&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(j=0,u){case 3:j^=(255&a.charCodeAt(F+2))<<16;case 2:j^=(255&a.charCodeAt(F+1))<<8;case 1:x^=j=(65535&(j=(j=(65535&(j^=255&a.charCodeAt(F)))*E+(((j>>>16)*E&65535)<<16)&4294967295)<<15|j>>>17))*R+(((j>>>16)*R&65535)<<16)&4294967295}return x^=a.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0};var Zg=Td.exports,fM={exports:{}};fM.exports=function(a,i){for(var u,p=a.length,x=i^p,w=0;p>=4;)u=1540483477*(65535&(u=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(u>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++w;switch(p){case 3:x^=(255&a.charCodeAt(w+2))<<16;case 2:x^=(255&a.charCodeAt(w+1))<<8;case 1:x=1540483477*(65535&(x^=255&a.charCodeAt(w)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};var pM=Zg,xW=fM.exports;yp.exports=pM,yp.exports.murmur3=pM,yp.exports.murmur2=xW;var C2=K(yp.exports);class z0{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,u,p,x){this.ids.push(mM(i)),this.positions.push(u,p,x)}getPositions(i){const u=mM(i);let p=0,x=this.ids.length-1;for(;p<x;){const E=p+x>>1;this.ids[E]>=u?x=E:p=E+1}const w=[];for(;this.ids[p]===u;)w.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return w}static serialize(i,u){const p=new Float64Array(i.ids),x=new Uint32Array(i.positions);return k2(p,x,0,p.length-1),u&&u.push(p.buffer,x.buffer),{ids:p,positions:x}}static deserialize(i){const u=new z0;return u.ids=i.ids,u.positions=i.positions,u.indexed=!0,u}}function mM(a){const i=+a;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:C2(String(a))}function k2(a,i,u,p){for(;u<p;){const x=a[u+p>>1];let w=u-1,E=p+1;for(;;){do w++;while(a[w]<x);do E--;while(a[E]>x);if(w>=E)break;N0(a,w,E),N0(i,3*w,3*E),N0(i,3*w+1,3*E+1),N0(i,3*w+2,3*E+2)}E-u<p-E?(k2(a,i,u,E),u=E+1):(k2(a,i,E+1,p),p=E)}}function N0(a,i,u){const p=a[i];a[i]=a[u],a[u]=p}Ar(z0,"FeaturePositionMap");class Fc{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,u),this.initialized=!0),!!this.location}}class j0 extends Fc{constructor(i){super(i),this.current=0}set(i,u,p){this.fetchUniformLocation(i,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class gM extends Fc{constructor(i){super(i),this.current=[0,0,0,0]}set(i,u,p){this.fetchUniformLocation(i,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class yM extends Fc{constructor(i){super(i),this.current=$r.transparent}set(i,u,p){this.fetchUniformLocation(i,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const vW=new Float32Array(16),bW=new Float32Array(9),_W=new Float32Array(4);function E2(a){return[st(255*a.r,255*a.g),st(255*a.b,255*a.a)]}class Kg{constructor(i,u,p){this.value=i,this.uniformNames=u.map(x=>`u_${x}`),this.type=p}setUniform(i,u,p,x,w){u.set(i,w,x.constantOr(this.value))}getBinding(i,u){return this.type==="color"?new yM(i):new j0(i)}}class xp{constructor(i,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(i){this.pixelRatio=i.pixelRatio||1,this.pattern=i.tl.concat(i.br)}setUniform(i,u,p,x,w){const E=w==="u_pattern"||w==="u_dash"?this.pattern:w==="u_pixel_ratio"?this.pixelRatio:null;E&&u.set(i,w,E)}getBinding(i,u){return u==="u_pattern"||u==="u_dash"?new gM(i):new j0(i)}}class Bc{constructor(i,u,p,x){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(w=>({name:`a_${w}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,u,p,x,w,E){const R=this.paintVertexArray.length,j=this.expression.evaluate(new J(0),u,{},w,x,E);this.paintVertexArray.resize(i),this._setPaintValue(R,i,j)}updatePaintArray(i,u,p,x,w){const E=this.expression.evaluate({zoom:0},p,x,void 0,w);this._setPaintValue(i,u,E)}_setPaintValue(i,u,p){if(this.type==="color"){const x=E2(p);for(let w=i;w<u;w++)this.paintVertexArray.emplace(w,x[0],x[1])}else{for(let x=i;x<u;x++)this.paintVertexArray.emplace(x,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class gl{constructor(i,u,p,x,w,E){this.expression=i,this.uniformNames=u.map(R=>`u_${R}_t`),this.type=p,this.useIntegerZoom=x,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=u.map(R=>({name:`a_${R}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(i,u,p,x,w,E){const R=this.expression.evaluate(new J(this.zoom),u,{},w,x,E),j=this.expression.evaluate(new J(this.zoom+1),u,{},w,x,E),F=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(F,i,R,j)}updatePaintArray(i,u,p,x,w){const E=this.expression.evaluate({zoom:this.zoom},p,x,void 0,w),R=this.expression.evaluate({zoom:this.zoom+1},p,x,void 0,w);this._setPaintValue(i,u,E,R)}_setPaintValue(i,u,p,x){if(this.type==="color"){const w=E2(p),E=E2(x);for(let R=i;R<u;R++)this.paintVertexArray.emplace(R,w[0],w[1],E[0],E[1])}else{for(let w=i;w<u;w++)this.paintVertexArray.emplace(w,p,x);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(x))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,u,p,x,w){const E=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,R=mt(this.expression.interpolationFactor(E,this.zoom,this.zoom+1),0,1);u.set(i,w,R)}getBinding(i,u){return new j0(i)}}class Hu{constructor(i,u,p,x,w){this.expression=i,this.layerId=w,this.paintVertexAttributes=(p==="array"?jc:Gl).members;for(let E=0;E<u.length;++E);this.paintVertexArray=new x}populatePaintArray(i,u,p){const x=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValues(x,i,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(i,u,p,x,w,E){this._setPaintValues(i,u,p.patterns&&p.patterns[this.layerId],E)}_setPaintValues(i,u,p,x){if(!x||!p)return;const w=x[p];if(!w)return;const{tl:E,br:R,pixelRatio:j}=w;for(let F=i;F<u;F++)this.paintVertexArray.emplace(F,E[0],E[1],R[0],R[1],j)}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wu{constructor(i,u,p=()=>!0){this.binders={},this._buffers=[];const x=[];for(const w in i.paint._values){if(!p(w))continue;const E=i.paint.get(w);if(!(E instanceof De&&zu(E.property.specification)))continue;const R=SW(w,i.type),j=E.value,F=E.property.specification.type,Y=!!E.property.useIntegerZoom,te=w==="line-dasharray"||w.endsWith("pattern"),ne=w==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(j.kind!=="constant"||ne)if(j.kind==="source"||ne||te){const ue=xM(w,F,"source");this.binders[w]=te?new Hu(j,R,F,ue,i.id):new Bc(j,R,F,ue),x.push(`/a_${w}`)}else{const ue=xM(w,F,"composite");this.binders[w]=new gl(j,R,F,Y,u,ue),x.push(`/z_${w}`)}else this.binders[w]=te?new xp(j.value,R):new Kg(j.value,R,F),x.push(`/u_${w}`)}this.cacheKey=x.sort().join("")}getMaxValue(i){const u=this.binders[i];return u instanceof Bc||u instanceof gl?u.maxValue:0}populatePaintArrays(i,u,p,x,w,E){for(const R in this.binders){const j=this.binders[R];(j instanceof Bc||j instanceof gl||j instanceof Hu)&&j.populatePaintArray(i,u,p,x,w,E)}}setConstantPatternPositions(i){for(const u in this.binders){const p=this.binders[u];p instanceof xp&&p.setConstantPatternPositions(i)}}updatePaintArrays(i,u,p,x,w,E){let R=!1;for(const j in i){const F=u.getPositions(j);for(const Y of F){const te=p.feature(Y.index);for(const ne in this.binders){const ue=this.binders[ne];if((ue instanceof Bc||ue instanceof gl||ue instanceof Hu)&&ue.expression.isStateDependent===!0){const fe=x.paint.get(ne);ue.expression=fe.value,ue.updatePaintArray(Y.start,Y.end,te,i[j],w,E),R=!0}}}}return R}defines(){const i=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Kg||p instanceof xp)&&i.push(...p.uniformNames.map(x=>`#define HAS_UNIFORM_${x}`))}return i}getBinderAttributes(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Bc||p instanceof gl||p instanceof Hu)for(let x=0;x<p.paintVertexAttributes.length;x++)i.push(p.paintVertexAttributes[x].name)}return i}getBinderUniforms(){const i=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Kg||p instanceof xp||p instanceof gl)for(const x of p.uniformNames)i.push(x)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const u=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof Kg||x instanceof xp||x instanceof gl)for(const w of x.uniformNames)u.push({name:w,property:p,binding:x.getBinding(i,w)})}return u}setUniforms(i,u,p,x,w){for(const{name:E,property:R,binding:j}of p)this.binders[R].setUniform(i,j,w,x.get(R),E)}updatePaintBuffers(){this._buffers=[];for(const i in this.binders){const u=this.binders[i];(u instanceof Bc||u instanceof gl||u instanceof Hu)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(i){for(const u in this.binders){const p=this.binders[u];(p instanceof Bc||p instanceof gl||p instanceof Hu)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const u=this.binders[i];(u instanceof Bc||u instanceof gl||u instanceof Hu)&&u.destroy()}}}class Ad{constructor(i,u,p=()=>!0){this.programConfigurations={};for(const x of i)this.programConfigurations[x.id]=new Wu(x,u,p);this.needsUpload=!1,this._featureMap=new z0,this._bufferOffset=0}populatePaintArrays(i,u,p,x,w,E,R){for(const j in this.programConfigurations)this.programConfigurations[j].populatePaintArrays(i,u,x,w,E,R);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,u,p,x,w){for(const E of p)this.needsUpload=this.programConfigurations[E.id].updatePaintArrays(i,this._featureMap,u,E,x,w)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const wW={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function SW(a,i){return wW[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}const CW={"line-pattern":{source:St,composite:St},"fill-pattern":{source:St,composite:St},"fill-extrusion-pattern":{source:St,composite:St},"line-dasharray":{source:jt,composite:jt}},kW={color:{source:Ga,composite:Jt},number:{source:oi,composite:Ga}};function xM(a,i,u){const p=CW[a];return p&&p[u]||kW[i][u]}Ar(Kg,"ConstantBinder"),Ar(xp,"PatternConstantBinder"),Ar(Bc,"SourceExpressionBinder"),Ar(Hu,"PatternCompositeBinder"),Ar(gl,"CompositeExpressionBinder"),Ar(Wu,"ProgramConfiguration",{omit:["_buffers"]}),Ar(Ad,"ProgramConfigurationSet");const vM="-transition";class yl extends H{constructor(i,u){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),u.layout&&(this._unevaluatedLayout=new ze(u.layout)),u.paint)){this._transitionablePaint=new me(u.paint);for(const p in i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(const p in i.layout)this.setLayoutProperty(p,i.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ne(u.paint)}}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,u,p={}){u!=null&&this._validate(v2,`layers.${this.id}.layout.${i}`,i,u,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,u):this.visibility=u)}getPaintProperty(i){return Cr(i,vM)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,u,p={}){if(u!=null&&this._validate(x2,`layers.${this.id}.paint.${i}`,i,u,p))return!1;if(Cr(i,vM))return this._transitionablePaint.setTransition(i.slice(0,-11),u||void 0),!1;{const x=this._transitionablePaint._values[i],w=x.value.isDataDriven(),E=x.value;this._transitionablePaint.setValue(i,u),this._handleSpecialPaintPropertyUpdate(i);const R=this._transitionablePaint._values[i].value,j=R.isDataDriven(),F=Cr(i,"pattern")||i==="line-dasharray";return j||w||F||this._handleOverridablePaintPropertyUpdate(i,E,R)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,u,p){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,u)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),nn(i,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(i,u,p,x,w={}){return(!w||w.validate!==!1)&&M0(this,i.call(R0,{key:u,layerType:this.type,objectKey:p,value:x,styleSpec:B,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const u=this.paint.get(i);if(u instanceof De&&zu(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=dp(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const EW=dt([{name:"a_pos",components:2,type:"Int16"}],4),TW=dt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class fs{constructor(i=[]){this.segments=i}prepareSegment(i,u,p,x){let w=this.segments[this.segments.length-1];return i>fs.MAX_VERTEX_ARRAY_LENGTH&&on(`Max vertices per segment is ${fs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!w||w.vertexLength+i>fs.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==x)&&(w={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},x!==void 0&&(w.sortKey=x),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const i of this.segments)for(const u in i.vaos)i.vaos[u].destroy()}static simpleSegment(i,u,p,x){return new fs([{vertexOffset:i,primitiveOffset:u,vertexLength:p,primitiveLength:x,vaos:{},sortKey:0}])}}fs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ar(fs,"SegmentVector");var Ur=8192;class Gu{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof ci?new ci(i.lng,i.lat):ci.convert(i),this}setSouthWest(i){return this._sw=i instanceof ci?new ci(i.lng,i.lat):ci.convert(i),this}extend(i){const u=this._sw,p=this._ne;let x,w;if(i instanceof ci)x=i,w=i;else{if(!(i instanceof Gu))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Gu.convert(i)):this.extend(ci.convert(i)):typeof i=="object"&&i!==null&&i.hasOwnProperty("lat")&&(i.hasOwnProperty("lon")||i.hasOwnProperty("lng"))?this.extend(ci.convert(i)):this;if(x=i._sw,w=i._ne,!x||!w)return this}return u||p?(u.lng=Math.min(x.lng,u.lng),u.lat=Math.min(x.lat,u.lat),p.lng=Math.max(w.lng,p.lng),p.lat=Math.max(w.lat,p.lat)):(this._sw=new ci(x.lng,x.lat),this._ne=new ci(w.lng,w.lat)),this}getCenter(){return new ci((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ci(this.getWest(),this.getNorth())}getSouthEast(){return new ci(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=ci.convert(i);let x=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&x}static convert(i){return!i||i instanceof Gu?i:new Gu(i)}}var F0=1e-6,sa=typeof Float32Array<"u"?Float32Array:Array;function bM(){var a=new sa(9);return sa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function _M(a,i,u){var p=i[0],x=i[1],w=i[2],E=i[3],R=i[4],j=i[5],F=i[6],Y=i[7],te=i[8],ne=u[0],ue=u[1],fe=u[2],be=u[3],Re=u[4],je=u[5],Je=u[6],Be=u[7],Ke=u[8];return a[0]=ne*p+ue*E+fe*F,a[1]=ne*x+ue*R+fe*Y,a[2]=ne*w+ue*j+fe*te,a[3]=be*p+Re*E+je*F,a[4]=be*x+Re*R+je*Y,a[5]=be*w+Re*j+je*te,a[6]=Je*p+Be*E+Ke*F,a[7]=Je*x+Be*R+Ke*Y,a[8]=Je*w+Be*j+Ke*te,a}function xl(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function T2(a,i){var u=i[0],p=i[1],x=i[2],w=i[3],E=i[4],R=i[5],j=i[6],F=i[7],Y=i[8],te=i[9],ne=i[10],ue=i[11],fe=i[12],be=i[13],Re=i[14],je=i[15],Je=u*R-p*E,Be=u*j-x*E,Ke=u*F-w*E,nt=p*j-x*R,tt=p*F-w*R,kt=x*F-w*j,wt=Y*be-te*fe,zt=Y*Re-ne*fe,er=Y*je-ue*fe,It=te*Re-ne*be,$t=te*je-ue*be,Ut=ne*je-ue*Re,Yt=Je*Ut-Be*$t+Ke*It+nt*er-tt*zt+kt*wt;return Yt?(a[0]=(R*Ut-j*$t+F*It)*(Yt=1/Yt),a[1]=(x*$t-p*Ut-w*It)*Yt,a[2]=(be*kt-Re*tt+je*nt)*Yt,a[3]=(ne*tt-te*kt-ue*nt)*Yt,a[4]=(j*er-E*Ut-F*zt)*Yt,a[5]=(u*Ut-x*er+w*zt)*Yt,a[6]=(Re*Ke-fe*kt-je*Be)*Yt,a[7]=(Y*kt-ne*Ke+ue*Be)*Yt,a[8]=(E*$t-R*er+F*wt)*Yt,a[9]=(p*er-u*$t-w*wt)*Yt,a[10]=(fe*tt-be*Ke+je*Je)*Yt,a[11]=(te*Ke-Y*tt-ue*Je)*Yt,a[12]=(R*zt-E*It-j*wt)*Yt,a[13]=(u*It-p*zt+x*wt)*Yt,a[14]=(be*Be-fe*nt-Re*Je)*Yt,a[15]=(Y*nt-te*Be+ne*Je)*Yt,a):null}function Id(a,i,u){var p=i[0],x=i[1],w=i[2],E=i[3],R=i[4],j=i[5],F=i[6],Y=i[7],te=i[8],ne=i[9],ue=i[10],fe=i[11],be=i[12],Re=i[13],je=i[14],Je=i[15],Be=u[0],Ke=u[1],nt=u[2],tt=u[3];return a[0]=Be*p+Ke*R+nt*te+tt*be,a[1]=Be*x+Ke*j+nt*ne+tt*Re,a[2]=Be*w+Ke*F+nt*ue+tt*je,a[3]=Be*E+Ke*Y+nt*fe+tt*Je,a[4]=(Be=u[4])*p+(Ke=u[5])*R+(nt=u[6])*te+(tt=u[7])*be,a[5]=Be*x+Ke*j+nt*ne+tt*Re,a[6]=Be*w+Ke*F+nt*ue+tt*je,a[7]=Be*E+Ke*Y+nt*fe+tt*Je,a[8]=(Be=u[8])*p+(Ke=u[9])*R+(nt=u[10])*te+(tt=u[11])*be,a[9]=Be*x+Ke*j+nt*ne+tt*Re,a[10]=Be*w+Ke*F+nt*ue+tt*je,a[11]=Be*E+Ke*Y+nt*fe+tt*Je,a[12]=(Be=u[12])*p+(Ke=u[13])*R+(nt=u[14])*te+(tt=u[15])*be,a[13]=Be*x+Ke*j+nt*ne+tt*Re,a[14]=Be*w+Ke*F+nt*ue+tt*je,a[15]=Be*E+Ke*Y+nt*fe+tt*Je,a}function Jg(a,i,u){var p,x,w,E,R,j,F,Y,te,ne,ue,fe,be=u[0],Re=u[1],je=u[2];return i===a?(a[12]=i[0]*be+i[4]*Re+i[8]*je+i[12],a[13]=i[1]*be+i[5]*Re+i[9]*je+i[13],a[14]=i[2]*be+i[6]*Re+i[10]*je+i[14],a[15]=i[3]*be+i[7]*Re+i[11]*je+i[15]):(x=i[1],w=i[2],E=i[3],R=i[4],j=i[5],F=i[6],Y=i[7],te=i[8],ne=i[9],ue=i[10],fe=i[11],a[0]=p=i[0],a[1]=x,a[2]=w,a[3]=E,a[4]=R,a[5]=j,a[6]=F,a[7]=Y,a[8]=te,a[9]=ne,a[10]=ue,a[11]=fe,a[12]=p*be+R*Re+te*je+i[12],a[13]=x*be+j*Re+ne*je+i[13],a[14]=w*be+F*Re+ue*je+i[14],a[15]=E*be+Y*Re+fe*je+i[15]),a}function Pd(a,i,u){var p=u[0],x=u[1],w=u[2];return a[0]=i[0]*p,a[1]=i[1]*p,a[2]=i[2]*p,a[3]=i[3]*p,a[4]=i[4]*x,a[5]=i[5]*x,a[6]=i[6]*x,a[7]=i[7]*x,a[8]=i[8]*w,a[9]=i[9]*w,a[10]=i[10]*w,a[11]=i[11]*w,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}function A2(a,i,u){var p=Math.sin(u),x=Math.cos(u),w=i[4],E=i[5],R=i[6],j=i[7],F=i[8],Y=i[9],te=i[10],ne=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=w*x+F*p,a[5]=E*x+Y*p,a[6]=R*x+te*p,a[7]=j*x+ne*p,a[8]=F*x-w*p,a[9]=Y*x-E*p,a[10]=te*x-R*p,a[11]=ne*x-j*p,a}function B0(a,i,u){var p=Math.sin(u),x=Math.cos(u),w=i[0],E=i[1],R=i[2],j=i[3],F=i[8],Y=i[9],te=i[10],ne=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=w*x-F*p,a[1]=E*x-Y*p,a[2]=R*x-te*p,a[3]=j*x-ne*p,a[8]=w*p+F*x,a[9]=E*p+Y*x,a[10]=R*p+te*x,a[11]=j*p+ne*x,a}function wM(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function SM(a,i,u){var p,x,w,E=u[0],R=u[1],j=u[2],F=Math.hypot(E,R,j);return F<F0?null:(E*=F=1/F,R*=F,j*=F,p=Math.sin(i),x=Math.cos(i),a[0]=E*E*(w=1-x)+x,a[1]=R*E*w+j*p,a[2]=j*E*w-R*p,a[3]=0,a[4]=E*R*w-j*p,a[5]=R*R*w+x,a[6]=j*R*w+E*p,a[7]=0,a[8]=E*j*w+R*p,a[9]=R*j*w-E*p,a[10]=j*j*w+x,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var AW=Id;function I2(){var a=new sa(3);return sa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function CM(a){var i=new sa(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}function Qg(a){return Math.hypot(a[0],a[1],a[2])}function vp(a,i,u){var p=new sa(3);return p[0]=a,p[1]=i,p[2]=u,p}function $c(a,i,u){return a[0]=i[0]+u[0],a[1]=i[1]+u[1],a[2]=i[2]+u[2],a}function P2(a,i,u){return a[0]=i[0]-u[0],a[1]=i[1]-u[1],a[2]=i[2]-u[2],a}function kM(a,i,u){return a[0]=i[0]*u[0],a[1]=i[1]*u[1],a[2]=i[2]*u[2],a}function ey(a,i,u){return a[0]=Math.min(i[0],u[0]),a[1]=Math.min(i[1],u[1]),a[2]=Math.min(i[2],u[2]),a}function ty(a,i,u){return a[0]=Math.max(i[0],u[0]),a[1]=Math.max(i[1],u[1]),a[2]=Math.max(i[2],u[2]),a}function Sa(a,i,u){return a[0]=i[0]*u,a[1]=i[1]*u,a[2]=i[2]*u,a}function ry(a,i,u,p){return a[0]=i[0]+u[0]*p,a[1]=i[1]+u[1]*p,a[2]=i[2]+u[2]*p,a}function Eo(a,i){var u=i[0],p=i[1],x=i[2],w=u*u+p*p+x*x;return w>0&&(w=1/Math.sqrt(w)),a[0]=i[0]*w,a[1]=i[1]*w,a[2]=i[2]*w,a}function Xa(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}function R2(a,i,u){var p=i[0],x=i[1],w=i[2],E=u[0],R=u[1],j=u[2];return a[0]=x*j-w*R,a[1]=w*E-p*j,a[2]=p*R-x*E,a}function as(a,i,u){var p=i[0],x=i[1],w=i[2],E=u[3]*p+u[7]*x+u[11]*w+u[15];return a[0]=(u[0]*p+u[4]*x+u[8]*w+u[12])/(E=E||1),a[1]=(u[1]*p+u[5]*x+u[9]*w+u[13])/E,a[2]=(u[2]*p+u[6]*x+u[10]*w+u[14])/E,a}function EM(a,i,u){var p=u[0],x=u[1],w=u[2],E=i[0],R=i[1],j=i[2],F=x*j-w*R,Y=w*E-p*j,te=p*R-x*E,ne=x*te-w*Y,ue=w*F-p*te,fe=p*Y-x*F,be=2*u[3];return Y*=be,te*=be,ue*=2,fe*=2,a[0]=E+(F*=be)+(ne*=2),a[1]=R+Y+ue,a[2]=j+te+fe,a}var ny,vl=P2,IW=kM,PW=Qg;function TM(a,i,u){return a[0]=i[0]*u,a[1]=i[1]*u,a[2]=i[2]*u,a[3]=i[3]*u,a}function AM(a,i){var u=i[0],p=i[1],x=i[2],w=i[3],E=u*u+p*p+x*x+w*w;return E>0&&(E=1/Math.sqrt(E)),a[0]=u*E,a[1]=p*E,a[2]=x*E,a[3]=w*E,a}function Rd(a,i,u){var p=i[0],x=i[1],w=i[2],E=i[3];return a[0]=u[0]*p+u[4]*x+u[8]*w+u[12]*E,a[1]=u[1]*p+u[5]*x+u[9]*w+u[13]*E,a[2]=u[2]*p+u[6]*x+u[10]*w+u[14]*E,a[3]=u[3]*p+u[7]*x+u[11]*w+u[15]*E,a}function IM(){var a=new sa(4);return sa!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function PM(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function RM(a,i,u){u*=.5;var p=i[0],x=i[1],w=i[2],E=i[3],R=Math.sin(u),j=Math.cos(u);return a[0]=p*j+E*R,a[1]=x*j+w*R,a[2]=w*j-x*R,a[3]=E*j-p*R,a}function MM(a,i,u){u*=.5;var p=i[0],x=i[1],w=i[2],E=i[3],R=Math.sin(u),j=Math.cos(u);return a[0]=p*j-w*R,a[1]=x*j+E*R,a[2]=w*j+p*R,a[3]=E*j-x*R,a}I2(),ny=new sa(4),sa!=Float32Array&&(ny[0]=0,ny[1]=0,ny[2]=0,ny[3]=0);var RW=AM;I2(),vp(1,0,0),vp(0,1,0),IM(),IM(),bM();const MW=dt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:LM}=MW,OM=dt([{name:"a_pos_3",components:3,type:"Int16"}]);var iy=dt([{name:"a_pos",type:"Int16",components:2}]);class M2{constructor(i,u){this.pos=i,this.dir=u}intersectsPlane(i,u,p){const x=Xa(u,this.dir);if(Math.abs(x)<1e-6)return!1;const w=((i[0]-this.pos[0])*u[0]+(i[1]-this.pos[1])*u[1]+(i[2]-this.pos[2])*u[2])/x;return p[0]=this.pos[0]+this.dir[0]*w,p[1]=this.pos[1]+this.dir[1]*w,p[2]=this.pos[2]+this.dir[2]*w,!0}closestPointOnSphere(i,u,p){if(function(ue,fe){var be=ue[0],Re=ue[1],je=ue[2],Je=fe[0],Be=fe[1],Ke=fe[2];return Math.abs(be-Je)<=F0*Math.max(1,Math.abs(be),Math.abs(Je))&&Math.abs(Re-Be)<=F0*Math.max(1,Math.abs(Re),Math.abs(Be))&&Math.abs(je-Ke)<=F0*Math.max(1,Math.abs(je),Math.abs(Ke))}(this.pos,i)||u===0)return p[0]=p[1]=p[2]=0,!1;const[x,w,E]=this.dir,R=this.pos[0]-i[0],j=this.pos[1]-i[1],F=this.pos[2]-i[2],Y=x*x+w*w+E*E,te=2*(R*x+j*w+F*E),ne=te*te-4*Y*(R*R+j*j+F*F-u*u);if(ne<0){const ue=Math.max(-te/2,0),fe=R+x*ue,be=j+w*ue,Re=F+E*ue,je=Math.hypot(fe,be,Re);return p[0]=fe*u/je,p[1]=be*u/je,p[2]=Re*u/je,!1}{const ue=(-te-Math.sqrt(ne))/(2*Y);if(ue<0){const fe=Math.hypot(R,j,F);return p[0]=R*u/fe,p[1]=j*u/fe,p[2]=F*u/fe,!1}return p[0]=R+x*ue,p[1]=j+w*ue,p[2]=F+E*ue,!0}}}class L2{constructor(i,u,p,x,w){this.TL=i,this.TR=u,this.BR=p,this.BL=x,this.horizon=w}static fromInvProjectionMatrix(i,u,p){const x=[-1,1,1],w=[1,1,1],E=[1,-1,1],R=[-1,-1,1],j=as(x,x,i),F=as(w,w,i),Y=as(E,E,i),te=as(R,R,i);return new L2(j,F,Y,te,u/p)}}class O2{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p,x){const w=Math.pow(2,p),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{const F=Rd([],j,i),Y=1/F[3]/u*w;return function(te,ne,ue){return te[0]=ne[0]*ue[0],te[1]=ne[1]*ue[1],te[2]=ne[2]*ue[2],te[3]=ne[3]*ue[3],te}(F,F,[Y,Y,x?1/F[3]:Y,Y])}),R=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{const F=Eo([],R2([],vl([],E[j[0]],E[j[1]]),vl([],E[j[2]],E[j[1]]))),Y=-Xa(F,E[j[1]]);return F.concat(Y)});return new O2(E,R)}}class To{static fromPoints(i){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const x of i)ey(u,u,x),ty(p,p,x);return new To(u,p)}static applyTransform(i,u){const p=i.getCorners();for(let x=0;x<p.length;++x)as(p[x],p[x],u);return To.fromPoints(p)}constructor(i,u){this.min=i,this.max=u,this.center=Sa([],$c([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],p=CM(this.min),x=CM(this.max);for(let w=0;w<u.length;w++)p[w]=u[w]?this.min[w]:this.center[w],x[w]=u[w]?this.center[w]:this.max[w];return x[2]=this.max[2],new To(p,x)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,u=this.max;return[[i[0],i[1],i[2]],[u[0],i[1],i[2]],[u[0],u[1],i[2]],[i[0],u[1],i[2]],[i[0],i[1],u[2]],[u[0],i[1],u[2]],[u[0],u[1],u[2]],[i[0],u[1],u[2]]]}intersects(i){const u=this.getCorners();let p=!0;for(let x=0;x<i.planes.length;x++){const w=i.planes[x];let E=0;for(let R=0;R<u.length;R++)E+=Xa(w,u[R])+w[3]>=0;if(E===0)return 0;E!==u.length&&(p=!1)}if(p)return 2;for(let x=0;x<3;x++){let w=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let R=0;R<i.points.length;R++){const j=i.points[R][x]-this.min[x];w=Math.min(w,j),E=Math.max(E,j)}if(E<0||w>this.max[x]-this.min[x])return 0}return 1}}const D2=5,DM=6,Xl=Ur/Math.PI/2,LW=16383,Md=64,sy=[Md,32,16],qa=-Xl,Ya=Xl,OW=[new To([qa,qa,qa],[Ya,Ya,Ya]),new To([qa,qa,qa],[0,0,Ya]),new To([0,qa,qa],[Ya,0,Ya]),new To([qa,0,qa],[0,Ya,Ya]),new To([0,0,qa],[Ya,Ya,Ya])];function $0(a){return a*Xl/ly}function zM(a,i,u,p=!0){const x=Sa([],a._camera.position,a.worldSize),w=[i,u,1,1];Rd(w,w,a.pixelMatrixInverse),TM(w,w,1/w[3]);const E=Eo([],vl([],w,x)),R=a.globeMatrix,j=[R[12],R[13],R[14]],F=vl([],j,x),Y=Qg(F),te=Eo([],F),ne=a.worldSize/(2*Math.PI),ue=Xa(te,E),fe=Math.asin(ne/Y);if(fe<Math.acos(ue)){if(!p)return null;const er=[],It=[];Sa(er,E,Y/ue),Eo(It,vl(It,er,F)),Eo(E,$c(E,F,Sa(E,It,Math.tan(fe)*Y)))}const be=[];new M2(x,E).closestPointOnSphere(j,ne,be);const Re=Eo([],pr(R,0)),je=Eo([],pr(R,1)),Je=Eo([],pr(R,2)),Be=Xa(Re,be),Ke=Xa(je,be),nt=Xa(Je,be),tt=Ye(Math.asin(-Ke/ne));let kt=Ye(Math.atan2(Be,nt));kt=a.center.lng+function(er,It){const $t=(It-er+180)%360-180;return $t<-180?$t+360:$t}(a.center.lng,kt);const wt=Yl(kt),zt=mt(Zl(tt),0,1);return new Sp(wt,zt)}class DW{constructor(i,u,p){this.a=vl([],i,p),this.b=vl([],u,p),this.center=p;const x=Eo([],this.a),w=Eo([],this.b);this.angle=Math.acos(Xa(x,w))}}function z2(a,i){if(a.angle===0)return null;let u;return u=a.a[i]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[i]/a.a[i]/Math.sin(a.angle)-1/Math.tan(a.angle)),u<0||u>1?null:function(p,x,w,E){const R=Math.sin(w);return p*(Math.sin((1-E)*w)/R)+x*(Math.sin(E*w)/R)}(a.a[i],a.b[i],a.angle,mt(u,0,1))+a.center[i]}function ql(a){if(a.z<=1)return OW[a.z+2*a.y+a.x];const i=N2(U0(a));return To.fromPoints(i)}function Ld(a,i,u){return Sa(a,a,1-u),ry(a,a,i,u)}function NM(a,i){const u=wp(i.zoom);if(u===0)return ql(a);const p=U0(a),x=N2(p),w=Yl(p.getWest())*i.worldSize,E=Yl(p.getEast())*i.worldSize,R=Zl(p.getNorth())*i.worldSize,j=Zl(p.getSouth())*i.worldSize,F=[w,R,0],Y=[E,R,0],te=[w,j,0],ne=[E,j,0],ue=T2([],i.globeMatrix);return as(F,F,ue),as(Y,Y,ue),as(te,te,ue),as(ne,ne,ue),x[0]=Ld(x[0],te,u),x[1]=Ld(x[1],ne,u),x[2]=Ld(x[2],Y,u),x[3]=Ld(x[3],F,u),To.fromPoints(x)}function jM(a,i,u){for(const p of a)as(p,p,i),Sa(p,p,u)}function zW(a,i,u){const p=i/a.worldSize,x=a.globeMatrix;if(u.z<=1){const wt=ql(u).getCorners();return jM(wt,x,p),To.fromPoints(wt)}const w=U0(u),E=N2(w);jM(E,x,p);const R=Number.MAX_VALUE,j=[-R,-R,-R],F=[R,R,R];if(w.contains(a.center)){for(const er of E)ey(F,F,er),ty(j,j,er);j[2]=0;const wt=a.point,zt=[wt.x*p,wt.y*p,0];return ey(F,F,zt),ty(j,j,zt),new To(F,j)}const Y=[x[12]*p,x[13]*p,x[14]*p],te=w.getCenter(),ne=mt(a.center.lat,-lo,lo),ue=mt(te.lat,-lo,lo),fe=Yl(a.center.lng),be=Zl(ne);let Re=fe-Yl(te.lng);const je=be-Zl(ue);Re>.5?Re-=1:Re<-.5&&(Re+=1);let Je=0;Math.abs(Re)>Math.abs(je)?Je=Re>=0?1:3:(Je=je>=0?0:2,ry(Y,Y,[x[4]*p,x[5]*p,x[6]*p],-Math.sin(Fe(je>=0?w.getSouth():w.getNorth()))*Xl));const Be=E[Je],Ke=E[(Je+1)%4],nt=new DW(Be,Ke,Y),tt=[z2(nt,0)||Be[0],z2(nt,1)||Be[1],z2(nt,2)||Be[2]],kt=wp(a.zoom);if(kt>0){const wt=function({x:er,y:It,z:$t},Ut,Yt,lr,Lt){const vr=1/(1<<$t);let Pr=er*vr,br=Pr+vr,cn=It*vr,cr=cn+vr,Nr=0;const un=(Pr+br)/2-lr;return un>.5?Nr=-1:un<-.5&&(Nr=1),Pr=((Pr+Nr)*Ut-(lr*=Ut))*Yt+lr,br=((br+Nr)*Ut-lr)*Yt+lr,cn=(cn*Ut-(Lt*=Ut))*Yt+Lt,cr=(cr*Ut-Lt)*Yt+Lt,[[Pr,cr,0],[br,cr,0],[br,cn,0],[Pr,cn,0]]}(u,i,a._pixelsPerMercatorPixel,fe,be);for(let er=0;er<E.length;er++)Ld(E[er],wt[er],kt);const zt=$c([],wt[Je],wt[(Je+1)%4]);Sa(zt,zt,.5),Ld(tt,zt,kt)}for(const wt of E)ey(F,F,wt),ty(j,j,wt);return F[2]=Math.min(Be[2],Ke[2]),ey(F,F,tt),ty(j,j,tt),new To(F,j)}function U0({x:a,y:i,z:u}){const p=1/(1<<u),x=new ci(Ca(a*p),ao((i+1)*p)),w=new ci(Ca((a+1)*p),ao(i*p));return new Gu(x,w)}function N2(a){const i=Fe(a.getNorth()),u=Fe(a.getSouth()),p=Math.cos(i),x=Math.cos(u),w=Math.sin(i),E=Math.sin(u),R=a.getWest(),j=a.getEast();return[bp(x,E,R),bp(x,E,j),bp(p,w,j),bp(p,w,R)]}function bp(a,i,u,p=Xl){return u=Fe(u),[a*Math.sin(u)*p,-i*p,a*Math.cos(u)*p]}function _p(a,i,u){return bp(Math.cos(Fe(a)),Math.sin(Fe(a)),i,u)}function oy(a,i,u,p){const x=1<<u.z,w=(a/Ur+u.x)/x;return _p(ao((i/Ur+u.y)/x),Ca(w),p)}function V0({min:a,max:i}){return LW/Math.max(i[0]-a[0],i[1]-a[1],i[2]-a[2])}const FM=new Float64Array(16);function ay(a){const i=V0(a),u=wM(FM,[i,i,i]);return Jg(u,u,((p=[])[0]=-(x=a.min)[0],p[1]=-x[1],p[2]=-x[2],p));var p,x}function j2(a){const i=(p=a.min,(u=FM)[0]=1,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=1,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=p[0],u[13]=p[1],u[14]=p[2],u[15]=1,u);var u,p;const x=1/V0(a);return Pd(i,i,[x,x,x])}function BM(a,i,u,p,x){const w=function(j){const F=Ur/(2*Math.PI);return j/(2*Math.PI)/F}(u),E=[a,i,-u/(2*Math.PI)],R=xl(new Float64Array(16));return Jg(R,R,E),Pd(R,R,[w,w,w]),A2(R,R,Fe(-x)),B0(R,R,Fe(-p)),R}function wp(a){return Xt(D2,DM,a)}function $M(a,i){const u=_p(i.lat,i.lng),p=function(fe){const be=_p(fe._center.lat,fe._center.lng);let Re=R2([],vp(0,1,0),be);const je=SM([],-fe.angle,be);Re=as(Re,Re,je),SM(je,-fe._pitch,Re);const Je=Eo([],be);return Sa(Je,Je,$0(fe.cameraToCenterDistance/fe.pixelsPerMeter)),as(Je,Je,je),$c([],be,Je)}(a);return E=(x=P2([],p,u))[0],R=x[1],j=x[2],F=(w=u)[0],Y=w[1],te=w[2],ue=(ne=Math.sqrt(E*E+R*R+j*j)*Math.sqrt(F*F+Y*Y+te*te))&&Xa(x,w)/ne,Math.acos(Math.min(Math.max(ue,-1),1));var x,w,E,R,j,F,Y,te,ne,ue}function F2(a,i){return $M(a,i)>Math.PI/2*1.01}const UM=Fe(85),NW=Math.cos(UM),jW=Math.sin(UM),ly=63710088e-1,VM=2*Math.PI*ly;class Xu{constructor(i,u){if(isNaN(i)||isNaN(u))throw new Error(`Invalid LngLat object: (${i}, ${u})`);if(this.lng=+i,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xu(Wt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const u=Math.PI/180,p=this.lat*u,x=i.lat*u,w=Math.sin(p)*Math.sin(x)+Math.cos(p)*Math.cos(x)*Math.cos((i.lng-this.lng)*u);return ly*Math.acos(Math.min(w,1))}toBounds(i=0){const u=360*i/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Gu(new Xu(this.lng-p,this.lat-u),new Xu(this.lng+p,this.lat+u))}toEcef(i){const u=$0(i);return _p(this.lat,this.lng,Xl+u)}static convert(i){if(i instanceof Xu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Xu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Xu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ci=Xu;function B2(a){return VM*Math.cos(a*Math.PI/180)}function Yl(a){return(180+a)/360}function Zl(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function bl(a,i){return a/B2(i)}function Ca(a){return 360*a-180}function ao(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function HM(a,i){return a*B2(ao(i))}const lo=85.051129;function WM(a){return 1/Math.cos(a*Math.PI/180)}class Sp{constructor(i,u,p=0){this.x=+i,this.y=+u,this.z=+p}static fromLngLat(i,u=0){const p=ci.convert(i);return new Sp(Yl(p.lng),Zl(p.lat),bl(u,p.lat))}toLngLat(){return new ci(Ca(this.x),ao(this.y))}toAltitude(){return HM(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/VM*WM(ao(this.y))}}function $2(a,i,u,p,x,w,E,R,j){const F=(i+p)/2,Y=(u+x)/2,te=new Pe(F,Y);R(te),function(ne,ue,fe,be,Re,je){const Je=fe-Re,Be=be-je;return Math.abs((be-ue)*Je-(fe-ne)*Be)/Math.hypot(Je,Be)}(te.x,te.y,w.x,w.y,E.x,E.y)>=j?($2(a,i,u,F,Y,w,te,R,j),$2(a,F,Y,p,x,te,E,R,j)):a.push(E)}function GM(a,i,u){let p=a[0],x=p.x,w=p.y;i(p);const E=[p];for(let R=1;R<a.length;R++){const j=a[R],{x:F,y:Y}=j;i(j),$2(E,x,w,F,Y,p,j,i,u),x=F,w=Y,p=j}return E}function U2(a,i,u,p){if(p(i,u)){const x=i.add(u)._mult(.5);U2(a,i,x,p),U2(a,x,u,p)}else a.push(u)}function FW(a,i){let u=a[0];const p=[u];for(let x=1;x<a.length;x++){const w=a[x];U2(p,u,w,i),u=w}return p}const V2=Math.pow(2,14)-1,XM=-V2-1;function BW(a,i){const u=Math.round(a.x*i),p=Math.round(a.y*i);return a.x=mt(u,XM,V2),a.y=mt(p,XM,V2),(u<a.x||u>a.x+1||p<a.y||p>a.y+1)&&on("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function Uc(a,i,u){const p=a.loadGeometry(),x=a.extent,w=Ur/x;if(i&&u&&u.projection.isReprojectedInTileSpace){const E=1<<i.z,{scale:R,x:j,y:F,projection:Y}=u,te=ne=>{const ue=Ca((i.x+ne.x/x)/E),fe=ao((i.y+ne.y/x)/E),be=Y.project(ue,fe);ne.x=(be.x*R-j)*x,ne.y=(be.y*R-F)*x};for(let ne=0;ne<p.length;ne++)if(a.type!==1)p[ne]=GM(p[ne],te,1);else{const ue=[];for(const fe of p[ne])fe.x<0||fe.x>=x||fe.y<0||fe.y>=x||(te(fe),ue.push(fe));p[ne]=ue}}for(const E of p)for(const R of E)BW(R,w);return p}function Od(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?Uc(a):[]}}function H0(a,i,u,p,x){a.emplaceBack(2*i+(p+1)/2,2*u+(x+1)/2)}function W0(a,i,u){a.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class H2{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new Qt,this.indexArray=new Lr,this.segments=new fs,this.programConfigurations=new Ad(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p,x){const w=this.layers[0],E=[];let R=null;w.type==="circle"&&(R=w.layout.get("circle-sort-key"));for(const{feature:F,id:Y,index:te,sourceLayerIndex:ne}of i){const ue=this.layers[0]._featureFilter.needGeometry,fe=Od(F,ue);if(!this.layers[0]._featureFilter.filter(new J(this.zoom),fe,p))continue;const be=R?R.evaluate(fe,{},p):void 0,Re={id:Y,properties:F.properties,type:F.type,sourceLayerIndex:ne,index:te,geometry:ue?fe.geometry:Uc(F,p,x),patterns:{},sortKey:be};E.push(Re)}R&&E.sort((F,Y)=>F.sortKey-Y.sortKey);let j=null;x.projection.name==="globe"&&(this.globeExtVertexArray=new rr,j=x.projection);for(const F of E){const{geometry:Y,index:te,sourceLayerIndex:ne}=F,ue=i[te].feature;this.addFeature(F,Y,te,u.availableImages,p,j),u.featureIndex.insert(ue,Y,te,ne,this.index)}}update(i,u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,EW.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,TW.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,u,p,x,w,E){for(const R of u)for(const j of R){const F=j.x,Y=j.y;if(F<0||F>=Ur||Y<0||Y>=Ur)continue;if(E){const ue=E.projectTilePoint(F,Y,w),fe=E.upVector(w,F,Y),be=this.globeExtVertexArray;W0(be,ue,fe),W0(be,ue,fe),W0(be,ue,fe),W0(be,ue,fe)}const te=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),ne=te.vertexLength;H0(this.layoutVertexArray,F,Y,-1,-1),H0(this.layoutVertexArray,F,Y,1,-1),H0(this.layoutVertexArray,F,Y,1,1),H0(this.layoutVertexArray,F,Y,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+2,ne+3),te.vertexLength+=4,te.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{},x,w)}}function qM(a,i){for(let u=0;u<a.length;u++)if(Dd(i,a[u]))return!0;for(let u=0;u<i.length;u++)if(Dd(a,i[u]))return!0;return!!W2(a,i)}function $W(a,i,u){return!!Dd(a,i)||!!G2(i,a,u)}function YM(a,i){if(a.length===1)return KM(i,a[0]);for(let u=0;u<i.length;u++){const p=i[u];for(let x=0;x<p.length;x++)if(Dd(a,p[x]))return!0}for(let u=0;u<a.length;u++)if(KM(i,a[u]))return!0;for(let u=0;u<i.length;u++)if(W2(a,i[u]))return!0;return!1}function UW(a,i,u){if(a.length>1){if(W2(a,i))return!0;for(let p=0;p<i.length;p++)if(G2(i[p],a,u))return!0}for(let p=0;p<a.length;p++)if(G2(a[p],i,u))return!0;return!1}function W2(a,i){if(a.length===0||i.length===0)return!1;for(let u=0;u<a.length-1;u++){const p=a[u],x=a[u+1];for(let w=0;w<i.length-1;w++)if(VW(p,x,i[w],i[w+1]))return!0}return!1}function VW(a,i,u,p){return Gr(a,u,p)!==Gr(i,u,p)&&Gr(a,i,u)!==Gr(a,i,p)}function G2(a,i,u){const p=u*u;if(i.length===1)return a.distSqr(i[0])<p;for(let x=1;x<i.length;x++)if(ZM(a,i[x-1],i[x])<p)return!0;return!1}function ZM(a,i,u){const p=i.distSqr(u);if(p===0)return a.distSqr(i);const x=((a.x-i.x)*(u.x-i.x)+(a.y-i.y)*(u.y-i.y))/p;return a.distSqr(x<0?i:x>1?u:u.sub(i)._mult(x)._add(i))}function KM(a,i){let u,p,x,w=!1;for(let E=0;E<a.length;E++){u=a[E];for(let R=0,j=u.length-1;R<u.length;j=R++)p=u[R],x=u[j],p.y>i.y!=x.y>i.y&&i.x<(x.x-p.x)*(i.y-p.y)/(x.y-p.y)+p.x&&(w=!w)}return w}function Dd(a,i){let u=!1;for(let p=0,x=a.length-1;p<a.length;x=p++){const w=a[p],E=a[x];w.y>i.y!=E.y>i.y&&i.x<(E.x-w.x)*(i.y-w.y)/(E.y-w.y)+w.x&&(u=!u)}return u}function JM(a,i,u,p,x){for(const E of a)if(i<=E.x&&u<=E.y&&p>=E.x&&x>=E.y)return!0;const w=[new Pe(i,u),new Pe(i,x),new Pe(p,x),new Pe(p,u)];if(a.length>2){for(const E of w)if(Dd(a,E))return!0}for(let E=0;E<a.length-1;E++)if(HW(a[E],a[E+1],w))return!0;return!1}function HW(a,i,u){const p=u[0],x=u[2];if(a.x<p.x&&i.x<p.x||a.x>x.x&&i.x>x.x||a.y<p.y&&i.y<p.y||a.y>x.y&&i.y>x.y)return!1;const w=Gr(a,i,u[0]);return w!==Gr(a,i,u[1])||w!==Gr(a,i,u[2])||w!==Gr(a,i,u[3])}function Cp(a,i,u){const p=i.paint.get(a).value;return p.kind==="constant"?p.value:u.programConfigurations.get(i.id).getMaxValue(a)}function G0(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function QM(a,i,u,p,x){if(!i[0]&&!i[1])return a;const w=Pe.convert(i)._mult(x);u==="viewport"&&w._rotate(-p);const E=[];for(let R=0;R<a.length;R++)E.push(a[R].sub(w));return E}function eL(a,i,u,p){const x=Pe.convert(a)._mult(p);return i==="viewport"&&x._rotate(-u),x}Ar(H2,"CircleBucket",{omit:["layers"]});const WW=new qe({"circle-sort-key":new Me(B.layout_circle["circle-sort-key"])});var GW={paint:new qe({"circle-radius":new Me(B.paint_circle["circle-radius"]),"circle-color":new Me(B.paint_circle["circle-color"]),"circle-blur":new Me(B.paint_circle["circle-blur"]),"circle-opacity":new Me(B.paint_circle["circle-opacity"]),"circle-translate":new ge(B.paint_circle["circle-translate"]),"circle-translate-anchor":new ge(B.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ge(B.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ge(B.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Me(B.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Me(B.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Me(B.paint_circle["circle-stroke-opacity"])}),layout:WW};function tL(a,i,u,p,x,w,E,R,j){if(w&&a.queryGeometry.isAboveHorizon)return!1;w&&(j*=a.pixelToTileUnitsFactor);const F=a.tileID.canonical,Y=u.projection.upVectorScale(F,u.center.lat,u.worldSize).metersToTile;for(const te of i)for(const ne of te){const ue=ne.add(R),fe=x&&u.elevation?u.elevation.exaggeration()*x.getElevationAt(ue.x,ue.y,!0):0,be=u.projection.projectTilePoint(ue.x,ue.y,F);if(fe>0){const Be=u.projection.upVector(F,ue.x,ue.y);be.x+=Be[0]*Y*fe,be.y+=Be[1]*Y*fe,be.z+=Be[2]*Y*fe}const Re=w?ue:XW(be.x,be.y,be.z,p),je=w?a.tilespaceRays.map(Be=>YW(Be,fe)):a.queryGeometry.screenGeometry,Je=Rd([],[be.x,be.y,be.z,1],p);if(!E&&w?j*=Je[3]/u.cameraToCenterDistance:E&&!w&&(j*=u.cameraToCenterDistance/Je[3]),w){const Be=ao((ne.y/Ur+F.y)/(1<<F.z));j/=u.projection.pixelsPerMeter(Be,1)/bl(1,Be)}if($W(je,Re,j))return!0}return!1}function XW(a,i,u,p){const x=Rd([],[a,i,u,1],p);return new Pe(x[0]/x[3],x[1]/x[3])}const rL=vp(0,0,0),qW=vp(0,0,1);function YW(a,i){const u=I2();return rL[2]=i,a.intersectsPlane(rL,qW,u),new Pe(u[0],u[1])}class nL extends H2{}function iL(a,{width:i,height:u},p,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==i*u*p)throw new RangeError("mismatched image size")}else x=new Uint8Array(i*u*p);return a.width=i,a.height=u,a.data=x,a}function sL(a,i,u){const{width:p,height:x}=i;p===a.width&&x===a.height||(X2(a,i,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,p),height:Math.min(a.height,x)},u),a.width=p,a.height=x,a.data=i.data)}function X2(a,i,u,p,x,w){if(x.width===0||x.height===0)return i;if(x.width>a.width||x.height>a.height||u.x>a.width-x.width||u.y>a.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>i.width||x.height>i.height||p.x>i.width-x.width||p.y>i.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const E=a.data,R=i.data;for(let j=0;j<x.height;j++){const F=((u.y+j)*a.width+u.x)*w,Y=((p.y+j)*i.width+p.x)*w;for(let te=0;te<x.width*w;te++)R[Y+te]=E[F+te]}return i}Ar(nL,"HeatmapBucket",{omit:["layers"]});class Vc{constructor(i,u){iL(this,i,1,u)}resize(i){sL(this,new Vc(i),1)}clone(){return new Vc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,x,w){X2(i,u,p,x,w,1)}}class oa{constructor(i,u){iL(this,i,4,u)}resize(i){sL(this,new oa(i),4)}replace(i,u){u?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new oa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,u,p,x,w){X2(i,u,p,x,w,4)}}Ar(Vc,"AlphaImage"),Ar(oa,"RGBAImage");var ZW={paint:new qe({"heatmap-radius":new Me(B.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Me(B.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ge(B.paint_heatmap["heatmap-intensity"]),"heatmap-color":new We(B.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ge(B.paint_heatmap["heatmap-opacity"])})};function q2(a){const i={},u=a.resolution||256,p=a.clips?a.clips.length:1,x=a.image||new oa({width:u,height:p}),w=(E,R,j)=>{i[a.evaluationKey]=j;const F=a.expression.evaluate(i);x.data[E+R+0]=Math.floor(255*F.r/F.a),x.data[E+R+1]=Math.floor(255*F.g/F.a),x.data[E+R+2]=Math.floor(255*F.b/F.a),x.data[E+R+3]=Math.floor(255*F.a)};if(a.clips)for(let E=0,R=0;E<p;++E,R+=4*u)for(let j=0,F=0;j<u;j++,F+=4){const Y=j/(u-1),{start:te,end:ne}=a.clips[E];w(R,F,te*(1-Y)+ne*Y)}else for(let E=0,R=0;E<u;E++,R+=4)w(0,R,E/(u-1));return x}var KW={paint:new qe({"hillshade-illumination-direction":new ge(B.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ge(B.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ge(B.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ge(B.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ge(B.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ge(B.paint_hillshade["hillshade-accent-color"])})};const JW=dt([{name:"a_pos",components:2,type:"Int16"}],4),{members:QW}=JW;var Y2={exports:{}};function X0(a,i,u){u=u||2;var p,x,w,E,R,j,F,Y=i&&i.length,te=Y?i[0]*u:a.length,ne=oL(a,0,te,u,!0),ue=[];if(!ne||ne.next===ne.prev)return ue;if(Y&&(ne=function(be,Re,je,Je){var Be,Ke,nt,tt=[];for(Be=0,Ke=Re.length;Be<Ke;Be++)(nt=oL(be,Re[Be]*Je,Be<Ke-1?Re[Be+1]*Je:be.length,Je,!1))===nt.next&&(nt.steiner=!0),tt.push(a9(nt));for(tt.sort(i9),Be=0;Be<tt.length;Be++)je=s9(tt[Be],je);return je}(a,i,ne,u)),a.length>80*u){p=w=a[0],x=E=a[1];for(var fe=u;fe<te;fe+=u)(R=a[fe])<p&&(p=R),(j=a[fe+1])<x&&(x=j),R>w&&(w=R),j>E&&(E=j);F=(F=Math.max(w-p,E-x))!==0?32767/F:0}return cy(ne,ue,u,p,x,F,0),ue}function oL(a,i,u,p,x){var w,E;if(x===J2(a,i,u,p)>0)for(w=i;w<u;w+=p)E=cL(w,a[w],a[w+1],E);else for(w=u-p;w>=i;w-=p)E=cL(w,a[w],a[w+1],E);return E&&q0(E,E.next)&&(hy(E),E=E.next),E}function zd(a,i){if(!a)return a;i||(i=a);var u,p=a;do if(u=!1,p.steiner||!q0(p,p.next)&&ps(p.prev,p,p.next)!==0)p=p.next;else{if(hy(p),(p=i=p.prev)===p.next)break;u=!0}while(u||p!==i);return i}function cy(a,i,u,p,x,w,E){if(a){!E&&w&&function(Y,te,ne,ue){var fe=Y;do fe.z===0&&(fe.z=Z2(fe.x,fe.y,te,ne,ue)),fe.prevZ=fe.prev,fe.nextZ=fe.next,fe=fe.next;while(fe!==Y);fe.prevZ.nextZ=null,fe.prevZ=null,function(be){var Re,je,Je,Be,Ke,nt,tt,kt,wt=1;do{for(je=be,be=null,Ke=null,nt=0;je;){for(nt++,Je=je,tt=0,Re=0;Re<wt&&(tt++,Je=Je.nextZ);Re++);for(kt=wt;tt>0||kt>0&&Je;)tt!==0&&(kt===0||!Je||je.z<=Je.z)?(Be=je,je=je.nextZ,tt--):(Be=Je,Je=Je.nextZ,kt--),Ke?Ke.nextZ=Be:be=Be,Be.prevZ=Ke,Ke=Be;je=Je}Ke.nextZ=null,wt*=2}while(nt>1)}(fe)}(a,p,x,w);for(var R,j,F=a;a.prev!==a.next;)if(R=a.prev,j=a.next,w?t9(a,p,x,w):e9(a))i.push(R.i/u|0),i.push(a.i/u|0),i.push(j.i/u|0),hy(a),a=j.next,F=j.next;else if((a=j)===F){E?E===1?cy(a=r9(zd(a),i,u),i,u,p,x,w,2):E===2&&n9(a,i,u,p,x,w):cy(zd(a),i,u,p,x,w,1);break}}}function e9(a){var i=a.prev,u=a,p=a.next;if(ps(i,u,p)>=0)return!1;for(var x=i.x,w=u.x,E=p.x,R=i.y,j=u.y,F=p.y,Y=x<w?x<E?x:E:w<E?w:E,te=R<j?R<F?R:F:j<F?j:F,ne=x>w?x>E?x:E:w>E?w:E,ue=R>j?R>F?R:F:j>F?j:F,fe=p.next;fe!==i;){if(fe.x>=Y&&fe.x<=ne&&fe.y>=te&&fe.y<=ue&&kp(x,R,w,j,E,F,fe.x,fe.y)&&ps(fe.prev,fe,fe.next)>=0)return!1;fe=fe.next}return!0}function t9(a,i,u,p){var x=a.prev,w=a,E=a.next;if(ps(x,w,E)>=0)return!1;for(var R=x.x,j=w.x,F=E.x,Y=x.y,te=w.y,ne=E.y,ue=R<j?R<F?R:F:j<F?j:F,fe=Y<te?Y<ne?Y:ne:te<ne?te:ne,be=R>j?R>F?R:F:j>F?j:F,Re=Y>te?Y>ne?Y:ne:te>ne?te:ne,je=Z2(ue,fe,i,u,p),Je=Z2(be,Re,i,u,p),Be=a.prevZ,Ke=a.nextZ;Be&&Be.z>=je&&Ke&&Ke.z<=Je;){if(Be.x>=ue&&Be.x<=be&&Be.y>=fe&&Be.y<=Re&&Be!==x&&Be!==E&&kp(R,Y,j,te,F,ne,Be.x,Be.y)&&ps(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,Ke.x>=ue&&Ke.x<=be&&Ke.y>=fe&&Ke.y<=Re&&Ke!==x&&Ke!==E&&kp(R,Y,j,te,F,ne,Ke.x,Ke.y)&&ps(Ke.prev,Ke,Ke.next)>=0))return!1;Ke=Ke.nextZ}for(;Be&&Be.z>=je;){if(Be.x>=ue&&Be.x<=be&&Be.y>=fe&&Be.y<=Re&&Be!==x&&Be!==E&&kp(R,Y,j,te,F,ne,Be.x,Be.y)&&ps(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;Ke&&Ke.z<=Je;){if(Ke.x>=ue&&Ke.x<=be&&Ke.y>=fe&&Ke.y<=Re&&Ke!==x&&Ke!==E&&kp(R,Y,j,te,F,ne,Ke.x,Ke.y)&&ps(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.nextZ}return!0}function r9(a,i,u){var p=a;do{var x=p.prev,w=p.next.next;!q0(x,w)&&aL(x,p,p.next,w)&&uy(x,w)&&uy(w,x)&&(i.push(x.i/u|0),i.push(p.i/u|0),i.push(w.i/u|0),hy(p),hy(p.next),p=a=w),p=p.next}while(p!==a);return zd(p)}function n9(a,i,u,p,x,w){var E=a;do{for(var R=E.next.next;R!==E.prev;){if(E.i!==R.i&&l9(E,R)){var j=lL(E,R);return E=zd(E,E.next),j=zd(j,j.next),cy(E,i,u,p,x,w,0),void cy(j,i,u,p,x,w,0)}R=R.next}E=E.next}while(E!==a)}function i9(a,i){return a.x-i.x}function s9(a,i){var u=function(x,w){var E,R=w,j=x.x,F=x.y,Y=-1/0;do{if(F<=R.y&&F>=R.next.y&&R.next.y!==R.y){var te=R.x+(F-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(te<=j&&te>Y&&(Y=te,E=R.x<R.next.x?R:R.next,te===j))return E}R=R.next}while(R!==w);if(!E)return null;var ne,ue=E,fe=E.x,be=E.y,Re=1/0;R=E;do j>=R.x&&R.x>=fe&&j!==R.x&&kp(F<be?j:Y,F,fe,be,F<be?Y:j,F,R.x,R.y)&&(ne=Math.abs(F-R.y)/(j-R.x),uy(R,x)&&(ne<Re||ne===Re&&(R.x>E.x||R.x===E.x&&o9(E,R)))&&(E=R,Re=ne)),R=R.next;while(R!==ue);return E}(a,i);if(!u)return i;var p=lL(u,a);return zd(p,p.next),zd(u,u.next)}function o9(a,i){return ps(a.prev,a,i.prev)<0&&ps(i.next,a,a.next)<0}function Z2(a,i,u,p,x){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-u)*x|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*x|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function a9(a){var i=a,u=a;do(i.x<u.x||i.x===u.x&&i.y<u.y)&&(u=i),i=i.next;while(i!==a);return u}function kp(a,i,u,p,x,w,E,R){return(x-E)*(i-R)>=(a-E)*(w-R)&&(a-E)*(p-R)>=(u-E)*(i-R)&&(u-E)*(w-R)>=(x-E)*(p-R)}function l9(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(u,p){var x=u;do{if(x.i!==u.i&&x.next.i!==u.i&&x.i!==p.i&&x.next.i!==p.i&&aL(x,x.next,u,p))return!0;x=x.next}while(x!==u);return!1}(a,i)&&(uy(a,i)&&uy(i,a)&&function(u,p){var x=u,w=!1,E=(u.x+p.x)/2,R=(u.y+p.y)/2;do x.y>R!=x.next.y>R&&x.next.y!==x.y&&E<(x.next.x-x.x)*(R-x.y)/(x.next.y-x.y)+x.x&&(w=!w),x=x.next;while(x!==u);return w}(a,i)&&(ps(a.prev,a,i.prev)||ps(a,i.prev,i))||q0(a,i)&&ps(a.prev,a,a.next)>0&&ps(i.prev,i,i.next)>0)}function ps(a,i,u){return(i.y-a.y)*(u.x-i.x)-(i.x-a.x)*(u.y-i.y)}function q0(a,i){return a.x===i.x&&a.y===i.y}function aL(a,i,u,p){var x=Z0(ps(a,i,u)),w=Z0(ps(a,i,p)),E=Z0(ps(u,p,a)),R=Z0(ps(u,p,i));return x!==w&&E!==R||!(x!==0||!Y0(a,u,i))||!(w!==0||!Y0(a,p,i))||!(E!==0||!Y0(u,a,p))||!(R!==0||!Y0(u,i,p))}function Y0(a,i,u){return i.x<=Math.max(a.x,u.x)&&i.x>=Math.min(a.x,u.x)&&i.y<=Math.max(a.y,u.y)&&i.y>=Math.min(a.y,u.y)}function Z0(a){return a>0?1:a<0?-1:0}function uy(a,i){return ps(a.prev,a,a.next)<0?ps(a,i,a.next)>=0&&ps(a,a.prev,i)>=0:ps(a,i,a.prev)<0||ps(a,a.next,i)<0}function lL(a,i){var u=new K2(a.i,a.x,a.y),p=new K2(i.i,i.x,i.y),x=a.next,w=i.prev;return a.next=i,i.prev=a,u.next=x,x.prev=u,p.next=u,u.prev=p,w.next=p,p.prev=w,p}function cL(a,i,u,p){var x=new K2(a,i,u);return p?(x.next=p.next,x.prev=p,p.next.prev=x,p.next=x):(x.prev=x,x.next=x),x}function hy(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function K2(a,i,u){this.i=a,this.x=i,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function J2(a,i,u,p){for(var x=0,w=i,E=u-p;w<u;w+=p)x+=(a[E]-a[w])*(a[w+1]+a[E+1]),E=w;return x}Y2.exports=X0,Y2.exports.default=X0,X0.deviation=function(a,i,u,p){var x=i&&i.length,w=Math.abs(J2(a,0,x?i[0]*u:a.length,u));if(x)for(var E=0,R=i.length;E<R;E++)w-=Math.abs(J2(a,i[E]*u,E<R-1?i[E+1]*u:a.length,u));var j=0;for(E=0;E<p.length;E+=3){var F=p[E]*u,Y=p[E+1]*u,te=p[E+2]*u;j+=Math.abs((a[F]-a[te])*(a[Y+1]-a[F+1])-(a[F]-a[Y])*(a[te+1]-a[F+1]))}return w===0&&j===0?0:Math.abs((j-w)/w)},X0.flatten=function(a){for(var i=a[0][0].length,u={vertices:[],holes:[],dimensions:i},p=0,x=0;x<a.length;x++){for(var w=0;w<a[x].length;w++)for(var E=0;E<i;E++)u.vertices.push(a[x][w][E]);x>0&&u.holes.push(p+=a[x-1].length)}return u};var Q2=K(Y2.exports);function c9(a,i,u,p,x){uL(a,i,u||0,p||a.length-1,x||u9)}function uL(a,i,u,p,x){for(;p>u;){if(p-u>600){var w=p-u+1,E=i-u+1,R=Math.log(w),j=.5*Math.exp(2*R/3),F=.5*Math.sqrt(R*j*(w-j)/w)*(E-w/2<0?-1:1);uL(a,i,Math.max(u,Math.floor(i-E*j/w+F)),Math.min(p,Math.floor(i+(w-E)*j/w+F)),x)}var Y=a[i],te=u,ne=p;for(dy(a,u,i),x(a[p],Y)>0&&dy(a,u,p);te<ne;){for(dy(a,te,ne),te++,ne--;x(a[te],Y)<0;)te++;for(;x(a[ne],Y)>0;)ne--}x(a[u],Y)===0?dy(a,u,ne):dy(a,++ne,p),ne<=i&&(u=ne+1),i<=ne&&(p=ne-1)}}function dy(a,i,u){var p=a[i];a[i]=a[u],a[u]=p}function u9(a,i){return a<i?-1:a>i?1:0}function eC(a,i){const u=a.length;if(u<=1)return[a];const p=[];let x,w;for(let E=0;E<u;E++){const R=Zi(a[E]);R!==0&&(a[E].area=Math.abs(R),w===void 0&&(w=R<0),w===R<0?(x&&p.push(x),x=[a[E]]):x.push(a[E]))}if(x&&p.push(x),i>1)for(let E=0;E<p.length;E++)p[E].length<=i||(c9(p[E],i,1,p[E].length-1,h9),p[E]=p[E].slice(0,i));return p}function h9(a,i){return i.area-a.area}function tC(a,i,u){const p=u.patternDependencies;let x=!1;for(const w of i){const E=w.paint.get(`${a}-pattern`);E.isConstant()||(x=!0);const R=E.constantOr(null);R&&(x=!0,p[R]=!0)}return x}function rC(a,i,u,p,x){const w=x.patternDependencies;for(const E of i){const R=E.paint.get(`${a}-pattern`).value;if(R.kind!=="constant"){let j=R.evaluate({zoom:p},u,{},x.availableImages);j=j&&j.name?j.name:j,w[j]=!0,u.patterns[E.id]=j}}return u}class K0{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qt,this.indexArray=new Lr,this.indexArray2=new js,this.programConfigurations=new Ad(i.layers,i.zoom),this.segments=new fs,this.segments2=new fs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=i.projection}populate(i,u,p,x){this.hasPattern=tC("fill",this.layers,u);const w=this.layers[0].layout.get("fill-sort-key"),E=[];for(const{feature:R,id:j,index:F,sourceLayerIndex:Y}of i){const te=this.layers[0]._featureFilter.needGeometry,ne=Od(R,te);if(!this.layers[0]._featureFilter.filter(new J(this.zoom),ne,p))continue;const ue=w?w.evaluate(ne,{},p,u.availableImages):void 0,fe={id:j,properties:R.properties,type:R.type,sourceLayerIndex:Y,index:F,geometry:te?ne.geometry:Uc(R,p,x),patterns:{},sortKey:ue};E.push(fe)}w&&E.sort((R,j)=>R.sortKey-j.sortKey);for(const R of E){const{geometry:j,index:F,sourceLayerIndex:Y}=R;if(this.hasPattern){const te=rC("fill",this.layers,R,this.zoom,u);this.patternFeatures.push(te)}else this.addFeature(R,j,F,p,{},u.availableImages);u.featureIndex.insert(i[F].feature,j,F,Y,this.index)}}update(i,u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p,x)}addFeatures(i,u,p,x,w){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,u,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,QW),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,u,p,x,w,E=[]){for(const R of eC(u,500)){let j=0;for(const fe of R)j+=fe.length;const F=this.segments.prepareSegment(j,this.layoutVertexArray,this.indexArray),Y=F.vertexLength,te=[],ne=[];for(const fe of R){if(fe.length===0)continue;fe!==R[0]&&ne.push(te.length/2);const be=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Re=be.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Re+fe.length-1,Re),te.push(fe[0].x),te.push(fe[0].y);for(let je=1;je<fe.length;je++)this.layoutVertexArray.emplaceBack(fe[je].x,fe[je].y),this.indexArray2.emplaceBack(Re+je-1,Re+je),te.push(fe[je].x),te.push(fe[je].y);be.vertexLength+=fe.length,be.primitiveLength+=fe.length}const ue=Q2(te,ne);for(let fe=0;fe<ue.length;fe+=3)this.indexArray.emplaceBack(Y+ue[fe],Y+ue[fe+1],Y+ue[fe+2]);F.vertexLength+=j,F.primitiveLength+=ue.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,w,E,x)}}Ar(K0,"FillBucket",{omit:["layers","patternFeatures"]});const d9=new qe({"fill-sort-key":new Me(B.layout_fill["fill-sort-key"])});var f9={paint:new qe({"fill-antialias":new ge(B.paint_fill["fill-antialias"]),"fill-opacity":new Me(B.paint_fill["fill-opacity"]),"fill-color":new Me(B.paint_fill["fill-color"]),"fill-outline-color":new Me(B.paint_fill["fill-outline-color"]),"fill-translate":new ge(B.paint_fill["fill-translate"]),"fill-translate-anchor":new ge(B.paint_fill["fill-translate-anchor"]),"fill-pattern":new Me(B.paint_fill["fill-pattern"])}),layout:d9};const p9=dt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),m9=dt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),g9=dt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:y9}=p9;var J0={},x9=Te,hL=Ep;function Ep(a,i,u,p,x){this.properties={},this.extent=u,this.type=0,this._pbf=a,this._geometry=-1,this._keys=p,this._values=x,a.readFields(v9,this,i)}function v9(a,i,u){a==1?i.id=u.readVarint():a==2?function(p,x){for(var w=p.readVarint()+p.pos;p.pos<w;){var E=x._keys[p.readVarint()],R=x._values[p.readVarint()];x.properties[E]=R}}(u,i):a==3?i.type=u.readVarint():a==4&&(i._geometry=u.pos)}function b9(a){for(var i,u,p=0,x=0,w=a.length,E=w-1;x<w;E=x++)p+=((u=a[E]).x-(i=a[x]).x)*(i.y+u.y);return p}Ep.types=["Unknown","Point","LineString","Polygon"],Ep.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,u=a.readVarint()+a.pos,p=1,x=0,w=0,E=0,R=[];a.pos<u;){if(x<=0){var j=a.readVarint();p=7&j,x=j>>3}if(x--,p===1||p===2)w+=a.readSVarint(),E+=a.readSVarint(),p===1&&(i&&R.push(i),i=[]),i.push(new x9(w,E));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&R.push(i),R},Ep.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,u=1,p=0,x=0,w=0,E=1/0,R=-1/0,j=1/0,F=-1/0;a.pos<i;){if(p<=0){var Y=a.readVarint();u=7&Y,p=Y>>3}if(p--,u===1||u===2)(x+=a.readSVarint())<E&&(E=x),x>R&&(R=x),(w+=a.readSVarint())<j&&(j=w),w>F&&(F=w);else if(u!==7)throw new Error("unknown command "+u)}return[E,j,R,F]},Ep.prototype.toGeoJSON=function(a,i,u){var p,x,w=this.extent*Math.pow(2,u),E=this.extent*a,R=this.extent*i,j=this.loadGeometry(),F=Ep.types[this.type];function Y(ue){for(var fe=0;fe<ue.length;fe++){var be=ue[fe];ue[fe]=[360*(be.x+E)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+R)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var te=[];for(p=0;p<j.length;p++)te[p]=j[p][0];Y(j=te);break;case 2:for(p=0;p<j.length;p++)Y(j[p]);break;case 3:for(j=function(ue){var fe=ue.length;if(fe<=1)return[ue];for(var be,Re,je=[],Je=0;Je<fe;Je++){var Be=b9(ue[Je]);Be!==0&&(Re===void 0&&(Re=Be<0),Re===Be<0?(be&&je.push(be),be=[ue[Je]]):be.push(ue[Je]))}return be&&je.push(be),je}(j),p=0;p<j.length;p++)for(x=0;x<j[p].length;x++)Y(j[p][x])}j.length===1?j=j[0]:F="Multi"+F;var ne={type:"Feature",geometry:{type:F,coordinates:j},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var _9=hL,dL=fL;function fL(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(w9,this,i),this.length=this._features.length}function w9(a,i,u){a===15?i.version=u.readVarint():a===1?i.name=u.readString():a===5?i.extent=u.readVarint():a===2?i._features.push(u.pos):a===3?i._keys.push(u.readString()):a===4&&i._values.push(function(p){for(var x=null,w=p.readVarint()+p.pos;p.pos<w;){var E=p.readVarint()>>3;x=E===1?p.readString():E===2?p.readFloat():E===3?p.readDouble():E===4?p.readVarint64():E===5?p.readVarint():E===6?p.readSVarint():E===7?p.readBoolean():null}return x}(u))}fL.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new _9(this._pbf,i,this.extent,this._keys,this._values)};var S9=dL;function C9(a,i,u){if(a===3){var p=new S9(u,u.readVarint()+u.pos);p.length&&(i[p.name]=p)}}var nC=J0.VectorTile=function(a,i){this.layers=a.readFields(C9,{},i)},Q0=J0.VectorTileFeature=hL;function eb(a,i,u,p){const x=[],w=p===0?(E,R,j,F,Y,te)=>{E.push(new Pe(te,j+(te-R)/(F-R)*(Y-j)))}:(E,R,j,F,Y,te)=>{E.push(new Pe(R+(te-j)/(Y-j)*(F-R),te))};for(const E of a){const R=[];for(const j of E){if(j.length<=2)continue;const F=[];for(let ne=0;ne<j.length-1;ne++){const ue=j[ne].x,fe=j[ne].y,be=j[ne+1].x,Re=j[ne+1].y,je=p===0?ue:fe,Je=p===0?be:Re;je<i?Je>i&&w(F,ue,fe,be,Re,i):je>u?Je<u&&w(F,ue,fe,be,Re,u):F.push(j[ne]),Je<i&&je>=i&&w(F,ue,fe,be,Re,i),Je>u&&je<=u&&w(F,ue,fe,be,Re,u)}let Y=j[j.length-1];const te=p===0?Y.x:Y.y;te>=i&&te<=u&&F.push(Y),F.length&&(Y=F[F.length-1],F[0].x===Y.x&&F[0].y===Y.y||F.push(F[0]),R.push(F))}R.length&&x.push(R)}return x}J0.VectorTileLayer=dL;const k9=Q0.types,E9=Math.pow(2,13);function fy(a,i,u,p,x,w,E,R){a.emplaceBack((i<<1)+E,(u<<1)+w,(Math.floor(p*E9)<<1)+x,Math.round(R))}function py(a,i,u){a.emplaceBack(i.x,i.y,i.z,u[0]*16384,u[1]*16384,u[2]*16384)}class pL{constructor(){this.acc=new Pe(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Pe(i.x,i.y),this.max=new Pe(i.x,i.y))}append(i,u){this.currentPolyCount.edges++,this.acc._add(i);const p=this.min,x=this.max;i.x<p.x?p.x=i.x:i.x>x.x&&(x.x=i.x),i.y<p.y?p.y=i.y:i.y>x.y&&(x.y=i.y),((i.x===0||i.x===Ur)&&i.x===u.x)!=((i.y===0||i.y===Ur)&&i.y===u.y)&&this.processBorderOverlap(i,u),u.x<0!=i.x<0&&this.addBorderIntersection(0,Ln(u.y,i.y,(0-u.x)/(i.x-u.x))),u.x>Ur!=i.x>Ur&&this.addBorderIntersection(1,Ln(u.y,i.y,(Ur-u.x)/(i.x-u.x))),u.y<0!=i.y<0&&this.addBorderIntersection(2,Ln(u.x,i.x,(0-u.y)/(i.y-u.y))),u.y>Ur!=i.y>Ur&&this.addBorderIntersection(3,Ln(u.x,i.x,(Ur-u.y)/(i.y-u.y)))}addBorderIntersection(i,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[i];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(i,u){if(i.x===u.x){if(i.y===u.y)return;const p=i.x===0?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,i.y)}else{const p=i.y===0?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,i.x)}}centroid(){const i=this.polyCount.reduce((u,p)=>u+p.edges,0);return i!==0?this.acc.div(i)._round():new Pe(0,0)}span(){return new Pe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,u)=>i+ +(u[0]!==Number.MAX_VALUE),0)}}class my{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new Ft,this.centroidVertexArray=new ml,this.indexArray=new Lr,this.programConfigurations=new Ad(i.layers,i.zoom),this.segments=new fs,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.enableTerrain=i.enableTerrain}populate(i,u,p,x){this.features=[],this.hasPattern=tC("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(w){const E=Math.exp(Math.PI*(1-w.y/(1<<w.z)*2));return 80150034*E/(E*E+1)/Ur/(1<<w.z)}(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:w,id:E,index:R,sourceLayerIndex:j}of i){const F=this.layers[0]._featureFilter.needGeometry,Y=Od(w,F);if(!this.layers[0]._featureFilter.filter(new J(this.zoom),Y,p))continue;const te={id:E,sourceLayerIndex:j,index:R,geometry:F?Y.geometry:Uc(w,p,x),properties:w.properties,type:w.type,patterns:{}},ne=this.layoutVertexArray.length;this.hasPattern?this.features.push(rC("fill-extrusion",this.layers,te,this.zoom,u)):this.addFeature(te,te.geometry,R,p,{},u.availableImages,x),u.featureIndex.insert(w,te.geometry,R,j,this.index,ne)}this.sortBorders()}addFeatures(i,u,p,x,w){for(const E of this.features){const{geometry:R}=E;this.addFeature(E,R,E.index,u,p,x,w)}this.sortBorders()}update(i,u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,y9),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,g9.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,m9.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,u,p,x,w,E,R){const j=[new Pe(0,0),new Pe(Ur,Ur)],F=R.projection,Y=F.name==="globe",te=this.enableTerrain&&!Y?new pL:null,ne=k9[i.type]==="Polygon";Y&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new rr);const ue=eC(u,500);for(let je=ue.length-1;je>=0;je--){const Je=ue[je];(Je.length===0||(fe=Je[0]).every(Be=>Be.x<=0)||fe.every(Be=>Be.x>=Ur)||fe.every(Be=>Be.y<=0)||fe.every(Be=>Be.y>=Ur))&&ue.splice(je,1)}var fe;let be;if(Y)be=_L(ue,j,x);else{be=[];for(const je of ue)be.push({polygon:je,bounds:j})}const Re=ne?this.edgeRadius:0;for(const{polygon:je,bounds:Je}of be){let Be=0,Ke=0;for(const tt of je)ne&&!tt[0].equals(tt[tt.length-1])&&tt.push(tt[0]),Ke+=ne?tt.length-1:tt.length;const nt=this.segments.prepareSegment((ne?5:4)*Ke,this.layoutVertexArray,this.indexArray);if(ne){const tt=[],kt=[];Be=nt.vertexLength;for(const zt of je){let er,It;zt.length&&zt!==je[0]&&kt.push(tt.length/2),er=zt[1].sub(zt[0])._perp()._unit();for(let $t=1;$t<zt.length;$t++){const Ut=zt[$t],Yt=zt[$t===zt.length-1?1:$t+1];let{x:lr,y:Lt}=Ut;if(Re){It=Yt.sub(Ut)._perp()._unit();const vr=er.add(It)._unit(),Pr=Re*Math.min(4,1/(er.x*vr.x+er.y*vr.y));lr+=Pr*vr.x,Lt+=Pr*vr.y,er=It}fy(this.layoutVertexArray,lr,Lt,0,0,1,1,0),nt.vertexLength++,tt.push(Ut.x,Ut.y),Y&&py(this.layoutVertexExtArray,F.projectTilePoint(lr,Lt,x),F.upVector(x,lr,Lt))}}const wt=Q2(tt,kt);for(let zt=0;zt<wt.length;zt+=3)this.indexArray.emplaceBack(Be+wt[zt],Be+wt[zt+2],Be+wt[zt+1]),nt.primitiveLength++}for(const tt of je){te&&tt.length&&te.startRing(tt[0]);let kt,wt,zt,er=tt.length>4&&xL(tt[tt.length-2],tt[0],tt[1]),It=Re?T9(tt[tt.length-2],tt[0],tt[1],Re):0;wt=tt[1].sub(tt[0])._perp()._unit();let $t=!0;for(let Ut=1,Yt=0;Ut<tt.length;Ut++){let lr=tt[Ut-1],Lt=tt[Ut];const vr=tt[Ut===tt.length-1?1:Ut+1];if(te&&ne&&te.currentPolyCount.top++,yL(Lt,lr,Je)){Re&&(wt=vr.sub(Lt)._perp()._unit(),$t=!$t);continue}te&&te.append(Lt,lr);const Pr=Lt.sub(lr)._perp(),br=Pr.x/(Math.abs(Pr.x)+Math.abs(Pr.y)),cn=Pr.y>0?1:0,cr=lr.dist(Lt);if(Yt+cr>32768&&(Yt=0),Re){zt=vr.sub(Lt)._perp()._unit();let hn=gL(lr,Lt,vr,mL(wt,zt),Re);isNaN(hn)&&(hn=0);const qr=Lt.sub(lr)._unit();lr=lr.add(qr.mult(It))._round(),Lt=Lt.add(qr.mult(-hn))._round(),It=hn,wt=zt}const Nr=nt.vertexLength,un=tt.length>4&&xL(lr,Lt,vr);let Dn=vL(Yt,er,$t);if(fy(this.layoutVertexArray,lr.x,lr.y,br,cn,0,0,Dn),fy(this.layoutVertexArray,lr.x,lr.y,br,cn,0,1,Dn),Yt+=cr,Dn=vL(Yt,un,!$t),er=un,fy(this.layoutVertexArray,Lt.x,Lt.y,br,cn,0,0,Dn),fy(this.layoutVertexArray,Lt.x,Lt.y,br,cn,0,1,Dn),nt.vertexLength+=4,this.indexArray.emplaceBack(Nr+0,Nr+1,Nr+2),this.indexArray.emplaceBack(Nr+1,Nr+3,Nr+2),nt.primitiveLength+=2,Re){const hn=Be+(Ut===1?tt.length-2:Ut-2),qr=Ut===1?Be:hn+1;if(this.indexArray.emplaceBack(Nr+1,hn,Nr+3),this.indexArray.emplaceBack(hn,qr,Nr+3),nt.primitiveLength+=2,kt===void 0&&(kt=Nr),!yL(vr,tt[Ut],Je)){const ki=Ut===tt.length-1?kt:nt.vertexLength;this.indexArray.emplaceBack(Nr+2,Nr+3,ki),this.indexArray.emplaceBack(Nr+3,ki+1,ki),this.indexArray.emplaceBack(Nr+3,qr,ki+1),nt.primitiveLength+=3}$t=!$t}if(Y){const hn=this.layoutVertexExtArray,qr=F.projectTilePoint(lr.x,lr.y,x),ki=F.projectTilePoint(Lt.x,Lt.y,x),dn=F.upVector(x,lr.x,lr.y),fn=F.upVector(x,Lt.x,Lt.y);py(hn,qr,dn),py(hn,qr,dn),py(hn,ki,fn),py(hn,ki,fn)}}ne&&(Be+=tt.length-1)}}if(te&&te.polyCount.length>0){if(te.borders){te.vertexArrayOffset=this.centroidVertexArray.length;const je=te.borders,Je=this.featuresOnBorder.push(te)-1;for(let Be=0;Be<4;Be++)je[Be][0]!==Number.MAX_VALUE&&this.borders[Be].push(Je)}this.encodeCentroid(te.borders?void 0:te.centroid(),te)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,w,E,x)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((u,p)=>this.featuresOnBorder[u].borders[i][0]-this.featuresOnBorder[p].borders[i][0])}encodeCentroid(i,u,p=!0){let x,w;if(i)if(i.y!==0){const R=u.span()._mult(this.tileToMeter);x=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(R.x/10)),w=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(R.y/10))}else x=Math.ceil(7*(i.x+450)),w=0;else x=0,w=+p;let E=p?this.centroidVertexArray.length:u.vertexArrayOffset;for(const R of u.polyCount){p&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*R.edges+R.top);for(let j=0;j<R.top;j++)this.centroidVertexArray.emplace(E++,x,w);for(let j=0;j<2*R.edges;j++)this.centroidVertexArray.emplace(E++,0,w),this.centroidVertexArray.emplace(E++,x,w)}}}function mL(a,i){const u=a.add(i)._unit();return a.x*u.x+a.y*u.y}function T9(a,i,u,p){const x=i.sub(a)._perp()._unit(),w=u.sub(i)._perp()._unit();return gL(a,i,u,mL(x,w),p)}function gL(a,i,u,p,x){const w=Math.sqrt(1-p*p);return Math.min(a.dist(i)/3,i.dist(u)/3,x*w/p)}function yL(a,i,u){return a.x<u[0].x&&i.x<u[0].x||a.x>u[1].x&&i.x>u[1].x||a.y<u[0].y&&i.y<u[0].y||a.y>u[1].y&&i.y>u[1].y}function xL(a,i,u){if(a.x<0||a.x>=Ur||i.x<0||i.x>=Ur||u.x<0||u.x>=Ur)return!1;const p=u.sub(i),x=p.perp(),w=a.sub(i);return(p.x*w.x+p.y*w.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(w.x*w.x+w.y*w.y))>-.866&&x.x*w.x+x.y*w.y<0}function vL(a,i,u){const p=i?2|a:-3&a;return u?1|p:-2&p}function bL(){const a=Math.PI/32,i=Math.tan(a),u=ly;return u*Math.sqrt(1+2*i*i)-u}function _L(a,i,u){const p=1<<u.z,x=Ca(u.x/p),w=Ca((u.x+1)/p),E=ao(u.y/p),R=ao((u.y+1)/p);return function(j,F,Y,te,ne=0,ue){const fe=[];if(!j.length||!Y||!te)return fe;const be=(tt,kt)=>{for(const wt of tt)fe.push({polygon:wt,bounds:kt})},Re=Math.ceil(Math.log2(Y)),je=Math.ceil(Math.log2(te)),Je=Re-je,Be=[];for(let tt=0;tt<Math.abs(Je);tt++)Be.push(Je>0?0:1);for(let tt=0;tt<Math.min(Re,je);tt++)Be.push(0),Be.push(1);let Ke=j;if(Ke=eb(Ke,F[0].y-ne,F[1].y+ne,1),Ke=eb(Ke,F[0].x-ne,F[1].x+ne,0),!Ke.length)return fe;const nt=[];for(Be.length?nt.push({polygons:Ke,bounds:F,depth:0}):be(Ke,F);nt.length;){const tt=nt.pop(),kt=tt.depth,wt=Be[kt],zt=tt.bounds[0],er=tt.bounds[1],It=wt===0?zt.x:zt.y,$t=wt===0?er.x:er.y,Ut=ue?ue(wt,It,$t):.5*(It+$t),Yt=eb(tt.polygons,It-ne,Ut+ne,wt),lr=eb(tt.polygons,Ut-ne,$t+ne,wt);if(Yt.length){const Lt=[zt,new Pe(wt===0?Ut:er.x,wt===1?Ut:er.y)];Be.length>kt+1?nt.push({polygons:Yt,bounds:Lt,depth:kt+1}):be(Yt,Lt)}if(lr.length){const Lt=[new Pe(wt===0?Ut:zt.x,wt===1?Ut:zt.y),er];Be.length>kt+1?nt.push({polygons:lr,bounds:Lt,depth:kt+1}):be(lr,Lt)}}return fe}(a,i,Math.ceil((w-x)/11.25),Math.ceil((E-R)/11.25),1,(j,F,Y)=>{if(j===0)return .5*(F+Y);{const te=ao((u.y+F/Ur)/p);return(Zl(.5*(ao((u.y+Y/Ur)/p)+te))*p-u.y)*Ur}})}Ar(my,"FillExtrusionBucket",{omit:["layers","features"]}),Ar(pL,"PartMetadata");const A9=new qe({"fill-extrusion-edge-radius":new ge(B["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var I9={paint:new qe({"fill-extrusion-opacity":new ge(B["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Me(B["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ge(B["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ge(B["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Me(B["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Me(B["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Me(B["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ge(B["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ge(B["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ge(B["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new ge(B["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:A9};function wL(a,i,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[a*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class tb{constructor(i,u,p){this.z=i,this.x=u,this.y=p,this.key=gy(0,i,i,u,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,u){const p=function(w,E,R){var j=wL(256*w,256*(E=Math.pow(2,R)-E-1),R),F=wL(256*(w+1),256*(E+1),R);return j[0]+","+j[1]+","+F[0]+","+F[1]}(this.x,this.y,this.z),x=function(w,E,R){let j,F="";for(let Y=w;Y>0;Y--)j=1<<Y-1,F+=(E&j?1:0)+(R&j?2:0);return F}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",x).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class SL{constructor(i,u){this.wrap=i,this.canonical=u,this.key=gy(i,u.z,u.z,u.x,u.y)}}class Ao{constructor(i,u,p,x,w){this.overscaledZ=i,this.wrap=u,this.canonical=new tb(p,+x,+w),this.key=u===0&&i===p?this.canonical.key:gy(u,i,p,x,w)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const u=this.canonical.z-i;return i>this.canonical.z?new Ao(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ao(i,this.wrap,i,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(i,u=!0){if(this.overscaledZ===i&&u)return this.key;if(i>this.canonical.z)return gy(this.wrap*+u,i,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-i;return gy(this.wrap*+u,i,i,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const u=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>u&&i.canonical.y===this.canonical.y>>u}children(i){if(this.overscaledZ>=i)return[new Ao(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,x=2*this.canonical.y;return[new Ao(u,this.wrap,u,p,x),new Ao(u,this.wrap,u,p+1,x),new Ao(u,this.wrap,u,p,x+1),new Ao(u,this.wrap,u,p+1,x+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ao(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ao(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new SL(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function gy(a,i,u,p,x){const w=1<<Math.min(u,22);let E=w*(x%w)+p%w;return a&&u<22&&(E+=w*w*((a<0?-2*a-1:2*a)%(1<<2*(22-u)))),16*(32*E+u)+(i-u)}Ar(tb,"CanonicalTileID"),Ar(Ao,"OverscaledTileID",{omit:["projMatrix"]});class Tp extends Pe{constructor(i,u,p){super(i,u),this.z=p}}function yy(a,i){return a.x*i.x+a.y*i.y}function CL(a,i){if(a.length===1){let u=0;const p=i[u++];let x;for(;!x||p.equals(x);)if(x=i[u++],!x)return 1/0;for(;u<i.length;u++){const w=i[u],E=a[0],R=x.sub(p),j=w.sub(p),F=E.sub(p),Y=yy(R,R),te=yy(R,j),ne=yy(j,j),ue=yy(F,R),fe=yy(F,j),be=Y*ne-te*te,Re=(ne*ue-te*fe)/be,je=(Y*fe-te*ue)/be,Je=p.z*(1-Re-je)+x.z*Re+w.z*je;if(isFinite(Je))return Je}return 1/0}{let u=1/0;for(const p of i)u=Math.min(u,p.z);return u}}function kL(a,i,u,p,x,w,E,R){const j=E*x.getElevationAt(a,i,!0,!0),F=w[0]!==0,Y=F?w[1]===0?E*(w[0]/7-450):E*function(te,ne,ue){const fe=Math.floor(ne[0]/8),be=Math.floor(ne[1]/8),Re=10*(ne[0]-8*fe),je=10*(ne[1]-8*be),Je=te.getElevationAt(fe,be,!0,!0),Be=te.getMeterToDEM(ue),Ke=Math.floor(.5*(Re*Be-1)),nt=Math.floor(.5*(je*Be-1)),tt=te.tileCoordToPixel(fe,be),kt=2*Ke+1,wt=2*nt+1,zt=function(lr,Lt,vr,Pr,br){return[lr.getElevationAtPixel(Lt,vr,!0),lr.getElevationAtPixel(Lt+br,vr,!0),lr.getElevationAtPixel(Lt,vr+br,!0),lr.getElevationAtPixel(Lt+Pr,vr+br,!0)]}(te,tt.x-Ke,tt.y-nt,kt,wt),er=Math.abs(zt[0]-zt[1]),It=Math.abs(zt[2]-zt[3]),$t=Math.abs(zt[0]-zt[2])+Math.abs(zt[1]-zt[3]),Ut=Math.min(.25,.5*Be*(er+It)/kt),Yt=Math.min(.25,.5*Be*$t/wt);return Je+Math.max(Ut*Re,Yt*je)}(x,w,R):j;return{base:j+(u===0)?-1:u,top:F?Math.max(Y+p,j+u+2):j+p}}const P9=dt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:R9}=P9,M9=dt([{name:"a_packed",components:4,type:"Float32"}]),{members:L9}=M9,O9=Q0.types,D9=Math.cos(Math.PI/180*37.5);class rb{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(u=>u.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new At,this.layoutVertexArray2=new Jt,this.indexArray=new Lr,this.programConfigurations=new Ad(i.layers,i.zoom),this.segments=new fs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(i,u,p,x){this.hasPattern=tC("line",this.layers,u);const w=this.layers[0].layout.get("line-sort-key"),E=[];for(const{feature:Y,id:te,index:ne,sourceLayerIndex:ue}of i){const fe=this.layers[0]._featureFilter.needGeometry,be=Od(Y,fe);if(!this.layers[0]._featureFilter.filter(new J(this.zoom),be,p))continue;const Re=w?w.evaluate(be,{},p):void 0,je={id:te,properties:Y.properties,type:Y.type,sourceLayerIndex:ue,index:ne,geometry:fe?be.geometry:Uc(Y,p,x),patterns:{},sortKey:Re};E.push(je)}w&&E.sort((Y,te)=>Y.sortKey-te.sortKey);const{lineAtlas:R,featureIndex:j}=u,F=this.addConstantDashes(R);for(const Y of E){const{geometry:te,index:ne,sourceLayerIndex:ue}=Y;if(F&&this.addFeatureDashes(Y,R),this.hasPattern){const fe=rC("line",this.layers,Y,this.zoom,u);this.patternFeatures.push(fe)}else this.addFeature(Y,te,ne,p,R.positions,u.availableImages);j.insert(i[ne].feature,te,ne,ue,this.index)}}addConstantDashes(i){let u=!1;for(const p of this.layers){const x=p.paint.get("line-dasharray").value,w=p.layout.get("line-cap").value;if(x.kind!=="constant"||w.kind!=="constant")u=!0;else{const E=w.value,R=x.value;if(!R)continue;i.addDash(R,E)}}return u}addFeatureDashes(i,u){const p=this.zoom;for(const x of this.layers){const w=x.paint.get("line-dasharray").value,E=x.layout.get("line-cap").value;if(w.kind==="constant"&&E.kind==="constant")continue;let R,j;if(w.kind==="constant"){if(R=w.value,!R)continue}else R=w.evaluate({zoom:p},i);j=E.kind==="constant"?E.value:E.evaluate({zoom:p},i),u.addDash(R,j),i.patterns[x.id]=u.getKey(R,j)}}update(i,u,p,x){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,u,this.stateDependentLayers,p,x)}addFeatures(i,u,p,x,w){for(const E of this.patternFeatures)this.addFeature(E,E.geometry,E.index,u,p,x)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,L9)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,R9),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,u,p,x,w,E){const R=this.layers[0].layout,j=R.get("line-join").evaluate(i,{}),F=R.get("line-cap").evaluate(i,{}),Y=R.get("line-miter-limit"),te=R.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const ne of u)this.addLine(ne,i,j,F,Y,te);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,w,E,x)}addLine(i,u,p,x,w,E){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let je=0;je<i.length-1;je++)this.totalDistance+=i[je].dist(i[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const R=O9[u.type]==="Polygon";let j=i.length;for(;j>=2&&i[j-1].equals(i[j-2]);)j--;let F=0;for(;F<j-1&&i[F].equals(i[F+1]);)F++;if(j<(R?3:2))return;p==="bevel"&&(w=1.05);const Y=this.overscaling<=16?15*Ur/(512*this.overscaling):0,te=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray);let ne,ue,fe,be,Re;this.e1=this.e2=-1,R&&(ne=i[j-2],Re=i[F].sub(ne)._unit()._perp());for(let je=F;je<j;je++){if(fe=je===j-1?R?i[F+1]:void 0:i[je+1],fe&&i[je].equals(fe))continue;Re&&(be=Re),ne&&(ue=ne),ne=i[je],Re=fe?fe.sub(ne)._unit()._perp():be,be=be||Re;let Je=be.add(Re);Je.x===0&&Je.y===0||Je._unit();const Be=be.x*Re.x+be.y*Re.y,Ke=Je.x*Re.x+Je.y*Re.y,nt=Ke!==0?1/Ke:1/0,tt=2*Math.sqrt(2-2*Ke),kt=Ke<D9&&ue&&fe,wt=be.x*Re.y-be.y*Re.x>0;if(kt&&je>F){const It=ne.dist(ue);if(It>2*Y){const $t=ne.sub(ne.sub(ue)._mult(Y/It)._round());this.updateDistance(ue,$t),this.addCurrentVertex($t,be,0,0,te),ue=$t}}const zt=ue&&fe;let er=zt?p:R?"butt":x;if(zt&&er==="round"&&(nt<E?er="miter":nt<=2&&(er="fakeround")),er==="miter"&&nt>w&&(er="bevel"),er==="bevel"&&(nt>2&&(er="flipbevel"),nt<w&&(er="miter")),ue&&this.updateDistance(ue,ne),er==="miter")Je._mult(nt),this.addCurrentVertex(ne,Je,0,0,te);else if(er==="flipbevel"){if(nt>100)Je=Re.mult(-1);else{const It=nt*be.add(Re).mag()/be.sub(Re).mag();Je._perp()._mult(It*(wt?-1:1))}this.addCurrentVertex(ne,Je,0,0,te),this.addCurrentVertex(ne,Je.mult(-1),0,0,te)}else if(er==="bevel"||er==="fakeround"){const It=-Math.sqrt(nt*nt-1),$t=wt?It:0,Ut=wt?0:It;if(ue&&this.addCurrentVertex(ne,be,$t,Ut,te),er==="fakeround"){const Yt=Math.round(180*tt/Math.PI/20);for(let lr=1;lr<Yt;lr++){let Lt=lr/Yt;if(Lt!==.5){const Pr=Lt-.5;Lt+=Lt*Pr*(Lt-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*Pr*Pr+(.848013+Be*(.215638*Be-1.06021)))}const vr=Re.sub(be)._mult(Lt)._add(be)._unit()._mult(wt?-1:1);this.addHalfVertex(ne,vr.x,vr.y,!1,wt,0,te)}}fe&&this.addCurrentVertex(ne,Re,-$t,-Ut,te)}else if(er==="butt")this.addCurrentVertex(ne,Je,0,0,te);else if(er==="square"){const It=ue?1:-1;ue||this.addCurrentVertex(ne,Je,It,It,te),this.addCurrentVertex(ne,Je,0,0,te),ue&&this.addCurrentVertex(ne,Je,It,It,te)}else er==="round"&&(ue&&(this.addCurrentVertex(ne,be,0,0,te),this.addCurrentVertex(ne,be,1,1,te,!0)),fe&&(this.addCurrentVertex(ne,Re,-1,-1,te,!0),this.addCurrentVertex(ne,Re,0,0,te)));if(kt&&je<j-1){const It=ne.dist(fe);if(It>2*Y){const $t=ne.add(fe.sub(ne)._mult(Y/It)._round());this.updateDistance(ne,$t),this.addCurrentVertex($t,Re,0,0,te),ne=$t}}}}addCurrentVertex(i,u,p,x,w,E=!1){const R=u.y*x-u.x,j=-u.y-u.x*x;this.addHalfVertex(i,u.x+u.y*p,u.y-u.x*p,E,!1,p,w),this.addHalfVertex(i,R,j,E,!0,-x,w)}addHalfVertex({x:i,y:u},p,x,w,E,R,j){this.layoutVertexArray.emplaceBack((i<<1)+(w?1:0),(u<<1)+(E?1:0),Math.round(63*p)+128,Math.round(63*x)+128,1+(R===0?0:R<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const F=j.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),j.primitiveLength++),E?this.e2=F:this.e1=F}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,u){this.distance+=i.dist(u),this.updateScaledDistance()}}Ar(rb,"LineBucket",{omit:["layers","patternFeatures"]});const z9=new qe({"line-cap":new Me(B.layout_line["line-cap"]),"line-join":new Me(B.layout_line["line-join"]),"line-miter-limit":new ge(B.layout_line["line-miter-limit"]),"line-round-limit":new ge(B.layout_line["line-round-limit"]),"line-sort-key":new Me(B.layout_line["line-sort-key"])});var EL={paint:new qe({"line-opacity":new Me(B.paint_line["line-opacity"]),"line-color":new Me(B.paint_line["line-color"]),"line-translate":new ge(B.paint_line["line-translate"]),"line-translate-anchor":new ge(B.paint_line["line-translate-anchor"]),"line-width":new Me(B.paint_line["line-width"]),"line-gap-width":new Me(B.paint_line["line-gap-width"]),"line-offset":new Me(B.paint_line["line-offset"]),"line-blur":new Me(B.paint_line["line-blur"]),"line-dasharray":new Me(B.paint_line["line-dasharray"]),"line-pattern":new Me(B.paint_line["line-pattern"]),"line-gradient":new We(B.paint_line["line-gradient"]),"line-trim-offset":new ge(B.paint_line["line-trim-offset"])}),layout:z9};const TL=new class extends Me{possiblyEvaluate(a,i){return i=new J(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,transition:i.transition}),super.possiblyEvaluate(a,i)}evaluate(a,i,u,p){return i=Vt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(a,i,u,p)}}(EL.paint.properties["line-width"].specification);function AL(a,i){return i>0?i+2*a:a}TL.useIntegerZoom=!0;const N9=dt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),j9=dt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),F9=dt([{name:"a_projected_pos",components:4,type:"Float32"}],4);dt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const B9=dt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),$9=dt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const IL=dt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),U9=dt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);dt([{name:"triangle",components:3,type:"Uint16"}]),dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),dt([{type:"Float32",name:"offsetX"}]),dt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Js=24;const _l=128;function iC(a,i){const{expression:u}=i;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new J(a+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:x}=u;let w=0;for(;w<p.length&&p[w]<=a;)w++;w=Math.max(0,w-1);let E=w;for(;E<p.length&&p[E]<a+1;)E++;E=Math.min(p.length-1,E);const R=p[w],j=p[E];return u.kind==="composite"?{kind:"composite",minZoom:R,maxZoom:j,interpolationType:x}:{kind:"camera",minZoom:R,maxZoom:j,minSize:u.evaluate(new J(R)),maxSize:u.evaluate(new J(j)),interpolationType:x}}}function nb(a,{uSize:i,uSizeT:u},{lowerSize:p,upperSize:x}){return a.kind==="source"?p/_l:a.kind==="composite"?Ln(p/_l,x/_l,u):i}function Ap(a,i){let u=0,p=0;if(a.kind==="constant")p=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:x,minZoom:w,maxZoom:E}=a,R=x?mt(Ha.interpolationFactor(x,i,w,E),0,1):0;a.kind==="camera"?p=Ln(a.minSize,a.maxSize,R):u=R}return{uSizeT:u,uSize:p}}var V9=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:_l,evaluateSizeForFeature:nb,evaluateSizeForZoom:Ap,getSizeData:iC});function H9(a,i,u){return a.sections.forEach(p=>{p.text=function(x,w,E){const R=w.layout.get("text-transform").evaluate(E,{});return R==="uppercase"?x=x.toLocaleUpperCase():R==="lowercase"&&(x=x.toLocaleLowerCase()),G.applyArabicShaping&&(x=G.applyArabicShaping(x)),x}(p.text,i,u)}),a}const xy={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function W9(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}function G9(a){return a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""||a===""}var PL=pi,RL=function(a,i,u,p,x){var w,E,R=8*x-p-1,j=(1<<R)-1,F=j>>1,Y=-7,te=u?x-1:0,ne=u?-1:1,ue=a[i+te];for(te+=ne,w=ue&(1<<-Y)-1,ue>>=-Y,Y+=R;Y>0;w=256*w+a[i+te],te+=ne,Y-=8);for(E=w&(1<<-Y)-1,w>>=-Y,Y+=p;Y>0;E=256*E+a[i+te],te+=ne,Y-=8);if(w===0)w=1-F;else{if(w===j)return E?NaN:1/0*(ue?-1:1);E+=Math.pow(2,p),w-=F}return(ue?-1:1)*E*Math.pow(2,w-p)},ML=function(a,i,u,p,x,w){var E,R,j,F=8*w-x-1,Y=(1<<F)-1,te=Y>>1,ne=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=p?0:w-1,fe=p?1:-1,be=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(R=isNaN(i)?1:0,E=Y):(E=Math.floor(Math.log(i)/Math.LN2),i*(j=Math.pow(2,-E))<1&&(E--,j*=2),(i+=E+te>=1?ne/j:ne*Math.pow(2,1-te))*j>=2&&(E++,j/=2),E+te>=Y?(R=0,E=Y):E+te>=1?(R=(i*j-1)*Math.pow(2,x),E+=te):(R=i*Math.pow(2,te-1)*Math.pow(2,x),E=0));x>=8;a[u+ue]=255&R,ue+=fe,R/=256,x-=8);for(E=E<<x|R,F+=x;F>0;a[u+ue]=255&E,ue+=fe,E/=256,F-=8);a[u+ue-fe]|=128*be};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function pi(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}pi.Varint=0,pi.Fixed64=1,pi.Bytes=2,pi.Fixed32=5;var sC=4294967296,LL=1/sC,OL=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Hc(a){return a.type===pi.Bytes?a.readVarint()+a.pos:a.pos+1}function Ip(a,i,u){return u?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function DL(a,i,u){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));u.realloc(p);for(var x=u.pos-1;x>=a;x--)u.buf[x+p]=u.buf[x]}function X9(a,i){for(var u=0;u<a.length;u++)i.writeVarint(a[u])}function q9(a,i){for(var u=0;u<a.length;u++)i.writeSVarint(a[u])}function Y9(a,i){for(var u=0;u<a.length;u++)i.writeFloat(a[u])}function Z9(a,i){for(var u=0;u<a.length;u++)i.writeDouble(a[u])}function K9(a,i){for(var u=0;u<a.length;u++)i.writeBoolean(a[u])}function J9(a,i){for(var u=0;u<a.length;u++)i.writeFixed32(a[u])}function Q9(a,i){for(var u=0;u<a.length;u++)i.writeSFixed32(a[u])}function eG(a,i){for(var u=0;u<a.length;u++)i.writeFixed64(a[u])}function tG(a,i){for(var u=0;u<a.length;u++)i.writeSFixed64(a[u])}function ib(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function Pp(a,i,u){a[u]=i,a[u+1]=i>>>8,a[u+2]=i>>>16,a[u+3]=i>>>24}function zL(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}pi.prototype={destroy:function(){this.buf=null},readFields:function(a,i,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),x=p>>3,w=this.pos;this.type=7&p,a(x,i,this),this.pos===w&&this.skip(p)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=ib(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=zL(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=ib(this.buf,this.pos)+ib(this.buf,this.pos+4)*sC;return this.pos+=8,a},readSFixed64:function(){var a=ib(this.buf,this.pos)+zL(this.buf,this.pos+4)*sC;return this.pos+=8,a},readFloat:function(){var a=RL(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=RL(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,u,p=this.buf;return i=127&(u=p[this.pos++]),u<128?i:(i|=(127&(u=p[this.pos++]))<<7,u<128?i:(i|=(127&(u=p[this.pos++]))<<14,u<128?i:(i|=(127&(u=p[this.pos++]))<<21,u<128?i:function(x,w,E){var R,j,F=E.buf;if(R=(112&(j=F[E.pos++]))>>4,j<128||(R|=(127&(j=F[E.pos++]))<<3,j<128)||(R|=(127&(j=F[E.pos++]))<<10,j<128)||(R|=(127&(j=F[E.pos++]))<<17,j<128)||(R|=(127&(j=F[E.pos++]))<<24,j<128)||(R|=(1&(j=F[E.pos++]))<<31,j<128))return Ip(x,R,w);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(u=p[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&OL?function(u,p,x){return OL.decode(u.subarray(p,x))}(this.buf,i,a):function(u,p,x){for(var w="",E=p;E<x;){var R,j,F,Y=u[E],te=null,ne=Y>239?4:Y>223?3:Y>191?2:1;if(E+ne>x)break;ne===1?Y<128&&(te=Y):ne===2?(192&(R=u[E+1]))==128&&(te=(31&Y)<<6|63&R)<=127&&(te=null):ne===3?(j=u[E+2],(192&(R=u[E+1]))==128&&(192&j)==128&&((te=(15&Y)<<12|(63&R)<<6|63&j)<=2047||te>=55296&&te<=57343)&&(te=null)):ne===4&&(j=u[E+2],F=u[E+3],(192&(R=u[E+1]))==128&&(192&j)==128&&(192&F)==128&&((te=(15&Y)<<18|(63&R)<<12|(63&j)<<6|63&F)<=65535||te>=1114112)&&(te=null)),te===null?(te=65533,ne=1):te>65535&&(te-=65536,w+=String.fromCharCode(te>>>10&1023|55296),te=56320|1023&te),w+=String.fromCharCode(te),E+=ne}return w}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==pi.Bytes)return a.push(this.readVarint(i));var u=Hc(this);for(a=a||[];this.pos<u;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==pi.Bytes)return a.push(this.readSVarint());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==pi.Bytes)return a.push(this.readBoolean());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==pi.Bytes)return a.push(this.readFloat());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==pi.Bytes)return a.push(this.readDouble());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==pi.Bytes)return a.push(this.readFixed32());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==pi.Bytes)return a.push(this.readSFixed32());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==pi.Bytes)return a.push(this.readFixed64());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==pi.Bytes)return a.push(this.readSFixed64());var i=Hc(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===pi.Varint)for(;this.buf[this.pos++]>127;);else if(i===pi.Bytes)this.pos=this.readVarint()+this.pos;else if(i===pi.Fixed32)this.pos+=4;else{if(i!==pi.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var u=new Uint8Array(i);u.set(this.buf),this.buf=u,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Pp(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Pp(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Pp(this.buf,-1&a,this.pos),Pp(this.buf,Math.floor(a*LL),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Pp(this.buf,-1&a,this.pos),Pp(this.buf,Math.floor(a*LL),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,u){var p,x;if(i>=0?(p=i%4294967296|0,x=i/4294967296|0):(x=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,x=x+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(w,E,R){R.buf[R.pos++]=127&w|128,w>>>=7,R.buf[R.pos++]=127&w|128,w>>>=7,R.buf[R.pos++]=127&w|128,w>>>=7,R.buf[R.pos++]=127&w|128,R.buf[R.pos]=127&(w>>>=7)}(p,0,u),function(w,E){var R=(7&w)<<4;E.buf[E.pos++]|=R|((w>>>=3)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w|((w>>>=7)?128:0),w&&(E.buf[E.pos++]=127&w)))))}(x,u)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(p,x,w){for(var E,R,j=0;j<x.length;j++){if((E=x.charCodeAt(j))>55295&&E<57344){if(!R){E>56319||j+1===x.length?(p[w++]=239,p[w++]=191,p[w++]=189):R=E;continue}if(E<56320){p[w++]=239,p[w++]=191,p[w++]=189,R=E;continue}E=R-55296<<10|E-56320|65536,R=null}else R&&(p[w++]=239,p[w++]=191,p[w++]=189,R=null);E<128?p[w++]=E:(E<2048?p[w++]=E>>6|192:(E<65536?p[w++]=E>>12|224:(p[w++]=E>>18|240,p[w++]=E>>12&63|128),p[w++]=E>>6&63|128),p[w++]=63&E|128)}return w}(this.buf,a,this.pos);var u=this.pos-i;u>=128&&DL(i,u,this),this.pos=i-1,this.writeVarint(u),this.pos+=u},writeFloat:function(a){this.realloc(4),ML(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),ML(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var u=0;u<i;u++)this.buf[this.pos++]=a[u]},writeRawMessage:function(a,i){this.pos++;var u=this.pos;a(i,this);var p=this.pos-u;p>=128&&DL(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(a,i,u){this.writeTag(a,pi.Bytes),this.writeRawMessage(i,u)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,X9,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,q9,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,K9,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,Y9,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,Z9,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,J9,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,Q9,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,eG,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,tG,i)},writeBytesField:function(a,i){this.writeTag(a,pi.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,pi.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,pi.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,pi.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,pi.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,pi.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,pi.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,pi.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,pi.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,pi.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var sb=K(PL);const oC=3;function rG(a,i,u){i.glyphs=[],a===1&&u.readMessage(nG,i)}function nG(a,i,u){if(a===3){const{id:p,bitmap:x,width:w,height:E,left:R,top:j,advance:F}=u.readMessage(iG,{});i.glyphs.push({id:p,bitmap:new Vc({width:w+2*oC,height:E+2*oC},x),metrics:{width:w,height:E,left:R,top:j,advance:F}})}else a===4?i.ascender=u.readSVarint():a===5&&(i.descender=u.readSVarint())}function iG(a,i,u){a===1?i.id=u.readVarint():a===2?i.bitmap=u.readBytes():a===3?i.width=u.readVarint():a===4?i.height=u.readVarint():a===5?i.left=u.readSVarint():a===6?i.top=u.readSVarint():a===7&&(i.advance=u.readVarint())}const NL=oC;function aC(a){let i=0,u=0;for(const E of a)i+=E.w*E.h,u=Math.max(u,E.w);a.sort((E,R)=>R.h-E.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),u),h:1/0}];let x=0,w=0;for(const E of a)for(let R=p.length-1;R>=0;R--){const j=p[R];if(!(E.w>j.w||E.h>j.h)){if(E.x=j.x,E.y=j.y,w=Math.max(w,E.y+E.h),x=Math.max(x,E.x+E.w),E.w===j.w&&E.h===j.h){const F=p.pop();R<p.length&&(p[R]=F)}else E.h===j.h?(j.x+=E.w,j.w-=E.w):E.w===j.w?(j.y+=E.h,j.h-=E.h):(p.push({x:j.x+E.w,y:j.y,w:j.w-E.w,h:E.h}),j.y+=E.h,j.h-=E.h);break}}return{w:x,h:w,fill:i/(x*w)||0}}const Uo=1;class lC{constructor(i,{pixelRatio:u,version:p,stretchX:x,stretchY:w,content:E}){this.paddedRect=i,this.pixelRatio=u,this.stretchX=x,this.stretchY=w,this.content=E,this.version=p}get tl(){return[this.paddedRect.x+Uo,this.paddedRect.y+Uo]}get br(){return[this.paddedRect.x+this.paddedRect.w-Uo,this.paddedRect.y+this.paddedRect.h-Uo]}get displaySize(){return[(this.paddedRect.w-2*Uo)/this.pixelRatio,(this.paddedRect.h-2*Uo)/this.pixelRatio]}}class jL{constructor(i,u){const p={},x={};this.haveRenderCallbacks=[];const w=[];this.addImages(i,p,w),this.addImages(u,x,w);const{w:E,h:R}=aC(w),j=new oa({width:E||1,height:R||1});for(const F in i){const Y=i[F],te=p[F].paddedRect;oa.copy(Y.data,j,{x:0,y:0},{x:te.x+Uo,y:te.y+Uo},Y.data)}for(const F in u){const Y=u[F],te=x[F].paddedRect,ne=te.x+Uo,ue=te.y+Uo,fe=Y.data.width,be=Y.data.height;oa.copy(Y.data,j,{x:0,y:0},{x:ne,y:ue},Y.data),oa.copy(Y.data,j,{x:0,y:be-1},{x:ne,y:ue-1},{width:fe,height:1}),oa.copy(Y.data,j,{x:0,y:0},{x:ne,y:ue+be},{width:fe,height:1}),oa.copy(Y.data,j,{x:fe-1,y:0},{x:ne-1,y:ue},{width:1,height:be}),oa.copy(Y.data,j,{x:0,y:0},{x:ne+fe,y:ue},{width:1,height:be})}this.image=j,this.iconPositions=p,this.patternPositions=x}addImages(i,u,p){for(const x in i){const w=i[x],E={x:0,y:0,w:w.data.width+2*Uo,h:w.data.height+2*Uo};p.push(E),u[x]=new lC(E,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(i,u){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(p=>i.hasImage(p)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),u)}patchUpdatedImage(i,u,p){if(!i||!u||i.version===u.version)return;i.version=u.version;const[x,w]=i.tl;p.update(u.data,void 0,{x,y:w})}}Ar(lC,"ImagePosition"),Ar(jL,"ImageAtlas");const ka={horizontal:1,vertical:2,horizontalOnly:3},FL=-17;class vy{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,u){const p=new vy;return p.scale=i||1,p.fontStack=u,p}static forImage(i){const u=new vy;return u.imageName=i,u}}class Rp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,u){const p=new Rp;for(let x=0;x<i.sections.length;x++){const w=i.sections[x];w.image?p.addImageSection(w):p.addTextSection(w,u)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(u,p){let x="";for(let w=0;w<u.length;w++){const E=u.charCodeAt(w+1)||null,R=u.charCodeAt(w-1)||null;x+=!p&&(E&&O0(E)&&!xy[u[w+1]]||R&&O0(R)&&!xy[u[w-1]])||!xy[u[w]]?u[w]:xy[u[w]]}return x}(this.text,i)}trim(){let i=0;for(let p=0;p<this.text.length&&ob[this.text.charCodeAt(p)];p++)i++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=i&&ob[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(i,u),this.sectionIndex=this.sectionIndex.slice(i,u)}substring(i,u){const p=new Rp;return p.text=this.text.substring(i,u),p.sectionIndex=this.sectionIndex.slice(i,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,u)=>Math.max(i,this.sections[u].scale),0)}addTextSection(i,u){this.text+=i.text,this.sections.push(vy.forText(i.scale,i.fontStack||u));const p=this.sections.length-1;for(let x=0;x<i.text.length;++x)this.sectionIndex.push(p)}addImageSection(i){const u=i.image?i.image.name:"";if(u.length===0)return void on("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(vy.forImage(u)),this.sectionIndex.push(this.sections.length-1)):on("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cC(a,i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe){const be=Rp.fromFeature(a,x);te===ka.vertical&&be.verticalizePunctuation(ne);let Re=[];const je=function(tt,kt,wt,zt,er,It){if(!tt)return[];const $t=[],Ut=function(vr,Pr,br,cn,cr,Nr){let un=0;for(let Dn=0;Dn<vr.length();Dn++){const hn=vr.getSection(Dn);un+=BL(vr.getCharCode(Dn),hn,cn,cr,Pr,Nr)}return un/Math.max(1,Math.ceil(un/br))}(tt,kt,wt,zt,er,It),Yt=tt.text.indexOf("")>=0;let lr=0;for(let vr=0;vr<tt.length();vr++){const Pr=tt.getSection(vr),br=tt.getCharCode(vr);if(ob[br]||(lr+=BL(br,Pr,zt,er,kt,It)),vr<tt.length()-1){const cn=!((Lt=br)<11904||!(wr["Bopomofo Extended"](Lt)||wr.Bopomofo(Lt)||wr["CJK Compatibility Forms"](Lt)||wr["CJK Compatibility Ideographs"](Lt)||wr["CJK Compatibility"](Lt)||wr["CJK Radicals Supplement"](Lt)||wr["CJK Strokes"](Lt)||wr["CJK Symbols and Punctuation"](Lt)||wr["CJK Unified Ideographs Extension A"](Lt)||wr["CJK Unified Ideographs"](Lt)||wr["Enclosed CJK Letters and Months"](Lt)||wr["Halfwidth and Fullwidth Forms"](Lt)||wr.Hiragana(Lt)||wr["Ideographic Description Characters"](Lt)||wr["Kangxi Radicals"](Lt)||wr["Katakana Phonetic Extensions"](Lt)||wr.Katakana(Lt)||wr["Vertical Forms"](Lt)||wr["Yi Radicals"](Lt)||wr["Yi Syllables"](Lt)));(sG[br]||cn||Pr.imageName)&&$t.push(UL(vr+1,lr,Ut,$t,oG(br,tt.getCharCode(vr+1),cn&&Yt),!1))}}var Lt;return VL(UL(tt.length(),lr,Ut,$t,0,!0))}(be,F,w,i,p,ue),{processBidirectionalText:Je,processStyledBidirectionalText:Be}=G;if(Je&&be.sections.length===1){const tt=Je(be.toString(),je);for(const kt of tt){const wt=new Rp;wt.text=kt,wt.sections=be.sections;for(let zt=0;zt<kt.length;zt++)wt.sectionIndex.push(0);Re.push(wt)}}else if(Be){const tt=Be(be.text,be.sectionIndex,je);for(const kt of tt){const wt=new Rp;wt.text=kt[0],wt.sectionIndex=kt[1],wt.sections=be.sections,Re.push(wt)}}else Re=function(tt,kt){const wt=[],zt=tt.text;let er=0;for(const It of kt)wt.push(tt.substring(er,It)),er=It;return er<zt.length&&wt.push(tt.substring(er,zt.length)),wt}(be,je);const Ke=[],nt={positionedLines:Ke,text:be.toString(),top:Y[1],bottom:Y[1],left:Y[0],right:Y[0],writingMode:te,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(tt,kt,wt,zt,er,It,$t,Ut,Yt,lr,Lt,vr){let Pr=0,br=0,cn=0;const cr=Ut==="right"?1:Ut==="left"?0:.5;let Nr=!1;for(const dn of er){const fn=dn.getSections();for(const ui of fn){if(ui.imageName)continue;const mi=kt[ui.fontStack];if(mi&&(Nr=mi.ascender!==void 0&&mi.descender!==void 0,!Nr))break}if(!Nr)break}let un=0;for(const dn of er){dn.trim();const fn=dn.getMaxScale(),ui=(fn-1)*Js,mi={positionedGlyphs:[],lineOffset:0};tt.positionedLines[un]=mi;const gi=mi.positionedGlyphs;let hi=0;if(!dn.length()){br+=It,++un;continue}let Fi=0,Ji=0;for(let di=0;di<dn.length();di++){const ks=dn.getSection(di),gs=dn.getSectionIndex(di),Wi=dn.getCharCode(di);let jn=ks.scale,ys=null,yi=null,Io=null,xs=Js,Qs=0;const Fs=!(Yt===ka.horizontal||!Lt&&!Gg(Wi)||Lt&&(ob[Wi]||(Dn=Wi,wr.Arabic(Dn)||wr["Arabic Supplement"](Dn)||wr["Arabic Extended-A"](Dn)||wr["Arabic Presentation Forms-A"](Dn)||wr["Arabic Presentation Forms-B"](Dn))));if(ks.imageName){const Po=zt[ks.imageName];if(!Po)continue;Io=ks.imageName,tt.iconsInText=tt.iconsInText||!0,yi=Po.paddedRect;const Bs=Po.displaySize;jn=jn*Js/vr,ys={width:Bs[0],height:Bs[1],left:Uo,top:-NL,advance:Fs?Bs[1]:Bs[0],localGlyph:!1},Qs=Nr?-ys.height*jn:FL+fn*Js-Bs[1]*jn,xs=ys.advance;const Cl=(Fs?Bs[0]:Bs[1])*jn-Js*fn;Cl>0&&Cl>hi&&(hi=Cl)}else{const Po=wt[ks.fontStack];if(!Po)continue;Po[Wi]&&(yi=Po[Wi]);const Bs=kt[ks.fontStack];if(!Bs)continue;const Cl=Bs.glyphs[Wi];if(!Cl)continue;if(ys=Cl.metrics,xs=Wi!==8203?Js:0,Nr){const jp=Bs.ascender!==void 0?Math.abs(Bs.ascender):0,Iy=Bs.descender!==void 0?Math.abs(Bs.descender):0,Py=(jp+Iy)*jn;Fi<Py&&(Fi=Py,Ji=(jp-Iy)/2*jn),Qs=-jp*jn}else Qs=FL+(fn-jn)*Js}Fs?(tt.verticalizable=!0,gi.push({glyph:Wi,imageName:Io,x:Pr,y:br+Qs,vertical:Fs,scale:jn,localGlyph:ys.localGlyph,fontStack:ks.fontStack,sectionIndex:gs,metrics:ys,rect:yi}),Pr+=xs*jn+lr):(gi.push({glyph:Wi,imageName:Io,x:Pr,y:br+Qs,vertical:Fs,scale:jn,localGlyph:ys.localGlyph,fontStack:ks.fontStack,sectionIndex:gs,metrics:ys,rect:yi}),Pr+=ys.advance*jn+lr)}gi.length!==0&&(cn=Math.max(Pr-lr,cn),Nr?HL(gi,cr,hi,Ji,It*fn/2):HL(gi,cr,hi,0,It/2)),Pr=0;const ms=It*fn+hi;mi.lineOffset=Math.max(hi,ui),br+=ms,++un}var Dn;const hn=br,{horizontalAlign:qr,verticalAlign:ki}=uC($t);(function(dn,fn,ui,mi,gi,hi){const Fi=(fn-ui)*gi,Ji=-hi*mi;for(const ms of dn)for(const di of ms.positionedGlyphs)di.x+=Fi,di.y+=Ji})(tt.positionedLines,cr,qr,ki,cn,hn),tt.top+=-ki*hn,tt.bottom=tt.top+hn,tt.left+=-qr*cn,tt.right=tt.left+cn,tt.hasBaseline=Nr}(nt,i,u,p,Re,E,R,j,te,F,ne,fe),!function(tt){for(const kt of tt)if(kt.positionedGlyphs.length!==0)return!1;return!0}(Ke)&&nt}const ob={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sG={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function BL(a,i,u,p,x,w){if(i.imageName){const E=p[i.imageName];return E?E.displaySize[0]*i.scale*Js/w+x:0}{const E=u[i.fontStack],R=E&&E.glyphs[a];return R?R.metrics.advance*i.scale+x:0}}function $L(a,i,u,p){const x=Math.pow(a-i,2);return p?a<i?x/2:2*x:x+Math.abs(u)*u}function oG(a,i,u){let p=0;return a===10&&(p-=1e4),u&&(p+=150),a!==40&&a!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function UL(a,i,u,p,x,w){let E=null,R=$L(i,u,x,w);for(const j of p){const F=$L(i-j.x,u,x,w)+j.badness;F<=R&&(E=j,R=F)}return{index:a,x:i,priorBreak:E,badness:R}}function VL(a){return a?VL(a.priorBreak).concat(a.index):[]}function uC(a){let i=.5,u=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:i,verticalAlign:u}}function HL(a,i,u,p,x){if(!(i||u||p||x))return;const w=a.length-1,E=a[w],R=(E.x+E.metrics.advance*E.scale)*i;for(let j=0;j<=w;j++)a[j].x-=R,a[j].y+=u+p+x}function aG(a,i,u){const{horizontalAlign:p,verticalAlign:x}=uC(u),w=i[0]-a.displaySize[0]*p,E=i[1]-a.displaySize[1]*x;return{image:a,top:E,bottom:E+a.displaySize[1],left:w,right:w+a.displaySize[0]}}function WL(a,i,u,p,x,w){const E=a.image;let R;if(E.content){const Re=E.content,je=E.pixelRatio||1;R=[Re[0]/je,Re[1]/je,E.displaySize[0]-Re[2]/je,E.displaySize[1]-Re[3]/je]}const j=i.left*w,F=i.right*w;let Y,te,ne,ue;u==="width"||u==="both"?(ue=x[0]+j-p[3],te=x[0]+F+p[1]):(ue=x[0]+(j+F-E.displaySize[0])/2,te=ue+E.displaySize[0]);const fe=i.top*w,be=i.bottom*w;return u==="height"||u==="both"?(Y=x[1]+fe-p[0],ne=x[1]+be+p[2]):(Y=x[1]+(fe+be-E.displaySize[1])/2,ne=Y+E.displaySize[1]),{image:E,top:Y,right:te,bottom:ne,left:ue,collisionPadding:R}}class Wc extends Pe{constructor(i,u,p,x,w){super(i,u),this.angle=x,this.z=p,w!==void 0&&(this.segment=w)}clone(){return new Wc(this.x,this.y,this.z,this.angle,this.segment)}}function GL(a,i,u,p,x){if(i.segment===void 0)return!0;let w=i,E=i.segment+1,R=0;for(;R>-u/2;){if(E--,E<0)return!1;R-=a[E].dist(w),w=a[E]}R+=a[E].dist(a[E+1]),E++;const j=[];let F=0;for(;R<u/2;){const Y=a[E],te=a[E+1];if(!te)return!1;let ne=a[E-1].angleTo(Y)-Y.angleTo(te);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),j.push({distance:R,angleDelta:ne}),F+=ne;R-j[0].distance>p;)F-=j.shift().angleDelta;if(F>x)return!1;E++,R+=Y.dist(te)}return!0}function XL(a){let i=0;for(let u=0;u<a.length-1;u++)i+=a[u].dist(a[u+1]);return i}function qL(a,i,u){return a?.6*i*u:0}function YL(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function lG(a,i,u,p,x,w){const E=qL(u,x,w),R=YL(u,p)*w;let j=0;const F=XL(a)/2;for(let Y=0;Y<a.length-1;Y++){const te=a[Y],ne=a[Y+1],ue=te.dist(ne);if(j+ue>F){const fe=(F-j)/ue,be=Ln(te.x,ne.x,fe),Re=Ln(te.y,ne.y,fe),je=new Wc(be,Re,0,ne.angleTo(te),Y);return!E||GL(a,je,R,E,i)?je:void 0}j+=ue}}function cG(a,i,u,p,x,w,E,R,j){const F=qL(p,w,E),Y=YL(p,x),te=Y*E,ne=a[0].x===0||a[0].x===j||a[0].y===0||a[0].y===j;return i-te<i/4&&(i=te+i/4),ZL(a,ne?i/2*R%i:(Y/2+2*w)*E*R%i,i,F,u,te,ne,!1,j)}function ZL(a,i,u,p,x,w,E,R,j){const F=w/2,Y=XL(a);let te=0,ne=i-u,ue=[];for(let fe=0;fe<a.length-1;fe++){const be=a[fe],Re=a[fe+1],je=be.dist(Re),Je=Re.angleTo(be);for(;ne+u<te+je;){ne+=u;const Be=(ne-te)/je,Ke=Ln(be.x,Re.x,Be),nt=Ln(be.y,Re.y,Be);if(Ke>=0&&Ke<j&&nt>=0&&nt<j&&ne-F>=0&&ne+F<=Y){const tt=new Wc(Ke,nt,0,Je,fe);tt._round(),p&&!GL(a,tt,w,p,x)||ue.push(tt)}}te+=je}return R||ue.length||E||(ue=ZL(a,te/2,u,p,x,w,E,!0,j)),ue}function KL(a,i,u,p,x){const w=[];for(let E=0;E<a.length;E++){const R=a[E];let j;for(let F=0;F<R.length-1;F++){let Y=R[F],te=R[F+1];Y.x<i&&te.x<i||(Y.x<i?Y=new Pe(i,Y.y+(i-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round():te.x<i&&(te=new Pe(i,Y.y+(i-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round()),Y.y<u&&te.y<u||(Y.y<u?Y=new Pe(Y.x+(u-Y.y)/(te.y-Y.y)*(te.x-Y.x),u)._round():te.y<u&&(te=new Pe(Y.x+(u-Y.y)/(te.y-Y.y)*(te.x-Y.x),u)._round()),Y.x>=p&&te.x>=p||(Y.x>=p?Y=new Pe(p,Y.y+(p-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round():te.x>=p&&(te=new Pe(p,Y.y+(p-Y.x)/(te.x-Y.x)*(te.y-Y.y))._round()),Y.y>=x&&te.y>=x||(Y.y>=x?Y=new Pe(Y.x+(x-Y.y)/(te.y-Y.y)*(te.x-Y.x),x)._round():te.y>=x&&(te=new Pe(Y.x+(x-Y.y)/(te.y-Y.y)*(te.x-Y.x),x)._round()),j&&Y.equals(j[j.length-1])||(j=[Y],w.push(j)),j.push(te)))))}}return w}Ar(Wc,"Anchor");const by=1e20;function JL(a,i,u,p,x,w,E,R,j){for(let F=i;F<i+p;F++)QL(a,u*w+F,w,x,E,R,j);for(let F=u;F<u+x;F++)QL(a,F*w+i,1,p,E,R,j)}function QL(a,i,u,p,x,w,E){w[0]=0,E[0]=-by,E[1]=by,x[0]=a[i];for(let R=1,j=0,F=0;R<p;R++){x[R]=a[i+R*u];const Y=R*R;do{const te=w[j];F=(x[R]-x[te]+Y-te*te)/(R-te)/2}while(F<=E[j]&&--j>-1);j++,w[j]=R,E[j]=F,E[j+1]=by}for(let R=0,j=0;R<p;R++){for(;E[j+1]<R;)j++;const F=w[j],Y=R-F;a[i+R*u]=x[F]+Y*Y}}const wl=2,hC={none:0,ideographs:1,all:2};class Mp{constructor(i,u,p){this.requestManager=i,this.localGlyphMode=u,this.localFontFamily=p,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const x in i)for(const w of i[x])p.push({stack:x,id:w});Ot(p,({stack:x,id:w},E)=>{let R=this.entries[x];R||(R=this.entries[x]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let j=R.glyphs[w];if(j!==void 0)return void E(null,{stack:x,id:w,glyph:j});if(j=this._tinySDF(R,x,w),j)return R.glyphs[w]=j,void E(null,{stack:x,id:w,glyph:j});const F=Math.floor(w/256);if(256*F>65535)return void E(new Error("glyphs > 65535 not supported"));if(R.ranges[F])return void E(null,{stack:x,id:w,glyph:j});let Y=R.requests[F];Y||(Y=R.requests[F]=[],Mp.loadGlyphRange(x,F,this.url,this.requestManager,(te,ne)=>{if(ne){R.ascender=ne.ascender,R.descender=ne.descender;for(const ue in ne.glyphs)this._doesCharSupportLocalGlyph(+ue)||(R.glyphs[+ue]=ne.glyphs[+ue]);R.ranges[F]=!0}for(const ue of Y)ue(te,ne);delete R.requests[F]})),Y.push((te,ne)=>{te?E(te):ne&&E(null,{stack:x,id:w,glyph:ne.glyphs[w]||null})})},(x,w)=>{if(x)u(x);else if(w){const E={};for(const{stack:R,id:j,glyph:F}of w)E[R]===void 0&&(E[R]={}),E[R].glyphs===void 0&&(E[R].glyphs={}),E[R].glyphs[j]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics},E[R].ascender=this.entries[R].ascender,E[R].descender=this.entries[R].descender;u(null,E)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==hC.none&&(this.localGlyphMode===hC.all?!!this.localFontFamily:!!this.localFontFamily&&(wr["CJK Unified Ideographs"](i)||wr["Hangul Syllables"](i)||wr.Hiragana(i)||wr.Katakana(i)||wr["CJK Symbols and Punctuation"](i)))}_tinySDF(i,u,p){const x=this.localFontFamily;if(!x||!this._doesCharSupportLocalGlyph(p))return;let w=i.tinySDF;if(!w){let be="400";/bold/i.test(u)?be="900":/medium/i.test(u)?be="500":/light/i.test(u)&&(be="200"),w=i.tinySDF=new Mp.TinySDF({fontFamily:x,fontWeight:be,fontSize:24*wl,buffer:3*wl,radius:8*wl}),w.fontWeight=be}if(this.localGlyphs[w.fontWeight][p])return this.localGlyphs[w.fontWeight][p];const E=String.fromCharCode(p),{data:R,width:j,height:F,glyphWidth:Y,glyphHeight:te,glyphLeft:ne,glyphTop:ue,glyphAdvance:fe}=w.draw(E);return this.localGlyphs[w.fontWeight][p]={id:p,bitmap:new Vc({width:j,height:F},R),metrics:{width:Y/wl,height:te/wl,left:ne/wl,top:ue/wl-27,advance:fe/wl,localGlyph:!0}}}}Mp.loadGlyphRange=function(a,i,u,p,x){const w=256*i,E=w+255,R=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",a).replace("{range}",`${w}-${E}`),zi.Glyphs);is(R,(j,F)=>{if(j)x(j);else if(F){const Y={},te=function(ne){return new sb(ne).readFields(rG,{})}(F);for(const ne of te.glyphs)Y[ne.id]=ne;x(null,{glyphs:Y,ascender:te.ascender,descender:te.descender})}})},Mp.TinySDF=class{constructor({fontSize:a=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:x="sans-serif",fontWeight:w="normal",fontStyle:E="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const R=this.size=a+4*i,j=this._createCanvas(R),F=this.ctx=j.getContext("2d",{willReadFrequently:!0});F.font=`${E} ${w} ${a}px ${x}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(a){const i=document.createElement("canvas");return i.width=i.height=a,i}draw(a){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:x,actualBoundingBoxRight:w}=this.ctx.measureText(a),E=Math.ceil(u),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-x))),j=Math.min(this.size-this.buffer,E+Math.ceil(p)),F=R+2*this.buffer,Y=j+2*this.buffer,te=Math.max(F*Y,0),ne=new Uint8ClampedArray(te),ue={data:ne,width:F,height:Y,glyphWidth:R,glyphHeight:j,glyphTop:E,glyphLeft:0,glyphAdvance:i};if(R===0||j===0)return ue;const{ctx:fe,buffer:be,gridInner:Re,gridOuter:je}=this;fe.clearRect(be,be,R,j),fe.fillText(a,be,be+E);const Je=fe.getImageData(be,be,R,j);je.fill(by,0,te),Re.fill(0,0,te);for(let Be=0;Be<j;Be++)for(let Ke=0;Ke<R;Ke++){const nt=Je.data[4*(Be*R+Ke)+3]/255;if(nt===0)continue;const tt=(Be+be)*F+Ke+be;if(nt===1)je[tt]=0,Re[tt]=by;else{const kt=.5-nt;je[tt]=kt>0?kt*kt:0,Re[tt]=kt<0?kt*kt:0}}JL(je,0,0,F,Y,F,this.f,this.v,this.z),JL(Re,be,be,R,j,F,this.f,this.v,this.z);for(let Be=0;Be<te;Be++){const Ke=Math.sqrt(je[Be])-Math.sqrt(Re[Be]);ne[Be]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return ue}};const Lp=Uo;function eO(a,i,u,p){const x=[],w=a.image,E=w.pixelRatio,R=w.paddedRect.w-2*Lp,j=w.paddedRect.h-2*Lp,F=a.right-a.left,Y=a.bottom-a.top,te=w.stretchX||[[0,R]],ne=w.stretchY||[[0,j]],ue=(It,$t)=>It+$t[1]-$t[0],fe=te.reduce(ue,0),be=ne.reduce(ue,0),Re=R-fe,je=j-be;let Je=0,Be=fe,Ke=0,nt=be,tt=0,kt=Re,wt=0,zt=je;if(w.content&&p){const It=w.content;Je=ab(te,0,It[0]),Ke=ab(ne,0,It[1]),Be=ab(te,It[0],It[2]),nt=ab(ne,It[1],It[3]),tt=It[0]-Je,wt=It[1]-Ke,kt=It[2]-It[0]-Be,zt=It[3]-It[1]-nt}const er=(It,$t,Ut,Yt)=>{const lr=lb(It.stretch-Je,Be,F,a.left),Lt=cb(It.fixed-tt,kt,It.stretch,fe),vr=lb($t.stretch-Ke,nt,Y,a.top),Pr=cb($t.fixed-wt,zt,$t.stretch,be),br=lb(Ut.stretch-Je,Be,F,a.left),cn=cb(Ut.fixed-tt,kt,Ut.stretch,fe),cr=lb(Yt.stretch-Ke,nt,Y,a.top),Nr=cb(Yt.fixed-wt,zt,Yt.stretch,be),un=new Pe(lr,vr),Dn=new Pe(br,vr),hn=new Pe(br,cr),qr=new Pe(lr,cr),ki=new Pe(Lt/E,Pr/E),dn=new Pe(cn/E,Nr/E),fn=i*Math.PI/180;if(fn){const gi=Math.sin(fn),hi=Math.cos(fn),Fi=[hi,-gi,gi,hi];un._matMult(Fi),Dn._matMult(Fi),qr._matMult(Fi),hn._matMult(Fi)}const ui=It.stretch+It.fixed,mi=$t.stretch+$t.fixed;return{tl:un,tr:Dn,bl:qr,br:hn,tex:{x:w.paddedRect.x+Lp+ui,y:w.paddedRect.y+Lp+mi,w:Ut.stretch+Ut.fixed-ui,h:Yt.stretch+Yt.fixed-mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ki,pixelOffsetBR:dn,minFontScaleX:kt/E/F,minFontScaleY:zt/E/Y,isSDF:u}};if(p&&(w.stretchX||w.stretchY)){const It=tO(te,Re,fe),$t=tO(ne,je,be);for(let Ut=0;Ut<It.length-1;Ut++){const Yt=It[Ut],lr=It[Ut+1];for(let Lt=0;Lt<$t.length-1;Lt++)x.push(er(Yt,$t[Lt],lr,$t[Lt+1]))}}else x.push(er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:R+1},{fixed:0,stretch:j+1}));return x}function ab(a,i,u){let p=0;for(const x of a)p+=Math.max(i,Math.min(u,x[1]))-Math.max(i,Math.min(u,x[0]));return p}function tO(a,i,u){const p=[{fixed:-Lp,stretch:0}];for(const[x,w]of a){const E=p[p.length-1];p.push({fixed:x-E.stretch,stretch:E.stretch}),p.push({fixed:x-E.stretch,stretch:E.stretch+(w-x)})}return p.push({fixed:i+Lp,stretch:u}),p}function lb(a,i,u,p){return a/i*u+p}function cb(a,i,u,p){return a-i*u/p}function uG(a,i,u,p){const x=i+a.positionedLines[p].lineOffset;return p===0?u+x/2:u+(x+(i+a.positionedLines[p-1].lineOffset))/2}class hG{constructor(i=[],u=dG){if(this.data=i,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:u,compare:p}=this,x=u[i];for(;i>0;){const w=i-1>>1,E=u[w];if(p(x,E)>=0)break;u[i]=E,i=w}u[i]=x}_down(i){const{data:u,compare:p}=this,x=this.length>>1,w=u[i];for(;i<x;){let E=1+(i<<1),R=u[E];const j=E+1;if(j<this.length&&p(u[j],R)<0&&(E=j,R=u[j]),p(R,w)>=0)break;u[i]=R,i=E}u[i]=w}}function dG(a,i){return a<i?-1:a>i?1:0}function fG(a,i=1,u=!1){let p=1/0,x=1/0,w=-1/0,E=-1/0;const R=a[0];for(let ue=0;ue<R.length;ue++){const fe=R[ue];(!ue||fe.x<p)&&(p=fe.x),(!ue||fe.y<x)&&(x=fe.y),(!ue||fe.x>w)&&(w=fe.x),(!ue||fe.y>E)&&(E=fe.y)}const j=Math.min(w-p,E-x);let F=j/2;const Y=new hG([],pG);if(j===0)return new Pe(p,x);for(let ue=p;ue<w;ue+=j)for(let fe=x;fe<E;fe+=j)Y.push(new Op(ue+F,fe+F,F,a));let te=function(ue){let fe=0,be=0,Re=0;const je=ue[0];for(let Je=0,Be=je.length,Ke=Be-1;Je<Be;Ke=Je++){const nt=je[Je],tt=je[Ke],kt=nt.x*tt.y-tt.x*nt.y;be+=(nt.x+tt.x)*kt,Re+=(nt.y+tt.y)*kt,fe+=3*kt}return new Op(be/fe,Re/fe,0,ue)}(a),ne=Y.length;for(;Y.length;){const ue=Y.pop();(ue.d>te.d||!te.d)&&(te=ue,u&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,ne)),ue.max-te.d<=i||(F=ue.h/2,Y.push(new Op(ue.p.x-F,ue.p.y-F,F,a)),Y.push(new Op(ue.p.x+F,ue.p.y-F,F,a)),Y.push(new Op(ue.p.x-F,ue.p.y+F,F,a)),Y.push(new Op(ue.p.x+F,ue.p.y+F,F,a)),ne+=4)}return u&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${te.d}`)),te.p}function pG(a,i){return i.max-a.max}class Op{constructor(i,u,p,x){this.p=new Pe(i,u),this.h=p,this.d=function(w,E){let R=!1,j=1/0;for(let F=0;F<E.length;F++){const Y=E[F];for(let te=0,ne=Y.length,ue=ne-1;te<ne;ue=te++){const fe=Y[te],be=Y[ue];fe.y>w.y!=be.y>w.y&&w.x<(be.x-fe.x)*(w.y-fe.y)/(be.y-fe.y)+fe.x&&(R=!R),j=Math.min(j,ZM(w,fe,be))}}return(R?1:-1)*Math.sqrt(j)}(this.p,x),this.max=this.d+this.h*Math.SQRT2}}const Dp=7,dC=Number.POSITIVE_INFINITY,mG=Math.sqrt(2);function rO(a,[i,u]){let p=0,x=0;if(u===dC){i<0&&(i=0);const w=i/mG;switch(a){case"top-right":case"top-left":x=w-Dp;break;case"bottom-right":case"bottom-left":x=-w+Dp;break;case"bottom":x=-i+Dp;break;case"top":x=i-Dp}switch(a){case"top-right":case"bottom-right":p=-w;break;case"top-left":case"bottom-left":p=w;break;case"left":p=i;break;case"right":p=-i}}else{switch(i=Math.abs(i),u=Math.abs(u),a){case"top-right":case"top-left":case"top":x=u-Dp;break;case"bottom-right":case"bottom-left":case"bottom":x=-u+Dp}switch(a){case"top-right":case"bottom-right":case"right":p=-i;break;case"top-left":case"bottom-left":case"left":p=i}}return[p,x]}function gG(a,i,u,p,x,w,E,R,j,F){a.createArrays(),a.tilePixelRatio=Ur/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const Y=a.layers[0].layout,te=a.layers[0]._unevaluatedLayout._values,ne={};if(a.textSizeData.kind==="composite"){const{minZoom:be,maxZoom:Re}=a.textSizeData;ne.compositeTextSizes=[te["text-size"].possiblyEvaluate(new J(be),R),te["text-size"].possiblyEvaluate(new J(Re),R)]}if(a.iconSizeData.kind==="composite"){const{minZoom:be,maxZoom:Re}=a.iconSizeData;ne.compositeIconSizes=[te["icon-size"].possiblyEvaluate(new J(be),R),te["icon-size"].possiblyEvaluate(new J(Re),R)]}ne.layoutTextSize=te["text-size"].possiblyEvaluate(new J(j+1),R),ne.layoutIconSize=te["icon-size"].possiblyEvaluate(new J(j+1),R),ne.textMaxSize=te["text-size"].possiblyEvaluate(new J(18),R);const ue=Y.get("text-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",fe=Y.get("text-size");for(const be of a.features){const Re=Y.get("text-font").evaluate(be,{},R).join(","),je=fe.evaluate(be,{},R),Je=ne.layoutTextSize.evaluate(be,{},R),Be=(ne.layoutIconSize.evaluate(be,{},R),{horizontal:{},vertical:void 0}),Ke=be.text;let nt,tt=[0,0];if(Ke){const zt=Ke.toString(),er=Y.get("text-letter-spacing").evaluate(be,{},R)*Js,It=Y.get("text-line-height").evaluate(be,{},R)*Js,$t=_2(zt)?er:0,Ut=Y.get("text-anchor").evaluate(be,{},R),Yt=Y.get("text-variable-anchor");if(!Yt){const br=Y.get("text-radial-offset").evaluate(be,{},R);tt=br?rO(Ut,[br*Js,dC]):Y.get("text-offset").evaluate(be,{},R).map(cn=>cn*Js)}let lr=ue?"center":Y.get("text-justify").evaluate(be,{},R);const Lt=Y.get("symbol-placement")==="point",vr=Lt?Y.get("text-max-width").evaluate(be,{},R)*Js:1/0,Pr=br=>{a.allowVerticalPlacement&&Wg(zt)&&(Be.vertical=cC(Ke,i,u,x,Re,vr,It,Ut,br,$t,tt,ka.vertical,!0,Je,je))};if(!ue&&Yt){const br=lr==="auto"?Yt.map(cr=>fC(cr)):[lr];let cn=!1;for(let cr=0;cr<br.length;cr++){const Nr=br[cr];if(!Be.horizontal[Nr])if(cn)Be.horizontal[Nr]=Be.horizontal[0];else{const un=cC(Ke,i,u,x,Re,vr,It,"center",Nr,$t,tt,ka.horizontal,!1,Je,je);un&&(Be.horizontal[Nr]=un,cn=un.positionedLines.length===1)}}Pr("left")}else{if(lr==="auto"&&(lr=fC(Ut)),Lt||Y.get("text-writing-mode").indexOf("horizontal")>=0||!Wg(zt)){const br=cC(Ke,i,u,x,Re,vr,It,Ut,lr,$t,tt,ka.horizontal,!1,Je,je);br&&(Be.horizontal[lr]=br)}Pr(Lt?"left":lr)}}let kt=!1;if(be.icon&&be.icon.name){const zt=p[be.icon.name];zt&&(nt=aG(x[be.icon.name],Y.get("icon-offset").evaluate(be,{},R),Y.get("icon-anchor").evaluate(be,{},R)),kt=zt.sdf,a.sdfIcons===void 0?a.sdfIcons=zt.sdf:a.sdfIcons!==zt.sdf&&on("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(zt.pixelRatio!==a.pixelRatio||Y.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const wt=iO(Be.horizontal)||Be.vertical;a.iconsInText||(a.iconsInText=!!wt&&wt.iconsInText),(wt||nt)&&yG(a,be,Be,nt,p,ne,Je,0,tt,kt,E,R,F)}w&&a.generateCollisionDebugBuffers(j,a.collisionBoxArray)}function fC(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yG(a,i,u,p,x,w,E,R,j,F,Y,te,ne){let ue=w.textMaxSize.evaluate(i,{},te);ue===void 0&&(ue=E);const fe=a.layers[0].layout,be=fe.get("icon-offset").evaluate(i,{},te),Re=iO(u.horizontal)||u.vertical,je=ne.name==="globe",Je=Js,Be=E/Je,Ke=a.tilePixelRatio*ue/Je,nt=(Ut=a.overscaling,a.zoom>18&&Ut>2&&(Ut>>=1),Math.max(Ur/(512*Ut),1)*fe.get("symbol-spacing")),tt=fe.get("text-padding")*a.tilePixelRatio,kt=fe.get("icon-padding")*a.tilePixelRatio,wt=Fe(fe.get("text-max-angle")),zt=fe.get("text-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",er=fe.get("icon-rotation-alignment")==="map"&&fe.get("symbol-placement")!=="point",It=fe.get("symbol-placement"),$t=nt/2;var Ut;const Yt=fe.get("icon-text-fit");let lr;p&&Yt!=="none"&&(a.allowVerticalPlacement&&u.vertical&&(lr=WL(p,u.vertical,Yt,fe.get("icon-text-fit-padding"),be,Be)),Re&&(p=WL(p,Re,Yt,fe.get("icon-text-fit-padding"),be,Be)));const Lt=(vr,Pr,br)=>{if(Pr.x<0||Pr.x>=Ur||Pr.y<0||Pr.y>=Ur)return;let cn=null;if(je){const{x:cr,y:Nr,z:un}=ne.projectTilePoint(Pr.x,Pr.y,br);cn={anchor:new Wc(cr,Nr,un,0,void 0),up:ne.upVector(br,Pr.x,Pr.y)}}(function(cr,Nr,un,Dn,hn,qr,ki,dn,fn,ui,mi,gi,hi,Fi,Ji,ms,di,ks,gs,Wi,jn,ys,yi,Io,xs){const Qs=cr.addToLineVertexArray(Nr,Dn);let Fs,Po,Bs,Cl,jp,Iy,Py,NO=0,jO=0,FO=0,BO=0,AC=-1,IC=-1;const ec={};let $O=C2("");const Fd=un?un.anchor:Nr;let PC=0,RC=0;if(fn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[PC,RC]=fn.layout.get("text-offset").evaluate(jn,{},xs).map(aa=>aa*Js):(PC=fn.layout.get("text-radial-offset").evaluate(jn,{},xs)*Js,RC=dC),cr.allowVerticalPlacement&&hn.vertical){const aa=hn.vertical;if(Ji)Iy=pC(aa),dn&&(Py=pC(dn));else{const la=fn.layout.get("text-rotate").evaluate(jn,{},xs)+90;Bs=ub(ui,Fd,Nr,mi,gi,hi,aa,Fi,la,ms),dn&&(Cl=ub(ui,Fd,Nr,mi,gi,hi,dn,ks,la))}}if(qr){const aa=fn.layout.get("icon-rotate").evaluate(jn,{},xs),la=fn.layout.get("icon-text-fit")!=="none",Ry=eO(qr,aa,yi,la),LC=dn?eO(dn,aa,yi,la):void 0;Po=ub(ui,Fd,Nr,mi,gi,hi,qr,ks,aa),NO=4*Ry.length;const UO=cr.iconSizeData;let Bd=null;UO.kind==="source"?(Bd=[_l*fn.layout.get("icon-size").evaluate(jn,{},xs)],Bd[0]>qu&&on(`${cr.layerIds[0]}: Value for "icon-size" is >= ${_y}. Reduce your "icon-size".`)):UO.kind==="composite"&&(Bd=[_l*ys.compositeIconSizes[0].evaluate(jn,{},xs),_l*ys.compositeIconSizes[1].evaluate(jn,{},xs)],(Bd[0]>qu||Bd[1]>qu)&&on(`${cr.layerIds[0]}: Value for "icon-size" is >= ${_y}. Reduce your "icon-size".`)),cr.addSymbols(cr.icon,Ry,Bd,Wi,gs,jn,!1,un,Nr,Qs.lineStartIndex,Qs.lineLength,-1,Io,xs),AC=cr.icon.placedSymbolArray.length-1,LC&&(jO=4*LC.length,cr.addSymbols(cr.icon,LC,Bd,Wi,gs,jn,ka.vertical,un,Nr,Qs.lineStartIndex,Qs.lineLength,-1,Io,xs),IC=cr.icon.placedSymbolArray.length-1)}for(const aa in hn.horizontal){const la=hn.horizontal[aa];Fs||($O=C2(la.text),Ji?jp=pC(la):Fs=ub(ui,Fd,Nr,mi,gi,hi,la,Fi,fn.layout.get("text-rotate").evaluate(jn,{},xs),ms));const Ry=la.positionedLines.length===1;if(FO+=nO(cr,un,Nr,la,ki,fn,Ji,jn,ms,Qs,hn.vertical?ka.horizontal:ka.horizontalOnly,Ry?Object.keys(hn.horizontal):[aa],ec,AC,ys,Io,xs),Ry)break}hn.vertical&&(BO+=nO(cr,un,Nr,hn.vertical,ki,fn,Ji,jn,ms,Qs,ka.vertical,["vertical"],ec,IC,ys,Io,xs));let eh=-1;const MC=(aa,la)=>aa?Math.max(aa,la):la;eh=MC(jp,eh),eh=MC(Iy,eh),eh=MC(Py,eh);const WG=eh>-1?1:0;cr.glyphOffsetArray.length>=Zu.MAX_GLYPHS&&on("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jn.sortKey!==void 0&&cr.addToSortKeyRanges(cr.symbolInstances.length,jn.sortKey),cr.symbolInstances.emplaceBack(Fd.x,Fd.y,Fd.z,Nr.x,Nr.y,ec.right>=0?ec.right:-1,ec.center>=0?ec.center:-1,ec.left>=0?ec.left:-1,ec.vertical>=0?ec.vertical:-1,AC,IC,$O,Fs!==void 0?Fs:cr.collisionBoxArray.length,Fs!==void 0?Fs+1:cr.collisionBoxArray.length,Bs!==void 0?Bs:cr.collisionBoxArray.length,Bs!==void 0?Bs+1:cr.collisionBoxArray.length,Po!==void 0?Po:cr.collisionBoxArray.length,Po!==void 0?Po+1:cr.collisionBoxArray.length,Cl||cr.collisionBoxArray.length,Cl?Cl+1:cr.collisionBoxArray.length,mi,FO,BO,NO,jO,WG,0,PC,RC,eh)})(a,Pr,cn,vr,u,p,x,lr,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,tt,zt,j,0,kt,er,be,i,w,F,Y,te)};if(It==="line")for(const vr of KL(i.geometry,0,0,Ur,Ur)){const Pr=cG(vr,nt,wt,u.vertical||Re,p,Je,Ke,a.overscaling,Ur);for(const br of Pr)Re&&xG(a,Re.text,$t,br)||Lt(vr,br,te)}else if(It==="line-center"){for(const vr of i.geometry)if(vr.length>1){const Pr=lG(vr,wt,u.vertical||Re,p,Je,Ke);Pr&&Lt(vr,Pr,te)}}else if(i.type==="Polygon")for(const vr of eC(i.geometry,0)){const Pr=fG(vr,16);Lt(vr[0],new Wc(Pr.x,Pr.y,0,0,void 0),te)}else if(i.type==="LineString")for(const vr of i.geometry)Lt(vr,new Wc(vr[0].x,vr[0].y,0,0,void 0),te);else if(i.type==="Point")for(const vr of i.geometry)for(const Pr of vr)Lt([Pr],new Wc(Pr.x,Pr.y,0,0,void 0),te)}const _y=255,qu=_y*_l;function nO(a,i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe,be,Re){const je=function(Ke,nt,tt,kt,wt,zt,er,It){const $t=[];if(nt.positionedLines.length===0)return $t;const Ut=kt.layout.get("text-rotate").evaluate(zt,{})*Math.PI/180,Yt=function(br){const cn=br[0],cr=br[1],Nr=cn*cr;return Nr>0?[cn,-cr]:Nr<0?[-cn,cr]:cn===0?[cr,cn]:[cr,-cn]}(tt);let lr=Math.abs(nt.top-nt.bottom);for(const br of nt.positionedLines)lr-=br.lineOffset;const Lt=nt.positionedLines.length,vr=lr/Lt;let Pr=nt.top-tt[1];for(let br=0;br<Lt;++br){const cn=nt.positionedLines[br];Pr=uG(nt,vr,Pr,br);for(const cr of cn.positionedGlyphs){if(!cr.rect)continue;const Nr=cr.rect||{};let un=NL+1,Dn=!0,hn=1,qr=0;if(cr.imageName){const yi=er[cr.imageName];if(!yi)continue;if(yi.sdf){on("SDF images are not supported in formatted text and will be ignored.");continue}Dn=!1,hn=yi.pixelRatio,un=Uo/hn}const ki=(wt||It)&&cr.vertical,dn=cr.metrics.advance*cr.scale/2,fn=cr.metrics,ui=cr.rect;if(ui===null)continue;It&&nt.verticalizable&&(qr=cr.imageName?dn-cr.metrics.width*cr.scale/2:0);const mi=wt?[cr.x+dn,cr.y]:[0,0];let gi=[0,0],hi=[0,0],Fi=!1;wt||(ki?(hi=[cr.x+dn+Yt[0],cr.y+Yt[1]-qr],Fi=!0):gi=[cr.x+dn+tt[0],cr.y+tt[1]-qr]);const Ji=ui.w*cr.scale/(hn*(cr.localGlyph?wl:1)),ms=ui.h*cr.scale/(hn*(cr.localGlyph?wl:1));let di,ks,gs,Wi;if(ki){const yi=cr.y-Pr,Io=new Pe(-dn,dn-yi),xs=-Math.PI/2,Qs=new Pe(...hi);di=new Pe(-dn+gi[0],gi[1]),di._rotateAround(xs,Io)._add(Qs),di.x+=-yi+dn,di.y-=(fn.left-un)*cr.scale;const Fs=cr.imageName?fn.advance*cr.scale:Js*cr.scale,Po=String.fromCharCode(cr.glyph);W9(Po)?di.x+=(1-un)*cr.scale:G9(Po)?di.x+=Fs-fn.height*cr.scale+(-un-1)*cr.scale:di.x+=cr.imageName||fn.width+2*un===ui.w&&fn.height+2*un===ui.h?(Fs-ms)/2:(Fs-(fn.height+2*un)*cr.scale)/2,ks=new Pe(di.x,di.y-Ji),gs=new Pe(di.x+ms,di.y),Wi=new Pe(di.x+ms,di.y-Ji)}else{const yi=(fn.left-un)*cr.scale-dn+gi[0],Io=(-fn.top-un)*cr.scale+gi[1],xs=yi+Ji,Qs=Io+ms;di=new Pe(yi,Io),ks=new Pe(xs,Io),gs=new Pe(yi,Qs),Wi=new Pe(xs,Qs)}if(Ut){let yi;yi=wt?new Pe(0,0):Fi?new Pe(Yt[0],Yt[1]):new Pe(tt[0],tt[1]),di._rotateAround(Ut,yi),ks._rotateAround(Ut,yi),gs._rotateAround(Ut,yi),Wi._rotateAround(Ut,yi)}const jn=new Pe(0,0),ys=new Pe(0,0);$t.push({tl:di,tr:ks,bl:gs,br:Wi,tex:Nr,writingMode:nt.writingMode,glyphOffset:mi,sectionIndex:cr.sectionIndex,isSDF:Dn,pixelOffsetTL:jn,pixelOffsetBR:ys,minFontScaleX:0,minFontScaleY:0})}}return $t}(0,p,j,w,E,R,x,a.allowVerticalPlacement),Je=a.textSizeData;let Be=null;Je.kind==="source"?(Be=[_l*w.layout.get("text-size").evaluate(R,{},Re)],Be[0]>qu&&on(`${a.layerIds[0]}: Value for "text-size" is >= ${_y}. Reduce your "text-size".`)):Je.kind==="composite"&&(Be=[_l*fe.compositeTextSizes[0].evaluate(R,{},Re),_l*fe.compositeTextSizes[1].evaluate(R,{},Re)],(Be[0]>qu||Be[1]>qu)&&on(`${a.layerIds[0]}: Value for "text-size" is >= ${_y}. Reduce your "text-size".`)),a.addSymbols(a.text,je,Be,j,E,R,Y,i,u,F.lineStartIndex,F.lineLength,ue,be,Re);for(const Ke of te)ne[Ke]=a.text.placedSymbolArray.length-1;return 4*je.length}function iO(a){for(const i in a)return a[i];return null}function ub(a,i,u,p,x,w,E,R,j,F){let Y=E.top,te=E.bottom,ne=E.left,ue=E.right;const fe=E.collisionPadding;if(fe&&(ne-=fe[0],Y-=fe[1],ue+=fe[2],te+=fe[3]),j){const be=new Pe(ne,Y),Re=new Pe(ue,Y),je=new Pe(ne,te),Je=new Pe(ue,te),Be=Fe(j);let Ke=new Pe(0,0);F&&(Ke=new Pe(F[0],F[1])),be._rotateAround(Be,Ke),Re._rotateAround(Be,Ke),je._rotateAround(Be,Ke),Je._rotateAround(Be,Ke),ne=Math.min(be.x,Re.x,je.x,Je.x),ue=Math.max(be.x,Re.x,je.x,Je.x),Y=Math.min(be.y,Re.y,je.y,Je.y),te=Math.max(be.y,Re.y,je.y,Je.y)}return a.emplaceBack(i.x,i.y,i.z,u.x,u.y,ne,Y,ue,te,R,p,x,w),a.length-1}function pC(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const i=a.bottom-a.top;return i>0?Math.max(10,i):null}function xG(a,i,u,p){const x=a.compareText;if(i in x){const w=x[i];for(let E=w.length-1;E>=0;E--)if(p.dist(w[E])<u)return!0}else x[i]=[];return x[i].push(p),!1}function sO(a,i){const u=a.fovAboveCenter,p=a.elevation?a.elevation.getMinElevationBelowMSL()*i:0,x=(a._camera.position[2]*a.worldSize-p)/Math.cos(a._pitch),w=Math.sin(u)*x/Math.sin(Math.max(Math.PI/2-a._pitch-u,.01)),E=Math.sin(a._pitch)*w+x;return Math.min(1.01*E,x*(1/a._horizonShift))}function Nd(a,i){if(!i.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:i};const u=Math.pow(2,-a.z),p=a.x*u,x=(a.x+1)*u,w=a.y*u,E=(a.y+1)*u,R=Ca(p),j=Ca(x),F=ao(w),Y=ao(E),te=i.project(R,F),ne=i.project(j,F),ue=i.project(j,Y),fe=i.project(R,Y);let be=Math.min(te.x,ne.x,ue.x,fe.x),Re=Math.min(te.y,ne.y,ue.y,fe.y),je=Math.max(te.x,ne.x,ue.x,fe.x),Je=Math.max(te.y,ne.y,ue.y,fe.y);const Be=u/16;function Ke(tt,kt,wt,zt,er,It){const $t=(wt+er)/2,Ut=(zt+It)/2,Yt=i.project(Ca($t),ao(Ut)),lr=Math.max(0,be-Yt.x,Re-Yt.y,Yt.x-je,Yt.y-Je);be=Math.min(be,Yt.x),je=Math.max(je,Yt.x),Re=Math.min(Re,Yt.y),Je=Math.max(Je,Yt.y),lr>Be&&(Ke(tt,Yt,wt,zt,$t,Ut),Ke(Yt,kt,$t,Ut,er,It))}Ke(te,ne,p,w,x,w),Ke(ne,ue,x,w,x,E),Ke(ue,fe,x,E,p,E),Ke(fe,te,p,E,p,w),be-=Be,Re-=Be,je+=Be,Je+=Be;const nt=1/Math.max(je-be,Je-Re);return{scale:nt,x:be*nt,y:Re*nt,x2:je*nt,y2:Je*nt,projection:i}}const vG=xl(new Float32Array(16));class Yu{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,u){return{x:0,y:0,z:0}}unproject(i,u){return new ci(0,0)}projectTilePoint(i,u,p){return{x:i,y:u,z:0}}locationPoint(i,u,p=!0){return i._coordinatePoint(i.locationCoordinate(u),p)}pixelsPerMeter(i,u){return bl(1,i)*u}pixelSpaceConversion(i,u,p){return 1}farthestPixelDistance(i){return sO(i,i.pixelsPerMeter)}pointCoordinate(i,u,p,x){const w=i.horizonLineFromTop(!1),E=new Pe(u,Math.max(w,p));return i.rayIntersectionCoordinate(i.pointRayIntersection(E,x))}pointCoordinate3D(i,u,p){const x=new Pe(u,p);if(i.elevation)return i.elevation.pointCoordinate(x);{const w=this.pointCoordinate(i,x.x,x.y,0);return[w.x,w.y,w.z]}}isPointAboveHorizon(i,u){if(i.elevation)return!this.pointCoordinate3D(i,u.x,u.y);const p=i.horizonLineFromTop();return u.y<p}createInversionMatrix(i,u){return vG}createTileMatrix(i,u,p){let x,w,E;const R=p.canonical,j=xl(new Float64Array(16));if(this.isReprojectedInTileSpace){const F=Nd(R,this);x=1,w=F.x+p.wrap*F.scale,E=F.y,Pd(j,j,[x/F.scale,x/F.scale,i.pixelsPerMeter/u])}else x=u/i.zoomScale(R.z),w=(R.x+Math.pow(2,R.z)*p.wrap)*x,E=R.y*x;return Jg(j,j,[w,E,0]),Pd(j,j,[x/Ur,x/Ur,1]),j}upVector(i,u,p){return[0,0,1]}upVectorScale(i,u,p){return{metersToTile:1}}}class bG extends Yu{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[u,p]=this.parallels=i.parallels||[29.5,45.5],x=Math.sin(Fe(u));this.n=(x+Math.sin(Fe(p)))/2,this.c=1+x*(2*this.n-x),this.r0=Math.sqrt(this.c)/this.n}project(i,u){const{n:p,c:x,r0:w}=this,E=Fe(i-this.center[0]),R=Fe(u),j=Math.sqrt(x-2*p*Math.sin(R))/p;return{x:j*Math.sin(E*p),y:j*Math.cos(E*p)-w,z:0}}unproject(i,u){const{n:p,c:x,r0:w}=this,E=w+u;let R=Math.atan2(i,Math.abs(E))*Math.sign(E);E*p<0&&(R-=Math.PI*Math.sign(i)*Math.sign(E));const j=Fe(this.center[0])*p;R=Wt(R,-Math.PI-j,Math.PI-j);const F=mt(Ye(R/p)+this.center[0],-180,180),Y=Math.asin(mt((x-(i*i+E*E)*p*p)/(2*p),-1,1)),te=mt(Ye(Y),-lo,lo);return new ci(F,te)}}const wy=1.340264,Sy=-.081106,Cy=893e-6,ky=.003796,hb=Math.sqrt(3)/2;class _G extends Yu{project(i,u){u=u/180*Math.PI,i=i/180*Math.PI;const p=Math.asin(hb*Math.sin(u)),x=p*p,w=x*x*x;return{x:.5*(i*Math.cos(p)/(hb*(wy+3*Sy*x+w*(7*Cy+9*ky*x)))/Math.PI+.5),y:1-.5*(p*(wy+Sy*x+w*(Cy+ky*x))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,x=p*p,w=x*x*x;for(let Y,te,ne,ue=0;ue<12&&(te=p*(wy+Sy*x+w*(Cy+ky*x))-u,ne=wy+3*Sy*x+w*(7*Cy+9*ky*x),Y=te/ne,p=mt(p-Y,-Math.PI/3,Math.PI/3),x=p*p,w=x*x*x,!(Math.abs(Y)<1e-12));++ue);const E=hb*i*(wy+3*Sy*x+w*(7*Cy+9*ky*x))/Math.cos(p),R=Math.asin(Math.sin(p)/hb),j=mt(180*E/Math.PI,-180,180),F=mt(180*R/Math.PI,-lo,lo);return new ci(j,F)}}class wG extends Yu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){return{x:.5+i/360,y:.5-u/360,z:0}}unproject(i,u){const p=360*(i-.5),x=mt(360*(.5-u),-lo,lo);return new ci(p,x)}}const zp=Math.PI/2;function db(a){return Math.tan((zp+a)/2)}class SG extends Yu{constructor(i){super(i),this.center=i.center||[0,30];const[u,p]=this.parallels=i.parallels||[30,30];let x=Fe(u),w=Fe(p);this.southernCenter=x+w<0,this.southernCenter&&(x=-x,w=-w);const E=Math.cos(x),R=db(x);this.n=x===w?Math.sin(x):Math.log(E/Math.cos(w))/Math.log(db(w)/R),this.f=E*Math.pow(db(x),this.n)/this.n}project(i,u){u=Fe(u),this.southernCenter&&(u=-u),i=Fe(i-this.center[0]);const p=1e-6,{n:x,f:w}=this;w>0?u<-zp+p&&(u=-zp+p):u>zp-p&&(u=zp-p);const E=w/Math.pow(db(u),x);let R=E*Math.sin(x*i),j=w-E*Math.cos(x*i);return R=.5*(R/Math.PI+.5),j=.5*(j/Math.PI+.5),{x:R,y:this.southernCenter?j:1-j,z:0}}unproject(i,u){i=(2*i-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:x}=this,w=x-u,E=Math.sign(w),R=Math.sign(p)*Math.sqrt(i*i+w*w);let j=Math.atan2(i,Math.abs(w))*E;w*p<0&&(j-=Math.PI*Math.sign(i)*E);const F=mt(Ye(j/p)+this.center[0],-180,180),Y=mt(Ye(2*Math.atan(Math.pow(x/R,1/p))-zp),-lo,lo);return new ci(F,this.southernCenter?-Y:Y)}}class oO extends Yu{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,u){return{x:Yl(i),y:Zl(u),z:0}}unproject(i,u){const p=Ca(i),x=ao(u);return new ci(p,x)}}const aO=Fe(lo);class CG extends Yu{project(i,u){const p=(u=Fe(u))*u,x=p*p;return{x:.5*((i=Fe(i))*(.8707-.131979*p+x*(x*(.003971*p-.001529*x)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+x*(.028874*p-.044475-.005916*x)))/Math.PI+1),z:0}}unproject(i,u){i=(2*i-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,x=25,w=0,E=p*p;do{E=p*p;const F=E*E;w=(p*(1.007226+E*(.015085+F*(.028874*E-.044475-.005916*F)))-u)/(1.007226+E*(.045255+F*(.259866*E-.311325-.005916*11*F))),p=mt(p-w,-aO,aO)}while(Math.abs(w)>1e-6&&--x>0);E=p*p;const R=mt(Ye(i/(.8707+E*(E*(E*E*E*(.003971-.001529*E)-.013791)-.131979))),-180,180),j=Ye(p);return new ci(R,j)}}const lO=Fe(lo);class kG extends Yu{project(i,u){u=Fe(u),i=Fe(i);const p=Math.cos(u),x=2/Math.PI,w=Math.acos(p*Math.cos(i/2)),E=Math.sin(w)/w,R=.5*(i*x+2*p*Math.sin(i/2)/E)||0,j=.5*(u+Math.sin(u)/E)||0;return{x:.5*(R/Math.PI+.5),y:1-.5*(j/Math.PI+1),z:0}}unproject(i,u){let p=i=(2*i-.5)*Math.PI,x=u=(2*(1-u)-1)*Math.PI,w=25;const E=1e-6;let R=0,j=0;do{const F=Math.cos(x),Y=Math.sin(x),te=2*Y*F,ne=Y*Y,ue=F*F,fe=Math.cos(p/2),be=Math.sin(p/2),Re=2*fe*be,je=be*be,Je=1-ue*fe*fe,Be=Je?1/Je:0,Ke=Je?Math.acos(F*fe)*Math.sqrt(1/Je):0,nt=.5*(2*Ke*F*be+2*p/Math.PI)-i,tt=.5*(Ke*Y+x)-u,kt=.5*Be*(ue*je+Ke*F*fe*ne)+1/Math.PI,wt=Be*(Re*te/4-Ke*Y*be),zt=.125*Be*(te*be-Ke*Y*ue*Re),er=.5*Be*(ne*fe+Ke*je*F)+.5,It=wt*zt-er*kt;R=(tt*wt-nt*er)/It,j=(nt*zt-tt*kt)/It,p=mt(p-R,-Math.PI,Math.PI),x=mt(x-j,-lO,lO)}while((Math.abs(R)>E||Math.abs(j)>E)&&--w>0);return new ci(Ye(p),Ye(x))}}class cO extends Yu{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Fe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,u){const{scale:p,cosPhi:x}=this;return{x:Fe(i)*x*p+.5,y:-Math.sin(Fe(u))/x*p+.5,z:0}}unproject(i,u){const{scale:p,cosPhi:x}=this,w=-(u-.5)/p,E=mt(Ye((i-.5)/p)/x,-180,180),R=Math.asin(mt(w*x,-1,1)),j=mt(Ye(R),-lo,lo);return new ci(E,j)}}class EG extends oO{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(i,u,p){const x=oy(i,u,p);return as(x,x,ay(ql(p))),{x:x[0],y:x[1],z:x[2]}}locationPoint(i,u){const p=_p(u.lat,u.lng),x=Eo([],p),w=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(u),i._centerAltitude):i._centerAltitude;ry(p,p,x,bl(1,0)*Ur*w);const E=xl(new Float64Array(16));return Id(E,i.pixelMatrix,i.globeMatrix),as(p,p,E),new Pe(p[0],p[1])}pixelsPerMeter(i,u){return bl(1,0)*u}pixelSpaceConversion(i,u,p){const x=bl(1,i)*u,w=Ln(bl(1,45)*u,x,p);return this.pixelsPerMeter(i,u)/w}createTileMatrix(i,u,p){const x=j2(ql(p.canonical));return Id(new Float64Array(16),i.globeMatrix,x)}createInversionMatrix(i,u){const{center:p}=i,x=ay(ql(u));return B0(x,x,Fe(p.lng)),A2(x,x,Fe(p.lat)),Pd(x,x,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(x)}pointCoordinate(i,u,p,x){return zM(i,u,p,!0)||new Sp(0,0)}pointCoordinate3D(i,u,p){const x=this.pointCoordinate(i,u,p,0);return[x.x,x.y,x.z]}isPointAboveHorizon(i,u){return!zM(i,u.x,u.y,!1)}farthestPixelDistance(i){const u=function(x,w){const E=x.cameraToCenterDistance,R=x._centerAltitude*w,j=x._camera,F=x._camera.forward(),Y=$c([],Sa([],F,-E),[0,0,R]),te=x.worldSize/(2*Math.PI),ne=[0,0,-te],ue=x.width/x.height,fe=Math.tan(x.fovAboveCenter),be=Sa([],j.up(),fe),Re=Sa([],j.right(),fe*ue),je=Eo([],$c([],$c([],F,be),Re)),Je=[];let Be;if(new M2(Y,je).closestPointOnSphere(ne,te,Je)){const Ke=$c([],Je,ne),nt=vl([],Ke,Y);Be=Math.cos(x.fovAboveCenter)*Qg(nt)}else{const Ke=vl([],Y,ne),nt=vl([],ne,Y);Eo(nt,nt);const tt=Qg(Ke)-te;Be=Math.sqrt(tt*(tt+2*te));const kt=Math.acos(Be/(te+tt))-Math.acos(Xa(F,nt));Be*=Math.cos(kt)}return 1.01*Be}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),p=wp(i.zoom);if(p>0){const x=sO(i,bl(1,i.center.lat)*i.worldSize),w=i.worldSize/(2*Math.PI),E=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Ln(u,x+w*(1-Math.cos(E)),Math.pow(p,10))}return u}upVector(i,u,p){return oy(u,p,i,1)}upVectorScale(i){return{metersToTile:$0(V0(ql(i)))}}}function uO(a){const i=a.parallels,u=!!i&&Math.abs(i[0]+i[1])<.01;switch(a.name){case"mercator":return new oO(a);case"equirectangular":return new wG(a);case"naturalEarth":return new CG(a);case"equalEarth":return new _G(a);case"winkelTripel":return new kG(a);case"albers":return u?new cO(a):new bG(a);case"lambertConformalConic":return u?new cO(a):new SG(a);case"globe":return new EG(a)}throw new Error(`Invalid projection name: ${a.name}`)}const TG=Q0.types,AG=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fb(a,i,u,p,x,w,E,R,j,F,Y,te,ne){const ue=R?Math.min(qu,Math.round(R[0])):0,fe=R?Math.min(qu,Math.round(R[1])):0;a.emplaceBack(i,u,Math.round(32*p),Math.round(32*x),w,E,(ue<<1)+(j?1:0),fe,16*F,16*Y,256*te,256*ne)}function pb(a,i,u,p,x,w,E){a.emplaceBack(i,u,p,x,w,E)}function mb(a,i,u,p,x){a.emplaceBack(i,u,p,x),a.emplaceBack(i,u,p,x),a.emplaceBack(i,u,p,x),a.emplaceBack(i,u,p,x)}function IG(a){for(const i of a.sections)if(S2(i.text))return!0;return!1}class mC{constructor(i){this.layoutVertexArray=new Ht,this.indexArray=new Lr,this.programConfigurations=i,this.segments=new fs,this.dynamicLayoutVertexArray=new Jt,this.opacityVertexArray=new zr,this.placedSymbolArray=new ds,this.globeExtVertexArray=new sr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,u,p,x){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,N9.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,F9.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,AG,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,j9.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||x)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Ar(mC,"SymbolBuffers");class gC{constructor(i,u,p){this.layoutVertexArray=new i,this.layoutAttributes=u,this.indexArray=new p,this.segments=new fs,this.collisionVertexArray=new vn,this.collisionVertexArrayExt=new yn}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,B9.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,$9.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ar(gC,"CollisionBuffers");class Zu{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(E=>E.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=xl([]),this.placementViewportMatrix=xl([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=iC(this.zoom,u["text-size"]),this.iconSizeData=iC(this.zoom,u["icon-size"]);const p=this.layers[0].layout,x=p.get("symbol-sort-key"),w=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&x.constantOr(1)!==void 0,this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(E=>ka[E]),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new mC(new Ad(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new mC(new Ad(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ko,this.lineVertexArray=new gp,this.symbolInstances=new Pi}calculateGlyphDependencies(i,u,p,x,w){for(let E=0;E<i.length;E++)if(u[i.charCodeAt(E)]=!0,x&&w){const R=xy[i.charAt(E)];R&&(u[R.charCodeAt(0)]=!0)}}populate(i,u,p,x){const w=this.layers[0],E=w.layout,R=this.projection.name==="globe",j=E.get("text-font"),F=E.get("text-field"),Y=E.get("icon-image"),te=(F.value.kind!=="constant"||F.value.value instanceof ni&&!F.value.value.isEmpty()||F.value.value.toString().length>0)&&(j.value.kind!=="constant"||j.value.value.length>0),ne=Y.value.kind!=="constant"||!!Y.value.value||Object.keys(Y.parameters).length>0,ue=E.get("symbol-sort-key");if(this.features=[],!te&&!ne)return;const fe=u.iconDependencies,be=u.glyphDependencies,Re=u.availableImages,je=new J(this.zoom);for(const{feature:Je,id:Be,index:Ke,sourceLayerIndex:nt}of i){const tt=w._featureFilter.needGeometry,kt=Od(Je,tt);if(!w._featureFilter.filter(je,kt,p))continue;if(tt||(kt.geometry=Uc(Je,p,x)),R&&Je.type!==1&&p.z<=5){const It=kt.geometry,$t=.98078528056,Ut=(Yt,lr)=>Xa(oy(Yt.x,Yt.y,p,1),oy(lr.x,lr.y,p,1))<$t;for(let Yt=0;Yt<It.length;Yt++)It[Yt]=FW(It[Yt],Ut)}let wt,zt;if(te){const It=w.getValueAndResolveTokens("text-field",kt,p,Re),$t=ni.factory(It);IG($t)&&(this.hasRTLText=!0),(!this.hasRTLText||L()==="unavailable"||this.hasRTLText&&G.isParsed())&&(wt=H9($t,w,kt))}if(ne){const It=w.getValueAndResolveTokens("icon-image",kt,p,Re);zt=It instanceof Tn?It:Tn.fromString(It)}if(!wt&&!zt)continue;const er=this.sortFeaturesByKey?ue.evaluate(kt,{},p):void 0;if(this.features.push({id:Be,text:wt,icon:zt,index:Ke,sourceLayerIndex:nt,geometry:kt.geometry,properties:Je.properties,type:TG[Je.type],sortKey:er}),zt&&(fe[zt.name]=!0),wt){const It=j.evaluate(kt,{},p).join(","),$t=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ka.vertical)>=0;for(const Ut of wt.sections)if(Ut.image)fe[Ut.image.name]=!0;else{const Yt=Wg(wt.toString()),lr=Ut.fontStack||It,Lt=be[lr]=be[lr]||{};this.calculateGlyphDependencies(Ut.text,Lt,$t,this.allowVerticalPlacement,Yt)}}}E.get("symbol-placement")==="line"&&(this.features=function(Je){const Be={},Ke={},nt=[];let tt=0;function kt(It){nt.push(Je[It]),tt++}function wt(It,$t,Ut){const Yt=Ke[It];return delete Ke[It],Ke[$t]=Yt,nt[Yt].geometry[0].pop(),nt[Yt].geometry[0]=nt[Yt].geometry[0].concat(Ut[0]),Yt}function zt(It,$t,Ut){const Yt=Be[$t];return delete Be[$t],Be[It]=Yt,nt[Yt].geometry[0].shift(),nt[Yt].geometry[0]=Ut[0].concat(nt[Yt].geometry[0]),Yt}function er(It,$t,Ut){const Yt=Ut?$t[0][$t[0].length-1]:$t[0][0];return`${It}:${Yt.x}:${Yt.y}`}for(let It=0;It<Je.length;It++){const $t=Je[It],Ut=$t.geometry,Yt=$t.text?$t.text.toString():null;if(!Yt){kt(It);continue}const lr=er(Yt,Ut),Lt=er(Yt,Ut,!0);if(lr in Ke&&Lt in Be&&Ke[lr]!==Be[Lt]){const vr=zt(lr,Lt,Ut),Pr=wt(lr,Lt,nt[vr].geometry);delete Be[lr],delete Ke[Lt],Ke[er(Yt,nt[Pr].geometry,!0)]=Pr,nt[vr].geometry=null}else lr in Ke?wt(lr,Lt,Ut):Lt in Be?zt(lr,Lt,Ut):(kt(It),Be[lr]=tt-1,Ke[Lt]=tt-1)}return nt.filter(It=>It.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Je,Be)=>Je.sortKey-Be.sortKey)}update(i,u,p,x){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,u,this.layers,p,x),this.icon.programConfigurations.updatePaintArrays(i,u,this.layers,p,x))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=uO(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,u){const p=this.lineVertexArray.length;if(i.segment!==void 0)for(const{x,y:w}of u)this.lineVertexArray.emplaceBack(x,w);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,u,p,x,w,E,R,j,F,Y,te,ne,ue,fe){const be=i.indexArray,Re=i.layoutVertexArray,je=i.globeExtVertexArray,Je=i.segments.prepareSegment(4*u.length,Re,be,this.canOverlap?E.sortKey:void 0),Be=this.glyphOffsetArray.length,Ke=Je.vertexLength,nt=this.allowVerticalPlacement&&R===ka.vertical?Math.PI/2:0,tt=E.text&&E.text.sections;for(let wt=0;wt<u.length;wt++){const{tl:zt,tr:er,bl:It,br:$t,tex:Ut,pixelOffsetTL:Yt,pixelOffsetBR:lr,minFontScaleX:Lt,minFontScaleY:vr,glyphOffset:Pr,isSDF:br,sectionIndex:cn}=u[wt],cr=Je.vertexLength,Nr=Pr[1];if(fb(Re,F.x,F.y,zt.x,Nr+zt.y,Ut.x,Ut.y,p,br,Yt.x,Yt.y,Lt,vr),fb(Re,F.x,F.y,er.x,Nr+er.y,Ut.x+Ut.w,Ut.y,p,br,lr.x,Yt.y,Lt,vr),fb(Re,F.x,F.y,It.x,Nr+It.y,Ut.x,Ut.y+Ut.h,p,br,Yt.x,lr.y,Lt,vr),fb(Re,F.x,F.y,$t.x,Nr+$t.y,Ut.x+Ut.w,Ut.y+Ut.h,p,br,lr.x,lr.y,Lt,vr),j){const{x:un,y:Dn,z:hn}=j.anchor,[qr,ki,dn]=j.up;pb(je,un,Dn,hn,qr,ki,dn),pb(je,un,Dn,hn,qr,ki,dn),pb(je,un,Dn,hn,qr,ki,dn),pb(je,un,Dn,hn,qr,ki,dn),mb(i.dynamicLayoutVertexArray,un,Dn,hn,nt)}else mb(i.dynamicLayoutVertexArray,F.x,F.y,F.z,nt);be.emplaceBack(cr,cr+1,cr+2),be.emplaceBack(cr+1,cr+2,cr+3),Je.vertexLength+=4,Je.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pr[0]),wt!==u.length-1&&cn===u[wt+1].sectionIndex||i.programConfigurations.populatePaintArrays(Re.length,E,E.index,{},ue,fe,tt&&tt[cn])}const kt=j?j.anchor:F;i.placedSymbolArray.emplaceBack(kt.x,kt.y,kt.z,F.x,F.y,Be,this.glyphOffsetArray.length-Be,Ke,Y,te,F.segment,p?p[0]:0,p?p[1]:0,x[0],x[1],R,0,!1,0,ne,0)}_commitLayoutVertex(i,u,p,x,w,E,R){i.emplaceBack(u,p,x,w,E,Math.round(R.x),Math.round(R.y))}_addCollisionDebugVertices(i,u,p,x,w,E,R){const j=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),F=j.vertexLength,Y=R.tileAnchorX,te=R.tileAnchorY;for(let ue=0;ue<4;ue++)p.collisionVertexArray.emplaceBack(0,0,0,0);p.collisionVertexArrayExt.emplaceBack(u,-i.padding,-i.padding),p.collisionVertexArrayExt.emplaceBack(u,i.padding,-i.padding),p.collisionVertexArrayExt.emplaceBack(u,i.padding,i.padding),p.collisionVertexArrayExt.emplaceBack(u,-i.padding,i.padding),this._commitLayoutVertex(p.layoutVertexArray,x,w,E,Y,te,new Pe(i.x1,i.y1)),this._commitLayoutVertex(p.layoutVertexArray,x,w,E,Y,te,new Pe(i.x2,i.y1)),this._commitLayoutVertex(p.layoutVertexArray,x,w,E,Y,te,new Pe(i.x2,i.y2)),this._commitLayoutVertex(p.layoutVertexArray,x,w,E,Y,te,new Pe(i.x1,i.y2)),j.vertexLength+=4;const ne=p.indexArray;ne.emplaceBack(F,F+1),ne.emplaceBack(F+1,F+2),ne.emplaceBack(F+2,F+3),ne.emplaceBack(F+3,F),j.primitiveLength+=4}_addTextDebugCollisionBoxes(i,u,p,x,w,E){for(let R=x;R<w;R++){const j=p.get(R),F=this.getSymbolInstanceTextSize(i,E,u,R);this._addCollisionDebugVertices(j,F,this.textCollisionBox,j.projectedAnchorX,j.projectedAnchorY,j.projectedAnchorZ,E)}}_addIconDebugCollisionBoxes(i,u,p,x,w,E){for(let R=x;R<w;R++){const j=p.get(R),F=this.getSymbolInstanceIconSize(i,u,E.placedIconSymbolIndex);this._addCollisionDebugVertices(j,F,this.iconCollisionBox,j.projectedAnchorX,j.projectedAnchorY,j.projectedAnchorZ,E)}}generateCollisionDebugBuffers(i,u){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gC(Ir,IL.members,js),this.iconCollisionBox=new gC(Ir,IL.members,js);const p=Ap(this.iconSizeData,i),x=Ap(this.textSizeData,i);for(let w=0;w<this.symbolInstances.length;w++){const E=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(x,i,u,E.textBoxStartIndex,E.textBoxEndIndex,E),this._addTextDebugCollisionBoxes(x,i,u,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._addIconDebugCollisionBoxes(p,i,u,E.iconBoxStartIndex,E.iconBoxEndIndex,E),this._addIconDebugCollisionBoxes(p,i,u,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E)}}getSymbolInstanceTextSize(i,u,p,x){const w=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:x),E=nb(this.textSizeData,i,w)/Js;return this.tilePixelRatio*E}getSymbolInstanceIconSize(i,u,p){const x=this.icon.placedSymbolArray.get(p),w=nb(this.iconSizeData,i,x);return this.tilePixelRatio*w}_commitDebugCollisionVertexUpdate(i,u,p){i.emplaceBack(u,-p,-p),i.emplaceBack(u,p,-p),i.emplaceBack(u,p,p),i.emplaceBack(u,-p,p)}_updateTextDebugCollisionBoxes(i,u,p,x,w,E){for(let R=x;R<w;R++){const j=p.get(R),F=this.getSymbolInstanceTextSize(i,E,u,R);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,F,j.padding)}}_updateIconDebugCollisionBoxes(i,u,p,x,w,E){for(let R=x;R<w;R++){const j=p.get(R),F=this.getSymbolInstanceIconSize(i,u,E);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,F,j.padding)}}updateCollisionDebugBuffers(i,u){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const p=Ap(this.iconSizeData,i),x=Ap(this.textSizeData,i);for(let w=0;w<this.symbolInstances.length;w++){const E=this.symbolInstances.get(w);this._updateTextDebugCollisionBoxes(x,i,u,E.textBoxStartIndex,E.textBoxEndIndex,E),this._updateTextDebugCollisionBoxes(x,i,u,E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E),this._updateIconDebugCollisionBoxes(p,i,u,E.iconBoxStartIndex,E.iconBoxEndIndex,E.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(p,i,u,E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,u,p,x,w,E,R,j,F){const Y={};if(u<p){const{x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke,featureIndex:nt}=i.get(u);Y.textBox={x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke},Y.textFeatureIndex=nt}if(x<w){const{x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke,featureIndex:nt}=i.get(x);Y.verticalTextBox={x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke},Y.verticalTextFeatureIndex=nt}if(E<R){const{x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke,featureIndex:nt}=i.get(E);Y.iconBox={x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke},Y.iconFeatureIndex=nt}if(j<F){const{x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke,featureIndex:nt}=i.get(j);Y.verticalIconBox={x1:te,y1:ne,x2:ue,y2:fe,padding:be,projectedAnchorX:Re,projectedAnchorY:je,projectedAnchorZ:Je,tileAnchorX:Be,tileAnchorY:Ke},Y.verticalIconFeatureIndex=nt}return Y}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,u){const p=i.placedSymbolArray.get(u),x=p.vertexStartIndex+4*p.numGlyphs;for(let w=p.vertexStartIndex;w<x;w+=4)i.indexArray.emplaceBack(w,w+1,w+2),i.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(i),p=Math.cos(i),x=[],w=[],E=[];for(let R=0;R<this.symbolInstances.length;++R){E.push(R);const j=this.symbolInstances.get(R);x.push(0|Math.round(u*j.tileAnchorX+p*j.tileAnchorY)),w.push(j.featureIndex)}return E.sort((R,j)=>x[R]-x[j]||w[j]-w[R]),E}addToSortKeyRanges(i,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:x,centerJustifiedTextSymbolIndex:w,leftJustifiedTextSymbolIndex:E,verticalPlacedTextSymbolIndex:R,placedIconSymbolIndex:j,verticalPlacedIconSymbolIndex:F}=p;x>=0&&this.addIndicesForPlacedSymbol(this.text,x),w>=0&&w!==x&&this.addIndicesForPlacedSymbol(this.text,w),E>=0&&E!==w&&E!==x&&this.addIndicesForPlacedSymbol(this.text,E),R>=0&&this.addIndicesForPlacedSymbol(this.text,R),j>=0&&this.addIndicesForPlacedSymbol(this.icon,j),F>=0&&this.addIndicesForPlacedSymbol(this.icon,F)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ar(Zu,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Zu.MAX_GLYPHS=65535,Zu.addDynamicAttributes=mb;const PG=new qe({"symbol-placement":new ge(B.layout_symbol["symbol-placement"]),"symbol-spacing":new ge(B.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ge(B.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Me(B.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ge(B.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ge(B.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ge(B.layout_symbol["icon-ignore-placement"]),"icon-optional":new ge(B.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ge(B.layout_symbol["icon-rotation-alignment"]),"icon-size":new Me(B.layout_symbol["icon-size"]),"icon-text-fit":new ge(B.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ge(B.layout_symbol["icon-text-fit-padding"]),"icon-image":new Me(B.layout_symbol["icon-image"]),"icon-rotate":new Me(B.layout_symbol["icon-rotate"]),"icon-padding":new ge(B.layout_symbol["icon-padding"]),"icon-keep-upright":new ge(B.layout_symbol["icon-keep-upright"]),"icon-offset":new Me(B.layout_symbol["icon-offset"]),"icon-anchor":new Me(B.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ge(B.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ge(B.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ge(B.layout_symbol["text-rotation-alignment"]),"text-field":new Me(B.layout_symbol["text-field"]),"text-font":new Me(B.layout_symbol["text-font"]),"text-size":new Me(B.layout_symbol["text-size"]),"text-max-width":new Me(B.layout_symbol["text-max-width"]),"text-line-height":new Me(B.layout_symbol["text-line-height"]),"text-letter-spacing":new Me(B.layout_symbol["text-letter-spacing"]),"text-justify":new Me(B.layout_symbol["text-justify"]),"text-radial-offset":new Me(B.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ge(B.layout_symbol["text-variable-anchor"]),"text-anchor":new Me(B.layout_symbol["text-anchor"]),"text-max-angle":new ge(B.layout_symbol["text-max-angle"]),"text-writing-mode":new ge(B.layout_symbol["text-writing-mode"]),"text-rotate":new Me(B.layout_symbol["text-rotate"]),"text-padding":new ge(B.layout_symbol["text-padding"]),"text-keep-upright":new ge(B.layout_symbol["text-keep-upright"]),"text-transform":new Me(B.layout_symbol["text-transform"]),"text-offset":new Me(B.layout_symbol["text-offset"]),"text-allow-overlap":new ge(B.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ge(B.layout_symbol["text-ignore-placement"]),"text-optional":new ge(B.layout_symbol["text-optional"])});var yC={paint:new qe({"icon-opacity":new Me(B.paint_symbol["icon-opacity"]),"icon-color":new Me(B.paint_symbol["icon-color"]),"icon-halo-color":new Me(B.paint_symbol["icon-halo-color"]),"icon-halo-width":new Me(B.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Me(B.paint_symbol["icon-halo-blur"]),"icon-translate":new ge(B.paint_symbol["icon-translate"]),"icon-translate-anchor":new ge(B.paint_symbol["icon-translate-anchor"]),"text-opacity":new Me(B.paint_symbol["text-opacity"]),"text-color":new Me(B.paint_symbol["text-color"],{runtimeType:Le,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Me(B.paint_symbol["text-halo-color"]),"text-halo-width":new Me(B.paint_symbol["text-halo-width"]),"text-halo-blur":new Me(B.paint_symbol["text-halo-blur"]),"text-translate":new ge(B.paint_symbol["text-translate"]),"text-translate-anchor":new ge(B.paint_symbol["text-translate-anchor"])}),layout:PG};class hO{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:X,this.defaultValue=i}evaluate(i){if(i.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(i.formattedSection))return u.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ar(hO,"FormatSectionOverride",{omit:["defaultValue"]});class gb extends yl{constructor(i){super(i,yC)}recalculate(i,u){super.recalculate(i,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const x=[];for(const w of p)x.indexOf(w)<0&&x.push(w);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,u,p,x){const w=this.layout.get(i).evaluate(u,{},p,x),E=this._unevaluatedLayout._values[i];return E.isDataDriven()||ju(E.value)||!w?w:function(R,j){return j.replace(/{([^{}]+)}/g,(F,Y)=>Y in R?String(R[Y]):"")}(u.properties,w)}createBucket(i){return new Zu(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of yC.paint.overridableProperties){if(!gb.hasPaintOverride(this.layout,i))continue;const u=this.paint.get(i),p=new hO(u),x=new lp(p,u.property.specification);let w=null;w=u.value.kind==="constant"||u.value.kind==="source"?new Og("source",x):new vd("composite",x,u.value.zoomStops,u.value._interpolationType),this.paint._values[i]=new De(u.property,w,u.parameters)}}_handleOverridablePaintPropertyUpdate(i,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&gb.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,u){const p=i.get("text-field"),x=yC.paint.properties[u];let w=!1;const E=R=>{for(const j of R)if(x.overrides&&x.overrides.hasOverride(j))return void(w=!0)};if(p.value.kind==="constant"&&p.value.value instanceof ni)E(p.value.value.sections);else if(p.value.kind==="source"){const R=F=>{w||(F instanceof Zs&&ii(F.value)===Bt?E(F.value.sections):F instanceof ht?E(F.sections):F.eachChild(R))},j=p.value;j._styleExpression&&R(j._styleExpression.expression)}return w}getProgramConfiguration(i){return new Wu(this,i)}}var RG={paint:new qe({"background-color":new ge(B.paint_background["background-color"]),"background-pattern":new ge(B.paint_background["background-pattern"]),"background-opacity":new ge(B.paint_background["background-opacity"])})},MG={paint:new qe({"raster-opacity":new ge(B.paint_raster["raster-opacity"]),"raster-hue-rotate":new ge(B.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ge(B.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ge(B.paint_raster["raster-brightness-max"]),"raster-saturation":new ge(B.paint_raster["raster-saturation"]),"raster-contrast":new ge(B.paint_raster["raster-contrast"]),"raster-resampling":new ge(B.paint_raster["raster-resampling"]),"raster-fade-duration":new ge(B.paint_raster["raster-fade-duration"])})};class LG extends yl{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var OG={paint:new qe({"sky-type":new ge(B.paint_sky["sky-type"]),"sky-atmosphere-sun":new ge(B.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ge(B.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ge(B.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ge(B.paint_sky["sky-gradient-radius"]),"sky-gradient":new We(B.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ge(B.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ge(B.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ge(B.paint_sky["sky-opacity"])})};function xC(a,i,u){const p=[0,0,1],x=PM([]);return MM(x,x,u?-Fe(a)+Math.PI:Fe(a)),RM(x,x,-Fe(i)),EM(p,p,x),Eo(p,p)}const DG={circle:class extends yl{constructor(a){super(a,GW)}createBucket(a){return new H2(a)}queryRadius(a){const i=a;return Cp("circle-radius",this,i)+Cp("circle-stroke-width",this,i)+G0(this.paint.get("circle-translate"))}queryIntersectsFeature(a,i,u,p,x,w,E,R){const j=eL(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,a.pixelToTileUnitsFactor),F=this.paint.get("circle-radius").evaluate(i,u)+this.paint.get("circle-stroke-width").evaluate(i,u);return tL(a,p,w,E,R,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",j,F)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new Wu(this,a)}},heatmap:class extends yl{createBucket(a){return new nL(a)}constructor(a){super(a,ZW),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=q2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return Cp("heatmap-radius",this,a)}queryIntersectsFeature(a,i,u,p,x,w,E,R){const j=this.paint.get("heatmap-radius").evaluate(i,u);return tL(a,p,w,E,R,!0,!0,new Pe(0,0),j)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new Wu(this,a)}},hillshade:class extends yl{constructor(a){super(a,KW)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends yl{constructor(a){super(a,f9)}getProgramIds(){const a=this.paint.get("fill-pattern"),i=a&&a.constantOr(1),u=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getProgramConfiguration(a){return new Wu(this,a)}recalculate(a,i){super.recalculate(a,i);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new K0(a)}queryRadius(){return G0(this.paint.get("fill-translate"))}queryIntersectsFeature(a,i,u,p,x,w){return!a.queryGeometry.isAboveHorizon&&YM(QM(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,a.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}},"fill-extrusion":class extends yl{constructor(a){super(a,I9)}createBucket(a){return new my(a)}queryRadius(){return G0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new Wu(this,a)}queryIntersectsFeature(a,i,u,p,x,w,E,R,j){const F=eL(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,a.pixelToTileUnitsFactor),Y=this.paint.get("fill-extrusion-height").evaluate(i,u),te=this.paint.get("fill-extrusion-base").evaluate(i,u),ne=[0,0],ue=R&&w.elevation,fe=w.elevation?w.elevation.exaggeration():1,be=a.tile.getBucket(this);if(ue&&be instanceof my){const Ke=be.centroidVertexArray,nt=j+1;nt<Ke.length&&(ne[0]=Ke.geta_centroid_pos0(nt),ne[1]=Ke.geta_centroid_pos1(nt))}if(ne[0]===0&&ne[1]===1)return!1;w.projection.name==="globe"&&(p=_L([p],[new Pe(0,0),new Pe(Ur,Ur)],a.tileID.canonical).map(Ke=>Ke.polygon).flat());const Re=ue?R:null,[je,Je]=function(Ke,nt,tt,kt,wt,zt,er,It,$t,Ut,Yt){return Ke.projection.name==="globe"?function(lr,Lt,vr,Pr,br,cn,cr,Nr,un,Dn,hn){const qr=[],ki=[],dn=lr.projection.upVectorScale(hn,lr.center.lat,lr.worldSize).metersToTile,fn=[0,0,0,1],ui=[0,0,0,1],mi=(hi,Fi,Ji,ms)=>{hi[0]=Fi,hi[1]=Ji,hi[2]=ms,hi[3]=1},gi=bL();vr>0&&(vr+=gi),Pr+=gi;for(const hi of Lt){const Fi=[],Ji=[];for(const ms of hi){const di=ms.x+br.x,ks=ms.y+br.y,gs=lr.projection.projectTilePoint(di,ks,hn),Wi=lr.projection.upVector(hn,ms.x,ms.y);let jn=vr,ys=Pr;if(cr){const yi=kL(di,ks,vr,Pr,cr,Nr,un,Dn);jn+=yi.base,ys+=yi.top}vr!==0?mi(fn,gs.x+Wi[0]*dn*jn,gs.y+Wi[1]*dn*jn,gs.z+Wi[2]*dn*jn):mi(fn,gs.x,gs.y,gs.z),mi(ui,gs.x+Wi[0]*dn*ys,gs.y+Wi[1]*dn*ys,gs.z+Wi[2]*dn*ys),as(fn,fn,cn),as(ui,ui,cn),Fi.push(new Tp(fn[0],fn[1],fn[2])),Ji.push(new Tp(ui[0],ui[1],ui[2]))}qr.push(Fi),ki.push(Ji)}return[qr,ki]}(Ke,nt,tt,kt,wt,zt,er,It,$t,Ut,Yt):er?function(lr,Lt,vr,Pr,br,cn,cr,Nr,un){const Dn=[],hn=[],qr=[0,0,0,1];for(const ki of lr){const dn=[],fn=[];for(const ui of ki){const mi=ui.x+Pr.x,gi=ui.y+Pr.y,hi=kL(mi,gi,Lt,vr,cn,cr,Nr,un);qr[0]=mi,qr[1]=gi,qr[2]=hi.base,qr[3]=1,Rd(qr,qr,br),qr[3]=Math.max(qr[3],1e-5);const Fi=new Tp(qr[0]/qr[3],qr[1]/qr[3],qr[2]/qr[3]);qr[0]=mi,qr[1]=gi,qr[2]=hi.top,qr[3]=1,Rd(qr,qr,br),qr[3]=Math.max(qr[3],1e-5);const Ji=new Tp(qr[0]/qr[3],qr[1]/qr[3],qr[2]/qr[3]);dn.push(Fi),fn.push(Ji)}Dn.push(dn),hn.push(fn)}return[Dn,hn]}(nt,tt,kt,wt,zt,er,It,$t,Ut):function(lr,Lt,vr,Pr,br){const cn=[],cr=[],Nr=br[8]*Lt,un=br[9]*Lt,Dn=br[10]*Lt,hn=br[11]*Lt,qr=br[8]*vr,ki=br[9]*vr,dn=br[10]*vr,fn=br[11]*vr;for(const ui of lr){const mi=[],gi=[];for(const hi of ui){const Fi=hi.x+Pr.x,Ji=hi.y+Pr.y,ms=br[0]*Fi+br[4]*Ji+br[12],di=br[1]*Fi+br[5]*Ji+br[13],ks=br[2]*Fi+br[6]*Ji+br[14],gs=br[3]*Fi+br[7]*Ji+br[15],Wi=ms+Nr,jn=di+un,ys=ks+Dn,yi=Math.max(gs+hn,1e-5),Io=ms+qr,xs=di+ki,Qs=ks+dn,Fs=Math.max(gs+fn,1e-5);mi.push(new Tp(Wi/yi,jn/yi,ys/yi)),gi.push(new Tp(Io/Fs,xs/Fs,Qs/Fs))}cn.push(mi),cr.push(gi)}return[cn,cr]}(nt,tt,kt,wt,zt)}(w,p,te,Y,F,E,Re,ne,fe,w.center.lat,a.tileID.canonical),Be=a.queryGeometry;return function(Ke,nt,tt){let kt=1/0;YM(tt,nt)&&(kt=CL(tt,nt[0]));for(let wt=0;wt<nt.length;wt++){const zt=nt[wt],er=Ke[wt];for(let It=0;It<zt.length-1;It++){const $t=zt[It],Ut=[$t,zt[It+1],er[It+1],er[It],$t];qM(tt,Ut)&&(kt=Math.min(kt,CL(tt,Ut)))}}return kt!==1/0&&kt}(je,Je,Be.isPointQuery()?Be.screenBounds:Be.screenGeometry)}},line:class extends yl{constructor(a){super(a,EL),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof _g,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,i){super.recalculate(a,i),this.paint._values["line-floorwidth"]=TL.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new rb(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new Wu(this,a)}queryRadius(a){const i=a,u=AL(Cp("line-width",this,i),Cp("line-gap-width",this,i)),p=Cp("line-offset",this,i);return u/2+Math.abs(p)+G0(this.paint.get("line-translate"))}queryIntersectsFeature(a,i,u,p,x,w){if(a.queryGeometry.isAboveHorizon)return!1;const E=QM(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,a.pixelToTileUnitsFactor),R=a.pixelToTileUnitsFactor/2*AL(this.paint.get("line-width").evaluate(i,u),this.paint.get("line-gap-width").evaluate(i,u)),j=this.paint.get("line-offset").evaluate(i,u);return j&&(p=function(F,Y){const te=[],ne=new Pe(0,0);for(let ue=0;ue<F.length;ue++){const fe=F[ue],be=[];for(let Re=0;Re<fe.length;Re++){const je=fe[Re],Je=fe[Re+1],Be=Re===0?ne:je.sub(fe[Re-1])._unit()._perp(),Ke=Re===fe.length-1?ne:Je.sub(je)._unit()._perp(),nt=Be._add(Ke)._unit();nt._mult(1/(nt.x*Ke.x+nt.y*Ke.y)),be.push(nt._mult(Y)._add(je))}te.push(be)}return te}(p,j*a.pixelToTileUnitsFactor)),function(F,Y,te){for(let ne=0;ne<Y.length;ne++){const ue=Y[ne];if(F.length>=3){for(let fe=0;fe<ue.length;fe++)if(Dd(F,ue[fe]))return!0}if(UW(F,ue,te))return!0}return!1}(E,p,R)}isTileClipped(){return!0}},symbol:gb,background:class extends yl{constructor(a){super(a,RG)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends yl{constructor(a){super(a,MG)}getProgramIds(){return["raster"]}},sky:class extends yl{constructor(a){super(a,OG),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=q2({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(a,i){if(this.paint.get("sky-type")==="atmosphere"){const p=this.paint.get("sky-atmosphere-sun"),x=!p,w=a.style.light,E=w.properties.get("position");return x&&w.properties.get("anchor")==="viewport"&&on("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),x?xC(E.azimuthal,90-E.polar,i):xC(p[0],90-p[1],i)}const u=this.paint.get("sky-gradient-center");return xC(u[0],90-u[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class Ey{constructor(i,u,p,x){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,x)}update(i,u,p){const{width:x,height:w}=i,{context:E}=this,{gl:R}=E,{HTMLImageElement:j,HTMLCanvasElement:F,HTMLVideoElement:Y,ImageData:te,ImageBitmap:ne}=k;if(R.bindTexture(R.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!u||u.premultiply!==!1)),p||this.size&&this.size[0]===x&&this.size[1]===w){const{x:ue,y:fe}=p||{x:0,y:0};i instanceof j||i instanceof F||i instanceof Y||i instanceof te||ne&&i instanceof ne?R.texSubImage2D(R.TEXTURE_2D,0,ue,fe,R.RGBA,R.UNSIGNED_BYTE,i):R.texSubImage2D(R.TEXTURE_2D,0,ue,fe,x,w,R.RGBA,R.UNSIGNED_BYTE,i.data)}else this.size=[x,w],i instanceof j||i instanceof F||i instanceof Y||i instanceof te||ne&&i instanceof ne?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,i):R.texImage2D(R.TEXTURE_2D,0,this.format,x,w,0,this.format,R.UNSIGNED_BYTE,i.data);this.useMipmap=!!(u&&u.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&R.generateMipmap(R.TEXTURE_2D)}bind(i,u){const{context:p}=this,{gl:x}=p;x.bindTexture(x.TEXTURE_2D,this.texture),i!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,i),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,this.useMipmap?i===x.NEAREST?x.NEAREST_MIPMAP_NEAREST:x.LINEAR_MIPMAP_NEAREST:i),this.filter=i),u!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class zG{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class NG{constructor(){this.tasks={},this.taskQueue=[],fr(["process"],this),this.invoker=new zG(this.process),this.nextId=0}add(i,u){const p=this.nextId++,x=function({type:w,isSymbolTile:E,zoom:R}){return R=R||0,w==="message"?0:w!=="maybePrepare"||E?w!=="parseTile"||E?w==="parseTile"&&E?300-R:w==="maybePrepare"&&E?400-R:500:200-R:100-R}(u);if(x===0){Kr();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[p]={fn:i,metadata:u,priority:x,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){Kr();try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const u=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let i=null,u=1/0;for(let x=0;x<this.taskQueue.length;x++){const w=this.tasks[this.taskQueue[x]];w.priority<u&&(u=w.priority,i=x)}if(i===null)return null;const p=this.taskQueue[i];return this.taskQueue.splice(i,1),p}remove(){this.invoker.remove()}}class dO{constructor(i){this._stringToNumber={},this._numberToString=[];for(let u=0;u<i.length;u++){const p=i[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const jG=["tile","layer","source","sourceLayer","state"];class fO{constructor(i,u,p,x,w){this.type="Feature",this._vectorTileFeature=i,this._z=u,this._x=p,this._y=x,this.properties=i.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const u of jG)this[u]!==void 0&&(i[u]=this[u]);return i}}const Za=32,Kl=33,Ku=new Uint16Array(8184);for(let a=0;a<2046;a++){let i=a+2,u=0,p=0,x=0,w=0,E=0,R=0;for(1&i?x=w=E=Za:u=p=R=Za;(i>>=1)>1;){const F=u+x>>1,Y=p+w>>1;1&i?(x=u,w=p,u=E,p=R):(u=x,p=w,x=E,w=R),E=F,R=Y}const j=4*a;Ku[j+0]=u,Ku[j+1]=p,Ku[j+2]=x,Ku[j+3]=w}const Jl=new Uint16Array(2178),Ju=new Uint8Array(1089),yb=new Uint16Array(1089);function pO(a){return a===0?-.03125:a===32?.03125:0}var mO=dt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const gO={type:2,extent:Ur,loadGeometry:()=>[[new Pe(0,0),new Pe(Ur+1,0),new Pe(Ur+1,Ur+1),new Pe(0,Ur+1),new Pe(0,0)]]};class vC{constructor(i,u,p,x,w){this.tileID=i,this.uid=vt(),this.uses=0,this.tileSize=u,this.tileZoom=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,this.expiredRequestCount=0,this.state="loading",x&&x.transform&&(this.projection=x.transform.projection)}registerFadeDuration(i){const u=i+this.timeAdded;u<S.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Nd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,u,p){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(x,w){const E={};if(!w)return E;for(const R of x){const j=R.layerIds.map(F=>w.getLayer(F)).filter(Boolean);if(j.length!==0){R.layers=j,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(F=>j.filter(Y=>Y.id===F)[0]));for(const F of j)E[F.id]=R}}return E}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const w=this.buckets[x];if(w instanceof Zu){if(this.hasSymbolBuckets=!0,!p)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const w=this.buckets[x];if(w instanceof Zu&&w.hasRTLText){this.hasRTLText=!0,G.isLoading()||G.isLoaded()||L()!=="deferred"||V();break}}this.queryPadding=0;for(const x in this.buckets){const w=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(x).queryRadius(w))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new li}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const x=this.buckets[p];x.uploadPending()&&x.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ey(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ey(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ey(i,this.lineAtlas.image,u.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,x,w,E,R,j){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:x,pixelPosMatrix:R,transform:E,params:w,tileTransform:this.tileTransform},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const x=p.loadVTLayers(),w=u?u.sourceLayer:"",E=x._geojsonTileLayer||x[w];if(!E)return;const R=dp(u&&u.filter),{z:j,x:F,y:Y}=this.tileID.canonical,te={z:j,x:F,y:Y};for(let ne=0;ne<E.length;ne++){const ue=E.feature(ne);if(R.needGeometry){const Re=Od(ue,!0);if(!R.filter(new J(this.tileID.overscaledZ),Re,this.tileID.canonical))continue}else if(!R.filter(new J(this.tileID.overscaledZ),ue))continue;const fe=p.getId(ue,w),be=new fO(ue,j,F,Y,fe);be.tile=te,i.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=En(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let x=!1;if(this.expirationTime>p)x=!1;else if(u)if(this.expirationTime<u)x=!0;else{const w=this.expirationTime-u;w?this.expirationTime=p+Math.max(w,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!u)return;const p=this.latestFeatureIndex.loadVTLayers(),x=u.style.listImages();for(const w in this.buckets){if(!u.style.hasLayer(w))continue;const E=this.buckets[w],R=E.layers[0].sourceLayer||"_geojsonTileLayer",j=p[R],F=i[R];if(!j||!F||Object.keys(F).length===0)continue;if(E.update(F,j,x,this.imageAtlas&&this.imageAtlas.patternPositions||{}),E instanceof rb||E instanceof K0){const te=u.style._getSourceCache(E.layers[0].source);u._terrain&&u._terrain.enabled&&te&&E.programConfigurations.needsUpload&&u._terrain._clearRenderCacheForTile(te.id,this.tileID)}const Y=u&&u.style&&u.style.getLayer(w);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=S.now()+i}setTexture(i,u){const p=u.context,x=p.gl;this.texture=this.texture||u.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new Ey(p,i,x.RGBA,{useMipmap:!0}),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE))}setDependencies(i,u){const p={};for(const x of u)p[x]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const x=this.dependencies[p];if(x){for(const w of u)if(x[w])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const p=Uc(gO,this.tileID.canonical,this.tileTransform)[0],x=new Qt,w=new ia;for(let E=0;E<p.length;E++){const{x:R,y:j}=p[E];x.emplaceBack(R,j),w.emplaceBack(E)}w.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(w),this._tileDebugBuffer=i.createVertexBuffer(x,iy.members),this._tileDebugSegments=fs.simpleSegment(0,0,x.length,w.length)}_makeTileBoundsBuffers(i,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const p=Uc(gO,this.tileID.canonical,this.tileTransform)[0];let x,w;if(this.isRaster){const E=function(R,j){const F=Nd(R,j),Y=Math.pow(2,R.z);for(let Re=0;Re<Kl;Re++)for(let je=0;je<Kl;je++){const Je=Ca((R.x+(je+pO(je))/Za)/Y),Be=ao((R.y+(Re+pO(Re))/Za)/Y),Ke=j.project(Je,Be),nt=Re*Kl+je;Jl[2*nt+0]=Math.round((Ke.x*F.scale-F.x)*Ur),Jl[2*nt+1]=Math.round((Ke.y*F.scale-F.y)*Ur)}Ju.fill(0),yb.fill(0);for(let Re=2045;Re>=0;Re--){const je=4*Re,Je=Ku[je+0],Be=Ku[je+1],Ke=Ku[je+2],nt=Ku[je+3],tt=Je+Ke>>1,kt=Be+nt>>1,wt=tt+kt-Be,zt=kt+Je-tt,er=Be*Kl+Je,It=nt*Kl+Ke,$t=kt*Kl+tt,Ut=Math.hypot((Jl[2*er+0]+Jl[2*It+0])/2-Jl[2*$t+0],(Jl[2*er+1]+Jl[2*It+1])/2-Jl[2*$t+1])>=16;Ju[$t]=Ju[$t]||(Ut?1:0),Re<1022&&(Ju[$t]=Ju[$t]||Ju[(Be+zt>>1)*Kl+(Je+wt>>1)]||Ju[(nt+zt>>1)*Kl+(Ke+wt>>1)])}const te=new Ft,ne=new Lr;let ue=0;function fe(Re,je){const Je=je*Kl+Re;return yb[Je]===0&&(te.emplaceBack(Jl[2*Je+0],Jl[2*Je+1],Re*Ur/Za,je*Ur/Za),yb[Je]=++ue),yb[Je]-1}function be(Re,je,Je,Be,Ke,nt){const tt=Re+Je>>1,kt=je+Be>>1;if(Math.abs(Re-Ke)+Math.abs(je-nt)>1&&Ju[kt*Kl+tt])be(Ke,nt,Re,je,tt,kt),be(Je,Be,Ke,nt,tt,kt);else{const wt=fe(Re,je),zt=fe(Je,Be),er=fe(Ke,nt);ne.emplaceBack(wt,zt,er)}}return be(0,0,Za,Za,Za,0),be(Za,Za,0,0,0,Za),{vertices:te,indices:ne}}(this.tileID.canonical,u);x=E.vertices,w=E.indices}else{x=new Ft,w=new Lr;for(const{x:R,y:j}of p)x.emplaceBack(R,j,0,0);const E=Q2(x.int16,void 0,4);for(let R=0;R<E.length;R+=3)w.emplaceBack(E[R],E[R+1],E[R+2])}this._tileBoundsBuffer=i.createVertexBuffer(x,mO.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(w),this._tileBoundsSegments=fs.simpleSegment(0,0,x.length,w.length)}_makeGlobeTileDebugBuffers(i,u){const p=u.projection;if(!p||p.name!=="globe"||u.freezeTileCoverage)return;const x=this.tileID.canonical,w=ay(NM(x,u)),E=wp(u.zoom);let R;E>0&&(R=T2(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(i,x,u,w,R,E),this._makeGlobeTileDebugTextBuffer(i,x,u,w,R,E)}_globePoint(i,u,p,x,w,E,R){let j=oy(i,u,p);if(E){const F=1<<p.z,Y=Yl(x.center.lng),te=Zl(x.center.lat),ne=(p.x+.5)/F-Y;let ue=0;ne>.5?ue=-1:ne<-.5&&(ue=1);let fe=(i/Ur+p.x)/F+ue,be=(u/Ur+p.y)/F;fe=(fe-Y)*x._pixelsPerMercatorPixel+Y,be=(be-te)*x._pixelsPerMercatorPixel+te;const Re=[fe*x.worldSize,be*x.worldSize,0];as(Re,Re,E),j=Ld(j,Re,R)}return as(j,j,w)}_makeGlobeTileDebugBorderBuffer(i,u,p,x,w,E){const R=new Qt,j=new ia,F=new _t,Y=(ne,ue,fe,be,Re)=>{const je=(fe-ne)/(Re-1),Je=(be-ue)/(Re-1),Be=R.length;for(let Ke=0;Ke<Re;Ke++){const nt=ne+Ke*je,tt=ue+Ke*Je;R.emplaceBack(nt,tt);const kt=this._globePoint(nt,tt,u,p,x,w,E);F.emplaceBack(kt[0],kt[1],kt[2]),j.emplaceBack(Be+Ke)}},te=Ur;Y(0,0,te,0,16),Y(te,0,te,te,16),Y(te,te,0,te,16),Y(0,te,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(j),this._tileDebugBuffer=i.createVertexBuffer(R,iy.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(F,OM.members),this._tileDebugSegments=fs.simpleSegment(0,0,R.length,j.length)}_makeGlobeTileDebugTextBuffer(i,u,p,x,w,E){const R=Ur/4,j=new Qt,F=new Lr,Y=new _t,te=25;F.reserve(32),j.reserve(te),Y.reserve(te);const ne=(ue,fe)=>te*ue+fe;for(let ue=0;ue<te;ue++){const fe=ue*R;for(let be=0;be<te;be++){const Re=be*R;j.emplaceBack(Re,fe);const je=this._globePoint(Re,fe,u,p,x,w,E);Y.emplaceBack(je[0],je[1],je[2])}}for(let ue=0;ue<4;ue++)for(let fe=0;fe<4;fe++){const be=ne(ue,fe),Re=ne(ue,fe+1),je=ne(ue+1,fe),Je=ne(ue+1,fe+1);F.emplaceBack(be,Re,je),F.emplaceBack(je,Re,Je)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(F),this._tileDebugTextBuffer=i.createVertexBuffer(j,iy.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(Y,OM.members),this._tileDebugTextSegments=fs.simpleSegment(0,0,te,32)}}class FG{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const x=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][x]=this.stateChanges[i][x]||{},Vt(this.stateChanges[i][x],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const w in this.state[i])w!==x&&(this.deletedStates[i][w]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][x]===null){this.deletedStates[i][x]={};for(const w in this.state[i][x])p[w]||(this.deletedStates[i][x][w]=null)}else for(const w in p)this.deletedStates[i]&&this.deletedStates[i][x]&&this.deletedStates[i][x][w]===null&&delete this.deletedStates[i][x][w]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const x=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][x]!==null&&(this.deletedStates[i][x]=this.deletedStates[i][x]||{},this.deletedStates[i][x][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][x])for(p in this.deletedStates[i][x]={},this.stateChanges[i][x])this.deletedStates[i][x][p]=null;else this.deletedStates[i][x]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),x=Vt({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const w=this.deletedStates[i][u];if(w===null)return{};for(const E in w)delete x[E]}return x}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const w={};for(const E in this.stateChanges[x])this.state[x][E]||(this.state[x][E]={}),Vt(this.state[x][E],this.stateChanges[x][E]),w[E]=this.state[x][E];p[x]=w}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const w={};if(this.deletedStates[x]===null)for(const E in this.state[x])w[E]={},this.state[x][E]={};else for(const E in this.deletedStates[x]){if(this.deletedStates[x][E]===null)this.state[x][E]={};else if(this.state[x][E])for(const R of Object.keys(this.deletedStates[x][E]))delete this.state[x][E][R];w[E]=this.state[x][E]}p[x]=p[x]||{},Vt(p[x],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const x in i)i[x].setFeatureState(p,u)}}class yO{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,u){const p=this.toIdx(i,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(i,u){return this.leaves[this.toIdx(i,u)]}toIdx(i,u){return u*this.size+i}}function xO(a,i,u,p){let x=0,w=Number.MAX_VALUE;for(let E=0;E<3;E++)if(Math.abs(p[E])<1e-15){if(u[E]<a[E]||u[E]>i[E])return null}else{const R=1/p[E];let j=(a[E]-u[E])*R,F=(i[E]-u[E])*R;if(j>F){const Y=j;j=F,F=Y}if(j>x&&(x=j),F<w&&(w=F),x>w)return null}return x}function vO(a,i,u,p,x,w,E,R,j,F,Y){const te=p-a,ne=x-i,ue=w-u,fe=E-a,be=R-i,Re=j-u,je=Y[1]*Re-Y[2]*be,Je=Y[2]*fe-Y[0]*Re,Be=Y[0]*be-Y[1]*fe,Ke=te*je+ne*Je+ue*Be;if(Math.abs(Ke)<1e-15)return null;const nt=1/Ke,tt=F[0]-a,kt=F[1]-i,wt=F[2]-u,zt=(tt*je+kt*Je+wt*Be)*nt;if(zt<0||zt>1)return null;const er=kt*ue-wt*ne,It=wt*te-tt*ue,$t=tt*ne-kt*te,Ut=(Y[0]*er+Y[1]*It+Y[2]*$t)*nt;return Ut<0||zt+Ut>1?null:(fe*er+be*It+Re*$t)*nt}function bO(a,i,u){return(a-i)/(u-i)}function _O(a,i,u,p,x,w,E,R,j){const F=1<<u,Y=w-p,te=E-x,ne=(a+1)/F*Y+p,ue=(i+0)/F*te+x,fe=(i+1)/F*te+x;R[0]=(a+0)/F*Y+p,R[1]=ue,j[0]=ne,j[1]=fe}class wO{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(w){const E=Math.ceil(Math.log2(w.dim/8)),R=[];let j=Math.ceil(Math.pow(2,E));const F=1/j,Y=(ue,fe,be,Re,je)=>{const Je=Re?1:0,Be=(ue+1)*be-Je,Ke=fe*be,nt=(fe+1)*be-Je;je[0]=ue*be,je[1]=Ke,je[2]=Be,je[3]=nt};let te=new yO(j);const ne=[];for(let ue=0;ue<j*j;ue++){Y(ue%j,Math.floor(ue/j),F,!1,ne);const fe=Qu(ne[0],ne[1],w),be=Qu(ne[2],ne[1],w),Re=Qu(ne[2],ne[3],w),je=Qu(ne[0],ne[3],w);te.minimums.push(Math.min(fe,be,Re,je)),te.maximums.push(Math.max(fe,be,Re,je)),te.leaves.push(1)}for(R.push(te),j/=2;j>=1;j/=2){const ue=R[R.length-1];te=new yO(j);for(let fe=0;fe<j*j;fe++){Y(fe%j,Math.floor(fe/j),2,!0,ne);const be=ue.getElevation(ne[0],ne[1]),Re=ue.getElevation(ne[2],ne[1]),je=ue.getElevation(ne[2],ne[3]),Je=ue.getElevation(ne[0],ne[3]),Be=ue.isLeaf(ne[0],ne[1]),Ke=ue.isLeaf(ne[2],ne[1]),nt=ue.isLeaf(ne[2],ne[3]),tt=ue.isLeaf(ne[0],ne[3]),kt=Math.min(be.min,Re.min,je.min,Je.min),wt=Math.max(be.max,Re.max,je.max,Je.max),zt=Be&&Ke&&nt&&tt;te.maximums.push(wt),te.minimums.push(kt),te.leaves.push(wt-kt<=5&&zt?1:0)}R.push(te)}return R}(this.dem),p=u.length-1,x=u[p];this._addNode(x.minimums[0],x.maximums[0],x.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(i,u,p,x,w,E,R=1){return xO([i,u,-100],[p,x,this.maximums[0]*R],w,E)}raycast(i,u,p,x,w,E,R=1){if(!this.nodeCount)return null;const j=this.raycastRoot(i,u,p,x,w,E,R);if(j==null)return null;const F=[],Y=[],te=[],ne=[],ue=[{idx:0,t:j,nodex:0,nodey:0,depth:0}];for(;ue.length>0;){const{idx:fe,t:be,nodex:Re,nodey:je,depth:Je}=ue.pop();if(this.leaves[fe]){_O(Re,je,Je,i,u,p,x,te,ne);const Ke=1<<Je,nt=(Re+0)/Ke,tt=(Re+1)/Ke,kt=(je+0)/Ke,wt=(je+1)/Ke,zt=Qu(nt,kt,this.dem)*R,er=Qu(tt,kt,this.dem)*R,It=Qu(tt,wt,this.dem)*R,$t=Qu(nt,wt,this.dem)*R,Ut=vO(te[0],te[1],zt,ne[0],te[1],er,ne[0],ne[1],It,w,E),Yt=vO(ne[0],ne[1],It,te[0],ne[1],$t,te[0],te[1],zt,w,E),lr=Math.min(Ut!==null?Ut:Number.MAX_VALUE,Yt!==null?Yt:Number.MAX_VALUE);if(lr!==Number.MAX_VALUE)return lr;{const Lt=ry([],w,E,be);if(SO(zt,er,$t,It,bO(Lt[0],te[0],ne[0]),bO(Lt[1],te[1],ne[1]))>=Lt[2])return be}continue}let Be=0;for(let Ke=0;Ke<this._siblingOffset.length;Ke++){_O((Re<<1)+this._siblingOffset[Ke][0],(je<<1)+this._siblingOffset[Ke][1],Je+1,i,u,p,x,te,ne),te[2]=-100,ne[2]=this.maximums[this.childOffsets[fe]+Ke]*R;const nt=xO(te,ne,w,E);if(nt!=null){const tt=nt;F[Ke]=tt;let kt=!1;for(let wt=0;wt<Be&&!kt;wt++)tt>=F[Y[wt]]&&(Y.splice(wt,0,Ke),kt=!0);kt||(Y[Be]=Ke),Be++}}for(let Ke=0;Ke<Be;Ke++){const nt=Y[Ke];ue.push({idx:this.childOffsets[fe]+nt,t:F[nt],nodex:(Re<<1)+this._siblingOffset[nt][0],nodey:(je<<1)+this._siblingOffset[nt][1],depth:Je+1})}}return null}_addNode(i,u,p){return this.minimums.push(i),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(i,u,p,x,w){if(i[x].isLeaf(u,p)===1)return;this.childOffsets[w]||(this.childOffsets[w]=this.nodeCount);const E=x-1,R=i[E];let j=0,F=0;for(let Y=0;Y<this._siblingOffset.length;Y++){const te=2*u+this._siblingOffset[Y][0],ne=2*p+this._siblingOffset[Y][1],ue=R.getElevation(te,ne),fe=R.isLeaf(te,ne),be=this._addNode(ue.min,ue.max,fe);fe&&(j|=1<<Y),F||(F=be)}for(let Y=0;Y<this._siblingOffset.length;Y++)j&1<<Y||this._construct(i,2*u+this._siblingOffset[Y][0],2*p+this._siblingOffset[Y][1],E,F+Y)}}function SO(a,i,u,p,x,w){return Ln(Ln(a,u,w),Ln(i,p,w),x)}function Qu(a,i,u){const p=u.dim,x=mt(a*p-.5,0,p-1),w=mt(i*p-.5,0,p-1),E=Math.floor(x),R=Math.floor(w),j=Math.min(E+1,p-1),F=Math.min(R+1,p-1);return SO(u.get(E,R),u.get(j,R),u.get(E,F),u.get(j,F),x-E,w-R)}const CO={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function BG(a,i,u){return(256*a*256+256*i+u)/10-1e4}function $G(a,i,u){return 256*a+i+u/256-32768}class xb{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,u,p,x=!1,w=!1){if(this.uid=i,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return on(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const E=this.dim=u.height-2,R=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.encoding=p||"mapbox",this.borderReady=x,!x){for(let j=0;j<E;j++)R[this._idx(-1,j)]=R[this._idx(0,j)],R[this._idx(E,j)]=R[this._idx(E-1,j)],R[this._idx(j,-1)]=R[this._idx(j,0)],R[this._idx(j,E)]=R[this._idx(j,E-1)];R[this._idx(-1,-1)]=R[this._idx(0,0)],R[this._idx(E,-1)]=R[this._idx(E-1,0)],R[this._idx(-1,E)]=R[this._idx(0,E-1)],R[this._idx(E,E)]=R[this._idx(E-1,E-1)],w&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new wO(this)}get(i,u,p=!1){p&&(i=mt(i,-1,this.dim),u=mt(u,-1,this.dim));const x=4*this._idx(i,u);return(this.encoding==="terrarium"?$G:BG)(this.pixels[x],this.pixels[x+1],this.pixels[x+2])}static getUnpackVector(i){return CO[i]}get unpackVector(){return CO[this.encoding]}_idx(i,u){if(i<-1||i>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(i+1)}static pack(i,u){const p=[0,0,0,0],x=xb.getUnpackVector(u);let w=Math.floor((i+x[3])/x[2]);return p[2]=w%256,w=Math.floor(w/256),p[1]=w%256,w=Math.floor(w/256),p[0]=w,p}getPixels(){return new oa({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,u,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let x=u*this.dim,w=u*this.dim+this.dim,E=p*this.dim,R=p*this.dim+this.dim;switch(u){case-1:x=w-1;break;case 1:w=x+1}switch(p){case-1:E=R-1;break;case 1:R=E+1}const j=-u*this.dim,F=-p*this.dim;for(let Y=E;Y<R;Y++)for(let te=x;te<w;te++){const ne=4*this._idx(te,Y),ue=4*this._idx(te+j,Y+F);this.pixels[ne+0]=i.pixels[ue+0],this.pixels[ne+1]=i.pixels[ue+1],this.pixels[ne+2]=i.pixels[ue+2],this.pixels[ne+3]=i.pixels[ue+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ar(xb,"DEMData"),Ar(wO,"DemMinMaxQuadTree",{omit:["dem"]});class UG{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const x=i.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const w={value:u,timeout:void 0};if(p!==void 0&&(w.timeout=setTimeout(()=>{this.remove(i,w)},p)),this.data[x].push(w),this.order.push(x),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,x=u===void 0?0:this.data[p].indexOf(u),w=this.data[p][x];return this.data[p].splice(x,1),w.timeout&&clearTimeout(w.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(w.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const x of this.data[p])i(x.value)||u.push(x);for(const p of u)this.remove(p.value.tileID,p)}}class Np{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}Np.ReadOnly=!1,Np.ReadWrite=!0,Np.disabled=new Np(519,Np.ReadOnly,[0,1]);const bC=7680;class _C{constructor(i,u,p,x,w,E){this.test=i,this.ref=u,this.mask=p,this.fail=x,this.depthFail=w,this.pass=E}}_C.disabled=new _C({func:519,mask:0},0,0,bC,bC,bC);class Ql{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}Ql.Replace=[1,0],Ql.disabled=new Ql(Ql.Replace,$r.transparent,[!1,!1,!1,!1]),Ql.unblended=new Ql(Ql.Replace,$r.transparent,[!0,!0,!0,!0]),Ql.alphaBlended=new Ql([1,771],$r.transparent,[!0,!0,!0,!0]);const wC=1029,SC=2305;class Sl{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}Sl.disabled=new Sl(!1,wC,SC),Sl.backCCW=new Sl(!0,wC,SC),Sl.backCW=new Sl(!0,wC,2304),Sl.frontCW=new Sl(!0,1028,2304),Sl.frontCCW=new Sl(!0,1028,SC);class jd extends H{constructor(i,u,p){super(),this.id=i,this._onlySymbols=p,u.on("data",x=>{x.dataType==="source"&&x.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new UG(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new FG,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,u){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return ut(this._tiles).map(i=>i.tileID).sort(kO).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(+p,i)&&u.push(this._tiles[p]);return i?u.sort((p,x)=>{const w=p.tileID,E=x.tileID,R=new Pe(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),j=new Pe(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-E.overscaledZ||j.y-R.y||j.x-R.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(kO).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,x){if(x)if(i.state="errored",x.status!==404)this._source.fire(new $(x,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=S.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new z("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const u=this.getRenderableIds();for(let x=0;x<u.length;x++){const w=u[x];if(i.neighboringTiles&&i.neighboringTiles[w]){const E=this.getTileByID(w);p(i,E),p(E,i)}}function p(x,w){if(!x.dem||x.dem.borderReady)return;x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0;let E=w.tileID.canonical.x-x.tileID.canonical.x;const R=w.tileID.canonical.y-x.tileID.canonical.y,j=Math.pow(2,x.tileID.canonical.z),F=w.tileID.key;E===0&&R===0||Math.abs(R)>1||(Math.abs(E)>1&&(Math.abs(E+j)===1?E+=j:Math.abs(E-j)===1&&(E-=j)),w.dem&&x.dem&&(x.dem.backfillBorder(w.dem,E,R),x.neighboringTiles&&x.neighboringTiles[F]&&(x.neighboringTiles[F].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,x){for(const w in this._tiles){let E=this._tiles[w];if(x[w]||!E.hasData()||E.tileID.overscaledZ<=u||E.tileID.overscaledZ>p)continue;let R=E.tileID;for(;E&&E.tileID.overscaledZ>u+1;){const F=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[F.key],E&&E.hasData()&&(R=F)}let j=R;for(;j.overscaledZ>u;)if(j=j.scaledTo(j.overscaledZ-1),i[j.key]){x[R.key]=R;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const x=i.scaledTo(p),w=this._getLoadedTile(x);if(w)return w}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,u){u=u||this._source.tileSize;const p=Math.ceil(i.width/u)+1,x=Math.ceil(i.height/u)+1,w=Math.floor(p*x*5),E=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,w):w,R=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,E):E;this._cache.setMaxSize(R)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const x in this._tiles){const w=this._tiles[x];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),p[w.tileID.key]=w}this._tiles=p;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(+x,this._tiles[x])}}update(i,u,p){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!p)return;let x;this.updateCacheSize(i,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?x=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new Ao(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(x=i.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!p,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(x=x.filter(R=>this._source.hasTile(R)))):x=[];const w=this._updateRetainedTiles(x);if(EO(this._source.type)&&x.length!==0){const R={},j={},F=Object.keys(w);for(const te of F){const ne=w[te],ue=this._tiles[te];if(!ue||ue.fadeEndTime&&ue.fadeEndTime<=S.now())continue;const fe=this.findLoadedParent(ne,Math.max(ne.overscaledZ-jd.maxOverzooming,this._source.minzoom));fe&&(this._addTile(fe.tileID),R[fe.tileID.key]=fe.tileID),j[te]=ne}const Y=x[x.length-1].overscaledZ;for(const te in this._tiles){const ne=this._tiles[te];if(w[te]||!ne.hasData())continue;let ue=ne.tileID;for(;ue.overscaledZ>Y;){ue=ue.scaledTo(ue.overscaledZ-1);const fe=this._tiles[ue.key];if(fe&&fe.hasData()&&j[ue.key]){w[te]=ne.tileID;break}}}for(const te in R)w[te]||(this._coveredTiles[te]=!0,w[te]=R[te])}for(const R in w)this._tiles[R].clearFadeHold();const E=function(R,j){const F=[];for(const Y in R)Y in j||F.push(Y);return F}(this._tiles,w);for(const R of E){const j=this._tiles[R];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(+R)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const u={};if(i.length===0)return u;const p={},x=i.reduce((F,Y)=>Math.min(F,Y.overscaledZ),1/0),w=i[0].overscaledZ,E=Math.max(w-jd.maxOverzooming,this._source.minzoom),R=Math.max(w+jd.maxUnderzooming,this._source.minzoom),j={};for(const F of i){const Y=this._addTile(F);u[F.key]=F,Y.hasData()||x<this._source.maxzoom&&(j[F.key]=F)}this._retainLoadedChildren(j,x,R,u);for(const F of i){let Y=this._tiles[F.key];if(Y.hasData())continue;if(F.canonical.z>=this._source.maxzoom){const ne=F.children(this._source.maxzoom)[0],ue=this.getTile(ne);if(ue&&ue.hasData()){u[ne.key]=ne;continue}}else{const ne=F.children(this._source.maxzoom);if(u[ne[0].key]&&u[ne[1].key]&&u[ne[2].key]&&u[ne[3].key])continue}let te=Y.wasRequested();for(let ne=F.overscaledZ-1;ne>=E;--ne){const ue=F.scaledTo(ne);if(p[ue.key]||(p[ue.key]=!0,Y=this.getTile(ue),!Y&&te&&(Y=this._addTile(ue)),Y&&(u[ue.key]=ue,te=Y.wasRequested(),Y.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,x=this._tiles[i].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){p=this._loadedParentTiles[x.key];break}u.push(x.key);const w=x.scaledTo(x.overscaledZ-1);if(p=this._getLoadedTile(w),p)break;x=w}for(const w of u)this._loadedParentTiles[w]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=!!u;if(!p){const x=this.map?this.map.painter:null;u=new vC(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,x,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))}return u?(u.uses++,this._tiles[i.key]=u,p||this._source.fire(new z("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,u,p){const x=[],w=this.transform;if(!w)return x;const E=w.projection.name==="globe",R=Yl(w.center.lng);for(const j in this._tiles){const F=this._tiles[j];if(p&&F.clearQueryDebugViz(),F.holdingForFade())continue;let Y;if(E){const te=F.tileID.canonical;if(te.z===0){const ne=[Math.abs(mt(R,...Ty(te,-1))-R),Math.abs(mt(R,...Ty(te,1))-R)];Y=[0,2*ne.indexOf(Math.min(...ne))-1]}else{const ne=[Math.abs(mt(R,...Ty(te,-1))-R),Math.abs(mt(R,...Ty(te,0))-R),Math.abs(mt(R,...Ty(te,1))-R)];Y=[ne.indexOf(Math.min(...ne))-1]}}else Y=[0];for(const te of Y){const ne=i.containsTile(F,w,u,te);ne&&x.push(ne)}}return x}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.projMatrix=this.transform.calculateProjMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(EO(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=S.now())return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const x=this._tiles[i];x&&x.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(+p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}_preloadTiles(i,u){if(!this._sourceLoaded){const R=()=>{this._sourceLoaded&&(this._source.off("data",R),this._preloadTiles(i,u))};return void this._source.on("data",R)}const p=new Map,x=Array.isArray(i)?i:[i],w=this.map.painter.terrain,E=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const R of x){const j=R.coveringTiles({tileSize:E,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const F of j)p.set(F.key,F);this.usedForTerrain&&R.updateElevation(!1)}Ot(Array.from(p.values()),(R,j)=>{const F=new vC(R,this._source.tileSize*R.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(F,Y=>{this._source.type==="raster-dem"&&F.dem&&this._backfillDEM(F),j(Y,F)})},u)}}function kO(a,i){const u=Math.abs(2*a.wrap)-+(a.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return a.overscaledZ-i.overscaledZ||p-u||i.canonical.y-a.canonical.y||i.canonical.x-a.canonical.x}function EO(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function Ty(a,i){const u=1<<a.z;return[a.x/u+i,(a.x+1)/u+i]}jd.maxOverzooming=10,jd.maxUnderzooming=3;class vb{constructor(i,u,p){this._demTile=i,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(i,u,p){const x=p||i.findDEMTileFor(u);if(!x||!x.dem)return;const w=x.dem,E=x.tileID,R=1<<u.canonical.z-E.canonical.z;return new vb(x,x.tileSize/Ur/R,[(u.canonical.x/R-E.canonical.x)*w.dim,(u.canonical.y/R-E.canonical.y)*w.dim])}tileCoordToPixel(i,u){const p=u*this._scale+this._offset[1],x=Math.floor(i*this._scale+this._offset[0]),w=Math.floor(p);return new Pe(x,w)}getElevationAt(i,u,p,x){const w=i*this._scale+this._offset[0],E=u*this._scale+this._offset[1],R=Math.floor(w),j=Math.floor(E),F=this._dem;return x=!!x,p?Ln(Ln(F.get(R,j,x),F.get(R,j+1,x),E-j),Ln(F.get(R+1,j,x),F.get(R+1,j+1,x),E-j),w-R):F.get(R,j,x)}getElevationAtPixel(i,u,p){return this._dem.get(i,u,!!p)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*bl(1,i)*this._dem.stride}}class TO{constructor(i,u){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Dc(Ur,16,0),this.featureIndexArray=new Ed,this.promoteId=u}insert(i,u,p,x,w,E=0){const R=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,x,w,E);const j=this.grid;for(let F=0;F<u.length;F++){const Y=u[F],te=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<Y.length;ne++){const ue=Y[ne];te[0]=Math.min(te[0],ue.x),te[1]=Math.min(te[1],ue.y),te[2]=Math.max(te[2],ue.x),te[3]=Math.max(te[3],ue.y)}te[0]<Ur&&te[1]<Ur&&te[2]>=0&&te[3]>=0&&j.insert(R,te[0],te[1],te[2],te[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new nC(new sb(this.rawTileData)).layers,this.sourceLayerCoder=new dO(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,u,p,x){this.loadVTLayers();const w=i.params||{},E=dp(w.filter),R=i.tileResult,j=i.transform,F=R.bufferedTilespaceBounds,Y=this.grid.query(F.min.x,F.min.y,F.max.x,F.max.y,(fe,be,Re,je)=>JM(R.bufferedTilespaceGeometry,fe,be,Re,je));Y.sort(VG);let te=null;j.elevation&&Y.length>0&&(te=vb.create(j.elevation,this.tileID));const ne={};let ue;for(let fe=0;fe<Y.length;fe++){const be=Y[fe];if(be===ue)continue;ue=be;const Re=this.featureIndexArray.get(be);let je=null;this.loadMatchingFeature(ne,Re,E,w.layers,w.availableImages,u,p,x,(Je,Be,Ke,nt=0)=>(je||(je=Uc(Je,this.tileID.canonical,i.tileTransform)),Be.queryIntersectsFeature(R,Je,Ke,je,this.z,i.transform,i.pixelPosMatrix,te,nt)))}return ne}loadMatchingFeature(i,u,p,x,w,E,R,j,F){const{featureIndex:Y,bucketIndex:te,sourceLayerIndex:ne,layoutVertexArrayOffset:ue}=u,fe=this.bucketLayerIDs[te];if(x&&!function(Je,Be){for(let Ke=0;Ke<Je.length;Ke++)if(Be.indexOf(Je[Ke])>=0)return!0;return!1}(x,fe))return;const be=this.sourceLayerCoder.decode(ne),Re=this.vtLayers[be].feature(Y);if(p.needGeometry){const Je=Od(Re,!0);if(!p.filter(new J(this.tileID.overscaledZ),Je,this.tileID.canonical))return}else if(!p.filter(new J(this.tileID.overscaledZ),Re))return;const je=this.getId(Re,be);for(let Je=0;Je<fe.length;Je++){const Be=fe[Je];if(x&&x.indexOf(Be)<0)continue;const Ke=E[Be];if(!Ke)continue;let nt={};je!==void 0&&j&&(nt=j.getState(Ke.sourceLayer||"_geojsonTileLayer",je));const tt=Vt({},R[Be]);tt.paint=AO(tt.paint,Ke.paint,Re,nt,w),tt.layout=AO(tt.layout,Ke.layout,Re,nt,w);const kt=!F||F(Re,Ke,nt,ue);if(!kt)continue;const wt=new fO(Re,this.z,this.x,this.y,je);wt.layer=tt;let zt=i[Be];zt===void 0&&(zt=i[Be]=[]),zt.push({featureIndex:Y,feature:wt,intersectionZ:kt})}}lookupSymbolFeatures(i,u,p,x,w,E,R,j){const F={};this.loadVTLayers();const Y=dp(w);for(const te of i)this.loadMatchingFeature(F,{bucketIndex:p,sourceLayerIndex:x,featureIndex:te,layoutVertexArrayOffset:0},Y,E,R,j,u);return F}loadFeature(i){const{featureIndex:u,sourceLayerIndex:p}=i;this.loadVTLayers();const x=this.sourceLayerCoder.decode(p),w=this.vtFeatures[x];if(w[u])return w[u];const E=this.vtLayers[x].feature(u);return w[u]=E,E}hasLayer(i){for(const u of this.bucketLayerIDs)for(const p of u)if(i===p)return!0;return!1}getId(i,u){let p=i.id;if(this.promoteId){const x=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];x!=null&&(p=i.properties[x]),typeof p=="boolean"&&(p=Number(p))}return p}}function AO(a,i,u,p,x){return mr(a,(w,E)=>{const R=i instanceof Ne?i.get(E):null;return R&&R.evaluate?R.evaluate(u,p,x):R})}function VG(a,i){return i-a}Ar(TO,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class IO{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.image=new Vc({width:i,height:u}),this.positions={},this.uploaded=!1}getDash(i,u){const p=this.getKey(i,u);return this.positions[p]}trim(){const i=this.width,u=this.height=ur(this.nextRow);this.image.resize({width:i,height:u})}getKey(i,u){return i.join(",")+u}getDashRanges(i,u,p){const x=[];let w=i.length%2==1?-i[i.length-1]*p:0,E=i[0]*p,R=!0;x.push({left:w,right:E,isDash:R,zeroLength:i[0]===0});let j=i[0];for(let F=1;F<i.length;F++){R=!R;const Y=i[F];w=j*p,j+=Y,E=j*p,x.push({left:w,right:E,isDash:R,zeroLength:Y===0})}return x}addRoundDash(i,u,p){const x=u/2;for(let w=-p;w<=p;w++){const E=this.width*(this.nextRow+p+w);let R=0,j=i[R];for(let F=0;F<this.width;F++){F/j.right>1&&(j=i[++R]);const Y=Math.abs(F-j.left),te=Math.abs(F-j.right),ne=Math.min(Y,te);let ue;const fe=w/p*(x+1);if(j.isDash){const be=x-Math.abs(fe);ue=Math.sqrt(ne*ne+be*be)}else ue=x-Math.sqrt(ne*ne+fe*fe);this.image.data[E+F]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(i,u){for(let j=i.length-1;j>=0;--j){const F=i[j],Y=i[j+1];F.zeroLength?i.splice(j,1):Y&&Y.isDash===F.isDash&&(Y.left=F.left,i.splice(j,1))}const p=i[0],x=i[i.length-1];p.isDash===x.isDash&&(p.left=x.left-this.width,x.right=p.right+this.width);const w=this.width*this.nextRow;let E=0,R=i[E];for(let j=0;j<this.width;j++){j/R.right>1&&(R=i[++E]);const F=Math.abs(j-R.left),Y=Math.abs(j-R.right),te=Math.min(F,Y);this.image.data[w+j]=Math.max(0,Math.min(255,(R.isDash?te:-te)+u+128))}}addDash(i,u){const p=this.getKey(i,u);if(this.positions[p])return this.positions[p];const x=u==="round",w=x?7:0,E=2*w+1;if(this.nextRow+E>this.height)return on("LineAtlas out of space"),null;i.length===0&&i.push(1);let R=0;for(let Y=0;Y<i.length;Y++)i[Y]<0&&(on("Negative value is found in line dasharray, replacing values with 0"),i[Y]=0),R+=i[Y];if(R!==0){const Y=this.width/R,te=this.getDashRanges(i,this.width,Y);x?this.addRoundDash(te,Y,w):this.addRegularDash(te,u==="square"?.5*Y:0)}const j=this.nextRow+w;this.nextRow+=E;const F={tl:[j,w],br:[R,0]};return this.positions[p]=F,F}}Ar(IO,"LineAtlas");const PO=1*wl;class RO{constructor(i){const u={},p=[];for(const R in i){const j=i[R],F=u[R]={};for(const Y in j.glyphs){const te=j.glyphs[+Y];if(!te||te.bitmap.width===0||te.bitmap.height===0)continue;const ne=te.metrics.localGlyph?PO:1,ue={x:0,y:0,w:te.bitmap.width+2*ne,h:te.bitmap.height+2*ne};p.push(ue),F[Y]=ue}}const{w:x,h:w}=aC(p),E=new Vc({width:x||1,height:w||1});for(const R in i){const j=i[R];for(const F in j.glyphs){const Y=j.glyphs[+F];if(!Y||Y.bitmap.width===0||Y.bitmap.height===0)continue;const te=u[R][F],ne=Y.metrics.localGlyph?PO:1;Vc.copy(Y.bitmap,E,{x:0,y:0},{x:te.x+ne,y:te.y+ne},Y.bitmap)}}this.image=E,this.positions=u}}Ar(RO,"GlyphAtlas");class HG{constructor(i){this.tileID=new Ao(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=Nd(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,u,p,x,w){this.status="parsing",this.data=i,this.collisionBoxArray=new li;const E=new dO(Object.keys(i.layers).sort()),R=new TO(this.tileID,this.promoteId);R.bucketLayerIDs=[];const j={},F=new IO(256,256),Y={featureIndex:R,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:F,availableImages:p},te=u.familiesBySource[this.source];for(const nt in te){const tt=i.layers[nt];if(!tt)continue;let kt=!1,wt=!1;for(const It of te[nt])It[0].type==="symbol"?kt=!0:wt=!0;if(this.isSymbolTile===!0&&!kt||this.isSymbolTile===!1&&!wt)continue;tt.version===1&&on(`Vector tile source "${this.source}" layer "${nt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zt=E.encode(nt),er=[];for(let It=0;It<tt.length;It++){const $t=tt.feature(It),Ut=R.getId($t,nt);er.push({feature:$t,id:Ut,index:It,sourceLayerIndex:zt})}for(const It of te[nt]){const $t=It[0];this.isSymbolTile!==void 0&&$t.type==="symbol"!==this.isSymbolTile||$t.minzoom&&this.zoom<Math.floor($t.minzoom)||$t.maxzoom&&this.zoom>=$t.maxzoom||$t.visibility!=="none"&&(CC(It,this.zoom,p),(j[$t.id]=$t.createBucket({index:R.bucketLayerIDs.length,layers:It,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:p})).populate(er,Y,this.tileID.canonical,this.tileTransform),R.bucketLayerIDs.push(It.map(Ut=>Ut.id)))}}let ne,ue,fe,be;F.trim();const Re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},je=()=>{if(ne)return w(ne);if(ue&&fe&&be){const nt=new RO(ue),tt=new jL(fe,be);for(const kt in j){const wt=j[kt];wt instanceof Zu?(CC(wt.layers,this.zoom,p),gG(wt,ue,nt.positions,fe,tt.iconPositions,this.showCollisionBoxes,p,this.tileID.canonical,this.tileZoom,this.projection)):wt.hasPattern&&(wt instanceof rb||wt instanceof K0||wt instanceof my)&&(CC(wt.layers,this.zoom,p),wt.addFeatures(Y,this.tileID.canonical,tt.patternPositions,p,this.tileTransform))}this.status="done",w(null,{buckets:ut(j).filter(kt=>!kt.isEmpty()),featureIndex:R,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nt.image,lineAtlas:F,imageAtlas:tt,glyphMap:this.returnDependencies?ue:null,iconMap:this.returnDependencies?fe:null,glyphPositions:this.returnDependencies?nt.positions:null})}},Je=mr(Y.glyphDependencies,nt=>Object.keys(nt).map(Number));Object.keys(Je).length?x.send("getGlyphs",{uid:this.uid,stacks:Je},(nt,tt)=>{ne||(ne=nt,ue=tt,je())},void 0,!1,Re):ue={};const Be=Object.keys(Y.iconDependencies);Be.length?x.send("getImages",{icons:Be,source:this.source,tileID:this.tileID,type:"icons"},(nt,tt)=>{ne||(ne=nt,fe=tt,je())},void 0,!1,Re):fe={};const Ke=Object.keys(Y.patternDependencies);Ke.length?x.send("getImages",{icons:Ke,source:this.source,tileID:this.tileID,type:"patterns"},(nt,tt)=>{ne||(ne=nt,be=tt,je())},void 0,!1,Re):be={},je()}}function CC(a,i,u){const p=new J(i);for(const x of a)x.recalculate(p,u)}class MO{constructor(i){this.entries={},this.scheduler=i}request(i,u,p,x){const w=this.entries[i]=this.entries[i]||{callbacks:[]};if(w.result){const[E,R]=w.result;return this.scheduler?this.scheduler.add(()=>{x(E,R)},u):x(E,R),()=>{}}return w.callbacks.push(x),w.cancel||(w.cancel=p((E,R)=>{w.result=[E,R];for(const j of w.callbacks)this.scheduler?this.scheduler.add(()=>{j(E,R)},u):j(E,R);setTimeout(()=>delete this.entries[i],3e3)})),()=>{w.result||(w.callbacks=w.callbacks.filter(E=>E!==x),w.callbacks.length||(w.cancel(),delete this.entries[i]))}}}function LO(a,i,u){const p=JSON.stringify(a.request);return a.data&&(this.deduped.entries[p]={result:[null,a.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},x=>{const w=is(a.request,(E,R,j,F)=>{E?x(E):R&&x(null,{vectorTile:u?void 0:new nC(new sb(R)),rawData:R,cacheControl:j,expires:F})});return()=>{w.cancel(),x()}},i)}const OO=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kC{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(i,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=p>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const w=OO[15&p];if(!w)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(i,2,1),[R]=new Uint32Array(i,4,1);return new kC(R,E,w,i)}constructor(i,u=64,p=Float64Array,x){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const w=OO.indexOf(this.ArrayType),E=2*i*this.ArrayType.BYTES_PER_ELEMENT,R=i*this.IndexArrayType.BYTES_PER_ELEMENT,j=(8-R%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${p}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+R+j,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+E+R+j),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+R+j,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=i)}add(i,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=u,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return EC(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,u,p,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:E,nodeSize:R}=this,j=[0,w.length-1,0],F=[];for(;j.length;){const Y=j.pop()||0,te=j.pop()||0,ne=j.pop()||0;if(te-ne<=R){for(let Re=ne;Re<=te;Re++){const je=E[2*Re],Je=E[2*Re+1];je>=i&&je<=p&&Je>=u&&Je<=x&&F.push(w[Re])}continue}const ue=ne+te>>1,fe=E[2*ue],be=E[2*ue+1];fe>=i&&fe<=p&&be>=u&&be<=x&&F.push(w[ue]),(Y===0?i<=fe:u<=be)&&(j.push(ne),j.push(ue-1),j.push(1-Y)),(Y===0?p>=fe:x>=be)&&(j.push(ue+1),j.push(te),j.push(1-Y))}return F}within(i,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:E}=this,R=[0,x.length-1,0],j=[],F=p*p;for(;R.length;){const Y=R.pop()||0,te=R.pop()||0,ne=R.pop()||0;if(te-ne<=E){for(let Re=ne;Re<=te;Re++)zO(w[2*Re],w[2*Re+1],i,u)<=F&&j.push(x[Re]);continue}const ue=ne+te>>1,fe=w[2*ue],be=w[2*ue+1];zO(fe,be,i,u)<=F&&j.push(x[ue]),(Y===0?i-p<=fe:u-p<=be)&&(R.push(ne),R.push(ue-1),R.push(1-Y)),(Y===0?i+p>=fe:u+p>=be)&&(R.push(ue+1),R.push(te),R.push(1-Y))}return j}}function EC(a,i,u,p,x,w){if(x-p<=u)return;const E=p+x>>1;DO(a,i,E,p,x,w),EC(a,i,u,p,E-1,1-w),EC(a,i,u,E+1,x,1-w)}function DO(a,i,u,p,x,w){for(;x>p;){if(x-p>600){const F=x-p+1,Y=u-p+1,te=Math.log(F),ne=.5*Math.exp(2*te/3),ue=.5*Math.sqrt(te*ne*(F-ne)/F)*(Y-F/2<0?-1:1);DO(a,i,u,Math.max(p,Math.floor(u-Y*ne/F+ue)),Math.min(x,Math.floor(u+(F-Y)*ne/F+ue)),w)}const E=i[2*u+w];let R=p,j=x;for(Ay(a,i,p,u),i[2*x+w]>E&&Ay(a,i,p,x);R<j;){for(Ay(a,i,R,j),R++,j--;i[2*R+w]<E;)R++;for(;i[2*j+w]>E;)j--}i[2*p+w]===E?Ay(a,i,p,j):(j++,Ay(a,i,j,x)),j<=u&&(p=j+1),u<=j&&(x=j-1)}}function Ay(a,i,u,p){TC(a,u,p),TC(i,2*u,2*p),TC(i,2*u+1,2*p+1)}function TC(a,i,u){const p=a[i];a[i]=a[u],a[u]=p}function zO(a,i,u,p){const x=a-u,w=i-p;return x*x+w*w}s.ARRAY_TYPE=sa,s.AUTH_ERR_MSG=Qe,s.Aabb=To,s.Actor=class{constructor(a,i,u){this.target=a,this.parent=i,this.mapId=u,this.callbacks={},this.cancelCallbacks={},fr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Kr()?a:k,this.scheduler=new NG}send(a,i,u,p,x=!1,w){const E=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(u.metadata=w,this.callbacks[E]=u);const R=Hi(this.globalScope)?void 0:[];return this.target.postMessage({id:E,type:a,hasCallback:!!u,targetMapId:p,mustQueue:x,sourceMapId:this.mapId,data:Uu(i,R)},R),{cancel:()=>{u&&delete this.callbacks[E],this.target.postMessage({id:E,type:"<cancel>",targetMapId:p,sourceMapId:this.mapId})}}}receive(a){const i=a.data,u=i.id;if(u&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const p=this.cancelCallbacks[u];delete this.cancelCallbacks[u],p&&p.cancel()}else if(i.mustQueue||Kr()){const p=this.callbacks[u];this.cancelCallbacks[u]=this.scheduler.add(()=>this.processTask(u,i),p&&p.metadata||{type:"message"})}else this.processTask(u,i)}processTask(a,i){if(i.type==="<response>"){const u=this.callbacks[a];delete this.callbacks[a],u&&(i.error?u(zc(i.error)):u(null,zc(i.data)))}else{const u=Hi(this.globalScope)?void 0:[],p=i.hasCallback?(w,E)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:w?Uu(w):null,data:Uu(E,u)},u)}:w=>{},x=zc(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,x,p);else if(this.parent.getWorkerSource){const w=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,w[0],x.source)[w[1]](x,p)}else p(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=tb,s.Color=$r,s.ColorMode=Ql,s.CullFaceMode=Sl,s.DEMData=xb,s.DataConstantProperty=ge,s.DedupedRequest=MO,s.DepthMode=Np,s.EXTENT=Ur,s.Elevation=class{isDataAvailableAtPoint(a){const i=this._source();if(this.isUsingMockSource()||!i||a.y<0||a.y>1)return!1;const u=i.getSource().maxzoom,p=1<<u,x=Math.floor(a.x),w=Math.floor((a.x-x)*p),E=Math.floor(a.y*p),R=this.findDEMTileFor(new Ao(u,x,u,w,E));return!(!R||!R.dem)}getAtPointOrZero(a,i=0){return this.getAtPoint(a,i)||0}getAtPoint(a,i,u=!0){if(this.isUsingMockSource())return null;i==null&&(i=null);const p=this._source();if(!p||a.y<0||a.y>1)return i;const x=p.getSource().maxzoom,w=1<<x,E=Math.floor(a.x),R=a.x-E,j=new Ao(x,E,x,Math.floor(R*w),Math.floor(a.y*w)),F=this.findDEMTileFor(j);if(!F||!F.dem)return i;const Y=F.dem,te=1<<F.tileID.canonical.z,ne=(R*te-F.tileID.canonical.x)*Y.dim,ue=(a.y*te-F.tileID.canonical.y)*Y.dim,fe=Math.floor(ne),be=Math.floor(ue);return(u?this.exaggeration():1)*Ln(Ln(Y.get(fe,be),Y.get(fe,be+1),ue-be),Ln(Y.get(fe+1,be),Y.get(fe+1,be+1),ue-be),ne-fe)}getAtTileOffset(a,i,u){const p=1<<a.canonical.z;return this.getAtPointOrZero(new Sp(a.wrap+(a.canonical.x+i/Ur)/p,(a.canonical.y+u/Ur)/p))}getAtTileOffsetFunc(a,i,u,p){return x=>{const w=this.getAtTileOffset(a,x.x,x.y),E=p.upVector(a.canonical,x.x,x.y);return Sa(E,E,w*p.upVectorScale(a.canonical,i,u).metersToTile),E}}getForTilePoints(a,i,u,p){if(this.isUsingMockSource())return!1;const x=vb.create(this,a,p);return!!x&&(i.forEach(w=>{w[2]=this.exaggeration()*x.getElevationAt(w[0],w[1],u)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const i=this.findDEMTileFor(a);if(!i||!i.dem)return null;const u=i.dem.tree,p=i.tileID,x=1<<a.canonical.z-p.canonical.z;let w=a.canonical.x/x-p.canonical.x,E=a.canonical.y/x-p.canonical.y,R=0;for(let j=0;j<a.canonical.z-p.canonical.z&&!u.leaves[R];j++){w*=2,E*=2;const F=2*Math.floor(E)+Math.floor(w);R=u.childOffsets[R]+F,w%=1,E%=1}return{min:this.exaggeration()*u.minimums[R],max:this.exaggeration()*u.maximums[R]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,i,u){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=$,s.EvaluationParameters=J,s.Event=z,s.Evented=H,s.FillExtrusionBucket=my,s.Frustum=O2,s.FrustumCorners=L2,s.GLOBE_RADIUS=Xl,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=DM,s.GLOBE_ZOOM_THRESHOLD_MIN=D2,s.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,i){const u=new Qt,p=new Lr,x=[],w=a+1+2,E=i[0]+1,R=i[0]+1+(1+i.length),j=(F,Y,te)=>{let ne=F===w-1?F-2:F===0?F:F-1;return ne+=te?24575:0,[ne,Y]};for(let F=0;F<w;++F)u.emplaceBack(...j(F,0,!0));for(let F=0;F<E;++F)for(let Y=0;Y<w;++Y)u.emplaceBack(...j(Y,F,(Y===0||Y===w-1)&&!0));for(let F=0;F<i.length;++F){const Y=i[F];for(let te=0;te<w;++te)u.emplaceBack(...j(te,Y,!0))}for(let F=0;F<i.length;++F){const Y=p.length,te=i[F]+1+2,ne=new Lr;for(let be=0;be<te-1;be++){const Re=be===te-2,je=Re?w*(R-i.length+F-be):w;for(let Je=0;Je<w-1;Je++){const Be=be*w+Je;be===0||Re||Je===0||Je===w-2?(ne.emplaceBack(Be+1,Be,Be+je),ne.emplaceBack(Be+je,Be+je+1,Be+1)):(p.emplaceBack(Be+1,Be,Be+je),p.emplaceBack(Be+je,Be+je+1,Be+1))}}const ue=fs.simpleSegment(0,Y,u.length,p.length-Y);for(let be=0;be<ne.uint16.length;be+=3)p.emplaceBack(ne.uint16[be],ne.uint16[be+1],ne.uint16[be+2]);const fe=fs.simpleSegment(0,Y,u.length,p.length-Y);x.push({withoutSkirts:ue,withSkirts:fe})}return{vertices:u,indices:p,segments:x}}_createGrid(a){const i=this._fillGridMeshWithLods(Md,sy);this._gridSegments=i.segments,this._gridBuffer=a.createVertexBuffer(i.vertices,iy.members),this._gridIndexBuffer=a.createIndexBuffer(i.indices,!0)}_createPoles(a){const i=new Lr;for(let x=0;x<=Md;x++)i.emplaceBack(0,x+1,x+2);this._poleIndexBuffer=a.createIndexBuffer(i,!0);const u=new ai,p=new ai;this._poleSegments=[];for(let x=0,w=0;x<D2;x++){const E=360/(1<<x);u.emplaceBack(0,-Xl,0,.5,0),p.emplaceBack(0,-Xl,0,.5,1);for(let R=0;R<=Md;R++){const j=R/Md,F=Ln(0,E,j),[Y,te,ne]=bp(NW,jW,F,Xl);u.emplaceBack(Y,te,ne,j,0),p.emplaceBack(Y,te,ne,j,1)}this._poleSegments.push(fs.simpleSegment(w,0,66,64)),w+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(u,LM,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(p,LM,!1)}getGridBuffers(a,i){return[this._gridBuffer,this._gridIndexBuffer,i?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,i){if(!this._wireframeSegments){const u=new js,p=Md,x=p+1+2,w=1;this._wireframeSegments=[];for(let E=0,R=0;E<sy.length;E++){const j=sy[E];for(let Y=w;Y<j+w;Y++)for(let te=w;te<p+w;te++){const ne=Y*x+te;u.emplaceBack(ne,ne+1),u.emplaceBack(ne,ne+x),u.emplaceBack(ne,ne+x+1)}const F=j*p*3;this._wireframeSegments.push(fs.simpleSegment(0,R,(j+1)*x,F)),R+=F}this._wireframeIndexBuffer=a.createIndexBuffer(u)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},s.GlyphManager=Mp,s.ImagePosition=lC,s.KDBush=kC,s.LivePerformanceUtils=Ys,s.LngLat=ci,s.LngLatBounds=Gu,s.LocalGlyphMode=hC,s.MAX_MERCATOR_LATITUDE=lo,s.MercatorCoordinate=Sp,s.ONE_EM=Js,s.OverscaledTileID=Ao,s.PerformanceMarkers=zs,s.Point=Pe,s.Properties=qe,s.RGBAImage=oa,s.Ray=M2,s.RequestManager=class{constructor(a,i,u){this._transformRequestFn=a,this._customAccessToken=i,this._silenceAuthErrors=!!u,this._createSkuToken()}_createSkuToken(){const a=function(){let i="";for(let u=0;u<10;u++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",W,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,i){return this._transformRequestFn&&this._transformRequestFn(a,i)||{url:a}}normalizeStyleURL(a,i){if(!ot(a))return a;const u=Kt(a);return u.path=`/styles/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||i)}normalizeGlyphsURL(a,i){if(!ot(a))return a;const u=Kt(a);return u.path=`/fonts/v1${u.path}`,this._makeAPIURL(u,this._customAccessToken||i)}normalizeSourceURL(a,i,u,p){if(!ot(a))return a;const x=Kt(a);return x.path=`/v4/${x.authority}.json`,x.params.push("secure"),u&&x.params.push(`language=${u}`),p&&x.params.push(`worldview=${p}`),this._makeAPIURL(x,this._customAccessToken||i)}normalizeSpriteURL(a,i,u,p){const x=Kt(a);return ot(a)?(x.path=`/styles/v1${x.path}/sprite${i}${u}`,this._makeAPIURL(x,this._customAccessToken||p)):(x.path+=`${i}${u}`,Gt(x))}normalizeTileURL(a,i,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!ot(a))return a;const p=Kt(a);p.path=p.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||u&&p.authority!=="raster"&&u===512?"@2x":""}${U.supported?".webp":"$1"}`),p.authority==="raster"?p.path=`/${N.RASTER_URL_PREFIX}${p.path}`:(p.path=p.path.replace(/^.+\/v4\//,"/"),p.path=`/${N.TILE_URL_VERSION}${p.path}`);const x=this._customAccessToken||function(w){for(const E of w){const R=E.match(/^access_token=(.*)$/);if(R)return R[1]}return null}(p.params)||N.ACCESS_TOKEN;return N.REQUIRE_ACCESS_TOKEN&&x&&this._skuToken&&p.params.push(`sku=${this._skuToken}`),this._makeAPIURL(p,x)}canonicalizeTileURL(a,i){const u=Kt(a);if(!u.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!u.path.match(/\.[\w]+$/))return a;let p="mapbox://";u.path.match(/^\/raster\/v1\//)?p+=`raster/${u.path.replace(`/${N.RASTER_URL_PREFIX}/`,"")}`:p+=`tiles/${u.path.replace(`/${N.TILE_URL_VERSION}/`,"")}`;let x=u.params;return i&&(x=x.filter(w=>!w.match(/^access_token=/))),x.length&&(p+=`?${x.join("&")}`),p}canonicalizeTileset(a,i){const u=!!i&&ot(i),p=[];for(const x of a.tiles||[])gt(x)?p.push(this.canonicalizeTileURL(x,u)):p.push(x);return p}_makeAPIURL(a,i){const u="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",p=Kt(N.API_URL);if(a.protocol=p.protocol,a.authority=p.authority,a.protocol==="http"){const x=a.params.indexOf("secure");x>=0&&a.params.splice(x,1)}if(p.path!=="/"&&(a.path=`${p.path}${a.path}`),!N.REQUIRE_ACCESS_TOKEN)return Gt(a);if(i=i||N.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${u}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${u}`)}return a.params=a.params.filter(x=>x.indexOf("access_token")===-1),a.params.push(`access_token=${i||""}`),Gt(a)}},s.ResourceType=zi,s.SegmentVector=fs,s.SourceCache=jd,s.StencilMode=_C,s.StructArrayLayout1ui2=ia,s.StructArrayLayout2f1f2i16=Wr,s.StructArrayLayout2i4=Qt,s.StructArrayLayout2ui4=js,s.StructArrayLayout3f12=yn,s.StructArrayLayout3ui6=Lr,s.StructArrayLayout4i8=Ft,s.StructArrayLayout5f20=ai,s.Texture=Ey,s.Tile=vC,s.Transitionable=me,s.Uniform1f=j0,s.Uniform1i=class extends Fc{constructor(a){super(a),this.current=0}set(a,i,u){this.fetchUniformLocation(a,i)&&this.current!==u&&(this.current=u,this.gl.uniform1i(this.location,u))}},s.Uniform2f=class extends Fc{constructor(a){super(a),this.current=[0,0]}set(a,i,u){this.fetchUniformLocation(a,i)&&(u[0]===this.current[0]&&u[1]===this.current[1]||(this.current=u,this.gl.uniform2f(this.location,u[0],u[1])))}},s.Uniform3f=class extends Fc{constructor(a){super(a),this.current=[0,0,0]}set(a,i,u){this.fetchUniformLocation(a,i)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]||(this.current=u,this.gl.uniform3f(this.location,u[0],u[1],u[2])))}},s.Uniform4f=gM,s.UniformColor=yM,s.UniformMatrix2f=class extends Fc{constructor(a){super(a),this.current=_W}set(a,i,u){if(this.fetchUniformLocation(a,i)){for(let p=0;p<4;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix2fv(this.location,!1,u);break}}}},s.UniformMatrix3f=class extends Fc{constructor(a){super(a),this.current=bW}set(a,i,u){if(this.fetchUniformLocation(a,i)){for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},s.UniformMatrix4f=class extends Fc{constructor(a){super(a),this.current=vW}set(a,i,u){if(this.fetchUniformLocation(a,i)){if(u[12]!==this.current[12]||u[0]!==this.current[0])return this.current=u,void this.gl.uniformMatrix4fv(this.location,!1,u);for(let p=1;p<16;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix4fv(this.location,!1,u);break}}}},s.UnwrappedTileID=SL,s.ValidationError=Sr,s.VectorTileFeature=Q0,s.VectorTileWorkerSource=class extends H{constructor(a,i,u,p,x){super(),this.actor=a,this.layerIndex=i,this.availableImages=u,this.loadVectorData=x||LO,this.loading={},this.loaded={},this.deduped=new MO(a.scheduler),this.isSpriteLoaded=p,this.scheduler=a.scheduler}loadTile(a,i){const u=a.uid,p=a&&a.request,x=p&&p.collectResourceTiming,w=this.loading[u]=new HG(a);w.abort=this.loadVectorData(a,(E,R)=>{const j=!this.loading[u];if(delete this.loading[u],j||E||!R)return w.status="done",j||(this.loaded[u]=w),i(E);const F=R.rawData,Y={};R.expires&&(Y.expires=R.expires),R.cacheControl&&(Y.cacheControl=R.cacheControl),w.vectorTile=R.vectorTile||new nC(new sb(F));const te=()=>{w.parse(w.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,ue)=>{if(ne||!ue)return i(ne);const fe={};if(x){const be=c(p);be.length>0&&(fe.resourceTiming=JSON.parse(JSON.stringify(be)))}i(null,Vt({rawTileData:F.slice(0)},ue,Y,fe))})};this.isSpriteLoaded?te():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(te,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):te()}),this.loaded=this.loaded||{},this.loaded[u]=w})}reloadTile(a,i){const u=this.loaded,p=a.uid,x=this;if(u&&u[p]){const w=u[p];w.showCollisionBoxes=a.showCollisionBoxes,w.enableTerrain=!!a.enableTerrain,w.projection=a.projection,w.tileTransform=Nd(a.tileID.canonical,a.projection);const E=(R,j)=>{const F=w.reloadCallback;F&&(delete w.reloadCallback,w.parse(w.vectorTile,x.layerIndex,this.availableImages,x.actor,F)),i(R,j)};w.status==="parsing"?w.reloadCallback=E:w.status==="done"&&(w.vectorTile?w.parse(w.vectorTile,this.layerIndex,this.availableImages,this.actor,E):E())}}abortTile(a,i){const u=a.uid,p=this.loading[u];p&&(p.abort&&p.abort(),delete this.loading[u]),i()}removeTile(a,i){const u=this.loaded,p=a.uid;u&&u[p]&&delete u[p],i()}},s.WritingMode=ka,s.ZoomDependentExpression=vd,s.add=$c,s.addDynamicAttributes=mb,s.adjoint=function(a,i){var u=i[0],p=i[1],x=i[2],w=i[3],E=i[4],R=i[5],j=i[6],F=i[7],Y=i[8];return a[0]=E*Y-R*F,a[1]=x*F-p*Y,a[2]=p*R-x*E,a[3]=R*j-w*Y,a[4]=u*Y-x*j,a[5]=x*w-u*R,a[6]=w*F-E*j,a[7]=p*j-u*F,a[8]=u*E-p*w,a},s.asyncAll=Ot,s.bezier=or,s.bindAll=fr,s.boundsAttributes=mO,s.bufferConvexPolygon=function(a,i){const u=[];for(let p=0;p<a.length;p++){const x=Wt(p-1,-1,a.length-1),w=Wt(p+1,-1,a.length-1),E=a[p],R=a[w],j=a[x].sub(E).unit(),F=R.sub(E).unit(),Y=F.angleWithSep(j.x,j.y),te=j.add(F).unit().mult(-1*i/Math.sin(Y/2));u.push(E.add(te))}return u},s.cacheEntryPossiblyAdded=function(a){Ii++,Ii>Zt&&(a.getActor().send("enforceCacheSizeLimit",Mr),Ii=0)},s.calculateGlobeLabelMatrix=function(a,i){const{x:u,y:p}=a.point,x=BM(u,p,a.worldSize/a._pixelsPerMercatorPixel,0,0);return Id(x,x,j2(ql(i)))},s.calculateGlobeMatrix=function(a){const{x:i,y:u}=a.point,{lng:p,lat:x}=a._center;return BM(i,u,a.worldSize,p,x)},s.calculateGlobeMercatorMatrix=function(a){const i=a.pixelsPerMeter,u=i/bl(1,a.center.lat),p=xl(new Float64Array(16));return Jg(p,p,[a.point.x,a.point.y,0]),Pd(p,p,[u,u,i]),Float32Array.from(p)},s.circumferenceAtLatitude=B2,s.clamp=mt,s.clearTileCache=function(a){if(!Hn())return;const i=k.caches.delete(Er);a&&i.catch(a).then(()=>a())},s.clipLine=KL,s.clone=function(a){var i=new sa(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},s.clone$1=Br,s.collisionCircleLayout=U9,s.config=N,s.conjugate=function(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=i[3],a},s.create=function(){var a=new sa(16);return sa!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},s.create$1=bM,s.createExpression=Fu,s.createLayout=dt,s.createStyleLayer=function(a){return a.type==="custom"?new LG(a):new DG[a.type](a)},s.cross=R2,s.degToRad=Fe,s.distance=function(a,i){return Math.hypot(i[0]-a[0],i[1]-a[1],i[2]-a[2])},s.div=function(a,i,u){return a[0]=i[0]/u[0],a[1]=i[1]/u[1],a[2]=i[2]/u[2],a},s.dot=Xa,s.earthRadius=ly,s.ease=xr,s.easeCubicInOut=Pt,s.ecefToLatLng=function([a,i,u]){const p=Math.hypot(a,i,u),x=Math.atan2(a,u),w=.5*Math.PI-Math.acos(-i/p);return new ci(Ye(x),Ye(w))},s.emitValidationErrors=M0,s.endsWith=Cr,s.enforceCacheSizeLimit=function(a){ti(),gr&&gr.then(i=>{i.keys().then(u=>{for(let p=0;p<u.length-a;p++)i.delete(u[p])})})},s.evaluateSizeForFeature=nb,s.evaluateSizeForZoom=Ap,s.evaluateVariableOffset=rO,s.evented=P,s.exactEquals=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]},s.exactEquals$1=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]},s.exported=S,s.exported$1=U,s.extend=Vt,s.extend$1=ee,s.fillExtrusionHeightLift=bL,s.filterObject=nn,s.fromMat4=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[4],a[4]=i[5],a[5]=i[6],a[6]=i[8],a[7]=i[9],a[8]=i[10],a},s.fromQuat=function(a,i){var u=i[0],p=i[1],x=i[2],w=i[3],E=u+u,R=p+p,j=x+x,F=u*E,Y=p*E,te=p*R,ne=x*E,ue=x*R,fe=x*j,be=w*E,Re=w*R,je=w*j;return a[0]=1-te-fe,a[1]=Y+je,a[2]=ne-Re,a[3]=0,a[4]=Y-je,a[5]=1-F-fe,a[6]=ue+be,a[7]=0,a[8]=ne+Re,a[9]=ue-be,a[10]=1-F-te,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},s.fromRotation=function(a,i){var u=Math.sin(i),p=Math.cos(i);return a[0]=p,a[1]=u,a[2]=0,a[3]=-u,a[4]=p,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},s.fromScaling=wM,s.furthestTileCorner=function(a){const i=Math.round((a+45+360)%360/90)%4;return ft[i]},s.getAABBPointSquareDist=function(a,i,u){let p=0;for(let x=0;x<2;++x){const w=u?u[x]:0;a[x]>w&&(p+=(a[x]-w)*(a[x]-w)),i[x]<w&&(p+=(w-i[x])*(w-i[x]))}return p},s.getAnchorAlignment=uC,s.getAnchorJustification=fC,s.getBounds=function(a){let i=1/0,u=1/0,p=-1/0,x=-1/0;for(const w of a)i=Math.min(i,w.x),u=Math.min(u,w.y),p=Math.max(p,w.x),x=Math.max(x,w.y);return{min:new Pe(i,u),max:new Pe(p,x)}},s.getColumn=pr,s.getDefaultExportFromCjs=K,s.getGridMatrix=function(a,i,u,p){const x=i.getNorth(),w=i.getSouth(),E=i.getWest(),R=i.getEast(),j=1<<a.z,F=R-E,Y=x-w,te=F/Md,ne=-Y/sy[u],ue=[0,te,0,ne,0,0,x,E,0];if(a.z>0){const fe=180/p;_M(ue,ue,[fe/F+1,0,0,0,fe/Y+1,0,-.5*fe/te,.5*fe/ne,1])}return ue[2]=j,ue[5]=a.x,ue[8]=a.y,ue},s.getImage=He,s.getJSON=function(a,i){return Si(Vt(a,{type:"json"}),i)},s.getLatitudinalLod=function(a){const i=lo-5;a=mt(a,-i,i)/i*90;const u=Math.pow(Math.abs(Math.sin(Fe(a))),3);return Math.round(u*(sy.length-1))},s.getMapSessionAPI=Wn,s.getPerformanceMeasurement=c,s.getProjection=uO,s.getRTLTextPluginStatus=L,s.getReferrer=Ki,s.getTilePoint=function(a,{x:i,y:u},p=0){return new Pe(((i-p)*a.scale-a.x)*Ur,(u*a.scale-a.y)*Ur)},s.getTileVec3=function(a,i,u=0){return vp(((i.x-u)*a.scale-a.x)*Ur,(i.y*a.scale-a.y)*Ur,HM(i.z,i.y))},s.getVideo=function(a,i){const u=k.document.createElement("video");u.muted=!0,u.onloadstart=function(){i(null,u)};for(let p=0;p<a.length;p++){const x=k.document.createElement("source");Ds(a[p])||(u.crossOrigin="Anonymous"),x.src=a[p],u.appendChild(x)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(a){const i=[0,0,0],u=xl(new Float64Array(16));return Id(u,a.pixelMatrix,a.globeMatrix),as(i,i,u),new Pe(i[0],i[1])},s.globeDenormalizeECEF=j2,s.globeECEFOrigin=function(a,i){const u=[0,0,0];return as(u,u,ay(ql(i.canonical))),as(u,u,a),u},s.globeMetersToEcef=$0,s.globeNormalizeECEF=ay,s.globePixelsToTileUnits=function(a,i){return Ur/(512*Math.pow(2,a))*V0(ql(i))},s.globePoleMatrixForTile=function(a,i,u){const p=xl(new Float64Array(16)),x=(i/(1<<a)-.5)*Math.PI*2;return B0(p,u.globeMatrix,x),Float32Array.from(p)},s.globeTileBounds=ql,s.globeTiltAtLngLat=$M,s.globeToMercatorTransition=wp,s.globeUseCustomAntiAliasing=function(a,i,u){const p=wp(u.zoom),x=a.style.map._antialias,w=!!i.extStandardDerivatives,E=i.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return p===0&&!x&&!E&&w},s.identity=xl,s.identity$1=PM,s.invert=T2,s.isFullscreen=function(){return!!k.document.fullscreenElement||!!k.document.webkitFullscreenElement},s.isLngLatBehindGlobe=F2,s.isMapAuthenticated=function(a){return Yn.has(a)},s.isMapboxURL=ot,s.isSafariWithAntialiasingBug=function(a){const i=a.navigator?a.navigator.userAgent:null;return!!Hi(a)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=ao,s.latLngToECEF=_p,s.len=PW,s.length=Qg,s.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},s.lngFromMercatorX=Ca,s.loadVectorTile=LO,s.makeRequest=Si,s.mapValue=function(a,i,u,p,x){return mt((a-i)/(u-i)*(x-p)+p,p,x)},s.mercatorScale=WM,s.mercatorXfromLng=Yl,s.mercatorYfromLat=Zl,s.mercatorZfromAltitude=bl,s.mul=AW,s.mul$1=IW,s.multiply=Id,s.multiply$1=_M,s.multiply$2=kM,s.nextPowerOfTwo=ur,s.normalize=Eo,s.normalize$1=RW,s.normalize$2=AM,s.number=Ln,s.ortho=function(a,i,u,p,x,w,E){var R=1/(i-u),j=1/(p-x),F=1/(w-E);return a[0]=-2*R,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*j,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*F,a[11]=0,a[12]=(i+u)*R,a[13]=(x+p)*j,a[14]=(E+w)*F,a[15]=1,a},s.pbf=PL,s.perspective=function(a,i,u,p,x){var w,E=1/Math.tan(i/2);return a[0]=E/u,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,x!=null&&x!==1/0?(a[10]=(x+p)*(w=1/(p-x)),a[14]=2*x*p*w):(a[10]=-1,a[14]=-2*p),a},s.pick=function(a,i){const u={};for(let p=0;p<i.length;p++){const x=i[p];x in a&&(u[x]=a[x])}return u},s.plugin=G,s.pointGeometry=Te,s.polesInViewport=function(a){const i=xl(new Float64Array(16));Id(i,a.pixelMatrix,a.globeMatrix);const u=[0,qa,0],p=[0,Ya,0];return as(u,u,i),as(p,p,i),[u[0]>0&&u[0]<=a.width&&u[1]>0&&u[1]<=a.height&&!F2(a,new ci(a.center.lat,90)),p[0]>0&&p[0]<=a.width&&p[1]>0&&p[1]<=a.height&&!F2(a,new ci(a.center.lat,-90))]},s.polygonContainsPoint=Dd,s.polygonIntersectsBox=JM,s.polygonIntersectsPolygon=qM,s.polygonizeBounds=function(a,i,u=0,p=!0){const x=new Pe(u,u),w=a.sub(x),E=i.add(x),R=[w,new Pe(E.x,w.y),E,new Pe(w.x,E.y)];return p&&R.push(w.clone()),R},s.posAttributes=iy,s.postMapLoadEvent=Bn,s.postPerformanceEvent=gn,s.postTurnstileEvent=Rr,s.potpack=aC,s.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},s.radToDeg=Ye,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(a){return a({pluginStatus:_,pluginURL:h}),P.on("pluginStateChange",a),a},s.removeAuthState=function(a){Yn.delete(a)},s.renderColorRamp=q2,s.resample=GM,s.rotateX=A2,s.rotateX$1=RM,s.rotateY=B0,s.rotateY$1=MM,s.rotateZ=function(a,i,u){var p=Math.sin(u),x=Math.cos(u),w=i[0],E=i[1],R=i[2],j=i[3],F=i[4],Y=i[5],te=i[6],ne=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=w*x+F*p,a[1]=E*x+Y*p,a[2]=R*x+te*p,a[3]=j*x+ne*p,a[4]=F*x-w*p,a[5]=Y*x-E*p,a[6]=te*x-R*p,a[7]=ne*x-j*p,a},s.rotateZ$1=function(a,i,u){u*=.5;var p=i[0],x=i[1],w=i[2],E=i[3],R=Math.sin(u),j=Math.cos(u);return a[0]=p*j+x*R,a[1]=x*j-p*R,a[2]=w*j+E*R,a[3]=E*j-w*R,a},s.scale=Pd,s.scale$1=TM,s.scale$2=Sa,s.scaleAndAdd=ry,s.set=function(a,i,u,p){return a[0]=i,a[1]=u,a[2]=p,a},s.setCacheLimits=function(a,i){Mr=a,Zt=i},s.setColumn=function(a,i,u){a[4*i+0]=u[0],a[4*i+1]=u[1],a[4*i+2]=u[2],a[4*i+3]=u[3]},s.setRTLTextPlugin=function(a,i,u=!1){if(_===Xg||_===qg||_===Yg)throw new Error("setRTLTextPlugin cannot be called multiple times.");h=S.resolveURL(a),_=Xg,Vu=i,C(),u||V()},s.smoothstep=Xt,s.spec=B,s.squaredLength=function(a){var i=a[0],u=a[1],p=a[2];return i*i+u*u+p*p},s.storeAuthState=function(a,i){i?Yn.add(a):Yn.delete(a)},s.sub=vl,s.subtract=P2,s.symbolSize=V9,s.tileAABB=function(a,i,u,p,x,w,E,R,j){if(j.name==="globe")return zW(a,i,new tb(u,p,x));const F=Nd({z:u,x:p,y:x},j);return new To([(w+F.x/F.scale)*i,i*(F.y/F.scale),E],[(w+F.x2/F.scale)*i,i*(F.y2/F.scale),R])},s.tileCornersToBounds=U0,s.tileTransform=Nd,s.transformMat3=function(a,i,u){var p=i[0],x=i[1],w=i[2];return a[0]=p*u[0]+x*u[3]+w*u[6],a[1]=p*u[1]+x*u[4]+w*u[7],a[2]=p*u[2]+x*u[5]+w*u[8],a},s.transformMat4=as,s.transformMat4$1=Rd,s.transformQuat=EM,s.transitionTileAABBinECEF=NM,s.translate=Jg,s.transpose=function(a,i){if(a===i){var u=i[1],p=i[2],x=i[5];a[1]=i[3],a[2]=i[6],a[3]=u,a[5]=i[7],a[6]=p,a[7]=x}else a[0]=i[0],a[1]=i[3],a[2]=i[6],a[3]=i[1],a[4]=i[4],a[5]=i[7],a[6]=i[2],a[7]=i[5],a[8]=i[8];return a},s.triggerPluginCompletionEvent=g,s.uniqueId=vt,s.updateGlobeVertexNormal=function(a,i,u,p,x){const w=5*i+2;a.float32[w+0]=u,a.float32[w+1]=p,a.float32[w+2]=x},s.validateCustomStyleLayer=function(a){const i=[],u=a.id;return u===void 0&&i.push({message:`layers.${u}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${u}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),i},s.validateFilter=a=>na(Cd(a)),s.validateFog=a=>na(I0(a)),s.validateLayer=a=>na(k0(a)),s.validateLight=a=>na(A0(a)),s.validateSource=a=>na(T0(a)),s.validateStyle=R0,s.validateTerrain=a=>na(Ug(a)),s.values=ut,s.vectorTile=J0,s.version=I,s.warnOnce=on,s.window=k,s.wrap=Wt}),f(["./shared"],function(s){function k(Ge){if(typeof Ge=="number"||typeof Ge=="boolean"||typeof Ge=="string"||Ge==null)return JSON.stringify(Ge);if(Array.isArray(Ge)){let Ce="[";for(const He of Ge)Ce+=`${k(He)},`;return`${Ce}]`}let we="{";for(const Ce of Object.keys(Ge).sort())we+=`${Ce}:${k(Ge[Ce])},`;return`${we}}`}function I(Ge){let we="";for(const Ce of s.refProperties)we+=`/${k(Ge[Ce])}`;return we}class D{constructor(we){this.keyCache={},we&&this.replace(we)}replace(we){this._layerConfigs={},this._layers={},this.update(we,[])}update(we,Ce){for(const Qe of we)this._layerConfigs[Qe.id]=Qe,(this._layers[Qe.id]=s.createStyleLayer(Qe)).compileFilter(),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id];for(const Qe of Ce)delete this.keyCache[Qe],delete this._layerConfigs[Qe],delete this._layers[Qe];this.familiesBySource={};const He=function(Qe,ot){const gt={};for(let ct=0;ct<Qe.length;ct++){const bt=ot&&ot[Qe[ct].id]||I(Qe[ct]);ot&&(ot[Qe[ct].id]=bt);let qt=gt[bt];qt||(qt=gt[bt]=[]),qt.push(Qe[ct])}const yt=[];for(const ct in gt)yt.push(gt[ct]);return yt}(s.values(this._layerConfigs),this.keyCache);for(const Qe of He){const ot=Qe.map(Kt=>this._layers[Kt.id]),gt=ot[0];if(gt.visibility==="none")continue;const yt=gt.source||"";let ct=this.familiesBySource[yt];ct||(ct=this.familiesBySource[yt]={});const bt=gt.sourceLayer||"_geojsonTileLayer";let qt=ct[bt];qt||(qt=ct[bt]=[]),qt.push(ot)}}}class N{loadTile(we,Ce){const{uid:He,encoding:Qe,rawImageData:ot,padding:gt,buildQuadTree:yt}=we,ct=s.window.ImageBitmap&&ot instanceof s.window.ImageBitmap?this.getImageData(ot,gt):ot;Ce(null,new s.DEMData(He,ct,Qe,gt<1,yt))}getImageData(we,Ce){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);const He=this.offscreenCanvasContext.getImageData(-Ce,-Ce,we.width+2*Ce,we.height+2*Ce);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),He}}function U(Ge,we){if(Ge.length!==0){q(Ge[0],we);for(var Ce=1;Ce<Ge.length;Ce++)q(Ge[Ce],!we)}}function q(Ge,we){for(var Ce=0,He=0,Qe=0,ot=Ge.length,gt=ot-1;Qe<ot;gt=Qe++){var yt=(Ge[Qe][0]-Ge[gt][0])*(Ge[gt][1]+Ge[Qe][1]),ct=Ce+yt;He+=Math.abs(Ce)>=Math.abs(yt)?Ce-ct+yt:yt-ct+Ce,Ce=ct}Ce+He>=0!=!!we&&Ge.reverse()}var Z=s.getDefaultExportFromCjs(function Ge(we,Ce){var He,Qe=we&&we.type;if(Qe==="FeatureCollection")for(He=0;He<we.features.length;He++)Ge(we.features[He],Ce);else if(Qe==="GeometryCollection")for(He=0;He<we.geometries.length;He++)Ge(we.geometries[He],Ce);else if(Qe==="Feature")Ge(we.geometry,Ce);else if(Qe==="Polygon")U(we.coordinates,Ce);else if(Qe==="MultiPolygon")for(He=0;He<we.coordinates.length;He++)U(we.coordinates[He],Ce);return we});const ae=s.VectorTileFeature.prototype.toGeoJSON;var ve={exports:{}},ie=s.pointGeometry,W=s.vectorTile.VectorTileFeature,K=he;function he(Ge,we){this.options=we||{},this.features=Ge,this.length=Ge.length}function de(Ge,we){this.id=typeof Ge.id=="number"?Ge.id:void 0,this.type=Ge.type,this.rawGeometry=Ge.type===1?[Ge.geometry]:Ge.geometry,this.properties=Ge.tags,this.extent=we||4096}he.prototype.feature=function(Ge){return new de(this.features[Ge],this.options.extent)},de.prototype.loadGeometry=function(){var Ge=this.rawGeometry;this.geometry=[];for(var we=0;we<Ge.length;we++){for(var Ce=Ge[we],He=[],Qe=0;Qe<Ce.length;Qe++)He.push(new ie(Ce[Qe][0],Ce[Qe][1]));this.geometry.push(He)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ge=this.geometry,we=1/0,Ce=-1/0,He=1/0,Qe=-1/0,ot=0;ot<Ge.length;ot++)for(var gt=Ge[ot],yt=0;yt<gt.length;yt++){var ct=gt[yt];we=Math.min(we,ct.x),Ce=Math.max(Ce,ct.x),He=Math.min(He,ct.y),Qe=Math.max(Qe,ct.y)}return[we,He,Ce,Qe]},de.prototype.toGeoJSON=W.prototype.toGeoJSON;var Ae=s.pbf,Te=K;function Ue(Ge){var we=new Ae;return function(Ce,He){for(var Qe in Ce.layers)He.writeMessage(3,Pe,Ce.layers[Qe])}(Ge,we),we.finish()}function Pe(Ge,we){var Ce;we.writeVarintField(15,Ge.version||1),we.writeStringField(1,Ge.name||""),we.writeVarintField(5,Ge.extent||4096);var He={keys:[],values:[],keycache:{},valuecache:{}};for(Ce=0;Ce<Ge.length;Ce++)He.feature=Ge.feature(Ce),we.writeMessage(2,$e,He);var Qe=He.keys;for(Ce=0;Ce<Qe.length;Ce++)we.writeStringField(3,Qe[Ce]);var ot=He.values;for(Ce=0;Ce<ot.length;Ce++)we.writeMessage(4,Pt,ot[Ce])}function $e(Ge,we){var Ce=Ge.feature;Ce.id!==void 0&&we.writeVarintField(1,Ce.id),we.writeMessage(2,Ve,Ge),we.writeVarintField(3,Ce.type),we.writeMessage(4,ft,Ce)}function Ve(Ge,we){var Ce=Ge.feature,He=Ge.keys,Qe=Ge.values,ot=Ge.keycache,gt=Ge.valuecache;for(var yt in Ce.properties){var ct=Ce.properties[yt],bt=ot[yt];if(ct!==null){bt===void 0&&(He.push(yt),ot[yt]=bt=He.length-1),we.writeVarint(bt);var qt=typeof ct;qt!=="string"&&qt!=="boolean"&&qt!=="number"&&(ct=JSON.stringify(ct));var Kt=qt+":"+ct,Gt=gt[Kt];Gt===void 0&&(Qe.push(ct),gt[Kt]=Gt=Qe.length-1),we.writeVarint(Gt)}}}function Fe(Ge,we){return(we<<3)+(7&Ge)}function Ye(Ge){return Ge<<1^Ge>>31}function ft(Ge,we){for(var Ce=Ge.loadGeometry(),He=Ge.type,Qe=0,ot=0,gt=Ce.length,yt=0;yt<gt;yt++){var ct=Ce[yt],bt=1;He===1&&(bt=ct.length),we.writeVarint(Fe(1,bt));for(var qt=He===3?ct.length-1:ct.length,Kt=0;Kt<qt;Kt++){Kt===1&&He!==1&&we.writeVarint(Fe(2,qt-1));var Gt=ct[Kt].x-Qe,Dr=ct[Kt].y-ot;we.writeVarint(Ye(Gt)),we.writeVarint(Ye(Dr)),Qe+=Gt,ot+=Dr}He===3&&we.writeVarint(Fe(7,1))}}function Pt(Ge,we){var Ce=typeof Ge;Ce==="string"?we.writeStringField(1,Ge):Ce==="boolean"?we.writeBooleanField(7,Ge):Ce==="number"&&(Ge%1!=0?we.writeDoubleField(3,Ge):Ge<0?we.writeSVarintField(6,Ge):we.writeVarintField(5,Ge))}ve.exports=Ue,ve.exports.fromVectorTileJs=Ue,ve.exports.fromGeojsonVt=function(Ge,we){we=we||{};var Ce={};for(var He in Ge)Ce[He]=new Te(Ge[He].features,we),Ce[He].name=He,Ce[He].version=we.version,Ce[He].extent=we.extent;return Ue({layers:Ce})},ve.exports.GeoJSONWrapper=Te;var or=s.getDefaultExportFromCjs(ve.exports);const xr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ge=>Ge},mt=Math.fround||(Xt=new Float32Array(1),Ge=>(Xt[0]=+Ge,Xt[0]));var Xt;const Wt=3,Ot=5,ut=6;class Vt{constructor(we){this.options=Object.assign(Object.create(xr),we),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(we){const{log:Ce,minZoom:He,maxZoom:Qe}=this.options;Ce&&console.time("total time");const ot=`prepare ${we.length} points`;Ce&&console.time(ot),this.points=we;const gt=[];for(let ct=0;ct<we.length;ct++){const bt=we[ct];if(!bt.geometry)continue;const[qt,Kt]=bt.geometry.coordinates,Gt=mt(Dt(qt)),Dr=mt(ur(Kt));gt.push(Gt,Dr,1/0,ct,-1,1),this.options.reduce&&gt.push(0)}let yt=this.trees[Qe+1]=this._createTree(gt);Ce&&console.timeEnd(ot);for(let ct=Qe;ct>=He;ct--){const bt=+Date.now();yt=this.trees[ct]=this._createTree(this._cluster(yt,ct)),Ce&&console.log("z%d: %d clusters in %dms",ct,yt.numItems,+Date.now()-bt)}return Ce&&console.timeEnd("total time"),this}getClusters(we,Ce){let He=((we[0]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,we[1]));let ot=we[2]===180?180:((we[2]+180)%360+360)%360-180;const gt=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)He=-180,ot=180;else if(He>ot){const Kt=this.getClusters([He,Qe,180,gt],Ce),Gt=this.getClusters([-180,Qe,ot,gt],Ce);return Kt.concat(Gt)}const yt=this.trees[this._limitZoom(Ce)],ct=yt.range(Dt(He),ur(gt),Dt(ot),ur(Qe)),bt=yt.data,qt=[];for(const Kt of ct){const Gt=this.stride*Kt;qt.push(bt[Gt+Ot]>1?ir(bt,Gt,this.clusterProps):this.points[bt[Gt+Wt]])}return qt}getChildren(we){const Ce=this._getOriginId(we),He=this._getOriginZoom(we),Qe="No cluster with the specified id.",ot=this.trees[He];if(!ot)throw new Error(Qe);const gt=ot.data;if(Ce*this.stride>=gt.length)throw new Error(Qe);const yt=this.options.radius/(this.options.extent*Math.pow(2,He-1)),ct=ot.within(gt[Ce*this.stride],gt[Ce*this.stride+1],yt),bt=[];for(const qt of ct){const Kt=qt*this.stride;gt[Kt+4]===we&&bt.push(gt[Kt+Ot]>1?ir(gt,Kt,this.clusterProps):this.points[gt[Kt+Wt]])}if(bt.length===0)throw new Error(Qe);return bt}getLeaves(we,Ce,He){const Qe=[];return this._appendLeaves(Qe,we,Ce=Ce||10,He=He||0,0),Qe}getTile(we,Ce,He){const Qe=this.trees[this._limitZoom(we)],ot=Math.pow(2,we),{extent:gt,radius:yt}=this.options,ct=yt/gt,bt=(He-ct)/ot,qt=(He+1+ct)/ot,Kt={features:[]};return this._addTileFeatures(Qe.range((Ce-ct)/ot,bt,(Ce+1+ct)/ot,qt),Qe.data,Ce,He,ot,Kt),Ce===0&&this._addTileFeatures(Qe.range(1-ct/ot,bt,1,qt),Qe.data,ot,He,ot,Kt),Ce===ot-1&&this._addTileFeatures(Qe.range(0,bt,ct/ot,qt),Qe.data,-1,He,ot,Kt),Kt.features.length?Kt:null}getClusterExpansionZoom(we){let Ce=this._getOriginZoom(we)-1;for(;Ce<=this.options.maxZoom;){const He=this.getChildren(we);if(Ce++,He.length!==1)break;we=He[0].properties.cluster_id}return Ce}_appendLeaves(we,Ce,He,Qe,ot){const gt=this.getChildren(Ce);for(const yt of gt){const ct=yt.properties;if(ct&&ct.cluster?ot+ct.point_count<=Qe?ot+=ct.point_count:ot=this._appendLeaves(we,ct.cluster_id,He,Qe,ot):ot<Qe?ot++:we.push(yt),we.length===He)break}return ot}_createTree(we){const Ce=new s.KDBush(we.length/this.stride|0,this.options.nodeSize,Float32Array);for(let He=0;He<we.length;He+=this.stride)Ce.add(we[He],we[He+1]);return Ce.finish(),Ce.data=we,Ce}_addTileFeatures(we,Ce,He,Qe,ot,gt){for(const yt of we){const ct=yt*this.stride,bt=Ce[ct+Ot]>1;let qt,Kt,Gt;if(bt)qt=vt(Ce,ct,this.clusterProps),Kt=Ce[ct],Gt=Ce[ct+1];else{const Vr=this.points[Ce[ct+Wt]];qt=Vr.properties;const[jr,Rr]=Vr.geometry.coordinates;Kt=Dt(jr),Gt=ur(Rr)}const Dr={type:1,geometry:[[Math.round(this.options.extent*(Kt*ot-He)),Math.round(this.options.extent*(Gt*ot-Qe))]],tags:qt};let Qr;Qr=bt||this.options.generateId?Ce[ct+Wt]:this.points[Ce[ct+Wt]].id,Qr!==void 0&&(Dr.id=Qr),gt.features.push(Dr)}}_limitZoom(we){return Math.max(this.options.minZoom,Math.min(Math.floor(+we),this.options.maxZoom+1))}_cluster(we,Ce){const{radius:He,extent:Qe,reduce:ot,minPoints:gt}=this.options,yt=He/(Qe*Math.pow(2,Ce)),ct=we.data,bt=[],qt=this.stride;for(let Kt=0;Kt<ct.length;Kt+=qt){if(ct[Kt+2]<=Ce)continue;ct[Kt+2]=Ce;const Gt=ct[Kt],Dr=ct[Kt+1],Qr=we.within(ct[Kt],ct[Kt+1],yt),Vr=ct[Kt+Ot];let jr=Vr;for(const Rr of Qr){const Cn=Rr*qt;ct[Cn+2]>Ce&&(jr+=ct[Cn+Ot])}if(jr>Vr&&jr>=gt){let Rr,Cn=Gt*Vr,Bn=Dr*Vr,$n=-1;const gn=((Kt/qt|0)<<5)+(Ce+1)+this.points.length;for(const Ni of Qr){const Wn=Ni*qt;if(ct[Wn+2]<=Ce)continue;ct[Wn+2]=Ce;const Yn=ct[Wn+Ot];Cn+=ct[Wn]*Yn,Bn+=ct[Wn+1]*Yn,ct[Wn+4]=gn,ot&&(Rr||(Rr=this._map(ct,Kt,!0),$n=this.clusterProps.length,this.clusterProps.push(Rr)),ot(Rr,this._map(ct,Wn)))}ct[Kt+4]=gn,bt.push(Cn/jr,Bn/jr,1/0,gn,-1,jr),ot&&bt.push($n)}else{for(let Rr=0;Rr<qt;Rr++)bt.push(ct[Kt+Rr]);if(jr>1)for(const Rr of Qr){const Cn=Rr*qt;if(!(ct[Cn+2]<=Ce)){ct[Cn+2]=Ce;for(let Bn=0;Bn<qt;Bn++)bt.push(ct[Cn+Bn])}}}}return bt}_getOriginId(we){return we-this.points.length>>5}_getOriginZoom(we){return(we-this.points.length)%32}_map(we,Ce,He){if(we[Ce+Ot]>1){const gt=this.clusterProps[we[Ce+ut]];return He?Object.assign({},gt):gt}const Qe=this.points[we[Ce+Wt]].properties,ot=this.options.map(Qe);return He&&ot===Qe?Object.assign({},ot):ot}}function ir(Ge,we,Ce){return{type:"Feature",id:Ge[we+Wt],properties:vt(Ge,we,Ce),geometry:{type:"Point",coordinates:[(He=Ge[we],360*(He-.5)),Tr(Ge[we+1])]}};var He}function vt(Ge,we,Ce){const He=Ge[we+Ot],Qe=He>=1e4?`${Math.round(He/1e3)}k`:He>=1e3?Math.round(He/100)/10+"k":He,ot=Ge[we+ut],gt=ot===-1?{}:Object.assign({},Ce[ot]);return Object.assign(gt,{cluster:!0,cluster_id:Ge[we+Wt],point_count:He,point_count_abbreviated:Qe})}function Dt(Ge){return Ge/360+.5}function ur(Ge){const we=Math.sin(Ge*Math.PI/180),Ce=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Tr(Ge){const we=(180-360*Ge)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function fr(Ge,we,Ce,He){for(var Qe,ot=He,gt=Ce-we>>1,yt=Ce-we,ct=Ge[we],bt=Ge[we+1],qt=Ge[Ce],Kt=Ge[Ce+1],Gt=we+3;Gt<Ce;Gt+=3){var Dr=Cr(Ge[Gt],Ge[Gt+1],ct,bt,qt,Kt);if(Dr>ot)Qe=Gt,ot=Dr;else if(Dr===ot){var Qr=Math.abs(Gt-gt);Qr<yt&&(Qe=Gt,yt=Qr)}}ot>He&&(Qe-we>3&&fr(Ge,we,Qe,He),Ge[Qe+2]=ot,Ce-Qe>3&&fr(Ge,Qe,Ce,He))}function Cr(Ge,we,Ce,He,Qe,ot){var gt=Qe-Ce,yt=ot-He;if(gt!==0||yt!==0){var ct=((Ge-Ce)*gt+(we-He)*yt)/(gt*gt+yt*yt);ct>1?(Ce=Qe,He=ot):ct>0&&(Ce+=gt*ct,He+=yt*ct)}return(gt=Ge-Ce)*gt+(yt=we-He)*yt}function mr(Ge,we,Ce,He){var Qe={id:Ge===void 0?null:Ge,type:we,geometry:Ce,tags:He,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ot){var gt=ot.geometry,yt=ot.type;if(yt==="Point"||yt==="MultiPoint"||yt==="LineString")nn(ot,gt);else if(yt==="Polygon"||yt==="MultiLineString")for(var ct=0;ct<gt.length;ct++)nn(ot,gt[ct]);else if(yt==="MultiPolygon")for(ct=0;ct<gt.length;ct++)for(var bt=0;bt<gt[ct].length;bt++)nn(ot,gt[ct][bt])}(Qe),Qe}function nn(Ge,we){for(var Ce=0;Ce<we.length;Ce+=3)Ge.minX=Math.min(Ge.minX,we[Ce]),Ge.minY=Math.min(Ge.minY,we[Ce+1]),Ge.maxX=Math.max(Ge.maxX,we[Ce]),Ge.maxY=Math.max(Ge.maxY,we[Ce+1])}function Br(Ge,we,Ce,He){if(we.geometry){var Qe=we.geometry.coordinates,ot=we.geometry.type,gt=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2),yt=[],ct=we.id;if(Ce.promoteId?ct=we.properties[Ce.promoteId]:Ce.generateId&&(ct=He||0),ot==="Point")Sn(Qe,yt);else if(ot==="MultiPoint")for(var bt=0;bt<Qe.length;bt++)Sn(Qe[bt],yt);else if(ot==="LineString")on(Qe,yt,gt,!1);else if(ot==="MultiLineString"){if(Ce.lineMetrics){for(bt=0;bt<Qe.length;bt++)on(Qe[bt],yt=[],gt,!1),Ge.push(mr(ct,"LineString",yt,we.properties));return}Gr(Qe,yt,gt,!1)}else if(ot==="Polygon")Gr(Qe,yt,gt,!0);else{if(ot!=="MultiPolygon"){if(ot==="GeometryCollection"){for(bt=0;bt<we.geometry.geometries.length;bt++)Br(Ge,{id:ct,geometry:we.geometry.geometries[bt],properties:we.properties},Ce,He);return}throw new Error("Input data is not a valid GeoJSON object.")}for(bt=0;bt<Qe.length;bt++){var qt=[];Gr(Qe[bt],qt,gt,!0),yt.push(qt)}}Ge.push(mr(ct,ot,yt,we.properties))}}function Sn(Ge,we){we.push(Zi(Ge[0])),we.push(Kr(Ge[1])),we.push(0)}function on(Ge,we,Ce,He){for(var Qe,ot,gt=0,yt=0;yt<Ge.length;yt++){var ct=Zi(Ge[yt][0]),bt=Kr(Ge[yt][1]);we.push(ct),we.push(bt),we.push(0),yt>0&&(gt+=He?(Qe*bt-ct*ot)/2:Math.sqrt(Math.pow(ct-Qe,2)+Math.pow(bt-ot,2))),Qe=ct,ot=bt}var qt=we.length-3;we[2]=1,fr(we,0,qt,Ce),we[qt+2]=1,we.size=Math.abs(gt),we.start=0,we.end=we.size}function Gr(Ge,we,Ce,He){for(var Qe=0;Qe<Ge.length;Qe++){var ot=[];on(Ge[Qe],ot,Ce,He),we.push(ot)}}function Zi(Ge){return Ge/360+.5}function Kr(Ge){var we=Math.sin(Ge*Math.PI/180),Ce=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function En(Ge,we,Ce,He,Qe,ot,gt,yt){if(He/=we,ot>=(Ce/=we)&&gt<He)return Ge;if(gt<Ce||ot>=He)return null;for(var ct=[],bt=0;bt<Ge.length;bt++){var qt=Ge[bt],Kt=qt.geometry,Gt=qt.type,Dr=Qe===0?qt.minX:qt.minY,Qr=Qe===0?qt.maxX:qt.maxY;if(Dr>=Ce&&Qr<He)ct.push(qt);else if(!(Qr<Ce||Dr>=He)){var Vr=[];if(Gt==="Point"||Gt==="MultiPoint")wi(Kt,Vr,Ce,He,Qe);else if(Gt==="LineString")Hi(Kt,Vr,Ce,He,Qe,!1,yt.lineMetrics);else if(Gt==="MultiLineString")pr(Kt,Vr,Ce,He,Qe,!1);else if(Gt==="Polygon")pr(Kt,Vr,Ce,He,Qe,!0);else if(Gt==="MultiPolygon")for(var jr=0;jr<Kt.length;jr++){var Rr=[];pr(Kt[jr],Rr,Ce,He,Qe,!0),Rr.length&&Vr.push(Rr)}if(Vr.length){if(yt.lineMetrics&&Gt==="LineString"){for(jr=0;jr<Vr.length;jr++)ct.push(mr(qt.id,Gt,Vr[jr],qt.tags));continue}Gt!=="LineString"&&Gt!=="MultiLineString"||(Vr.length===1?(Gt="LineString",Vr=Vr[0]):Gt="MultiLineString"),Gt!=="Point"&&Gt!=="MultiPoint"||(Gt=Vr.length===3?"Point":"MultiPoint"),ct.push(mr(qt.id,Gt,Vr,qt.tags))}}}return ct.length?ct:null}function wi(Ge,we,Ce,He,Qe){for(var ot=0;ot<Ge.length;ot+=3){var gt=Ge[ot+Qe];gt>=Ce&&gt<=He&&(we.push(Ge[ot]),we.push(Ge[ot+1]),we.push(Ge[ot+2]))}}function Hi(Ge,we,Ce,He,Qe,ot,gt){for(var yt,ct,bt=Tt(Ge),qt=Qe===0?Mr:Zt,Kt=Ge.start,Gt=0;Gt<Ge.length-3;Gt+=3){var Dr=Ge[Gt],Qr=Ge[Gt+1],Vr=Ge[Gt+2],jr=Ge[Gt+3],Rr=Ge[Gt+4],Cn=Qe===0?Dr:Qr,Bn=Qe===0?jr:Rr,$n=!1;gt&&(yt=Math.sqrt(Math.pow(Dr-jr,2)+Math.pow(Qr-Rr,2))),Cn<Ce?Bn>Ce&&(ct=qt(bt,Dr,Qr,jr,Rr,Ce),gt&&(bt.start=Kt+yt*ct)):Cn>He?Bn<He&&(ct=qt(bt,Dr,Qr,jr,Rr,He),gt&&(bt.start=Kt+yt*ct)):Er(bt,Dr,Qr,Vr),Bn<Ce&&Cn>=Ce&&(ct=qt(bt,Dr,Qr,jr,Rr,Ce),$n=!0),Bn>He&&Cn<=He&&(ct=qt(bt,Dr,Qr,jr,Rr,He),$n=!0),!ot&&$n&&(gt&&(bt.end=Kt+yt*ct),we.push(bt),bt=Tt(Ge)),gt&&(Kt+=yt)}var gn=Ge.length-3;Dr=Ge[gn],Qr=Ge[gn+1],Vr=Ge[gn+2],(Cn=Qe===0?Dr:Qr)>=Ce&&Cn<=He&&Er(bt,Dr,Qr,Vr),gn=bt.length-3,ot&&gn>=3&&(bt[gn]!==bt[0]||bt[gn+1]!==bt[1])&&Er(bt,bt[0],bt[1],bt[2]),bt.length&&we.push(bt)}function Tt(Ge){var we=[];return we.size=Ge.size,we.start=Ge.start,we.end=Ge.end,we}function pr(Ge,we,Ce,He,Qe,ot){for(var gt=0;gt<Ge.length;gt++)Hi(Ge[gt],we,Ce,He,Qe,ot,!1)}function Er(Ge,we,Ce,He){Ge.push(we),Ge.push(Ce),Ge.push(He)}function Mr(Ge,we,Ce,He,Qe,ot){var gt=(ot-we)/(He-we);return Ge.push(ot),Ge.push(Ce+(Qe-Ce)*gt),Ge.push(1),gt}function Zt(Ge,we,Ce,He,Qe,ot){var gt=(ot-Ce)/(Qe-Ce);return Ge.push(we+(He-we)*gt),Ge.push(ot),Ge.push(1),gt}function gr(Ge,we){for(var Ce=[],He=0;He<Ge.length;He++){var Qe,ot=Ge[He],gt=ot.type;if(gt==="Point"||gt==="MultiPoint"||gt==="LineString")Qe=Xr(ot.geometry,we);else if(gt==="MultiLineString"||gt==="Polygon"){Qe=[];for(var yt=0;yt<ot.geometry.length;yt++)Qe.push(Xr(ot.geometry[yt],we))}else if(gt==="MultiPolygon")for(Qe=[],yt=0;yt<ot.geometry.length;yt++){for(var ct=[],bt=0;bt<ot.geometry[yt].length;bt++)ct.push(Xr(ot.geometry[yt][bt],we));Qe.push(ct)}Ce.push(mr(ot.id,gt,Qe,ot.tags))}return Ce}function Xr(Ge,we){var Ce=[];Ce.size=Ge.size,Ge.start!==void 0&&(Ce.start=Ge.start,Ce.end=Ge.end);for(var He=0;He<Ge.length;He+=3)Ce.push(Ge[He]+we,Ge[He+1],Ge[He+2]);return Ce}function Hn(Ge,we){if(Ge.transformed)return Ge;var Ce,He,Qe,ot=1<<Ge.z,gt=Ge.x,yt=Ge.y;for(Ce=0;Ce<Ge.features.length;Ce++){var ct=Ge.features[Ce],bt=ct.geometry,qt=ct.type;if(ct.geometry=[],qt===1)for(He=0;He<bt.length;He+=2)ct.geometry.push(ti(bt[He],bt[He+1],we,ot,gt,yt));else for(He=0;He<bt.length;He++){var Kt=[];for(Qe=0;Qe<bt[He].length;Qe+=2)Kt.push(ti(bt[He][Qe],bt[He][Qe+1],we,ot,gt,yt));ct.geometry.push(Kt)}}return Ge.transformed=!0,Ge}function ti(Ge,we,Ce,He,Qe,ot){return[Math.round(Ce*(Ge*He-Qe)),Math.round(Ce*(we*He-ot))]}function qn(Ge,we,Ce,He,Qe){for(var ot=we===Qe.maxZoom?0:Qe.tolerance/((1<<we)*Qe.extent),gt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ce,y:He,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},yt=0;yt<Ge.length;yt++){gt.numFeatures++,Ii(gt,Ge[yt],ot,Qe);var ct=Ge[yt].minX,bt=Ge[yt].minY,qt=Ge[yt].maxX,Kt=Ge[yt].maxY;ct<gt.minX&&(gt.minX=ct),bt<gt.minY&&(gt.minY=bt),qt>gt.maxX&&(gt.maxX=qt),Kt>gt.maxY&&(gt.maxY=Kt)}return gt}function Ii(Ge,we,Ce,He){var Qe=we.geometry,ot=we.type,gt=[];if(ot==="Point"||ot==="MultiPoint")for(var yt=0;yt<Qe.length;yt+=3)gt.push(Qe[yt]),gt.push(Qe[yt+1]),Ge.numPoints++,Ge.numSimplified++;else if(ot==="LineString")zi(gt,Qe,Ge,Ce,!1,!1);else if(ot==="MultiLineString"||ot==="Polygon")for(yt=0;yt<Qe.length;yt++)zi(gt,Qe[yt],Ge,Ce,ot==="Polygon",yt===0);else if(ot==="MultiPolygon")for(var ct=0;ct<Qe.length;ct++){var bt=Qe[ct];for(yt=0;yt<bt.length;yt++)zi(gt,bt[yt],Ge,Ce,!0,yt===0)}if(gt.length){var qt=we.tags||null;if(ot==="LineString"&&He.lineMetrics){for(var Kt in qt={},we.tags)qt[Kt]=we.tags[Kt];qt.mapbox_clip_start=Qe.start/Qe.size,qt.mapbox_clip_end=Qe.end/Qe.size}var Gt={geometry:gt,type:ot==="Polygon"||ot==="MultiPolygon"?3:ot==="LineString"||ot==="MultiLineString"?2:1,tags:qt};we.id!==null&&(Gt.id=we.id),Ge.features.push(Gt)}}function zi(Ge,we,Ce,He,Qe,ot){var gt=He*He;if(He>0&&we.size<(Qe?gt:He))Ce.numPoints+=we.length/3;else{for(var yt=[],ct=0;ct<we.length;ct+=3)(He===0||we[ct+2]>gt)&&(Ce.numSimplified++,yt.push(we[ct]),yt.push(we[ct+1])),Ce.numPoints++;Qe&&function(bt,qt){for(var Kt=0,Gt=0,Dr=bt.length,Qr=Dr-2;Gt<Dr;Qr=Gt,Gt+=2)Kt+=(bt[Gt]-bt[Qr])*(bt[Gt+1]+bt[Qr+1]);if(Kt>0===qt)for(Gt=0,Dr=bt.length;Gt<Dr/2;Gt+=2){var Vr=bt[Gt],jr=bt[Gt+1];bt[Gt]=bt[Dr-2-Gt],bt[Gt+1]=bt[Dr-1-Gt],bt[Dr-2-Gt]=Vr,bt[Dr-1-Gt]=jr}}(yt,ot),Ge.push(yt)}}function Fn(Ge,we){var Ce=(we=this.options=function(Qe,ot){for(var gt in ot)Qe[gt]=ot[gt];return Qe}(Object.create(this.options),we)).debug;if(Ce&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var He=function(Qe,ot){var gt=[];if(Qe.type==="FeatureCollection")for(var yt=0;yt<Qe.features.length;yt++)Br(gt,Qe.features[yt],ot,yt);else Br(gt,Qe.type==="Feature"?Qe:{geometry:Qe},ot);return gt}(Ge,we);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),He=function(Qe,ot){var gt=ot.buffer/ot.extent,yt=Qe,ct=En(Qe,1,-1-gt,gt,0,-1,2,ot),bt=En(Qe,1,1-gt,2+gt,0,-1,2,ot);return(ct||bt)&&(yt=En(Qe,1,-gt,1+gt,0,-1,2,ot)||[],ct&&(yt=gr(ct,1).concat(yt)),bt&&(yt=yt.concat(gr(bt,-1)))),yt}(He,we),He.length&&this.splitTile(He,0,0,0),Ce&&(He.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ki(Ge,we,Ce){return 32*((1<<Ge)*Ce+we)+Ge}function Si(Ge,we){const Ce=Ge.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);const He=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!He)return we(null,null);const Qe=new class{constructor(gt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=gt.length,this._features=gt}feature(gt){return new class{constructor(yt){this._feature=yt,this.extent=s.EXTENT,this.type=yt.type,this.properties=yt.tags,"id"in yt&&!isNaN(yt.id)&&(this.id=parseInt(yt.id,10))}loadGeometry(){if(this._feature.type===1){const yt=[];for(const ct of this._feature.geometry)yt.push([new s.Point(ct[0],ct[1])]);return yt}{const yt=[];for(const ct of this._feature.geometry){const bt=[];for(const qt of ct)bt.push(new s.Point(qt[0],qt[1]));yt.push(bt)}return yt}}toGeoJSON(yt,ct,bt){return ae.call(this,yt,ct,bt)}}(this._features[gt])}}(He.features);let ot=or(Qe);ot.byteOffset===0&&ot.byteLength===ot.buffer.byteLength||(ot=new Uint8Array(ot)),we(null,{vectorTile:Qe,rawData:ot.buffer})}Fn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Fn.prototype.splitTile=function(Ge,we,Ce,He,Qe,ot,gt){for(var yt=[Ge,we,Ce,He],ct=this.options,bt=ct.debug;yt.length;){He=yt.pop(),Ce=yt.pop(),we=yt.pop(),Ge=yt.pop();var qt=1<<we,Kt=Ki(we,Ce,He),Gt=this.tiles[Kt];if(!Gt&&(bt>1&&console.time("creation"),Gt=this.tiles[Kt]=qn(Ge,we,Ce,He,ct),this.tileCoords.push({z:we,x:Ce,y:He}),bt)){bt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Ce,He,Gt.numFeatures,Gt.numPoints,Gt.numSimplified),console.timeEnd("creation"));var Dr="z"+we;this.stats[Dr]=(this.stats[Dr]||0)+1,this.total++}if(Gt.source=Ge,Qe){if(we===ct.maxZoom||we===Qe)continue;var Qr=1<<Qe-we;if(Ce!==Math.floor(ot/Qr)||He!==Math.floor(gt/Qr))continue}else if(we===ct.indexMaxZoom||Gt.numPoints<=ct.indexMaxPoints)continue;if(Gt.source=null,Ge.length!==0){bt>1&&console.time("clipping");var Vr,jr,Rr,Cn,Bn,$n,gn=.5*ct.buffer/ct.extent,Ni=.5-gn,Wn=.5+gn,Yn=1+gn;Vr=jr=Rr=Cn=null,Bn=En(Ge,qt,Ce-gn,Ce+Wn,0,Gt.minX,Gt.maxX,ct),$n=En(Ge,qt,Ce+Ni,Ce+Yn,0,Gt.minX,Gt.maxX,ct),Ge=null,Bn&&(Vr=En(Bn,qt,He-gn,He+Wn,1,Gt.minY,Gt.maxY,ct),jr=En(Bn,qt,He+Ni,He+Yn,1,Gt.minY,Gt.maxY,ct),Bn=null),$n&&(Rr=En($n,qt,He-gn,He+Wn,1,Gt.minY,Gt.maxY,ct),Cn=En($n,qt,He+Ni,He+Yn,1,Gt.minY,Gt.maxY,ct),$n=null),bt>1&&console.timeEnd("clipping"),yt.push(Vr||[],we+1,2*Ce,2*He),yt.push(jr||[],we+1,2*Ce,2*He+1),yt.push(Rr||[],we+1,2*Ce+1,2*He),yt.push(Cn||[],we+1,2*Ce+1,2*He+1)}}},Fn.prototype.getTile=function(Ge,we,Ce){var He=this.options,Qe=He.extent,ot=He.debug;if(Ge<0||Ge>24)return null;var gt=1<<Ge,yt=Ki(Ge,we=(we%gt+gt)%gt,Ce);if(this.tiles[yt])return Hn(this.tiles[yt],Qe);ot>1&&console.log("drilling down to z%d-%d-%d",Ge,we,Ce);for(var ct,bt=Ge,qt=we,Kt=Ce;!ct&&bt>0;)bt--,qt=Math.floor(qt/2),Kt=Math.floor(Kt/2),ct=this.tiles[Ki(bt,qt,Kt)];return ct&&ct.source?(ot>1&&console.log("found parent tile z%d-%d-%d",bt,qt,Kt),ot>1&&console.time("drilling down"),this.splitTile(ct.source,bt,qt,Kt,Ge,we,Ce),ot>1&&console.timeEnd("drilling down"),this.tiles[yt]?Hn(this.tiles[yt],Qe):null):null};class is extends s.VectorTileWorkerSource{constructor(we,Ce,He,Qe,ot){super(we,Ce,He,Qe,Si),ot&&(this.loadGeoJSON=ot)}loadData(we,Ce){const He=we&&we.request,Qe=He&&He.collectResourceTiming;this.loadGeoJSON(we,(ot,gt)=>{if(ot||!gt)return Ce(ot);if(typeof gt!="object")return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));{Z(gt,!0);try{if(we.filter){const ct=s.createExpression(we.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ct.result==="error")throw new Error(ct.value.map(qt=>`${qt.key}: ${qt.message}`).join(", "));gt={type:"FeatureCollection",features:gt.features.filter(qt=>ct.value.evaluate({zoom:0},qt))}}this._geoJSONIndex=we.cluster?new Vt(function({superclusterOptions:ct,clusterProperties:bt}){if(!bt||!ct)return ct;const qt={},Kt={},Gt={accumulated:null,zoom:0},Dr={properties:null},Qr=Object.keys(bt);for(const Vr of Qr){const[jr,Rr]=bt[Vr],Cn=s.createExpression(Rr),Bn=s.createExpression(typeof jr=="string"?[jr,["accumulated"],["get",Vr]]:jr);qt[Vr]=Cn.value,Kt[Vr]=Bn.value}return ct.map=Vr=>{Dr.properties=Vr;const jr={};for(const Rr of Qr)jr[Rr]=qt[Rr].evaluate(Gt,Dr);return jr},ct.reduce=(Vr,jr)=>{Dr.properties=jr;for(const Rr of Qr)Gt.accumulated=Vr[Rr],Vr[Rr]=Kt[Rr].evaluate(Gt,Dr)},ct}(we)).load(gt.features):function(ct,bt){return new Fn(ct,bt)}(gt,we.geojsonVtOptions)}catch(ct){return Ce(ct)}this.loaded={};const yt={};if(Qe){const ct=s.getPerformanceMeasurement(He);ct&&(yt.resourceTiming={},yt.resourceTiming[we.source]=JSON.parse(JSON.stringify(ct)))}Ce(null,yt)}})}reloadTile(we,Ce){const He=this.loaded;return He&&He[we.uid]?super.reloadTile(we,Ce):this.loadTile(we,Ce)}loadGeoJSON(we,Ce){if(we.request)s.getJSON(we.request,Ce);else{if(typeof we.data!="string")return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`));try{return Ce(null,JSON.parse(we.data))}catch{return Ce(new Error(`Input data given to '${we.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(we,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(we.clusterId))}catch(He){Ce(He)}}getClusterChildren(we,Ce){try{Ce(null,this._geoJSONIndex.getChildren(we.clusterId))}catch(He){Ce(He)}}getClusterLeaves(we,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(we.clusterId,we.limit,we.offset))}catch(He){Ce(He)}}}class Ds{constructor(we){this.self=we,this.actor=new s.Actor(we,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:is},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ce,He)=>{if(this.workerSourceTypes[Ce])throw new Error(`Worker source with name "${Ce}" already registered.`);this.workerSourceTypes[Ce]=He},this.self.registerRTLTextPlugin=Ce=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=Ce.applyArabicShaping,s.plugin.processBidirectionalText=Ce.processBidirectionalText,s.plugin.processStyledBidirectionalText=Ce.processStyledBidirectionalText}}clearCaches(we,Ce,He){delete this.layerIndexes[we],delete this.availableImages[we],delete this.workerSources[we],delete this.demWorkerSources[we],He()}checkIfReady(we,Ce,He){He()}setReferrer(we,Ce){this.referrer=Ce}spriteLoaded(we,Ce){this.isSpriteLoaded[we]=Ce;for(const He in this.workerSources[we]){const Qe=this.workerSources[we][He];for(const ot in Qe)Qe[ot]instanceof s.VectorTileWorkerSource&&(Qe[ot].isSpriteLoaded=Ce,Qe[ot].fire(new s.Event("isSpriteLoaded")))}}setImages(we,Ce,He){this.availableImages[we]=Ce;for(const Qe in this.workerSources[we]){const ot=this.workerSources[we][Qe];for(const gt in ot)ot[gt].availableImages=Ce}He()}enableTerrain(we,Ce,He){this.terrain=Ce,He()}setProjection(we,Ce){this.projections[we]=s.getProjection(Ce)}setLayers(we,Ce,He){this.getLayerIndex(we).replace(Ce),He()}updateLayers(we,Ce,He){this.getLayerIndex(we).update(Ce.layers,Ce.removedIds),He()}loadTile(we,Ce,He){const Qe=this.enableTerrain?s.extend({enableTerrain:this.terrain},Ce):Ce;Qe.projection=this.projections[we]||this.defaultProjection,this.getWorkerSource(we,Ce.type,Ce.source).loadTile(Qe,He)}loadDEMTile(we,Ce,He){const Qe=this.enableTerrain?s.extend({buildQuadTree:this.terrain},Ce):Ce;this.getDEMWorkerSource(we,Ce.source).loadTile(Qe,He)}reloadTile(we,Ce,He){const Qe=this.enableTerrain?s.extend({enableTerrain:this.terrain},Ce):Ce;Qe.projection=this.projections[we]||this.defaultProjection,this.getWorkerSource(we,Ce.type,Ce.source).reloadTile(Qe,He)}abortTile(we,Ce,He){this.getWorkerSource(we,Ce.type,Ce.source).abortTile(Ce,He)}removeTile(we,Ce,He){this.getWorkerSource(we,Ce.type,Ce.source).removeTile(Ce,He)}removeSource(we,Ce,He){if(!this.workerSources[we]||!this.workerSources[we][Ce.type]||!this.workerSources[we][Ce.type][Ce.source])return;const Qe=this.workerSources[we][Ce.type][Ce.source];delete this.workerSources[we][Ce.type][Ce.source],Qe.removeSource!==void 0?Qe.removeSource(Ce,He):He()}loadWorkerSource(we,Ce,He){try{this.self.importScripts(Ce.url),He()}catch(Qe){He(Qe.toString())}}syncRTLPluginState(we,Ce,He){try{s.plugin.setState(Ce);const Qe=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Qe!=null){this.self.importScripts(Qe);const ot=s.plugin.isParsed();He(ot?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Qe}`),ot)}}catch(Qe){He(Qe.toString())}}getAvailableImages(we){let Ce=this.availableImages[we];return Ce||(Ce=[]),Ce}getLayerIndex(we){let Ce=this.layerIndexes[we];return Ce||(Ce=this.layerIndexes[we]=new D),Ce}getWorkerSource(we,Ce,He){if(this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][Ce]||(this.workerSources[we][Ce]={}),!this.workerSources[we][Ce][He]){const Qe={send:(ot,gt,yt,ct,bt,qt)=>{this.actor.send(ot,gt,yt,we,bt,qt)},scheduler:this.actor.scheduler};this.workerSources[we][Ce][He]=new this.workerSourceTypes[Ce](Qe,this.getLayerIndex(we),this.getAvailableImages(we),this.isSpriteLoaded[we])}return this.workerSources[we][Ce][He]}getDEMWorkerSource(we,Ce){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Ce]||(this.demWorkerSources[we][Ce]=new N),this.demWorkerSources[we][Ce]}enforceCacheSizeLimit(we,Ce){s.enforceCacheSizeLimit(Ce)}getWorkerPerformanceMetrics(we,Ce,He){He(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ds(self)),Ds}),f(["./shared"],function(s){function k(_,h){if(Array.isArray(_)){if(!Array.isArray(h)||_.length!==h.length)return!1;for(let g=0;g<_.length;g++)if(!k(_[g],h[g]))return!1;return!0}if(typeof _=="object"&&_!==null&&h!==null){if(typeof h!="object"||Object.keys(_).length!==Object.keys(h).length)return!1;for(const g in _)if(!k(_[g],h[g]))return!1;return!0}return _===h}var I=D;function D(_){return!function(h){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var C,P,L=new Blob([""],{type:"text/javascript"}),V=URL.createObjectURL(L);try{P=new Worker(V),C=!0}catch{C=!1}return P&&P.terminate(),URL.revokeObjectURL(V),C}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var C=document.createElement("canvas");C.width=C.height=1;var P=C.getContext("2d");if(!P)return!1;var L=P.getImageData(0,0,1,1);return L&&L.width===C.width}()?(N[g=h&&h.failIfMajorPerformanceCaveat]===void 0&&(N[g]=function(C){var P,L=function(V){var G=document.createElement("canvas"),J=Object.create(D.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=V,G.getContext("webgl",J)||G.getContext("experimental-webgl",J)}(C);if(!L)return!1;try{P=L.createShader(L.VERTEX_SHADER)}catch{return!1}return!(!P||L.isContextLost())&&(L.shaderSource(P,"void main() {}"),L.compileShader(P),L.getShaderParameter(P,L.COMPILE_STATUS)===!0)}(g)),N[g]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var g}(_)}var N={};function U(_,h,g){const C=s.window.document.createElement(_);return h!==void 0&&(C.className=h),g&&g.appendChild(C),C}function q(_,h,g){const C=s.window.document.createElementNS("http://www.w3.org/2000/svg",_);for(const P of Object.keys(h))C.setAttributeNS(null,P,h[P]);return g&&g.appendChild(C),C}D.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Z=s.window.document&&s.window.document.documentElement.style,ae=Z&&Z.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ve;function ie(){Z&&ae&&(ve=Z[ae],Z[ae]="none")}function W(){Z&&ae&&(Z[ae]=ve)}function K(_){_.preventDefault(),_.stopPropagation(),s.window.removeEventListener("click",K,!0)}function he(){s.window.addEventListener("click",K,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",K,!0)},0)}function de(_,h){const g=_.getBoundingClientRect();return Ue(_,g,h)}function Ae(_,h){const g=_.getBoundingClientRect(),C=[];for(let P=0;P<h.length;P++)C.push(Ue(_,g,h[P]));return C}function Te(_){return s.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button}function Ue(_,h,g){const C=_.offsetWidth===h.width?1:_.offsetWidth/h.width;return new s.Point((g.clientX-h.left)*C,(g.clientY-h.top)*C)}function Pe(_,h){var g=h[0],C=h[1],P=h[2],L=h[3],V=g*L-P*C;return V?(_[0]=L*(V=1/V),_[1]=-C*V,_[2]=-P*V,_[3]=g*V,_):null}function $e(_){const{userImage:h}=_;return!!(h&&h.render&&h.render())&&(_.data.replace(new Uint8Array(h.data.buffer)),!0)}class Ve extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(h){if(this.loaded!==h&&(this.loaded=h,h)){for(const{ids:g,callback:C}of this.requestors)this._notify(g,C);this.requestors=[]}}hasImage(h){return!!this.getImage(h)}getImage(h){return this.images[h]}addImage(h,g){this._validate(h,g)&&(this.images[h]=g)}_validate(h,g){let C=!0;return this._validateStretch(g.stretchX,g.data&&g.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${h}" has invalid "stretchX" value`))),C=!1),this._validateStretch(g.stretchY,g.data&&g.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${h}" has invalid "stretchY" value`))),C=!1),this._validateContent(g.content,g)||(this.fire(new s.ErrorEvent(new Error(`Image "${h}" has invalid "content" value`))),C=!1),C}_validateStretch(h,g){if(!h)return!0;let C=0;for(const P of h){if(P[0]<C||P[1]<P[0]||g<P[1])return!1;C=P[1]}return!0}_validateContent(h,g){return!(h&&(h.length!==4||h[0]<0||g.data.width<h[0]||h[1]<0||g.data.height<h[1]||h[2]<0||g.data.width<h[2]||h[3]<0||g.data.height<h[3]||h[2]<h[0]||h[3]<h[1]))}updateImage(h,g){g.version=this.images[h].version+1,this.images[h]=g,this.updatedImages[h]=!0}removeImage(h){const g=this.images[h];delete this.images[h],delete this.patterns[h],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(h,g){let C=!0;if(!this.isLoaded())for(const P of h)this.images[P]||(C=!1);this.isLoaded()||C?this._notify(h,g):this.requestors.push({ids:h,callback:g})}_notify(h,g){const C={};for(const P of h){this.images[P]||this.fire(new s.Event("styleimagemissing",{id:P}));const L=this.images[P];L?C[P]={data:L.data.clone(),pixelRatio:L.pixelRatio,sdf:L.sdf,version:L.version,stretchX:L.stretchX,stretchY:L.stretchY,content:L.content,hasRenderCallback:!!(L.userImage&&L.userImage.render)}:s.warnOnce(`Image "${P}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,C)}getPixelSize(){const{width:h,height:g}=this.atlasImage;return{width:h,height:g}}getPattern(h){const g=this.patterns[h],C=this.getImage(h);if(!C)return null;if(g&&g.position.version===C.version)return g.position;if(g)g.position.version=C.version;else{const P={w:C.data.width+2,h:C.data.height+2,x:0,y:0},L=new s.ImagePosition(P,C);this.patterns[h]={bin:P,position:L}}return this._updatePatternAtlas(),this.patterns[h].position}bind(h){const g=h.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(h,this.atlasImage,g.RGBA),this.atlasTexture&&this.atlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(){const h=[];for(const L in this.patterns)h.push(this.patterns[L].bin);const{w:g,h:C}=s.potpack(h),P=this.atlasImage;P.resize({width:g||1,height:C||1});for(const L in this.patterns){const{bin:V}=this.patterns[L],G=V.x+1,J=V.y+1,oe=this.images[L].data,se=oe.width,me=oe.height;s.RGBAImage.copy(oe,P,{x:0,y:0},{x:G,y:J},{width:se,height:me}),s.RGBAImage.copy(oe,P,{x:0,y:me-1},{x:G,y:J-1},{width:se,height:1}),s.RGBAImage.copy(oe,P,{x:0,y:0},{x:G,y:J+me},{width:se,height:1}),s.RGBAImage.copy(oe,P,{x:se-1,y:0},{x:G-1,y:J},{width:1,height:me}),s.RGBAImage.copy(oe,P,{x:0,y:0},{x:G+se,y:J},{width:1,height:me})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(h){for(const g of h){if(this.callbackDispatchedThisFrame[g])continue;this.callbackDispatchedThisFrame[g]=!0;const C=this.images[g];$e(C)&&this.updateImage(g,C)}}}const Fe=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(_,h){return function([g,C,P]){const L=s.degToRad(C+90),V=s.degToRad(P);return{x:g*Math.cos(L)*Math.sin(V),y:g*Math.sin(L)*Math.sin(V),z:g*Math.cos(V),azimuthal:C,polar:P}}(_.expression.evaluate(h))}interpolate(_,h,g){return{x:s.number(_.x,h.x,g),y:s.number(_.y,h.y,g),z:s.number(_.z,h.z,g),azimuthal:s.number(_.azimuthal,h.azimuthal,g),polar:s.number(_.polar,h.polar,g)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class Ye extends s.Evented{constructor(h){super(),this._transitionable=new s.Transitionable(Fe),this.setLight(h),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(h,g={}){if(!this._validate(s.validateLight,h,g))for(const C in h){const P=h[C];s.endsWith(C,"-transition")?this._transitionable.setTransition(C.slice(0,-11),P):this._transitionable.setValue(C,P)}}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,g,C){return(!C||C.validate!==!1)&&s.emitValidationErrors(this,h.call(s.validateStyle,s.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const ft=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Pt=class extends s.Evented{constructor(_,h){super(),this._transitionable=new s.Transitionable(ft),this.set(_),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(_){for(const h in _){const g=_[h];s.endsWith(h,"-transition")?this._transitionable.setTransition(h.slice(0,-11),g):this._transitionable.setValue(h,g)}}updateTransitions(_){this._transitioning=this._transitionable.transitioned(_,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(_){this.properties=this._transitioning.possiblyEvaluate(_)}};function or(_,h,g,C){const P=s.smoothstep(45,65,g),[L,V]=xr(_,C),G=s.length(h);let J=1-Math.min(1,Math.exp((G-L)/(V-L)*-6));return J*=J*J,J=Math.min(1,1.00747*J),J*P*_.alpha}function xr(_,h){const g=.5/Math.tan(.5*h);return[_.range[0]+g,_.range[1]+g]}const mt=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Xt extends s.Evented{constructor(h,g){super(),this._transitionable=new s.Transitionable(mt),this.set(h),this._transitioning=this._transitionable.untransitioned(),this._transform=g}get state(){const h=this._transform,g=h.projection.name==="globe",C=s.globeToMercatorTransition(h.zoom),P=this.properties.get("range"),L=[.5,3];return{range:g?[s.number(L[0],P[0],C),s.number(L[1],P[1],C)]:P,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(h,g={}){if(!this._validate(s.validateFog,h,g)){for(const C of Object.keys(s.spec.fog))h&&h[C]===void 0&&(h[C]=s.spec.fog[C].default);for(const C in h){const P=h[C];s.endsWith(C,"-transition")?this._transitionable.setTransition(C.slice(0,-11),P):this._transitionable.setValue(C,P)}}}getOpacity(h){if(!this._transform.projection.supportsFog)return 0;const g=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,h))*g.a}getOpacityAtLatLng(h,g){return this._transform.projection.supportsFog?function(C,P,L){const V=s.MercatorCoordinate.fromLngLat(P),G=L.elevation?L.elevation.getAtPointOrZero(V):0,J=[V.x,V.y,G];return s.transformMat4(J,J,L.mercatorFogMatrix),or(C,J,L.pitch,L._fov)}(this.state,h,g):0}getFovAdjustedRange(h){return this._transform.projection.supportsFog?xr(this.state,h):[0,1]}updateTransitions(h){this._transitioning=this._transitionable.transitioned(h,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(h){this.properties=this._transitioning.possiblyEvaluate(h)}_validate(h,g,C){return(!C||C.validate!==!1)&&s.emitValidationErrors(this,h.call(s.validateStyle,s.extend({value:g,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Wt{constructor(h,g){this.workerPool=h,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const C=this.workerPool.acquire(this.id);for(let P=0;P<C.length;P++){const L=new Wt.Actor(C[P],g,this.id);L.name=`Worker ${P}`,this.actors.push(L)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(h,g,C){s.asyncAll(this.actors,(P,L)=>{P.send(h,g,L)},C=C||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(h=>{h.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Ot(_,h,g){return h*(s.EXTENT/(_.tileSize*Math.pow(2,g-_.tileID.overscaledZ)))}Wt.Actor=s.Actor;class ut{constructor(h,g,C,P){this.screenBounds=h,this.cameraPoint=g,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=C,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,P)}static createFromScreenPoints(h,g){let C,P;if(h instanceof s.Point||typeof h[0]=="number"){const L=s.Point.convert(h);C=[L],P=g.isPointAboveHorizon(L)}else{const L=s.Point.convert(h[0]),V=s.Point.convert(h[1]);C=[L,V],P=s.polygonizeBounds(L,V).every(G=>g.isPointAboveHorizon(G))}return new ut(C,g.getCameraPoint(),P,g)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(h){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],h)}bufferedCameraGeometry(h){const g=this.screenBounds[0],C=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],P=s.polygonizeBounds(g,C,0,!1);return this.cameraPoint.y>C.y&&(this.cameraPoint.x>g.x&&this.cameraPoint.x<C.x?P.splice(3,0,this.cameraPoint):this.cameraPoint.x>=C.x?P[2]=this.cameraPoint:this.cameraPoint.x<=g.x&&(P[3]=this.cameraPoint)),s.bufferConvexPolygon(P,h)}bufferedCameraGeometryGlobe(h){const g=this.screenBounds[0],C=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],P=s.polygonizeBounds(g,C,h),L=this.cameraPoint.clone();switch(3*((L.y>g.y)+(L.y>C.y))+((L.x>g.x)+(L.x>C.x))){case 0:P[0]=L,P[4]=L.clone();break;case 1:P.splice(1,0,L);break;case 2:P[1]=L;break;case 3:P.splice(4,0,L);break;case 5:P.splice(2,0,L);break;case 6:P[3]=L;break;case 7:P.splice(3,0,L);break;case 8:P[2]=L}return P}containsTile(h,g,C,P=0){const L=h.queryPadding/g._pixelsPerMercatorPixel+1,V=C?this._bufferedCameraMercator(L,g):this._bufferedScreenMercator(L,g);let G=h.tileID.wrap+(V.unwrapped?P:0);const J=V.polygon.map(Ne=>s.getTilePoint(h.tileTransform,Ne,G));if(!s.polygonIntersectsBox(J,0,0,s.EXTENT,s.EXTENT))return;G=h.tileID.wrap+(this.screenGeometryMercator.unwrapped?P:0);const oe=this.screenGeometryMercator.polygon.map(Ne=>s.getTileVec3(h.tileTransform,Ne,G)),se=oe.map(Ne=>new s.Point(Ne[0],Ne[1])),me=g.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),Ie=s.getTileVec3(h.tileTransform,me,G),Oe=oe.map(Ne=>{const ge=s.sub(Ne,Ne,Ie);return s.normalize(ge,ge),new s.Ray(Ie,ge)}),ze=Ot(h,1,g.zoom)*g._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:se,tilespaceRays:Oe,bufferedTilespaceGeometry:J,bufferedTilespaceBounds:(De=s.getBounds(J),De.min.x=s.clamp(De.min.x,0,s.EXTENT),De.min.y=s.clamp(De.min.y,0,s.EXTENT),De.max.x=s.clamp(De.max.x,0,s.EXTENT),De.max.y=s.clamp(De.max.y,0,s.EXTENT),De),tile:h,tileID:h.tileID,pixelToTileUnitsFactor:ze};var De}_bufferedScreenMercator(h,g){const C=vt(h);if(this._screenRaycastCache[C])return this._screenRaycastCache[C];{let P;return P=g.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(h),g):{polygon:this.bufferedScreenGeometry(h).map(L=>g.pointCoordinate3D(L)),unwrapped:!0},this._screenRaycastCache[C]=P,P}}_bufferedCameraMercator(h,g){const C=vt(h);if(this._cameraRaycastCache[C])return this._cameraRaycastCache[C];{let P;return P=g.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(h),g):{polygon:this.bufferedCameraGeometry(h).map(L=>g.pointCoordinate3D(L)),unwrapped:!0},this._cameraRaycastCache[C]=P,P}}_projectAndResample(h,g){const C=function(L,V){const G=s.multiply([],V.pixelMatrix,V.globeMatrix),J=[0,-s.GLOBE_RADIUS,0,1],oe=[0,s.GLOBE_RADIUS,0,1],se=[0,0,0,1];s.transformMat4$1(J,J,G),s.transformMat4$1(oe,oe,G),s.transformMat4$1(se,se,G);const me=new s.Point(J[0]/J[3],J[1]/J[3]),Ie=new s.Point(oe[0]/oe[3],oe[1]/oe[3]),Oe=s.polygonContainsPoint(L,me)&&J[3]<se[3],ze=s.polygonContainsPoint(L,Ie)&&oe[3]<se[3];if(!Oe&&!ze)return null;const De=function(at,pt,dt){for(let Ct=1;Ct<at.length;Ct++){const Qt=ir(pt.pointCoordinate3D(at[Ct-1]).x),_t=ir(pt.pointCoordinate3D(at[Ct]).x);if(dt<0){if(Qt<_t)return{idx:Ct,t:-Qt/(_t-1-Qt)}}else if(_t<Qt)return{idx:Ct,t:(1-Qt)/(_t+1-Qt)}}return null}(L,V,Oe?-1:1);if(!De)return null;const{idx:Ne,t:ge}=De;let Me=Ne>1?Vt(L.slice(0,Ne),V):[],We=Ne<L.length?Vt(L.slice(Ne),V):[];Me=Me.map(at=>new s.Point(ir(at.x),at.y)),We=We.map(at=>new s.Point(ir(at.x),at.y));const qe=[...Me];qe.length===0&&qe.push(We[We.length-1]);const st=s.number(qe[qe.length-1].y,(We.length===0?Me[0]:We[0]).y,ge);let lt;return lt=Oe?[new s.Point(0,st),new s.Point(0,0),new s.Point(1,0),new s.Point(1,st)]:[new s.Point(1,st),new s.Point(1,1),new s.Point(0,1),new s.Point(0,st)],qe.push(...lt),We.length===0?qe.push(Me[0]):qe.push(...We),{polygon:qe.map(at=>new s.MercatorCoordinate(at.x,at.y)),unwrapped:!1}}(h,g);if(C)return C;const P=function(L,V){let G=!1,J=-1/0,oe=0;for(let me=0;me<L.length-1;me++)L[me].x>J&&(J=L[me].x,oe=me);for(let me=0;me<L.length-1;me++){const Ie=(oe+me)%(L.length-1),Oe=L[Ie],ze=L[Ie+1];Math.abs(Oe.x-ze.x)>.5&&(Oe.x<ze.x?(Oe.x+=1,Ie===0&&(L[L.length-1].x+=1)):(ze.x+=1,Ie+1===L.length-1&&(L[0].x+=1)),G=!0)}const se=s.mercatorXfromLng(V.center.lng);return G&&se<Math.abs(se-1)&&L.forEach(me=>{me.x-=1}),{polygon:L,unwrapped:G}}(Vt(h,g).map(L=>new s.Point(ir(L.x),L.y)),g);return{polygon:P.polygon.map(L=>new s.MercatorCoordinate(L.x,L.y)),unwrapped:P.unwrapped}}}function Vt(_,h){return s.resample(_,g=>{const C=h.pointCoordinate3D(g);g.x=C.x,g.y=C.y},1/256)}function ir(_){return _<0?1+_%1:_%1}function vt(_){return 100*_|0}function Dt(_,h,g,C,P){const L=function(V,G){if(V)return P(V);if(G){_.url&&G.tiles&&_.tiles&&delete _.tiles;const J=s.pick(s.extend(G,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);G.vector_layers&&(J.vectorLayers=G.vector_layers,J.vectorLayerIds=J.vectorLayers.map(oe=>oe.id)),J.tiles=h.canonicalizeTileset(J,_.url),P(null,J)}};return _.url?s.getJSON(h.transformRequest(h.normalizeSourceURL(_.url,null,g,C),s.ResourceType.Source),L):s.exported.frame(()=>L(null,_))}class ur{constructor(h,g,C){this.bounds=s.LngLatBounds.convert(this.validateBounds(h)),this.minzoom=g||0,this.maxzoom=C||24}validateBounds(h){return Array.isArray(h)&&h.length===4?[Math.max(-180,h[0]),Math.max(-90,h[1]),Math.min(180,h[2]),Math.min(90,h[3])]:[-180,-90,180,90]}contains(h){const g=Math.pow(2,h.z),C=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*g),P=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*g),L=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*g),V=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*g);return h.x>=C&&h.x<L&&h.y>=P&&h.y<V}}class Tr{constructor(h,g,C){this.context=h;const P=h.gl;this.buffer=P.createBuffer(),this.dynamicDraw=!!C,this.context.unbindVAO(),h.bindElementBuffer.set(this.buffer),P.bufferData(P.ELEMENT_ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?P.DYNAMIC_DRAW:P.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(h){const g=this.context.gl;this.context.unbindVAO(),this.bind(),g.bufferSubData(g.ELEMENT_ARRAY_BUFFER,0,h.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Cr{constructor(h,g,C,P){this.length=g.length,this.attributes=C,this.itemSize=g.bytesPerElement,this.dynamicDraw=P,this.context=h;const L=h.gl;this.buffer=L.createBuffer(),h.bindVertexBuffer.set(this.buffer),L.bufferData(L.ARRAY_BUFFER,g.arrayBuffer,this.dynamicDraw?L.DYNAMIC_DRAW:L.STATIC_DRAW),this.dynamicDraw||g.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(h){const g=this.context.gl;this.bind(),g.bufferSubData(g.ARRAY_BUFFER,0,h.arrayBuffer)}enableAttributes(h,g){for(let C=0;C<this.attributes.length;C++){const P=g.attributes[this.attributes[C].name];P!==void 0&&h.enableVertexAttribArray(P)}}setVertexAttribPointers(h,g,C){for(let P=0;P<this.attributes.length;P++){const L=this.attributes[P],V=g.attributes[L.name];V!==void 0&&h.vertexAttribPointer(V,L.components,h[fr[L.type]],!1,this.itemSize,L.offset+this.itemSize*(C||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class mr{constructor(h){this.gl=h.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(h){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nn extends mr{getDefault(){return s.Color.transparent}set(h){const g=this.current;(h.r!==g.r||h.g!==g.g||h.b!==g.b||h.a!==g.a||this.dirty)&&(this.gl.clearColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class Br extends mr{getDefault(){return 1}set(h){(h!==this.current||this.dirty)&&(this.gl.clearDepth(h),this.current=h,this.dirty=!1)}}class Sn extends mr{getDefault(){return 0}set(h){(h!==this.current||this.dirty)&&(this.gl.clearStencil(h),this.current=h,this.dirty=!1)}}class on extends mr{getDefault(){return[!0,!0,!0,!0]}set(h){const g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3]||this.dirty)&&(this.gl.colorMask(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class Gr extends mr{getDefault(){return!0}set(h){(h!==this.current||this.dirty)&&(this.gl.depthMask(h),this.current=h,this.dirty=!1)}}class Zi extends mr{getDefault(){return 255}set(h){(h!==this.current||this.dirty)&&(this.gl.stencilMask(h),this.current=h,this.dirty=!1)}}class Kr extends mr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(h){const g=this.current;(h.func!==g.func||h.ref!==g.ref||h.mask!==g.mask||this.dirty)&&(this.gl.stencilFunc(h.func,h.ref,h.mask),this.current=h,this.dirty=!1)}}class En extends mr{getDefault(){const h=this.gl;return[h.KEEP,h.KEEP,h.KEEP]}set(h){const g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||this.dirty)&&(this.gl.stencilOp(h[0],h[1],h[2]),this.current=h,this.dirty=!1)}}class wi extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;h?g.enable(g.STENCIL_TEST):g.disable(g.STENCIL_TEST),this.current=h,this.dirty=!1}}class Hi extends mr{getDefault(){return[0,1]}set(h){const g=this.current;(h[0]!==g[0]||h[1]!==g[1]||this.dirty)&&(this.gl.depthRange(h[0],h[1]),this.current=h,this.dirty=!1)}}class Tt extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;h?g.enable(g.DEPTH_TEST):g.disable(g.DEPTH_TEST),this.current=h,this.dirty=!1}}class pr extends mr{getDefault(){return this.gl.LESS}set(h){(h!==this.current||this.dirty)&&(this.gl.depthFunc(h),this.current=h,this.dirty=!1)}}class Er extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;h?g.enable(g.BLEND):g.disable(g.BLEND),this.current=h,this.dirty=!1}}class Mr extends mr{getDefault(){const h=this.gl;return[h.ONE,h.ZERO]}set(h){const g=this.current;(h[0]!==g[0]||h[1]!==g[1]||this.dirty)&&(this.gl.blendFunc(h[0],h[1]),this.current=h,this.dirty=!1)}}class Zt extends mr{getDefault(){return s.Color.transparent}set(h){const g=this.current;(h.r!==g.r||h.g!==g.g||h.b!==g.b||h.a!==g.a||this.dirty)&&(this.gl.blendColor(h.r,h.g,h.b,h.a),this.current=h,this.dirty=!1)}}class gr extends mr{getDefault(){return this.gl.FUNC_ADD}set(h){(h!==this.current||this.dirty)&&(this.gl.blendEquation(h),this.current=h,this.dirty=!1)}}class Xr extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;h?g.enable(g.CULL_FACE):g.disable(g.CULL_FACE),this.current=h,this.dirty=!1}}class Hn extends mr{getDefault(){return this.gl.BACK}set(h){(h!==this.current||this.dirty)&&(this.gl.cullFace(h),this.current=h,this.dirty=!1)}}class ti extends mr{getDefault(){return this.gl.CCW}set(h){(h!==this.current||this.dirty)&&(this.gl.frontFace(h),this.current=h,this.dirty=!1)}}let qn,Ii=class extends mr{getDefault(){return null}set(_){(_!==this.current||this.dirty)&&(this.gl.useProgram(_),this.current=_,this.dirty=!1)}};class zi extends mr{getDefault(){return this.gl.TEXTURE0}set(h){(h!==this.current||this.dirty)&&(this.gl.activeTexture(h),this.current=h,this.dirty=!1)}}class Fn extends mr{getDefault(){const h=this.gl;return[0,0,h.drawingBufferWidth,h.drawingBufferHeight]}set(h){const g=this.current;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3]||this.dirty)&&(this.gl.viewport(h[0],h[1],h[2],h[3]),this.current=h,this.dirty=!1)}}class Ki extends mr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.bindFramebuffer(g.FRAMEBUFFER,h),this.current=h,this.dirty=!1}}class Si extends mr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.bindRenderbuffer(g.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class is extends mr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.bindTexture(g.TEXTURE_2D,h),this.current=h,this.dirty=!1}}class Ds extends mr{getDefault(){return null}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.bindBuffer(g.ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class Ge extends mr{getDefault(){return null}set(h){const g=this.gl;g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,h),this.current=h,this.dirty=!1}}class we extends mr{constructor(h){super(h),this.vao=h.extVertexArrayObject}getDefault(){return null}set(h){this.vao&&(h!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(h),this.current=h,this.dirty=!1)}}class Ce extends mr{getDefault(){return 4}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_ALIGNMENT,h),this.current=h,this.dirty=!1}}class He extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h),this.current=h,this.dirty=!1}}class Qe extends mr{getDefault(){return!1}set(h){if(h===this.current&&!this.dirty)return;const g=this.gl;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,h),this.current=h,this.dirty=!1}}class ot extends mr{constructor(h,g){super(h),this.context=h,this.parent=g}getDefault(){return null}}class gt extends ot{setDirty(){this.dirty=!0}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,h,0),this.current=h,this.dirty=!1}}class yt extends ot{attachment(){return this.gl.DEPTH_ATTACHMENT}set(h){if(h===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const g=this.gl;g.framebufferRenderbuffer(g.FRAMEBUFFER,this.attachment(),g.RENDERBUFFER,h),this.current=h,this.dirty=!1}}class ct extends yt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class bt{constructor(h,g,C,P){this.context=h,this.width=g,this.height=C;const L=this.framebuffer=h.gl.createFramebuffer();this.colorAttachment=new gt(h,L),P&&(this.depthAttachment=new yt(h,L))}destroy(){const h=this.context.gl,g=this.colorAttachment.get();if(g&&h.deleteTexture(g),this.depthAttachment){const C=this.depthAttachment.get();C&&h.deleteRenderbuffer(C)}h.deleteFramebuffer(this.framebuffer)}}class qt{constructor(h,g=!1){if(this.gl=h,this.isWebGL2=g,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),g){const C=h;this.extVertexArrayObject={createVertexArrayOES:C.createVertexArray.bind(h),deleteVertexArrayOES:C.deleteVertexArray.bind(h),bindVertexArrayOES:C.bindVertexArray.bind(h)}}this.clearColor=new nn(this),this.clearDepth=new Br(this),this.clearStencil=new Sn(this),this.colorMask=new on(this),this.depthMask=new Gr(this),this.stencilMask=new Zi(this),this.stencilFunc=new Kr(this),this.stencilOp=new En(this),this.stencilTest=new wi(this),this.depthRange=new Hi(this),this.depthTest=new Tt(this),this.depthFunc=new pr(this),this.blend=new Er(this),this.blendFunc=new Mr(this),this.blendColor=new Zt(this),this.blendEquation=new gr(this),this.cullFace=new Xr(this),this.cullFaceSide=new Hn(this),this.frontFace=new ti(this),this.program=new Ii(this),this.activeTexture=new zi(this),this.viewport=new Fn(this),this.bindFramebuffer=new Ki(this),this.bindRenderbuffer=new Si(this),this.bindTexture=new is(this),this.bindVertexBuffer=new Ds(this),this.bindElementBuffer=new Ge(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new we(this),this.pixelStoreUnpack=new Ce(this),this.pixelStoreUnpackPremultiplyAlpha=new He(this),this.pixelStoreUnpackFlipY=new Qe(this),this.extTextureFilterAnisotropic=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("MOZ_EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=h.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=h.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=h.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=h.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),g||(this.extTextureHalfFloat=h.getExtension("OES_texture_half_float")),(g||this.extTextureHalfFloat&&h.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=h.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=g||h.getExtension("OES_standard_derivatives"),this.extTimerQuery=h.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=h.getParameter(h.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(h,g){return new Tr(this,h,g)}createVertexBuffer(h,g,C){return new Cr(this,h,g,C)}createRenderbuffer(h,g,C){const P=this.gl,L=P.createRenderbuffer();return this.bindRenderbuffer.set(L),P.renderbufferStorage(P.RENDERBUFFER,h,g,C),this.bindRenderbuffer.set(null),L}createFramebuffer(h,g,C){return new bt(this,h,g,C)}clear({color:h,depth:g,stencil:C}){const P=this.gl;let L=0;h&&(L|=P.COLOR_BUFFER_BIT,this.clearColor.set(h),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(L|=P.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),C!==void 0&&(L|=P.STENCIL_BUFFER_BIT,this.clearStencil.set(C),this.stencilMask.set(255)),P.clear(L)}setCullFace(h){h.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(h.mode),this.frontFace.set(h.frontFace))}setDepthMode(h){h.func!==this.gl.ALWAYS||h.mask?(this.depthTest.set(!0),this.depthFunc.set(h.func),this.depthMask.set(h.mask),this.depthRange.set(h.range)):this.depthTest.set(!1)}setStencilMode(h){h.test.func!==this.gl.ALWAYS||h.mask?(this.stencilTest.set(!0),this.stencilMask.set(h.mask),this.stencilOp.set([h.fail,h.depthFail,h.pass]),this.stencilFunc.set({func:h.test.func,ref:h.ref,mask:h.test.mask})):this.stencilTest.set(!1)}setColorMode(h){k(h.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(h.blendFunction),this.blendColor.set(h.blendColor)),this.colorMask.set(h.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Kt extends s.Evented{constructor(h,g,C,P){if(super(),this.id=h,this.dispatcher=C,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(g,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},g),this._collectResourceTiming=g.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(P),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(h){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const g=Array.isArray(this.map._language)?this.map._language.join():this.map._language,C=this.map._worldview;this._tileJSONRequest=Dt(this._options,this.map._requestManager,g,C,(P,L)=>{this._tileJSONRequest=null,this._loaded=!0,P?(g&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${g}`),C&&C.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${C}`),this.fire(new s.ErrorEvent(P))):L&&(s.extend(this,L),L.bounds&&(this.tileBounds=new ur(L.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(L.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(P)})}loaded(){return this._loaded}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(h,g){const C=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme)),P={request:this.map._requestManager.transformRequest(C,s.ResourceType.Tile),data:void 0,uid:h.uid,tileID:h.tileID,tileZoom:h.tileZoom,zoom:h.tileID.overscaledZ,tileSize:this.tileSize*h.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:h.isSymbolTile};if(P.request.collectResourceTiming=this._collectResourceTiming,h.actor&&h.state!=="expired")h.state==="loading"?h.reloadCallback=g:h.request=h.actor.send("reloadTile",P,L.bind(this));else if(h.actor=this._tileWorkers[C]=this._tileWorkers[C]||this.dispatcher.getActor(),this.dispatcher.ready)h.request=h.actor.send("loadTile",P,L.bind(this),void 0,!0);else{const V=s.loadVectorTile.call({deduped:this._deduped},P,(G,J)=>{G||!J?L.call(this,G):(P.data={cacheControl:J.cacheControl,expires:J.expires,rawData:J.rawData.slice(0)},h.actor&&h.actor.send("loadTile",P,L.bind(this),void 0,!0))},!0);h.request={cancel:V}}function L(V,G){return delete h.request,h.aborted?g(null):V&&V.status!==404?g(V):(G&&G.resourceTiming&&(h.resourceTiming=G.resourceTiming),this.map._refreshExpiredTiles&&G&&h.setExpiryData(G),h.loadVectorData(G,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),g(null),void(h.reloadCallback&&(this.loadTile(h,h.reloadCallback),h.reloadCallback=null)))}}abortTile(h){h.request&&(h.request.cancel(),delete h.request),h.actor&&h.actor.send("abortTile",{uid:h.uid,type:this.type,source:this.id})}unloadTile(h){h.unloadVectorData(),h.actor&&h.actor.send("removeTile",{uid:h.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Gt extends s.Evented{constructor(h,g,C,P){super(),this.id=h,this.dispatcher=C,this.setEventedParent(P),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},g),s.extend(this,s.pick(g,["url","scheme","tileSize"]))}load(h){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Dt(this._options,this.map._requestManager,null,null,(g,C)=>{this._tileJSONRequest=null,this._loaded=!0,g?this.fire(new s.ErrorEvent(g)):C&&(s.extend(this,C),C.bounds&&(this.tileBounds=new ur(C.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(C.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),h&&h(g)})}loaded(){return this._loaded}onAdd(h){this.map=h,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(h){return this._options.tiles=h,this.reload(),this}setUrl(h){return this.url=h,this._options.url=h,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(h){return!this.tileBounds||this.tileBounds.contains(h.canonical)}loadTile(h,g){const C=s.exported.devicePixelRatio>=2,P=this.map._requestManager.normalizeTileURL(h.tileID.canonical.url(this.tiles,this.scheme),C,this.tileSize);h.request=s.getImage(this.map._requestManager.transformRequest(P,s.ResourceType.Tile),(L,V,G,J)=>(delete h.request,h.aborted?(h.state="unloaded",g(null)):L?(h.state="errored",g(L)):V?(this.map._refreshExpiredTiles&&h.setExpiryData({cacheControl:G,expires:J}),h.setTexture(V,this.map.painter),h.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void g(null)):g(null)))}static loadTileData(h,g,C){h.setTexture(g,C)}static unloadTileData(h,g){h.texture&&g.saveTileTexture(h.texture)}abortTile(h,g){h.request&&(h.request.cancel(),delete h.request),g()}unloadTile(h,g){h.texture&&this.map.painter.saveTileTexture(h.texture),g()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Dr(_,h,g,C,P,L,V,G){const J=[_,g,P,h,C,L,1,1,1],oe=[V,G,1],se=s.adjoint([],J),[me,Ie,Oe]=s.transformMat3(oe,oe,s.transpose(se,se));return s.multiply$1(J,[me,0,0,0,Ie,0,0,0,Oe],J)}class Qr extends s.Evented{constructor(h,g,C,P){super(),this.id=h,this.dispatcher=C,this.coordinates=g.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(P),this.options=g,this._dirty=!1}load(h,g){this._loaded=g||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(C,P)=>{if(this._imageRequest=null,this._loaded=!0,C)this.fire(new s.ErrorEvent(C));else if(P){const{HTMLImageElement:L}=s.window;this.image=P instanceof L?s.exported.getImageData(P):P,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,h&&(this.coordinates=h),this._finishLoading()}})}loaded(){return this._loaded}updateImage(h){return this.image&&h.url?(this._imageRequest&&h.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=h.url,this.load(h.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(h){this.map=h,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(h){this.coordinates=h,this._boundsArray=void 0;const g=h.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(C){let P=1/0,L=1/0,V=-1/0,G=-1/0;for(const me of C)P=Math.min(P,me.x),L=Math.min(L,me.y),V=Math.max(V,me.x),G=Math.max(G,me.y);const J=Math.max(V-P,G-L),oe=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),se=Math.pow(2,oe);return new s.CanonicalTileID(oe,Math.floor((P+V)/2*se),Math.floor((L+G)/2*se))}(g),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(h){for(const J in this.tiles){const oe=this.tiles[J];oe.state!=="loaded"&&(oe.state="loaded",oe.texture=this.texture)}if(this._boundsArray)return;const g=s.tileTransform(this.tileID,this.map.transform.projection),[C,P,L,V]=this.coordinates.map(J=>{const oe=g.projection.project(J[0],J[1]);return s.getTilePoint(g,oe)._round()});this.perspectiveTransform=function(J,oe,se,me,Ie,Oe,ze,De,Ne,ge){const Me=Dr(0,0,J,0,0,oe,J,oe),We=Dr(se,me,Ie,Oe,ze,De,Ne,ge);return s.multiply$1(We,s.adjoint(Me,Me),We),[We[6]/We[8]*J/s.EXTENT,We[7]/We[8]*oe/s.EXTENT]}(this.width,this.height,C.x,C.y,P.x,P.y,V.x,V.y,L.x,L.y);const G=this._boundsArray=new s.StructArrayLayout4i8;G.emplaceBack(C.x,C.y,0,0),G.emplaceBack(P.x,P.y,s.EXTENT,0),G.emplaceBack(V.x,V.y,0,s.EXTENT),G.emplaceBack(L.x,L.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=h.createVertexBuffer(G,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const h=this.map.painter.context,g=h.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(h,this.image,g.RGBA),this.texture.bind(g.LINEAR,g.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(h)}loadTile(h,g){this.tileID&&this.tileID.equals(h.tileID.canonical)?(this.tiles[String(h.tileID.wrap)]=h,h.buckets={},g(null)):(h.state="errored",g(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Vr={vector:Kt,raster:Gt,"raster-dem":class extends Gt{constructor(_,h,g,C){super(_,h,g,C),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}loadTile(_,h){const g=this.map._requestManager.normalizeTileURL(_.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function C(P,L){P&&(_.state="errored",h(P)),L&&(_.dem=L,_.dem.onDeserialize(),_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0,_.state="loaded",h(null))}_.request=s.getImage(this.map._requestManager.transformRequest(g,s.ResourceType.Tile),(function(P,L,V,G){if(delete _.request,_.aborted)_.state="unloaded",h(null);else if(P)_.state="errored",h(P);else if(L){this.map._refreshExpiredTiles&&_.setExpiryData({cacheControl:V,expires:G});const J=s.window.ImageBitmap&&L instanceof s.window.ImageBitmap&&(qn==null&&(qn=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),qn),oe=1-(L.width-s.prevPowerOfTwo(L.width))/2;oe<1||_.neighboringTiles||(_.neighboringTiles=this._getNeighboringTiles(_.tileID));const se=J?L:s.exported.getImageData(L,oe),me={uid:_.uid,coord:_.tileID,source:this.id,rawImageData:se,encoding:this.encoding,padding:oe};_.actor&&_.state!=="expired"||(_.actor=this.dispatcher.getActor(),_.actor.send("loadDEMTile",me,C.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(_){const h=_.canonical,g=Math.pow(2,h.z),C=(h.x-1+g)%g,P=h.x===0?_.wrap-1:_.wrap,L=(h.x+1+g)%g,V=h.x+1===g?_.wrap+1:_.wrap,G={};return G[new s.OverscaledTileID(_.overscaledZ,P,h.z,C,h.y).key]={backfilled:!1},G[new s.OverscaledTileID(_.overscaledZ,V,h.z,L,h.y).key]={backfilled:!1},h.y>0&&(G[new s.OverscaledTileID(_.overscaledZ,P,h.z,C,h.y-1).key]={backfilled:!1},G[new s.OverscaledTileID(_.overscaledZ,_.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},G[new s.OverscaledTileID(_.overscaledZ,V,h.z,L,h.y-1).key]={backfilled:!1}),h.y+1<g&&(G[new s.OverscaledTileID(_.overscaledZ,P,h.z,C,h.y+1).key]={backfilled:!1},G[new s.OverscaledTileID(_.overscaledZ,_.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},G[new s.OverscaledTileID(_.overscaledZ,V,h.z,L,h.y+1).key]={backfilled:!1}),G}unloadTile(_){_.demTexture&&this.map.painter.saveTileTexture(_.demTexture),_.fbo&&(_.fbo.destroy(),delete _.fbo),_.dem&&delete _.dem,delete _.neighboringTiles,_.state="unloaded"}},geojson:class extends s.Evented{constructor(_,h,g,C){super(),this.id=_,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(C),this._data=h.data,this._options=s.extend({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const P=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*P,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*P,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:s.EXTENT,radius:(h.clusterRadius!==void 0?h.clusterRadius:50)*P,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}onAdd(_){this.map=_,this.setData(this._data)}setData(_){return this._data=_,this._updateWorkerData(),this}getClusterExpansionZoom(_,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_,source:this.id},h),this}getClusterChildren(_,h){return this.actor.send("geojson.getClusterChildren",{clusterId:_,source:this.id},h),this}getClusterLeaves(_,h,g,C){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_,limit:h,offset:g},C),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _=s.extend({},this.workerOptions),h=this._data;typeof h=="string"?(_.request=this.map._requestManager.transformRequest(s.exported.resolveURL(h),s.ResourceType.Source),_.request.collectResourceTiming=this._collectResourceTiming):_.data=JSON.stringify(h),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_,(g,C)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new s.ErrorEvent(g));else{const P={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&C&&C.resourceTiming&&C.resourceTiming[this.id]&&(P.resourceTiming=C.resourceTiming[this.id]),this.fire(new s.Event("data",P)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_,h){const g=_.actor?"reloadTile":"loadTile";_.actor=this.actor,_.request=this.actor.send(g,{type:this.type,uid:_.uid,tileID:_.tileID,tileZoom:_.tileZoom,zoom:_.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(C,P)=>(delete _.request,_.unloadVectorData(),_.aborted?h(null):C?h(C):(_.loadVectorData(P,this.map.painter,g==="reloadTile"),h(null))),void 0,g==="loadTile")}abortTile(_){_.request&&(_.request.cancel(),delete _.request),_.aborted=!0}unloadTile(_){_.unloadVectorData(),this.actor.send("removeTile",{uid:_.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Qr{constructor(_,h,g,C){super(_,h,g,C),this.roundZoom=!0,this.type="video",this.options=h}load(){this._loaded=!1;const _=this.options;this.urls=[];for(const h of _.urls)this.urls.push(this.map._requestManager.transformRequest(h,s.ResourceType.Source).url);s.getVideo(this.urls,(h,g)=>{this._loaded=!0,h?this.fire(new s.ErrorEvent(h)):g&&(this.video=g,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_){if(this.video){const h=this.video.seekable;_<h.start(0)||_>h.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=_}}getVideo(){return this.video}onAdd(_){this.map||(this.map=_,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,h=_.gl;this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(_,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Qr,canvas:class extends Qr{constructor(_,h,g,C){super(_,h,g,C),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(P=>!Array.isArray(P)||P.length!==2||P.some(L=>typeof L!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${_}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_){this.map=_,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context;this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(h,this.canvas,h.gl.RGBA,{premultiply:!0}),this._prepareData(h)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _ of[this.canvas.width,this.canvas.height])if(isNaN(_)||_<=0)return!0;return!1}},custom:class extends s.Evented{constructor(_,h,g,C){super(),this.id=_,this.type="custom",this._dataType="raster",this._dispatcher=g,this._implementation=h,this.setEventedParent(C),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new ur(this._implementation.bounds,this.minzoom,this.maxzoom)),h.update=this._update.bind(this),h.clearTiles=this._clearTiles.bind(this),h.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(h,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_){this._map=_,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_),this.load()}onRemove(_){this._implementation.onRemove&&this._implementation.onRemove(_)}hasTile(_){if(this._implementation.hasTile){const{x:h,y:g,z:C}=_.canonical;return this._implementation.hasTile({x:h,y:g,z:C})}return!this.tileBounds||this.tileBounds.contains(_.canonical)}loadTile(_,h){const{x:g,y:C,z:P}=_.tileID.canonical,L=new s.window.AbortController;_.request=Promise.resolve(this._implementation.loadTile({x:g,y:C,z:P},{signal:L.signal})).then((function(V){return delete _.request,_.aborted?(_.state="unloaded",h(null)):V===void 0?(_.state="errored",h(null)):V===null?(this.loadTileData(_,{width:this.tileSize,height:this.tileSize,data:null}),_.state="loaded",h(null)):function(G){return G instanceof s.window.ImageData||G instanceof s.window.HTMLCanvasElement||G instanceof s.window.ImageBitmap||G instanceof s.window.HTMLImageElement}(V)?(this.loadTileData(_,V),_.state="loaded",void h(null)):(_.state="errored",h(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(V=>{V.code!==20&&(_.state="errored",h(V))}),_.request.cancel=()=>L.abort()}loadTileData(_,h){Gt.loadTileData(_,h,this._map.painter)}unloadTileData(_){Gt.unloadTileData(_,this._map.painter)}unloadTile(_,h){if(this.unloadTileData(_),this._implementation.unloadTile){const{x:g,y:C,z:P}=_.tileID.canonical;this._implementation.unloadTile({x:g,y:C,z:P})}h()}abortTile(_,h){_.request&&_.request.cancel&&(_.request.cancel(),delete _.request),h()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_=>({x:_.canonical.x,y:_.canonical.y,z:_.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},jr=function(_,h,g,C){const P=new Vr[h.type](_,h,g,C);if(P.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${P.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],P),P};function Rr(_,h){const g=s.identity([]);return s.scale(g,g,[.5*_.width,.5*-_.height,1]),s.translate(g,g,[1,-1,0]),s.multiply(g,g,_.calculateProjMatrix(h.toUnwrapped())),Float32Array.from(g)}function Cn(_,h,g,C,P,L,V,G=!1){const J=_.tilesIn(C,V,G);J.sort($n);const oe=[];for(const me of J)oe.push({wrappedTileID:me.tile.tileID.wrapped().key,queryResults:me.tile.queryRenderedFeatures(h,g,_._state,me,P,L,Rr(_.transform,me.tile.tileID),G)});const se=function(me){const Ie={},Oe={};for(const ze of me){const De=ze.queryResults,Ne=ze.wrappedTileID,ge=Oe[Ne]=Oe[Ne]||{};for(const Me in De){const We=De[Me],qe=ge[Me]=ge[Me]||{},st=Ie[Me]=Ie[Me]||[];for(const lt of We)qe[lt.featureIndex]||(qe[lt.featureIndex]=!0,st.push(lt))}}return Ie}(oe);for(const me in se)se[me].forEach(Ie=>{const Oe=Ie.feature,ze=Oe.layer;ze&&ze.type!=="background"&&ze.type!=="sky"&&(Oe.source=ze.source,ze["source-layer"]&&(Oe.sourceLayer=ze["source-layer"]),Oe.state=Oe.id!==void 0?_.getFeatureState(ze["source-layer"],Oe.id):{})});return se}function Bn(_,h){const g=_.getRenderableIds().map(L=>_.getTileByID(L)),C=[],P={};for(let L=0;L<g.length;L++){const V=g[L],G=V.tileID.canonical.key;P[G]||(P[G]=!0,V.querySourceFeatures(C,h))}return C}function $n(_,h){const g=_.tileID,C=h.tileID;return g.overscaledZ-C.overscaledZ||g.canonical.y-C.canonical.y||g.wrap-C.wrap||g.canonical.x-C.canonical.x}function gn(){return Vu.workerClass!=null?new Vu.workerClass:new s.window.Worker(Vu.workerUrl)}const Ni="mapboxgl_preloaded_worker_pool";class Wn{constructor(){this.active={}}acquire(h){if(!this.workers)for(this.workers=[];this.workers.length<Wn.workerCount;)this.workers.push(new gn);return this.active[h]=!0,this.workers.slice()}release(h){delete this.active[h],this.numActive()===0&&(this.workers.forEach(g=>{g.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ni]}numActive(){return Object.keys(this.active).length}}let Yn;function zs(){return Yn||(Yn=new Wn),Yn}function Ys(_,h){const g={};for(const C in _)C!=="ref"&&(g[C]=_[C]);return s.refProperties.forEach(C=>{C in h&&(g[C]=h[C])}),g}function hs(_){_=_.slice();const h=Object.create(null);for(let g=0;g<_.length;g++)h[_[g].id]=_[g];for(let g=0;g<_.length;g++)"ref"in _[g]&&(_[g]=Ys(_[g],h[_[g].ref]));return _}Wn.workerCount=2;const pe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function c(_,h,g){g.push({command:pe.addSource,args:[_,h[_]]})}function d(_,h,g){h.push({command:pe.removeSource,args:[_]}),g[_]=!0}function m(_,h,g,C){d(_,g,C),c(_,h,g)}function v(_,h,g){let C;for(C in _[g])if(_[g].hasOwnProperty(C)&&C!=="data"&&!k(_[g][C],h[g][C]))return!1;for(C in h[g])if(h[g].hasOwnProperty(C)&&C!=="data"&&!k(_[g][C],h[g][C]))return!1;return!0}function b(_,h,g,C,P,L){let V;for(V in h=h||{},_=_||{})_.hasOwnProperty(V)&&(k(_[V],h[V])||g.push({command:L,args:[C,V,h[V],P]}));for(V in h)h.hasOwnProperty(V)&&!_.hasOwnProperty(V)&&(k(_[V],h[V])||g.push({command:L,args:[C,V,h[V],P]}))}function S(_){return _.id}function T(_,h){return _[h.id]=h,_}class M{constructor(h,g){this.reset(h,g)}reset(h,g){this.points=h||[],this._distances=[0];for(let C=1;C<this.points.length;C++)this._distances[C]=this._distances[C-1]+this.points[C].dist(this.points[C-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(g||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(h){if(this.points.length===1)return this.points[0];h=s.clamp(h,0,1);let g=1,C=this._distances[g];const P=h*this.paddedLength+this.padding;for(;C<P&&g<this._distances.length;)C=this._distances[++g];const L=g-1,V=this._distances[L],G=C-V,J=G>0?(P-V)/G:0;return this.points[L].mult(1-J).add(this.points[g].mult(J))}}class z{constructor(h,g,C){const P=this.boxCells=[],L=this.circleCells=[];this.xCellCount=Math.ceil(h/C),this.yCellCount=Math.ceil(g/C);for(let V=0;V<this.xCellCount*this.yCellCount;V++)P.push([]),L.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=h,this.height=g,this.xScale=this.xCellCount/h,this.yScale=this.yCellCount/g,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(h,g,C,P,L){this._forEachCell(g,C,P,L,this._insertBoxCell,this.boxUid++),this.boxKeys.push(h),this.bboxes.push(g),this.bboxes.push(C),this.bboxes.push(P),this.bboxes.push(L)}insertCircle(h,g,C,P){this._forEachCell(g-P,C-P,g+P,C+P,this._insertCircleCell,this.circleUid++),this.circleKeys.push(h),this.circles.push(g),this.circles.push(C),this.circles.push(P)}_insertBoxCell(h,g,C,P,L,V){this.boxCells[L].push(V)}_insertCircleCell(h,g,C,P,L,V){this.circleCells[L].push(V)}_query(h,g,C,P,L,V){if(C<0||h>this.width||P<0||g>this.height)return!L&&[];const G=[];if(h<=0&&g<=0&&this.width<=C&&this.height<=P){if(L)return!0;for(let J=0;J<this.boxKeys.length;J++)G.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const oe=this.circles[3*J],se=this.circles[3*J+1],me=this.circles[3*J+2];G.push({key:this.circleKeys[J],x1:oe-me,y1:se-me,x2:oe+me,y2:se+me})}return V?G.filter(V):G}return this._forEachCell(h,g,C,P,this._queryCell,G,{hitTest:L,seenUids:{box:{},circle:{}}},V),L?G.length>0:G}_queryCircle(h,g,C,P,L){const V=h-C,G=h+C,J=g-C,oe=g+C;if(G<0||V>this.width||oe<0||J>this.height)return!P&&[];const se=[];return this._forEachCell(V,J,G,oe,this._queryCellCircle,se,{hitTest:P,circle:{x:h,y:g,radius:C},seenUids:{box:{},circle:{}}},L),P?se.length>0:se}query(h,g,C,P,L){return this._query(h,g,C,P,!1,L)}hitTest(h,g,C,P,L){return this._query(h,g,C,P,!0,L)}hitTestCircle(h,g,C,P){return this._queryCircle(h,g,C,!0,P)}_queryCell(h,g,C,P,L,V,G,J){const oe=G.seenUids,se=this.boxCells[L];if(se!==null){const Ie=this.bboxes;for(const Oe of se)if(!oe.box[Oe]){oe.box[Oe]=!0;const ze=4*Oe;if(h<=Ie[ze+2]&&g<=Ie[ze+3]&&C>=Ie[ze+0]&&P>=Ie[ze+1]&&(!J||J(this.boxKeys[Oe]))){if(G.hitTest)return V.push(!0),!0;V.push({key:this.boxKeys[Oe],x1:Ie[ze],y1:Ie[ze+1],x2:Ie[ze+2],y2:Ie[ze+3]})}}}const me=this.circleCells[L];if(me!==null){const Ie=this.circles;for(const Oe of me)if(!oe.circle[Oe]){oe.circle[Oe]=!0;const ze=3*Oe;if(this._circleAndRectCollide(Ie[ze],Ie[ze+1],Ie[ze+2],h,g,C,P)&&(!J||J(this.circleKeys[Oe]))){if(G.hitTest)return V.push(!0),!0;{const De=Ie[ze],Ne=Ie[ze+1],ge=Ie[ze+2];V.push({key:this.circleKeys[Oe],x1:De-ge,y1:Ne-ge,x2:De+ge,y2:Ne+ge})}}}}}_queryCellCircle(h,g,C,P,L,V,G,J){const oe=G.circle,se=G.seenUids,me=this.boxCells[L];if(me!==null){const Oe=this.bboxes;for(const ze of me)if(!se.box[ze]){se.box[ze]=!0;const De=4*ze;if(this._circleAndRectCollide(oe.x,oe.y,oe.radius,Oe[De+0],Oe[De+1],Oe[De+2],Oe[De+3])&&(!J||J(this.boxKeys[ze])))return V.push(!0),!0}}const Ie=this.circleCells[L];if(Ie!==null){const Oe=this.circles;for(const ze of Ie)if(!se.circle[ze]){se.circle[ze]=!0;const De=3*ze;if(this._circlesCollide(Oe[De],Oe[De+1],Oe[De+2],oe.x,oe.y,oe.radius)&&(!J||J(this.circleKeys[ze])))return V.push(!0),!0}}}_forEachCell(h,g,C,P,L,V,G,J){const oe=this._convertToXCellCoord(h),se=this._convertToYCellCoord(g),me=this._convertToXCellCoord(C),Ie=this._convertToYCellCoord(P);for(let Oe=oe;Oe<=me;Oe++)for(let ze=se;ze<=Ie;ze++)if(L.call(this,h,g,C,P,this.xCellCount*ze+Oe,V,G,J))return}_convertToXCellCoord(h){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(h*this.xScale)))}_convertToYCellCoord(h){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(h*this.yScale)))}_circlesCollide(h,g,C,P,L,V){const G=P-h,J=L-g,oe=C+V;return oe*oe>G*G+J*J}_circleAndRectCollide(h,g,C,P,L,V,G){const J=(V-P)/2,oe=Math.abs(h-(P+J));if(oe>J+C)return!1;const se=(G-L)/2,me=Math.abs(g-(L+se));if(me>se+C)return!1;if(oe<=J||me<=se)return!0;const Ie=oe-J,Oe=me-se;return Ie*Ie+Oe*Oe<=C*C}}const $={unknown:0,flipRequired:1,flipNotRequired:2},H=Math.tan(85*Math.PI/180);function B(_,h,g,C,P,L,V){const G=s.create();if(g)if(L.name==="globe"){const J=s.calculateGlobeLabelMatrix(P,h);s.multiply(G,G,J)}else{const J=Pe([],V);G[0]=J[0],G[1]=J[1],G[4]=J[2],G[5]=J[3],C||s.rotateZ(G,G,P.angle)}else s.multiply(G,P.labelPlaneMatrix,_);return G}function ee(_,h,g,C,P,L,V){const G=B(_,h,g,C,P,L,V);return L.name==="globe"&&g||(G[2]=G[6]=G[10]=G[14]=0),G}function re(_,h,g,C,P,L,V){if(g){if(L.name==="globe"){const G=B(_,h,g,C,P,L,V);return s.invert(G,G),s.multiply(G,_,G),G}{const G=s.clone(_),J=s.identity([]);return J[0]=V[0],J[1]=V[1],J[4]=V[2],J[5]=V[3],s.multiply(G,G,J),C||s.rotateZ(G,G,-P.angle),G}}return P.glCoordMatrix}function ce(_,h,g,C){const P=[_,h,g,1];g?s.transformMat4$1(P,P,C):Ze(P,P,C);const L=P[3];return P[0]/=L,P[1]/=L,P[2]/=L,P}function ye(_,h){return Math.min(.5+_/h*.5,1.5)}function _e(_,h){const g=_[0]/_[3],C=_[1]/_[3];return g>=-h[0]&&g<=h[0]&&C>=-h[1]&&C<=h[1]}function Ee(_,h,g,C,P,L,V,G,J,oe){const se=g.transform,me=C?_.textSizeData:_.iconSizeData,Ie=s.evaluateSizeForZoom(me,g.transform.zoom),Oe=se.projection.name==="globe",ze=[256/g.width*2+1,256/g.height*2+1],De=C?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;De.clear();let Ne=null;Oe&&(Ne=C?_.text.globeExtVertexArray:_.icon.globeExtVertexArray);const ge=_.lineVertexArray,Me=C?_.text.placedSymbolArray:_.icon.placedSymbolArray,We=g.transform.width/g.transform.height;let qe,st=!1;for(let lt=0;lt<Me.length;lt++){const at=Me.get(lt),{numGlyphs:pt,writingMode:dt}=at;if(dt!==s.WritingMode.vertical||st||qe===s.WritingMode.horizontal||(st=!0),qe=dt,(at.hidden||dt===s.WritingMode.vertical)&&!st){rt(pt,De);continue}st=!1;const Ct=new s.Point(at.tileAnchorX,at.tileAnchorY);let{x:Qt,y:_t,z:Ft}=se.projection.projectTilePoint(Ct.x,Ct.y,oe.canonical);if(J){const[sn,Ir,Wr]=J(Ct);Qt+=sn,_t+=Ir,Ft+=Wr}const At=[Qt,_t,Ft,1];if(s.transformMat4$1(At,At,h),!_e(At,ze)){rt(pt,De);continue}const Jt=ye(g.transform.cameraToCenterDistance,At[3]),St=s.evaluateSizeForFeature(me,Ie,at),jt=V?St/Jt:St*Jt,rr=ce(Qt,_t,Ft,P);if(rr[3]<=0){rt(pt,De);continue}let Ht={};const sr=V?null:J,zr=Q(at,jt,!1,G,h,P,L,_.glyphOffsetArray,ge,De,Ne,rr,Ct,Ht,We,sr,se.projection,oe,V);st=zr.useVertical,sr&&zr.needsFlipping&&(Ht={}),(zr.notEnoughRoom||st||zr.needsFlipping&&Q(at,jt,!0,G,h,P,L,_.glyphOffsetArray,ge,De,Ne,rr,Ct,Ht,We,sr,se.projection,oe,V).notEnoughRoom)&&rt(pt,De)}C?(_.text.dynamicLayoutVertexBuffer.updateData(De),Ne&&_.text.globeExtVertexBuffer.updateData(Ne)):(_.icon.dynamicLayoutVertexBuffer.updateData(De),Ne&&_.icon.globeExtVertexBuffer.updateData(Ne))}function O(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De){const{lineStartIndex:Ne,glyphStartIndex:ge,segment:Me}=G,We=ge+G.numGlyphs,qe=Ne+G.lineLength,st=h.getoffsetX(ge),lt=h.getoffsetX(We-1),at=Le(_*st,g,C,P,L,V,Me,Ne,qe,J,oe,se,me,Ie,!0,Oe,ze,De);if(!at)return null;const pt=Le(_*lt,g,C,P,L,V,Me,Ne,qe,J,oe,se,me,Ie,!0,Oe,ze,De);return pt?{first:at,last:pt}:null}function X(_,h,g,C){return _===s.WritingMode.horizontal&&Math.abs(C)>Math.abs(g)?{useVertical:!0}:_===s.WritingMode.vertical?C>0?{needsFlipping:!0}:null:h!==$.unknown&&function(P,L){return P===0||Math.abs(L/P)>H}(g,C)?h===$.flipRequired?{needsFlipping:!0}:null:g<0?{needsFlipping:!0}:null}function Q(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De,Ne,ge,Me){const We=h/24,qe=_.lineOffsetX*We,st=_.lineOffsetY*We,{lineStartIndex:lt,glyphStartIndex:at,numGlyphs:pt,segment:dt,writingMode:Ct,flipState:Qt}=_,_t=lt+_.lineLength,Ft=At=>{if(se){const[rr,Ht,sr]=At.up,zr=oe.length;s.updateGlobeVertexNormal(se,zr+0,rr,Ht,sr),s.updateGlobeVertexNormal(se,zr+1,rr,Ht,sr),s.updateGlobeVertexNormal(se,zr+2,rr,Ht,sr),s.updateGlobeVertexNormal(se,zr+3,rr,Ht,sr)}const[Jt,St,jt]=At.point;s.addDynamicAttributes(oe,Jt,St,jt,At.angle)};if(pt>1){const At=O(We,G,qe,st,g,me,Ie,_,J,L,Oe,De,!1,Ne,ge,Me);if(!At)return{notEnoughRoom:!0};if(C&&!g){let[Jt,St,jt]=At.first.point,[rr,Ht,sr]=At.last.point;[Jt,St]=ce(Jt,St,jt,V),[rr,Ht]=ce(rr,Ht,sr,V);const zr=X(Ct,Qt,(rr-Jt)*ze,Ht-St);if(_.flipState=zr&&zr.needsFlipping?$.flipRequired:$.flipNotRequired,zr)return zr}Ft(At.first);for(let Jt=at+1;Jt<at+pt-1;Jt++){const St=Le(We*G.getoffsetX(Jt),qe,st,g,me,Ie,dt,lt,_t,J,L,Oe,De,!1,!1,Ne,ge,Me);if(!St)return oe.length-=4*(Jt-at),{notEnoughRoom:!0};Ft(St)}Ft(At.last)}else{if(C&&!g){const Jt=ce(Ie.x,Ie.y,0,P),St=lt+dt+1,jt=new s.Point(J.getx(St),J.gety(St)),rr=ce(jt.x,jt.y,0,P),Ht=rr[3]>0?rr:ke(Ie,jt,Jt,1,P,void 0,Ne,ge.canonical),sr=X(Ct,Qt,(Ht[0]-Jt[0])*ze,Ht[1]-Jt[1]);if(_.flipState=sr&&sr.needsFlipping?$.flipRequired:$.flipNotRequired,sr)return sr}const At=Le(We*G.getoffsetX(at),qe,st,g,me,Ie,dt,lt,_t,J,L,Oe,De,!1,!1,Ne,ge,Me);if(!At)return{notEnoughRoom:!0};Ft(At)}return{}}function xe(_,h,g,C,P){const{x:L,y:V,z:G}=C.projectTilePoint(_.x,_.y,h);if(!P)return ce(L,V,G,g);const[J,oe,se]=P(_);return ce(L+J,V+oe,G+se,g)}function ke(_,h,g,C,P,L,V,G){const J=xe(_.sub(h)._unit()._add(_),G,P,V,L);return s.sub(J,g,J),s.normalize(J,J),s.scaleAndAdd(J,g,J,C)}function Le(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De,Ne,ge){const Me=C?_-h:_+h;let We=Me>0?1:-1,qe=0;C&&(We*=-1,qe=Math.PI),We<0&&(qe+=Math.PI);let st=G+V+(We>0?0:1)|0,lt=P,at=P,pt=0,dt=0;const Ct=Math.abs(Me),Qt=[],_t=[];let Ft=L,At=Ft;const Jt=()=>ke(At,Ft,at,Ct-pt+1,se,Ie,De,Ne.canonical);for(;pt+dt<=Ct;){if(st+=We,st<G||st>=J)return null;if(at=lt,At=Ft,Qt.push(at),Oe&&_t.push(At),Ft=new s.Point(oe.getx(st),oe.gety(st)),lt=me[st],!lt){const Wr=xe(Ft,Ne.canonical,se,De,Ie);lt=Wr[3]>0?me[st]=Wr:Jt()}pt+=dt,dt=s.distance(at,lt)}ze&&Ie&&(me[st]&&(lt=Jt(),dt=s.distance(at,lt)),me[st]=lt);const St=(Ct-pt)/dt,jt=Ft.sub(At)._mult(St)._add(At),rr=s.sub([],lt,at),Ht=s.scaleAndAdd([],at,rr,St);let sr=[0,0,1],zr=rr[0],sn=rr[1];if(ge&&(sr=De.upVector(Ne.canonical,jt.x,jt.y),sr[0]!==0||sr[1]!==0||sr[2]!==1)){const Wr=[sr[2],0,-sr[0]],vn=s.cross([],sr,Wr);s.normalize(Wr,Wr),s.normalize(vn,vn),zr=s.dot(rr,Wr),sn=s.dot(rr,vn)}if(g){const Wr=s.cross([],sr,rr);s.normalize(Wr,Wr),s.scaleAndAdd(Ht,Ht,Wr,g*We)}const Ir=qe+Math.atan2(sn,zr);return Qt.push(Ht),Oe&&_t.push(jt),{point:Ht,angle:Ir,path:Qt,tilePath:_t,up:sr}}function rt(_,h){const g=h.length,C=g+4*_;h.resize(C),h.float32.fill(-1/0,4*g,4*C)}function Ze(_,h,g){const C=h[0],P=h[1];return _[0]=g[0]*C+g[4]*P+g[12],_[1]=g[1]*C+g[5]*P+g[13],_[3]=g[3]*C+g[7]*P+g[15],_}const Et=100;class Bt{constructor(h,g,C=new z(h.width+200,h.height+200,25),P=new z(h.width+200,h.height+200,25)){this.transform=h,this.grid=C,this.ignoredGrid=P,this.pitchfactor=Math.cos(h._pitch)*h.cameraToCenterDistance,this.screenRightBoundary=h.width+Et,this.screenBottomBoundary=h.height+Et,this.gridRightBoundary=h.width+200,this.gridBottomBoundary=h.height+200,this.fogState=g}placeCollisionBox(h,g,C,P,L,V,G,J){let oe=C.projectedAnchorX,se=C.projectedAnchorY,me=C.projectedAnchorZ;const Ie=C.elevation,Oe=C.tileID,ze=h.getProjection();if(Ie&&Oe){const[lt,at,pt]=ze.upVector(Oe.canonical,C.tileAnchorX,C.tileAnchorY),dt=ze.upVectorScale(Oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;oe+=lt*Ie*dt,se+=at*Ie*dt,me+=pt*Ie*dt}const De=this.projectAndGetPerspectiveRatio(G,oe,se,me,C.tileID,ze.name==="globe"||!!Ie||this.transform.pitch>0,ze),Ne=V*De.perspectiveRatio,ge=(C.x1*g+P.x-C.padding)*Ne+De.point.x,Me=(C.y1*g+P.y-C.padding)*Ne+De.point.y,We=(C.x2*g+P.x+C.padding)*Ne+De.point.x,qe=(C.y2*g+P.y+C.padding)*Ne+De.point.y,st=De.perspectiveRatio<=.55||De.occluded;return!this.isInsideGrid(ge,Me,We,qe)||!L&&this.grid.hitTest(ge,Me,We,qe,J)||st?{box:[],offscreen:!1,occluded:De.occluded}:{box:[ge,Me,We,qe],offscreen:this.isOffscreen(ge,Me,We,qe),occluded:!1}}placeCollisionCircles(h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De){const Ne=[],ge=this.transform.elevation,Me=h.getProjection(),We=ge?ge.getAtTileOffsetFunc(De,this.transform.center.lat,this.transform.worldSize,Me):null,qe=new s.Point(C.tileAnchorX,C.tileAnchorY);let{x:st,y:lt,z:at}=Me.projectTilePoint(qe.x,qe.y,De.canonical);if(We){const[jt,rr,Ht]=We(qe);st+=jt,lt+=rr,at+=Ht}const pt=Me.name==="globe",dt=this.projectAndGetPerspectiveRatio(G,st,lt,at,De,pt||!!ge||this.transform.pitch>0,Me),{perspectiveRatio:Ct}=dt,Qt=(me?V/Ct:V*Ct)/s.ONE_EM,_t=ce(st,lt,at,J),Ft=dt.signedDistanceFromCamera>0?O(Qt,L,C.lineOffsetX*Qt,C.lineOffsetY*Qt,!1,_t,qe,C,P,J,{},ge&&!me?We:null,me&&!!ge,Me,De,me):null;let At=!1,Jt=!1,St=!0;if(Ft&&!dt.occluded){const jt=.5*Oe*Ct+ze,rr=new s.Point(-100,-100),Ht=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),sr=new M,{first:zr,last:sn}=Ft,Ir=zr.path.length;let Wr=[];for(let Lr=Ir-1;Lr>=1;Lr--)Wr.push(zr.path[Lr]);for(let Lr=1;Lr<sn.path.length;Lr++)Wr.push(sn.path[Lr]);const vn=2.5*jt;oe&&(Wr=Wr.map(([Lr,Gn,si],oi)=>(We&&!pt&&(si=We(oi<Ir-1?zr.tilePath[Ir-1-oi]:sn.tilePath[oi-Ir+2])[2]),ce(Lr,Gn,si,oe))),Wr.some(Lr=>Lr[3]<=0)&&(Wr=[]));let yn=[];if(Wr.length>0){let Lr=1/0,Gn=-1/0,si=1/0,oi=-1/0;for(const ai of Wr)Lr=Math.min(Lr,ai[0]),si=Math.min(si,ai[1]),Gn=Math.max(Gn,ai[0]),oi=Math.max(oi,ai[1]);Gn>=rr.x&&Lr<=Ht.x&&oi>=rr.y&&si<=Ht.y&&(yn=[Wr.map(ai=>new s.Point(ai[0],ai[1]))],(Lr<rr.x||Gn>Ht.x||si<rr.y||oi>Ht.y)&&(yn=s.clipLine(yn,rr.x,rr.y,Ht.x,Ht.y)))}for(const Lr of yn){sr.reset(Lr,.25*jt);let Gn=0;Gn=sr.length<=.5*jt?1:Math.ceil(sr.paddedLength/vn)+1;for(let si=0;si<Gn;si++){const oi=si/Math.max(Gn-1,1),ai=sr.lerp(oi),oo=ai.x+Et,js=ai.y+Et;Ne.push(oo,js,jt,0);const ia=oo-jt,Ga=js-jt,Oi=oo+jt,li=js+jt;if(St=St&&this.isOffscreen(ia,Ga,Oi,li),Jt=Jt||this.isInsideGrid(ia,Ga,Oi,li),!g&&this.grid.hitTestCircle(oo,js,jt,Ie)&&(At=!0,!se))return{circles:[],offscreen:!1,collisionDetected:At,occluded:!1}}}}return{circles:!se&&At||!Jt?[]:Ne,offscreen:St,collisionDetected:At,occluded:dt.occluded}}queryRenderedSymbols(h){if(h.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const g=[];let C=1/0,P=1/0,L=-1/0,V=-1/0;for(const se of h){const me=new s.Point(se.x+Et,se.y+Et);C=Math.min(C,me.x),P=Math.min(P,me.y),L=Math.max(L,me.x),V=Math.max(V,me.y),g.push(me)}const G=this.grid.query(C,P,L,V).concat(this.ignoredGrid.query(C,P,L,V)),J={},oe={};for(const se of G){const me=se.key;if(J[me.bucketInstanceId]===void 0&&(J[me.bucketInstanceId]={}),J[me.bucketInstanceId][me.featureIndex])continue;const Ie=[new s.Point(se.x1,se.y1),new s.Point(se.x2,se.y1),new s.Point(se.x2,se.y2),new s.Point(se.x1,se.y2)];s.polygonIntersectsPolygon(g,Ie)&&(J[me.bucketInstanceId][me.featureIndex]=!0,oe[me.bucketInstanceId]===void 0&&(oe[me.bucketInstanceId]=[]),oe[me.bucketInstanceId].push(me.featureIndex))}return oe}insertCollisionBox(h,g,C,P,L){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:C,featureIndex:P,collisionGroupID:L},h[0],h[1],h[2],h[3])}insertCollisionCircles(h,g,C,P,L){const V=g?this.ignoredGrid:this.grid,G={bucketInstanceId:C,featureIndex:P,collisionGroupID:L};for(let J=0;J<h.length;J+=4)V.insertCircle(G,h[J],h[J+1],h[J+2])}projectAndGetPerspectiveRatio(h,g,C,P,L,V,G){const J=[g,C,P,1];let oe=!1;P||this.transform.pitch>0?(s.transformMat4$1(J,J,h),this.fogState&&L&&G.name!=="globe"&&(oe=function(Ie,Oe,ze,De,Ne,ge){const Me=ge.calculateFogTileMatrix(Ne),We=[Oe,ze,De];return s.transformMat4(We,We,Me),or(Ie,We,ge.pitch,ge._fov)}(this.fogState,g,C,P,L.toUnwrapped(),this.transform)>.9)):Ze(J,J,h);const se=J[3];return{point:new s.Point((J[0]/se+1)/2*this.transform.width+Et,(-J[1]/se+1)/2*this.transform.height+Et),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(G)/se*.5,1.5),signedDistanceFromCamera:se,occluded:V&&J[2]>se||oe}}isOffscreen(h,g,C,P){return C<Et||h>=this.screenRightBoundary||P<Et||g>this.screenBottomBoundary}isInsideGrid(h,g,C,P){return C>=0&&h<this.gridRightBoundary&&P>=0&&g<this.gridBottomBoundary}getViewportMatrix(){const h=s.identity([]);return s.translate(h,h,[-100,-100,0]),h}}function Nt(_,h,g){const C=h.createTileMatrix(_,_.worldSize,g.toUnwrapped());return s.multiply(new Float32Array(16),_.projMatrix,C)}function hr(_,h,g){if(h.projection.name===g.projection.name)return _.projMatrix;const C=g.clone();return C.setProjection(h.projection),Nt(C,h.getProjection(),_)}function ar(_,h,g){return h.name===g.projection.name?_.projMatrix:Nt(g,h,_)}class Jr{constructor(h,g,C,P){this.opacity=h?Math.max(0,Math.min(1,h.opacity+(h.placed?g:-g))):P&&C?1:0,this.placed=C}isHidden(){return this.opacity===0&&!this.placed}}class tn{constructor(h,g,C,P,L,V=!1){this.text=new Jr(h?h.text:null,g,C,L),this.icon=new Jr(h?h.icon:null,g,P,L),this.clipped=V}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pn{constructor(h,g,C,P=!1){this.text=h,this.icon=g,this.skipFade=C,this.clipped=P}}class bn{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Pn{constructor(h,g,C,P,L){this.bucketInstanceId=h,this.featureIndex=g,this.sourceLayerIndex=C,this.bucketIndex=P,this.tileID=L}}class Jn{constructor(h){this.crossSourceCollisions=h,this.maxGroupID=0,this.collisionGroups={}}get(h){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[h]){const g=++this.maxGroupID;this.collisionGroups[h]={ID:g,predicate:C=>C.collisionGroupID===g}}return this.collisionGroups[h]}}function it(_,h,g,C,P){const{horizontalAlign:L,verticalAlign:V}=s.getAnchorAlignment(_),G=-(L-.5)*h,J=-(V-.5)*g,oe=s.evaluateVariableOffset(_,C);return new s.Point(G+oe[0]*P,J+oe[1]*P)}function Rt(_,h,g,C,P){const L=new s.Point(_,h);return g&&L._rotate(C?P:-P),L}class nr{constructor(h,g,C,P,L){this.transform=h.clone(),this.projection=h.projection.name,this.collisionIndex=new Bt(this.transform,L),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Jn(C),this.collisionCircleArrays={},this.prevPlacement=P,P&&(P.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(h,g,C,P){const L=C.getBucket(g),V=C.latestFeatureIndex;if(!L||!V||g.id!==L.layerIds[0])return;const G=L.layers[0].layout,J=C.collisionBoxArray,oe=Math.pow(2,this.transform.zoom-C.tileID.overscaledZ),se=C.tileSize/s.EXTENT,me=C.tileID.toUnwrapped();this.transform.setProjection(L.projection);const Ie=(Oe=C.tileID,ze=L.getProjection(),De=this.transform,ze.name===this.projection?De.calculateProjMatrix(Oe.toUnwrapped()):Nt(De,ze,Oe));var Oe,ze,De;const Ne=G.get("text-pitch-alignment")==="map",ge=G.get("text-rotation-alignment")==="map";g.compileFilter();const Me=g.dynamicFilter(),We=g.dynamicFilterNeedsFeature(),qe=this.transform.calculatePixelsToTileUnitsMatrix(C),st=ee(Ie,C.tileID.canonical,Ne,ge,this.transform,L.getProjection(),qe);let lt=null;if(Ne){const dt=re(Ie,C.tileID.canonical,Ne,ge,this.transform,L.getProjection(),qe);lt=s.multiply([],this.transform.labelPlaneMatrix,dt)}let at=null;Me&&C.latestFeatureIndex&&(at={unwrappedTileID:me,dynamicFilter:Me,dynamicFilterNeedsFeature:We,featureIndex:C.latestFeatureIndex}),this.retainedQueryData[L.bucketInstanceId]=new Pn(L.bucketInstanceId,V,L.sourceLayerIndex,L.index,C.tileID);const pt={bucket:L,layout:G,posMatrix:Ie,textLabelPlaneMatrix:st,labelToScreenMatrix:lt,clippingData:at,scale:oe,textPixelRatio:se,holdingForFade:C.holdingForFade(),collisionBoxArray:J,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(L.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(L.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(L.sourceID)};if(P)for(const dt of L.sortKeyRanges){const{sortKey:Ct,symbolInstanceStart:Qt,symbolInstanceEnd:_t}=dt;h.push({sortKey:Ct,symbolInstanceStart:Qt,symbolInstanceEnd:_t,parameters:pt})}else h.push({symbolInstanceStart:0,symbolInstanceEnd:L.symbolInstances.length,parameters:pt})}attemptAnchorPlacement(h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De,Ne,ge,Me){const{textOffset0:We,textOffset1:qe,crossTileID:st}=Ie,lt=[We,qe],at=it(h,C,P,lt,L),pt=this.collisionIndex.placeCollisionBox(ze,L,g,Rt(at.x,at.y,V,G,this.transform.angle),me,J,oe,se.predicate);if(Ne){const dt=ze.getSymbolInstanceIconSize(Me,this.transform.zoom,Ie.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ze,dt,Ne,Rt(at.x,at.y,V,G,this.transform.angle),me,J,oe,se.predicate).box.length===0)return}if(pt.box.length>0){let dt;return this.prevPlacement&&this.prevPlacement.variableOffsets[st]&&this.prevPlacement.placements[st]&&this.prevPlacement.placements[st].text&&(dt=this.prevPlacement.variableOffsets[st].anchor),this.variableOffsets[st]={textOffset:lt,width:C,height:P,anchor:h,textScale:L,prevAnchor:dt},this.markUsedJustification(ze,h,Ie,De),ze.allowVerticalPlacement&&(this.markUsedOrientation(ze,De,Ie),this.placedOrientations[st]=De),{shift:at,placedGlyphBoxes:pt}}}placeLayerBucketPart(h,g,C,P){const{bucket:L,layout:V,posMatrix:G,textLabelPlaneMatrix:J,labelToScreenMatrix:oe,clippingData:se,textPixelRatio:me,holdingForFade:Ie,collisionBoxArray:Oe,partiallyEvaluatedTextSize:ze,partiallyEvaluatedIconSize:De,collisionGroup:Ne}=h.parameters,ge=V.get("text-optional"),Me=V.get("icon-optional"),We=V.get("text-allow-overlap"),qe=V.get("icon-allow-overlap"),st=V.get("text-rotation-alignment")==="map",lt=V.get("text-pitch-alignment")==="map",at=V.get("icon-text-fit")!=="none",pt=V.get("symbol-z-order")==="viewport-y";this.transform.setProjection(L.projection);let dt=We&&(qe||!L.hasIconData()||Me),Ct=qe&&(We||!L.hasTextData()||ge);!L.collisionArrays&&Oe&&L.deserializeCollisionBoxes(Oe),C&&P&&L.updateCollisionDebugBuffers(this.transform.zoom,Oe);const Qt=(_t,Ft,At)=>{const{crossTileID:Jt,numVerticalGlyphVertices:St}=_t;if(se){const Oi={zoom:this.transform.zoom,pitch:this.transform.pitch};let li=null;if(se.dynamicFilterNeedsFeature){const Nn=this.retainedQueryData[L.bucketInstanceId];li=se.featureIndex.loadFeature({featureIndex:_t.featureIndex,bucketIndex:Nn.bucketIndex,sourceLayerIndex:Nn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,se.dynamicFilter)(Oi,li,this.retainedQueryData[L.bucketInstanceId].tileID.canonical,new s.Point(_t.tileAnchorX,_t.tileAnchorY),this.transform.calculateDistanceTileData(se.unwrappedTileID)))return this.placements[Jt]=new pn(!1,!1,!1,!0),void g.add(Jt)}if(g.has(Jt))return;if(Ie)return void(this.placements[Jt]=new pn(!1,!1,!1));let jt=!1,rr=!1,Ht=!0,sr=!1,zr=!1,sn=null,Ir={box:null,offscreen:null,occluded:null},Wr={box:null,offscreen:null,occluded:null},vn=null,yn=null,Lr=null,Gn=0,si=0,oi=0;At.textFeatureIndex?Gn=At.textFeatureIndex:_t.useRuntimeCollisionCircles&&(Gn=_t.featureIndex),At.verticalTextFeatureIndex&&(si=At.verticalTextFeatureIndex);const ai=Oi=>{Oi.tileID=this.retainedQueryData[L.bucketInstanceId].tileID;const li=this.transform.elevation;(li||Oi.elevation)&&(Oi.elevation=li?li.getAtTileOffset(Oi.tileID,Oi.tileAnchorX,Oi.tileAnchorY):0)},oo=At.textBox;if(oo){ai(oo);const Oi=Nn=>{let ds=s.WritingMode.horizontal;if(L.allowVerticalPlacement&&!Nn&&this.prevPlacement){const xo=this.prevPlacement.placedOrientations[Jt];xo&&(this.placedOrientations[Jt]=xo,ds=xo,this.markUsedOrientation(L,ds,_t))}return ds},li=(Nn,ds)=>{if(L.allowVerticalPlacement&&St>0&&At.verticalTextBox){for(const xo of L.writingModes)if(xo===s.WritingMode.vertical?(Ir=ds(),Wr=Ir):Ir=Nn(),Ir&&Ir.box&&Ir.box.length)break}else Ir=Nn()};if(V.get("text-variable-anchor")){let Nn=V.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Jt]){const Pi=this.prevPlacement.variableOffsets[Jt];Nn.indexOf(Pi.anchor)>0&&(Nn=Nn.filter(ko=>ko!==Pi.anchor),Nn.unshift(Pi.anchor))}const ds=(Pi,ko,gp)=>{const Nc=L.getSymbolInstanceTextSize(ze,_t,this.transform.zoom,Ft),Ed=(Pi.x2-Pi.x1)*Nc+2*Pi.padding,ml=(Pi.y2-Pi.y1)*Nc+2*Pi.padding,Gl=at&&!qe?ko:null;Gl&&ai(Gl);let jc={box:[],offscreen:!1,occluded:!1};const yp=We?2*Nn.length:Nn.length;for(let Td=0;Td<yp;++Td){const Zg=this.attemptAnchorPlacement(Nn[Td%Nn.length],Pi,Ed,ml,Nc,st,lt,me,G,Ne,Td>=Nn.length,_t,Ft,L,gp,Gl,ze,De);if(Zg&&(jc=Zg.placedGlyphBoxes,jc&&jc.box&&jc.box.length)){jt=!0,sn=Zg.shift;break}}return jc};li(()=>ds(oo,At.iconBox,s.WritingMode.horizontal),()=>{const Pi=At.verticalTextBox;return Pi&&ai(Pi),L.allowVerticalPlacement&&!(Ir&&Ir.box&&Ir.box.length)&&St>0&&Pi?ds(Pi,At.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Ir&&(jt=Ir.box,Ht=Ir.offscreen,sr=Ir.occluded);const xo=Oi(!(!Ir||!Ir.box));if(!jt&&this.prevPlacement){const Pi=this.prevPlacement.variableOffsets[Jt];Pi&&(this.variableOffsets[Jt]=Pi,this.markUsedJustification(L,Pi.anchor,_t,xo))}}else{const Nn=(ds,xo)=>{const Pi=L.getSymbolInstanceTextSize(ze,_t,this.transform.zoom,Ft),ko=this.collisionIndex.placeCollisionBox(L,Pi,ds,new s.Point(0,0),We,me,G,Ne.predicate);return ko&&ko.box&&ko.box.length&&(this.markUsedOrientation(L,xo,_t),this.placedOrientations[Jt]=xo),ko};li(()=>Nn(oo,s.WritingMode.horizontal),()=>{const ds=At.verticalTextBox;return L.allowVerticalPlacement&&St>0&&ds?(ai(ds),Nn(ds,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Oi(!!(Ir&&Ir.box&&Ir.box.length))}}if(vn=Ir,jt=vn&&vn.box&&vn.box.length>0,Ht=vn&&vn.offscreen,sr=vn&&vn.occluded,_t.useRuntimeCollisionCircles){const Oi=L.text.placedSymbolArray.get(_t.centerJustifiedTextSymbolIndex>=0?_t.centerJustifiedTextSymbolIndex:_t.verticalPlacedTextSymbolIndex),li=s.evaluateSizeForFeature(L.textSizeData,ze,Oi),Nn=V.get("text-padding");yn=this.collisionIndex.placeCollisionCircles(L,We,Oi,L.lineVertexArray,L.glyphOffsetArray,li,G,J,oe,C,lt,Ne.predicate,_t.collisionCircleDiameter*li/s.ONE_EM,Nn,this.retainedQueryData[L.bucketInstanceId].tileID),jt=We||yn.circles.length>0&&!yn.collisionDetected,Ht=Ht&&yn.offscreen,sr=yn.occluded}if(At.iconFeatureIndex&&(oi=At.iconFeatureIndex),At.iconBox){const Oi=li=>{ai(li);const Nn=at&&sn?Rt(sn.x,sn.y,st,lt,this.transform.angle):new s.Point(0,0),ds=L.getSymbolInstanceIconSize(De,this.transform.zoom,_t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(L,ds,li,Nn,qe,me,G,Ne.predicate)};Wr&&Wr.box&&Wr.box.length&&At.verticalIconBox?(Lr=Oi(At.verticalIconBox),rr=Lr.box.length>0):(Lr=Oi(At.iconBox),rr=Lr.box.length>0),Ht=Ht&&Lr.offscreen,zr=Lr.occluded}const js=ge||_t.numHorizontalGlyphVertices===0&&St===0,ia=Me||_t.numIconVertices===0;if(js||ia?ia?js||(rr=rr&&jt):jt=rr&&jt:rr=jt=rr&&jt,jt&&vn&&vn.box&&this.collisionIndex.insertCollisionBox(vn.box,V.get("text-ignore-placement"),L.bucketInstanceId,Wr&&Wr.box&&si?si:Gn,Ne.ID),rr&&Lr&&this.collisionIndex.insertCollisionBox(Lr.box,V.get("icon-ignore-placement"),L.bucketInstanceId,oi,Ne.ID),yn&&(jt&&this.collisionIndex.insertCollisionCircles(yn.circles,V.get("text-ignore-placement"),L.bucketInstanceId,Gn,Ne.ID),C)){const Oi=L.bucketInstanceId;let li=this.collisionCircleArrays[Oi];li===void 0&&(li=this.collisionCircleArrays[Oi]=new bn);for(let Nn=0;Nn<yn.circles.length;Nn+=4)li.circles.push(yn.circles[Nn+0]),li.circles.push(yn.circles[Nn+1]),li.circles.push(yn.circles[Nn+2]),li.circles.push(yn.collisionDetected?1:0)}const Ga=L.projection.name!=="globe";dt=dt&&(Ga||!sr),Ct=Ct&&(Ga||!zr),this.placements[Jt]=new pn(jt||dt,rr||Ct,Ht||L.justReloaded),g.add(Jt)};if(pt){const _t=L.getSortedSymbolIndexes(this.transform.angle);for(let Ft=_t.length-1;Ft>=0;--Ft){const At=_t[Ft];Qt(L.symbolInstances.get(At),At,L.collisionArrays[At])}}else for(let _t=h.symbolInstanceStart;_t<h.symbolInstanceEnd;_t++)Qt(L.symbolInstances.get(_t),_t,L.collisionArrays[_t]);if(C&&L.bucketInstanceId in this.collisionCircleArrays){const _t=this.collisionCircleArrays[L.bucketInstanceId];s.invert(_t.invProjMatrix,G),_t.viewportMatrix=this.collisionIndex.getViewportMatrix()}L.justReloaded=!1}markUsedJustification(h,g,C,P){const{leftJustifiedTextSymbolIndex:L,centerJustifiedTextSymbolIndex:V,rightJustifiedTextSymbolIndex:G,verticalPlacedTextSymbolIndex:J,crossTileID:oe}=C,se=s.getAnchorJustification(g),me=P===s.WritingMode.vertical?J:se==="left"?L:se==="center"?V:se==="right"?G:-1;L>=0&&(h.text.placedSymbolArray.get(L).crossTileID=me>=0&&L!==me?0:oe),V>=0&&(h.text.placedSymbolArray.get(V).crossTileID=me>=0&&V!==me?0:oe),G>=0&&(h.text.placedSymbolArray.get(G).crossTileID=me>=0&&G!==me?0:oe),J>=0&&(h.text.placedSymbolArray.get(J).crossTileID=me>=0&&J!==me?0:oe)}markUsedOrientation(h,g,C){const P=g===s.WritingMode.horizontal||g===s.WritingMode.horizontalOnly?g:0,L=g===s.WritingMode.vertical?g:0,{leftJustifiedTextSymbolIndex:V,centerJustifiedTextSymbolIndex:G,rightJustifiedTextSymbolIndex:J,verticalPlacedTextSymbolIndex:oe}=C,se=h.text.placedSymbolArray;V>=0&&(se.get(V).placedOrientation=P),G>=0&&(se.get(G).placedOrientation=P),J>=0&&(se.get(J).placedOrientation=P),oe>=0&&(se.get(oe).placedOrientation=L)}commit(h){this.commitTime=h,this.zoomAtLastRecencyCheck=this.transform.zoom;const g=this.prevPlacement;let C=!1;this.prevZoomAdjustment=g?g.zoomAdjustment(this.transform.zoom):0;const P=g?g.symbolFadeChange(h):1,L=g?g.opacities:{},V=g?g.variableOffsets:{},G=g?g.placedOrientations:{};for(const J in this.placements){const oe=this.placements[J],se=L[J];se?(this.opacities[J]=new tn(se,P,oe.text,oe.icon,null,oe.clipped),C=C||oe.text!==se.text.placed||oe.icon!==se.icon.placed):(this.opacities[J]=new tn(null,P,oe.text,oe.icon,oe.skipFade,oe.clipped),C=C||oe.text||oe.icon)}for(const J in L){const oe=L[J];if(!this.opacities[J]){const se=new tn(oe,P,!1,!1);se.isHidden()||(this.opacities[J]=se,C=C||oe.text.placed||oe.icon.placed)}}for(const J in V)this.variableOffsets[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.variableOffsets[J]=V[J]);for(const J in G)this.placedOrientations[J]||!this.opacities[J]||this.opacities[J].isHidden()||(this.placedOrientations[J]=G[J]);C?this.lastPlacementChangeTime=h:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=g?g.lastPlacementChangeTime:h)}updateLayerOpacities(h,g){const C=new Set;for(const P of g){const L=P.getBucket(h);L&&P.latestFeatureIndex&&h.id===L.layerIds[0]&&this.updateBucketOpacities(L,C,P.collisionBoxArray)}}updateBucketOpacities(h,g,C){h.hasTextData()&&h.text.opacityVertexArray.clear(),h.hasIconData()&&h.icon.opacityVertexArray.clear(),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexArray.clear(),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexArray.clear();const P=h.layers[0].layout,L=!!h.layers[0].dynamicFilter(),V=new tn(null,0,!1,!1,!0),G=P.get("text-allow-overlap"),J=P.get("icon-allow-overlap"),oe=P.get("text-variable-anchor"),se=P.get("text-rotation-alignment")==="map",me=P.get("text-pitch-alignment")==="map",Ie=P.get("icon-text-fit")!=="none",Oe=new tn(null,0,G&&(J||!h.hasIconData()||P.get("icon-optional")),J&&(G||!h.hasTextData()||P.get("text-optional")),!0);!h.collisionArrays&&C&&(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData())&&h.deserializeCollisionBoxes(C);const ze=(Ne,ge,Me)=>{for(let We=0;We<ge/4;We++)Ne.opacityVertexArray.emplaceBack(Me)};let De=0;for(let Ne=0;Ne<h.symbolInstances.length;Ne++){const ge=h.symbolInstances.get(Ne),{numHorizontalGlyphVertices:Me,numVerticalGlyphVertices:We,crossTileID:qe,numIconVertices:st}=ge,lt=g.has(qe);let at=this.opacities[qe];lt?at=V:at||(at=Oe,this.opacities[qe]=at),g.add(qe);const pt=Me>0||We>0,dt=st>0,Ct=this.placedOrientations[qe],Qt=Ct===s.WritingMode.vertical,_t=Ct===s.WritingMode.horizontal||Ct===s.WritingMode.horizontalOnly;if(!pt&&!dt||at.isHidden()||De++,pt){const Ft=Li(at.text);ze(h.text,Me,Qt?ii:Ft),ze(h.text,We,_t?ii:Ft);const At=at.text.isHidden(),{leftJustifiedTextSymbolIndex:Jt,centerJustifiedTextSymbolIndex:St,rightJustifiedTextSymbolIndex:jt,verticalPlacedTextSymbolIndex:rr}=ge,Ht=h.text.placedSymbolArray,sr=At||Qt?1:0;Jt>=0&&(Ht.get(Jt).hidden=sr),St>=0&&(Ht.get(St).hidden=sr),jt>=0&&(Ht.get(jt).hidden=sr),rr>=0&&(Ht.get(rr).hidden=At||_t?1:0);const zr=this.variableOffsets[qe];zr&&this.markUsedJustification(h,zr.anchor,ge,Ct);const sn=this.placedOrientations[qe];sn&&(this.markUsedJustification(h,"left",ge,sn),this.markUsedOrientation(h,sn,ge))}if(dt){const Ft=Li(at.icon),{placedIconSymbolIndex:At,verticalPlacedIconSymbolIndex:Jt}=ge,St=h.icon.placedSymbolArray,jt=at.icon.isHidden()?1:0;At>=0&&(ze(h.icon,st,Qt?ii:Ft),St.get(At).hidden=jt),Jt>=0&&(ze(h.icon,ge.numVerticalIconVertices,_t?ii:Ft),St.get(Jt).hidden=jt)}if(h.hasIconCollisionBoxData()||h.hasTextCollisionBoxData()){const Ft=h.collisionArrays[Ne];if(Ft){let At=new s.Point(0,0),Jt=!0;if(Ft.textBox||Ft.verticalTextBox){if(oe){const jt=this.variableOffsets[qe];jt?(At=it(jt.anchor,jt.width,jt.height,jt.textOffset,jt.textScale),se&&At._rotate(me?this.transform.angle:-this.transform.angle)):Jt=!1}L&&(Jt=!at.clipped),Ft.textBox&&Yr(h.textCollisionBox.collisionVertexArray,at.text.placed,!Jt||Qt,At.x,At.y),Ft.verticalTextBox&&Yr(h.textCollisionBox.collisionVertexArray,at.text.placed,!Jt||_t,At.x,At.y)}const St=Jt&&!!(!_t&&Ft.verticalIconBox);Ft.iconBox&&Yr(h.iconCollisionBox.collisionVertexArray,at.icon.placed,St,Ie?At.x:0,Ie?At.y:0),Ft.verticalIconBox&&Yr(h.iconCollisionBox.collisionVertexArray,at.icon.placed,!St,Ie?At.x:0,Ie?At.y:0)}}}if(h.fullyClipped=De===0,h.sortFeatures(this.transform.angle),this.retainedQueryData[h.bucketInstanceId]&&(this.retainedQueryData[h.bucketInstanceId].featureSortOrder=h.featureSortOrder),h.hasTextData()&&h.text.opacityVertexBuffer&&h.text.opacityVertexBuffer.updateData(h.text.opacityVertexArray),h.hasIconData()&&h.icon.opacityVertexBuffer&&h.icon.opacityVertexBuffer.updateData(h.icon.opacityVertexArray),h.hasIconCollisionBoxData()&&h.iconCollisionBox.collisionVertexBuffer&&h.iconCollisionBox.collisionVertexBuffer.updateData(h.iconCollisionBox.collisionVertexArray),h.hasTextCollisionBoxData()&&h.textCollisionBox.collisionVertexBuffer&&h.textCollisionBox.collisionVertexBuffer.updateData(h.textCollisionBox.collisionVertexArray),h.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[h.bucketInstanceId];h.placementInvProjMatrix=Ne.invProjMatrix,h.placementViewportMatrix=Ne.viewportMatrix,h.collisionCircleArray=Ne.circles,delete this.collisionCircleArrays[h.bucketInstanceId]}}symbolFadeChange(h){return this.fadeDuration===0?1:(h-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(h){return Math.max(0,(this.transform.zoom-h)/1.5)}hasTransitions(h){return this.stale||h-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(h,g){const C=this.zoomAtLastRecencyCheck===g?1-this.zoomAdjustment(g):1;return this.zoomAtLastRecencyCheck=g,this.commitTime+this.fadeDuration*C>h}setStale(){this.stale=!0}}function Yr(_,h,g,C,P){_.emplaceBack(h?1:0,g?1:0,C||0,P||0),_.emplaceBack(h?1:0,g?1:0,C||0,P||0),_.emplaceBack(h?1:0,g?1:0,C||0,P||0),_.emplaceBack(h?1:0,g?1:0,C||0,P||0)}const Or=Math.pow(2,25),$r=Math.pow(2,24),ri=Math.pow(2,17),Qn=Math.pow(2,16),ni=Math.pow(2,9),Tn=Math.pow(2,8),Fo=Math.pow(2,1);function Li(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const h=_.placed?1:0,g=Math.floor(127*_.opacity);return g*Or+h*$r+g*ri+h*Qn+g*ni+h*Tn+g*Fo+h}const ii=0;class Jo{constructor(h){this._sortAcrossTiles=h.layout.get("symbol-z-order")!=="viewport-y"&&h.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(h,g,C,P,L){const V=this._bucketParts;for(;this._currentTileIndex<h.length;)if(g.getBucketParts(V,P,h[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,L())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,V.sort((G,J)=>G.sortKey-J.sortKey));this._currentPartIndex<V.length;){const G=V[this._currentPartIndex];if(g.placeLayerBucketPart(G,this._seenCrossTileIDs,C,G.symbolInstanceStart===0),this._currentPartIndex++,L())return!0}return!1}}class Bo{constructor(h,g,C,P,L,V,G,J){this.placement=new nr(h,L,V,G,J),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=C,this._showCollisionBoxes=P,this._done=!1}isDone(){return this._done}continuePlacement(h,g,C){const P=s.exported.now(),L=()=>{const V=s.exported.now()-P;return!this._forceFullPlacement&&V>2};for(;this._currentPlacementIndex>=0;){const V=g[h[this._currentPlacementIndex]],G=this.placement.collisionIndex.transform.zoom;if(V.type==="symbol"&&(!V.minzoom||V.minzoom<=G)&&(!V.maxzoom||V.maxzoom>G)){if(this._inProgressLayer||(this._inProgressLayer=new Jo(V)),this._inProgressLayer.continuePlacement(C[V.source],this.placement,this._showCollisionBoxes,V,L))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(h){return this.placement.commit(h),this.placement}}const Zs=512/s.EXTENT/2;class Ci{constructor(h,g,C){this.tileID=h,this.bucketInstanceId=C,this.index=new s.KDBush(g.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const P=h.canonical.x*s.EXTENT,L=h.canonical.y*s.EXTENT;for(let V=0;V<g.length;V++){const{key:G,crossTileID:J,tileAnchorX:oe,tileAnchorY:se}=g.get(V),me=Math.floor((P+oe)*Zs),Ie=Math.floor((L+se)*Zs);this.index.add(me,Ie),this.keys.push(G),this.crossTileIDs.push(J)}this.index.finish()}findMatches(h,g,C){const P=this.tileID.canonical.z<g.canonical.z?1:Math.pow(2,this.tileID.canonical.z-g.canonical.z),L=Zs/Math.pow(2,g.canonical.z-this.tileID.canonical.z),V=g.canonical.x*s.EXTENT,G=g.canonical.y*s.EXTENT;for(let J=0;J<h.length;J++){const oe=h.get(J);if(oe.crossTileID)continue;const{key:se,tileAnchorX:me,tileAnchorY:Ie}=oe,Oe=Math.floor((V+me)*L),ze=Math.floor((G+Ie)*L),De=this.index.range(Oe-P,ze-P,Oe+P,ze+P);for(const Ne of De){const ge=this.crossTileIDs[Ne];if(this.keys[Ne]===se&&!C.has(ge)){C.add(ge),oe.crossTileID=ge;break}}}}}class Qo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ea{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(h){const g=Math.round((h-this.lng)/360);if(g!==0)for(const C in this.indexes){const P=this.indexes[C],L={};for(const V in P){const G=P[V];G.tileID=G.tileID.unwrapTo(G.tileID.wrap+g),L[G.tileID.key]=G}this.indexes[C]=L}this.lng=h}addBucket(h,g,C){if(this.indexes[h.overscaledZ]&&this.indexes[h.overscaledZ][h.key]){if(this.indexes[h.overscaledZ][h.key].bucketInstanceId===g.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(h.overscaledZ,this.indexes[h.overscaledZ][h.key])}for(let L=0;L<g.symbolInstances.length;L++)g.symbolInstances.get(L).crossTileID=0;this.usedCrossTileIDs[h.overscaledZ]||(this.usedCrossTileIDs[h.overscaledZ]=new Set);const P=this.usedCrossTileIDs[h.overscaledZ];for(const L in this.indexes){const V=this.indexes[L];if(Number(L)>h.overscaledZ)for(const G in V){const J=V[G];J.tileID.isChildOf(h)&&J.findMatches(g.symbolInstances,h,P)}else{const G=V[h.scaledTo(Number(L)).key];G&&G.findMatches(g.symbolInstances,h,P)}}for(let L=0;L<g.symbolInstances.length;L++){const V=g.symbolInstances.get(L);V.crossTileID||(V.crossTileID=C.generate(),P.add(V.crossTileID))}return this.indexes[h.overscaledZ]===void 0&&(this.indexes[h.overscaledZ]={}),this.indexes[h.overscaledZ][h.key]=new Ci(h,g.symbolInstances,g.bucketInstanceId),!0}removeBucketCrossTileIDs(h,g){for(const C of g.crossTileIDs)this.usedCrossTileIDs[h].delete(C)}removeStaleBuckets(h){let g=!1;for(const C in this.indexes){const P=this.indexes[C];for(const L in P)h[P[L].bucketInstanceId]||(this.removeBucketCrossTileIDs(C,P[L]),delete P[L],g=!0)}return g}}class Xe{constructor(){this.layerIndexes={},this.crossTileIDs=new Qo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(h,g,C,P){let L=this.layerIndexes[h.id];L===void 0&&(L=this.layerIndexes[h.id]=new ea);let V=!1;const G={};P.name!=="globe"&&L.handleWrapJump(C);for(const J of g){const oe=J.getBucket(h);oe&&h.id===oe.layerIds[0]&&(oe.bucketInstanceId||(oe.bucketInstanceId=++this.maxBucketInstanceId),L.addBucket(J.tileID,oe,this.crossTileIDs)&&(V=!0),G[oe.bucketInstanceId]=!0)}return L.removeStaleBuckets(G)&&(V=!0),V}pruneUnusedLayers(h){const g={};h.forEach(C=>{g[C]=!0});for(const C in this.layerIndexes)g[C]||delete this.layerIndexes[C]}}const ht=(_,h)=>s.emitValidationErrors(_,h&&h.filter(g=>g.identifier!=="source.canvas")),Se=s.pick(pe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),et=s.pick(pe,["setCenter","setZoom","setBearing","setPitch"]),Mt={version:8,layers:[],sources:{}},dr={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Hr extends s.Evented{constructor(h,g={}){super(),this.map=h,this.dispatcher=new Wt(zs(),this),this.imageManager=new Ve,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(h._requestManager,g.localFontFamily?s.LocalGlyphMode.all:g.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,g.localFontFamily||g.localIdeographFontFamily),this.crossTileSymbolIndex=new Xe,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const C=this;this._rtlTextPluginCallback=Hr.registerForPluginStateChange(P=>{C.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:P.pluginStatus,pluginURL:P.pluginURL},(L,V)=>{if(s.triggerPluginCompletionEvent(L),V&&V.every(G=>G))for(const G in C._sourceCaches){const J=C._sourceCaches[G],oe=J.getSource().type;oe!=="vector"&&oe!=="geojson"||J.reload()}})}),this.on("data",P=>{if(P.dataType!=="source"||P.sourceDataType!=="metadata")return;const L=this.getSource(P.sourceId);if(L&&L.vectorLayerIds)for(const V in this._layers){const G=this._layers[V];G.source===L.id&&this._validateLayer(G)}})}loadURL(h,g={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const C=typeof g.validate=="boolean"?g.validate:!s.isMapboxURL(h);h=this.map._requestManager.normalizeStyleURL(h,g.accessToken);const P=this.map._requestManager.transformRequest(h,s.ResourceType.Style);this._request=s.getJSON(P,(L,V)=>{this._request=null,L?this.fire(new s.ErrorEvent(L)):V&&this._load(V,C)})}loadJSON(h,g={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(h,g.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Mt,!1)}_updateLayerCount(h,g){const C=g?1:-1;h.is3D()&&(this._num3DLayers+=C),h.type==="circle"&&(this._numCircleLayers+=C),h.type==="symbol"&&(this._numSymbolLayers+=C)}_load(h,g){if(g&&ht(this,s.validateStyle(h)))return;this._loaded=!0,this.stylesheet=s.clone$1(h),this._updateMapProjection();for(const P in h.sources)this.addSource(P,h.sources[P],{validate:!1});this._changed=!1,h.sprite?this._loadSprite(h.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(h.glyphs);const C=hs(this.stylesheet.layers);this._order=C.map(P=>P.id),this._layers={},this._serializedLayers={};for(const P of C){const L=s.createStyleLayer(P);L.setEventedParent(this,{layer:{id:L.id}}),this._layers[L.id]=L,this._serializedLayers[L.id]=L.serialize(),this._updateLayerCount(L,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ye(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(h){h?this.stylesheet.projection=h:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(h){this._spriteRequest=function(g,C,P){let L,V,G;const J=s.exported.devicePixelRatio>1?"@2x":"";let oe=s.getJSON(C.transformRequest(C.normalizeSpriteURL(g,J,".json"),s.ResourceType.SpriteJSON),(Ie,Oe)=>{oe=null,G||(G=Ie,L=Oe,me())}),se=s.getImage(C.transformRequest(C.normalizeSpriteURL(g,J,".png"),s.ResourceType.SpriteImage),(Ie,Oe)=>{se=null,G||(G=Ie,V=Oe,me())});function me(){if(G)P(G);else if(L&&V){const Ie=s.exported.getImageData(V),Oe={};for(const ze in L){const{width:De,height:Ne,x:ge,y:Me,sdf:We,pixelRatio:qe,stretchX:st,stretchY:lt,content:at}=L[ze],pt=new s.RGBAImage({width:De,height:Ne});s.RGBAImage.copy(Ie,pt,{x:ge,y:Me},{x:0,y:0},{width:De,height:Ne}),Oe[ze]={data:pt,pixelRatio:qe,sdf:We,stretchX:st,stretchY:lt,content:at}}P(null,Oe)}}return{cancel(){oe&&(oe.cancel(),oe=null),se&&(se.cancel(),se=null)}}}(h,this.map._requestManager,(g,C)=>{if(this._spriteRequest=null,g)this.fire(new s.ErrorEvent(g));else if(C)for(const P in C)this.imageManager.addImage(P,C[P]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(h){const g=this.getSource(h.source);if(!g)return;const C=h.sourceLayer;C&&(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(C)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${C}" does not exist on source "${g.id}" as specified by style layer "${h.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const h in this._sourceCaches)if(!this._sourceCaches[h].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(h){const g=[];for(const C of h){const P=this._layers[C];P.type!=="custom"&&g.push(P.serialize())}return g}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const h in this._sourceCaches)if(this._sourceCaches[h].hasTransition())return!0;for(const h in this._layers)if(this._layers[h].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(h){return!!this.terrain&&(typeof h.isLayerDraped=="function"?h.isLayerDraped():dr[h.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(h){if(!this._loaded)return;const g=this._changed;if(this._changed){const P=Object.keys(this._updatedLayers),L=Object.keys(this._removedLayers);(P.length||L.length)&&this._updateWorkerLayers(P,L);for(const V in this._updatedSources){const G=this._updatedSources[V];G==="reload"?this._reloadSource(V):G==="clear"&&this._clearSource(V)}this._updateTilesForChangedImages();for(const V in this._updatedPaintProps)this._layers[V].updateTransitions(h);this.light.updateTransitions(h),this.fog&&this.fog.updateTransitions(h),this._resetUpdates()}const C={};for(const P in this._sourceCaches){const L=this._sourceCaches[P];C[P]=L.used,L.used=!1}for(const P of this._order){const L=this._layers[P];if(L.recalculate(h,this._availableImages),!L.isHidden(h.zoom)){const G=this._getLayerSourceCache(L);G&&(G.used=!0)}const V=this.map.painter;if(V){const G=L.getProgramIds();if(!G)continue;const J=L.getProgramConfiguration(h.zoom);for(const oe of G)V.useProgram(oe,J)}}for(const P in C){const L=this._sourceCaches[P];C[P]!==L.used&&L.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:L.getSource().id}))}this.light.recalculate(h),this.terrain&&this.terrain.recalculate(h),this.fog&&this.fog.recalculate(h),this.z=h.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const h=Object.keys(this._changedImages);if(h.length){for(const g in this._sourceCaches)this._sourceCaches[g].reloadTilesForDependencies(["icons","patterns"],h);this._changedImages={}}}_updateWorkerLayers(h,g){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(h),removedIds:g})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(h){if(this._checkLoaded(),ht(this,s.validateStyle(h)))return!1;(h=s.clone$1(h)).layers=hs(h.layers);const g=function(P,L){if(!P)return[{command:pe.setStyle,args:[L]}];let V=[];try{if(!k(P.version,L.version))return[{command:pe.setStyle,args:[L]}];k(P.center,L.center)||V.push({command:pe.setCenter,args:[L.center]}),k(P.zoom,L.zoom)||V.push({command:pe.setZoom,args:[L.zoom]}),k(P.bearing,L.bearing)||V.push({command:pe.setBearing,args:[L.bearing]}),k(P.pitch,L.pitch)||V.push({command:pe.setPitch,args:[L.pitch]}),k(P.sprite,L.sprite)||V.push({command:pe.setSprite,args:[L.sprite]}),k(P.glyphs,L.glyphs)||V.push({command:pe.setGlyphs,args:[L.glyphs]}),k(P.transition,L.transition)||V.push({command:pe.setTransition,args:[L.transition]}),k(P.light,L.light)||V.push({command:pe.setLight,args:[L.light]}),k(P.fog,L.fog)||V.push({command:pe.setFog,args:[L.fog]}),k(P.projection,L.projection)||V.push({command:pe.setProjection,args:[L.projection]});const G={},J=[];(function(me,Ie,Oe,ze){let De;for(De in Ie=Ie||{},me=me||{})me.hasOwnProperty(De)&&(Ie.hasOwnProperty(De)||d(De,Oe,ze));for(De in Ie){if(!Ie.hasOwnProperty(De))continue;const Ne=Ie[De];me.hasOwnProperty(De)?k(me[De],Ne)||(me[De].type==="geojson"&&Ne.type==="geojson"&&v(me,Ie,De)?Oe.push({command:pe.setGeoJSONSourceData,args:[De,Ne.data]}):m(De,Ie,Oe,ze)):c(De,Ie,Oe)}})(P.sources,L.sources,J,G);const oe=[];P.layers&&P.layers.forEach(me=>{me.source&&G[me.source]?V.push({command:pe.removeLayer,args:[me.id]}):oe.push(me)});let se=P.terrain;se&&G[se.source]&&(V.push({command:pe.setTerrain,args:[void 0]}),se=void 0),V=V.concat(J),k(se,L.terrain)||V.push({command:pe.setTerrain,args:[L.terrain]}),function(me,Ie,Oe){Ie=Ie||[];const ze=(me=me||[]).map(S),De=Ie.map(S),Ne=me.reduce(T,{}),ge=Ie.reduce(T,{}),Me=ze.slice(),We=Object.create(null);let qe,st,lt,at,pt,dt,Ct;for(qe=0,st=0;qe<ze.length;qe++)lt=ze[qe],ge.hasOwnProperty(lt)?st++:(Oe.push({command:pe.removeLayer,args:[lt]}),Me.splice(Me.indexOf(lt,st),1));for(qe=0,st=0;qe<De.length;qe++)lt=De[De.length-1-qe],Me[Me.length-1-qe]!==lt&&(Ne.hasOwnProperty(lt)?(Oe.push({command:pe.removeLayer,args:[lt]}),Me.splice(Me.lastIndexOf(lt,Me.length-st),1)):st++,dt=Me[Me.length-qe],Oe.push({command:pe.addLayer,args:[ge[lt],dt]}),Me.splice(Me.length-qe,0,lt),We[lt]=!0);for(qe=0;qe<De.length;qe++)if(lt=De[qe],at=Ne[lt],pt=ge[lt],!We[lt]&&!k(at,pt))if(k(at.source,pt.source)&&k(at["source-layer"],pt["source-layer"])&&k(at.type,pt.type)){for(Ct in b(at.layout,pt.layout,Oe,lt,null,pe.setLayoutProperty),b(at.paint,pt.paint,Oe,lt,null,pe.setPaintProperty),k(at.filter,pt.filter)||Oe.push({command:pe.setFilter,args:[lt,pt.filter]}),k(at.minzoom,pt.minzoom)&&k(at.maxzoom,pt.maxzoom)||Oe.push({command:pe.setLayerZoomRange,args:[lt,pt.minzoom,pt.maxzoom]}),at)at.hasOwnProperty(Ct)&&Ct!=="layout"&&Ct!=="paint"&&Ct!=="filter"&&Ct!=="metadata"&&Ct!=="minzoom"&&Ct!=="maxzoom"&&(Ct.indexOf("paint.")===0?b(at[Ct],pt[Ct],Oe,lt,Ct.slice(6),pe.setPaintProperty):k(at[Ct],pt[Ct])||Oe.push({command:pe.setLayerProperty,args:[lt,Ct,pt[Ct]]}));for(Ct in pt)pt.hasOwnProperty(Ct)&&!at.hasOwnProperty(Ct)&&Ct!=="layout"&&Ct!=="paint"&&Ct!=="filter"&&Ct!=="metadata"&&Ct!=="minzoom"&&Ct!=="maxzoom"&&(Ct.indexOf("paint.")===0?b(at[Ct],pt[Ct],Oe,lt,Ct.slice(6),pe.setPaintProperty):k(at[Ct],pt[Ct])||Oe.push({command:pe.setLayerProperty,args:[lt,Ct,pt[Ct]]}))}else Oe.push({command:pe.removeLayer,args:[lt]}),dt=Me[Me.lastIndexOf(lt)+1],Oe.push({command:pe.addLayer,args:[pt,dt]})}(oe,L.layers,V)}catch(G){console.warn("Unable to compute style diff:",G),V=[{command:pe.setStyle,args:[L]}]}return V}(this.serialize(),h).filter(P=>!(P.command in et));if(g.length===0)return!1;const C=g.filter(P=>!(P.command in Se));if(C.length>0)throw new Error(`Unimplemented: ${C.map(P=>P.command).join(", ")}.`);return g.forEach(P=>{P.command!=="setTransition"&&P.command!=="setProjection"&&this[P.command].apply(this,P.args)}),this.stylesheet=h,this._updateMapProjection(),!0}addImage(h,g){return this.getImage(h)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(h,g),this._afterImageUpdated(h),this)}updateImage(h,g){this.imageManager.updateImage(h,g)}getImage(h){return this.imageManager.getImage(h)}removeImage(h){return this.getImage(h)?(this.imageManager.removeImage(h),this._afterImageUpdated(h),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(h){this._availableImages=this.imageManager.listImages(),this._changedImages[h]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(h,g,C={}){if(this._checkLoaded(),this.getSource(h)!==void 0)throw new Error("There is already a source with this ID");if(!g.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(g).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(g.type)>=0&&this._validate(s.validateSource,`sources.${h}`,g,null,C))return;this.map&&this.map._collectResourceTiming&&(g.collectResourceTiming=!0);const P=jr(h,g,this.dispatcher,this);P.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(h),source:P.serialize(),sourceId:h}));const L=V=>{const G=(V?"symbol:":"other:")+h,J=this._sourceCaches[G]=new s.SourceCache(G,P,V);(V?this._symbolSourceCaches:this._otherSourceCaches)[h]=J,J.style=this,J.onAdd(this.map)};L(!1),g.type!=="vector"&&g.type!=="geojson"||L(!0),P.onAdd&&P.onAdd(this.map),this._changed=!0}removeSource(h){this._checkLoaded();const g=this.getSource(h);if(!g)throw new Error("There is no source with this ID");for(const P in this._layers)if(this._layers[P].source===h)return this.fire(new s.ErrorEvent(new Error(`Source "${h}" cannot be removed while layer "${P}" is using it.`)));if(this.terrain&&this.terrain.get().source===h)return this.fire(new s.ErrorEvent(new Error(`Source "${h}" cannot be removed while terrain is using it.`)));const C=this._getSourceCaches(h);for(const P of C)delete this._sourceCaches[P.id],delete this._updatedSources[P.id],P.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:P.getSource().id})),P.setEventedParent(null),P.clearTiles();return delete this._otherSourceCaches[h],delete this._symbolSourceCaches[h],g.setEventedParent(null),g.onRemove&&g.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(h,g){this._checkLoaded(),this.getSource(h).setData(g),this._changed=!0}getSource(h){const g=this._getSourceCache(h);return g&&g.getSource()}_getSources(){const h=[];for(const g in this._otherSourceCaches){const C=this._getSourceCache(g);C&&h.push(C.getSource())}return h}addLayer(h,g,C={}){this._checkLoaded();const P=h.id;if(this.getLayer(P))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${P}" already exists on this map`)));let L;if(h.type==="custom"){if(ht(this,s.validateCustomStyleLayer(h)))return;L=s.createStyleLayer(h)}else{if(typeof h.source=="object"&&(this.addSource(P,h.source),h=s.clone$1(h),h=s.extend(h,{source:P})),this._validate(s.validateLayer,`layers.${P}`,h,{arrayIndex:-1},C))return;L=s.createStyleLayer(h),this._validateLayer(L),L.setEventedParent(this,{layer:{id:P}}),this._serializedLayers[L.id]=L.serialize(),this._updateLayerCount(L,!0)}const V=g?this._order.indexOf(g):this._order.length;if(g&&V===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`)));this._order.splice(V,0,P),this._layerOrderChanged=!0,this._layers[P]=L;const G=this._getLayerSourceCache(L);if(this._removedLayers[P]&&L.source&&G&&L.type!=="custom"){const J=this._removedLayers[P];delete this._removedLayers[P],J.type!==L.type?this._updatedSources[L.source]="clear":(this._updatedSources[L.source]="reload",G.pause())}this._updateLayer(L),L.onAdd&&L.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(h,g){if(this._checkLoaded(),this._changed=!0,!this._layers[h])return void this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be moved.`)));if(h===g)return;const C=this._order.indexOf(h);this._order.splice(C,1);const P=g?this._order.indexOf(g):this._order.length;g&&P===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${g}" does not exist on this map.`))):(this._order.splice(P,0,h),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(h){this._checkLoaded();const g=this._layers[h];if(!g)return void this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be removed.`)));g.setEventedParent(null),this._updateLayerCount(g,!1);const C=this._order.indexOf(h);this._order.splice(C,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[h]=g,delete this._layers[h],delete this._serializedLayers[h],delete this._updatedLayers[h],delete this._updatedPaintProps[h],g.onRemove&&g.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(h){return this._layers[h]}hasLayer(h){return h in this._layers}hasLayerType(h){for(const g in this._layers)if(this._layers[g].type===h)return!0;return!1}setLayerZoomRange(h,g,C){this._checkLoaded();const P=this.getLayer(h);P?P.minzoom===g&&P.maxzoom===C||(g!=null&&(P.minzoom=g),C!=null&&(P.maxzoom=C),this._updateLayer(P)):this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(h,g,C={}){this._checkLoaded();const P=this.getLayer(h);if(P){if(!k(P.filter,g))return g==null?(P.filter=void 0,void this._updateLayer(P)):void(this._validate(s.validateFilter,`layers.${P.id}.filter`,g,{layerType:P.type},C)||(P.filter=s.clone$1(g),this._updateLayer(P)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be filtered.`)))}getFilter(h){const g=this.getLayer(h);return g&&s.clone$1(g.filter)}setLayoutProperty(h,g,C,P={}){this._checkLoaded();const L=this.getLayer(h);L?k(L.getLayoutProperty(g),C)||(L.setLayoutProperty(g,C,P),this._updateLayer(L)):this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(h,g){const C=this.getLayer(h);if(C)return C.getLayoutProperty(g);this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style.`)))}setPaintProperty(h,g,C,P={}){this._checkLoaded();const L=this.getLayer(h);L?k(L.getPaintProperty(g),C)||(L.setPaintProperty(g,C,P)&&this._updateLayer(L),this._changed=!0,this._updatedPaintProps[h]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${h}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(h,g){const C=this.getLayer(h);return C&&C.getPaintProperty(g)}setFeatureState(h,g){this._checkLoaded();const C=h.source,P=h.sourceLayer,L=this.getSource(C);if(!L)return void this.fire(new s.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const V=L.type;if(V==="geojson"&&P)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(V==="vector"&&!P)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));h.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const G=this._getSourceCaches(C);for(const J of G)J.setFeatureState(P,h.id,g)}removeFeatureState(h,g){this._checkLoaded();const C=h.source,P=this.getSource(C);if(!P)return void this.fire(new s.ErrorEvent(new Error(`The source '${C}' does not exist in the map's style.`)));const L=P.type,V=L==="vector"?h.sourceLayer:void 0;if(L==="vector"&&!V)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(g&&typeof h.id!="string"&&typeof h.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const G=this._getSourceCaches(C);for(const J of G)J.removeFeatureState(V,h.id,g)}getFeatureState(h){this._checkLoaded();const g=h.source,C=h.sourceLayer,P=this.getSource(g);if(P){if(P.type!=="vector"||C)return h.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(g)[0].getFeatureState(C,h.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const h={};for(const g in this._sourceCaches){const C=this._sourceCaches[g].getSource();h[C.id]||(h[C.id]=C.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:h,layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateLayer(h){this._updatedLayers[h.id]=!0;const g=this._getLayerSourceCache(h);h.source&&!this._updatedSources[h.source]&&g&&g.getSource().type!=="raster"&&(this._updatedSources[h.source]="reload",g.pause()),this._changed=!0,h.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(h){const g=V=>this._layers[V].type==="fill-extrusion",C={},P=[];for(let V=this._order.length-1;V>=0;V--){const G=this._order[V];if(g(G)){C[G]=V;for(const J of h){const oe=J[G];if(oe)for(const se of oe)P.push(se)}}}P.sort((V,G)=>G.intersectionZ-V.intersectionZ);const L=[];for(let V=this._order.length-1;V>=0;V--){const G=this._order[V];if(g(G))for(let J=P.length-1;J>=0;J--){const oe=P[J].feature;if(C[oe.layer.id]<V)break;L.push(oe),P.pop()}else for(const J of h){const oe=J[G];if(oe)for(const se of oe)L.push(se.feature)}}return L}queryRenderedFeatures(h,g,C){g&&g.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",g.filter,null,g);const P={};if(g&&g.layers){if(!Array.isArray(g.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const J of g.layers){const oe=this._layers[J];if(!oe)return this.fire(new s.ErrorEvent(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];P[oe.source]=!0}}const L=[];g.availableImages=this._availableImages;const V=g&&g.layers?g.layers.some(J=>{const oe=this.getLayer(J);return oe&&oe.is3D()}):this.has3DLayers(),G=ut.createFromScreenPoints(h,C);for(const J in this._sourceCaches){const oe=this._sourceCaches[J].getSource().id;g.layers&&!P[oe]||L.push(Cn(this._sourceCaches[J],this._layers,this._serializedLayers,G,g,C,V,!!this.map._showQueryGeometry))}return this.placement&&L.push(function(J,oe,se,me,Ie,Oe,ze){const De={},Ne=Oe.queryRenderedSymbols(me),ge=[];for(const Me of Object.keys(Ne).map(Number))ge.push(ze[Me]);ge.sort($n);for(const Me of ge){const We=Me.featureIndex.lookupSymbolFeatures(Ne[Me.bucketInstanceId],oe,Me.bucketIndex,Me.sourceLayerIndex,Ie.filter,Ie.layers,Ie.availableImages,J);for(const qe in We){const st=De[qe]=De[qe]||[],lt=We[qe];lt.sort((at,pt)=>{const dt=Me.featureSortOrder;if(dt){const Ct=dt.indexOf(at.featureIndex);return dt.indexOf(pt.featureIndex)-Ct}return pt.featureIndex-at.featureIndex});for(const at of lt)st.push(at)}}for(const Me in De)De[Me].forEach(We=>{const qe=We.feature,st=se(J[Me]);if(!st)return;const lt=st.getFeatureState(qe.layer["source-layer"],qe.id);qe.source=qe.layer.source,qe.layer["source-layer"]&&(qe.sourceLayer=qe.layer["source-layer"]),qe.state=lt});return De}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),G.screenGeometry,g,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(L)}querySourceFeatures(h,g){g&&g.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",g.filter,null,g);const C=this._getSourceCaches(h);let P=[];for(const L of C)P=P.concat(Bn(L,g));return P}addSourceType(h,g,C){return Hr.getSourceType(h)?C(new Error(`A source type called "${h}" already exists.`)):(Hr.setSourceType(h,g),g.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:h,url:g.workerSourceURL},C):C(null,null))}getLight(){return this.light.getLight()}setLight(h,g={}){this._checkLoaded();const C=this.light.getLight();let P=!1;for(const V in h)if(!k(h[V],C[V])){P=!0;break}if(!P)return;const L=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(h,g),this.light.updateTransitions(L)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(h,g=1){if(this._checkLoaded(),!h)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let C=h;if(g===1){if(typeof C.source=="object"){const P="terrain-dem-src";this.addSource(P,C.source),C=s.clone$1(C),C=s.extend(C,{source:P})}if(this._validate(s.validateTerrain,"terrain",C))return}if(!this.terrain||this.terrain&&g!==this.terrain.drapeRenderMode){if(!C)return;this._createTerrain(C,g)}else{const P=this.terrain,L=P.get();for(const V of Object.keys(s.spec.terrain))!C.hasOwnProperty(V)&&s.spec.terrain[V].default&&(C[V]=s.spec.terrain[V].default);for(const V in C)if(!k(C[V],L[V])){P.set(C),this.stylesheet.terrain=C;const G=this._setTransitionParameters({duration:0});P.updateTransitions(G);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(h){const g=this.fog=new Xt(h,this.map.transform);this.stylesheet.fog=h;const C=this._setTransitionParameters({duration:0});g.updateTransitions(C)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const h of this.map._markers)h._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(h){if(this._checkLoaded(),!h)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const g=this.fog,C=g.get();Object.keys(h).length===0&&g.set(h);for(const P in h)if(!k(h[P],C[P])){g.set(h),this.stylesheet.fog=h;const L=this._setTransitionParameters({duration:0});g.updateTransitions(L);break}}else this._createFog(h);this._markersNeedUpdate=!0}_setTransitionParameters(h){return{now:s.exported.now(),transition:s.extend(h,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const h=this._order.filter(C=>this.isLayerDraped(this._layers[C])),g=this._order.filter(C=>!this.isLayerDraped(this._layers[C]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...h),this._drapedFirstOrder.push(...g)}_createTerrain(h,g){const C=this.terrain=new Pt(h,g);this.stylesheet.terrain=h,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const P=this._setTransitionParameters({duration:0});C.updateTransitions(P)}_force3DLayerUpdate(){for(const h in this._layers){const g=this._layers[h];g.type==="fill-extrusion"&&this._updateLayer(g)}}_forceSymbolLayerUpdate(){for(const h in this._layers){const g=this._layers[h];g.type==="symbol"&&this._updateLayer(g)}}_validate(h,g,C,P,L={}){return(!L||L.validate!==!1)&&ht(this,h.call(s.validateStyle,s.extend({key:g,style:this.serialize(),value:C,styleSpec:s.spec},P)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this._sourceCaches)this._sourceCaches[h].clearTiles(),this._sourceCaches[h].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(h){const g=this._getSourceCaches(h);for(const C of g)C.clearTiles()}_reloadSource(h){const g=this._getSourceCaches(h);for(const C of g)C.resume(),C.reload()}_reloadSources(){for(const h of this._getSources())h.reload&&h.reload()}_updateSources(h){for(const g in this._sourceCaches)this._sourceCaches[g].update(h)}_generateCollisionBoxes(){for(const h in this._sourceCaches){const g=this._sourceCaches[h];g.resume(),g.reload()}}_updatePlacement(h,g,C,P,L=!1){let V=!1,G=!1;const J={};for(const oe of this._order){const se=this._layers[oe];if(se.type!=="symbol")continue;if(!J[se.source]){const Ie=this._getLayerSourceCache(se);if(!Ie)continue;J[se.source]=Ie.getRenderableIds(!0).map(Oe=>Ie.getTileByID(Oe)).sort((Oe,ze)=>ze.tileID.overscaledZ-Oe.tileID.overscaledZ||(Oe.tileID.isLessThan(ze.tileID)?-1:1))}const me=this.crossTileSymbolIndex.addLayer(se,J[se.source],h.center.lng,h.projection);V=V||me}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),L=L||this._layerOrderChanged||C===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(L||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),h.zoom))&&(this.pauseablePlacement=new Bo(h,this._order,L,g,C,P,this.placement,this.fog&&h.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,J),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),G=!0),V&&this.pauseablePlacement.placement.setStale()),G||V)for(const oe of this._order){const se=this._layers[oe];se.type==="symbol"&&this.placement.updateLayerOpacities(se,J[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const h in this._sourceCaches)this._sourceCaches[h].releaseSymbolFadeTiles()}getImages(h,g,C){this.imageManager.getImages(g.icons,C),this._updateTilesForChangedImages();const P=L=>{L&&L.setDependencies(g.tileID.key,g.type,g.icons)};P(this._otherSourceCaches[g.source]),P(this._symbolSourceCaches[g.source])}getGlyphs(h,g,C){this.glyphManager.getGlyphs(g.stacks,C)}getResource(h,g,C){return s.makeRequest(g,C)}_getSourceCache(h){return this._otherSourceCaches[h]}_getLayerSourceCache(h){return h.type==="symbol"?this._symbolSourceCaches[h.source]:this._otherSourceCaches[h.source]}_getSourceCaches(h){const g=[];return this._otherSourceCaches[h]&&g.push(this._otherSourceCaches[h]),this._symbolSourceCaches[h]&&g.push(this._symbolSourceCaches[h]),g}_isSourceCacheLoaded(h){const g=this._getSourceCaches(h);return g.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${h}'`))),!1):g.every(C=>C.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Hr.getSourceType=function(_){return Vr[_]},Hr.setSourceType=function(_,h){Vr[_]=h},Hr.registerForPluginStateChange=s.registerForPluginStateChange;var kr=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,en="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",wn=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Rn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,kn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let ss={},os={};const ji=[];Co(kr,ji),Co(wn,ji),Co(Rn,ji),Co(kn,ji),ss=Mn("",wn),os=Mn(kn,Rn);const yo=Mn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Ks=kr,ta=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var $o={background:Mn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Mn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Mn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Mn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Mn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Mn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Mn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Mn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Mn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Mn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Mn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Mn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Mn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Mn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Mn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Mn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Mn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Mn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Mn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Mn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Mn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,en),skyboxGradient:Mn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,en),skyboxCapture:Mn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Mn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Mn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Co(_,h){const g=_.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let C of g)if(C=C.trim(),C[0]==="#"&&C.includes("if")&&!C.includes("endif")){C=C.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const P=C.split(" ");for(const L of P)h.includes(L)||h.push(L)}}function Mn(_,h){const g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,C=h.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),P={},L=[...ji];return Co(_,L),Co(h,L),{fragmentSource:_=_.replace(g,(V,G,J,oe,se)=>(P[se]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
varying ${J} ${oe} ${se};
#else
uniform ${J} ${oe} u_${se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${se}
    ${J} ${oe} ${se} = u_${se};
#endif
`)),vertexSource:h=h.replace(g,(V,G,J,oe,se)=>{const me=oe==="float"?"vec2":"vec4",Ie=se.match(/color/)?"color":me;return P[se]?G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${J} ${me} a_${se};
varying ${J} ${oe} ${se};
#else
uniform ${J} ${oe} u_${se};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = a_${se};
#else
    ${J} ${oe} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = unpack_mix_${Ie}(a_${se}, u_${se}_t);
#else
    ${J} ${oe} ${se} = u_${se};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
attribute ${J} ${me} a_${se};
#else
uniform ${J} ${oe} u_${se};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${J} ${oe} ${se} = a_${se};
#else
    ${J} ${oe} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${J} ${oe} ${se} = unpack_mix_${Ie}(a_${se}, u_${se}_t);
#else
    ${J} ${oe} ${se} = u_${se};
#endif
`}),staticAttributes:C,usedDefines:L}}class Pu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(h,g,C,P,L,V,G){this.context=h;let J=this.boundPaintVertexBuffers.length!==P.length;for(let se=0;!J&&se<P.length;se++)this.boundPaintVertexBuffers[se]!==P[se]&&(J=!0);let oe=this.boundDynamicVertexBuffers.length!==G.length;for(let se=0;!oe&&se<G.length;se++)this.boundDynamicVertexBuffers[se]!==G[se]&&(oe=!0);if(!h.extVertexArrayObject||!this.vao||this.boundProgram!==g||this.boundLayoutVertexBuffer!==C||J||oe||this.boundIndexBuffer!==L||this.boundVertexOffset!==V)this.freshBind(g,C,P,L,V,G);else{h.bindVertexArrayOES.set(this.vao);for(const se of G)se&&se.bind();L&&L.dynamicDraw&&L.bind()}}freshBind(h,g,C,P,L,V){let G;const J=h.numAttributes,oe=this.context,se=oe.gl;if(oe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=oe.extVertexArrayObject.createVertexArrayOES(),oe.bindVertexArrayOES.set(this.vao),G=0,this.boundProgram=h,this.boundLayoutVertexBuffer=g,this.boundPaintVertexBuffers=C,this.boundIndexBuffer=P,this.boundVertexOffset=L,this.boundDynamicVertexBuffers=V;else{G=oe.currentNumAttributes||0;for(let me=J;me<G;me++)se.disableVertexAttribArray(me)}g.enableAttributes(se,h),g.bind(),g.setVertexAttribPointers(se,h,L);for(const me of C)me.enableAttributes(se,h),me.bind(),me.setVertexAttribPointers(se,h,L);for(const me of V)me&&(me.enableAttributes(se,h),me.bind(),me.setVertexAttribPointers(se,h,L));P&&P.bind(),oe.currentNumAttributes=J}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Hl(_,h){const g=Math.pow(2,h.canonical.z),C=h.canonical.y;return[new s.MercatorCoordinate(0,C/g).toLngLat().lat,new s.MercatorCoordinate(0,(C+1)/g).toLngLat().lat]}function r0(_,h,g,C,P,L,V){const G=_.context,J=G.gl,oe=g.fbo;if(!oe)return;_.prepareDrawTile();const se=_.useProgram("hillshade");G.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,oe.colorAttachment.get());const me=((De,Ne,ge,Me)=>{const We=ge.paint.get("hillshade-shadow-color"),qe=ge.paint.get("hillshade-highlight-color"),st=ge.paint.get("hillshade-accent-color");let lt=ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);ge.paint.get("hillshade-illumination-anchor")==="viewport"&&(lt-=De.transform.angle);const at=!De.options.moving;return{u_matrix:Me||De.transform.calculateProjMatrix(Ne.tileID.toUnwrapped(),at),u_image:0,u_latrange:Hl(0,Ne.tileID),u_light:[ge.paint.get("hillshade-exaggeration"),lt],u_shadow:We,u_highlight:qe,u_accent:st}})(_,g,C,_.terrain?h.projMatrix:null);_.prepareDrawProgram(G,se,h.toUnwrapped());const{tileBoundsBuffer:Ie,tileBoundsIndexBuffer:Oe,tileBoundsSegments:ze}=_.getTileBoundsBuffers(g);se.draw(G,J.TRIANGLES,P,L,V,s.CullFaceMode.disabled,me,C.id,Ie,Oe,ze)}function yg(_,h,g){if(!h.needsDEMTextureUpload)return;const C=_.context,P=C.gl;C.pixelStoreUnpackPremultiplyAlpha.set(!1),h.demTexture=h.demTexture||_.getTileTexture(g.stride);const L=g.getPixels();h.demTexture?h.demTexture.update(L,{premultiply:!1}):h.demTexture=new s.Texture(C,L,P.RGBA,{premultiply:!1}),h.needsDEMTextureUpload=!1}function n0(_,h,g,C,P,L){const V=_.context,G=V.gl;if(!h.dem)return;const J=h.dem;if(V.activeTexture.set(G.TEXTURE1),yg(_,h,J),!h.demTexture)return;h.demTexture.bind(G.NEAREST,G.CLAMP_TO_EDGE);const oe=J.dim;V.activeTexture.set(G.TEXTURE0);let se=h.fbo;if(!se){const ze=new s.Texture(V,{width:oe,height:oe,data:null},G.RGBA);ze.bind(G.LINEAR,G.CLAMP_TO_EDGE),se=h.fbo=V.createFramebuffer(oe,oe,!0),se.colorAttachment.set(ze.texture)}V.bindFramebuffer.set(se.framebuffer),V.viewport.set([0,0,oe,oe]);const{tileBoundsBuffer:me,tileBoundsIndexBuffer:Ie,tileBoundsSegments:Oe}=_.getMercatorTileBoundsBuffers();_.useProgram("hillshadePrepare").draw(V,G.TRIANGLES,C,P,L,s.CullFaceMode.disabled,((ze,De)=>{const Ne=De.stride,ge=s.create();return s.ortho(ge,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(ge,ge,[0,-s.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[Ne,Ne],u_zoom:ze.overscaledZ,u_unpack:De.unpackVector}})(h.tileID,J),g.id,me,Ie,Oe),h.needsHillshadePrepare=!1}const xg=_=>({u_matrix:new s.UniformMatrix4f(_),u_image0:new s.Uniform1i(_),u_skirt_height:new s.Uniform1f(_)}),Ru=(_,h)=>({u_matrix:_,u_image0:0,u_skirt_height:h}),Xf=(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze)=>({u_proj_matrix:Float32Array.from(_),u_globe_matrix:h,u_normalize_matrix:Float32Array.from(C),u_merc_matrix:g,u_zoom_transition:P,u_merc_center:L,u_image0:0,u_frustum_tl:V,u_frustum_tr:G,u_frustum_br:J,u_frustum_bl:oe,u_globe_pos:se,u_globe_radius:me,u_viewport:Ie,u_grid_matrix:ze?Float32Array.from(ze):new Float32Array(9),u_skirt_height:Oe});function Mu(_,h){return _!=null&&h!=null&&!(!_.hasData()||!h.hasData())&&_.demTexture!=null&&h.demTexture!=null&&_.tileID.key!==h.tileID.key}const dl=new class{constructor(){this.operations={}}newMorphing(_,h,g,C,P){if(_ in this.operations){const L=this.operations[_];L.to.tileID.key!==g.tileID.key&&(L.queued=g)}else this.operations[_]={startTime:C,phase:0,duration:P,from:h,to:g,queued:null}}getMorphValuesForProxy(_){if(!(_ in this.operations))return null;const h=this.operations[_];return{from:h.from,to:h.to,phase:h.phase}}update(_){for(const h in this.operations){const g=this.operations[h];for(g.phase=(_-g.startTime)/g.duration;g.phase>=1||!this._validOp(g);)if(!this._nextOp(g,_)){delete this.operations[h];break}}}_nextOp(_,h){return!!_.queued&&(_.from=_.to,_.to=_.queued,_.queued=null,_.phase=0,_.startTime=h,!0)}_validOp(_){return _.from.hasData()&&_.to.hasData()}},Mc={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function qf(_){return 6*Math.pow(1.5,22-_)}function i0(_,h){const g=1<<_.z;return!h&&(_.x===0||_.x===g-1)||_.y===0||_.y===g-1}const hd=_=>({u_matrix:_});function vg(_,h,g,C,P){if(P>0){const L=s.exported.now(),V=(L-_.timeAdded)/P,G=h?(L-h.timeAdded)/P:-1,J=g.getSource(),oe=C.coveringZoomLevel({tileSize:J.tileSize,roundZoom:J.roundZoom}),se=!h||Math.abs(h.tileID.overscaledZ-oe)>Math.abs(_.tileID.overscaledZ-oe),me=se&&_.refreshedUponExpiration?1:s.clamp(se?V:1-G,0,1);return _.refreshedUponExpiration&&V>=1&&(_.refreshedUponExpiration=!1),h?{opacity:1,mix:1-me}:{opacity:me,mix:0}}return{opacity:1,mix:0}}class bg extends s.SourceCache{constructor(h){const g={type:"raster-dem",maxzoom:h.transform.maxZoom},C=new Wt(zs(),null),P=jr("mock-dem",g,C,h.style);super("mock-dem",P,!1),P.setEventedParent(this),this._sourceLoaded=!0}_loadTile(h,g){h.state="loaded",g(null)}}class Yf extends s.SourceCache{constructor(h){const g=jr("proxy",{type:"geojson",maxzoom:h.transform.maxZoom},new Wt(zs(),null),h.style);super("proxy",g,!1),g.setEventedParent(this),this.map=this.getSource().map=h,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(h,g,C){if(h.freezeTileCoverage)return;this.transform=h;const P=h.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((L,V)=>{if(L[V.key]="",!this._tiles[V.key]){const G=new s.Tile(V,this._source.tileSize*V.overscaleFactor(),h.tileZoom);G.state="loaded",this._tiles[V.key]=G}return L},{});for(const L in this._tiles)L in P||(this.freeFBO(L),this._tiles[L].unloadVectorData(),delete this._tiles[L])}freeFBO(h){const g=this.proxyCachedFBO[h];if(g!==void 0){const C=Object.values(g);this.renderCachePool.push(...C),delete this.proxyCachedFBO[h]}}deallocRenderCache(){this.renderCache.forEach(h=>h.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Zf extends s.OverscaledTileID{constructor(h,g,C){super(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y),this.proxyTileKey=g,this.projMatrix=C}}class _g extends s.Elevation{constructor(h,g){super(),this.painter=h,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[C,P,L]=function(J){const oe=new s.StructArrayLayout2i4,se=new s.StructArrayLayout3ui6,me=131;oe.reserve(17161),se.reserve(33800);const Ie=s.EXTENT/128,Oe=s.EXTENT+Ie/2,ze=Oe+Ie;for(let Ne=-Ie;Ne<ze;Ne+=Ie)for(let ge=-Ie;ge<ze;ge+=Ie){const Me=ge<0||ge>Oe||Ne<0||Ne>Oe?24575:0,We=s.clamp(Math.round(ge),0,s.EXTENT),qe=s.clamp(Math.round(Ne),0,s.EXTENT);oe.emplaceBack(We+Me,qe)}const De=(Ne,ge)=>{const Me=ge*me+Ne;se.emplaceBack(Me+1,Me,Me+me),se.emplaceBack(Me+me,Me+me+1,Me+1)};for(let Ne=1;Ne<129;Ne++)for(let ge=1;ge<129;ge++)De(ge,Ne);return[0,129].forEach(Ne=>{for(let ge=0;ge<130;ge++)De(ge,Ne),De(Ne,ge)}),[oe,se,32768]}(),V=h.context;this.gridBuffer=V.createVertexBuffer(C,s.posAttributes.members),this.gridIndexBuffer=V.createIndexBuffer(P),this.gridSegments=s.SegmentVector.simpleSegment(0,0,C.length,P.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,C.length,L),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Yf(g.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const G=V.gl;this._overlapStencilMode=new s.StencilMode({func:G.GEQUAL,mask:255},0,255,G.KEEP,G.KEEP,G.REPLACE),this._previousZoom=h.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=g,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new bg(g.map)}set style(h){h.on("data",this._onStyleDataEvent.bind(this)),h.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=h,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(h,g,C){if(h&&h.terrain){this._style!==h&&(this.style=h),this.enabled=!0;const P=h.terrain.properties;this.sourceCache=h.terrain.drapeRenderMode===0?this._mockSourceCache:h._getSourceCache(P.get("source")),this._exaggeration=P.get("exaggeration");const L=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const V=this.getScaledDemTileSize();this.sourceCache.update(g,V,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,L(),this._initializing=!0),L(),g.updateElevation(!0,C),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(g),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(h){this._findCoveringTileCache[h]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const h=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||h.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${h.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${h.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(h){h.coord&&h.dataType==="source"?this._clearRenderCacheForTile(h.sourceCacheId,h.coord):h.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const h in this._style._sourceCaches)this._style._sourceCaches[h].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(h=>h.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const h=2*this.proxySourceCache.getSource().tileSize;return[h,h]}set useVertexMorphing(h){this._useVertexMorphing=h}updateTileBinding(h){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const g=this.proxySourceCache,C=this.painter.transform;this._initializing&&(this._initializing=C._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(C.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const P=this.proxyCoords=g.getIds().map(J=>{const oe=g.getTileByID(J).tileID;return oe.projMatrix=C.calculateProjMatrix(oe.toUnwrapped()),oe});(function(J,oe){const se=oe.transform.pointCoordinate(oe.transform.getCameraPoint()),me=new s.Point(se.x,se.y);J.sort((Ie,Oe)=>{if(Oe.overscaledZ-Ie.overscaledZ)return Oe.overscaledZ-Ie.overscaledZ;const ze=new s.Point(Ie.canonical.x+(1<<Ie.canonical.z)*Ie.wrap,Ie.canonical.y),De=new s.Point(Oe.canonical.x+(1<<Oe.canonical.z)*Oe.wrap,Oe.canonical.y),Ne=me.mult(1<<Ie.canonical.z);return Ne.x-=.5,Ne.y-=.5,Ne.distSqr(ze)-Ne.distSqr(De)})})(P,this.painter),this._previousZoom=C.zoom;const L=this.proxyToSource||{};this.proxyToSource={},P.forEach(J=>{this.proxyToSource[J.key]={}}),this.terrainTileForTile={};const V=this._style._sourceCaches;for(const J in V){const oe=V[J];if(!oe.used||(oe!==this.sourceCache&&this.resetTileLookupCache(oe.id),this._setupProxiedCoordsForOrtho(oe,h[J],L),oe.usedForTerrain))continue;const se=h[J];oe.getSource().reparseOverscaled&&this._assignTerrainTiles(se)}this.proxiedCoords[g.id]=P.map(J=>new Zf(J,J.key,this.orthoMatrix)),this._assignTerrainTiles(P),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(L),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const G={};this._visibleDemTiles=[];for(const J of this.proxyCoords){const oe=this.terrainTileForTile[J.key];if(!oe)continue;const se=oe.tileID.key;se in G||(this._visibleDemTiles.push(oe),G[se]=se)}}_assignTerrainTiles(h){this._initializing||h.forEach(g=>{if(this.terrainTileForTile[g.key])return;const C=this._findTileCoveringTileID(g,this.sourceCache);C&&(this.terrainTileForTile[g.key]=C)})}_prepareDEMTextures(){const h=this.painter.context,g=h.gl;for(const C in this.terrainTileForTile){const P=this.terrainTileForTile[C],L=P.dem;!L||P.demTexture&&!P.needsDEMTextureUpload||(h.activeTexture.set(g.TEXTURE1),yg(this.painter,P,L))}}_prepareDemTileUniforms(h,g,C,P){if(!g||g.demTexture==null)return!1;const L=h.tileID.canonical,V=Math.pow(2,g.tileID.canonical.z-L.z),G=P||"";return C[`u_dem_tl${G}`]=[L.x*V%1,L.y*V%1],C[`u_dem_scale${G}`]=V,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const h=this.painter.context,g=h.gl;if(!this._emptyDepthBufferTexture){const C=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(h,C,g.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let h=0;const g=this._visibleDemTiles.reduce((C,P)=>{if(!P.dem)return C;const L=P.dem.tree.minimums[0];return L>0&&h++,C+L},0);return h?g/h:0}_updateEmptyDEMTexture(){const h=this.painter.context,g=h.gl;h.activeTexture.set(g.TEXTURE2);const C=this._getLoadedAreaMinimum(),P=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(C,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let L=this._emptyDEMTexture;return L?L.update(P,{premultiply:!1}):L=this._emptyDEMTexture=new s.Texture(h,P,g.RGBA,{premultiply:!1}),L}setupElevationDraw(h,g,C){const P=this.painter.context,L=P.gl,V=(G=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(G),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var G;V.u_dem_size=this.sourceCache.getSource().tileSize,V.u_exaggeration=this.exaggeration();let J=null,oe=null,se=1;if(C&&C.morphing&&this._useVertexMorphing){const me=C.morphing.srcDemTile,Ie=C.morphing.dstDemTile;se=C.morphing.phase,me&&Ie&&(this._prepareDemTileUniforms(h,me,V,"_prev")&&(oe=me),this._prepareDemTileUniforms(h,Ie,V)&&(J=Ie))}if(oe&&J?(P.activeTexture.set(L.TEXTURE2),J.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE,L.NEAREST),P.activeTexture.set(L.TEXTURE4),oe.demTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE,L.NEAREST),V.u_dem_lerp=se):(J=this.terrainTileForTile[h.tileID.key],P.activeTexture.set(L.TEXTURE2),(this._prepareDemTileUniforms(h,J,V)?J.demTexture:this.emptyDEMTexture).bind(L.NEAREST,L.CLAMP_TO_EDGE)),P.activeTexture.set(L.TEXTURE3),C&&C.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),this._depthFBO&&(V.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(L.NEAREST,L.CLAMP_TO_EDGE),V.u_depth_size_inv=[1,1]),C&&C.useMeterToDem&&J){const me=(1<<J.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;V.u_meter_to_dem=me}if(C&&C.labelPlaneMatrixInv&&(V.u_label_plane_matrix_inv=C.labelPlaneMatrixInv),g.setTerrainUniformValues(P,V),this.painter.transform.projection.name==="globe"){const me=this.globeUniformValues(this.painter.transform,h.tileID.canonical,C&&C.useDenormalizedUpVectorScale);g.setGlobeUniformValues(P,me)}}globeUniformValues(h,g,C){const P=h.projection;return{u_tile_tl_up:P.upVector(g,0,0),u_tile_tr_up:P.upVector(g,s.EXTENT,0),u_tile_br_up:P.upVector(g,s.EXTENT,s.EXTENT),u_tile_bl_up:P.upVector(g,0,s.EXTENT),u_tile_up_scale:C?s.globeMetersToEcef(1):P.upVectorScale(g,h.center.lat,h.worldSize).metersToTile}}renderToBackBuffer(h){const g=this.painter,C=this.painter.context;h.length!==0&&(C.bindFramebuffer.set(null),C.viewport.set([0,0,g.width,g.height]),g.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(P,L,V,G,J){if(P.transform.projection.name==="globe")(function(oe,se,me,Ie,Oe){const ze=oe.context,De=ze.gl;let Ne,ge;const Me=oe.options.showTerrainWireframe?2:0,We=oe.transform,qe=s.globeUseCustomAntiAliasing(oe,ze,We),st=(Jt,St)=>{if(ge===Jt)return;const jt=[Mc[Jt],"PROJECTION_GLOBE_VIEW"];qe&&jt.push("CUSTOM_ANTIALIASING"),St&&jt.push(Mc[Me]),Ne=oe.useProgram("globeRaster",null,jt),ge=Jt},lt=oe.colorModeForRenderPass(),at=new s.DepthMode(De.LEQUAL,s.DepthMode.ReadWrite,oe.depthRangeFor3D);dl.update(Oe);const pt=s.calculateGlobeMercatorMatrix(We),dt=[s.mercatorXfromLng(We.center.lng),s.mercatorYfromLat(We.center.lat)],Ct=Me?[!1,!0]:[!1],Qt=oe.globeSharedBuffers,_t=[We.width*s.exported.devicePixelRatio,We.height*s.exported.devicePixelRatio],Ft=Float32Array.from(We.globeMatrix),At={useDenormalizedUpVectorScale:!0};if(Ct.forEach(Jt=>{const St=oe.transform,jt=qf(St.zoom)*se.exaggeration();ge=-1;const rr=Jt?De.LINES:De.TRIANGLES;for(const Ht of Ie){const sr=me.getTile(Ht),zr=s.StencilMode.disabled,sn=se.prevTerrainTileForTile[Ht.key],Ir=se.terrainTileForTile[Ht.key];Mu(sn,Ir)&&dl.newMorphing(Ht.key,sn,Ir,Oe,250),ze.activeTexture.set(De.TEXTURE0),sr.texture.bind(De.LINEAR,De.CLAMP_TO_EDGE);const Wr=dl.getMorphValuesForProxy(Ht.key),vn=Wr?1:0;Wr&&s.extend$1(At,{morphing:{srcDemTile:Wr.from,dstDemTile:Wr.to,phase:s.easeCubicInOut(Wr.phase)}});const yn=s.tileCornersToBounds(Ht.canonical),Lr=s.getLatitudinalLod(yn.getCenter().lat),Gn=s.getGridMatrix(Ht.canonical,yn,Lr,St.worldSize/St._pixelsPerMercatorPixel),si=s.globeNormalizeECEF(s.globeTileBounds(Ht.canonical)),oi=Xf(St.projMatrix,Ft,pt,si,s.globeToMercatorTransition(St.zoom),dt,St.frustumCorners.TL,St.frustumCorners.TR,St.frustumCorners.BR,St.frustumCorners.BL,St.globeCenterInViewSpace,St.globeRadius,_t,jt,Gn);if(st(vn,Jt),se.setupElevationDraw(sr,Ne,At),oe.prepareDrawProgram(ze,Ne,Ht.toUnwrapped()),Qt){const[ai,oo,js]=Jt?Qt.getWirefameBuffers(oe.context,Lr):Qt.getGridBuffers(Lr,jt!==0);Ne.draw(ze,rr,at,zr,lt,s.CullFaceMode.backCCW,oi,"globe_raster",ai,oo,js)}}}),Qt){const Jt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];qe&&Jt.push("CUSTOM_ANTIALIASING"),Ne=oe.useProgram("globeRaster",null,Jt);for(const St of Ie){const{x:jt,y:rr,z:Ht}=St.canonical,sr=rr===0,zr=rr===(1<<Ht)-1,[sn,Ir,Wr,vn]=Qt.getPoleBuffers(Ht);if(vn&&(sr||zr)){const yn=me.getTile(St);ze.activeTexture.set(De.TEXTURE0),yn.texture.bind(De.LINEAR,De.CLAMP_TO_EDGE);let Lr=s.globePoleMatrixForTile(Ht,jt,We);const Gn=s.globeNormalizeECEF(s.globeTileBounds(St.canonical)),si=(oi,ai)=>oi.draw(ze,De.TRIANGLES,at,s.StencilMode.disabled,lt,s.CullFaceMode.disabled,Xf(We.projMatrix,Lr,Lr,Gn,0,dt,We.frustumCorners.TL,We.frustumCorners.TR,We.frustumCorners.BR,We.frustumCorners.BL,We.globeCenterInViewSpace,We.globeRadius,_t,0),"globe_pole_raster",ai,Wr,vn);se.setupElevationDraw(yn,Ne,At),oe.prepareDrawProgram(ze,Ne,St.toUnwrapped()),sr&&si(Ne,sn),zr&&(Lr=s.scale(s.create(),Lr,[1,-1,1]),si(Ne,Ir))}}}})(P,L,V,G,J);else{const oe=P.context,se=oe.gl;let me,Ie;const Oe=P.options.showTerrainWireframe?2:0,ze=(We,qe)=>{if(Ie===We)return;const st=[Mc[We]];qe&&st.push(Mc[Oe]),me=P.useProgram("terrainRaster",null,st),Ie=We},De=P.colorModeForRenderPass(),Ne=new s.DepthMode(se.LEQUAL,s.DepthMode.ReadWrite,P.depthRangeFor3D);dl.update(J);const ge=P.transform,Me=qf(ge.zoom)*L.exaggeration();(Oe?[!1,!0]:[!1]).forEach(We=>{Ie=-1;const qe=We?se.LINES:se.TRIANGLES,[st,lt]=We?L.getWirefameBuffer():[L.gridIndexBuffer,L.gridSegments];for(const at of G){const pt=V.getTile(at),dt=s.StencilMode.disabled,Ct=L.prevTerrainTileForTile[at.key],Qt=L.terrainTileForTile[at.key];Mu(Ct,Qt)&&dl.newMorphing(at.key,Ct,Qt,J,250),oe.activeTexture.set(se.TEXTURE0),pt.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST);const _t=dl.getMorphValuesForProxy(at.key),Ft=_t?1:0;let At;_t&&(At={morphing:{srcDemTile:_t.from,dstDemTile:_t.to,phase:s.easeCubicInOut(_t.phase)}});const Jt=Ru(at.projMatrix,i0(at.canonical,ge.renderWorldCopies)?Me/10:Me);ze(Ft,We),L.setupElevationDraw(pt,me,At),P.prepareDrawProgram(oe,me,at.toUnwrapped()),me.draw(oe,qe,Ne,dt,De,s.CullFaceMode.backCCW,Jt,"terrain_raster",L.gridBuffer,st,lt)}})}}(g,this,this.proxySourceCache,h,this._updateTimestamp),this.renderingToTexture=!0,g.gpuTimingDeferredRenderEnd(),h.splice(0,h.length))}renderBatch(h){if(this._drapedRenderBatches.length===0)return h+1;this.renderingToTexture=!0;const g=this.painter,C=this.painter.context,P=this.proxySourceCache,L=this.proxiedCoords[P.id],V=this._drapedRenderBatches.shift(),G=[],J=g.style.order;let oe=0;for(const se of L){const me=P.getTileByID(se.proxyTileKey),Ie=P.proxyCachedFBO[se.key]?P.proxyCachedFBO[se.key][h]:void 0,Oe=Ie!==void 0?P.renderCache[Ie]:this.pool[oe++],ze=Ie!==void 0;if(me.texture=Oe.tex,ze&&!Oe.dirty){G.push(me.tileID);continue}let De;C.bindFramebuffer.set(Oe.fb.framebuffer),this.renderedToTile=!1,Oe.dirty&&(C.clear({color:s.Color.transparent,stencil:0}),Oe.dirty=!1);for(let Ne=V.start;Ne<=V.end;++Ne){const ge=g.style._layers[J[Ne]];if(ge.isHidden(g.transform.zoom))continue;const Me=g.style._getLayerSourceCache(ge),We=Me?this.proxyToSource[se.key][Me.id]:[se];if(!We)continue;const qe=We;C.viewport.set([0,0,Oe.fb.width,Oe.fb.height]),De!==(Me?Me.id:null)&&(this._setupStencil(Oe,We,ge,Me),De=Me?Me.id:null),g.renderLayer(g,Me,ge,qe)}this.renderedToTile?(Oe.dirty=!0,G.push(me.tileID)):ze||--oe,oe===5&&(oe=0,this.renderToBackBuffer(G))}return this.renderToBackBuffer(G),this.renderingToTexture=!1,C.bindFramebuffer.set(null),C.viewport.set([0,0,g.width,g.height]),V.end+1}postRender(){}renderCacheEfficiency(h){const g=h.order.length;if(g===0)return{efficiency:100};let C,P=0,L=0,V=!1;for(let G=0;G<g;++G){const J=h._layers[h.order[G]];this._style.isLayerDraped(J)?(V&&++P,++L):V||(V=!0,C=J.id)}return L===0?{efficiency:100}:{efficiency:100*(1-P/L),firstUndrapedLayer:C}}getMinElevationBelowMSL(){let h=0;return this._visibleDemTiles.filter(g=>g.dem).forEach(g=>{h=Math.min(h,g.dem.tree.minimums[0])}),h===0?h:(h-30)*this._exaggeration}raycast(h,g,C){if(!this._visibleDemTiles)return null;const P=this._visibleDemTiles.filter(L=>L.dem).map(L=>{const V=L.tileID,G=1<<V.overscaledZ,{x:J,y:oe}=V.canonical,se=J/G,me=(J+1)/G,Ie=oe/G,Oe=(oe+1)/G;return{minx:se,miny:Ie,maxx:me,maxy:Oe,t:L.dem.tree.raycastRoot(se,Ie,me,Oe,h,g,C),tile:L}});P.sort((L,V)=>(L.t!==null?L.t:Number.MAX_VALUE)-(V.t!==null?V.t:Number.MAX_VALUE));for(const L of P){if(L.t==null)return null;const V=L.tile.dem.tree.raycast(L.minx,L.miny,L.maxx,L.maxy,h,g,C);if(V!=null)return V}return null}_createFBO(){const h=this.painter.context,g=h.gl,C=this.drapeBufferSize;h.activeTexture.set(g.TEXTURE0);const P=new s.Texture(h,{width:C[0],height:C[1],data:null},g.RGBA);P.bind(g.LINEAR,g.CLAMP_TO_EDGE);const L=h.createFramebuffer(C[0],C[1],!1);return L.colorAttachment.set(P.texture),L.depthAttachment=new ct(h,L.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=h.createRenderbuffer(h.gl.DEPTH_STENCIL,C[0],C[1]),this._stencilRef=0,L.depthAttachment.set(this._sharedDepthStencil),h.clear({stencil:0})):L.depthAttachment.set(this._sharedDepthStencil),h.extTextureFilterAnisotropic&&!h.extTextureFilterAnisotropicForceOff&&g.texParameterf(g.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax),{fb:L,tex:P,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const h in this._style._sourceCaches)if(this._style._sourceCaches[h].hasTransition())return!0;return this._style.order.some(h=>{const g=this._style._layers[h],C=g.isHidden(this.painter.transform.zoom);return g.type==="custom"?!C&&g.shouldRedrape():!C&&g.hasTransition()})}_clearLineLayersFromRenderCache(){let h=!1;for(const C of this._style._getSources())if(C instanceof Kt){h=!0;break}if(!h)return;const g={};for(let C=0;C<this._style.order.length;++C){const P=this._style._layers[this._style.order[C]],L=this._style._getLayerSourceCache(P);if(L&&!g[L.id]&&!P.isHidden(this.painter.transform.zoom)&&P.type==="line"&&P.widthExpression()instanceof s.ZoomDependentExpression){g[L.id]=!0;for(const V of this.proxyCoords){const G=this.proxyToSource[V.key][L.id];if(G)for(const J of G)this._clearRenderCacheForTile(L.id,J)}}}}_clearRasterLayersFromRenderCache(){let h=!1;for(const C in this._style._sourceCaches)if(this._style._sourceCaches[C]._source instanceof Gt){h=!0;break}if(!h)return;const g={};for(let C=0;C<this._style.order.length;++C){const P=this._style._layers[this._style.order[C]],L=this._style._getLayerSourceCache(P);if(!L||g[L.id]||P.isHidden(this.painter.transform.zoom)||P.type!=="raster")continue;const V=P.paint.get("raster-fade-duration");for(const G of this.proxyCoords){const J=this.proxyToSource[G.key][L.id];if(J)for(const oe of J){const se=vg(L.getTile(oe),L.findLoadedParent(oe,0),L,this.painter.transform,V);(se.opacity!==1||se.mix!==0)&&this._clearRenderCacheForTile(L.id,oe)}}}}_setupDrapedRenderBatches(){const h=this._style.order,g=h.length;if(g===0)return;const C=[];let P,L=0,V=this._style._layers[h[L]];for(;!this._style.isLayerDraped(V)&&V.isHidden(this.painter.transform.zoom)&&++L<g;)V=this._style._layers[h[L]];for(;L<g;++L){const G=this._style._layers[h[L]];G.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(G)?P===void 0&&(P=L):P!==void 0&&(C.push({start:P,end:L-1}),P=void 0))}P!==void 0&&C.push({start:P,end:L-1}),this._drapedRenderBatches=C}_setupRenderCache(h){const g=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,g.renderCache.length>g.renderCachePool.length){const V=Object.values(g.proxyCachedFBO);g.proxyCachedFBO={};for(let G=0;G<V.length;++G){const J=Object.values(V[G]);g.renderCachePool.push(...J)}}return}this._clearRasterLayersFromRenderCache();const C=this.proxyCoords,P=this._tilesDirty;for(let V=C.length-1;V>=0;V--){const G=C[V];if(g.getTileByID(G.key),g.proxyCachedFBO[G.key]!==void 0){const J=h[G.key],oe=this.proxyToSource[G.key];let se=0;for(const me in oe){const Ie=oe[me],Oe=J[me];if(!Oe||Oe.length!==Ie.length||Ie.some((ze,De)=>ze!==Oe[De]||P[me]&&P[me].hasOwnProperty(ze.key))){se=-1;break}++se}for(const me in g.proxyCachedFBO[G.key])g.renderCache[g.proxyCachedFBO[G.key][me]].dirty=se<0||se!==Object.values(J).length}}const L=[...this._drapedRenderBatches];L.sort((V,G)=>G.end-G.start-(V.end-V.start));for(const V of L)for(const G of C){if(g.proxyCachedFBO[G.key])continue;let J=g.renderCachePool.pop();J===void 0&&g.renderCache.length<50&&(J=g.renderCache.length,g.renderCache.push(this._createFBO())),J!==void 0&&(g.proxyCachedFBO[G.key]={},g.proxyCachedFBO[G.key][V.start]=J,g.renderCache[J].dirty=!0)}this._tilesDirty={}}_setupStencil(h,g,C,P){if(!P||!this._sourceTilesOverlap[P.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const L=this.painter.context,V=L.gl;if(g.length<=1)return void(this._overlapStencilType=!1);let G;if(C.isTileClipped())G=g.length,this._overlapStencilMode.test={func:V.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(g[0].overscaledZ>g[g.length-1].overscaledZ))return void(this._overlapStencilType=!1);G=1,this._overlapStencilMode.test={func:V.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+G>255&&(L.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=G,this._overlapStencilMode.ref=this._stencilRef,C.isTileClipped()&&this._renderTileClippingMasks(g,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(h){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[h.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(h,g){const C=this.painter,P=this.painter.context,L=P.gl;C._tileClippingMaskIDs={},P.setColorMode(s.ColorMode.disabled),P.setDepthMode(s.DepthMode.disabled);const V=C.useProgram("clippingMask");for(const G of h){const J=C._tileClippingMaskIDs[G.key]=--g;V.draw(P,L.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:L.ALWAYS,mask:0},J,255,L.KEEP,L.KEEP,L.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,hd(G.projMatrix),"$clipping",C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}}pointCoordinate(h){const g=this.painter.transform;if(h.x<0||h.x>g.width||h.y<0||h.y>g.height)return null;const C=[h.x,h.y,1,1];s.transformMat4$1(C,C,g.pixelMatrixInverse),s.scale$1(C,C,1/C[3]),C[0]/=g.worldSize,C[1]/=g.worldSize;const P=g._camera.position,L=s.mercatorZfromAltitude(1,g.center.lat),V=[P[0],P[1],P[2]/L,0],G=s.subtract([],C.slice(0,3),V);s.normalize(G,G);const J=this.raycast(V,G,this._exaggeration);return J!==null&&J?(s.scaleAndAdd(V,V,G,J),V[3]=V[2],V[2]*=L,V):null}drawDepth(){const h=this.painter,g=h.context,C=this.proxySourceCache,P=Math.ceil(h.width),L=Math.ceil(h.height);if(!this._depthFBO||this._depthFBO.width===P&&this._depthFBO.height===L||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const V=g.gl,G=g.createFramebuffer(P,L,!0);g.activeTexture.set(V.TEXTURE0);const J=new s.Texture(g,{width:P,height:L,data:null},V.RGBA);J.bind(V.NEAREST,V.CLAMP_TO_EDGE),G.colorAttachment.set(J.texture);const oe=g.createRenderbuffer(g.gl.DEPTH_COMPONENT16,P,L);G.depthAttachment.set(oe),this._depthFBO=G,this._depthTexture=J}g.bindFramebuffer.set(this._depthFBO.framebuffer),g.viewport.set([0,0,P,L]),function(V,G,J,oe){if(V.transform.projection.name==="globe")return;const se=V.context,me=se.gl;se.clear({depth:1});const Ie=V.useProgram("terrainDepth"),Oe=new s.DepthMode(me.LESS,s.DepthMode.ReadWrite,V.depthRangeFor3D);for(const ze of oe){const De=J.getTile(ze),Ne=Ru(ze.projMatrix,0);G.setupElevationDraw(De,Ie),Ie.draw(se,me.TRIANGLES,Oe,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Ne,"terrain_depth",G.gridBuffer,G.gridIndexBuffer,G.gridNoSkirtSegments)}}(h,this,C,this.proxyCoords)}_setupProxiedCoordsForOrtho(h,g,C){if(h.getSource()instanceof Qr)return this._setupProxiedCoordsForImageSource(h,g,C);this._findCoveringTileCache[h.id]=this._findCoveringTileCache[h.id]||{};const P=this.proxiedCoords[h.id]=[],L=this.proxyCoords;for(let G=0;G<L.length;G++){const J=L[G],oe=this._findTileCoveringTileID(J,h);if(oe){const se=this._createProxiedId(J,oe,C[J.key]&&C[J.key][h.id]);P.push(se),this.proxyToSource[J.key][h.id]=[se]}}let V=!1;for(let G=0;G<g.length;G++){const J=h.getTile(g[G]);if(!J||!J.hasData())continue;const oe=this._findTileCoveringTileID(J.tileID,this.proxySourceCache);if(oe&&oe.tileID.canonical.z!==J.tileID.canonical.z){const se=this.proxyToSource[oe.tileID.key][h.id],me=this._createProxiedId(oe.tileID,J,C[oe.tileID.key]&&C[oe.tileID.key][h.id]);se?se.splice(se.length-1,0,me):this.proxyToSource[oe.tileID.key][h.id]=[me],P.push(me),V=!0}}this._sourceTilesOverlap[h.id]=V}_setupProxiedCoordsForImageSource(h,g,C){if(!h.getSource().loaded())return;const P=this.proxiedCoords[h.id]=[],L=this.proxyCoords,V=h.getSource(),G=new s.Point(V.tileID.x,V.tileID.y)._div(1<<V.tileID.z),J=V.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((se,me)=>(se.min.x=Math.min(se.min.x,me.x-G.x),se.min.y=Math.min(se.min.y,me.y-G.y),se.max.x=Math.max(se.max.x,me.x-G.x),se.max.y=Math.max(se.max.y,me.y-G.y),se),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),oe=(se,me)=>{const Ie=se.wrap+se.canonical.x/(1<<se.canonical.z),Oe=se.canonical.y/(1<<se.canonical.z),ze=s.EXTENT/(1<<se.canonical.z),De=me.wrap+me.canonical.x/(1<<me.canonical.z),Ne=me.canonical.y/(1<<me.canonical.z);return Ie+ze<De+J.min.x||Ie>De+J.max.x||Oe+ze<Ne+J.min.y||Oe>Ne+J.max.y};for(let se=0;se<L.length;se++){const me=L[se];for(let Ie=0;Ie<g.length;Ie++){const Oe=h.getTile(g[Ie]);if(!Oe||!Oe.hasData()||oe(me,Oe.tileID))continue;const ze=this._createProxiedId(me,Oe,C[me.key]&&C[me.key][h.id]),De=this.proxyToSource[me.key][h.id];De?De.push(ze):this.proxyToSource[me.key][h.id]=[ze],P.push(ze)}}}_createProxiedId(h,g,C){let P=this.orthoMatrix;if(C){const L=C.find(V=>V.key===g.tileID.key);if(L)return L}if(g.tileID.key!==h.key){const L=h.canonical.z-g.tileID.canonical.z;let V,G,J;P=s.create();const oe=g.tileID.wrap-h.wrap<<h.overscaledZ;L>0?(V=s.EXTENT>>L,G=V*((g.tileID.canonical.x<<L)-h.canonical.x+oe),J=V*((g.tileID.canonical.y<<L)-h.canonical.y)):(V=s.EXTENT<<-L,G=s.EXTENT*(g.tileID.canonical.x-(h.canonical.x+oe<<-L)),J=s.EXTENT*(g.tileID.canonical.y-(h.canonical.y<<-L))),s.ortho(P,0,V,0,V,0,1),s.translate(P,P,[G,J,0])}return new Zf(g.tileID,h.key,P)}_findTileCoveringTileID(h,g){let C=g.getTile(h);if(C&&C.hasData())return C;const P=this._findCoveringTileCache[g.id],L=P[h.key];if(C=L?g.getTileByID(L):null,C&&C.hasData()||L===null)return C;let V=C?C.tileID:h,G=V.overscaledZ;const J=g.getSource().minzoom,oe=[];if(!L){const me=g.getSource().maxzoom;if(h.canonical.z>=me){const Ie=h.canonical.z-me;g.getSource().reparseOverscaled?(G=Math.max(h.canonical.z+2,g.transform.tileZoom),V=new s.OverscaledTileID(G,h.wrap,me,h.canonical.x>>Ie,h.canonical.y>>Ie)):Ie!==0&&(G=me,V=new s.OverscaledTileID(G,h.wrap,me,h.canonical.x>>Ie,h.canonical.y>>Ie))}V.key!==h.key&&(oe.push(V.key),C=g.getTile(V))}const se=me=>{oe.forEach(Ie=>{P[Ie]=me}),oe.length=0};for(G-=1;G>=J&&(!C||!C.hasData());G--){C&&se(C.tileID.key);const me=V.calculateScaledKey(G);if(C=g.getTileByID(me),C&&C.hasData())break;const Ie=P[me];if(Ie===null)break;Ie===void 0?oe.push(me):C=g.getTileByID(Ie)}return se(C?C.tileID.key:null),C&&C.hasData()?C:null}findDEMTileFor(h){return this.enabled?this._findTileCoveringTileID(h,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(h,g){let C=this._tilesDirty[h];C||(C=this._tilesDirty[h]={}),C[g.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const h=function(g){let C=0;const P=new s.StructArrayLayout2ui4,L=131;for(let V=1;V<129;V++){for(let G=1;G<129;G++)C=V*L+G,P.emplaceBack(C,C+1),P.emplaceBack(C,C+L),P.emplaceBack(C+1,C+L),V===128&&P.emplaceBack(C+L,C+L+1);P.emplaceBack(C+1,C+1+L)}return P}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(h),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,h.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ln{static cacheKey(h,g,C,P){let L=`${g}${P?P.cacheKey:""}`;for(const V of C)h.usedDefines.includes(V)&&(L+=`/${V}`);return L}constructor(h,g,C,P,L,V){const G=h.gl;this.program=G.createProgram();const J=function(ge){const Me=[];for(let We=0;We<ge.length;We++){if(ge[We]===null)continue;const qe=ge[We].split(" ");Me.push(qe.pop())}return Me}(C.staticAttributes),oe=P?P.getBinderAttributes():[],se=J.concat(oe);let me=P?P.defines():[];me=me.concat(V.map(ge=>`#define ${ge}`));const Ie=h.isWebGL2?`#version 300 es
`:"",Oe=Ie+me.concat(h.extStandardDerivatives&&Ie.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(ta):ta,ta,Ks,yo.fragmentSource,os.fragmentSource,C.fragmentSource).join(`
`),ze=Ie+me.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Ks,yo.vertexSource,os.vertexSource,ss.vertexSource,C.vertexSource).join(`
`),De=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);G.shaderSource(De,Oe),G.compileShader(De),G.attachShader(this.program,De);const Ne=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())this.failedToCreate=!0;else{G.shaderSource(Ne,ze),G.compileShader(Ne),G.attachShader(this.program,Ne),this.attributes={},this.numAttributes=se.length;for(let ge=0;ge<this.numAttributes;ge++)se[ge]&&(G.bindAttribLocation(this.program,ge,se[ge]),this.attributes[se[ge]]=ge);G.linkProgram(this.program),G.deleteShader(Ne),G.deleteShader(De),this.fixedUniforms=L(h),this.binderUniforms=P?P.getUniforms(h):[],V.includes("TERRAIN")&&(this.terrainUniforms=(ge=>({u_dem:new s.Uniform1i(ge),u_dem_prev:new s.Uniform1i(ge),u_dem_unpack:new s.Uniform4f(ge),u_dem_tl:new s.Uniform2f(ge),u_dem_scale:new s.Uniform1f(ge),u_dem_tl_prev:new s.Uniform2f(ge),u_dem_scale_prev:new s.Uniform1f(ge),u_dem_size:new s.Uniform1f(ge),u_dem_lerp:new s.Uniform1f(ge),u_exaggeration:new s.Uniform1f(ge),u_depth:new s.Uniform1i(ge),u_depth_size_inv:new s.Uniform2f(ge),u_meter_to_dem:new s.Uniform1f(ge),u_label_plane_matrix_inv:new s.UniformMatrix4f(ge)}))(h)),V.includes("GLOBE")&&(this.globeUniforms=(ge=>({u_tile_tl_up:new s.Uniform3f(ge),u_tile_tr_up:new s.Uniform3f(ge),u_tile_br_up:new s.Uniform3f(ge),u_tile_bl_up:new s.Uniform3f(ge),u_tile_up_scale:new s.Uniform1f(ge)}))(h)),V.includes("FOG")&&(this.fogUniforms=(ge=>({u_fog_matrix:new s.UniformMatrix4f(ge),u_fog_range:new s.Uniform2f(ge),u_fog_color:new s.Uniform4f(ge),u_fog_horizon_blend:new s.Uniform1f(ge),u_fog_temporal_offset:new s.Uniform1f(ge),u_frustum_tl:new s.Uniform3f(ge),u_frustum_tr:new s.Uniform3f(ge),u_frustum_br:new s.Uniform3f(ge),u_frustum_bl:new s.Uniform3f(ge),u_globe_pos:new s.Uniform3f(ge),u_globe_radius:new s.Uniform1f(ge),u_globe_transition:new s.Uniform1f(ge),u_is_globe:new s.Uniform1i(ge),u_viewport:new s.Uniform2f(ge)}))(h))}}setTerrainUniformValues(h,g){if(!this.terrainUniforms)return;const C=this.terrainUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const P in g)C[P]&&C[P].set(this.program,P,g[P])}}setGlobeUniformValues(h,g){if(!this.globeUniforms)return;const C=this.globeUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const P in g)C[P]&&C[P].set(this.program,P,g[P])}}setFogUniformValues(h,g){if(!this.fogUniforms)return;const C=this.fogUniforms;if(!this.failedToCreate){h.program.set(this.program);for(const P in g)C[P].set(this.program,P,g[P])}}draw(h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De){const Ne=h.gl;if(this.failedToCreate)return;h.program.set(this.program),h.setDepthMode(C),h.setStencilMode(P),h.setColorMode(L),h.setCullFace(V);for(const Me of Object.keys(this.fixedUniforms))this.fixedUniforms[Me].set(this.program,Me,G[Me]);ze&&ze.setUniforms(this.program,h,this.binderUniforms,Ie,{zoom:Oe});const ge={[Ne.LINES]:2,[Ne.TRIANGLES]:3,[Ne.LINE_STRIP]:1}[g];for(const Me of me.get()){const We=Me.vaos||(Me.vaos={});(We[J]||(We[J]=new Pu)).bind(h,this,oe,ze?ze.getPaintVertexBuffers():[],se,Me.vertexOffset,De||[]),Ne.drawElements(g,Me.primitiveLength*ge,Ne.UNSIGNED_SHORT,Me.primitiveOffset*ge*2)}}}function dd(_,h){const g=Math.pow(2,h.tileID.overscaledZ),C=h.tileSize*Math.pow(2,_.transform.tileZoom)/g,P=C*(h.tileID.canonical.x+h.tileID.wrap*g),L=C*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_tile_units_to_pixels:1/Ot(h,1,_.transform.tileZoom),u_pixel_coord_upper:[P>>16,L>>16],u_pixel_coord_lower:[65535&P,65535&L]}}const s0=s.create(),wg=(_,h,g,C,P,L,V,G,J,oe,se)=>{const me=h.style.light,Ie=me.properties.get("position"),Oe=[Ie.x,Ie.y,Ie.z],ze=s.create$1();me.properties.get("anchor")==="viewport"&&(s.fromRotation(ze,-h.transform.angle),s.transformMat3(Oe,Oe,ze));const De=me.properties.get("color"),Ne=h.transform,ge={u_matrix:_,u_lightpos:Oe,u_lightintensity:me.properties.get("intensity"),u_lightcolor:[De.r,De.g,De.b],u_vertical_gradient:+g,u_opacity:C,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:s0,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:P,u_edge_radius:L};return Ne.projection.name==="globe"&&(ge.u_tile_id=[V.canonical.x,V.canonical.y,1<<V.canonical.z],ge.u_zoom_transition=J,ge.u_inv_rot_matrix=se,ge.u_merc_center=oe,ge.u_up_dir=Ne.projection.upVector(new s.CanonicalTileID(0,0,0),oe[0]*s.EXTENT,oe[1]*s.EXTENT),ge.u_height_lift=G),ge},o0=(_,h,g,C,P,L,V,G,J,oe,se,me)=>{const Ie=wg(_,h,g,C,P,L,V,J,oe,se,me),Oe={u_height_factor:-Math.pow(2,V.overscaledZ)/G.tileSize/8};return s.extend(Ie,dd(h,G),Oe)},Lc=_=>({u_matrix:_}),Sg=(_,h,g)=>s.extend(Lc(_),dd(h,g)),i2=(_,h)=>({u_matrix:_,u_world:h}),s2=(_,h,g,C)=>s.extend(Sg(_,h,g),{u_world:C}),o2=s.create(),Cg=(_,h,g,C,P,L)=>{const V=_.transform,G=V.projection.name==="globe";let J;if(L.paint.get("circle-pitch-alignment")==="map")if(G){const se=s.globePixelsToTileUnits(V.zoom,h.canonical)*V._pixelsPerMercatorPixel;J=Float32Array.from([se,0,0,se])}else J=V.calculatePixelsToTileUnitsMatrix(g);else J=new Float32Array([V.pixelsToGLUnits[0],0,0,V.pixelsToGLUnits[1]]);const oe={u_camera_to_center_distance:V.cameraToCenterDistance,u_matrix:_.translatePosMatrix(h.projMatrix,g,L.paint.get("circle-translate"),L.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:J,u_inv_rot_matrix:o2,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(G){oe.u_inv_rot_matrix=C,oe.u_merc_center=P,oe.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],oe.u_zoom_transition=s.globeToMercatorTransition(V.zoom);const se=P[0]*s.EXTENT,me=P[1]*s.EXTENT;oe.u_up_dir=V.projection.upVector(new s.CanonicalTileID(0,0,0),se,me)}return oe},kg=_=>{const h=[];return _.paint.get("circle-pitch-alignment")==="map"&&h.push("PITCH_WITH_MAP"),_.paint.get("circle-pitch-scale")==="map"&&h.push("SCALE_WITH_MAP"),h},Eg=(_,h,g,C)=>{const P=s.EXTENT/g.tileSize;return{u_matrix:_,u_camera_to_center_distance:h.getCameraToCenterDistance(C),u_extrude_scale:[h.pixelsToGLUnits[0]/P,h.pixelsToGLUnits[1]/P]}},Kf=(_,h,g=1)=>({u_matrix:_,u_color:h,u_overlay:0,u_overlay_scale:g}),a0=s.create(),l0=(_,h,g,C,P,L,V)=>{const G=_.transform,J=G.projection.name==="globe",oe=J?s.globePixelsToTileUnits(G.zoom,h.canonical)*G._pixelsPerMercatorPixel:Ot(g,1,L),se={u_matrix:h.projMatrix,u_extrude_scale:oe,u_intensity:V,u_inv_rot_matrix:a0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(J){se.u_inv_rot_matrix=C,se.u_merc_center=P,se.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],se.u_zoom_transition=s.globeToMercatorTransition(G.zoom);const me=P[0]*s.EXTENT,Ie=P[1]*s.EXTENT;se.u_up_dir=G.projection.upVector(new s.CanonicalTileID(0,0,0),me,Ie)}return se},a2=(_,h,g,C,P,L,V)=>{const G=_.transform,J=G.calculatePixelsToTileUnitsMatrix(h);return{u_matrix:Tg(_,h,g,C),u_pixels_to_tile_units:J,u_device_pixel_ratio:L,u_units_to_pixels:[1/G.pixelsToGLUnits[0],1/G.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:P,u_texsize:pd(g)?h.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Lu(h,_.transform),u_alpha_discard_threshold:0,u_trim_offset:V}},fd=(_,h,g,C,P)=>{const L=_.transform;return{u_matrix:Tg(_,h,g,C),u_texsize:h.imageAtlasTexture.size,u_pixels_to_tile_units:L.calculatePixelsToTileUnitsMatrix(h),u_device_pixel_ratio:P,u_image:0,u_tile_units_to_pixels:Lu(h,L),u_units_to_pixels:[1/L.pixelsToGLUnits[0],1/L.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Lu(_,h){return 1/Ot(_,1,h.tileZoom)}function Tg(_,h,g,C){return _.translatePosMatrix(C||h.tileID.projMatrix,h,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}function pd(_){const h=_.paint.get("line-dasharray").value;return h.value||h.kind!=="constant"}const Ag=(_,h,g,C,P,L)=>{return{u_matrix:_,u_tl_parent:h,u_scale_parent:g,u_fade_t:C.mix,u_opacity:C.opacity*P.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:P.paint.get("raster-brightness-min"),u_brightness_high:P.paint.get("raster-brightness-max"),u_saturation_factor:(G=P.paint.get("raster-saturation"),G>0?1-1/(1.001-G):-G),u_contrast_factor:(V=P.paint.get("raster-contrast"),V>0?1/(1-V):1+V),u_spin_weights:Ha(P.paint.get("raster-hue-rotate")),u_perspective_transform:L};var V,G};function Ha(_){_*=Math.PI/180;const h=Math.sin(_),g=Math.cos(_);return[(2*g+1)/3,(-Math.sqrt(3)*h-g+1)/3,(Math.sqrt(3)*h-g+1)/3]}const Jf=s.create(),Ig=(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De)=>{const Ne=P.transform,ge={u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:h?h.uSizeT:0,u_size:h?h.uSize:0,u_camera_to_center_distance:Ne.cameraToCenterDistance,u_rotate_symbol:+g,u_aspect_ratio:Ne.width/Ne.height,u_fade_change:P.options.fadeDuration?P.symbolFadeChange:1,u_matrix:L,u_label_plane_matrix:V,u_coord_matrix:G,u_is_text:+J,u_pitch_with_map:+C,u_texsize:oe,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jf,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Jf,u_up_vector:[0,-1,0]};return De.name==="globe"&&(ge.u_tile_id=[se.canonical.x,se.canonical.y,1<<se.canonical.z],ge.u_zoom_transition=me,ge.u_inv_rot_matrix=Oe,ge.u_merc_center=Ie,ge.u_camera_forward=Ne._camera.forward(),ge.u_ecef_origin=s.globeECEFOrigin(Ne.globeMatrix,se.toUnwrapped()),ge.u_tile_matrix=Float32Array.from(Ne.globeMatrix),ge.u_up_vector=ze),ge},Qf=(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De,Ne)=>s.extend(Ig(_,h,g,C,P,L,V,G,J,oe,me,Ie,Oe,ze,De,Ne),{u_gamma_scale:C?P.transform.cameraToCenterDistance*Math.cos(P.terrain?0:P.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+se}),c0=(_,h,g,C,P,L,V,G,J,oe,se,me,Ie,Oe,ze,De)=>s.extend(Qf(_,h,g,C,P,L,V,G,!0,J,!0,se,me,Ie,Oe,ze,De),{u_texsize_icon:oe,u_texture_icon:1}),Pg=(_,h,g)=>({u_matrix:_,u_opacity:h,u_color:g}),l2=(_,h,g,C,P)=>s.extend(function(L,V,G){const J=V.imageManager.getPattern(L.toString()),{width:oe,height:se}=V.imageManager.getPixelSize(),me=Math.pow(2,G.tileID.overscaledZ),Ie=G.tileSize*Math.pow(2,V.transform.tileZoom)/me,Oe=Ie*(G.tileID.canonical.x+G.tileID.wrap*me),ze=Ie*G.tileID.canonical.y;return{u_image:0,u_pattern_tl:J.tl,u_pattern_br:J.br,u_texsize:[oe,se],u_pattern_size:J.displaySize,u_tile_units_to_pixels:1/Ot(G,1,V.transform.tileZoom),u_pixel_coord_upper:[Oe>>16,ze>>16],u_pixel_coord_lower:[65535&Oe,65535&ze]}}(C,g,P),{u_matrix:_,u_opacity:h}),Rg={fillExtrusion:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_)}),fillExtrusionPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_lightpos:new s.Uniform3f(_),u_lightintensity:new s.Uniform1f(_),u_lightcolor:new s.Uniform3f(_),u_vertical_gradient:new s.Uniform1f(_),u_height_factor:new s.Uniform1f(_),u_edge_radius:new s.Uniform1f(_),u_ao:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_up_dir:new s.Uniform3f(_),u_height_lift:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_)}),fill:_=>({u_matrix:new s.UniformMatrix4f(_)}),fillPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),fillOutline:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_)}),fillOutlinePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_world:new s.Uniform2f(_),u_image:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),circle:_=>({u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),collisionBox:_=>({u_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_extrude_scale:new s.Uniform2f(_)}),collisionCircle:_=>({u_matrix:new s.UniformMatrix4f(_),u_inv_matrix:new s.UniformMatrix4f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_viewport_size:new s.Uniform2f(_)}),debug:_=>({u_color:new s.UniformColor(_),u_matrix:new s.UniformMatrix4f(_),u_overlay:new s.Uniform1i(_),u_overlay_scale:new s.Uniform1f(_)}),clippingMask:_=>({u_matrix:new s.UniformMatrix4f(_)}),heatmap:_=>({u_extrude_scale:new s.Uniform1f(_),u_intensity:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_up_dir:new s.Uniform3f(_)}),heatmapTexture:_=>({u_image:new s.Uniform1i(_),u_color_ramp:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_)}),hillshade:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_latrange:new s.Uniform2f(_),u_light:new s.Uniform2f(_),u_shadow:new s.UniformColor(_),u_highlight:new s.UniformColor(_),u_accent:new s.UniformColor(_)}),hillshadePrepare:_=>({u_matrix:new s.UniformMatrix4f(_),u_image:new s.Uniform1i(_),u_dimension:new s.Uniform2f(_),u_zoom:new s.Uniform1f(_),u_unpack:new s.Uniform4f(_)}),line:_=>({u_matrix:new s.UniformMatrix4f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_units_to_pixels:new s.Uniform2f(_),u_dash_image:new s.Uniform1i(_),u_gradient_image:new s.Uniform1i(_),u_image_height:new s.Uniform1f(_),u_texsize:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_),u_trim_offset:new s.Uniform2f(_)}),linePattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_texsize:new s.Uniform2f(_),u_pixels_to_tile_units:new s.UniformMatrix2f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_units_to_pixels:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_),u_alpha_discard_threshold:new s.Uniform1f(_)}),raster:_=>({u_matrix:new s.UniformMatrix4f(_),u_tl_parent:new s.Uniform2f(_),u_scale_parent:new s.Uniform1f(_),u_fade_t:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_image0:new s.Uniform1i(_),u_image1:new s.Uniform1i(_),u_brightness_low:new s.Uniform1f(_),u_brightness_high:new s.Uniform1f(_),u_saturation_factor:new s.Uniform1f(_),u_contrast_factor:new s.Uniform1f(_),u_spin_weights:new s.Uniform3f(_),u_perspective_transform:new s.Uniform2f(_)}),symbolIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_texture:new s.Uniform1i(_)}),symbolSDF:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_tile_id:new s.Uniform3f(_),u_zoom_transition:new s.Uniform1f(_),u_inv_rot_matrix:new s.UniformMatrix4f(_),u_merc_center:new s.Uniform2f(_),u_camera_forward:new s.Uniform3f(_),u_tile_matrix:new s.UniformMatrix4f(_),u_up_vector:new s.Uniform3f(_),u_ecef_origin:new s.Uniform3f(_),u_is_halo:new s.Uniform1i(_)}),symbolTextAndIcon:_=>({u_is_size_zoom_constant:new s.Uniform1i(_),u_is_size_feature_constant:new s.Uniform1i(_),u_size_t:new s.Uniform1f(_),u_size:new s.Uniform1f(_),u_camera_to_center_distance:new s.Uniform1f(_),u_rotate_symbol:new s.Uniform1i(_),u_aspect_ratio:new s.Uniform1f(_),u_fade_change:new s.Uniform1f(_),u_matrix:new s.UniformMatrix4f(_),u_label_plane_matrix:new s.UniformMatrix4f(_),u_coord_matrix:new s.UniformMatrix4f(_),u_is_text:new s.Uniform1i(_),u_pitch_with_map:new s.Uniform1i(_),u_texsize:new s.Uniform2f(_),u_texsize_icon:new s.Uniform2f(_),u_texture:new s.Uniform1i(_),u_texture_icon:new s.Uniform1i(_),u_gamma_scale:new s.Uniform1f(_),u_device_pixel_ratio:new s.Uniform1f(_),u_is_halo:new s.Uniform1i(_)}),background:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_color:new s.UniformColor(_)}),backgroundPattern:_=>({u_matrix:new s.UniformMatrix4f(_),u_opacity:new s.Uniform1f(_),u_image:new s.Uniform1i(_),u_pattern_tl:new s.Uniform2f(_),u_pattern_br:new s.Uniform2f(_),u_texsize:new s.Uniform2f(_),u_pattern_size:new s.Uniform2f(_),u_pixel_coord_upper:new s.Uniform2f(_),u_pixel_coord_lower:new s.Uniform2f(_),u_tile_units_to_pixels:new s.Uniform1f(_)}),terrainRaster:xg,terrainDepth:xg,skybox:_=>({u_matrix:new s.UniformMatrix4f(_),u_sun_direction:new s.Uniform3f(_),u_cubemap:new s.Uniform1i(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxGradient:_=>({u_matrix:new s.UniformMatrix4f(_),u_color_ramp:new s.Uniform1i(_),u_center_direction:new s.Uniform3f(_),u_radius:new s.Uniform1f(_),u_opacity:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_)}),skyboxCapture:_=>({u_matrix_3f:new s.UniformMatrix3f(_),u_sun_direction:new s.Uniform3f(_),u_sun_intensity:new s.Uniform1f(_),u_color_tint_r:new s.Uniform4f(_),u_color_tint_m:new s.Uniform4f(_),u_luminance:new s.Uniform1f(_)}),globeRaster:_=>({u_proj_matrix:new s.UniformMatrix4f(_),u_globe_matrix:new s.UniformMatrix4f(_),u_normalize_matrix:new s.UniformMatrix4f(_),u_merc_matrix:new s.UniformMatrix4f(_),u_zoom_transition:new s.Uniform1f(_),u_merc_center:new s.Uniform2f(_),u_image0:new s.Uniform1i(_),u_grid_matrix:new s.UniformMatrix3f(_),u_skirt_height:new s.Uniform1f(_),u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_globe_pos:new s.Uniform3f(_),u_globe_radius:new s.Uniform1f(_),u_viewport:new s.Uniform2f(_)}),globeAtmosphere:_=>({u_frustum_tl:new s.Uniform3f(_),u_frustum_tr:new s.Uniform3f(_),u_frustum_br:new s.Uniform3f(_),u_frustum_bl:new s.Uniform3f(_),u_horizon:new s.Uniform1f(_),u_transition:new s.Uniform1f(_),u_fadeout_range:new s.Uniform1f(_),u_color:new s.Uniform4f(_),u_high_color:new s.Uniform4f(_),u_space_color:new s.Uniform4f(_),u_star_intensity:new s.Uniform1f(_),u_star_density:new s.Uniform1f(_),u_star_size:new s.Uniform1f(_),u_temporal_offset:new s.Uniform1f(_),u_horizon_angle:new s.Uniform1f(_),u_rotation_matrix:new s.UniformMatrix4f(_)})};let ep;function md(_,h,g,C,P,L,V){const G=_.context,J=G.gl,oe=_.transform,se=_.useProgram("collisionBox"),me=[];let Ie=0,Oe=0;for(let qe=0;qe<C.length;qe++){const st=C[qe],lt=h.getTile(st),at=lt.getBucket(g);if(!at)continue;const pt=hr(st,at,oe);let dt=pt;P[0]===0&&P[1]===0||(dt=_.translatePosMatrix(pt,lt,P,L));const Ct=V?at.textCollisionBox:at.iconCollisionBox,Qt=at.collisionCircleArray;if(Qt.length>0){const _t=s.create(),Ft=dt;s.mul(_t,at.placementInvProjMatrix,oe.glCoordMatrix),s.mul(_t,_t,at.placementViewportMatrix),me.push({circleArray:Qt,circleOffset:Oe,transform:Ft,invTransform:_t,projection:at.getProjection()}),Ie+=Qt.length/4,Oe=Ie}Ct&&(_.terrain&&_.terrain.setupElevationDraw(lt,se),se.draw(G,J.LINES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,Eg(dt,oe,lt,at.getProjection()),g.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,null,oe.zoom,null,[Ct.collisionVertexBuffer,Ct.collisionVertexBufferExt]))}if(!V||!me.length)return;const ze=_.useProgram("collisionCircle"),De=new s.StructArrayLayout2f1f2i16;De.resize(4*Ie),De._trim();let Ne=0;for(const qe of me)for(let st=0;st<qe.circleArray.length/4;st++){const lt=4*st,at=qe.circleArray[lt+0],pt=qe.circleArray[lt+1],dt=qe.circleArray[lt+2],Ct=qe.circleArray[lt+3];De.emplace(Ne++,at,pt,dt,Ct,0),De.emplace(Ne++,at,pt,dt,Ct,1),De.emplace(Ne++,at,pt,dt,Ct,2),De.emplace(Ne++,at,pt,dt,Ct,3)}(!ep||ep.length<2*Ie)&&(ep=function(qe){const st=2*qe,lt=new s.StructArrayLayout3ui6;lt.resize(st),lt._trim();for(let at=0;at<st;at++){const pt=6*at;lt.uint16[pt+0]=4*at+0,lt.uint16[pt+1]=4*at+1,lt.uint16[pt+2]=4*at+2,lt.uint16[pt+3]=4*at+2,lt.uint16[pt+4]=4*at+3,lt.uint16[pt+5]=4*at+0}return lt}(Ie));const ge=G.createIndexBuffer(ep,!0),Me=G.createVertexBuffer(De,s.collisionCircleLayout.members,!0);for(const qe of me){const st={u_matrix:qe.transform,u_inv_matrix:qe.invTransform,u_camera_to_center_distance:(We=oe).getCameraToCenterDistance(qe.projection),u_viewport_size:[We.width,We.height]};ze.draw(G,J.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,st,g.id,Me,ge,s.SegmentVector.simpleSegment(0,2*qe.circleOffset,qe.circleArray.length,qe.circleArray.length/2),null,oe.zoom)}var We;Me.destroy(),ge.destroy()}const u0=s.create();function Mg({width:_,height:h,anchor:g,textOffset:C,textScale:P},L){const{horizontalAlign:V,verticalAlign:G}=s.getAnchorAlignment(g),J=-(V-.5)*_,oe=-(G-.5)*h,se=s.evaluateVariableOffset(g,C);return new s.Point((J/P+se[0])*L,(oe/P+se[1])*L)}function c2(_,h,g,C,P,L,V,G,J,oe,se){const me=_.text.placedSymbolArray,Ie=_.text.dynamicLayoutVertexArray,Oe=_.icon.dynamicLayoutVertexArray,ze={},De=_.getProjection(),Ne=ar(G,De,L),ge=L.elevation,Me=De.upVectorScale(G.canonical,L.center.lat,L.worldSize).metersToTile;Ie.clear();for(let We=0;We<me.length;We++){const qe=me.get(We),{tileAnchorX:st,tileAnchorY:lt,numGlyphs:at}=qe,pt=qe.hidden||!qe.crossTileID||_.allowVerticalPlacement&&!qe.placedOrientation?null:C[qe.crossTileID];if(pt){let dt=0,Ct=0,Qt=0;if(ge){const sr=ge?ge.getAtTileOffset(G,st,lt):0,[zr,sn,Ir]=De.upVector(G.canonical,st,lt);dt=sr*zr*Me,Ct=sr*sn*Me,Qt=sr*Ir*Me}let[_t,Ft,At,Jt]=ce(qe.projectedAnchorX+dt,qe.projectedAnchorY+Ct,qe.projectedAnchorZ+Qt,g?Ne:V);const St=ye(L.getCameraToCenterDistance(De),Jt);let jt=P.evaluateSizeForFeature(_.textSizeData,oe,qe)*St/s.ONE_EM;g&&(jt*=_.tilePixelRatio/J);const rr=Mg(pt,jt);g?({x:_t,y:Ft,z:At}=De.projectTilePoint(st+rr.x,lt+rr.y,G.canonical),[_t,Ft,At]=ce(_t+dt,Ft+Ct,At+Qt,V)):(h&&rr._rotate(-L.angle),_t+=rr.x,Ft+=rr.y,At=0);const Ht=_.allowVerticalPlacement&&qe.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let sr=0;sr<at;sr++)s.addDynamicAttributes(Ie,_t,Ft,At,Ht);se&&qe.associatedIconIndex>=0&&(ze[qe.associatedIconIndex]={x:_t,y:Ft,z:At,angle:Ht})}else rt(at,Ie)}if(se){Oe.clear();const We=_.icon.placedSymbolArray;for(let qe=0;qe<We.length;qe++){const st=We.get(qe),{numGlyphs:lt}=st,at=ze[qe];if(st.hidden||!at)rt(lt,Oe);else{const{x:pt,y:dt,z:Ct,angle:Qt}=at;for(let _t=0;_t<lt;_t++)s.addDynamicAttributes(Oe,pt,dt,Ct,Qt)}}_.icon.dynamicLayoutVertexBuffer.updateData(Oe)}_.text.dynamicLayoutVertexBuffer.updateData(Ie)}function Lg(_,h,g){return g.iconsInText&&h?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function h0(_,h,g,C,P,L,V,G,J,oe,se,me){const Ie=_.context,Oe=Ie.gl,ze=_.transform,De=G==="map",Ne=J==="map",ge=De&&g.layout.get("symbol-placement")!=="point",Me=De&&!Ne&&!ge,We=g.layout.get("symbol-sort-key").constantOr(1)!==void 0;let qe=!1;const st=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),lt=[s.mercatorXfromLng(ze.center.lng),s.mercatorYfromLat(ze.center.lat)],at=g.layout.get("text-variable-anchor"),pt=ze.projection.name==="globe",dt=[],Ct=[0,-1,0];let Qt=Ct;!pt&&!ze.mercatorFromTransition||De||(Qt=function(_t){const Ft=_t._camera.getWorldToCamera(_t.worldSize,1),At=s.multiply([],Ft,_t.globeMatrix);s.invert(At,At);const Jt=[0,0,0],St=[0,1,0,0];return s.transformMat4$1(St,St,At),Jt[0]=St[0],Jt[1]=St[1],Jt[2]=St[2],s.normalize(Jt,Jt),Jt}(ze));for(const _t of C){const Ft=h.getTile(_t),At=Ft.getBucket(g);if(!At||At.projection.name==="mercator"&&pt)continue;const Jt=P?At.text:At.icon;if(!Jt||At.fullyClipped||!Jt.segments.get().length)continue;const St=Jt.programConfigurations.get(g.id),jt=P||At.sdfIcons,rr=P?At.textSizeData:At.iconSizeData,Ht=Ne||ze.pitch!==0,sr=s.evaluateSizeForZoom(rr,ze.zoom);let zr,sn,Ir,Wr,vn=[0,0],yn=null;if(P)sn=Ft.glyphAtlasTexture,Ir=Oe.LINEAR,zr=Ft.glyphAtlasTexture.size,At.iconsInText&&(vn=Ft.imageAtlasTexture.size,yn=Ft.imageAtlasTexture,Wr=Ht||_.options.rotating||_.options.zooming||rr.kind==="composite"||rr.kind==="camera"?Oe.LINEAR:Oe.NEAREST);else{const ml=g.layout.get("icon-size").constantOr(0)!==1||At.iconsNeedLinear;sn=Ft.imageAtlasTexture,Ir=jt||_.options.rotating||_.options.zooming||ml||Ht?Oe.LINEAR:Oe.NEAREST,zr=Ft.imageAtlasTexture.size}const Lr=At.projection.name==="globe",Gn=Lr?Qt:Ct,si=Lr?s.globeToMercatorTransition(ze.zoom):0,oi=ar(_t,At.getProjection(),ze),ai=ze.calculatePixelsToTileUnitsMatrix(Ft),oo=B(oi,Ft.tileID.canonical,Ne,De,ze,At.getProjection(),ai),js=_.terrain&&Ne&&ge?s.invert(s.create(),oo):u0,ia=re(oi,Ft.tileID.canonical,Ne,De,ze,At.getProjection(),ai),Ga=at&&At.hasTextData(),Oi=g.layout.get("icon-text-fit")!=="none"&&Ga&&At.hasIconData();if(ge){const ml=ze.elevation,Gl=ml?ml.getAtTileOffsetFunc(_t,ze.center.lat,ze.worldSize,At.getProjection()):null,jc=ee(oi,Ft.tileID.canonical,Ne,De,ze,At.getProjection(),ai);Ee(At,oi,_,P,jc,ia,Ne,oe,Gl,_t)}const li=ge||P&&at||Oi,Nn=_.translatePosMatrix(oi,Ft,L,V),ds=li?u0:oo,xo=_.translatePosMatrix(ia,Ft,L,V,!0),Pi=At.getProjection().createInversionMatrix(ze,_t.canonical),ko=[];_.terrainRenderModeElevated()&&Ne&&ko.push("PITCH_WITH_MAP_TERRAIN"),Lr&&ko.push("PROJECTION_GLOBE_VIEW"),li&&ko.push("PROJECTED_POS_ON_VIEWPORT");const gp=jt&&g.paint.get(P?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Nc;Nc=jt?At.iconsInText?c0(rr.kind,sr,Me,Ne,_,Nn,ds,xo,zr,vn,_t,si,lt,Pi,Gn,At.getProjection()):Qf(rr.kind,sr,Me,Ne,_,Nn,ds,xo,P,zr,!0,_t,si,lt,Pi,Gn,At.getProjection()):Ig(rr.kind,sr,Me,Ne,_,Nn,ds,xo,P,zr,_t,si,lt,Pi,Gn,At.getProjection());const Ed={program:_.useProgram(Lg(jt,P,At),St,ko),buffers:Jt,uniformValues:Nc,atlasTexture:sn,atlasTextureIcon:yn,atlasInterpolation:Ir,atlasInterpolationIcon:Wr,isSDF:jt,hasHalo:gp,tile:Ft,labelPlaneMatrixInv:js};if(We&&At.canOverlap){qe=!0;const ml=Jt.segments.get();for(const Gl of ml)dt.push({segments:new s.SegmentVector([Gl]),sortKey:Gl.sortKey,state:Ed})}else dt.push({segments:Jt.segments,sortKey:0,state:Ed})}qe&&dt.sort((_t,Ft)=>_t.sortKey-Ft.sortKey);for(const _t of dt){const Ft=_t.state;if(_.terrain&&_.terrain.setupElevationDraw(Ft.tile,Ft.program,{useDepthForOcclusion:!pt,labelPlaneMatrixInv:Ft.labelPlaneMatrixInv}),Ie.activeTexture.set(Oe.TEXTURE0),Ft.atlasTexture.bind(Ft.atlasInterpolation,Oe.CLAMP_TO_EDGE),Ft.atlasTextureIcon&&(Ie.activeTexture.set(Oe.TEXTURE1),Ft.atlasTextureIcon&&Ft.atlasTextureIcon.bind(Ft.atlasInterpolationIcon,Oe.CLAMP_TO_EDGE)),Ft.isSDF){const At=Ft.uniformValues;Ft.hasHalo&&(At.u_is_halo=1,gd(Ft.buffers,_t.segments,g,_,Ft.program,st,se,me,At)),At.u_is_halo=0}gd(Ft.buffers,_t.segments,g,_,Ft.program,st,se,me,Ft.uniformValues)}}function gd(_,h,g,C,P,L,V,G,J){const oe=C.context,se=[_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer,_.globeExtVertexBuffer];P.draw(oe,oe.gl.TRIANGLES,L,V,G,s.CullFaceMode.disabled,J,g.id,_.layoutVertexBuffer,_.indexBuffer,h,g.paint,C.transform.zoom,_.programConfigurations.get(g.id),se)}function d0(_,h,g,C,P,L,V){const G=_.context.gl,J=g.paint.get("fill-pattern"),oe=J&&J.constantOr(1);let se,me,Ie,Oe,ze;V?(me=oe&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=G.LINES):(me=oe?"fillPattern":"fill",se=G.TRIANGLES);for(const De of C){const Ne=h.getTile(De);if(oe&&!Ne.patternsLoaded())continue;const ge=Ne.getBucket(g);if(!ge)continue;_.prepareDrawTile();const Me=ge.programConfigurations.get(g.id),We=_.useProgram(me,Me);oe&&(_.context.activeTexture.set(G.TEXTURE0),Ne.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Me.updatePaintBuffers());const qe=J.constantOr(null);if(qe&&Ne.imageAtlas){const lt=Ne.imageAtlas.patternPositions[qe.toString()];lt&&Me.setConstantPatternPositions(lt)}const st=_.translatePosMatrix(De.projMatrix,Ne,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(V){Oe=ge.indexBuffer2,ze=ge.segments2;const lt=_.terrain&&_.terrain.renderingToTexture?_.terrain.drapeBufferSize:[G.drawingBufferWidth,G.drawingBufferHeight];Ie=me==="fillOutlinePattern"&&oe?s2(st,_,Ne,lt):i2(st,lt)}else Oe=ge.indexBuffer,ze=ge.segments,Ie=oe?Sg(st,_,Ne):Lc(st);_.prepareDrawProgram(_.context,We,De.toUnwrapped()),We.draw(_.context,se,P,_.stencilModeForClipping(De),L,s.CullFaceMode.disabled,Ie,g.id,ge.layoutVertexBuffer,Oe,ze,g.paint,_.transform.zoom,Me)}}function tp(_,h,g,C,P,L,V){const G=_.context,J=G.gl,oe=_.transform,se=g.paint.get("fill-extrusion-pattern"),me=se.constantOr(1),Ie=g.paint.get("fill-extrusion-opacity"),Oe=[g.paint.get("fill-extrusion-ambient-occlusion-intensity"),g.paint.get("fill-extrusion-ambient-occlusion-radius")],ze=g.layout.get("fill-extrusion-edge-radius"),De=ze>0&&!g.paint.get("fill-extrusion-rounded-roof"),Ne=De?0:ze,ge=oe.projection.name==="globe"?s.fillExtrusionHeightLift():0,Me=oe.projection.name==="globe",We=Me?s.globeToMercatorTransition(oe.zoom):0,qe=[s.mercatorXfromLng(oe.center.lng),s.mercatorYfromLat(oe.center.lat)],st=[];Me&&st.push("PROJECTION_GLOBE_VIEW"),Oe[0]>0&&st.push("FAUX_AO"),De&&st.push("ZERO_ROOF_RADIUS");for(const lt of C){const at=h.getTile(lt),pt=at.getBucket(g);if(!pt||pt.projection.name!==oe.projection.name)continue;const dt=pt.programConfigurations.get(g.id),Ct=_.useProgram(me?"fillExtrusionPattern":"fillExtrusion",dt,st);if(_.terrain){const jt=_.terrain;if(_.style.terrainSetForDrapingOnly())jt.setupElevationDraw(at,Ct,{useMeterToDem:!0});else{if(!pt.enableTerrain)continue;if(jt.setupElevationDraw(at,Ct,{useMeterToDem:!0}),f0(G,h,lt,pt,g,jt),!pt.centroidVertexBuffer){const rr=Ct.attributes.a_centroid_pos;rr!==void 0&&J.vertexAttrib2f(rr,0,0)}}}me&&(_.context.activeTexture.set(J.TEXTURE0),at.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),dt.updatePaintBuffers());const Qt=se.constantOr(null);if(Qt&&at.imageAtlas){const jt=at.imageAtlas.patternPositions[Qt.toString()];jt&&dt.setConstantPatternPositions(jt)}const _t=_.translatePosMatrix(lt.projMatrix,at,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Ft=oe.projection.createInversionMatrix(oe,lt.canonical),At=g.paint.get("fill-extrusion-vertical-gradient"),Jt=me?o0(_t,_,At,Ie,Oe,Ne,lt,at,ge,We,qe,Ft):wg(_t,_,At,Ie,Oe,Ne,lt,ge,We,qe,Ft);_.prepareDrawProgram(G,Ct,lt.toUnwrapped());const St=[];_.terrain&&St.push(pt.centroidVertexBuffer),Me&&St.push(pt.layoutVertexExtBuffer),Ct.draw(G,G.gl.TRIANGLES,P,L,V,s.CullFaceMode.backCCW,Jt,g.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,g.paint,_.transform.zoom,dt,St)}}function f0(_,h,g,C,P,L){const V=[ge=>{let Me=ge.canonical.x-1,We=ge.wrap;return Me<0&&(Me=(1<<ge.canonical.z)-1,We--),new s.OverscaledTileID(ge.overscaledZ,We,ge.canonical.z,Me,ge.canonical.y)},ge=>{let Me=ge.canonical.x+1,We=ge.wrap;return Me===1<<ge.canonical.z&&(Me=0,We++),new s.OverscaledTileID(ge.overscaledZ,We,ge.canonical.z,Me,ge.canonical.y)},ge=>new s.OverscaledTileID(ge.overscaledZ,ge.wrap,ge.canonical.z,ge.canonical.x,(ge.canonical.y===0?1<<ge.canonical.z:ge.canonical.y)-1),ge=>new s.OverscaledTileID(ge.overscaledZ,ge.wrap,ge.canonical.z,ge.canonical.x,ge.canonical.y===(1<<ge.canonical.z)-1?0:ge.canonical.y+1)],G=ge=>{const Me=h.getSource().minzoom,We=st=>{const lt=h.getTileByID(st);if(lt&&lt.hasData())return lt.getBucket(P)},qe=[0,-1,1];for(const st of qe){if(ge.overscaledZ+st<Me)continue;const lt=We(ge.calculateScaledKey(ge.overscaledZ+st));if(lt)return lt}},J=[0,0,0],oe=(ge,Me)=>(J[0]=Math.min(ge.min.y,Me.min.y),J[1]=Math.max(ge.max.y,Me.max.y),J[2]=s.EXTENT-Me.min.x>ge.max.x?Me.min.x-s.EXTENT:ge.max.x,J),se=(ge,Me)=>(J[0]=Math.min(ge.min.x,Me.min.x),J[1]=Math.max(ge.max.x,Me.max.x),J[2]=s.EXTENT-Me.min.y>ge.max.y?Me.min.y-s.EXTENT:ge.max.y,J),me=[(ge,Me)=>oe(ge,Me),(ge,Me)=>oe(Me,ge),(ge,Me)=>se(ge,Me),(ge,Me)=>se(Me,ge)],Ie=new s.Point(0,0);let Oe,ze,De;const Ne=(ge,Me,We,qe,st)=>{const lt=[[qe?We:ge,qe?ge:We,0],[qe?We:Me,qe?Me:We,0]],at=st<0?s.EXTENT+st:st,pt=[qe?at:(ge+Me)/2,qe?(ge+Me)/2:at,0];return We===0&&st<0||We!==0&&st>0?L.getForTilePoints(De,[pt],!0,ze):lt.push(pt),L.getForTilePoints(g,lt,!0,Oe),Math.max(lt[0][2],lt[1][2],pt[2])/L.exaggeration()};for(let ge=0;ge<4;ge++){const Me=(ge<2?1:5)-ge,We=C.borders[ge];if(We.length===0)continue;const qe=De=V[ge](g),st=G(qe);if(!(st&&st instanceof s.FillExtrusionBucket&&st.enableTerrain)||C.borderDoneWithNeighborZ[ge]===st.canonical.z&&st.borderDoneWithNeighborZ[Me]===C.canonical.z||(ze=L.findDEMTileFor(qe),!ze||!ze.dem))continue;if(!Oe){const dt=L.findDEMTileFor(g);if(!dt||!dt.dem)return;Oe=dt}const lt=st.borders[Me];let at=0;const pt=st.borderDoneWithNeighborZ[Me]!==C.canonical.z;if(C.canonical.z===st.canonical.z){for(let dt=0;dt<We.length;dt++){const Ct=C.featuresOnBorder[We[dt]],Qt=Ct.borders[ge];let _t;for(;at<lt.length&&(_t=st.featuresOnBorder[lt[at]],!(_t.borders[Me][1]>Qt[0]+3));)pt&&st.encodeCentroid(void 0,_t,!1),at++;if(_t&&at<lt.length){const Ft=at;let At=0;for(;!(_t.borders[Me][0]>Qt[1]-3)&&(At++,++at!==lt.length);)_t=st.featuresOnBorder[lt[at]];if(_t=st.featuresOnBorder[lt[Ft]],Ct.intersectsCount()>1||_t.intersectsCount()>1||At!==1){At!==1&&(at=Ft),C.encodeCentroid(void 0,Ct,!1),pt&&st.encodeCentroid(void 0,_t,!1);continue}const Jt=me[ge](Ct,_t),St=ge%2?s.EXTENT-1:0;Ie.x=Ne(Jt[0],Math.min(s.EXTENT-1,Jt[1]),St,ge<2,Jt[2]),Ie.y=0,C.encodeCentroid(Ie,Ct,!1),pt&&st.encodeCentroid(Ie,_t,!1)}else C.encodeCentroid(void 0,Ct,!1)}C.borderDoneWithNeighborZ[ge]=st.canonical.z,C.needsCentroidUpdate=!0,pt&&(st.borderDoneWithNeighborZ[Me]=C.canonical.z,st.needsCentroidUpdate=!0)}else{for(const dt of We)C.encodeCentroid(void 0,C.featuresOnBorder[dt],!1);if(pt){for(const dt of lt)st.encodeCentroid(void 0,st.featuresOnBorder[dt],!1);st.borderDoneWithNeighborZ[Me]=C.canonical.z,st.needsCentroidUpdate=!0}C.borderDoneWithNeighborZ[ge]=st.canonical.z,C.needsCentroidUpdate=!0}}(C.needsCentroidUpdate||!C.centroidVertexBuffer&&C.centroidVertexArray.length!==0)&&C.uploadCentroid(_)}const Ou=new s.Color(1,0,0,1),u2=new s.Color(0,1,0,1),h2=new s.Color(0,0,1,1),d2=new s.Color(1,0,1,1),f2=new s.Color(0,1,1,1);function p2(_,h,g){const C=_.context,P=_.transform,L=C.gl,V=P.projection.name==="globe",G=V?["PROJECTION_GLOBE_VIEW"]:null;let J=g.projMatrix;if(V&&s.globeToMercatorTransition(P.zoom)>0){const Ct=s.transitionTileAABBinECEF(g.canonical,P),Qt=s.globeDenormalizeECEF(Ct);J=s.multiply(new Float32Array(16),P.globeMatrix,Qt),s.multiply(J,P.projMatrix,J)}const oe=_.useProgram("debug",null,G),se=h.getTileByID(g.key);_.terrain&&_.terrain.setupElevationDraw(se,oe);const me=s.DepthMode.disabled,Ie=s.StencilMode.disabled,Oe=_.colorModeForRenderPass(),ze="$debug";C.activeTexture.set(L.TEXTURE0),_.emptyTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),V?se._makeGlobeTileDebugBuffers(_.context,P):se._makeDebugTileBoundsBuffers(_.context,P.projection);const De=se._tileDebugBuffer||_.debugBuffer,Ne=se._tileDebugIndexBuffer||_.debugIndexBuffer,ge=se._tileDebugSegments||_.debugSegments;oe.draw(C,L.LINE_STRIP,me,Ie,Oe,s.CullFaceMode.disabled,Kf(J,s.Color.red),ze,De,Ne,ge,null,null,null,[se._globeTileDebugBorderBuffer]);const Me=se.latestRawTileData,We=Math.floor((Me&&Me.byteLength||0)/1024),qe=h.getTile(g).tileSize,st=512/Math.min(qe,512)*(g.overscaledZ/P.zoom)*.5;let lt=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(lt+=` => ${g.overscaledZ}`),lt+=` ${We}kb`,function(Ct,Qt){Ct.initDebugOverlayCanvas();const _t=Ct.debugOverlayCanvas,Ft=Ct.context.gl,At=Ct.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,_t.width,_t.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(Qt,5,5),At.strokeText(Qt,5,5),Ct.debugOverlayTexture.update(_t),Ct.debugOverlayTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE)}(_,lt);const at=se._tileDebugTextBuffer||_.debugBuffer,pt=se._tileDebugTextIndexBuffer||_.quadTriangleIndexBuffer,dt=se._tileDebugTextSegments||_.debugSegments;oe.draw(C,L.TRIANGLES,me,Ie,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,Kf(J,s.Color.transparent,st),ze,at,pt,dt,null,null,null,[se._globeTileDebugTextBuffer])}function p0(_,h,g,C){Du(_,0,h+g/2,_.transform.width,g,C)}function rp(_,h,g,C){Du(_,h-g/2,0,g,_.transform.height,C)}function Du(_,h,g,C,P,L){const V=_.context,G=V.gl;G.enable(G.SCISSOR_TEST),G.scissor(h*s.exported.devicePixelRatio,g*s.exported.devicePixelRatio,C*s.exported.devicePixelRatio,P*s.exported.devicePixelRatio),V.clear({color:L}),G.disable(G.SCISSOR_TEST)}const m0=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:g0}=m0;function fl(_,h,g,C){_.emplaceBack(h,g,C)}class np{constructor(h){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,fl(this.vertexArray,-1,-1,1),fl(this.vertexArray,1,-1,1),fl(this.vertexArray,-1,1,1),fl(this.vertexArray,1,1,1),fl(this.vertexArray,-1,-1,-1),fl(this.vertexArray,1,-1,-1),fl(this.vertexArray,-1,1,-1),fl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=h.createVertexBuffer(this.vertexArray,g0),this.indexBuffer=h.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function ra(_,h,g,C,P,L){const V=_.gl,G=h.paint.get("sky-atmosphere-color"),J=h.paint.get("sky-atmosphere-halo-color"),oe=h.paint.get("sky-atmosphere-sun-intensity"),se=((me,Ie,Oe,ze,De)=>({u_matrix_3f:me,u_sun_direction:Ie,u_sun_intensity:Oe,u_color_tint_r:[ze.r,ze.g,ze.b,ze.a],u_color_tint_m:[De.r,De.g,De.b,De.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),C),P,oe,G,J);V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_CUBE_MAP_POSITIVE_X+L,h.skyboxTexture,0),g.draw(_,V.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,se,"skyboxCapture",h.skyboxGeometry.vertexBuffer,h.skyboxGeometry.indexBuffer,h.skyboxGeometry.segment)}const yd=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class y0{constructor(h){const g=new s.StructArrayLayout5f20;g.emplaceBack(-1,1,1,0,0),g.emplaceBack(1,1,1,1,0),g.emplaceBack(1,-1,1,1,1),g.emplaceBack(-1,-1,1,0,1);const C=new s.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,3,0),this.vertexBuffer=h.createVertexBuffer(g,yd.members),this.indexBuffer=h.createIndexBuffer(C),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Oc={symbol:function(_,h,g,C,P){if(_.renderPass!=="translucent")return;const L=s.StencilMode.disabled,V=_.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(G,J,oe,se,me,Ie,Oe){const ze=J.transform,De=me==="map",Ne=Ie==="map";for(const ge of G){const Me=se.getTile(ge),We=Me.getBucket(oe);if(!We||!We.text||!We.text.segments.get().length)continue;const qe=s.evaluateSizeForZoom(We.textSizeData,ze.zoom),st=ar(ge,We.getProjection(),ze),lt=ze.calculatePixelsToTileUnitsMatrix(Me),at=B(st,Me.tileID.canonical,Ne,De,ze,We.getProjection(),lt),pt=oe.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if(qe){const dt=Math.pow(2,ze.zoom-Me.tileID.overscaledZ);c2(We,De,Ne,Oe,s.symbolSize,ze,at,ge,dt,qe,pt)}}}(C,_,g,h,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),P),g.paint.get("icon-opacity").constantOr(1)!==0&&h0(_,h,g,C,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),L,V),g.paint.get("text-opacity").constantOr(1)!==0&&h0(_,h,g,C,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),L,V),h.map.showCollisionBoxes&&(md(_,h,g,C,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),md(_,h,g,C,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))},circle:function(_,h,g,C){if(_.renderPass!=="translucent")return;const P=g.paint.get("circle-opacity"),L=g.paint.get("circle-stroke-width"),V=g.paint.get("circle-stroke-opacity"),G=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(P.constantOr(1)===0&&(L.constantOr(1)===0||V.constantOr(1)===0))return;const J=_.context,oe=J.gl,se=_.transform,me=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),Ie=s.StencilMode.disabled,Oe=_.colorModeForRenderPass(),ze=se.projection.name==="globe",De=[s.mercatorXfromLng(se.center.lng),s.mercatorYfromLat(se.center.lat)],Ne=[];for(let Me=0;Me<C.length;Me++){const We=C[Me],qe=h.getTile(We),st=qe.getBucket(g);if(!st||st.projection.name!==se.projection.name)continue;const lt=st.programConfigurations.get(g.id),at=kg(g);ze&&at.push("PROJECTION_GLOBE_VIEW");const pt=_.useProgram("circle",lt,at),dt=st.layoutVertexBuffer,Ct=st.globeExtVertexBuffer,Qt=st.indexBuffer,_t=se.projection.createInversionMatrix(se,We.canonical),Ft={programConfiguration:lt,program:pt,layoutVertexBuffer:dt,globeExtVertexBuffer:Ct,indexBuffer:Qt,uniformValues:Cg(_,We,qe,_t,De,g),tile:qe};if(G){const At=st.segments.get();for(const Jt of At)Ne.push({segments:new s.SegmentVector([Jt]),sortKey:Jt.sortKey,state:Ft})}else Ne.push({segments:st.segments,sortKey:0,state:Ft})}G&&Ne.sort((Me,We)=>Me.sortKey-We.sortKey);const ge={useDepthForOcclusion:!ze};for(const Me of Ne){const{programConfiguration:We,program:qe,layoutVertexBuffer:st,globeExtVertexBuffer:lt,indexBuffer:at,uniformValues:pt,tile:dt}=Me.state,Ct=Me.segments;_.terrain&&_.terrain.setupElevationDraw(dt,qe,ge),_.prepareDrawProgram(J,qe,dt.tileID.toUnwrapped()),qe.draw(J,oe.TRIANGLES,me,Ie,Oe,s.CullFaceMode.disabled,pt,g.id,st,at,Ct,g.paint,se.zoom,We,[lt])}},heatmap:function(_,h,g,C){if(g.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const P=_.context,L=P.gl,V=s.StencilMode.disabled,G=new s.ColorMode([L.ONE,L.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(Oe,ze,De,Ne){const ge=Oe.gl,Me=ze.width*Ne,We=ze.height*Ne;Oe.activeTexture.set(ge.TEXTURE1),Oe.viewport.set([0,0,Me,We]);let qe=De.heatmapFbo;if(!qe||qe&&(qe.width!==Me||qe.height!==We)){qe&&qe.destroy();const st=ge.createTexture();ge.bindTexture(ge.TEXTURE_2D,st),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_S,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_WRAP_T,ge.CLAMP_TO_EDGE),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MIN_FILTER,ge.LINEAR),ge.texParameteri(ge.TEXTURE_2D,ge.TEXTURE_MAG_FILTER,ge.LINEAR),qe=De.heatmapFbo=Oe.createFramebuffer(Me,We,!1),function(lt,at,pt,dt,Ct,Qt){const _t=lt.gl;_t.texImage2D(_t.TEXTURE_2D,0,lt.isWebGL2&&lt.extRenderToTextureHalfFloat?_t.RGBA16F:_t.RGBA,Ct,Qt,0,_t.RGBA,lt.extRenderToTextureHalfFloat?lt.isWebGL2?_t.HALF_FLOAT:lt.extTextureHalfFloat.HALF_FLOAT_OES:_t.UNSIGNED_BYTE,null),dt.colorAttachment.set(pt)}(Oe,0,st,qe,Me,We)}else ge.bindTexture(ge.TEXTURE_2D,qe.colorAttachment.get()),Oe.bindFramebuffer.set(qe.framebuffer)})(P,_,g,_.transform.projection.name==="globe"?.5:.25),P.clear({color:s.Color.transparent});const J=_.transform,oe=J.projection.name==="globe",se=oe?["PROJECTION_GLOBE_VIEW"]:null,me=oe?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,Ie=[s.mercatorXfromLng(J.center.lng),s.mercatorYfromLat(J.center.lat)];for(let Oe=0;Oe<C.length;Oe++){const ze=C[Oe];if(h.hasRenderableParent(ze))continue;const De=h.getTile(ze),Ne=De.getBucket(g);if(!Ne||Ne.projection.name!==J.projection.name)continue;const ge=Ne.programConfigurations.get(g.id),Me=_.useProgram("heatmap",ge,se),{zoom:We}=_.transform;_.terrain&&_.terrain.setupElevationDraw(De,Me),_.prepareDrawProgram(P,Me,ze.toUnwrapped());const qe=J.projection.createInversionMatrix(J,ze.canonical);Me.draw(P,L.TRIANGLES,s.DepthMode.disabled,V,G,me,l0(_,ze,De,qe,Ie,We,g.paint.get("heatmap-intensity")),g.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,g.paint,_.transform.zoom,ge,oe?[Ne.globeExtVertexBuffer]:null)}P.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(P,L){const V=P.context,G=V.gl,J=L.heatmapFbo;if(!J)return;V.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,J.colorAttachment.get()),V.activeTexture.set(G.TEXTURE1);let oe=L.colorRampTexture;oe||(oe=L.colorRampTexture=new s.Texture(V,L.colorRamp,G.RGBA)),oe.bind(G.LINEAR,G.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(V,G.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,P.colorModeForRenderPass(),s.CullFaceMode.disabled,((se,me,Ie,Oe)=>({u_image:0,u_color_ramp:1,u_opacity:me.paint.get("heatmap-opacity")}))(0,L),L.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,L.paint,P.transform.zoom)}(_,g))},line:function(_,h,g,C){if(_.renderPass!=="translucent")return;const P=g.paint.get("line-opacity"),L=g.paint.get("line-width");if(P.constantOr(1)===0||L.constantOr(1)===0)return;const V=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),G=_.colorModeForRenderPass(),J=_.terrain&&_.terrain.renderingToTexture?1:s.exported.devicePixelRatio,oe=g.paint.get("line-dasharray"),se=oe.constantOr(1),me=g.layout.get("line-cap"),Ie=g.paint.get("line-pattern"),Oe=Ie.constantOr(1),ze=g.paint.get("line-gradient"),De=Oe?"linePattern":"line",Ne=_.context,ge=Ne.gl,Me=(qe=>{const st=[];pd(qe)&&st.push("RENDER_LINE_DASH"),qe.paint.get("line-gradient")&&st.push("RENDER_LINE_GRADIENT");const lt=qe.paint.get("line-trim-offset");lt[0]===0&&lt[1]===0||st.push("RENDER_LINE_TRIM_OFFSET");const at=qe.paint.get("line-pattern").constantOr(1),pt=qe.paint.get("line-opacity").constantOr(1)!==1;return!at&&pt&&st.push("RENDER_LINE_ALPHA_DISCARD"),st})(g);let We=Me.includes("RENDER_LINE_ALPHA_DISCARD");_.terrain&&_.terrain.clipOrMaskOverlapStencilType()&&(We=!1);for(const qe of C){const st=h.getTile(qe);if(Oe&&!st.patternsLoaded())continue;const lt=st.getBucket(g);if(!lt)continue;_.prepareDrawTile();const at=lt.programConfigurations.get(g.id),pt=_.useProgram(De,at,Me),dt=Ie.constantOr(null);if(dt&&st.imageAtlas){const jt=st.imageAtlas.patternPositions[dt.toString()];jt&&at.setConstantPatternPositions(jt)}const Ct=oe.constantOr(null),Qt=me.constantOr(null);if(!Oe&&Ct&&Qt&&st.lineAtlas){const jt=st.lineAtlas.getDash(Ct,Qt);jt&&at.setConstantPatternPositions(jt)}let[_t,Ft]=g.paint.get("line-trim-offset");(Qt==="round"||Qt==="square")&&_t!==Ft&&(_t===0&&(_t-=1),Ft===1&&(Ft+=1));const At=_.terrain?qe.projMatrix:null,Jt=Oe?fd(_,st,g,At,J):a2(_,st,g,At,lt.lineClipsArray.length,J,[_t,Ft]);if(ze){const jt=lt.gradients[g.id];let rr=jt.texture;if(g.gradientVersion!==jt.version){let Ht=256;if(g.stepInterpolant){const sr=h.getSource().maxzoom,zr=qe.canonical.z===sr?Math.ceil(1<<_.transform.maxZoom-qe.canonical.z):1;Ht=s.clamp(s.nextPowerOfTwo(lt.maxLineLength/s.EXTENT*1024*zr),256,Ne.maxTextureSize)}jt.gradient=s.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:jt.gradient||void 0,clips:lt.lineClipsArray}),jt.texture?jt.texture.update(jt.gradient):jt.texture=new s.Texture(Ne,jt.gradient,ge.RGBA),jt.version=g.gradientVersion,rr=jt.texture}Ne.activeTexture.set(ge.TEXTURE1),rr.bind(g.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}se&&(Ne.activeTexture.set(ge.TEXTURE0),st.lineAtlasTexture.bind(ge.LINEAR,ge.REPEAT),at.updatePaintBuffers()),Oe&&(Ne.activeTexture.set(ge.TEXTURE0),st.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),at.updatePaintBuffers()),_.prepareDrawProgram(Ne,pt,qe.toUnwrapped());const St=jt=>{pt.draw(Ne,ge.TRIANGLES,V,jt,G,s.CullFaceMode.disabled,Jt,g.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,g.paint,_.transform.zoom,at,[lt.layoutVertexBuffer2])};if(We){const jt=_.stencilModeForClipping(qe).ref;jt===0&&_.terrain&&Ne.clear({stencil:0});const rr={func:ge.EQUAL,mask:255};Jt.u_alpha_discard_threshold=.8,St(new s.StencilMode(rr,jt,255,ge.KEEP,ge.KEEP,ge.INVERT)),Jt.u_alpha_discard_threshold=0,St(new s.StencilMode(rr,jt,255,ge.KEEP,ge.KEEP,ge.KEEP))}else St(_.stencilModeForClipping(qe))}We&&(_.resetStencilClippingMasks(),_.terrain&&Ne.clear({stencil:0}))},fill:function(_,h,g,C){const P=g.paint.get("fill-color"),L=g.paint.get("fill-opacity");if(L.constantOr(1)===0)return;const V=_.colorModeForRenderPass(),G=g.paint.get("fill-pattern"),J=_.opaquePassEnabledForLayer()&&!G.constantOr(1)&&P.constantOr(s.Color.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===J){const oe=_.depthModeForSublayer(1,_.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);d0(_,h,g,C,oe,V,!1)}if(_.renderPass==="translucent"&&g.paint.get("fill-antialias")){const oe=_.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);d0(_,h,g,C,oe,V,!0)}},"fill-extrusion":function(_,h,g,C){const P=g.paint.get("fill-extrusion-opacity");if(P!==0&&_.renderPass==="translucent"){const L=new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D);if(P!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))tp(_,h,g,C,L,s.StencilMode.disabled,s.ColorMode.disabled),tp(_,h,g,C,L,_.stencilModeFor3D(),_.colorModeForRenderPass()),_.resetStencilClippingMasks();else{const V=_.colorModeForRenderPass();tp(_,h,g,C,L,s.StencilMode.disabled,V)}}},hillshade:function(_,h,g,C){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const P=_.context,L=_.depthModeForSublayer(0,s.DepthMode.ReadOnly),V=_.colorModeForRenderPass(),G=_.terrain&&_.terrain.renderingToTexture,[J,oe]=_.renderPass!=="translucent"||G?[{},C]:_.stencilConfigForOverlap(C);for(const se of oe){const me=h.getTile(se);if(me.needsHillshadePrepare&&_.renderPass==="offscreen")n0(_,me,g,L,s.StencilMode.disabled,V);else if(_.renderPass==="translucent"){const Ie=G&&_.terrain?_.terrain.stencilModeForRTTOverlap(se):J[se.overscaledZ];r0(_,se,me,g,L,Ie,V)}}P.viewport.set([0,0,_.width,_.height]),_.resetStencilClippingMasks()},raster:function(_,h,g,C,P,L){if(_.renderPass!=="translucent"||g.paint.get("raster-opacity")===0||!C.length)return;const V=_.context,G=V.gl,J=h.getSource(),oe=_.useProgram("raster"),se=_.colorModeForRenderPass(),me=_.terrain&&_.terrain.renderingToTexture,[Ie,Oe]=J instanceof Qr||me?[{},C]:_.stencilConfigForOverlap(C),ze=Oe[Oe.length-1].overscaledZ,De=!_.options.moving;for(const Ne of Oe){const ge=me?s.DepthMode.disabled:_.depthModeForSublayer(Ne.overscaledZ-ze,g.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,G.LESS),Me=Ne.toUnwrapped(),We=h.getTile(Ne);if(me&&(!We||!We.hasData()))continue;const qe=me?Ne.projMatrix:_.transform.calculateProjMatrix(Me,De),st=_.terrain&&me?_.terrain.stencilModeForRTTOverlap(Ne):Ie[Ne.overscaledZ],lt=L?0:g.paint.get("raster-fade-duration");We.registerFadeDuration(lt);const at=h.findLoadedParent(Ne,0),pt=vg(We,at,h,_.transform,lt);let dt,Ct;_.terrain&&_.terrain.prepareDrawTile();const Qt=g.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;V.activeTexture.set(G.TEXTURE0),We.texture.bind(Qt,G.CLAMP_TO_EDGE),V.activeTexture.set(G.TEXTURE1),at?(at.texture.bind(Qt,G.CLAMP_TO_EDGE),dt=Math.pow(2,at.tileID.overscaledZ-We.tileID.overscaledZ),Ct=[We.tileID.canonical.x*dt%1,We.tileID.canonical.y*dt%1]):We.texture.bind(Qt,G.CLAMP_TO_EDGE),We.texture.useMipmap&&V.extTextureFilterAnisotropic&&_.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const _t=Ag(qe,Ct||[0,0],dt||1,pt,g,J instanceof Qr?J.perspectiveTransform:[0,0]);if(_.prepareDrawProgram(V,oe,Me),J instanceof Qr)J.boundsBuffer&&J.boundsSegments&&oe.draw(V,G.TRIANGLES,ge,s.StencilMode.disabled,se,s.CullFaceMode.disabled,_t,g.id,J.boundsBuffer,_.quadTriangleIndexBuffer,J.boundsSegments);else{const{tileBoundsBuffer:Ft,tileBoundsIndexBuffer:At,tileBoundsSegments:Jt}=_.getTileBoundsBuffers(We);oe.draw(V,G.TRIANGLES,ge,st,se,s.CullFaceMode.disabled,_t,g.id,Ft,At,Jt)}}_.resetStencilClippingMasks()},background:function(_,h,g,C){const P=g.paint.get("background-color"),L=g.paint.get("background-opacity");if(L===0)return;const V=_.context,G=V.gl,J=_.transform,oe=J.tileSize,se=g.paint.get("background-pattern");if(_.isPatternMissing(se))return;const me=!se&&P.a===1&&L===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==me)return;const Ie=s.StencilMode.disabled,Oe=_.depthModeForSublayer(0,me==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),ze=_.colorModeForRenderPass(),De=_.useProgram(se?"backgroundPattern":"background");let Ne,ge=C;ge||(Ne=_.getBackgroundTiles(),ge=Object.values(Ne).map(Me=>Me.tileID)),se&&(V.activeTexture.set(G.TEXTURE0),_.imageManager.bind(_.context));for(const Me of ge){const We=Me.toUnwrapped(),qe=C?Me.projMatrix:_.transform.calculateProjMatrix(We);_.prepareDrawTile();const st=h?h.getTile(Me):Ne?Ne[Me.key]:new s.Tile(Me,oe,J.zoom,_),lt=se?l2(qe,L,_,se,{tileID:Me,tileSize:oe}):Pg(qe,L,P);_.prepareDrawProgram(V,De,We);const{tileBoundsBuffer:at,tileBoundsIndexBuffer:pt,tileBoundsSegments:dt}=_.getTileBoundsBuffers(st);De.draw(V,G.TRIANGLES,Oe,Ie,ze,s.CullFaceMode.disabled,lt,g.id,at,pt,dt)}},sky:function(_,h,g){const C=_.transform,P=C.projection.name==="mercator"||C.projection.name==="globe"?1:s.smoothstep(7,8,C.zoom),L=g.paint.get("sky-opacity")*P;if(L===0)return;const V=_.context,G=g.paint.get("sky-type"),J=new s.DepthMode(V.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),oe=_.frameCounter/1e3%1;G==="atmosphere"?_.renderPass==="offscreen"?g.needsSkyboxCapture(_)&&(function(se,me,Ie,Oe){const ze=se.context,De=ze.gl;let Ne=me.skyboxFbo;if(!Ne){Ne=me.skyboxFbo=ze.createFramebuffer(32,32,!1),me.skyboxGeometry=new np(ze),me.skyboxTexture=ze.gl.createTexture(),De.bindTexture(De.TEXTURE_CUBE_MAP,me.skyboxTexture),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_WRAP_S,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_WRAP_T,De.CLAMP_TO_EDGE),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_MIN_FILTER,De.LINEAR),De.texParameteri(De.TEXTURE_CUBE_MAP,De.TEXTURE_MAG_FILTER,De.LINEAR);for(let qe=0;qe<6;++qe)De.texImage2D(De.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,De.RGBA,32,32,0,De.RGBA,De.UNSIGNED_BYTE,null)}ze.bindFramebuffer.set(Ne.framebuffer),ze.viewport.set([0,0,32,32]);const ge=me.getCenter(se,!0),Me=se.useProgram("skyboxCapture"),We=new Float64Array(16);s.identity(We),s.rotateY(We,We,.5*-Math.PI),ra(ze,me,Me,We,ge,0),s.identity(We),s.rotateY(We,We,.5*Math.PI),ra(ze,me,Me,We,ge,1),s.identity(We),s.rotateX(We,We,.5*-Math.PI),ra(ze,me,Me,We,ge,2),s.identity(We),s.rotateX(We,We,.5*Math.PI),ra(ze,me,Me,We,ge,3),s.identity(We),ra(ze,me,Me,We,ge,4),s.identity(We),s.rotateY(We,We,Math.PI),ra(ze,me,Me,We,ge,5),ze.viewport.set([0,0,se.width,se.height])}(_,g),g.markSkyboxValid(_)):_.renderPass==="sky"&&function(se,me,Ie,Oe,ze){const De=se.context,Ne=De.gl,ge=se.transform,Me=se.useProgram("skybox");De.activeTexture.set(Ne.TEXTURE0),Ne.bindTexture(Ne.TEXTURE_CUBE_MAP,me.skyboxTexture);const We=((qe,st,lt,at,pt)=>({u_matrix:qe,u_sun_direction:st,u_cubemap:0,u_opacity:at,u_temporal_offset:pt}))(ge.skyboxMatrix,me.getCenter(se,!1),0,Oe,ze);se.prepareDrawProgram(De,Me),Me.draw(De,Ne.TRIANGLES,Ie,s.StencilMode.disabled,se.colorModeForRenderPass(),s.CullFaceMode.backCW,We,"skybox",me.skyboxGeometry.vertexBuffer,me.skyboxGeometry.indexBuffer,me.skyboxGeometry.segment)}(_,g,J,L,oe):G==="gradient"&&_.renderPass==="sky"&&function(se,me,Ie,Oe,ze){const De=se.context,Ne=De.gl,ge=se.transform,Me=se.useProgram("skyboxGradient");me.skyboxGeometry||(me.skyboxGeometry=new np(De)),De.activeTexture.set(Ne.TEXTURE0);let We=me.colorRampTexture;We||(We=me.colorRampTexture=new s.Texture(De,me.colorRamp,Ne.RGBA)),We.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE);const qe=((st,lt,at,pt,dt)=>({u_matrix:st,u_color_ramp:0,u_center_direction:lt,u_radius:s.degToRad(at),u_opacity:pt,u_temporal_offset:dt}))(ge.skyboxMatrix,me.getCenter(se,!1),me.paint.get("sky-gradient-radius"),Oe,ze);se.prepareDrawProgram(De,Me),Me.draw(De,Ne.TRIANGLES,Ie,s.StencilMode.disabled,se.colorModeForRenderPass(),s.CullFaceMode.backCW,qe,"skyboxGradient",me.skyboxGeometry.vertexBuffer,me.skyboxGeometry.indexBuffer,me.skyboxGeometry.segment)}(_,g,J,L,oe)},debug:function(_,h,g){for(let C=0;C<g.length;C++)p2(_,h,g[C])},custom:function(_,h,g,C){const P=_.context,L=g.implementation;if(!_.transform.projection.unsupportedLayers||!_.transform.projection.unsupportedLayers.includes("custom")||_.terrain&&(_.terrain.renderingToTexture||_.renderPass==="offscreen")&&g.isLayerDraped()){if(_.renderPass==="offscreen"){const V=L.prerender;if(V){if(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),_.transform.projection.name==="globe"){const G=_.transform.pointMerc;V.call(L,P.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[G.x,G.y],_.transform.pixelsPerMeterRatio)}else V.call(L,P.gl,_.transform.customLayerMatrix());P.setDirty(),_.setBaseState()}}else if(_.renderPass==="translucent"){if(_.terrain&&_.terrain.renderingToTexture){const G=L.renderToTile;if(G){const J=C[0].canonical,oe=new s.MercatorCoordinate(J.x+C[0].wrap*(1<<J.z),J.y,J.z);P.setDepthMode(s.DepthMode.disabled),P.setStencilMode(s.StencilMode.disabled),P.setColorMode(_.colorModeForRenderPass()),_.setCustomLayerDefaults(),G.call(L,P.gl,oe),P.setDirty(),_.setBaseState()}return}_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(s.StencilMode.disabled);const V=L.renderingMode==="3d"?new s.DepthMode(_.context.gl.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(P.setDepthMode(V),_.transform.projection.name==="globe"){const G=_.transform.pointMerc;L.render(P.gl,_.transform.customLayerMatrix(),_.transform.getProjection(),_.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(_.transform.zoom),[G.x,G.y],_.transform.pixelsPerMeterRatio)}else L.render(P.gl,_.transform.customLayerMatrix());P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class zu{constructor(h,g,C=!1){this.context=new qt(h,C),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(h,g){const C=!!h&&!!h.terrain&&this.transform.projection.supportsTerrain;if(!(C||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new _g(this,h));const P=this._terrain;this.transform.elevation=C?P:null,P.update(h,this.transform,g)}_updateFog(h){const g=h.fog;if(!g||this.transform.projection.name==="globe"||g.getOpacity(this.transform.pitch)<1||g.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[C,P]=g.getFovAdjustedRange(this.transform._fov);if(C>P)return void(this.transform.fogCullDistSq=null);const L=C+.78*(P-C);this.transform.fogCullDistSq=L*L}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(h,g){if(this.width=h*s.exported.devicePixelRatio,this.height=g*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const C of this.style.order)this.style._layers[C].resize()}setup(){const h=this.context,g=new s.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(s.EXTENT,0),g.emplaceBack(0,s.EXTENT),g.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=h.createVertexBuffer(g,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const C=new s.StructArrayLayout2i4;C.emplaceBack(0,0),C.emplaceBack(s.EXTENT,0),C.emplaceBack(0,s.EXTENT),C.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=h.createVertexBuffer(C,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const P=new s.StructArrayLayout2i4;P.emplaceBack(-1,-1),P.emplaceBack(1,-1),P.emplaceBack(-1,1),P.emplaceBack(1,1),this.viewportBuffer=h.createVertexBuffer(P,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const L=new s.StructArrayLayout4i8;L.emplaceBack(0,0,0,0),L.emplaceBack(s.EXTENT,0,s.EXTENT,0),L.emplaceBack(0,s.EXTENT,0,s.EXTENT),L.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=h.createVertexBuffer(L,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const V=new s.StructArrayLayout3ui6;V.emplaceBack(0,1,2),V.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=h.createIndexBuffer(V);const G=new s.StructArrayLayout1ui2;for(const oe of[0,1,3,2,0])G.emplaceBack(oe);this.debugIndexBuffer=h.createIndexBuffer(G),this.emptyTexture=new s.Texture(h,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),h.gl.RGBA),this.identityMat=s.create();const J=this.context.gl;this.stencilClearMode=new s.StencilMode({func:J.ALWAYS,mask:0},0,255,J.ZERO,J.ZERO,J.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new y0(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(h){return h._makeTileBoundsBuffers(this.context,this.transform.projection),h._tileBoundsBuffer?{tileBoundsBuffer:h._tileBoundsBuffer,tileBoundsIndexBuffer:h._tileBoundsIndexBuffer,tileBoundsSegments:h._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const h=this.context,g=h.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(h,g.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,hd(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(h,g,C){if(!g||this.currentStencilSource===g.id||!h.isTileClipped()||!C||C.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let G=!1;for(const J of C)if(this._tileClippingMaskIDs[J.key]===void 0){G=!0;break}if(!G)return}this.currentStencilSource=g.id;const P=this.context,L=P.gl;this.nextStencilID+C.length>256&&this.clearStencil(),P.setColorMode(s.ColorMode.disabled),P.setDepthMode(s.DepthMode.disabled);const V=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const G of C){const J=g.getTile(G),oe=this._tileClippingMaskIDs[G.key]=this.nextStencilID++,{tileBoundsBuffer:se,tileBoundsIndexBuffer:me,tileBoundsSegments:Ie}=this.getTileBoundsBuffers(J);V.draw(P,L.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:L.ALWAYS,mask:0},oe,255,L.KEEP,L.KEEP,L.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,hd(G.projMatrix),"$clipping",se,me,Ie)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const h=this.nextStencilID++,g=this.context.gl;return new s.StencilMode({func:g.NOTEQUAL,mask:255},h,255,g.KEEP,g.KEEP,g.REPLACE)}stencilModeForClipping(h){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(h);const g=this.context.gl;return new s.StencilMode({func:g.EQUAL,mask:255},this._tileClippingMaskIDs[h.key],0,g.KEEP,g.KEEP,g.REPLACE)}stencilConfigForOverlap(h){const g=this.context.gl,C=h.sort((V,G)=>G.overscaledZ-V.overscaledZ),P=C[C.length-1].overscaledZ,L=C[0].overscaledZ-P+1;if(L>1){this.currentStencilSource=void 0,this.nextStencilID+L>256&&this.clearStencil();const V={};for(let G=0;G<L;G++)V[G+P]=new s.StencilMode({func:g.GEQUAL,mask:255},G+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=L,[V,C]}return[{[P]:s.StencilMode.disabled},C]}colorModeForRenderPass(){const h=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([h.CONSTANT_COLOR,h.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(h,g,C){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const P=1-((1+this.currentLayer)*this.numSublayers+h)*this.depthEpsilon;return new s.DepthMode(C||this.context.gl.LEQUAL,g,[P,P])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(h,g){this.style=h,this.options=g,this.imageManager=h.imageManager,this.glyphManager=h.glyphManager,this.symbolFadeChange=h.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const C=this.style.order,P=this.style._sourceCaches;for(const oe in P){const se=P[oe];se.used&&se.prepare(this.context)}const L={},V={},G={};for(const oe in P){const se=P[oe];L[oe]=se.getVisibleCoordinates(),V[oe]=L[oe].slice().reverse(),G[oe]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let oe=0;oe<C.length;oe++)if(this.style._layers[C[oe]].is3D()){this.opaquePassCutoff=oe;break}if(this.terrain&&(this.terrain.updateTileBinding(G),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const oe of C){const se=this.style._layers[oe],me=h._getLayerSourceCache(se);if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;const Ie=me?V[me.id]:void 0;(se.type==="custom"||se.isSky()||Ie&&Ie.length)&&this.renderLayer(this,me,se,Ie)}this.depthRangeFor3D=[0,1-(h.order.length+2)*this.numSublayers*this.depthEpsilon];const J=this.terrain;if(J&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&J.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:g.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=g.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=C.length-1;this.currentLayer>=0;this.currentLayer--){const oe=this.style._layers[C[this.currentLayer]],se=h._getLayerSourceCache(oe);if(oe.isSky())continue;const me=se?V[se.id]:void 0;this._renderTileClippingMasks(oe,se,me),this.renderLayer(this,se,oe,me)}if(this.style.fog&&this.transform.projection.supportsFog&&function(oe,se){const me=oe.context,Ie=me.gl,Oe=oe.transform,ze=new s.DepthMode(Ie.LEQUAL,s.DepthMode.ReadOnly,[0,1]),De=oe.useProgram("globeAtmosphere",null,Oe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Ne=s.globeToMercatorTransition(Oe.zoom),ge=se.properties.get("color").toArray01(),Me=se.properties.get("high-color").toArray01(),We=se.properties.get("space-color").toArray01PremultipliedAlpha(),qe=s.identity$1([]);s.rotateY$1(qe,qe,-s.degToRad(Oe._center.lng)),s.rotateX$1(qe,qe,s.degToRad(Oe._center.lat)),s.rotateZ$1(qe,qe,Oe.angle),s.rotateX$1(qe,qe,-Oe._pitch);const st=s.fromQuat(new Float32Array(16),qe),lt=s.mapValue(se.properties.get("star-intensity"),0,1,0,.25),at=5e-4,pt=s.mapValue(se.properties.get("horizon-blend"),0,1,at,.25),dt=s.globeUseCustomAntiAliasing(oe,me,Oe)&&pt===at?Oe.worldSize/(2*Math.PI*1.025)-1:Oe.globeRadius,Ct=oe.frameCounter/1e3%1,Qt=s.length(Oe.globeCenterInViewSpace),_t=Math.sqrt(Math.pow(Qt,2)-Math.pow(dt,2)),Ft=Math.acos(_t/Qt),At=((St,jt,rr,Ht,sr,zr,sn,Ir,Wr,vn,yn,Lr,Gn,si)=>({u_frustum_tl:St,u_frustum_tr:jt,u_frustum_br:rr,u_frustum_bl:Ht,u_horizon:sr,u_transition:zr,u_fadeout_range:sn,u_color:Ir,u_high_color:Wr,u_space_color:vn,u_star_intensity:yn,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Lr,u_horizon_angle:Gn,u_rotation_matrix:si}))(Oe.frustumCorners.TL,Oe.frustumCorners.TR,Oe.frustumCorners.BR,Oe.frustumCorners.BL,Oe.frustumCorners.horizon,Ne,pt,ge,Me,We,lt,Ct,Ft,st);oe.prepareDrawProgram(me,De);const Jt=oe.atmosphereBuffer;Jt&&De.draw(me,Ie.TRIANGLES,ze,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,At,"skybox",Jt.vertexBuffer,Jt.indexBuffer,Jt.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<C.length;this.currentLayer++){const oe=this.style._layers[C[this.currentLayer]],se=h._getLayerSourceCache(oe);oe.isSky()&&this.renderLayer(this,se,oe,se?V[se.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<C.length;){const oe=this.style._layers[C[this.currentLayer]],se=h._getLayerSourceCache(oe);if(oe.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(oe)){if(oe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const me=se?(oe.type==="symbol"?G:V)[se.id]:void 0;this._renderTileClippingMasks(oe,se,se?L[se.id]:void 0),this.renderLayer(this,se,oe,me),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let oe=null;s.values(this.style._layers).forEach(se=>{const me=h._getLayerSourceCache(se);me&&!se.isHidden(this.transform.zoom)&&(!oe||oe.getSource().maxzoom<me.getSource().maxzoom)&&(oe=me)}),oe&&this.options.showTileBoundaries&&Oc.debug(this,oe,oe.getVisibleCoordinates())}this.options.showPadding&&function(oe){const se=oe.transform.padding;p0(oe,oe.transform.height-(se.top||0),3,Ou),p0(oe,se.bottom||0,3,u2),rp(oe,se.left||0,3,h2),rp(oe,oe.transform.width-(se.right||0),3,d2);const me=oe.transform.centerPoint;(function(Ie,Oe,ze,De){Du(Ie,Oe-1,ze-10,2,20,De),Du(Ie,Oe-10,ze-1,20,2,De)})(oe,me.x,oe.transform.height-me.y,f2)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(h,g,C,P){C.isHidden(this.transform.zoom)||(C.type==="background"||C.type==="sky"||C.type==="custom"||P&&P.length)&&(this.id=C.id,this.gpuTimingStart(C),(!h.transform.projection.unsupportedLayers||!h.transform.projection.unsupportedLayers.includes(C.type)||h.terrain&&C.type==="custom")&&Oc[C.type](h,g,C,P,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(h){if(!this.options.gpuTiming)return;const g=this.context.extTimerQuery;let C=this.gpuTimers[h.id];C||(C=this.gpuTimers[h.id]={calls:0,cpuTime:0,query:g.createQueryEXT()}),C.calls++,g.beginQueryEXT(g.TIME_ELAPSED_EXT,C.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const h=this.context.extTimerQuery,g=h.createQueryEXT();this.deferredRenderGpuTimeQueries.push(g),h.beginQueryEXT(h.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;h.endQueryEXT(h.TIME_ELAPSED_EXT)}collectGpuTimers(){const h=this.gpuTimers;return this.gpuTimers={},h}collectDeferredRenderGpuQueries(){const h=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],h}queryGpuTimers(h){const g={};for(const C in h){const P=h[C],L=this.context.extTimerQuery,V=L.getQueryObjectEXT(P.query,L.QUERY_RESULT_EXT)/1e6;L.deleteQueryEXT(P.query),g[C]=V}return g}queryGpuTimeDeferredRender(h){if(!this.options.gpuTimingDeferredRender)return 0;const g=this.context.extTimerQuery;let C=0;for(const P of h)C+=g.getQueryObjectEXT(P,g.QUERY_RESULT_EXT)/1e6,g.deleteQueryEXT(P);return C}translatePosMatrix(h,g,C,P,L){if(!C[0]&&!C[1])return h;const V=L?P==="map"?this.transform.angle:0:P==="viewport"?-this.transform.angle:0;if(V){const oe=Math.sin(V),se=Math.cos(V);C=[C[0]*se-C[1]*oe,C[0]*oe+C[1]*se]}const G=[L?C[0]:Ot(g,C[0],this.transform.zoom),L?C[1]:Ot(g,C[1],this.transform.zoom),0],J=new Float32Array(16);return s.translate(J,h,G),J}saveTileTexture(h){const g=this._tileTextures[h.size[0]];g?g.push(h):this._tileTextures[h.size[0]]=[h]}getTileTexture(h){const g=this._tileTextures[h];return g&&g.length>0?g.pop():null}isPatternMissing(h){return h===null||h!==void 0&&!this.imageManager.getPattern(h.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const h=this.terrain&&this.terrain.renderingToTexture,g=this.terrain&&this.terrain.exaggeration()===0,C=this.style&&this.style.fog,P=[];return this.terrainRenderModeElevated()&&P.push("TERRAIN"),this.transform.projection.name==="globe"&&P.push("GLOBE"),g&&P.push("ZERO_EXAGGERATION"),C&&!h&&C.getOpacity(this.transform.pitch)!==0&&P.push("FOG"),h&&P.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&P.push("OVERDRAW_INSPECTOR"),P}useProgram(h,g,C){this.cache=this.cache||{};const P=C||[],L=this.currentGlobalDefines().concat(P),V=Ln.cacheKey($o[h],h,L,g);return this.cache[V]||(this.cache[V]=new Ln(this.context,h,$o[h],g,Rg[h],L)),this.cache[V]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const h=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(h.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(h,g,C){if(this.terrain&&this.terrain.renderingToTexture)return;const P=this.style.fog;if(P){const L=P.getOpacity(this.transform.pitch),V=((G,J,oe,se,me,Ie,Oe,ze,De,Ne,ge)=>{const Me=G.transform,We=J.properties.get("color").toArray01();We[3]=se;const qe=G.frameCounter/1e3%1;return{u_fog_matrix:oe?Me.calculateFogTileMatrix(oe):G.identityMat,u_fog_range:J.getFovAdjustedRange(Me._fov),u_fog_color:We,u_fog_horizon_blend:J.properties.get("horizon-blend"),u_fog_temporal_offset:qe,u_frustum_tl:me,u_frustum_tr:Ie,u_frustum_br:Oe,u_frustum_bl:ze,u_globe_pos:De,u_globe_radius:Ne,u_viewport:ge,u_globe_transition:s.globeToMercatorTransition(Me.zoom),u_is_globe:+(Me.projection.name==="globe")}})(this,P,C,L,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);g.setFogUniformValues(h,V)}}setTileLoadedFlag(h){this.tileLoaded=h}saveCanvasCopy(){const h=this.canvasCopy();h&&(this.frameCopies.push(h),this.tileLoaded=!1)}canvasCopy(){const h=this.context.gl,g=h.createTexture();return h.bindTexture(h.TEXTURE_2D,g),h.copyTexImage2D(h.TEXTURE_2D,0,h.RGBA,0,0,h.drawingBufferWidth,h.drawingBufferHeight,0),g}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const h=this.style&&this.style.fog;return!!h&&h.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const h=this._backgroundTiles,g=this._backgroundTiles={},C=this.transform.coveringTiles({tileSize:512});for(const P of C)g[P.key]=h[P.key]||new s.Tile(P,512,this.transform.tileZoom,this);return g}clearBackgroundTiles(){this._backgroundTiles={}}}class ip{constructor(h=0,g=0,C=0,P=0){if(isNaN(h)||h<0||isNaN(g)||g<0||isNaN(C)||C<0||isNaN(P)||P<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=h,this.bottom=g,this.left=C,this.right=P}interpolate(h,g,C){return g.top!=null&&h.top!=null&&(this.top=s.number(h.top,g.top,C)),g.bottom!=null&&h.bottom!=null&&(this.bottom=s.number(h.bottom,g.bottom,C)),g.left!=null&&h.left!=null&&(this.left=s.number(h.left,g.left,C)),g.right!=null&&h.right!=null&&(this.right=s.number(h.right,g.right,C)),this}getCenter(h,g){const C=s.clamp((this.left+h-this.right)/2,0,h),P=s.clamp((this.top+g-this.bottom)/2,0,g);return new s.Point(C,P)}equals(h){return this.top===h.top&&this.bottom===h.bottom&&this.left===h.left&&this.right===h.right}clone(){return new ip(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function sp(_,h){const g=s.getColumn(_,3);s.fromQuat(_,h),s.setColumn(_,3,g)}function On(_,h){const g=s.identity$1([]);return s.rotateZ$1(g,g,-h),s.rotateX$1(g,g,-_),g}function xd(_,h){const g=[_[0],_[1],0],C=[h[0],h[1],0];if(s.length(g)>=1e-15){const V=s.normalize([],g);s.scale$2(C,V,s.dot(C,V)),h[0]=C[0],h[1]=C[1]}const P=s.cross([],h,_);if(s.len(P)<1e-15)return null;const L=Math.atan2(-P[1],P[0]);return On(Math.atan2(Math.sqrt(_[0]*_[0]+_[1]*_[1]),-_[2]),L)}class x0{constructor(h,g){this.position=h,this.orientation=g}get position(){return this._position}set position(h){if(h){const g=h instanceof s.MercatorCoordinate?h:new s.MercatorCoordinate(h[0],h[1],h[2]);this._renderWorldCopies&&(g.x=s.wrap(g.x,0,1)),this._position=g}else this._position=null}lookAtPoint(h,g){if(this.orientation=null,!this.position)return;const C=this.position,P=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(h)):0,L=s.MercatorCoordinate.fromLngLat(h,P),V=[L.x-C.x,L.y-C.y,L.z-C.z];g||(g=[0,0,1]),g[2]=Math.abs(g[2]),this.orientation=xd(V,g)}setPitchBearing(h,g){this.orientation=On(s.degToRad(h),s.degToRad(-g))}}class op{constructor(h,g){this._transform=s.identity([]),this.orientation=g,this.position=h}get mercatorPosition(){const h=this.position;return new s.MercatorCoordinate(h[0],h[1],h[2])}get position(){const h=s.getColumn(this._transform,3);return[h[0],h[1],h[2]]}set position(h){var g;h&&s.setColumn(this._transform,3,[(g=h)[0],g[1],g[2],1])}get orientation(){return this._orientation}set orientation(h){this._orientation=h||s.identity$1([]),h&&sp(this._transform,this._orientation)}getPitchBearing(){const h=this.forward(),g=this.right();return{bearing:Math.atan2(-g[1],g[0]),pitch:Math.atan2(Math.sqrt(h[0]*h[0]+h[1]*h[1]),-h[2])}}setPitchBearing(h,g){this._orientation=On(h,g),sp(this._transform,this._orientation)}forward(){const h=s.getColumn(this._transform,2);return[-h[0],-h[1],-h[2]]}up(){const h=s.getColumn(this._transform,1);return[-h[0],-h[1],-h[2]]}right(){const h=s.getColumn(this._transform,0);return[h[0],h[1],h[2]]}getCameraToWorld(h,g){const C=new Float64Array(16);return s.invert(C,this.getWorldToCamera(h,g)),C}getWorldToCameraPosition(h,g,C){const P=this.position;s.scale$2(P,P,-h);const L=new Float64Array(16);return s.fromScaling(L,[C,C,C]),s.translate(L,L,P),L[10]*=g,L}getWorldToCamera(h,g){const C=new Float64Array(16),P=new Float64Array(4),L=this.position;return s.conjugate(P,this._orientation),s.scale$2(L,L,-h),s.fromQuat(C,P),s.translate(C,C,L),C[1]*=-1,C[5]*=-1,C[9]*=-1,C[13]*=-1,C[8]*=g,C[9]*=g,C[10]*=g,C[11]*=g,C}getCameraToClipPerspective(h,g,C,P){const L=new Float64Array(16);return s.perspective(L,h,g,C,P),L}getDistanceToElevation(h,g=!1){const C=h===0?0:s.mercatorZfromAltitude(h,g?s.latFromMercatorY(this.position[1]):this.position[1]),P=this.forward();return(C-this.position[2])/P[2]}clone(){return new op([...this.position],[...this.orientation])}}function Nu(_,h){const g=ap(_.projection,_.zoom,_.width,_.height),C=function(L,V,G,J,oe){const se=new s.LngLat(G.lng-180*pl,G.lat),me=new s.LngLat(G.lng+180*pl,G.lat),Ie=L.project(se.lng,se.lat),Oe=L.project(me.lng,me.lat),ze=-Math.atan2(Oe.y-Ie.y,Oe.x-Ie.x),De=s.MercatorCoordinate.fromLngLat(G);De.y=s.clamp(De.y,-1+pl,1-pl);const Ne=De.toLngLat(),ge=L.project(Ne.lng,Ne.lat),Me=s.MercatorCoordinate.fromLngLat(Ne);Me.x+=pl;const We=Me.toLngLat(),qe=L.project(We.lng,We.lat),st=lp(qe.x-ge.x,qe.y-ge.y,ze),lt=s.MercatorCoordinate.fromLngLat(Ne);lt.y+=pl;const at=lt.toLngLat(),pt=L.project(at.lng,at.lat),dt=lp(pt.x-ge.x,pt.y-ge.y,ze),Ct=Math.abs(st.x)/Math.abs(dt.y),Qt=s.identity([]);s.rotateZ(Qt,Qt,-ze*(1-(oe?0:J)));const _t=s.identity([]);return s.scale(_t,_t,[1,1-(1-Ct)*J,1]),_t[4]=-dt.x/dt.y*J,s.rotateZ(_t,_t,ze),s.multiply(_t,Qt,_t),_t}(_.projection,0,_.center,g,h),P=v0(_);return s.scale(C,C,[P,P,1]),C}function v0(_){const h=_.projection,g=ap(_.projection,_.zoom,_.width,_.height),C=b0(h,_.center),P=b0(h,s.LngLat.convert(h.center));return Math.pow(2,C*g+(1-g)*P)}function ap(_,h,g,C,P=1/0){const L=_.range;if(!L)return 0;const V=Math.min(P,Math.max(g,C)),G=Math.log(V/1024)/Math.LN2;return s.smoothstep(L[0]+G,L[1]+G,h)}const pl=1/4e4;function b0(_,h){const g=s.clamp(h.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),C=new s.LngLat(h.lng-180*pl,g),P=new s.LngLat(h.lng+180*pl,g),L=_.project(C.lng,g),V=_.project(P.lng,g),G=s.MercatorCoordinate.fromLngLat(C),J=s.MercatorCoordinate.fromLngLat(P),oe=V.x-L.x,se=V.y-L.y,me=J.x-G.x,Ie=J.y-G.y,Oe=Math.sqrt((me*me+Ie*Ie)/(oe*oe+se*se));return Math.log(Oe)/Math.LN2}function lp(_,h,g){const C=Math.cos(g),P=Math.sin(g);return{x:_*C-h*P,y:_*P+h*C}}class ju{constructor(h,g,C,P,L,V,G){this.tileSize=512,this._renderWorldCopies=L===void 0||L,this._minZoom=h||0,this._maxZoom=g||22,this._minPitch=C??0,this._maxPitch=P??60,this.setProjection(V),this.setMaxBounds(G),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ip,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new op,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const h=new ju(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return h._elevation=this._elevation,h._centerAltitude=this._centerAltitude,h._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,h.tileSize=this.tileSize,h.mercatorFromTransition=this.mercatorFromTransition,h.width=this.width,h.height=this.height,h.cameraElevationReference=this.cameraElevationReference,h._center=this._center,h._setZoom(this.zoom),h._seaLevelZoom=this._seaLevelZoom,h.angle=this.angle,h._fov=this._fov,h._pitch=this._pitch,h._nearZ=this._nearZ,h._farZ=this._farZ,h._averageElevation=this._averageElevation,h._unmodified=this._unmodified,h._edgeInsets=this._edgeInsets.clone(),h._camera=this._camera.clone(),h._calcMatrices(),h.freezeTileCoverage=this.freezeTileCoverage,h.frustumCorners=this.frustumCorners,h}get elevation(){return this._elevation}set elevation(h){this._elevation!==h&&(this._elevation=h,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(h,g=!1){const C=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||C)&&this._updateCameraOnTerrain(),(h||C)&&this._constrainCamera(g),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(h){this.projectionOptions=h||{name:"mercator"};const g=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const C=!k(g,this.getProjection());return C&&this._calcMatrices(),this.mercatorFromTransition=!1,C}setMercatorFromTransition(){const h=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const g=h!==this.projection.name;return g&&this._calcMatrices(),g}get minZoom(){return this._minZoom}set minZoom(h){this._minZoom!==h&&(this._minZoom=h,this.zoom=Math.max(this.zoom,h))}get maxZoom(){return this._maxZoom}set maxZoom(h){this._maxZoom!==h&&(this._maxZoom=h,this.zoom=Math.min(this.zoom,h))}get minPitch(){return this._minPitch}set minPitch(h){this._minPitch!==h&&(this._minPitch=h,this.pitch=Math.max(this.pitch,h))}get maxPitch(){return this._maxPitch}set maxPitch(h){this._maxPitch!==h&&(this._maxPitch=h,this.pitch=Math.min(this.pitch,h))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(h){h===void 0?h=!0:h===null&&(h=!1),this._renderWorldCopies=h}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get cameraWorldSize(){const h=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(h))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(h){this.rotation=h}get rotation(){return-this.angle/Math.PI*180}set rotation(h){const g=-h*Math.PI/180;var C;this.angle!==g&&(this._unmodified=!1,this.angle=g,this._calcMatrices(),this.rotationMatrix=(C=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C),function(P,L,V){var G=L[0],J=L[1],oe=L[2],se=L[3],me=Math.sin(V),Ie=Math.cos(V);P[0]=G*Ie+oe*me,P[1]=J*Ie+se*me,P[2]=G*-me+oe*Ie,P[3]=J*-me+se*Ie}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(h){const g=s.clamp(h,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==g&&(this._unmodified=!1,this._pitch=g,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const h=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/h)}set fov(h){h=Math.max(.01,Math.min(60,h)),this._fov!==h&&(this._unmodified=!1,this._fov=s.degToRad(h),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(h){this._averageElevation=h,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(h){const g=Math.min(Math.max(h,this.minZoom),this.maxZoom);this._zoom!==g&&(this._unmodified=!1,this._setZoom(g),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(h){this._zoom=h,this.scale=this.zoomScale(h),this.tileZoom=Math.floor(h),this.zoomFraction=h-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const h=this._elevation;this._centerAltitude=h.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=h.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const h=this._elevation,g=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],C=this.horizonLineFromTop();let P=0,L=0;for(let V=0;V<g.length;V++){const G=new s.Point(g[V][0]*this.width,C+g[V][1]*(this.height-C)),J=h.pointCoordinate(G);if(!J)continue;const oe=1/Math.hypot(J[0]-this._camera.position[0],J[1]-this._camera.position[1]);P+=J[3]*oe,L+=oe}return L===0?NaN:P/L}get center(){return this._center}set center(h){h.lat===this._center.lat&&h.lng===this._center.lng||(this._unmodified=!1,this._center=h,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const h=this._seaLevelZoom,g=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),C=this.pixelsPerMeter/this.worldSize*g,P=this._mercatorZfromZoom(h),L=this._mercatorZfromZoom(this._maxZoom),V=Math.max(P-C,L);this._setZoom(this._zoomFromMercatorZ(V))}get padding(){return this._edgeInsets.toJSON()}set padding(h){this._edgeInsets.equals(h)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,h,1),this._calcMatrices())}computeZoomRelativeTo(h){const g=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,h.toAltitude()));let C;C=h.z<this._camera.position[2]?[g.x,g.y,g.z]:[h.x,h.y,h.z];const P=s.length(s.sub([],this._camera.position,C));return s.clamp(this._zoomFromMercatorZ(P),this._minZoom,this._maxZoom)}setFreeCameraOptions(h){if(!this.height||!h.position&&!h.orientation)return;this._updateCameraState();let g=!1;if(h.orientation&&!s.exactEquals(h.orientation,this._camera.orientation)&&(g=this._setCameraOrientation(h.orientation)),h.position){const C=[h.position.x,h.position.y,h.position.z];s.exactEquals$1(C,this._camera.position)||(this._setCameraPosition(C),g=!0)}g&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const h=this._camera.position,g=new x0;return g.position=new s.MercatorCoordinate(h[0],h[1],h[2]),g.orientation=this._camera.orientation,g._elevation=this.elevation,g._renderWorldCopies=this.renderWorldCopies,g}_setCameraOrientation(h){if(!s.length$1(h))return!1;s.normalize$1(h,h);const g=s.transformQuat([],[0,0,-1],h),C=s.transformQuat([],[0,-1,0],h);if(C[2]<0)return!1;const P=xd(g,C);return!!P&&(this._camera.orientation=P,!0)}_setCameraPosition(h){const g=this.zoomScale(this.minZoom)*this.tileSize,C=this.zoomScale(this.maxZoom)*this.tileSize,P=this.cameraToCenterDistance;h[2]=s.clamp(h[2],P/C,P/g),this._camera.position=h}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(h){return this._edgeInsets.equals(h)}interpolatePadding(h,g,C){this._unmodified=!1,this._edgeInsets.interpolate(h,g,C),this._constrain(),this._calcMatrices()}coveringZoomLevel(h){const g=(h.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/h.tileSize));return Math.max(0,g)}getVisibleUnwrappedCoordinates(h){const g=[new s.UnwrappedTileID(0,h)];if(this.renderWorldCopies){const C=this.pointCoordinate(new s.Point(0,0)),P=this.pointCoordinate(new s.Point(this.width,0)),L=this.pointCoordinate(new s.Point(this.width,this.height)),V=this.pointCoordinate(new s.Point(0,this.height)),G=Math.floor(Math.min(C.x,P.x,L.x,V.x)),J=Math.floor(Math.max(C.x,P.x,L.x,V.x)),oe=1;for(let se=G-oe;se<=J+oe;se++)se!==0&&g.push(new s.UnwrappedTileID(se,h))}return g}coveringTiles(h){let g=this.coveringZoomLevel(h);const C=g,P=this.elevation&&!h.isTerrainDEM,L=this.projection.name==="mercator";if(h.minzoom!==void 0&&g<h.minzoom)return[];h.maxzoom!==void 0&&g>h.maxzoom&&(g=h.maxzoom);const V=this.locationCoordinate(this.center),G=this.center.lat,J=1<<g,oe=[J*V.x,J*V.y,0],se=this.projection.name==="globe",me=!se,Ie=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g,me),Oe=se?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ze=J*s.mercatorZfromAltitude(1,this.center.lat),De=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Ne=[J*Oe.x,J*Oe.y,De*(me?1:ze)],ge=this.cameraToCenterDistance/h.tileSize*(h.roundZoom?1:.502),Me=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?g:0,We=h.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,qe=h.isTerrainDEM?-We:this._elevation?this._elevation.getMinElevationBelowMSL():0,st=this.projection.isReprojectedInTileSpace?v0(this):1,lt=St=>{const rr=new s.MercatorCoordinate(St.x+25e-6,St.y,St.z),Ht=new s.MercatorCoordinate(St.x,St.y+25e-6,St.z),sr=St.toLngLat(),zr=rr.toLngLat(),sn=Ht.toLngLat(),Ir=this.locationCoordinate(sr),Wr=this.locationCoordinate(zr),vn=this.locationCoordinate(sn),yn=Math.hypot(Wr.x-Ir.x,Wr.y-Ir.y),Lr=Math.hypot(vn.x-Ir.x,vn.y-Ir.y);return Math.sqrt(yn*Lr)*st/25e-6},at=St=>{const jt=We,rr=qe;return{aabb:s.tileAABB(this,J,0,0,0,St,rr,jt,this.projection),zoom:0,x:0,y:0,minZ:rr,maxZ:jt,wrap:St,fullyVisible:!1}},pt=[];let dt=[];const Ct=g,Qt=h.reparseOverscaled?C:g,_t=St=>St*St,Ft=_t((De-this._centerAltitude)*ze),At=St=>{if(!this._elevation||!St.tileID||!L)return;const jt=this._elevation.getMinMaxForTile(St.tileID),rr=St.aabb;jt?(rr.min[2]=jt.min,rr.max[2]=jt.max,rr.center[2]=(rr.min[2]+rr.max[2])/2):(St.shouldSplit=Jt(St),St.shouldSplit||(rr.min[2]=rr.max[2]=rr.center[2]=this._centerAltitude))},Jt=St=>{if(St.zoom<Me)return!0;if(St.zoom===Ct)return!1;if(St.shouldSplit!=null)return St.shouldSplit;const jt=St.aabb.distanceX(Ne),rr=St.aabb.distanceY(Ne);let Ht=Ft,sr=1;if(se){Ht=_t(St.aabb.distanceZ(Ne));const Ir=Math.pow(2,St.zoom),Wr=s.latFromMercatorY((St.y+1)/Ir),vn=s.latFromMercatorY(St.y/Ir),yn=Math.min(Math.max(G,Wr),vn),Lr=s.circumferenceAtLatitude(yn)/s.circumferenceAtLatitude(G);if(sr=yn===G?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Lr/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&St.zoom===Ct-1&&Lr>=.9)return!0}else if(P&&(Ht=_t(St.aabb.distanceZ(Ne)*ze)),this.projection.isReprojectedInTileSpace&&C<=5){const Ir=Math.pow(2,St.zoom),Wr=lt(new s.MercatorCoordinate((St.x+.5)/Ir,(St.y+.5)/Ir));sr=Wr>.85?1:Wr}const zr=jt*jt+rr*rr+Ht,sn=_t((1<<Ct-St.zoom)*ge*sr*((Ir,Wr)=>{if(Wr*_t(.707)<Ir)return 1;const vn=Math.sqrt(Wr/Ir);return vn/(1.4144271570014144+(Math.pow(1.1,vn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Ht,Ft),zr));return zr<sn};if(this.renderWorldCopies)for(let St=1;St<=3;St++)pt.push(at(-St)),pt.push(at(St));for(pt.push(at(0));pt.length>0;){const St=pt.pop(),jt=St.x,rr=St.y;let Ht=St.fullyVisible;if(!Ht){const sr=St.aabb.intersects(Ie);if(sr===0)continue;Ht=sr===2}if(St.zoom!==Ct&&Jt(St))for(let sr=0;sr<4;sr++){const zr=(jt<<1)+sr%2,sn=(rr<<1)+(sr>>1),Ir={aabb:L?St.aabb.quadrant(sr):s.tileAABB(this,J,St.zoom+1,zr,sn,St.wrap,St.minZ,St.maxZ,this.projection),zoom:St.zoom+1,x:zr,y:sn,wrap:St.wrap,fullyVisible:Ht,tileID:void 0,shouldSplit:void 0,minZ:St.minZ,maxZ:St.maxZ};P&&!se&&(Ir.tileID=new s.OverscaledTileID(St.zoom+1===Ct?Qt:St.zoom+1,St.wrap,St.zoom+1,zr,sn),At(Ir)),pt.push(Ir)}else{const sr=St.zoom===Ct?Qt:St.zoom;if(h.minzoom&&h.minzoom>sr)continue;const zr=oe[0]-(.5+jt+(St.wrap<<St.zoom))*(1<<g-St.zoom),sn=oe[1]-.5-rr,Ir=St.tileID?St.tileID:new s.OverscaledTileID(sr,St.wrap,St.zoom,jt,rr);dt.push({tileID:Ir,distanceSq:zr*zr+sn*sn})}}if(this.fogCullDistSq){const St=this.fogCullDistSq,jt=this.horizonLineFromTop();dt=dt.filter(rr=>{const Ht=[0,0,0,1],sr=[s.EXTENT,s.EXTENT,0,1],zr=this.calculateFogTileMatrix(rr.tileID.toUnwrapped());s.transformMat4$1(Ht,Ht,zr),s.transformMat4$1(sr,sr,zr);const sn=s.getAABBPointSquareDist(Ht,sr);if(sn===0)return!0;let Ir=!1;const Wr=this._elevation;if(Wr&&sn>St&&jt!==0){const vn=this.calculateProjMatrix(rr.tileID.toUnwrapped());let yn;h.isTerrainDEM||(yn=Wr.getMinMaxForTile(rr.tileID)),yn||(yn={min:qe,max:We});const Lr=s.furthestTileCorner(this.rotation),Gn=[Lr[0]*s.EXTENT,Lr[1]*s.EXTENT,yn.max];s.transformMat4(Gn,Gn,vn),Ir=(1-Gn[1])*this.height*.5<jt}return sn<St||Ir})}return dt.sort((St,jt)=>St.distanceSq-jt.distanceSq).map(St=>St.tileID)}resize(h,g){this.width=h,this.height=g,this.pixelsToGLUnits=[2/h,-2/g],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(h){return Math.pow(2,h)}scaleZoom(h){return Math.log(h)/Math.LN2}project(h){const g=s.clamp(h.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),C=this.projection.project(h.lng,g);return new s.Point(C.x*this.worldSize,C.y*this.worldSize)}unproject(h){return this.projection.unproject(h.x/this.worldSize,h.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(h,g){let C,P;const L=this.centerPoint;if(this.projection.name==="globe"){const G=this.worldSize;C=(g.x-L.x)/G,P=(g.y-L.y)/G}else{const G=this.pointCoordinate(g),J=this.pointCoordinate(L);C=G.x-J.x,P=G.y-J.y}const V=this.locationCoordinate(h);this.setLocation(new s.MercatorCoordinate(V.x-C,V.y-P))}setLocation(h){this.center=this.coordinateLocation(h),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(h){return this.projection.locationPoint(this,h)}locationPoint3D(h){return this.projection.locationPoint(this,h,!0)}pointLocation(h){return this.coordinateLocation(this.pointCoordinate(h))}pointLocation3D(h){return this.coordinateLocation(this.pointCoordinate3D(h))}locationCoordinate(h,g){const C=g?s.mercatorZfromAltitude(g,h.lat):void 0,P=this.projection.project(h.lng,h.lat);return new s.MercatorCoordinate(P.x,P.y,C)}coordinateLocation(h){return this.projection.unproject(h.x,h.y)}pointRayIntersection(h,g){const C=g??this._centerAltitude,P=[h.x,h.y,0,1],L=[h.x,h.y,1,1];s.transformMat4$1(P,P,this.pixelMatrixInverse),s.transformMat4$1(L,L,this.pixelMatrixInverse);const V=L[3];s.scale$1(P,P,1/P[3]),s.scale$1(L,L,1/V);const G=P[2],J=L[2];return{p0:P,p1:L,t:G===J?0:(C-G)/(J-G)}}screenPointToMercatorRay(h){const g=[h.x,h.y,0,1],C=[h.x,h.y,1,1];return s.transformMat4$1(g,g,this.pixelMatrixInverse),s.transformMat4$1(C,C,this.pixelMatrixInverse),s.scale$1(g,g,1/g[3]),s.scale$1(C,C,1/C[3]),g[2]=s.mercatorZfromAltitude(g[2],this._center.lat)*this.worldSize,C[2]=s.mercatorZfromAltitude(C[2],this._center.lat)*this.worldSize,s.scale$1(g,g,1/this.worldSize),s.scale$1(C,C,1/this.worldSize),new s.Ray([g[0],g[1],g[2]],s.normalize([],s.sub([],C,g)))}rayIntersectionCoordinate(h){const{p0:g,p1:C,t:P}=h,L=s.mercatorZfromAltitude(g[2],this._center.lat),V=s.mercatorZfromAltitude(C[2],this._center.lat);return new s.MercatorCoordinate(s.number(g[0],C[0],P)/this.worldSize,s.number(g[1],C[1],P)/this.worldSize,s.number(L,V,P))}pointCoordinate(h,g=this._centerAltitude){return this.projection.pointCoordinate(this,h.x,h.y,g)}pointCoordinate3D(h){if(!this.elevation)return this.pointCoordinate(h);let g=this.projection.pointCoordinate3D(this,h.x,h.y);if(g)return new s.MercatorCoordinate(g[0],g[1],g[2]);let C=0,P=this.horizonLineFromTop();if(h.y>P)return this.pointCoordinate(h);const L=.02*P,V=h.clone();for(let G=0;G<10&&P-C>L;G++){V.y=s.number(C,P,.66);const J=this.projection.pointCoordinate3D(this,V.x,V.y);J?(P=V.y,g=J):C=V.y}return g?new s.MercatorCoordinate(g[0],g[1],g[2]):this.pointCoordinate(h)}isPointAboveHorizon(h){return this.projection.isPointAboveHorizon(this,h)}isPointOnSurface(h){if(h.y<0||h.y>this.height||h.x<0||h.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(h);const g=this.pointCoordinate(h);return g.y>=0&&g.y<=1}_coordinatePoint(h,g){const C=g&&this.elevation?this.elevation.getAtPointOrZero(h,this._centerAltitude):this._centerAltitude,P=[h.x*this.worldSize,h.y*this.worldSize,C+h.toAltitude(),1];return s.transformMat4$1(P,P,this.pixelMatrix),P[3]>0?new s.Point(P[0]/P[3],P[1]/P[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:h,left:g}=this._edgeInsets,C=this.height-this._edgeInsets.bottom,P=this.width-this._edgeInsets.right,L=this.pointLocation3D(new s.Point(g,h)),V=this.pointLocation3D(new s.Point(P,h)),G=this.pointLocation3D(new s.Point(P,C)),J=this.pointLocation3D(new s.Point(g,C));let oe=Math.min(L.lng,V.lng,G.lng,J.lng),se=Math.max(L.lng,V.lng,G.lng,J.lng),me=Math.min(L.lat,V.lat,G.lat,J.lat),Ie=Math.max(L.lat,V.lat,G.lat,J.lat);const Oe=Math.pow(2,-this.zoom)/16*270,ze=this.projection.name==="globe"?1:4,De=(Ne,ge,Me,We,qe)=>{const st=(Ne+Me)/2,lt=(ge+We)/2,at=new s.Point(st,lt),{lng:pt,lat:dt}=this.pointLocation3D(at),Ct=Math.max(0,oe-pt,me-dt,pt-se,dt-Ie);oe=Math.min(oe,pt),se=Math.max(se,pt),me=Math.min(me,dt),Ie=Math.max(Ie,dt),(qe<ze||Ct>Oe)&&(De(Ne,ge,st,lt,qe+1),De(st,lt,Me,We,qe+1))};if(De(g,h,P,h,1),De(P,h,P,C,1),De(P,C,g,C,1),De(g,C,g,h,1),this.projection.name==="globe"){const[Ne,ge]=s.polesInViewport(this);Ne?(Ie=90,se=180,oe=-180):ge&&(me=-90,se=180,oe=-180)}return new s.LngLatBounds(new s.LngLat(oe,me),new s.LngLat(se,Ie))}_getBoundsRectangular(h,g){const{top:C,left:P}=this._edgeInsets,L=this.height-this._edgeInsets.bottom,V=this.width-this._edgeInsets.right,G=new s.Point(P,C),J=new s.Point(V,C),oe=new s.Point(V,L),se=new s.Point(P,L);let me=this.pointCoordinate(G,h),Ie=this.pointCoordinate(J,h);const Oe=this.pointCoordinate(oe,g),ze=this.pointCoordinate(se,g),De=(Ne,ge)=>(ge.y-Ne.y)/(ge.x-Ne.x);return me.y>1&&Ie.y>=0?me=new s.MercatorCoordinate((1-ze.y)/De(ze,me)+ze.x,1):me.y<0&&Ie.y<=1&&(me=new s.MercatorCoordinate(-ze.y/De(ze,me)+ze.x,0)),Ie.y>1&&me.y>=0?Ie=new s.MercatorCoordinate((1-Oe.y)/De(Oe,Ie)+Oe.x,1):Ie.y<0&&me.y<=1&&(Ie=new s.MercatorCoordinate(-Oe.y/De(Oe,Ie)+Oe.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(me)).extend(this.coordinateLocation(Ie)).extend(this.coordinateLocation(ze)).extend(this.coordinateLocation(Oe))}_getBoundsRectangularTerrain(){const h=this.elevation;if(!h.visibleDemTiles.length||h.isUsingMockSource())return this._getBoundsRectangular(0,0);const g=h.visibleDemTiles.reduce((C,P)=>{if(P.dem){const L=P.dem.tree;C.min=Math.min(C.min,L.minimums[0]),C.max=Math.max(C.max,L.maximums[0])}return C},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(g.min*h.exaggeration(),g.max*h.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(h=!0){const g=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,C=this.height/2-g*(1-this._horizonShift);return h?Math.max(0,C):C}getMaxBounds(){return this.maxBounds}setMaxBounds(h){this.maxBounds=h,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,h&&(this.minLat=h.getSouth(),this.maxLat=h.getNorth(),this.minLng=h.getWest(),this.maxLng=h.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(h,g){return this.projection.createTileMatrix(this,g,h)}calculateDistanceTileData(h){const g=h.key,C=this._distanceTileDataCache;if(C[g])return C[g];const P=h.canonical,L=1/this.height,V=this.cameraWorldSize,G=V/this.zoomScale(P.z),J=(P.x+Math.pow(2,P.z)*h.wrap)*G,oe=P.y*G,se=this.point;se.x*=V/this.worldSize,se.y*=V/this.worldSize;const me=this.angle,Ie=Math.sin(-me),Oe=-Math.cos(-me);return C[g]={bearing:[Ie,Oe],center:[(se.x-J)*L,(se.y-oe)*L],scale:G/s.EXTENT*L},C[g]}calculateFogTileMatrix(h){const g=h.key,C=this._fogTileMatrixCache;if(C[g])return C[g];const P=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,h);return s.multiply(P,this.worldToFogMatrix,P),C[g]=new Float32Array(P),C[g]}calculateProjMatrix(h,g=!1){const C=h.key,P=g?this._alignedProjMatrixCache:this._projMatrixCache;if(P[C])return P[C];const L=this.calculatePosMatrix(h,this.worldSize);return s.multiply(L,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.alignedProjMatrix:this.projMatrix,L),P[C]=new Float32Array(L),P[C]}calculatePixelsToTileUnitsMatrix(h){const g=h.tileID.key,C=this._pixelsToTileUnitsCache;if(C[g])return C[g];const P=function(L,V){const{scale:G}=L.tileTransform,J=G*s.EXTENT/(L.tileSize*Math.pow(2,V.zoom-L.tileID.overscaledZ+L.tileID.canonical.z));return oe=new Float32Array(4),Ie=(se=V.inverseAdjustmentMatrix)[1],Oe=se[2],ze=se[3],Ne=(me=[J,J])[1],oe[0]=se[0]*(De=me[0]),oe[1]=Ie*De,oe[2]=Oe*Ne,oe[3]=ze*Ne,oe;var oe,se,me,Ie,Oe,ze,De,Ne}(h,this);return C[g]=P,C[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const h=1/this.worldSize,g=s.fromScaling([],[h,h,h]);return s.multiply(g,g,this.globeMatrix),g}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const h=this._elevation;this._updateCameraState();const g=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,C=this._computeCameraPosition(g),P=this._camera.forward(),L=s.mercatorZfromAltitude(1,this._center.lat);C[2]/=L,P[2]/=L,s.normalize(P,P);const V=h.raycast(C,P,h.exaggeration());if(V){const G=s.scaleAndAdd([],C,P,V),J=new s.MercatorCoordinate(G[0],G[1],s.mercatorZfromAltitude(G[2],s.latFromMercatorY(G[1]))),oe=(J.z+s.length([J.x-C[0],J.y-C[1],J.z-C[2]*L]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(oe),this._centerAltitude=J.toAltitude(),this._center=this.coordinateLocation(J),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(h=!1){if(!this._elevation)return;const g=this._elevation,C=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,P=this._computeCameraPosition(C),L=g.getAtPointOrZero(new s.MercatorCoordinate(...P)),V=this.pixelsPerMeter/this.worldSize*L,G=this._minimumHeightOverTerrain(),J=P[2]-V;if(J<=G)if(J<0||h){const oe=this.locationCoordinate(this._center,this._centerAltitude),se=[P[0],P[1],oe.z-P[2]],me=s.length(se);se[2]-=(G-J)/this._pixelsPerMercatorPixel;const Ie=s.length(se);if(Ie===0)return;s.scale$2(se,se,me/Ie*this._pixelsPerMercatorPixel),this._camera.position=[P[0],P[1],oe.z*this._pixelsPerMercatorPixel-se[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const h=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||h){const Ie=this.center;return Ie.lat=s.clamp(Ie.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!h)&&(Ie.lng=s.clamp(Ie.lng,this.minLng,this.maxLng)),this.center=Ie,void(this._constraining=!1)}const g=this._unmodified,{x:C,y:P}=this.point;let L=0,V=C,G=P;const J=this.width/2,oe=this.height/2,se=this.worldMinY*this.scale,me=this.worldMaxY*this.scale;if(P-oe<se&&(G=se+oe),P+oe>me&&(G=me-oe),me-se<this.height&&(L=Math.max(L,this.height/(me-se)),G=(me+se)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Ie=this.worldMinX*this.scale,Oe=this.worldMaxX*this.scale,ze=this.worldSize/2-(Ie+Oe)/2;V=(C+ze+this.worldSize)%this.worldSize-ze,V-J<Ie&&(V=Ie+J),V+J>Oe&&(V=Oe-J),Oe-Ie<this.width&&(L=Math.max(L,this.width/(Oe-Ie)),V=(Oe+Ie)/2)}V===C&&G===P||(this.center=this.unproject(new s.Point(V,G))),L&&(this.zoom+=this.scaleZoom(L)),this._constrainCamera(),this._unmodified=g,this._constraining=!1}_minZoomForBounds(){let h=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(h=Math.max(h,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),h}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const h=this.centerOffset,g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const C=ap(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,C),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const P=this.projection.zAxisUnit==="meters"?g:1,L=this._camera.getWorldToCamera(this.worldSize,P),V=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);V[8]=2*-h.x/this.width,V[9]=2*h.y/this.height;let G=s.mul([],V,L);if(this.projection.isReprojectedInTileSpace){const lt=this.locationCoordinate(this.center),at=s.identity([]);s.translate(at,at,[lt.x*this.worldSize,lt.y*this.worldSize,0]),s.multiply(at,at,Nu(this)),s.translate(at,at,[-lt.x*this.worldSize,-lt.y*this.worldSize,0]),s.multiply(G,G,at),this.inverseAdjustmentMatrix=function(pt){const dt=Nu(pt,!0);return Pe([],[dt[0],dt[1],dt[4],dt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],G,[this.worldSize,this.worldSize,this.worldSize/P,1]),this.projMatrix=G,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const J=s.invert([],V);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(J,this.horizonLineFromTop(),this.height);const oe=new Float32Array(16);s.identity(oe),s.scale(oe,oe,[1,-1,1]),s.rotateX(oe,oe,this._pitch),s.rotateZ(oe,oe,this.angle);const se=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),me=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;se[8]=2*-h.x/this.width,se[9]=2*(h.y+me)/this.height,this.skyboxMatrix=s.multiply(oe,se,oe);const Ie=this.point,Oe=Ie.x,ze=Ie.y,De=this.width%2/2,Ne=this.height%2/2,ge=Math.cos(this.angle),Me=Math.sin(this.angle),We=Oe-Math.round(Oe)+ge*De+Me*Ne,qe=ze-Math.round(ze)+ge*Ne+Me*De,st=new Float64Array(G);if(s.translate(st,st,[We>.5?We-1:We,qe>.5?qe-1:qe,0]),this.alignedProjMatrix=st,G=s.create(),s.scale(G,G,[this.width/2,-this.height/2,1]),s.translate(G,G,[1,-1,0]),this.labelPlaneMatrix=G,G=s.create(),s.scale(G,G,[1,-1,1]),s.translate(G,G,[-1,-1,0]),s.scale(G,G,[2/this.width,2/this.height,1]),this.glCoordMatrix=G,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},G=s.invert(new Float64Array(16),this.pixelMatrix),!G)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=G,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const lt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(lt,lt,L),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=G;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const h=this.cameraWorldSizeForFog,g=this.cameraPixelsPerMeter,C=this._camera.position,P=1/this.height/this._pixelsPerMercatorPixel,L=[h,h,g];s.scale$2(L,L,P),s.scale$2(C,C,-1),s.multiply$2(C,C,L);const V=s.create();s.translate(V,V,C),s.scale(V,V,L),this.mercatorFogMatrix=V,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(h,g,P)}_computeCameraPosition(h){const g=(h=h||this.pixelsPerMeter)/this.pixelsPerMeter,C=this._camera.forward(),P=this.point,L=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*g-h/this.worldSize*this._centerAltitude;return[P.x/this.worldSize-C[0]*L,P.y/this.worldSize-C[1]*L,h/this.worldSize*this._centerAltitude-C[2]*L]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(h){const g=this._maxCameraBoundsDistance()*Math.cos(this._pitch),C=this._camera.position[2],P=h[2];let L=1;this.projection.wrap&&(this.center=this.center.wrap()),P>0&&(L=Math.min((g-C)/P,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,h,L),this._updateStateFromCamera()}_updateStateFromCamera(){const h=this._camera.position,g=this._camera.forward(),{pitch:C,bearing:P}=this._camera.getPitchBearing(),L=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,V=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),G=Math.max((h[2]-L)/Math.cos(C),V),J=this._zoomFromMercatorZ(G);s.scaleAndAdd(h,h,g,G),this._pitch=s.clamp(C,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(P,-Math.PI,Math.PI),this._setZoom(s.clamp(J,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(h[0],h[1],h[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(h){return Math.pow(2,h)*this.tileSize}_mercatorZfromZoom(h){return this.cameraToCenterDistance/this._worldSizeFromZoom(h)}_minimumHeightOverTerrain(){const h=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(h)}_zoomFromMercatorZ(h){return this.scaleZoom(this.cameraToCenterDistance/(h*this.tileSize))}zoomFromMercatorZAdjusted(h){let g=0,C=s.GLOBE_ZOOM_THRESHOLD_MAX,P=0,L=1/0;for(;C-g>1e-6&&C>g;){const V=g+.5*(C-g),G=this.tileSize*Math.pow(2,V),J=this.getCameraToCenterDistance(this.projection,V,G),oe=this.scaleZoom(J/(h*this.tileSize)),se=Math.abs(V-oe);se<L&&(L=se,P=V),V<oe?g=V:C=V}return P}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(h,g){const C=Math.min(h.x,g.x),P=Math.max(h.x,g.x),L=Math.min(h.y,g.y),V=Math.max(h.y,g.y);if(L<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const G=[new s.Point(C,L),new s.Point(P,V),new s.Point(C,V),new s.Point(P,L)],J=this.renderWorldCopies?-3:0,oe=this.renderWorldCopies?4:1;for(const se of G){const me=this.pointRayIntersection(se);if(me.t<0)return!0;const Ie=this.rayIntersectionCoordinate(me);if(Ie.x<J||Ie.y<0||Ie.x>oe||Ie.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(h,g){const C=s.length(s.sub([],this._camera.position,h)),P=this._zoomFromMercatorZ(C)+g;return C-this._mercatorZfromZoom(P)}getCameraPoint(){if(this.projection.name==="globe"){const h=function([g,C,P],L){const V=[g,C,P,1];s.transformMat4$1(V,V,L);const G=V[3]=Math.max(V[3],1e-6);return V[0]/=G,V[1]/=G,V[2]/=G,V}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(h[0],h[1])}{const h=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,h))}}getCameraToCenterDistance(h,g=this.zoom,C=this.worldSize){const P=ap(h,g,this.width,this.height,1024),L=h.pixelSpaceConversion(this.center.lat,C,P);return .5/Math.tan(.5*this._fov)*this.height*L}getWorldToCameraMatrix(){const h=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(h,h,this.globeMatrix),h}}function Fu(_,h){let g=!1,C=null;const P=()=>{C=null,g&&(_(),C=setTimeout(P,h),g=!1)};return()=>(g=!0,C||P(),C)}class Og{constructor(h){this._hashName=h&&encodeURIComponent(h),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Fu(this._updateHashUnthrottled.bind(this),300)}addTo(h){return this._map=h,s.window.addEventListener("hashchange",this._onHashChange,!1),h.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const h=this._map;if(!h)return"";const g=vd(h);if(this._hashName){const C=this._hashName;let P=!1;const L=s.window.location.hash.slice(1).split("&").map(V=>{const G=V.split("=")[0];return G===C?(P=!0,`${G}=${g}`):V}).filter(V=>V);return P||L.push(`${C}=${g}`),`#${L.join("&")}`}return`#${g}`}_getCurrentHash(){const h=s.window.location.hash.replace("#","");if(this._hashName){let g;return h.split("&").map(C=>C.split("=")).forEach(C=>{C[0]===this._hashName&&(g=C)}),(g&&g[1]||"").split("/")}return h.split("/")}_onHashChange(){const h=this._map;if(!h)return!1;const g=this._getCurrentHash();if(g.length>=3&&!g.some(C=>isNaN(C))){const C=h.dragRotate.isEnabled()&&h.touchZoomRotate.isEnabled()?+(g[3]||0):h.getBearing();return h.jumpTo({center:[+g[2],+g[1]],zoom:+g[0],bearing:C,pitch:+(g[4]||0)}),!0}return!1}_updateHashUnthrottled(){const h=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,h)}}function vd(_,h){const g=_.getCenter(),C=Math.round(100*_.getZoom())/100,P=Math.ceil((C*Math.LN2+Math.log(512/360/.5))/Math.LN10),L=Math.pow(10,P),V=Math.round(g.lng*L)/L,G=Math.round(g.lat*L)/L,J=_.getBearing(),oe=_.getPitch();let se=h?`/${V}/${G}/${C}`:`${C}/${G}/${V}`;return(J||oe)&&(se+="/"+Math.round(10*J)/10),oe&&(se+=`/${Math.round(oe)}`),se}const bd={linearity:.3,easing:s.bezier(0,0,.3,1)},cp=s.extend({deceleration:2500,maxSpeed:1400},bd),up=s.extend({deceleration:20,maxSpeed:1400},bd),Sr=s.extend({deceleration:1e3,maxSpeed:360},bd),_a=s.extend({deceleration:1e3,maxSpeed:90},bd);class _0{constructor(h){this._map=h,this.clear()}clear(){this._inertiaBuffer=[]}record(h){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:h})}_drainInertiaBuffer(){const h=this._inertiaBuffer,g=s.exported.now();for(;h.length>0&&g-h[0].time>160;)h.shift()}_onMoveEnd(h){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const g={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:L}of this._inertiaBuffer)g.zoom+=L.zoomDelta||0,g.bearing+=L.bearingDelta||0,g.pitch+=L.pitchDelta||0,L.panDelta&&g.pan._add(L.panDelta),L.around&&(g.around=L.around),L.pinchAround&&(g.pinchAround=L.pinchAround);const C=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,P={};if(g.pan.mag()){const L=wd(g.pan.mag(),C,s.extend({},cp,h||{}));P.offset=g.pan.mult(L.amount/g.pan.mag()),P.center=this._map.transform.center,_d(P,L)}if(g.zoom){const L=wd(g.zoom,C,up);P.zoom=this._map.transform.zoom+L.amount,_d(P,L)}if(g.bearing){const L=wd(g.bearing,C,Sr);P.bearing=this._map.transform.bearing+s.clamp(L.amount,-179,179),_d(P,L)}if(g.pitch){const L=wd(g.pitch,C,_a);P.pitch=this._map.transform.pitch+L.amount,_d(P,L)}if(P.zoom||P.bearing){const L=g.pinchAround===void 0?g.around:g.pinchAround;P.around=L?this._map.unproject(L):this._map.getCenter()}return this.clear(),P.noMoveStart=!0,P}}function _d(_,h){(!_.duration||_.duration<h.duration)&&(_.duration=h.duration,_.easing=h.easing)}function wd(_,h,g){const{maxSpeed:C,linearity:P,deceleration:L}=g,V=s.clamp(_*P/(h/1e3),-C,C),G=Math.abs(V)/(L*P);return{easing:g.easing,duration:1e3*G,amount:V*(G/2)}}class Ns extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,g,C,P={}){const L=de(g.getCanvasContainer(),C),V=g.unproject(L);super(h,s.extend({point:L,lngLat:V,originalEvent:C},P)),this._defaultPrevented=!1,this.target=g}}class Sd extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,g,C){const P=h==="touchend"?C.changedTouches:C.touches,L=Ae(g.getCanvasContainer(),P),V=L.map(J=>g.unproject(J)),G=L.reduce((J,oe,se,me)=>J.add(oe.div(me.length)),new s.Point(0,0));super(h,{points:L,point:G,lngLats:V,lngLat:g.unproject(G),originalEvent:C}),this._defaultPrevented=!1}}class hp extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(h,g,C){super(h,{originalEvent:C}),this._defaultPrevented=!1}}class Dg{constructor(h,g){this._map=h,this._clickTolerance=g.clickTolerance}reset(){this._mousedownPos=void 0}wheel(h){return this._firePreventable(new hp(h.type,this._map,h))}mousedown(h,g){return this._mousedownPos=g,this._firePreventable(new Ns(h.type,this._map,h))}mouseup(h){this._map.fire(new Ns(h.type,this._map,h))}preclick(h){const g=s.extend({},h);g.type="preclick",this._map.fire(new Ns(g.type,this._map,g))}click(h,g){this._mousedownPos&&this._mousedownPos.dist(g)>=this._clickTolerance||(this.preclick(h),this._map.fire(new Ns(h.type,this._map,h)))}dblclick(h){return this._firePreventable(new Ns(h.type,this._map,h))}mouseover(h){this._map.fire(new Ns(h.type,this._map,h))}mouseout(h){this._map.fire(new Ns(h.type,this._map,h))}touchstart(h){return this._firePreventable(new Sd(h.type,this._map,h))}touchmove(h){this._map.fire(new Sd(h.type,this._map,h))}touchend(h){this._map.fire(new Sd(h.type,this._map,h))}touchcancel(h){this._map.fire(new Sd(h.type,this._map,h))}_firePreventable(h){if(this._map.fire(h),h.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class dp{constructor(h){this._map=h}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(h){this._map.fire(new Ns(h.type,this._map,h))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ns("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(h){this._delayContextMenu?this._contextMenuEvent=h:this._map.fire(new Ns(h.type,this._map,h)),this._map.listens("contextmenu")&&h.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class w0{constructor(h,g){this._map=h,this._el=h.getCanvasContainer(),this._container=h.getContainer(),this._clickTolerance=g.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(h,g){this.isEnabled()&&h.shiftKey&&h.button===0&&(ie(),this._startPos=this._lastPos=g,this._active=!0)}mousemoveWindow(h,g){if(!this._active)return;const C=g,P=this._startPos,L=this._lastPos;if(!P||!L||L.equals(C)||!this._box&&C.dist(P)<this._clickTolerance)return;this._lastPos=C,this._box||(this._box=U("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",h));const V=Math.min(P.x,C.x),G=Math.max(P.x,C.x),J=Math.min(P.y,C.y),oe=Math.max(P.y,C.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${V}px,${J}px)`,this._box.style.width=G-V+"px",this._box.style.height=oe-J+"px")})}mouseupWindow(h,g){if(!this._active)return;const C=this._startPos,P=g;if(C&&h.button===0){if(this.reset(),he(),C.x!==P.x||C.y!==P.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:h})),{cameraAnimation:L=>L.fitScreenCoordinates(C,P,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",h)}}keydown(h){this._active&&h.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",h))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),W(),delete this._startPos,delete this._lastPos}_fireEvent(h,g){return this._map.fire(new s.Event(h,{originalEvent:g}))}}function fp(_,h){const g={};for(let C=0;C<_.length;C++)g[_[C].identifier]=h[C];return g}class Bu{constructor(h){this.reset(),this.numTouches=h.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(h,g,C){(this.centroid||C.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=h.timeStamp),C.length===this.numTouches&&(this.centroid=function(P){const L=new s.Point(0,0);for(const V of P)L._add(V);return L.div(P.length)}(g),this.touches=fp(C,g)))}touchmove(h,g,C){if(this.aborted||!this.centroid)return;const P=fp(C,g);for(const L in this.touches){const V=P[L];(!V||V.dist(this.touches[L])>30)&&(this.aborted=!0)}}touchend(h,g,C){if((!this.centroid||h.timeStamp-this.startTime>500)&&(this.aborted=!0),C.length===0){const P=!this.aborted&&this.centroid;if(this.reset(),P)return P}}}class zg{constructor(h){this.singleTap=new Bu(h),this.numTaps=h.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(h,g,C){this.singleTap.touchstart(h,g,C)}touchmove(h,g,C){this.singleTap.touchmove(h,g,C)}touchend(h,g,C){const P=this.singleTap.touchend(h,g,C);if(P){const L=h.timeStamp-this.lastTime<500,V=!this.lastTap||this.lastTap.dist(P)<30;if(L&&V||this.reset(),this.count++,this.lastTime=h.timeStamp,this.lastTap=P,this.count===this.numTaps)return this.reset(),P}}}class m2{constructor(){this._zoomIn=new zg({numTouches:1,numTaps:2}),this._zoomOut=new zg({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(h,g,C){this._zoomIn.touchstart(h,g,C),this._zoomOut.touchstart(h,g,C)}touchmove(h,g,C){this._zoomIn.touchmove(h,g,C),this._zoomOut.touchmove(h,g,C)}touchend(h,g,C){const P=this._zoomIn.touchend(h,g,C),L=this._zoomOut.touchend(h,g,C);return P?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:V.getZoom()+1,around:V.unproject(P)},{originalEvent:h})}):L?(this._active=!0,h.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:V=>V.easeTo({duration:300,zoom:V.getZoom()-1,around:V.unproject(L)},{originalEvent:h})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const S0={0:1,2:2};class $u{constructor(h){this.reset(),this._clickTolerance=h.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(h,g){return!1}_move(h,g){return{}}mousedown(h,g){if(this._lastPoint)return;const C=Te(h);this._correctButton(h,C)&&(this._lastPoint=g,this._eventButton=C)}mousemoveWindow(h,g){const C=this._lastPoint;if(C){if(h.preventDefault(),this._eventButton!=null&&function(P,L){const V=S0[L];return P.buttons===void 0||(P.buttons&V)!==V}(h,this._eventButton))this.reset();else if(this._moved||!(g.dist(C)<this._clickTolerance))return this._moved=!0,this._lastPoint=g,this._move(C,g)}}mouseupWindow(h){this._lastPoint&&Te(h)===this._eventButton&&(this._moved&&he(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ng extends $u{mousedown(h,g){super.mousedown(h,g),this._lastPoint&&(this._active=!0)}_correctButton(h,g){return g===0&&!h.ctrlKey}_move(h,g){return{around:g,panDelta:g.sub(h)}}}class jg extends $u{_correctButton(h,g){return g===0&&h.ctrlKey||g===2}_move(h,g){const C=.8*(g.x-h.x);if(C)return this._active=!0,{bearingDelta:C}}contextmenu(h){h.preventDefault()}}class Fg extends $u{_correctButton(h,g){return g===0&&h.ctrlKey||g===2}_move(h,g){const C=-.5*(g.y-h.y);if(C)return this._active=!0,{pitchDelta:C}}contextmenu(h){h.preventDefault()}}class pp{constructor(h,g){this._map=h,this._el=h.getCanvasContainer(),this._minTouches=1,this._clickTolerance=g.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(h,g,C){return this._calculateTransform(h,g,C)}touchmove(h,g,C){if(this._active&&!(C.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(C.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return h.cancelable&&h.preventDefault(),this._calculateTransform(h,g,C)}}touchend(h,g,C){this._calculateTransform(h,g,C),this._active&&C.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(h,g,C){C.length>0&&(this._active=!0);const P=fp(C,g),L=new s.Point(0,0),V=new s.Point(0,0);let G=0;for(const oe in P){const se=P[oe],me=this._touches[oe];me&&(L._add(se),V._add(se.sub(me)),G++,P[oe]=se)}if(this._touches=P,G<this._minTouches||!V.mag())return;const J=V.div(G);return this._sum._add(J),this._sum.mag()<this._clickTolerance?void 0:{around:L.div(G),panDelta:J}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Cd{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(h){}_move(h,g,C){return{}}touchstart(h,g,C){this._firstTwoTouches||C.length<2||(this._firstTwoTouches=[C[0].identifier,C[1].identifier],this._start([g[0],g[1]]))}touchmove(h,g,C){const P=this._firstTwoTouches;if(!P)return;h.preventDefault();const[L,V]=P,G=kd(C,g,L),J=kd(C,g,V);if(!G||!J)return;const oe=this._aroundCenter?null:G.add(J).div(2);return this._move([G,J],oe,h)}touchend(h,g,C){if(!this._firstTwoTouches)return;const[P,L]=this._firstTwoTouches,V=kd(C,g,P),G=kd(C,g,L);V&&G||(this._active&&he(),this.reset())}touchcancel(){this.reset()}enable(h){this._enabled=!0,this._aroundCenter=!!h&&h.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function kd(_,h,g){for(let C=0;C<_.length;C++)if(_[C].identifier===g)return h[C]}function Bg(_,h){return Math.log(_/h)/Math.LN2}class C0 extends Cd{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(h){this._startDistance=this._distance=h[0].dist(h[1])}_move(h,g){const C=this._distance;if(this._distance=h[0].dist(h[1]),this._active||!(Math.abs(Bg(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bg(this._distance,C),pinchAround:g}}}function $g(_,h){return 180*_.angleWith(h)/Math.PI}class k0 extends Cd{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(h){this._startVector=this._vector=h[0].sub(h[1]),this._minDiameter=h[0].dist(h[1])}_move(h,g){const C=this._vector;if(this._vector=h[0].sub(h[1]),C&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:$g(this._vector,C),pinchAround:g}}_isBelowThreshold(h){this._minDiameter=Math.min(this._minDiameter,h.mag());const g=25/(Math.PI*this._minDiameter)*360,C=this._startVector;if(!C)return!1;const P=$g(h,C);return Math.abs(P)<g}}function Wl(_){return Math.abs(_.y)>Math.abs(_.x)}class E0 extends Cd{constructor(h){super(),this._map=h}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(h){this._lastPoints=h,Wl(h[0].sub(h[1]))&&(this._valid=!1)}_move(h,g,C){const P=this._lastPoints;if(!P)return;const L=h[0].sub(P[0]),V=h[1].sub(P[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&C.touches.length<3||(this._valid=this.gestureBeginsVertically(L,V,C.timeStamp),!this._valid)?void 0:(this._lastPoints=h,this._active=!0,{pitchDelta:(L.y+V.y)/2*-.5})}gestureBeginsVertically(h,g,C){if(this._valid!==void 0)return this._valid;const P=h.mag()>=2,L=g.mag()>=2;if(!P&&!L)return;if(!P||!L)return this._firstMove==null&&(this._firstMove=C),C-this._firstMove<100&&void 0;const V=h.y>0==g.y>0;return Wl(h)&&Wl(g)&&V}}const T0={panStep:100,bearingStep:15,pitchStep:10};class g2{constructor(){const h=T0;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(h){if(h.altKey||h.ctrlKey||h.metaKey)return;let g=0,C=0,P=0,L=0,V=0;switch(h.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:h.shiftKey?C=-1:(h.preventDefault(),L=-1);break;case 39:h.shiftKey?C=1:(h.preventDefault(),L=1);break;case 38:h.shiftKey?P=1:(h.preventDefault(),V=-1);break;case 40:h.shiftKey?P=-1:(h.preventDefault(),V=1);break;default:return}return this._rotationDisabled&&(C=0,P=0),{cameraAnimation:G=>{const J=G.getZoom();G.easeTo({duration:300,easeId:"keyboardHandler",easing:A0,zoom:g?Math.round(J)+g*(h.shiftKey?2:1):J,bearing:G.getBearing()+C*this._bearingStep,pitch:G.getPitch()+P*this._pitchStep,offset:[-L*this._panStep,-V*this._panStep],center:G.getCenter()},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function A0(_){return _*(2-_)}const Ug=4.000244140625;class I0{constructor(h,g){this._map=h,this._el=h.getCanvasContainer(),this._handler=g,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(h){this._defaultZoomRate=h}setWheelZoomRate(h){this._wheelZoomRate=h}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(h){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!h&&h.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(h){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(h.ctrlKey||h.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let g=h.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*h.deltaY:h.deltaY;const C=s.exported.now(),P=C-(this._lastWheelEventTime||0);this._lastWheelEventTime=C,g!==0&&g%Ug==0?this._type="wheel":g!==0&&Math.abs(g)<4?this._type="trackpad":P>400?(this._type=null,this._lastValue=g,this._timeout=setTimeout(this._onTimeout,40,h)):this._type||(this._type=Math.abs(P*g)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,g+=this._lastValue)),h.shiftKey&&g&&(g/=4),this._type&&(this._lastWheelEvent=h,this._delta-=g,this._active||this._start(h)),h.preventDefault()}_onTimeout(h){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(h)}_start(h){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const g=de(this._el,h);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:g,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const h=this._map.transform;this._type==="wheel"&&h.projection.wrap&&(h._center.lng>=180||h._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const g=()=>h._terrainEnabled()&&this._aroundCoord?h.computeZoomRelativeTo(this._aroundCoord):h.zoom;if(this._delta!==0){const J=this._type==="wheel"&&Math.abs(this._delta)>Ug?this._wheelZoomRate:this._defaultZoomRate;let oe=2/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&oe!==0&&(oe=1/oe);const se=g(),me=Math.pow(2,se),Ie=typeof this._targetZoom=="number"?h.zoomScale(this._targetZoom):me;this._targetZoom=Math.min(h.maxZoom,Math.max(h.minZoom,h.scaleZoom(Ie*oe))),this._type==="wheel"&&(this._startZoom=se,this._easing=this._smoothOutEasing(200)),this._delta=0}const C=typeof this._targetZoom=="number"?this._targetZoom:g(),P=this._startZoom,L=this._easing;let V,G=!1;if(this._type==="wheel"&&P&&L){const J=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),oe=L(J);V=s.number(P,C,oe),J<1?this._frameId||(this._frameId=!0):G=!0}else V=C,G=!0;return this._active=!0,G&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!G,zoomDelta:V-g(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(h){let g=s.ease;if(this._prevEase){const C=this._prevEase,P=(s.exported.now()-C.start)/C.duration,L=C.easing(P+.01)-C.easing(P),V=.27/Math.sqrt(L*L+1e-4)*.01,G=Math.sqrt(.0729-V*V);g=s.bezier(V,G,.25,1)}return this._prevEase={start:s.exported.now(),duration:h,easing:g},g}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=U("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class P0{constructor(h,g){this._clickZoom=h,this._tapZoom=g}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class so{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(h,g){return h.preventDefault(),{cameraAnimation:C=>{C.easeTo({duration:300,zoom:C.getZoom()+(h.shiftKey?-1:1),around:C.unproject(g)},{originalEvent:h})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class y2{constructor(){this._tap=new zg({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(h,g,C){this._swipePoint||(this._tapTime&&h.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?C.length>0&&(this._swipePoint=g[0],this._swipeTouch=C[0].identifier):this._tap.touchstart(h,g,C))}touchmove(h,g,C){if(this._tapTime){if(this._swipePoint){if(C[0].identifier!==this._swipeTouch)return;const P=g[0],L=P.y-this._swipePoint.y;return this._swipePoint=P,h.preventDefault(),this._active=!0,{zoomDelta:L/128}}}else this._tap.touchmove(h,g,C)}touchend(h,g,C){this._tapTime?this._swipePoint&&C.length===0&&this.reset():this._tap.touchend(h,g,C)&&(this._tapTime=h.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class R0{constructor(h,g,C){this._el=h,this._mousePan=g,this._touchPan=C}enable(h){this._inertiaOptions=h||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class x2{constructor(h,g,C){this._pitchWithRotate=h.pitchWithRotate,this._mouseRotate=g,this._mousePitch=C}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class v2{constructor(h,g,C,P){this._el=h,this._touchZoom=g,this._touchRotate=C,this._tapDragZoom=P,this._rotationDisabled=!1,this._enabled=!0}enable(h){this._touchZoom.enable(h),this._rotationDisabled||this._touchRotate.enable(h),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const na=_=>_.zoom||_.drag||_.pitch||_.rotate;class M0 extends s.Event{}class b2{constructor(){this.constants=[1,1,.01],this.radius=0}setup(h,g){const C=s.sub([],g,h);this.radius=s.length(C[2]<0?s.div([],C,this.constants):[C[0],C[1],0])}projectRay(h){s.div(h,h,this.constants),s.normalize(h,h),s.mul$1(h,h,this.constants);const g=s.scale$2([],h,this.radius);if(g[2]>0){const C=s.scale$2([],[0,0,1],s.dot(g,[0,0,1])),P=s.scale$2([],s.normalize([],[g[0],g[1],0]),this.radius),L=s.add([],g,s.scale$2([],s.sub([],s.add([],P,C),g),2));g[0]=L[0],g[1]=L[1]}return g}}function wa(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Wa{constructor(h,g){this._map=h,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new _0(h),this._bearingSnap=g.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new b2,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(g),s.bindAll(["handleEvent","handleWindowEvent"],this);const C=this._el;this._listeners=[[C,"touchstart",{passive:!0}],[C,"touchmove",{passive:!1}],[C,"touchend",void 0],[C,"touchcancel",void 0],[C,"mousedown",void 0],[C,"mousemove",void 0],[C,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[C,"mouseover",void 0],[C,"mouseout",void 0],[C,"dblclick",void 0],[C,"click",void 0],[C,"keydown",{capture:!1}],[C,"keyup",void 0],[C,"wheel",{passive:!1}],[C,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[P,L,V]of this._listeners)P.addEventListener(L,P===s.window.document?this.handleWindowEvent:this.handleEvent,V)}destroy(){for(const[h,g,C]of this._listeners)h.removeEventListener(g,h===s.window.document?this.handleWindowEvent:this.handleEvent,C)}_addDefaultHandlers(h){const g=this._map,C=g.getCanvasContainer();this._add("mapEvent",new Dg(g,h));const P=g.boxZoom=new w0(g,h);this._add("boxZoom",P);const L=new m2,V=new so;g.doubleClickZoom=new P0(V,L),this._add("tapZoom",L),this._add("clickZoom",V);const G=new y2;this._add("tapDragZoom",G);const J=g.touchPitch=new E0(g);this._add("touchPitch",J);const oe=new jg(h),se=new Fg(h);g.dragRotate=new x2(h,oe,se),this._add("mouseRotate",oe,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const me=new Ng(h),Ie=new pp(g,h);g.dragPan=new R0(C,me,Ie),this._add("mousePan",me),this._add("touchPan",Ie,["touchZoom","touchRotate"]);const Oe=new k0,ze=new C0;g.touchZoomRotate=new v2(C,ze,Oe,G),this._add("touchRotate",Oe,["touchPan","touchZoom"]),this._add("touchZoom",ze,["touchPan","touchRotate"]),this._add("blockableMapEvent",new dp(g));const De=g.scrollZoom=new I0(g,this);this._add("scrollZoom",De,["mousePan"]);const Ne=g.keyboard=new g2;this._add("keyboard",Ne);for(const ge of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])h.interactive&&h[ge]&&g[ge].enable(h[ge])}_add(h,g,C){this._handlers.push({handlerName:h,handler:g,allowed:C}),this._handlersById[h]=g}stop(h){if(!this._updatingCamera){for(const{handler:g}of this._handlers)g.reset();this._inertia.clear(),this._fireEvents({},{},h),this._changes=[]}}isActive(){for(const{handler:h}of this._handlers)if(h.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!na(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(h,g,C){for(const P in h)if(P!==C&&(!g||g.indexOf(P)<0))return!0;return!1}handleWindowEvent(h){this.handleEvent(h,`${h.type}Window`)}_getMapTouches(h){const g=[];for(const C of h)this._el.contains(C.target)&&g.push(C);return g}handleEvent(h,g){this._updatingCamera=!0;const C=h.type==="renderFrame",P=C?void 0:h,L={needsRenderFrame:!1},V={},G={},J=h.touches?this._getMapTouches(h.touches):void 0,oe=J?Ae(this._el,J):C?void 0:de(this._el,h);for(const{handlerName:Ie,handler:Oe,allowed:ze}of this._handlers){if(!Oe.isEnabled())continue;let De;this._blockedByActive(G,ze,Ie)?Oe.reset():Oe[g||h.type]&&(De=Oe[g||h.type](h,oe,J),this.mergeHandlerResult(L,V,De,Ie,P),De&&De.needsRenderFrame&&this._triggerRenderFrame()),(De||Oe.isActive())&&(G[Ie]=Oe)}const se={};for(const Ie in this._previousActiveHandlers)G[Ie]||(se[Ie]=P);this._previousActiveHandlers=G,(Object.keys(se).length||wa(L))&&(this._changes.push([L,V,se]),this._triggerRenderFrame()),(Object.keys(G).length||wa(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:me}=L;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))}mergeHandlerResult(h,g,C,P,L){if(!C)return;s.extend(h,C);const V={handlerName:P,originalEvent:C.originalEvent||L};C.zoomDelta!==void 0&&(g.zoom=V),C.panDelta!==void 0&&(g.drag=V),C.pitchDelta!==void 0&&(g.pitch=V),C.bearingDelta!==void 0&&(g.rotate=V)}_applyChanges(){const h={},g={},C={};for(const[P,L,V]of this._changes)P.panDelta&&(h.panDelta=(h.panDelta||new s.Point(0,0))._add(P.panDelta)),P.zoomDelta&&(h.zoomDelta=(h.zoomDelta||0)+P.zoomDelta),P.bearingDelta&&(h.bearingDelta=(h.bearingDelta||0)+P.bearingDelta),P.pitchDelta&&(h.pitchDelta=(h.pitchDelta||0)+P.pitchDelta),P.around!==void 0&&(h.around=P.around),P.aroundCoord!==void 0&&(h.aroundCoord=P.aroundCoord),P.pinchAround!==void 0&&(h.pinchAround=P.pinchAround),P.noInertia&&(h.noInertia=P.noInertia),s.extend(g,L),s.extend(C,V);this._updateMapTransform(h,g,C),this._changes=[]}_updateMapTransform(h,g,C){const P=this._map,L=P.transform,V=Me=>[Me.x,Me.y,Me.z];if((Me=>{const We=this._eventsInProgress.drag;return We&&!this._handlersById[We.handlerName].isActive()})()&&!wa(h)){const Me=L.zoom;L.cameraElevationReference="sea",L.recenterOnTerrain(),L.cameraElevationReference="ground",Me!==L.zoom&&this._map._update(!0)}if(L._isCameraConstrained&&P._stop(!0),!wa(h))return void this._fireEvents(g,C,!0);let{panDelta:G,zoomDelta:J,bearingDelta:oe,pitchDelta:se,around:me,aroundCoord:Ie,pinchAround:Oe}=h;L._isCameraConstrained&&(J>0&&(J=0),L._isCameraConstrained=!1),Oe!==void 0&&(me=Oe),(J||(Me=>g[Me]&&!this._eventsInProgress[Me])("drag"))&&me&&(this._dragOrigin=V(L.pointCoordinate3D(me)),this._trackingEllipsoid.setup(L._camera.position,this._dragOrigin)),L.cameraElevationReference="sea",P._stop(!0),me=me||P.transform.centerPoint,oe&&(L.bearing+=oe),se&&(L.pitch+=se),L._updateCameraState();const ze=[0,0,0];if(G)if(L.projection.name==="mercator"){const Me=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(me).dir),We=this._trackingEllipsoid.projectRay(L.screenPointToMercatorRay(me.sub(G)).dir);ze[0]=We[0]-Me[0],ze[1]=We[1]-Me[1]}else{const Me=L.pointCoordinate(me);if(L.projection.name==="globe"){G=G.rotate(-L.angle);const We=L._pixelsPerMercatorPixel/L.worldSize;ze[0]=-G.x*s.mercatorScale(s.latFromMercatorY(Me.y))*We,ze[1]=-G.y*s.mercatorScale(L.center.lat)*We}else{const We=L.pointCoordinate(me.sub(G));Me&&We&&(ze[0]=We.x-Me.x,ze[1]=We.y-Me.y)}}const De=L.zoom,Ne=[0,0,0];if(J){const Me=V(Ie||L.pointCoordinate3D(me)),We={dir:s.normalize([],s.sub([],Me,L._camera.position))};if(We.dir[2]<0){const qe=L.zoomDeltaToMovement(Me,J);s.scale$2(Ne,We.dir,qe)}}const ge=s.add(ze,ze,Ne);L._translateCameraConstrained(ge),J&&Math.abs(L.zoom-De)>1e-4&&L.recenterOnTerrain(),L.cameraElevationReference="ground",this._map._update(),h.noInertia||this._inertia.record(h),this._fireEvents(g,C,!0)}_fireEvents(h,g,C){const P=na(this._eventsInProgress),L=na(h),V={};for(const se in h){const{originalEvent:me}=h[se];this._eventsInProgress[se]||(V[`${se}start`]=me),this._eventsInProgress[se]=h[se]}!P&&L&&this._fireEvent("movestart",L.originalEvent);for(const se in V)this._fireEvent(se,V[se]);L&&this._fireEvent("move",L.originalEvent);for(const se in h){const{originalEvent:me}=h[se];this._fireEvent(se,me)}const G={};let J;for(const se in this._eventsInProgress){const{handlerName:me,originalEvent:Ie}=this._eventsInProgress[se];this._handlersById[me].isActive()||(delete this._eventsInProgress[se],J=g[me]||Ie,G[`${se}end`]=J)}for(const se in G)this._fireEvent(se,G[se]);const oe=na(this._eventsInProgress);if(C&&(P||L)&&!oe){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),me=Ie=>Ie!==0&&-this._bearingSnap<Ie&&Ie<this._bearingSnap;se?(me(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:J})):(this._map.fire(new s.Event("moveend",{originalEvent:J})),me(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(h,g){this._map.fire(new s.Event(h,g?{originalEvent:g}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(h=>{this._frameId=void 0,this.handleEvent(new M0("renderFrame",{timeStamp:h})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Dc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class mp extends s.Evented{constructor(h,g){super(),this._moving=!1,this._zooming=!1,this.transform=h,this._bearingSnap=g.bearingSnap,this._respectPrefersReducedMotion=g.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(h,g){return this.jumpTo({center:h},g)}panBy(h,g,C){return h=s.Point.convert(h).mult(-1),this.panTo(this.transform.center,s.extend({offset:h},g),C)}panTo(h,g,C){return this.easeTo(s.extend({center:h},g),C)}getZoom(){return this.transform.zoom}setZoom(h,g){return this.jumpTo({zoom:h},g),this}zoomTo(h,g,C){return this.easeTo(s.extend({zoom:h},g),C)}zoomIn(h,g){return this.zoomTo(this.getZoom()+1,h,g),this}zoomOut(h,g){return this.zoomTo(this.getZoom()-1,h,g),this}getBearing(){return this.transform.bearing}setBearing(h,g){return this.jumpTo({bearing:h},g),this}getPadding(){return this.transform.padding}setPadding(h,g){return this.jumpTo({padding:h},g),this}rotateTo(h,g,C){return this.easeTo(s.extend({bearing:h},g),C)}resetNorth(h,g){return this.rotateTo(0,s.extend({duration:1e3},h),g),this}resetNorthPitch(h,g){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},h),g),this}snapToNorth(h,g){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(h,g):this}getPitch(){return this.transform.pitch}setPitch(h,g){return this.jumpTo({pitch:h},g),this}cameraForBounds(h,g){h=s.LngLatBounds.convert(h);const C=g&&g.bearing||0,P=g&&g.pitch||0,L=h.getNorthWest(),V=h.getSouthEast();return this._cameraForBounds(this.transform,L,V,C,P,g)}_extendCameraOptions(h){const g={top:0,bottom:0,right:0,left:0};if(typeof(h=s.extend({padding:g,offset:[0,0],maxZoom:this.transform.maxZoom},h)).padding=="number"){const C=h.padding;h.padding={top:C,bottom:C,right:C,left:C}}return h.padding=s.extend(g,h.padding),h}_minimumAABBFrustumDistance(h,g){const C=g.max[0]-g.min[0],P=g.max[1]-g.min[1];return C/P>h.aspect?C/(2*Math.tan(.5*h.fovX)*h.aspect):P/(2*Math.tan(.5*h.fovY)*h.aspect)}_cameraForBoundsOnGlobe(h,g,C,P,L,V){const G=h.clone(),J=this._extendCameraOptions(V);G.bearing=P,G.pitch=L;const oe=s.LngLat.convert(g),se=s.LngLat.convert(C),me=.5*(oe.lat+se.lat),Ie=.5*(oe.lng+se.lng),Oe=s.latLngToECEF(me,Ie),ze=s.normalize([],Oe),De=s.normalize([],s.cross([],ze,[0,1,0])),Ne=s.cross([],De,ze),ge=[De[0],De[1],De[2],0,Ne[0],Ne[1],Ne[2],0,ze[0],ze[1],ze[2],0,0,0,0,1],Me=[Oe,s.latLngToECEF(oe.lat,oe.lng),s.latLngToECEF(se.lat,oe.lng),s.latLngToECEF(se.lat,se.lng),s.latLngToECEF(oe.lat,se.lng),s.latLngToECEF(me,oe.lng),s.latLngToECEF(me,se.lng),s.latLngToECEF(oe.lat,Ie),s.latLngToECEF(se.lat,Ie)];let We=s.Aabb.fromPoints(Me.map(Ht=>[s.dot(De,Ht),s.dot(Ne,Ht),s.dot(ze,Ht)]));const qe=s.transformMat4([],We.center,ge);s.squaredLength(qe)===0&&s.set(qe,0,0,1),s.normalize(qe,qe),s.scale$2(qe,qe,s.GLOBE_RADIUS),G.center=s.ecefToLatLng(qe);const st=G.getWorldToCameraMatrix(),lt=s.invert(new Float64Array(16),st);We=s.Aabb.applyTransform(We,s.multiply([],st,ge)),s.transformMat4(qe,qe,st);const at=.5*(We.max[2]-We.min[2]),pt=this._minimumAABBFrustumDistance(G,We),dt=s.scale$2([],[0,0,1],at),Ct=s.add(dt,qe,dt),Qt=pt+(G.pitch===0?0:s.distance(qe,Ct)),_t=G.globeCenterInViewSpace,Ft=s.sub([],qe,[_t[0],_t[1],_t[2]]);s.normalize(Ft,Ft),s.scale$2(Ft,Ft,Qt);const At=s.add([],qe,Ft);s.transformMat4(At,At,lt);const Jt=s.earthRadius/s.GLOBE_RADIUS,St=s.length(At),jt=s.mercatorZfromAltitude(Math.max(St*Jt-s.earthRadius,Number.EPSILON),0),rr=Math.min(G.zoomFromMercatorZAdjusted(jt),J.maxZoom);return rr>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(G.setProjection({name:"mercator"}),G.zoom=rr,this._cameraForBounds(G,g,C,P,L,V)):{center:G.center,zoom:rr,bearing:P,pitch:L}}queryTerrainElevation(h,g){const C=this.transform.elevation;return C?(g=s.extend({},{exaggerated:!0},g),C.getAtPoint(s.MercatorCoordinate.fromLngLat(h),null,g.exaggerated)):null}_cameraForBounds(h,g,C,P,L,V){if(h.projection.name==="globe")return this._cameraForBoundsOnGlobe(h,g,C,P,L,V);const G=h.clone(),J=this._extendCameraOptions(V),oe=G.padding;G.bearing=P,G.pitch=L;const se=s.LngLat.convert(g),me=s.LngLat.convert(C),Ie=new s.LngLat(se.lng,me.lat),Oe=new s.LngLat(me.lng,se.lat),ze=G.project(se),De=G.project(me),Ne=this.queryTerrainElevation(se),ge=this.queryTerrainElevation(me),Me=this.queryTerrainElevation(Ie),We=this.queryTerrainElevation(Oe),qe=[[ze.x,ze.y,Math.min(Ne||0,ge||0,Me||0,We||0)],[De.x,De.y,Math.max(Ne||0,ge||0,Me||0,We||0)]];let st=s.Aabb.fromPoints(qe);const lt=G.getWorldToCameraMatrix(),at=s.invert(new Float64Array(16),lt);st=s.Aabb.applyTransform(st,lt);const pt=s.sub([],st.max,st.min),dt=oe.left||0,Ct=oe.right||0,Qt=oe.bottom||0,_t=oe.top||0,{left:Ft,right:At,top:Jt,bottom:St}=J.padding,jt=.5*(dt+Ct),rr=.5*(_t+Qt),Ht=Math.min(G.scaleZoom(G.scale*Math.min((G.width-(dt+Ct+Ft+At))/pt[0],(G.height-(Qt+_t+St+Jt))/pt[1])),J.maxZoom),sr=G.scale/G.zoomScale(Ht);st=new s.Aabb([st.min[0]-(Ft+jt)*sr,st.min[1]-(St+rr)*sr,st.min[2]],[st.max[0]+(At+jt)*sr,st.max[1]+(Jt+rr)*sr,st.max[2]]);const zr=.5*pt[2],sn=this._minimumAABBFrustumDistance(G,st),Ir=[0,0,1,0];s.transformMat4$1(Ir,Ir,lt),s.normalize$2(Ir,Ir);const Wr=s.scale$2([],Ir,sn+zr),vn=s.add([],st.center,Wr),yn=(typeof J.offset.x=="number"&&typeof J.offset.y=="number"?new s.Point(J.offset.x,J.offset.y):s.Point.convert(J.offset)).rotate(-s.degToRad(P));st.center[0]-=yn.x*sr,st.center[1]+=yn.y*sr,s.transformMat4(st.center,st.center,at),s.transformMat4(vn,vn,at);const Lr=[st.center[0],st.center[1],vn[2]*G.pixelsPerMeter];s.scale$2(Lr,Lr,1/G.worldSize);const Gn=s.lngFromMercatorX(Lr[0]),si=s.latFromMercatorY(Lr[1]),oi=Math.min(G._zoomFromMercatorZ(Lr[2]),J.maxZoom),ai=new s.LngLat(Gn,si);return G.mercatorFromTransition&&oi<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(G.setProjection({name:"globe"}),G.zoom=oi,this._cameraForBounds(G,g,C,P,L,V)):{center:ai,zoom:oi,bearing:P,pitch:L}}fitBounds(h,g,C){const P=this.cameraForBounds(h,g);return this._fitInternal(P,g,C)}fitScreenCoordinates(h,g,C,P,L){const V=s.Point.convert(h),G=s.Point.convert(g),J=new s.Point(Math.min(V.x,G.x),Math.min(V.y,G.y)),oe=new s.Point(Math.max(V.x,G.x),Math.max(V.y,G.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(V,G))return this;const se=this.transform.pointLocation3D(J),me=this.transform.pointLocation3D(oe),Ie=this.transform.pointLocation3D(new s.Point(J.x,oe.y)),Oe=this.transform.pointLocation3D(new s.Point(oe.x,J.y)),ze=[Math.min(se.lng,me.lng,Ie.lng,Oe.lng),Math.min(se.lat,me.lat,Ie.lat,Oe.lat)],De=[Math.max(se.lng,me.lng,Ie.lng,Oe.lng),Math.max(se.lat,me.lat,Ie.lat,Oe.lat)],Ne=P&&P.pitch?P.pitch:this.getPitch(),ge=this._cameraForBounds(this.transform,ze,De,C,Ne,P);return this._fitInternal(ge,P,L)}_fitInternal(h,g,C){return h?(delete(g=s.extend(h,g)).padding,g.linear?this.easeTo(g,C):this.flyTo(g,C)):this}jumpTo(h,g){this.stop();const C=h.preloadOnly?this.transform.clone():this.transform;let P=!1,L=!1,V=!1;return"zoom"in h&&C.zoom!==+h.zoom&&(P=!0,C.zoom=+h.zoom),h.center!==void 0&&(C.center=s.LngLat.convert(h.center)),"bearing"in h&&C.bearing!==+h.bearing&&(L=!0,C.bearing=+h.bearing),"pitch"in h&&C.pitch!==+h.pitch&&(V=!0,C.pitch=+h.pitch),h.padding==null||C.isPaddingEqual(h.padding)||(C.padding=h.padding),h.preloadOnly?(this._preloadTiles(C),this):(this.fire(new s.Event("movestart",g)).fire(new s.Event("move",g)),P&&this.fire(new s.Event("zoomstart",g)).fire(new s.Event("zoom",g)).fire(new s.Event("zoomend",g)),L&&this.fire(new s.Event("rotatestart",g)).fire(new s.Event("rotate",g)).fire(new s.Event("rotateend",g)),V&&this.fire(new s.Event("pitchstart",g)).fire(new s.Event("pitch",g)).fire(new s.Event("pitchend",g)),this.fire(new s.Event("moveend",g)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Dc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(h,g){const C=this.transform;if(!C.projection.supportsFreeCamera)return s.warnOnce(Dc),this;this.stop();const P=C.zoom,L=C.pitch,V=C.bearing;C.setFreeCameraOptions(h);const G=P!==C.zoom,J=L!==C.pitch,oe=V!==C.bearing;return this.fire(new s.Event("movestart",g)).fire(new s.Event("move",g)),G&&this.fire(new s.Event("zoomstart",g)).fire(new s.Event("zoom",g)).fire(new s.Event("zoomend",g)),oe&&this.fire(new s.Event("rotatestart",g)).fire(new s.Event("rotate",g)).fire(new s.Event("rotateend",g)),J&&this.fire(new s.Event("pitchstart",g)).fire(new s.Event("pitch",g)).fire(new s.Event("pitchend",g)),this.fire(new s.Event("moveend",g)),this}easeTo(h,g){this._stop(!1,h.easeId),((h=s.extend({offset:[0,0],duration:500,easing:s.ease},h)).animate===!1||this._prefersReducedMotion(h))&&(h.duration=0);const C=this.transform,P=this.getZoom(),L=this.getBearing(),V=this.getPitch(),G=this.getPadding(),J="zoom"in h?+h.zoom:P,oe="bearing"in h?this._normalizeBearing(h.bearing,L):L,se="pitch"in h?+h.pitch:V,me="padding"in h?h.padding:C.padding,Ie=s.Point.convert(h.offset);let Oe,ze,De;if(C.projection.name==="globe"){const dt=s.MercatorCoordinate.fromLngLat(C.center),Ct=Ie.rotate(-C.angle);dt.x+=Ct.x/C.worldSize,dt.y+=Ct.y/C.worldSize;const Qt=dt.toLngLat(),_t=s.LngLat.convert(h.center||Qt);this._normalizeCenter(_t),Oe=C.centerPoint.add(Ct),ze=new s.Point(dt.x,dt.y).mult(C.worldSize),De=new s.Point(s.mercatorXfromLng(_t.lng),s.mercatorYfromLat(_t.lat)).mult(C.worldSize).sub(ze)}else{Oe=C.centerPoint.add(Ie);const dt=C.pointLocation(Oe),Ct=s.LngLat.convert(h.center||dt);this._normalizeCenter(Ct),ze=C.project(dt),De=C.project(Ct).sub(ze)}const Ne=C.zoomScale(J-P);let ge,Me;h.around&&(ge=s.LngLat.convert(h.around),Me=C.locationPoint(ge));const We=this._zooming||J!==P,qe=this._rotating||L!==oe,st=this._pitching||se!==V,lt=!C.isPaddingEqual(me),at=dt=>Ct=>{if(We&&(dt.zoom=s.number(P,J,Ct)),qe&&(dt.bearing=s.number(L,oe,Ct)),st&&(dt.pitch=s.number(V,se,Ct)),lt&&(dt.interpolatePadding(G,me,Ct),Oe=dt.centerPoint.add(Ie)),ge)dt.setLocationAtPoint(ge,Me);else{const Qt=dt.zoomScale(dt.zoom-P),_t=J>P?Math.min(2,Ne):Math.max(.5,Ne),Ft=Math.pow(_t,1-Ct),At=dt.unproject(ze.add(De.mult(Ct*Ft)).mult(Qt));dt.setLocationAtPoint(dt.renderWorldCopies?At.wrap():At,Oe)}return h.preloadOnly||this._fireMoveEvents(g),dt};if(h.preloadOnly){const dt=this._emulate(at,h.duration,C);return this._preloadTiles(dt),this}const pt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=We,this._rotating=qe,this._pitching=st,this._padding=lt,this._easeId=h.easeId,this._prepareEase(g,h.noMoveStart,pt),this._ease(at(C),dt=>{C.recenterOnTerrain(),this._afterEase(g,dt)},h),this}_prepareEase(h,g,C={}){this._moving=!0,this.transform.cameraElevationReference="sea",g||C.moving||this.fire(new s.Event("movestart",h)),this._zooming&&!C.zooming&&this.fire(new s.Event("zoomstart",h)),this._rotating&&!C.rotating&&this.fire(new s.Event("rotatestart",h)),this._pitching&&!C.pitching&&this.fire(new s.Event("pitchstart",h))}_fireMoveEvents(h){this.fire(new s.Event("move",h)),this._zooming&&this.fire(new s.Event("zoom",h)),this._rotating&&this.fire(new s.Event("rotate",h)),this._pitching&&this.fire(new s.Event("pitch",h))}_afterEase(h,g){if(this._easeId&&g&&this._easeId===g)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const C=this._zooming,P=this._rotating,L=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,C&&this.fire(new s.Event("zoomend",h)),P&&this.fire(new s.Event("rotateend",h)),L&&this.fire(new s.Event("pitchend",h)),this.fire(new s.Event("moveend",h))}flyTo(h,g){if(this._prefersReducedMotion(h)){const Ht=s.pick(h,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ht,g)}this.stop(),h=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},h);const C=this.transform,P=this.getZoom(),L=this.getBearing(),V=this.getPitch(),G=this.getPadding(),J="zoom"in h?s.clamp(+h.zoom,C.minZoom,C.maxZoom):P,oe="bearing"in h?this._normalizeBearing(h.bearing,L):L,se="pitch"in h?+h.pitch:V,me="padding"in h?h.padding:C.padding,Ie=C.zoomScale(J-P),Oe=s.Point.convert(h.offset);let ze=C.centerPoint.add(Oe);const De=C.pointLocation(ze),Ne=s.LngLat.convert(h.center||De);this._normalizeCenter(Ne);const ge=C.project(De),Me=C.project(Ne).sub(ge);let We=h.curve;const qe=Math.max(C.width,C.height),st=qe/Ie,lt=Me.mag();if("minZoom"in h){const Ht=s.clamp(Math.min(h.minZoom,P,J),C.minZoom,C.maxZoom),sr=qe/C.zoomScale(Ht-P);We=Math.sqrt(sr/lt*2)}const at=We*We;function pt(Ht){const sr=(st*st-qe*qe+(Ht?-1:1)*at*at*lt*lt)/(2*(Ht?st:qe)*at*lt);return Math.log(Math.sqrt(sr*sr+1)-sr)}function dt(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Ct(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}const Qt=pt(0);let _t=function(Ht){return Ct(Qt)/Ct(Qt+We*Ht)},Ft=function(Ht){return qe*((Ct(Qt)*(dt(sr=Qt+We*Ht)/Ct(sr))-dt(Qt))/at)/lt;var sr},At=(pt(1)-Qt)/We;if(Math.abs(lt)<1e-6||!isFinite(At)){if(Math.abs(qe-st)<1e-6)return this.easeTo(h,g);const Ht=st<qe?-1:1;At=Math.abs(Math.log(st/qe))/We,Ft=function(){return 0},_t=function(sr){return Math.exp(Ht*We*sr)}}h.duration="duration"in h?+h.duration:1e3*At/("screenSpeed"in h?+h.screenSpeed/We:+h.speed),h.maxDuration&&h.duration>h.maxDuration&&(h.duration=0);const Jt=L!==oe,St=se!==V,jt=!C.isPaddingEqual(me),rr=Ht=>sr=>{const zr=sr*At,sn=1/_t(zr);Ht.zoom=sr===1?J:P+Ht.scaleZoom(sn),Jt&&(Ht.bearing=s.number(L,oe,sr)),St&&(Ht.pitch=s.number(V,se,sr)),jt&&(Ht.interpolatePadding(G,me,sr),ze=Ht.centerPoint.add(Oe));const Ir=sr===1?Ne:Ht.unproject(ge.add(Me.mult(Ft(zr))).mult(sn));return Ht.setLocationAtPoint(Ht.renderWorldCopies?Ir.wrap():Ir,ze),Ht._updateCameraOnTerrain(),h.preloadOnly||this._fireMoveEvents(g),Ht};if(h.preloadOnly){const Ht=this._emulate(rr,h.duration,C);return this._preloadTiles(Ht),this}return this._zooming=!0,this._rotating=Jt,this._pitching=St,this._padding=jt,this._prepareEase(g,!1),this._ease(rr(C),()=>this._afterEase(g),h),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(h,g){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const C=this._onEaseEnd;this._onEaseEnd=void 0,C.call(this,g)}if(!h){const C=this.handlers;C&&C.stop(!1)}return this}_ease(h,g,C){C.animate===!1||C.duration===0?(h(1),g()):(this._easeStart=s.exported.now(),this._easeOptions=C,this._onEaseFrame=h,this._onEaseEnd=g,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const h=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),g=this._onEaseFrame;g&&g(this._easeOptions.easing(h)),h<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(h,g){h=s.wrap(h,-180,180);const C=Math.abs(h-g);return Math.abs(h-360-g)<C&&(h-=360),Math.abs(h+360-g)<C&&(h+=360),h}_normalizeCenter(h){const g=this.transform;if(!g.renderWorldCopies||g.maxBounds)return;const C=h.lng-g.center.lng;h.lng+=C>180?-360:C<-180?360:0}_prefersReducedMotion(h){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(h&&h.essential)}_emulate(h,g,C){const P=Math.ceil(15*g/1e3),L=[],V=h(C.clone());for(let G=0;G<=P;G++){const J=V(G/P);L.push(J.clone())}return L}}class Ar{constructor(h={}){this.options=h,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(h){const g=this.options&&this.options.compact;return this._map=h,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=U("button","mapboxgl-ctrl-attrib-button",this._container),U("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),g&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),g===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(h,g){const C=this._map._getUIString(`AttributionControl.${g}`);h.setAttribute("aria-label",C),h.removeAttribute("title"),h.firstElementChild&&h.firstElementChild.setAttribute("title",C)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let h=this._editLink;h||(h=this._editLink=this._container.querySelector(".mapbox-improve-map"));const g=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(h){const C=g.reduce((P,L,V)=>(L.value&&(P+=`${L.key}=${L.value}${V<g.length-1?"&":""}`),P),"?");h.href=`${s.config.FEEDBACK_URL}/${C}#${vd(this._map,!0)}`,h.rel="noopener nofollow",this._setElementTitle(h,"MapFeedback")}}_updateData(h){!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let h=[];if(this._map.style.stylesheet){const P=this._map.style.stylesheet;this.styleOwner=P.owner,this.styleId=P.id}const g=this._map.style._sourceCaches;for(const P in g){const L=g[P];if(L.used){const V=L.getSource();V.attribution&&h.indexOf(V.attribution)<0&&h.push(V.attribution)}}h.sort((P,L)=>P.length-L.length),h=h.filter((P,L)=>{for(let V=L+1;V<h.length;V++)if(h[V].indexOf(P)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?h=[...this.options.customAttribution,...h]:h.unshift(this.options.customAttribution));const C=h.join(" | ");C!==this._attribHTML&&(this._attribHTML=C,h.length?(this._innerContainer.innerHTML=C,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Vg{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(h){this._map=h,this._container=U("div","mapboxgl-ctrl");const g=U("a","mapboxgl-ctrl-logo");return g.target="_blank",g.rel="noopener nofollow",g.href="https://www.mapbox.com/",g.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),g.setAttribute("rel","noopener nofollow"),this._container.appendChild(g),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(h){h&&h.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const h=this._map.style._sourceCaches;if(Object.entries(h).length===0)return!0;for(const g in h){const C=h[g].getSource();if(C.hasOwnProperty("mapbox_logo")&&!C.mapbox_logo)return!1}return!0}_updateCompact(){const h=this._container.children;if(h.length){const g=h[0];this._map.getCanvasContainer().offsetWidth<250?g.classList.add("mapboxgl-compact"):g.classList.remove("mapboxgl-compact")}}}class Hg{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(h){const g=++this._id;return this._queue.push({callback:h,id:g,cancelled:!1}),g}remove(h){const g=this._currentlyRunning,C=g?this._queue.concat(g):this._queue;for(const P of C)if(P.id===h)return void(P.cancelled=!0)}run(h=0){const g=this._currentlyRunning=this._queue;this._queue=[];for(const C of g)if(!C.cancelled&&(C.callback(h),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Uu(_,h,g){if(_=new s.LngLat(_.lng,_.lat),h){const C=new s.LngLat(_.lng-360,_.lat),P=new s.LngLat(_.lng+360,_.lat),L=360*Math.ceil(Math.abs(_.lng-g.center.lng)/360),V=g.locationPoint(_).distSqr(h),G=h.x<0||h.y<0||h.x>g.width||h.y>g.height;g.locationPoint(C).distSqr(h)<V&&(G||Math.abs(C.lng-g.center.lng)<L)?_=C:g.locationPoint(P).distSqr(h)<V&&(G||Math.abs(P.lng-g.center.lng)<L)&&(_=P)}for(;Math.abs(_.lng-g.center.lng)>180;){const C=g.locationPoint(_);if(C.x>=0&&C.y>=0&&C.x<=g.width&&C.y<=g.height)break;_.lng>g.center.lng?_.lng-=360:_.lng+=360}return _}const zc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class wr extends s.Evented{constructor(h,g){if(super(),(h instanceof s.window.HTMLElement||g)&&(h=s.extend({element:h},g)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=h&&h.anchor||"center",this._color=h&&h.color||"#3FB1CE",this._scale=h&&h.scale||1,this._draggable=h&&h.draggable||!1,this._clickTolerance=h&&h.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=h&&h.rotation||0,this._rotationAlignment=h&&h.rotationAlignment||"auto",this._pitchAlignment=h&&h.pitchAlignment&&h.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=h&&h.occludedOpacity||.2,h&&h.element)this._element=h.element,this._offset=s.Point.convert(h&&h.offset||[0,0]);else{this._defaultMarker=!0,this._element=U("div");const P=41,L=27,V=q("svg",{display:"block",height:P*this._scale+"px",width:L*this._scale+"px",viewBox:`0 0 ${L} ${P}`},this._element),G=q("radialGradient",{id:"shadowGradient"},q("defs",{},V));q("stop",{offset:"10%","stop-opacity":.4},G),q("stop",{offset:"100%","stop-opacity":.05},G),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},V),q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},V),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},V),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},V),this._offset=s.Point.convert(h&&h.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",P=>{P.preventDefault()}),this._element.addEventListener("mousedown",P=>{P.preventDefault()});const C=this._element.classList;for(const P in zc)C.remove(`mapboxgl-marker-anchor-${P}`);C.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(h){return h===this._map||(this.remove(),this._map=h,h.getCanvasContainer().appendChild(this._element),h.on("move",this._updateMoving),h.on("moveend",this._update),h.on("remove",this._clearFadeTimer),h._addMarker(this),this.setDraggable(this._draggable),this._update(),h.on("click",this._onMapClick)),this}remove(){const h=this._map;return h&&(h.off("click",this._onMapClick),h.off("move",this._updateMoving),h.off("moveend",this._update),h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler),h.off("mouseup",this._onUp),h.off("touchend",this._onUp),h.off("mousemove",this._onMove),h.off("touchmove",this._onMove),h.off("remove",this._clearFadeTimer),h._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=s.LngLat.convert(h),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(h){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),h){if(!("offset"in h.options)){const P=Math.sqrt(Math.pow(13.5,2)/2);h.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[P,-1*(38.1-13.5+P)],"bottom-right":[-P,-1*(38.1-13.5+P)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=h,h._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(h){const g=h.code,C=h.charCode||h.keyCode;g!=="Space"&&g!=="Enter"&&C!==32&&C!==13||this.togglePopup()}_onMapClick(h){const g=h.originalEvent.target,C=this._element;this._popup&&(g===C||C.contains(g))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const h=this._popup;return h?(h.isOpen()?(h.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(h.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const h=this._map,g=this._pos;if(!h||!g)return!1;const C=h.unproject(g),P=h.getFreeCameraOptions();if(!P.position)return!1;const L=P.position.toLngLat();return L.distanceTo(C)<.9*L.distanceTo(this._lngLat)}_evaluateOpacity(){const h=this._map;if(!h)return;const g=this._pos;if(!g||g.x<0||g.x>h.transform.width||g.y<0||g.y>h.transform.height)return void this._clearFadeTimer();const C=h.unproject(g);let P;h._showingGlobe()&&s.isLngLatBehindGlobe(h.transform,this._lngLat)?P=0:(P=1-h._queryFogOpacity(C),h.transform._terrainEnabled()&&h.getTerrain()&&this._behindTerrain()&&(P*=this._occludedOpacity)),this._element.style.opacity=`${P}`,this._element.style.pointerEvents=P>0?"auto":"none",this._popup&&this._popup._setOpacity(P),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const h=this._pos;if(!h||!this._map)return;const g=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${h.x}px,${h.y}px)
            ${zc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${g.x}px,${g.y}px)
        `}_calculateXYTransform(){const h=this._pos,g=this._map,C=this.getPitchAlignment();if(!g||!h||C!=="map")return"";if(!g._showingGlobe()){const J=g.getPitch();return J?`rotateX(${J}deg)`:""}const P=s.radToDeg(s.globeTiltAtLngLat(g.transform,this._lngLat)),L=h.sub(s.globeCenterToScreenPoint(g.transform)),V=Math.abs(L.x)+Math.abs(L.y);if(V===0)return"";const G=P/V;return`rotateX(${-L.y*G}deg) rotateY(${L.x*G}deg)`}_calculateZTransform(){const h=this._pos,g=this._map;if(!g||!h)return"";let C=0;const P=this.getRotationAlignment();if(P==="map")if(g._showingGlobe()){const L=g.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),V=g.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(L);C=s.radToDeg(Math.atan2(V.y,V.x))-90}else C=-g.getBearing();else if(P==="horizon"){const L=s.smoothstep(4,6,g.getZoom()),V=s.globeCenterToScreenPoint(g.transform);V.y+=L*g.transform.height;const G=h.sub(V),J=s.radToDeg(Math.atan2(G.y,G.x));C=(J>90?J-270:J+90)*(1-L)}return C+=this._rotation,C?`rotateZ(${C}deg)`:""}_update(h){s.window.cancelAnimationFrame(this._updateFrameId);const g=this._map;g&&(g.transform.renderWorldCopies&&(this._lngLat=Uu(this._lngLat,this._pos,g.transform)),this._pos=g.project(this._lngLat),h===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),g._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(g._showingGlobe()||g.getTerrain()||g.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(h){return this._offset=s.Point.convert(h),this._update(),this}_onMove(h){const g=this._map;if(!g)return;const C=this._pointerdownPos,P=this._positionDelta;if(C&&P){if(!this._isDragging){const L=this._clickTolerance||g._clickTolerance;if(h.point.dist(C)<L)return;this._isDragging=!0}this._pos=h.point.sub(P),this._lngLat=g.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const h=this._map;h&&(h.off("mousemove",this._onMove),h.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(h){const g=this._map,C=this._pos;g&&C&&this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(C),this._pointerdownPos=h.point,this._state="pending",g.on("mousemove",this._onMove),g.on("touchmove",this._onMove),g.once("mouseup",this._onUp),g.once("touchend",this._onUp))}setDraggable(h){this._draggable=!!h;const g=this._map;return g&&(h?(g.on("mousedown",this._addDragHandler),g.on("touchstart",this._addDragHandler)):(g.off("mousedown",this._addDragHandler),g.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(h){return this._rotation=h||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(h){return this._rotationAlignment=h||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(h){return this._pitchAlignment=h||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(h){return this._occludedOpacity=h||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Wg={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_2=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function L0(_=new s.Point(0,0),h="bottom"){if(typeof _=="number"){const g=Math.round(Math.sqrt(.5*Math.pow(_,2)));switch(h){case"top":return new s.Point(0,_);case"top-left":return new s.Point(g,g);case"top-right":return new s.Point(-g,g);case"bottom":return new s.Point(0,-_);case"bottom-left":return new s.Point(g,-g);case"bottom-right":return new s.Point(-g,-g);case"left":return new s.Point(_,0);case"right":return new s.Point(-_,0)}return new s.Point(0,0)}return _ instanceof s.Point||Array.isArray(_)?s.Point.convert(_):s.Point.convert(_[h]||[0,0])}class Gg{constructor(h){this.jumpTo(h)}getValue(h){if(h<=this._startTime)return this._start;if(h>=this._endTime)return this._end;const g=s.easeCubicInOut((h-this._startTime)/(this._endTime-this._startTime));return this._start*(1-g)+this._end*g}isEasing(h){return h>=this._startTime&&h<=this._endTime}jumpTo(h){this._startTime=-1/0,this._endTime=-1/0,this._start=h,this._end=h}easeTo(h,g,C){this._start=this.getValue(g),this._end=h,this._startTime=g,this._endTime=g+C}}const O0={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},D0={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},w2={showCompass:!0,showZoom:!0,visualizePitch:!1};class S2{constructor(h,g,C=!1){this._clickTolerance=10,this.element=g,this.mouseRotate=new jg({clickTolerance:h.dragRotate._mouseRotate._clickTolerance}),this.map=h,C&&(this.mousePitch=new Fg({clickTolerance:h.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener("mousedown",this.mousedown),g.addEventListener("touchstart",this.touchstart,{passive:!1}),g.addEventListener("touchmove",this.touchmove),g.addEventListener("touchend",this.touchend),g.addEventListener("touchcancel",this.reset)}down(h,g){this.mouseRotate.mousedown(h,g),this.mousePitch&&this.mousePitch.mousedown(h,g),ie()}move(h,g){const C=this.map,P=this.mouseRotate.mousemoveWindow(h,g),L=P&&P.bearingDelta;if(L&&C.setBearing(C.getBearing()+L),this.mousePitch){const V=this.mousePitch.mousemoveWindow(h,g),G=V&&V.pitchDelta;G&&C.setPitch(C.getPitch()+G)}}off(){const h=this.element;h.removeEventListener("mousedown",this.mousedown),h.removeEventListener("touchstart",this.touchstart,{passive:!1}),h.removeEventListener("touchmove",this.touchmove),h.removeEventListener("touchend",this.touchend),h.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){W(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(h){this.down(s.extend({},h,{ctrlKey:!0,preventDefault:()=>h.preventDefault()}),de(this.element,h)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(h){this.move(h,de(this.element,h))}mouseup(h){this.mouseRotate.mouseupWindow(h),this.mousePitch&&this.mousePitch.mouseupWindow(h),this.offTemp()}touchstart(h){h.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ae(this.element,h.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>h.preventDefault()},this._startPos))}touchmove(h){h.targetTouches.length!==1?this.reset():(this._lastPos=Ae(this.element,h.targetTouches)[0],this.move({preventDefault:()=>h.preventDefault()},this._lastPos))}touchend(h){h.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Xg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},qg={maxWidth:100,unit:"metric"},Yg={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Vu={version:s.version,supported:I,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends mp{constructor(_){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(_=s.extend({},D0,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(_.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ju(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),_),this._interactive=_.interactive,this._minTileCacheSize=_.minTileCacheSize,this._maxTileCacheSize=_.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._useWebGL2=_.useWebGL2,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_.crossSourceCollisions,this._collectResourceTiming=_.collectResourceTiming,this._optimizeForTerrain=_.optimizeForTerrain,this._language=this._parseLanguage(_.language),this._worldview=_.worldview,this._renderTaskQueue=new Hg,this._domRenderTaskQueue=new Hg,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},O0,_.locale),this._clickTolerance=_.clickTolerance,this._cooperativeGestures=_.cooperativeGestures,this._performanceMetricsCollection=_.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Gg(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(_.transformRequest,_.accessToken,_.testMode),this._silenceAuthErrors=!!_.testMode,typeof _.container=="string"){if(this._container=s.window.document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_.maxBounds&&this.setMaxBounds(_.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Wa(this,_),this._localFontFamily=_.localFontFamily,this._localIdeographFontFamily=_.localIdeographFontFamily,_.style&&this.setStyle(_.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_.projection&&this.setProjection(_.projection),this._hash=_.hash&&new Og(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,s.extend({},_.fitBoundsOptions,{duration:0})))),this.resize(),_.attributionControl&&this.addControl(new Ar({customAttribution:_.customAttribution})),this._logoControl=new Vg,this.addControl(this._logoControl,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new s.Event(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new s.Event(`${h.dataType}dataloading`,h))})}_getMapId(){return this._mapId}addControl(_,h){if(h===void 0&&(h=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const g=_.onAdd(this);this._controls.push(_);const C=this._controlPositions[h];return h.indexOf("bottom")!==-1?C.insertBefore(g,C.firstChild):C.appendChild(g),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const h=this._controls.indexOf(_);return h>-1&&this._controls.splice(h,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const h=!this._moving;return h&&this.fire(new s.Event("movestart",_)).fire(new s.Event("move",_)),this.fire(new s.Event("resize",_)),h&&this.fire(new s.Event("moveend",_)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_){return this.transform.setMaxBounds(s.LngLatBounds.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_?this.setZoom(_):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_?this.setPitch(_):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(_){return _==="auto"?s.window.navigator.language:Array.isArray(_)?_.length===0?void 0:_.map(h=>h==="auto"?s.window.navigator.language:h):_}setLanguage(_){const h=this._parseLanguage(_);if(!this.style||h===this._language)return this;this._language=h,this.style._reloadSources();for(const g of this._controls)g._setLanguage&&g._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_){return this.style&&_!==this._worldview?(this._worldview=_,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_){return this._lazyInitEmptyStyle(),_?typeof _=="string"&&(_={name:_}):_=null,this._useExplicitProjection=!!_,this._prioritizeAndUpdateProjection(_,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _=this.transform,h=_.projection.name;let g;h==="globe"&&_.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(_.setMercatorFromTransition(),g=!0):h==="mercator"&&_.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(_.setProjection({name:"globe"}),g=!0),g&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_,h){return this._updateProjection(_||h||{name:"mercator"})}_updateProjection(_){let h;if(h=_.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_),this.style.applyProjectionUpdate(),h){this.painter.clearBackgroundTiles();for(const g in this.style._sourceCaches)this.style._sourceCaches[g].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(_){return this.transform.locationPoint3D(s.LngLat.convert(_))}unproject(_){return this.transform.pointLocation3D(s.Point.convert(_))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(_,h,g){if(_==="mouseenter"||_==="mouseover"){let C=!1;const P=V=>{const G=h.filter(oe=>this.getLayer(oe)),J=G.length?this.queryRenderedFeatures(V.point,{layers:G}):[];J.length?C||(C=!0,g.call(this,new Ns(_,this,V.originalEvent,{features:J}))):C=!1},L=()=>{C=!1};return{layers:new Set(h),listener:g,delegates:{mousemove:P,mouseout:L}}}if(_==="mouseleave"||_==="mouseout"){let C=!1;const P=V=>{const G=h.filter(J=>this.getLayer(J));(G.length?this.queryRenderedFeatures(V.point,{layers:G}):[]).length?C=!0:C&&(C=!1,g.call(this,new Ns(_,this,V.originalEvent)))},L=V=>{C&&(C=!1,g.call(this,new Ns(_,this,V.originalEvent)))};return{layers:new Set(h),listener:g,delegates:{mousemove:P,mouseout:L}}}{const C=P=>{const L=h.filter(G=>this.getLayer(G)),V=L.length?this.queryRenderedFeatures(P.point,{layers:L}):[];V.length&&(P.features=V,g.call(this,P),delete P.features)};return{layers:new Set(h),listener:g,delegates:{[_]:C}}}}on(_,h,g){if(g===void 0)return super.on(_,h);Array.isArray(h)||(h=[h]);const C=this._createDelegatedListener(_,h,g);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(C);for(const P in C.delegates)this.on(P,C.delegates[P]);return this}once(_,h,g){if(g===void 0)return super.once(_,h);Array.isArray(h)||(h=[h]);const C=this._createDelegatedListener(_,h,g);for(const P in C.delegates)this.once(P,C.delegates[P]);return this}off(_,h,g){if(g===void 0)return super.off(_,h);h=new Set(Array.isArray(h)?h:[h]);const C=(L,V)=>{if(L.size!==V.size)return!1;for(const G of L)if(!V.has(G))return!1;return!0},P=this._delegatedListeners?this._delegatedListeners[_]:void 0;return P&&(L=>{for(let V=0;V<L.length;V++){const G=L[V];if(G.listener===g&&C(G.layers,h)){for(const J in G.delegates)this.off(J,G.delegates[J]);return L.splice(V,1),this}}})(P),this}queryRenderedFeatures(_,h){return this.style?(h!==void 0||_===void 0||_ instanceof s.Point||Array.isArray(_)||(h=_,_=void 0),this.style.queryRenderedFeatures(_=_||[[0,0],[this.transform.width,this.transform.height]],h=h||{},this.transform)):[]}querySourceFeatures(_,h){return this.style.querySourceFeatures(_,h)}isPointOnSurface(_){const{name:h}=this.transform.projection;return h!=="globe"&&h!=="mercator"&&s.warnOnce(`${h} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(_))}setStyle(_,h){return(h=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},h)).diff!==!1&&h.localIdeographFontFamily===this._localIdeographFontFamily&&h.localFontFamily===this._localFontFamily&&this.style&&_?(this._diffStyle(_,h),this):(this._localIdeographFontFamily=h.localIdeographFontFamily,this._localFontFamily=h.localFontFamily,this._updateStyle(_,h))}_getUIString(_){const h=this._locale[_];if(h==null)throw new Error(`Missing UI string '${_}'`);return h}_updateStyle(_,h){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_&&(this.style=new Hr(this,h||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_):this.style.loadJSON(_)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Hr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,h){if(typeof _=="string"){const g=this._requestManager.normalizeStyleURL(_),C=this._requestManager.transformRequest(g,s.ResourceType.Style);s.getJSON(C,(P,L)=>{P?this.fire(new s.ErrorEvent(P)):L&&this._updateDiff(L,h)})}else typeof _=="object"&&this._updateDiff(_,h)}_updateDiff(_,h){try{this.style.setState(_)&&this._update(!0)}catch(g){s.warnOnce(`Unable to perform style diff: ${g.message||g.error||g}.  Rebuilding the style from scratch.`),this._updateStyle(_,h)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(_,h){return this._lazyInitEmptyStyle(),this.style.addSource(_,h),this._update(!0)}isSourceLoaded(_){return!!this.style&&this.style._isSourceCacheLoaded(_)}areTilesLoaded(){const _=this.style&&this.style._sourceCaches;for(const h in _){const g=_[h]._tiles;for(const C in g){const P=g[C];if(P.state!=="loaded"&&P.state!=="errored")return!1}}return!0}addSourceType(_,h,g){this._lazyInitEmptyStyle(),this.style.addSourceType(_,h,g)}removeSource(_){return this.style.removeSource(_),this._updateTerrain(),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,h,{pixelRatio:g=1,sdf:C=!1,stretchX:P,stretchY:L,content:V}={}){if(this._lazyInitEmptyStyle(),h instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&h instanceof s.window.ImageBitmap){const{width:G,height:J,data:oe}=s.exported.getImageData(h);this.style.addImage(_,{data:new s.RGBAImage({width:G,height:J},oe),pixelRatio:g,stretchX:P,stretchY:L,content:V,sdf:C,version:0})}else if(h.width===void 0||h.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:G,height:J}=h,oe=h;this.style.addImage(_,{data:new s.RGBAImage({width:G,height:J},new Uint8Array(oe.data)),pixelRatio:g,stretchX:P,stretchY:L,content:V,sdf:C,version:0,userImage:oe}),oe.onAdd&&oe.onAdd(this,_)}}updateImage(_,h){const g=this.style.getImage(_);if(!g)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const C=h instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&h instanceof s.window.ImageBitmap?s.exported.getImageData(h):h,{width:P,height:L}=C;P!==void 0&&L!==void 0?P===g.data.width&&L===g.data.height?(g.data.replace(C.data,!(h instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&h instanceof s.window.ImageBitmap)),this.style.updateImage(_,g)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${P}, ${L})
                must be that same as the previous version of the image
                (${g.data.width}, ${g.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,h){s.getImage(this._requestManager.transformRequest(_,s.ResourceType.Image),(g,C)=>{h(g,C instanceof s.window.HTMLImageElement?s.exported.getImageData(C):C)})}listImages(){return this.style.listImages()}addLayer(_,h){return this._lazyInitEmptyStyle(),this.style.addLayer(_,h),this._update(!0)}moveLayer(_,h){return this.style.moveLayer(_,h),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}setLayerZoomRange(_,h,g){return this.style.setLayerZoomRange(_,h,g),this._update(!0)}setFilter(_,h,g={}){return this.style.setFilter(_,h,g),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,h,g,C={}){return this.style.setPaintProperty(_,h,g,C),this._update(!0)}getPaintProperty(_,h){return this.style.getPaintProperty(_,h)}setLayoutProperty(_,h,g,C={}){return this.style.setLayoutProperty(_,h,g,C),this._update(!0)}getLayoutProperty(_,h){return this.style.getLayoutProperty(_,h)}setLight(_,h={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,h),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_){return this._lazyInitEmptyStyle(),!_&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_){return this._lazyInitEmptyStyle(),this.style.setFog(_),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(_),this.transform):0}setFeatureState(_,h){return this.style.setFeatureState(_,h),this._update()}removeFeatureState(_,h){return this.style.removeFeatureState(_,h),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}_updateContainerDimensions(){if(!this._container)return;const _=this._container.getBoundingClientRect().width||400,h=this._container.getBoundingClientRect().height||300;let g,C,P,L=this._container;for(;L&&(!C||!P);){const V=s.window.getComputedStyle(L).transform;V&&V!=="none"&&(g=V.match(/matrix.*\((.+)\)/)[1].split(", "),g[0]&&g[0]!=="0"&&g[0]!=="1"&&(C=g[0]),g[3]&&g[3]!=="0"&&g[3]!=="1"&&(P=g[3])),L=L.parentElement}this._containerWidth=C?Math.abs(_/C):_,this._containerHeight=P?Math.abs(h/P):h}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _=this._container;_.classList.add("mapboxgl-map"),(this._missingCSSCanary=U("div","mapboxgl-canary",_)).style.visibility="hidden",this._detectMissingCSS();const h=this._canvasContainer=U("div","mapboxgl-canvas-container",_);this._interactive&&h.classList.add("mapboxgl-interactive"),this._canvas=U("canvas","mapboxgl-canvas",h),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const g=this._controlContainer=U("div","mapboxgl-control-container",_),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(P=>{C[P]=U("div",`mapboxgl-ctrl-${P}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,h){const g=s.exported.devicePixelRatio||1;this._canvas.width=g*Math.ceil(_),this._canvas.height=g*Math.ceil(h),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${h}px`}_addMarker(_){this._markers.push(_)}_removeMarker(_){const h=this._markers.indexOf(_);h!==-1&&this._markers.splice(h,1)}_addPopup(_){this._popups.push(_)}_removePopup(_){const h=this._popups.indexOf(_);h!==-1&&this._popups.splice(h,1)}_setupPainter(){const _=s.extend({},I.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),h=this._useWebGL2&&this._canvas.getContext("webgl2",_),g=h||this._canvas.getContext("webgl",_)||this._canvas.getContext("experimental-webgl",_);g?(this._useWebGL2&&!h&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(g,!0),this.painter=new zu(g,this.transform,!!h),this.on("data",C=>{C.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(g)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_){_.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:_}))}_contextRestored(_){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:_}))}_onMapScroll(_){if(_.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_requestDomTask(_){!this.loaded()||this.loaded()&&!this.isMoving()?_():this._domRenderTaskQueue.add(_)}_render(_){let h;const g=this.painter.context.extTimerQuery,C=s.exported.now();if(this.listens("gpu-timing-frame")&&(h=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,h)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(_),this._domRenderTaskQueue.run(_),this._removed)return;this._updateProjectionTransition();const P=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const G=this.transform.zoom,J=this.transform.pitch,oe=s.exported.now(),se=new s.EvaluationParameters(G,{now:oe,fadeDuration:P,pitch:J,transition:this.style.getTransition()});this.style.update(se)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let L=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),L=this._updateAverageElevation(C),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):L=this._updateAverageElevation(C),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,P,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:P,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),h){const G=s.exported.now()-C;g.endQueryEXT(g.TIME_ELAPSED_EXT,h),setTimeout(()=>{const J=g.getQueryObjectEXT(h,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(h),this.fire(new s.Event("gpu-timing-frame",{cpuTime:G,gpuTime:J})),s.window.performance.mark("frame-gpu",{startTime:C,detail:{gpuTime:J}})},50)}if(this.listens("gpu-timing-layer")){const G=this.painter.collectGpuTimers();setTimeout(()=>{const J=this.painter.queryGpuTimers(G);this.fire(new s.Event("gpu-timing-layer",{layerTimes:J}))},50)}if(this.listens("gpu-timing-deferred-render")){const G=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const J=this.painter.queryGpuTimeDeferredRender(G);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:J}))},50)}const V=this._sourcesDirty||this._styleDirty||this._placementDirty||L;if(V||this._repaint)this.triggerRepaint();else{const G=!this.isMoving()&&this.loaded();if(G&&(L=this._updateAverageElevation(C,!0)),L)this.triggerRepaint();else if(this._triggerFrame(!1),G&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const J=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:J})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(_){for(const h of this._markers)_&&!this.getRenderWorldCopies()&&(h._lngLat=h._lngLat.wrap()),h._update();for(const h of this._popups)!_||this.getRenderWorldCopies()||h._trackPointer||(h._lngLat=h._lngLat.wrap()),h._update()}_updateAverageElevation(_,h=!1){const g=C=>(this.transform.averageElevation=C,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&g(0);if((h||_-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_)){const C=this.transform.averageElevation;let P=this.transform.sampleAverageElevation(),L=!1;this.transform.elevation&&(L=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(P)?P=0:this._averageElevationLastSampledAt=_;const V=Math.abs(C-P);if(V>1){if(this._isInitialLoad||L)return this._averageElevation.jumpTo(P),g(P);this._averageElevation.easeTo(P,_,300)}else if(V>1e-4)return this._averageElevation.jumpTo(P),g(P)}return!!this._averageElevation.isEasing(_)&&g(this._averageElevation.getValue(_))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_=>{if(_&&(_.message===s.AUTH_ERR_MSG||_.status===401)){const h=this.painter.context.gl;s.storeAuthState(h,!1),this._logoControl instanceof Vg&&this._logoControl._updateLogo(),h&&h.clear(h.DEPTH_BUFFER_BIT|h.COLOR_BUFFER_BIT|h.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const _=this._isDragging();this.painter.updateTerrain(this.style,_)}_calculateSpeedIndex(){const _=this.painter.canvasCopy(),h=this.painter.getCanvasCopiesAndTimestamps();h.timeStamps.push(performance.now());const g=this.painter.context.gl,C=g.createFramebuffer();function P(L){g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,L,0);const V=new Uint8Array(g.drawingBufferWidth*g.drawingBufferHeight*4);return g.readPixels(0,0,g.drawingBufferWidth,g.drawingBufferHeight,g.RGBA,g.UNSIGNED_BYTE,V),V}return g.bindFramebuffer(g.FRAMEBUFFER,C),this._canvasPixelComparison(P(_),h.canvasCopies.map(P),h.timeStamps)}_canvasPixelComparison(_,h,g){let C=g[1]-g[0];const P=_.length/4;for(let L=0;L<h.length;L++){const V=h[L];let G=0;for(let J=0;J<V.length;J+=4)V[J]===_[J]&&V[J+1]===_[J+1]&&V[J+2]===_[J+2]&&V[J+3]===_[J+3]&&(G+=1);C+=(g[L+2]-g[L+1])*(1-G/P)}return C}remove(){this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const _=this.painter.context.gl.getExtension("WEBGL_lose_context");_&&_.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_){this._renderNextFrame=this._renderNextFrame||_,this.style&&!this._frame&&(this._frame=s.exported.frame(h=>{const g=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,g&&this._render(h)}))}_preloadTiles(_){const h=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(h,(g,C)=>g._preloadTiles(_,C),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_){this._trackResize&&this.resize({originalEvent:_})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_){this._showTerrainWireframe!==_&&(this._showTerrainWireframe=_,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_){this._speedIndexTiming!==_&&(this._speedIndexTiming=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(_){this._showTileAABBs!==_&&(this._showTileAABBs=_,_&&this._update())}_setCacheLimits(_,h){s.setCacheLimits(_,h)}get version(){return s.version}},NavigationControl:class{constructor(_){this.options=s.extend({},w2,_),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",h=>h.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",h=>{this._map&&this._map.zoomIn({},{originalEvent:h})}),U("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",h=>{this._map&&this._map.zoomOut({},{originalEvent:h})}),U("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",h=>{const g=this._map;g&&(this.options.visualizePitch?g.resetNorthPitch({},{originalEvent:h}):g.resetNorth({},{originalEvent:h}))}),this._compassIcon=U("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _=this._map;if(!_)return;const h=_.getZoom(),g=h===_.getMaxZoom(),C=h===_.getMinZoom();this._zoomInButton.disabled=g,this._zoomOutButton.disabled=C,this._zoomInButton.setAttribute("aria-disabled",g.toString()),this._zoomOutButton.setAttribute("aria-disabled",C.toString())}_rotateCompassArrow(){const _=this._map;if(!_)return;const h=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_.transform.pitch}deg) rotateZ(${_.transform.angle*(180/Math.PI)}deg)`:`rotate(${_.transform.angle*(180/Math.PI)}deg)`;_._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=h)})}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_.on("pitch",this._rotateCompassArrow),_.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new S2(_,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _=this._map;_&&(this._container.remove(),this.options.showZoom&&_.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_.off("pitch",this._rotateCompassArrow),_.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_,h){const g=U("button",_,this._container);return g.type="button",g.addEventListener("click",h),g}_setButtonTitle(_,h){if(!this._map)return;const g=this._map._getUIString(`NavigationControl.${h}`);_.setAttribute("aria-label",g),_.firstElementChild&&_.firstElementChild.setAttribute("title",g)}},GeolocateControl:class extends s.Evented{constructor(_){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Xg,_),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Fu(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_){return this._map=_,this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_){const h=(g=!!this.options.geolocation)=>{this._supportsGeolocation=g,_(g)};this._supportsGeolocation!==void 0?_(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(g=>h(g.state!=="denied")).catch(()=>h()):h()}_isOutOfMapMaxBounds(_){const h=this._map.getMaxBounds(),g=_.coords;return!!h&&(g.longitude<h.getWest()||g.longitude>h.getEast()||g.latitude<h.getSouth()||g.latitude>h.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_){if(this._map){if(this._isOutOfMapMaxBounds(_))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",_)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",_)),this._finish()}}_updateCamera(_){const h=new s.LngLat(_.coords.longitude,_.coords.latitude),g=_.coords.accuracy,C=this._map.getBearing(),P=s.extend({bearing:C},this.options.fitBoundsOptions);this._map.fitBounds(h.toBounds(g),P,{geolocateSource:!0})}_updateMarker(_){if(_){const h=new s.LngLat(_.coords.longitude,_.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=_.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _=this._map.transform,h=s.mercatorZfromAltitude(1,_._center.lat)*_.worldSize,g=Math.ceil(2*this._accuracy*h);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_){if(this._map){if(this.options.trackUserLocation)if(_.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",_)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",h=>h.preventDefault()),this._geolocateButton=U("button","mapboxgl-ctrl-geolocate",this._container),U("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",h),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U("div","mapboxgl-user-location"),this._dotElement.appendChild(U("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(U("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new wr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=U("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(_){this._userLocationDotMarker&&(_.webkitCompassHeading?this._heading=_.webkitCompassHeading:_.absolute===!0&&(this._heading=-1*_.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(h=>{h==="granted"&&_()}).catch(console.error):_()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ar,ScaleControl:class{constructor(_){this.options=s.extend({},qg,_),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _=this.options.maxWidth||100,h=this._map,g=h._containerHeight/2,C=h._containerWidth/2-_/2,P=h.unproject([C,g]),L=h.unproject([C+_,g]),V=P.distanceTo(L);if(this.options.unit==="imperial"){const G=3.2808*V;G>5280?this._setScale(_,G/5280,"mile"):this._setScale(_,G,"foot")}else this.options.unit==="nautical"?this._setScale(_,V/1852,"nautical-mile"):V>=1e3?this._setScale(_,V/1e3,"kilometer"):this._setScale(_,V,"meter")}_setScale(_,h,g){this._map._requestDomTask(()=>{const C=function(L){const V=Math.pow(10,`${Math.floor(L)}`.length-1);let G=L/V;return G=G>=10?10:G>=5?5:G>=3?3:G>=2?2:G>=1?1:function(J){const oe=Math.pow(10,Math.ceil(-Math.log(J)/Math.LN10));return Math.round(J*oe)/oe}(G),V*G}(h),P=C/h;this._container.innerHTML=this._isNumberFormatSupported&&g!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:g}).format(C):`${C}&nbsp;${Yg[g]}`,this._container.style.width=_*P+"px"})}onAdd(_){return this._map=_,this._language=_.getLanguage(),this._container=U("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_){this._language=_,this._update()}setUnit(_){this.options.unit=_,this._update()}},FullscreenControl:class{constructor(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof s.window.HTMLElement?this._container=_.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=U("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const _=this._fullscreenButton=U("button","mapboxgl-ctrl-fullscreen",this._controlContainer);U("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(_){super(),this.options=s.extend(Object.create(Wg),_),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_&&_.className?_.className.trim().split(/\s+/):[])}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&_.on("preclick",this._onClose),this.options.closeOnMove&&_.on("move",this._onClose),_.on("remove",this.remove),this._update(),_._addPopup(this),this._focusFirstElement(),this._trackPointer?(_.on("mousemove",this._onMouseEvent),_.on("mouseup",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")):_.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _=this._map;return _&&(_.off("move",this._update),_.off("move",this._onClose),_.off("preclick",this._onClose),_.off("click",this._onClose),_.off("remove",this.remove),_.off("mousemove",this._onMouseEvent),_.off("mouseup",this._onMouseEvent),_.off("drag",this._onMouseEvent),_._canvasContainer&&_._canvasContainer.classList.remove("mapboxgl-track-pointer"),_._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_){this._lngLat=s.LngLat.convert(_),this._pos=null,this._trackPointer=!1,this._update();const h=this._map;return h&&(h.on("move",this._update),h.off("mousemove",this._onMouseEvent),h._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _=this._map;return _&&(_.off("move",this._update),_.on("mousemove",this._onMouseEvent),_.on("drag",this._onMouseEvent),_._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(s.window.document.createTextNode(_))}setHTML(_){const h=s.window.document.createDocumentFragment(),g=s.window.document.createElement("body");let C;for(g.innerHTML=_;C=g.firstChild,C;)h.appendChild(C);return this.setDOMContent(h)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){let h=this._content;if(h)for(;h.hasChildNodes();)h.firstChild&&h.removeChild(h.firstChild);else h=this._content=U("div","mapboxgl-popup-content",this._container||void 0);if(h.appendChild(_),this.options.closeButton){const g=this._closeButton=U("button","mapboxgl-popup-close-button",h);g.type="button",g.setAttribute("aria-label","Close popup"),g.setAttribute("aria-hidden","true"),g.innerHTML="&#215;",g.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_){return this._classList.add(_),this._updateClassList(),this}removeClassName(_){return this._classList.delete(_),this._updateClassList(),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){let h;return this._classList.delete(_)?h=!1:(this._classList.add(_),h=!0),this._updateClassList(),h}_onMouseEvent(_){this._update(_.point)}_getAnchor(_){if(this.options.anchor)return this.options.anchor;const h=this._map,g=this._container,C=this._pos;if(!h||!g||!C)return"bottom";const P=g.offsetWidth,L=g.offsetHeight,V=C.x<P/2,G=C.x>h.transform.width-P/2;if(C.y+_<L)return V?"top-left":G?"top-right":"top";if(C.y>h.transform.height-L){if(V)return"bottom-left";if(G)return"bottom-right"}return V?"left":G?"right":"bottom"}_updateClassList(){const _=this._container;if(!_)return;const h=[...this._classList];h.push("mapboxgl-popup"),this._anchor&&h.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&h.push("mapboxgl-popup-track-pointer"),_.className=h.join(" ")}_update(_){const h=this._map,g=this._content;if(!h||!this._lngLat&&!this._trackPointer||!g)return;let C=this._container;if(C||(C=this._container=U("div","mapboxgl-popup",h.getContainer()),this._tip=U("div","mapboxgl-popup-tip",C),C.appendChild(g)),this.options.maxWidth&&C.style.maxWidth!==this.options.maxWidth&&(C.style.maxWidth=this.options.maxWidth),h.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Uu(this._lngLat,this._pos,h.transform)),!this._trackPointer||_){const P=this._pos=this._trackPointer&&_?_:h.project(this._lngLat),L=L0(this.options.offset),V=this._anchor=this._getAnchor(L.y),G=L0(this.options.offset,V),J=P.add(G).round();h._requestDomTask(()=>{this._container&&V&&(this._container.style.transform=`${zc[V]} translate(${J.x}px,${J.y}px)`)})}if(!this._marker&&h._showingGlobe()){const P=s.isLngLatBehindGlobe(h.transform,this._lngLat)?0:1;this._setOpacity(P)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(_2);_&&_.focus()}_onClose(){this.remove()}_setOpacity(_){this._container&&(this._container.style.opacity=`${_}`),this._content&&(this._content.style.pointerEvents=_?"auto":"none")}},Marker:wr,Style:Hr,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:x0,Evented:s.Evented,config:s.config,prewarm:function(){zs().acquire(Ni)},clearPrewarmedResources:function(){const _=Yn;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ni),Yn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(_){s.config.ACCESS_TOKEN=_},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(_){s.config.API_URL=_},get workerCount(){return Wn.workerCount},set workerCount(_){Wn.workerCount=_},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){s.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage(_){s.clearTileCache(_)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Vu});var y=o;return y})})(NH);var b2e=NH.exports;const da=Of(b2e);function a_(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var FH={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function(){function r(n,o,f){function y(I,D){if(!o[I]){if(!n[I]){var N=typeof a_=="function"&&a_;if(!D&&N)return N(I,!0);if(s)return s(I,!0);var U=new Error("Cannot find module '"+I+"'");throw U.code="MODULE_NOT_FOUND",U}var q=o[I]={exports:{}};n[I][0].call(q.exports,function(Z){var ae=n[I][1][Z];return y(ae||Z)},q,q.exports,r,n,o,f)}return o[I].exports}for(var s=typeof a_=="function"&&a_,k=0;k<f.length;k++)y(f[k]);return y}return r}()({1:[function(r,n,o){var f=r("./toPropertyKey.js");function y(s,k,I){return k=f(k),k in s?Object.defineProperty(s,k,{value:I,enumerable:!0,configurable:!0,writable:!0}):s[k]=I,s}n.exports=y,n.exports.__esModule=!0,n.exports.default=n.exports},{"./toPropertyKey.js":4}],2:[function(r,n,o){var f=r("./defineProperty.js");function y(k,I){var D=Object.keys(k);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(k);I&&(N=N.filter(function(U){return Object.getOwnPropertyDescriptor(k,U).enumerable})),D.push.apply(D,N)}return D}function s(k){for(var I=1;I<arguments.length;I++){var D=arguments[I]!=null?arguments[I]:{};I%2?y(Object(D),!0).forEach(function(N){f(k,N,D[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(D)):y(Object(D)).forEach(function(N){Object.defineProperty(k,N,Object.getOwnPropertyDescriptor(D,N))})}return k}n.exports=s,n.exports.__esModule=!0,n.exports.default=n.exports},{"./defineProperty.js":1}],3:[function(r,n,o){var f=r("./typeof.js").default;function y(s,k){if(f(s)!=="object"||s===null)return s;var I=s[Symbol.toPrimitive];if(I!==void 0){var D=I.call(s,k||"default");if(f(D)!=="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(s)}n.exports=y,n.exports.__esModule=!0,n.exports.default=n.exports},{"./typeof.js":5}],4:[function(r,n,o){var f=r("./typeof.js").default,y=r("./toPrimitive.js");function s(k){var I=y(k,"string");return f(I)==="symbol"?I:String(I)}n.exports=s,n.exports.__esModule=!0,n.exports.default=n.exports},{"./toPrimitive.js":3,"./typeof.js":5}],5:[function(r,n,o){function f(y){"@babel/helpers - typeof";return n.exports=f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},n.exports.__esModule=!0,n.exports.default=n.exports,f(y)}n.exports=f,n.exports.__esModule=!0,n.exports.default=n.exports},{}],6:[function(r,n,o){var f={};function y(I){return Math.floor(Math.abs(I)+.5)*(I>=0?1:-1)}function s(I,D,N){I=y(I*N),D=y(D*N);var U=I-D;U<<=1,I-D<0&&(U=~U);for(var q="";U>=32;)q+=String.fromCharCode((32|U&31)+63),U>>=5;return q+=String.fromCharCode(U+63),q}f.decode=function(I,D){for(var N=0,U=0,q=0,Z=[],ae=0,ve=0,ie=null,W,K,he=Math.pow(10,Number.isInteger(D)?D:5);N<I.length;){ie=null,ae=0,ve=0;do ie=I.charCodeAt(N++)-63,ve|=(ie&31)<<ae,ae+=5;while(ie>=32);W=ve&1?~(ve>>1):ve>>1,ae=ve=0;do ie=I.charCodeAt(N++)-63,ve|=(ie&31)<<ae,ae+=5;while(ie>=32);K=ve&1?~(ve>>1):ve>>1,U+=W,q+=K,Z.push([U/he,q/he])}return Z},f.encode=function(I,D){if(!I.length)return"";for(var N=Math.pow(10,Number.isInteger(D)?D:5),U=s(I[0][0],0,N)+s(I[0][1],0,N),q=1;q<I.length;q++){var Z=I[q],ae=I[q-1];U+=s(Z[0],ae[0],N),U+=s(Z[1],ae[1],N)}return U};function k(I){for(var D=[],N=0;N<I.length;N++){var U=I[N].slice();D.push([U[1],U[0]])}return D}f.fromGeoJSON=function(I,D){if(I&&I.type==="Feature"&&(I=I.geometry),!I||I.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return f.encode(k(I.coordinates),D)},f.toGeoJSON=function(I,D){var N=f.decode(I,D);return{type:"LineString",coordinates:k(N)}},typeof n=="object"&&n.exports&&(n.exports=f)},{}],7:[function(r,n,o){var f=typeof Reflect=="object"?Reflect:null,y=f&&typeof f.apply=="function"?f.apply:function($e,Ve,Fe){return Function.prototype.apply.call($e,Ve,Fe)},s;f&&typeof f.ownKeys=="function"?s=f.ownKeys:Object.getOwnPropertySymbols?s=function($e){return Object.getOwnPropertyNames($e).concat(Object.getOwnPropertySymbols($e))}:s=function($e){return Object.getOwnPropertyNames($e)};function k(Pe){console&&console.warn&&console.warn(Pe)}var I=Number.isNaN||function($e){return $e!==$e};function D(){D.init.call(this)}n.exports=D,n.exports.once=Ae,D.EventEmitter=D,D.prototype._events=void 0,D.prototype._eventsCount=0,D.prototype._maxListeners=void 0;var N=10;function U(Pe){if(typeof Pe!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Pe)}Object.defineProperty(D,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(Pe){if(typeof Pe!="number"||Pe<0||I(Pe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Pe+".");N=Pe}}),D.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},D.prototype.setMaxListeners=function($e){if(typeof $e!="number"||$e<0||I($e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$e+".");return this._maxListeners=$e,this};function q(Pe){return Pe._maxListeners===void 0?D.defaultMaxListeners:Pe._maxListeners}D.prototype.getMaxListeners=function(){return q(this)},D.prototype.emit=function($e){for(var Ve=[],Fe=1;Fe<arguments.length;Fe++)Ve.push(arguments[Fe]);var Ye=$e==="error",ft=this._events;if(ft!==void 0)Ye=Ye&&ft.error===void 0;else if(!Ye)return!1;if(Ye){var Pt;if(Ve.length>0&&(Pt=Ve[0]),Pt instanceof Error)throw Pt;var or=new Error("Unhandled error."+(Pt?" ("+Pt.message+")":""));throw or.context=Pt,or}var xr=ft[$e];if(xr===void 0)return!1;if(typeof xr=="function")y(xr,this,Ve);else for(var mt=xr.length,Xt=K(xr,mt),Fe=0;Fe<mt;++Fe)y(Xt[Fe],this,Ve);return!0};function Z(Pe,$e,Ve,Fe){var Ye,ft,Pt;if(U(Ve),ft=Pe._events,ft===void 0?(ft=Pe._events=Object.create(null),Pe._eventsCount=0):(ft.newListener!==void 0&&(Pe.emit("newListener",$e,Ve.listener?Ve.listener:Ve),ft=Pe._events),Pt=ft[$e]),Pt===void 0)Pt=ft[$e]=Ve,++Pe._eventsCount;else if(typeof Pt=="function"?Pt=ft[$e]=Fe?[Ve,Pt]:[Pt,Ve]:Fe?Pt.unshift(Ve):Pt.push(Ve),Ye=q(Pe),Ye>0&&Pt.length>Ye&&!Pt.warned){Pt.warned=!0;var or=new Error("Possible EventEmitter memory leak detected. "+Pt.length+" "+String($e)+" listeners added. Use emitter.setMaxListeners() to increase limit");or.name="MaxListenersExceededWarning",or.emitter=Pe,or.type=$e,or.count=Pt.length,k(or)}return Pe}D.prototype.addListener=function($e,Ve){return Z(this,$e,Ve,!1)},D.prototype.on=D.prototype.addListener,D.prototype.prependListener=function($e,Ve){return Z(this,$e,Ve,!0)};function ae(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ve(Pe,$e,Ve){var Fe={fired:!1,wrapFn:void 0,target:Pe,type:$e,listener:Ve},Ye=ae.bind(Fe);return Ye.listener=Ve,Fe.wrapFn=Ye,Ye}D.prototype.once=function($e,Ve){return U(Ve),this.on($e,ve(this,$e,Ve)),this},D.prototype.prependOnceListener=function($e,Ve){return U(Ve),this.prependListener($e,ve(this,$e,Ve)),this},D.prototype.removeListener=function($e,Ve){var Fe,Ye,ft,Pt,or;if(U(Ve),Ye=this._events,Ye===void 0)return this;if(Fe=Ye[$e],Fe===void 0)return this;if(Fe===Ve||Fe.listener===Ve)--this._eventsCount===0?this._events=Object.create(null):(delete Ye[$e],Ye.removeListener&&this.emit("removeListener",$e,Fe.listener||Ve));else if(typeof Fe!="function"){for(ft=-1,Pt=Fe.length-1;Pt>=0;Pt--)if(Fe[Pt]===Ve||Fe[Pt].listener===Ve){or=Fe[Pt].listener,ft=Pt;break}if(ft<0)return this;ft===0?Fe.shift():he(Fe,ft),Fe.length===1&&(Ye[$e]=Fe[0]),Ye.removeListener!==void 0&&this.emit("removeListener",$e,or||Ve)}return this},D.prototype.off=D.prototype.removeListener,D.prototype.removeAllListeners=function($e){var Ve,Fe,Ye;if(Fe=this._events,Fe===void 0)return this;if(Fe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Fe[$e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Fe[$e]),this;if(arguments.length===0){var ft=Object.keys(Fe),Pt;for(Ye=0;Ye<ft.length;++Ye)Pt=ft[Ye],Pt!=="removeListener"&&this.removeAllListeners(Pt);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Ve=Fe[$e],typeof Ve=="function")this.removeListener($e,Ve);else if(Ve!==void 0)for(Ye=Ve.length-1;Ye>=0;Ye--)this.removeListener($e,Ve[Ye]);return this};function ie(Pe,$e,Ve){var Fe=Pe._events;if(Fe===void 0)return[];var Ye=Fe[$e];return Ye===void 0?[]:typeof Ye=="function"?Ve?[Ye.listener||Ye]:[Ye]:Ve?de(Ye):K(Ye,Ye.length)}D.prototype.listeners=function($e){return ie(this,$e,!0)},D.prototype.rawListeners=function($e){return ie(this,$e,!1)},D.listenerCount=function(Pe,$e){return typeof Pe.listenerCount=="function"?Pe.listenerCount($e):W.call(Pe,$e)},D.prototype.listenerCount=W;function W(Pe){var $e=this._events;if($e!==void 0){var Ve=$e[Pe];if(typeof Ve=="function")return 1;if(Ve!==void 0)return Ve.length}return 0}D.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function K(Pe,$e){for(var Ve=new Array($e),Fe=0;Fe<$e;++Fe)Ve[Fe]=Pe[Fe];return Ve}function he(Pe,$e){for(;$e+1<Pe.length;$e++)Pe[$e]=Pe[$e+1];Pe.pop()}function de(Pe){for(var $e=new Array(Pe.length),Ve=0;Ve<$e.length;++Ve)$e[Ve]=Pe[Ve].listener||Pe[Ve];return $e}function Ae(Pe,$e){return new Promise(function(Ve,Fe){function Ye(Pt){Pe.removeListener($e,ft),Fe(Pt)}function ft(){typeof Pe.removeListener=="function"&&Pe.removeListener("error",Ye),Ve([].slice.call(arguments))}Ue(Pe,$e,ft,{once:!0}),$e!=="error"&&Te(Pe,Ye,{once:!0})})}function Te(Pe,$e,Ve){typeof Pe.on=="function"&&Ue(Pe,"error",$e,Ve)}function Ue(Pe,$e,Ve,Fe){if(typeof Pe.on=="function")Fe.once?Pe.once($e,Ve):Pe.on($e,Ve);else if(typeof Pe.addEventListener=="function")Pe.addEventListener($e,function Ye(ft){Fe.once&&Pe.removeEventListener($e,Ye),Ve(ft)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Pe)}},{}],8:[function(r,n,o){var f=r("is-obj"),y=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function k(N){if(N==null)throw new TypeError("Sources cannot be null or undefined");return Object(N)}function I(N,U,q){var Z=U[q];if(Z!=null){if(y.call(N,q)&&(N[q]===void 0||N[q]===null))throw new TypeError("Cannot convert undefined or null to object ("+q+")");!y.call(N,q)||!f(Z)?N[q]=Z:N[q]=D(Object(N[q]),U[q])}}function D(N,U){if(N===U)return N;U=Object(U);for(var q in U)y.call(U,q)&&I(N,U,q);if(Object.getOwnPropertySymbols)for(var Z=Object.getOwnPropertySymbols(U),ae=0;ae<Z.length;ae++)s.call(U,Z[ae])&&I(N,U,Z[ae]);return N}n.exports=function(U){U=k(U);for(var q=1;q<arguments.length;q++)D(U,arguments[q]);return U}},{"is-obj":10}],9:[function(r,n,o){(function(){var f=this,y={};typeof o<"u"?n.exports=y:f.fuzzy=y,y.simpleFilter=function(s,k){return k.filter(function(I){return y.test(s,I)})},y.test=function(s,k){return y.match(s,k)!==null},y.match=function(s,k,I){I=I||{};var D=0,N=[],U=k.length,q=0,Z=0,ae=I.pre||"",ve=I.post||"",ie=I.caseSensitive&&k||k.toLowerCase(),W;s=I.caseSensitive&&s||s.toLowerCase();for(var K=0;K<U;K++)W=k[K],ie[K]===s[D]?(W=ae+W+ve,D+=1,Z+=1+Z):Z=0,q+=Z,N[N.length]=W;return D===s.length?(q=ie===s?1/0:q,{rendered:N.join(""),score:q}):null},y.filter=function(s,k,I){return!k||k.length===0?[]:typeof s!="string"?k:(I=I||{},k.reduce(function(D,N,U,q){var Z=N;I.extract&&(Z=I.extract(N));var ae=y.match(s,Z,I);return ae!=null&&(D[D.length]={string:ae.rendered,score:ae.score,index:U,original:N}),D},[]).sort(function(D,N){var U=N.score-D.score;return U||D.index-N.index}))}})()},{}],10:[function(r,n,o){n.exports=function(f){var y=typeof f;return f!==null&&(y==="object"||y==="function")}},{}],11:[function(r,n,o){var f=/<%=([\s\S]+?)%>/g;n.exports=f},{}],12:[function(r,n,o){(function(f){(function(){var y="Expected a function",s=NaN,k="[object Symbol]",I=/^\s+|\s+$/g,D=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,U=/^0o[0-7]+$/i,q=parseInt,Z=typeof f=="object"&&f&&f.Object===Object&&f,ae=typeof self=="object"&&self&&self.Object===Object&&self,ve=Z||ae||Function("return this")(),ie=Object.prototype,W=ie.toString,K=Math.max,he=Math.min,de=function(){return ve.Date.now()};function Ae(Ve,Fe,Ye){var ft,Pt,or,xr,mt,Xt,Wt=0,Ot=!1,ut=!1,Vt=!0;if(typeof Ve!="function")throw new TypeError(y);Fe=$e(Fe)||0,Te(Ye)&&(Ot=!!Ye.leading,ut="maxWait"in Ye,or=ut?K($e(Ye.maxWait)||0,Fe):or,Vt="trailing"in Ye?!!Ye.trailing:Vt);function ir(Br){var Sn=ft,on=Pt;return ft=Pt=void 0,Wt=Br,xr=Ve.apply(on,Sn),xr}function vt(Br){return Wt=Br,mt=setTimeout(Tr,Fe),Ot?ir(Br):xr}function Dt(Br){var Sn=Br-Xt,on=Br-Wt,Gr=Fe-Sn;return ut?he(Gr,or-on):Gr}function ur(Br){var Sn=Br-Xt,on=Br-Wt;return Xt===void 0||Sn>=Fe||Sn<0||ut&&on>=or}function Tr(){var Br=de();if(ur(Br))return fr(Br);mt=setTimeout(Tr,Dt(Br))}function fr(Br){return mt=void 0,Vt&&ft?ir(Br):(ft=Pt=void 0,xr)}function Cr(){mt!==void 0&&clearTimeout(mt),Wt=0,ft=Xt=Pt=mt=void 0}function mr(){return mt===void 0?xr:fr(de())}function nn(){var Br=de(),Sn=ur(Br);if(ft=arguments,Pt=this,Xt=Br,Sn){if(mt===void 0)return vt(Xt);if(ut)return mt=setTimeout(Tr,Fe),ir(Xt)}return mt===void 0&&(mt=setTimeout(Tr,Fe)),xr}return nn.cancel=Cr,nn.flush=mr,nn}function Te(Ve){var Fe=typeof Ve;return!!Ve&&(Fe=="object"||Fe=="function")}function Ue(Ve){return!!Ve&&typeof Ve=="object"}function Pe(Ve){return typeof Ve=="symbol"||Ue(Ve)&&W.call(Ve)==k}function $e(Ve){if(typeof Ve=="number")return Ve;if(Pe(Ve))return s;if(Te(Ve)){var Fe=typeof Ve.valueOf=="function"?Ve.valueOf():Ve;Ve=Te(Fe)?Fe+"":Fe}if(typeof Ve!="string")return Ve===0?Ve:+Ve;Ve=Ve.replace(I,"");var Ye=N.test(Ve);return Ye||U.test(Ve)?q(Ve.slice(2),Ye?2:8):D.test(Ve)?s:+Ve}n.exports=Ae}).call(this)}).call(this,typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{})},{}],13:[function(r,n,o){(function(f){(function(){var y=200,s="__lodash_hash_undefined__",k=1,I=2,D=9007199254740991,N="[object Arguments]",U="[object Array]",q="[object AsyncFunction]",Z="[object Boolean]",ae="[object Date]",ve="[object Error]",ie="[object Function]",W="[object GeneratorFunction]",K="[object Map]",he="[object Number]",de="[object Null]",Ae="[object Object]",Te="[object Promise]",Ue="[object Proxy]",Pe="[object RegExp]",$e="[object Set]",Ve="[object String]",Fe="[object Symbol]",Ye="[object Undefined]",ft="[object WeakMap]",Pt="[object ArrayBuffer]",or="[object DataView]",xr="[object Float32Array]",mt="[object Float64Array]",Xt="[object Int8Array]",Wt="[object Int16Array]",Ot="[object Int32Array]",ut="[object Uint8Array]",Vt="[object Uint8ClampedArray]",ir="[object Uint16Array]",vt="[object Uint32Array]",Dt=/[\\^$.*+?()[\]{}|]/g,ur=/^\[object .+?Constructor\]$/,Tr=/^(?:0|[1-9]\d*)$/,fr={};fr[xr]=fr[mt]=fr[Xt]=fr[Wt]=fr[Ot]=fr[ut]=fr[Vt]=fr[ir]=fr[vt]=!0,fr[N]=fr[U]=fr[Pt]=fr[Z]=fr[or]=fr[ae]=fr[ve]=fr[ie]=fr[K]=fr[he]=fr[Ae]=fr[Pe]=fr[$e]=fr[Ve]=fr[ft]=!1;var Cr=typeof f=="object"&&f&&f.Object===Object&&f,mr=typeof self=="object"&&self&&self.Object===Object&&self,nn=Cr||mr||Function("return this")(),Br=typeof o=="object"&&o&&!o.nodeType&&o,Sn=Br&&typeof n=="object"&&n&&!n.nodeType&&n,on=Sn&&Sn.exports===Br,Gr=on&&Cr.process,Zi=function(){try{return Gr&&Gr.binding&&Gr.binding("util")}catch{}}(),Kr=Zi&&Zi.isTypedArray;function En(Se,et){for(var Mt=-1,dr=Se==null?0:Se.length,Hr=0,kr=[];++Mt<dr;){var en=Se[Mt];et(en,Mt,Se)&&(kr[Hr++]=en)}return kr}function wi(Se,et){for(var Mt=-1,dr=et.length,Hr=Se.length;++Mt<dr;)Se[Hr+Mt]=et[Mt];return Se}function Hi(Se,et){for(var Mt=-1,dr=Se==null?0:Se.length;++Mt<dr;)if(et(Se[Mt],Mt,Se))return!0;return!1}function Tt(Se,et){for(var Mt=-1,dr=Array(Se);++Mt<Se;)dr[Mt]=et(Mt);return dr}function pr(Se){return function(et){return Se(et)}}function Er(Se,et){return Se.has(et)}function Mr(Se,et){return Se==null?void 0:Se[et]}function Zt(Se){var et=-1,Mt=Array(Se.size);return Se.forEach(function(dr,Hr){Mt[++et]=[Hr,dr]}),Mt}function gr(Se,et){return function(Mt){return Se(et(Mt))}}function Xr(Se){var et=-1,Mt=Array(Se.size);return Se.forEach(function(dr){Mt[++et]=dr}),Mt}var Hn=Array.prototype,ti=Function.prototype,qn=Object.prototype,Ii=nn["__core-js_shared__"],zi=ti.toString,Fn=qn.hasOwnProperty,Ki=function(){var Se=/[^.]+$/.exec(Ii&&Ii.keys&&Ii.keys.IE_PROTO||"");return Se?"Symbol(src)_1."+Se:""}(),Si=qn.toString,is=RegExp("^"+zi.call(Fn).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ds=on?nn.Buffer:void 0,Ge=nn.Symbol,we=nn.Uint8Array,Ce=qn.propertyIsEnumerable,He=Hn.splice,Qe=Ge?Ge.toStringTag:void 0,ot=Object.getOwnPropertySymbols,gt=Ds?Ds.isBuffer:void 0,yt=gr(Object.keys,Object),ct=bn(nn,"DataView"),bt=bn(nn,"Map"),qt=bn(nn,"Promise"),Kt=bn(nn,"Set"),Gt=bn(nn,"WeakMap"),Dr=bn(Object,"create"),Qr=ri(ct),Vr=ri(bt),jr=ri(qt),Rr=ri(Kt),Cn=ri(Gt),Bn=Ge?Ge.prototype:void 0,$n=Bn?Bn.valueOf:void 0;function gn(Se){var et=-1,Mt=Se==null?0:Se.length;for(this.clear();++et<Mt;){var dr=Se[et];this.set(dr[0],dr[1])}}function Ni(){this.__data__=Dr?Dr(null):{},this.size=0}function Wn(Se){var et=this.has(Se)&&delete this.__data__[Se];return this.size-=et?1:0,et}function Yn(Se){var et=this.__data__;if(Dr){var Mt=et[Se];return Mt===s?void 0:Mt}return Fn.call(et,Se)?et[Se]:void 0}function zs(Se){var et=this.__data__;return Dr?et[Se]!==void 0:Fn.call(et,Se)}function Ys(Se,et){var Mt=this.__data__;return this.size+=this.has(Se)?0:1,Mt[Se]=Dr&&et===void 0?s:et,this}gn.prototype.clear=Ni,gn.prototype.delete=Wn,gn.prototype.get=Yn,gn.prototype.has=zs,gn.prototype.set=Ys;function hs(Se){var et=-1,Mt=Se==null?0:Se.length;for(this.clear();++et<Mt;){var dr=Se[et];this.set(dr[0],dr[1])}}function pe(){this.__data__=[],this.size=0}function c(Se){var et=this.__data__,Mt=Q(et,Se);if(Mt<0)return!1;var dr=et.length-1;return Mt==dr?et.pop():He.call(et,Mt,1),--this.size,!0}function d(Se){var et=this.__data__,Mt=Q(et,Se);return Mt<0?void 0:et[Mt][1]}function m(Se){return Q(this.__data__,Se)>-1}function v(Se,et){var Mt=this.__data__,dr=Q(Mt,Se);return dr<0?(++this.size,Mt.push([Se,et])):Mt[dr][1]=et,this}hs.prototype.clear=pe,hs.prototype.delete=c,hs.prototype.get=d,hs.prototype.has=m,hs.prototype.set=v;function b(Se){var et=-1,Mt=Se==null?0:Se.length;for(this.clear();++et<Mt;){var dr=Se[et];this.set(dr[0],dr[1])}}function S(){this.size=0,this.__data__={hash:new gn,map:new(bt||hs),string:new gn}}function T(Se){var et=pn(this,Se).delete(Se);return this.size-=et?1:0,et}function M(Se){return pn(this,Se).get(Se)}function z(Se){return pn(this,Se).has(Se)}function $(Se,et){var Mt=pn(this,Se),dr=Mt.size;return Mt.set(Se,et),this.size+=Mt.size==dr?0:1,this}b.prototype.clear=S,b.prototype.delete=T,b.prototype.get=M,b.prototype.has=z,b.prototype.set=$;function H(Se){var et=-1,Mt=Se==null?0:Se.length;for(this.__data__=new b;++et<Mt;)this.add(Se[et])}function B(Se){return this.__data__.set(Se,s),this}function ee(Se){return this.__data__.has(Se)}H.prototype.add=H.prototype.push=B,H.prototype.has=ee;function re(Se){var et=this.__data__=new hs(Se);this.size=et.size}function ce(){this.__data__=new hs,this.size=0}function ye(Se){var et=this.__data__,Mt=et.delete(Se);return this.size=et.size,Mt}function _e(Se){return this.__data__.get(Se)}function Ee(Se){return this.__data__.has(Se)}function O(Se,et){var Mt=this.__data__;if(Mt instanceof hs){var dr=Mt.__data__;if(!bt||dr.length<y-1)return dr.push([Se,et]),this.size=++Mt.size,this;Mt=this.__data__=new b(dr)}return Mt.set(Se,et),this.size=Mt.size,this}re.prototype.clear=ce,re.prototype.delete=ye,re.prototype.get=_e,re.prototype.has=Ee,re.prototype.set=O;function X(Se,et){var Mt=Tn(Se),dr=!Mt&&ni(Se),Hr=!Mt&&!dr&&Li(Se),kr=!Mt&&!dr&&!Hr&&Qo(Se),en=Mt||dr||Hr||kr,wn=en?Tt(Se.length,String):[],Rn=wn.length;for(var kn in Se)(et||Fn.call(Se,kn))&&!(en&&(kn=="length"||Hr&&(kn=="offset"||kn=="parent")||kr&&(kn=="buffer"||kn=="byteLength"||kn=="byteOffset")||Rt(kn,Rn)))&&wn.push(kn);return wn}function Q(Se,et){for(var Mt=Se.length;Mt--;)if(Qn(Se[Mt][0],et))return Mt;return-1}function xe(Se,et,Mt){var dr=et(Se);return Tn(Se)?dr:wi(dr,Mt(Se))}function ke(Se){return Se==null?Se===void 0?Ye:de:Qe&&Qe in Object(Se)?Pn(Se):$r(Se)}function Le(Se){return Ci(Se)&&ke(Se)==N}function rt(Se,et,Mt,dr,Hr){return Se===et?!0:Se==null||et==null||!Ci(Se)&&!Ci(et)?Se!==Se&&et!==et:Ze(Se,et,Mt,dr,rt,Hr)}function Ze(Se,et,Mt,dr,Hr,kr){var en=Tn(Se),wn=Tn(et),Rn=en?U:it(Se),kn=wn?U:it(et);Rn=Rn==N?Ae:Rn,kn=kn==N?Ae:kn;var ss=Rn==Ae,os=kn==Ae,ji=Rn==kn;if(ji&&Li(Se)){if(!Li(et))return!1;en=!0,ss=!1}if(ji&&!ss)return kr||(kr=new re),en||Qo(Se)?hr(Se,et,Mt,dr,Hr,kr):ar(Se,et,Rn,Mt,dr,Hr,kr);if(!(Mt&k)){var yo=ss&&Fn.call(Se,"__wrapped__"),Ks=os&&Fn.call(et,"__wrapped__");if(yo||Ks){var ta=yo?Se.value():Se,$o=Ks?et.value():et;return kr||(kr=new re),Hr(ta,$o,Mt,dr,kr)}}return ji?(kr||(kr=new re),Jr(Se,et,Mt,dr,Hr,kr)):!1}function Et(Se){if(!Zs(Se)||Yr(Se))return!1;var et=Jo(Se)?is:ur;return et.test(ri(Se))}function Bt(Se){return Ci(Se)&&Bo(Se.length)&&!!fr[ke(Se)]}function Nt(Se){if(!Or(Se))return yt(Se);var et=[];for(var Mt in Object(Se))Fn.call(Se,Mt)&&Mt!="constructor"&&et.push(Mt);return et}function hr(Se,et,Mt,dr,Hr,kr){var en=Mt&k,wn=Se.length,Rn=et.length;if(wn!=Rn&&!(en&&Rn>wn))return!1;var kn=kr.get(Se);if(kn&&kr.get(et))return kn==et;var ss=-1,os=!0,ji=Mt&I?new H:void 0;for(kr.set(Se,et),kr.set(et,Se);++ss<wn;){var yo=Se[ss],Ks=et[ss];if(dr)var ta=en?dr(Ks,yo,ss,et,Se,kr):dr(yo,Ks,ss,Se,et,kr);if(ta!==void 0){if(ta)continue;os=!1;break}if(ji){if(!Hi(et,function($o,Co){if(!Er(ji,Co)&&(yo===$o||Hr(yo,$o,Mt,dr,kr)))return ji.push(Co)})){os=!1;break}}else if(!(yo===Ks||Hr(yo,Ks,Mt,dr,kr))){os=!1;break}}return kr.delete(Se),kr.delete(et),os}function ar(Se,et,Mt,dr,Hr,kr,en){switch(Mt){case or:if(Se.byteLength!=et.byteLength||Se.byteOffset!=et.byteOffset)return!1;Se=Se.buffer,et=et.buffer;case Pt:return!(Se.byteLength!=et.byteLength||!kr(new we(Se),new we(et)));case Z:case ae:case he:return Qn(+Se,+et);case ve:return Se.name==et.name&&Se.message==et.message;case Pe:case Ve:return Se==et+"";case K:var wn=Zt;case $e:var Rn=dr&k;if(wn||(wn=Xr),Se.size!=et.size&&!Rn)return!1;var kn=en.get(Se);if(kn)return kn==et;dr|=I,en.set(Se,et);var ss=hr(wn(Se),wn(et),dr,Hr,kr,en);return en.delete(Se),ss;case Fe:if($n)return $n.call(Se)==$n.call(et)}return!1}function Jr(Se,et,Mt,dr,Hr,kr){var en=Mt&k,wn=tn(Se),Rn=wn.length,kn=tn(et),ss=kn.length;if(Rn!=ss&&!en)return!1;for(var os=Rn;os--;){var ji=wn[os];if(!(en?ji in et:Fn.call(et,ji)))return!1}var yo=kr.get(Se);if(yo&&kr.get(et))return yo==et;var Ks=!0;kr.set(Se,et),kr.set(et,Se);for(var ta=en;++os<Rn;){ji=wn[os];var $o=Se[ji],Co=et[ji];if(dr)var Mn=en?dr(Co,$o,ji,et,Se,kr):dr($o,Co,ji,Se,et,kr);if(!(Mn===void 0?$o===Co||Hr($o,Co,Mt,dr,kr):Mn)){Ks=!1;break}ta||(ta=ji=="constructor")}if(Ks&&!ta){var Pu=Se.constructor,Hl=et.constructor;Pu!=Hl&&"constructor"in Se&&"constructor"in et&&!(typeof Pu=="function"&&Pu instanceof Pu&&typeof Hl=="function"&&Hl instanceof Hl)&&(Ks=!1)}return kr.delete(Se),kr.delete(et),Ks}function tn(Se){return xe(Se,ea,Jn)}function pn(Se,et){var Mt=Se.__data__;return nr(et)?Mt[typeof et=="string"?"string":"hash"]:Mt.map}function bn(Se,et){var Mt=Mr(Se,et);return Et(Mt)?Mt:void 0}function Pn(Se){var et=Fn.call(Se,Qe),Mt=Se[Qe];try{Se[Qe]=void 0;var dr=!0}catch{}var Hr=Si.call(Se);return dr&&(et?Se[Qe]=Mt:delete Se[Qe]),Hr}var Jn=ot?function(Se){return Se==null?[]:(Se=Object(Se),En(ot(Se),function(et){return Ce.call(Se,et)}))}:Xe,it=ke;(ct&&it(new ct(new ArrayBuffer(1)))!=or||bt&&it(new bt)!=K||qt&&it(qt.resolve())!=Te||Kt&&it(new Kt)!=$e||Gt&&it(new Gt)!=ft)&&(it=function(Se){var et=ke(Se),Mt=et==Ae?Se.constructor:void 0,dr=Mt?ri(Mt):"";if(dr)switch(dr){case Qr:return or;case Vr:return K;case jr:return Te;case Rr:return $e;case Cn:return ft}return et});function Rt(Se,et){return et=et??D,!!et&&(typeof Se=="number"||Tr.test(Se))&&Se>-1&&Se%1==0&&Se<et}function nr(Se){var et=typeof Se;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?Se!=="__proto__":Se===null}function Yr(Se){return!!Ki&&Ki in Se}function Or(Se){var et=Se&&Se.constructor,Mt=typeof et=="function"&&et.prototype||qn;return Se===Mt}function $r(Se){return Si.call(Se)}function ri(Se){if(Se!=null){try{return zi.call(Se)}catch{}try{return Se+""}catch{}}return""}function Qn(Se,et){return Se===et||Se!==Se&&et!==et}var ni=Le(function(){return arguments}())?Le:function(Se){return Ci(Se)&&Fn.call(Se,"callee")&&!Ce.call(Se,"callee")},Tn=Array.isArray;function Fo(Se){return Se!=null&&Bo(Se.length)&&!Jo(Se)}var Li=gt||ht;function ii(Se,et){return rt(Se,et)}function Jo(Se){if(!Zs(Se))return!1;var et=ke(Se);return et==ie||et==W||et==q||et==Ue}function Bo(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=D}function Zs(Se){var et=typeof Se;return Se!=null&&(et=="object"||et=="function")}function Ci(Se){return Se!=null&&typeof Se=="object"}var Qo=Kr?pr(Kr):Bt;function ea(Se){return Fo(Se)?X(Se):Nt(Se)}function Xe(){return[]}function ht(){return!1}n.exports=ii}).call(this)}).call(this,typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{})},{}],14:[function(r,n,o){(function(f){(function(){var y=r("lodash._reinterpolate"),s=r("lodash.templatesettings"),k=800,I=16,D=1/0,N=9007199254740991,U="[object Arguments]",q="[object Array]",Z="[object AsyncFunction]",ae="[object Boolean]",ve="[object Date]",ie="[object DOMException]",W="[object Error]",K="[object Function]",he="[object GeneratorFunction]",de="[object Map]",Ae="[object Number]",Te="[object Null]",Ue="[object Object]",Pe="[object Proxy]",$e="[object RegExp]",Ve="[object Set]",Fe="[object String]",Ye="[object Symbol]",ft="[object Undefined]",Pt="[object WeakMap]",or="[object ArrayBuffer]",xr="[object DataView]",mt="[object Float32Array]",Xt="[object Float64Array]",Wt="[object Int8Array]",Ot="[object Int16Array]",ut="[object Int32Array]",Vt="[object Uint8Array]",ir="[object Uint8ClampedArray]",vt="[object Uint16Array]",Dt="[object Uint32Array]",ur=/\b__p \+= '';/g,Tr=/\b(__p \+=) '' \+/g,fr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Cr=/[\\^$.*+?()[\]{}|]/g,mr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nn=/^\[object .+?Constructor\]$/,Br=/^(?:0|[1-9]\d*)$/,Sn=/($^)/,on=/['\n\r\u2028\u2029\\]/g,Gr={};Gr[mt]=Gr[Xt]=Gr[Wt]=Gr[Ot]=Gr[ut]=Gr[Vt]=Gr[ir]=Gr[vt]=Gr[Dt]=!0,Gr[U]=Gr[q]=Gr[or]=Gr[ae]=Gr[xr]=Gr[ve]=Gr[W]=Gr[K]=Gr[de]=Gr[Ae]=Gr[Ue]=Gr[$e]=Gr[Ve]=Gr[Fe]=Gr[Pt]=!1;var Zi={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kr=typeof f=="object"&&f&&f.Object===Object&&f,En=typeof self=="object"&&self&&self.Object===Object&&self,wi=Kr||En||Function("return this")(),Hi=typeof o=="object"&&o&&!o.nodeType&&o,Tt=Hi&&typeof n=="object"&&n&&!n.nodeType&&n,pr=Tt&&Tt.exports===Hi,Er=pr&&Kr.process,Mr=function(){try{var it=Tt&&Tt.require&&Tt.require("util").types;return it||Er&&Er.binding&&Er.binding("util")}catch{}}(),Zt=Mr&&Mr.isTypedArray;function gr(it,Rt,nr){switch(nr.length){case 0:return it.call(Rt);case 1:return it.call(Rt,nr[0]);case 2:return it.call(Rt,nr[0],nr[1]);case 3:return it.call(Rt,nr[0],nr[1],nr[2])}return it.apply(Rt,nr)}function Xr(it,Rt){for(var nr=-1,Yr=it==null?0:it.length,Or=Array(Yr);++nr<Yr;)Or[nr]=Rt(it[nr],nr,it);return Or}function Hn(it,Rt){for(var nr=-1,Yr=Array(it);++nr<it;)Yr[nr]=Rt(nr);return Yr}function ti(it){return function(Rt){return it(Rt)}}function qn(it,Rt){return Xr(Rt,function(nr){return it[nr]})}function Ii(it){return"\\"+Zi[it]}function zi(it,Rt){return it==null?void 0:it[Rt]}function Fn(it,Rt){return function(nr){return it(Rt(nr))}}var Ki=Function.prototype,Si=Object.prototype,is=wi["__core-js_shared__"],Ds=Ki.toString,Ge=Si.hasOwnProperty,we=function(){var it=/[^.]+$/.exec(is&&is.keys&&is.keys.IE_PROTO||"");return it?"Symbol(src)_1."+it:""}(),Ce=Si.toString,He=Ds.call(Object),Qe=RegExp("^"+Ds.call(Ge).replace(Cr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=pr?wi.Buffer:void 0,gt=wi.Symbol,yt=Fn(Object.getPrototypeOf,Object),ct=Si.propertyIsEnumerable,bt=gt?gt.toStringTag:void 0,qt=function(){try{var it=v(Object,"defineProperty");return it({},"",{}),it}catch{}}(),Kt=ot?ot.isBuffer:void 0,Gt=Fn(Object.keys,Object),Dr=Math.max,Qr=Date.now,Vr=gt?gt.prototype:void 0,jr=Vr?Vr.toString:void 0;function Rr(it,Rt){var nr=Ee(it),Yr=!nr&&_e(it),Or=!nr&&!Yr&&X(it),$r=!nr&&!Yr&&!Or&&Bt(it),ri=nr||Yr||Or||$r,Qn=ri?Hn(it.length,String):[],ni=Qn.length;for(var Tn in it)(Rt||Ge.call(it,Tn))&&!(ri&&(Tn=="length"||Or&&(Tn=="offset"||Tn=="parent")||$r&&(Tn=="buffer"||Tn=="byteLength"||Tn=="byteOffset")||S(Tn,ni)))&&Qn.push(Tn);return Qn}function Cn(it,Rt,nr){var Yr=it[Rt];(!(Ge.call(it,Rt)&&ye(Yr,nr))||nr===void 0&&!(Rt in it))&&Bn(it,Rt,nr)}function Bn(it,Rt,nr){Rt=="__proto__"&&qt?qt(it,Rt,{configurable:!0,enumerable:!0,value:nr,writable:!0}):it[Rt]=nr}function $n(it){return it==null?it===void 0?ft:Te:bt&&bt in Object(it)?b(it):H(it)}function gn(it){return rt(it)&&$n(it)==U}function Ni(it){if(!Le(it)||M(it))return!1;var Rt=xe(it)?Qe:nn;return Rt.test(ce(it))}function Wn(it){return rt(it)&&ke(it.length)&&!!Gr[$n(it)]}function Yn(it){if(!z(it))return Gt(it);var Rt=[];for(var nr in Object(it))Ge.call(it,nr)&&nr!="constructor"&&Rt.push(nr);return Rt}function zs(it){if(!Le(it))return $(it);var Rt=z(it),nr=[];for(var Yr in it)Yr=="constructor"&&(Rt||!Ge.call(it,Yr))||nr.push(Yr);return nr}function Ys(it,Rt){return ee(B(it,Rt,Pn),it+"")}var hs=qt?function(it,Rt){return qt(it,"toString",{configurable:!0,enumerable:!1,value:bn(Rt),writable:!0})}:Pn;function pe(it){if(typeof it=="string")return it;if(Ee(it))return Xr(it,pe)+"";if(Et(it))return jr?jr.call(it):"";var Rt=it+"";return Rt=="0"&&1/it==-D?"-0":Rt}function c(it,Rt,nr,Yr){var Or=!nr;nr||(nr={});for(var $r=-1,ri=Rt.length;++$r<ri;){var Qn=Rt[$r],ni=Yr?Yr(nr[Qn],it[Qn],Qn,nr,it):void 0;ni===void 0&&(ni=it[Qn]),Or?Bn(nr,Qn,ni):Cn(nr,Qn,ni)}return nr}function d(it){return Ys(function(Rt,nr){var Yr=-1,Or=nr.length,$r=Or>1?nr[Or-1]:void 0,ri=Or>2?nr[2]:void 0;for($r=it.length>3&&typeof $r=="function"?(Or--,$r):void 0,ri&&T(nr[0],nr[1],ri)&&($r=Or<3?void 0:$r,Or=1),Rt=Object(Rt);++Yr<Or;){var Qn=nr[Yr];Qn&&it(Rt,Qn,Yr,$r)}return Rt})}function m(it,Rt,nr,Yr){return it===void 0||ye(it,Si[nr])&&!Ge.call(Yr,nr)?Rt:it}function v(it,Rt){var nr=zi(it,Rt);return Ni(nr)?nr:void 0}function b(it){var Rt=Ge.call(it,bt),nr=it[bt];try{it[bt]=void 0;var Yr=!0}catch{}var Or=Ce.call(it);return Yr&&(Rt?it[bt]=nr:delete it[bt]),Or}function S(it,Rt){var nr=typeof it;return Rt=Rt??N,!!Rt&&(nr=="number"||nr!="symbol"&&Br.test(it))&&it>-1&&it%1==0&&it<Rt}function T(it,Rt,nr){if(!Le(nr))return!1;var Yr=typeof Rt;return(Yr=="number"?O(nr)&&S(Rt,nr.length):Yr=="string"&&Rt in nr)?ye(nr[Rt],it):!1}function M(it){return!!we&&we in it}function z(it){var Rt=it&&it.constructor,nr=typeof Rt=="function"&&Rt.prototype||Si;return it===nr}function $(it){var Rt=[];if(it!=null)for(var nr in Object(it))Rt.push(nr);return Rt}function H(it){return Ce.call(it)}function B(it,Rt,nr){return Rt=Dr(Rt===void 0?it.length-1:Rt,0),function(){for(var Yr=arguments,Or=-1,$r=Dr(Yr.length-Rt,0),ri=Array($r);++Or<$r;)ri[Or]=Yr[Rt+Or];Or=-1;for(var Qn=Array(Rt+1);++Or<Rt;)Qn[Or]=Yr[Or];return Qn[Rt]=nr(ri),gr(it,this,Qn)}}var ee=re(hs);function re(it){var Rt=0,nr=0;return function(){var Yr=Qr(),Or=I-(Yr-nr);if(nr=Yr,Or>0){if(++Rt>=k)return arguments[0]}else Rt=0;return it.apply(void 0,arguments)}}function ce(it){if(it!=null){try{return Ds.call(it)}catch{}try{return it+""}catch{}}return""}function ye(it,Rt){return it===Rt||it!==it&&Rt!==Rt}var _e=gn(function(){return arguments}())?gn:function(it){return rt(it)&&Ge.call(it,"callee")&&!ct.call(it,"callee")},Ee=Array.isArray;function O(it){return it!=null&&ke(it.length)&&!xe(it)}var X=Kt||Jn;function Q(it){if(!rt(it))return!1;var Rt=$n(it);return Rt==W||Rt==ie||typeof it.message=="string"&&typeof it.name=="string"&&!Ze(it)}function xe(it){if(!Le(it))return!1;var Rt=$n(it);return Rt==K||Rt==he||Rt==Z||Rt==Pe}function ke(it){return typeof it=="number"&&it>-1&&it%1==0&&it<=N}function Le(it){var Rt=typeof it;return it!=null&&(Rt=="object"||Rt=="function")}function rt(it){return it!=null&&typeof it=="object"}function Ze(it){if(!rt(it)||$n(it)!=Ue)return!1;var Rt=yt(it);if(Rt===null)return!0;var nr=Ge.call(Rt,"constructor")&&Rt.constructor;return typeof nr=="function"&&nr instanceof nr&&Ds.call(nr)==He}function Et(it){return typeof it=="symbol"||rt(it)&&$n(it)==Ye}var Bt=Zt?ti(Zt):Wn;function Nt(it){return it==null?"":pe(it)}var hr=d(function(it,Rt,nr,Yr){c(Rt,Jr(Rt),it,Yr)});function ar(it){return O(it)?Rr(it):Yn(it)}function Jr(it){return O(it)?Rr(it,!0):zs(it)}function tn(it,Rt,nr){var Yr=s.imports._.templateSettings||s;nr&&T(it,Rt,nr)&&(Rt=void 0),it=Nt(it),Rt=hr({},Rt,Yr,m);var Or=hr({},Rt.imports,Yr.imports,m),$r=ar(Or),ri=qn(Or,$r),Qn,ni,Tn=0,Fo=Rt.interpolate||Sn,Li="__p += '",ii=RegExp((Rt.escape||Sn).source+"|"+Fo.source+"|"+(Fo===y?mr:Sn).source+"|"+(Rt.evaluate||Sn).source+"|$","g"),Jo=Ge.call(Rt,"sourceURL")?"//# sourceURL="+(Rt.sourceURL+"").replace(/[\r\n]/g," ")+`
`:"";it.replace(ii,function(Ci,Qo,ea,Xe,ht,Se){return ea||(ea=Xe),Li+=it.slice(Tn,Se).replace(on,Ii),Qo&&(Qn=!0,Li+=`' +
__e(`+Qo+`) +
'`),ht&&(ni=!0,Li+=`';
`+ht+`;
__p += '`),ea&&(Li+=`' +
((__t = (`+ea+`)) == null ? '' : __t) +
'`),Tn=Se+Ci.length,Ci}),Li+=`';
`;var Bo=Ge.call(Rt,"variable")&&Rt.variable;Bo||(Li=`with (obj) {
`+Li+`
}
`),Li=(ni?Li.replace(ur,""):Li).replace(Tr,"$1").replace(fr,"$1;"),Li="function("+(Bo||"obj")+`) {
`+(Bo?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Qn?", __e = _.escape":"")+(ni?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Li+`return __p
}`;var Zs=pn(function(){return Function($r,Jo+"return "+Li).apply(void 0,ri)});if(Zs.source=Li,Q(Zs))throw Zs;return Zs}var pn=Ys(function(it,Rt){try{return gr(it,void 0,Rt)}catch(nr){return Q(nr)?nr:new Error(nr)}});function bn(it){return function(){return it}}function Pn(it){return it}function Jn(){return!1}n.exports=tn}).call(this)}).call(this,typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._reinterpolate":11,"lodash.templatesettings":15}],15:[function(r,n,o){(function(f){(function(){var y=r("lodash._reinterpolate"),s=1/0,k="[object Symbol]",I=/[&<>"'`]/g,D=RegExp(I.source),N=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Z=typeof f=="object"&&f&&f.Object===Object&&f,ae=typeof self=="object"&&self&&self.Object===Object&&self,ve=Z||ae||Function("return this")();function ie(ft){return function(Pt){return ft==null?void 0:ft[Pt]}}var W=ie(q),K=Object.prototype,he=K.toString,de=ve.Symbol,Ae=de?de.prototype:void 0,Te=Ae?Ae.toString:void 0,Ue={escape:N,evaluate:U,interpolate:y,variable:"",imports:{_:{escape:Ye}}};function Pe(ft){if(typeof ft=="string")return ft;if(Ve(ft))return Te?Te.call(ft):"";var Pt=ft+"";return Pt=="0"&&1/ft==-s?"-0":Pt}function $e(ft){return!!ft&&typeof ft=="object"}function Ve(ft){return typeof ft=="symbol"||$e(ft)&&he.call(ft)==k}function Fe(ft){return ft==null?"":Pe(ft)}function Ye(ft){return ft=Fe(ft),ft&&D.test(ft)?ft.replace(I,W):ft}n.exports=Ue}).call(this)}).call(this,typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._reinterpolate":11}],16:[function(r,n,o){var f=n.exports={},y,s;function k(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?y=setTimeout:y=k}catch{y=k}try{typeof clearTimeout=="function"?s=clearTimeout:s=I}catch{s=I}})();function D(he){if(y===setTimeout)return setTimeout(he,0);if((y===k||!y)&&setTimeout)return y=setTimeout,setTimeout(he,0);try{return y(he,0)}catch{try{return y.call(null,he,0)}catch{return y.call(this,he,0)}}}function N(he){if(s===clearTimeout)return clearTimeout(he);if((s===I||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(he);try{return s(he)}catch{try{return s.call(null,he)}catch{return s.call(this,he)}}}var U=[],q=!1,Z,ae=-1;function ve(){!q||!Z||(q=!1,Z.length?U=Z.concat(U):ae=-1,U.length&&ie())}function ie(){if(!q){var he=D(ve);q=!0;for(var de=U.length;de;){for(Z=U,U=[];++ae<de;)Z&&Z[ae].run();ae=-1,de=U.length}Z=null,q=!1,N(he)}}f.nextTick=function(he){var de=new Array(arguments.length-1);if(arguments.length>1)for(var Ae=1;Ae<arguments.length;Ae++)de[Ae-1]=arguments[Ae];U.push(new W(he,de)),U.length===1&&!q&&D(ie)};function W(he,de){this.fun=he,this.array=de}W.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function K(){}f.on=K,f.addListener=K,f.once=K,f.off=K,f.removeListener=K,f.removeAllListeners=K,f.emit=K,f.prependListener=K,f.prependOnceListener=K,f.listeners=function(he){return[]},f.binding=function(he){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(he){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],17:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function f(k){var I=function(N){var U=N.dispatch,q=N.getState;return function(Z){return function(ae){return typeof ae=="function"?ae(U,q,k):Z(ae)}}};return I}var y=f();y.withExtraArgument=f;var s=y;o.default=s},{}],18:[function(r,n,o){(function(f){(function(){Object.defineProperty(o,"__esModule",{value:!0});var y=r("@babel/runtime/helpers/objectSpread2");function s(Ae){return Ae&&typeof Ae=="object"&&"default"in Ae?Ae:{default:Ae}}var k=s(y);function I(Ae){return"Minified Redux error #"+Ae+"; visit https://redux.js.org/Errors?code="+Ae+" for the full message or use the non-minified dev environment for full errors. "}var D=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),N=function(){return Math.random().toString(36).substring(7).split("").join(".")},U={INIT:"@@redux/INIT"+N(),REPLACE:"@@redux/REPLACE"+N(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+N()}};function q(Ae){if(typeof Ae!="object"||Ae===null)return!1;for(var Te=Ae;Object.getPrototypeOf(Te)!==null;)Te=Object.getPrototypeOf(Te);return Object.getPrototypeOf(Ae)===Te}function Z(Ae,Te,Ue){var Pe;if(typeof Te=="function"&&typeof Ue=="function"||typeof Ue=="function"&&typeof arguments[3]=="function")throw new Error(I(0));if(typeof Te=="function"&&typeof Ue>"u"&&(Ue=Te,Te=void 0),typeof Ue<"u"){if(typeof Ue!="function")throw new Error(I(1));return Ue(Z)(Ae,Te)}if(typeof Ae!="function")throw new Error(I(2));var $e=Ae,Ve=Te,Fe=[],Ye=Fe,ft=!1;function Pt(){Ye===Fe&&(Ye=Fe.slice())}function or(){if(ft)throw new Error(I(3));return Ve}function xr(Ot){if(typeof Ot!="function")throw new Error(I(4));if(ft)throw new Error(I(5));var ut=!0;return Pt(),Ye.push(Ot),function(){if(ut){if(ft)throw new Error(I(6));ut=!1,Pt();var ir=Ye.indexOf(Ot);Ye.splice(ir,1),Fe=null}}}function mt(Ot){if(!q(Ot))throw new Error(I(7));if(typeof Ot.type>"u")throw new Error(I(8));if(ft)throw new Error(I(9));try{ft=!0,Ve=$e(Ve,Ot)}finally{ft=!1}for(var ut=Fe=Ye,Vt=0;Vt<ut.length;Vt++){var ir=ut[Vt];ir()}return Ot}function Xt(Ot){if(typeof Ot!="function")throw new Error(I(10));$e=Ot,mt({type:U.REPLACE})}function Wt(){var Ot,ut=xr;return Ot={subscribe:function(ir){if(typeof ir!="object"||ir===null)throw new Error(I(11));function vt(){ir.next&&ir.next(or())}vt();var Dt=ut(vt);return{unsubscribe:Dt}}},Ot[D]=function(){return this},Ot}return mt({type:U.INIT}),Pe={dispatch:mt,subscribe:xr,getState:or,replaceReducer:Xt},Pe[D]=Wt,Pe}var ae=Z;function ve(Ae){Object.keys(Ae).forEach(function(Te){var Ue=Ae[Te],Pe=Ue(void 0,{type:U.INIT});if(typeof Pe>"u")throw new Error(I(12));if(typeof Ue(void 0,{type:U.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(I(13))})}function ie(Ae){for(var Te=Object.keys(Ae),Ue={},Pe=0;Pe<Te.length;Pe++){var $e=Te[Pe];typeof Ae[$e]=="function"&&(Ue[$e]=Ae[$e])}var Ve=Object.keys(Ue),Fe;try{ve(Ue)}catch(Ye){Fe=Ye}return function(ft,Pt){if(ft===void 0&&(ft={}),Fe)throw Fe;for(var or=!1,xr={},mt=0;mt<Ve.length;mt++){var Xt=Ve[mt],Wt=Ue[Xt],Ot=ft[Xt],ut=Wt(Ot,Pt);if(typeof ut>"u")throw Pt&&Pt.type,new Error(I(14));xr[Xt]=ut,or=or||ut!==Ot}return or=or||Ve.length!==Object.keys(ft).length,or?xr:ft}}function W(Ae,Te){return function(){return Te(Ae.apply(this,arguments))}}function K(Ae,Te){if(typeof Ae=="function")return W(Ae,Te);if(typeof Ae!="object"||Ae===null)throw new Error(I(16));var Ue={};for(var Pe in Ae){var $e=Ae[Pe];typeof $e=="function"&&(Ue[Pe]=W($e,Te))}return Ue}function he(){for(var Ae=arguments.length,Te=new Array(Ae),Ue=0;Ue<Ae;Ue++)Te[Ue]=arguments[Ue];return Te.length===0?function(Pe){return Pe}:Te.length===1?Te[0]:Te.reduce(function(Pe,$e){return function(){return Pe($e.apply(void 0,arguments))}})}function de(){for(var Ae=arguments.length,Te=new Array(Ae),Ue=0;Ue<Ae;Ue++)Te[Ue]=arguments[Ue];return function(Pe){return function(){var $e=Pe.apply(void 0,arguments),Ve=function(){throw new Error(I(15))},Fe={getState:$e.getState,dispatch:function(){return Ve.apply(void 0,arguments)}},Ye=Te.map(function(ft){return ft(Fe)});return Ve=he.apply(void 0,Ye)($e.dispatch),k.default(k.default({},$e),{},{dispatch:Ve})}}}o.__DO_NOT_USE__ActionTypes=U,o.applyMiddleware=de,o.bindActionCreators=K,o.combineReducers=ie,o.compose=he,o.createStore=Z,o.legacy_createStore=ae}).call(this)}).call(this,r("_process"))},{"@babel/runtime/helpers/objectSpread2":2,_process:16}],19:[function(r,n,o){var f=r("./src/suggestions");n.exports=f,typeof window<"u"&&(window.Suggestions=f)},{"./src/suggestions":21}],20:[function(r,n,o){var f=function(y){return this.component=y,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,y.el.parentNode.insertBefore(this.wrapper,y.el.nextSibling),this};f.prototype.show=function(){this.element.style.display="block"},f.prototype.hide=function(){this.element.style.display="none"},f.prototype.add=function(y){this.items.push(y)},f.prototype.clear=function(){this.items=[],this.active=0},f.prototype.isEmpty=function(){return!this.items.length},f.prototype.isVisible=function(){return this.element.style.display==="block"},f.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var y=0;y<this.items.length;y++)this.drawItem(this.items[y],this.active===y);this.show()},f.prototype.drawItem=function(y,s){var k=document.createElement("li"),I=document.createElement("a");s&&(k.className+=" active"),I.innerHTML=y.string,k.appendChild(I),this.element.appendChild(k),k.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),k.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,y)}).bind(this))},f.prototype.handleMouseUp=function(y){this.selectingListItem=!1,this.component.value(y.original),this.clear(),this.draw()},f.prototype.move=function(y){this.active=y,this.draw()},f.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)},f.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)},f.prototype.drawError=function(y){var s=document.createElement("li");s.innerHTML=y,this.element.appendChild(s),this.show()},n.exports=f},{}],21:[function(r,n,o){var f=r("xtend"),y=r("fuzzy"),s=r("./list"),k=function(I,D,N){return N=N||{},this.options=f({minLength:2,limit:5,filter:!0,hideOnBlur:!0},N),this.el=I,this.data=D||[],this.list=new s(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(U){this.handleKeyUp(U.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(U){this.handleKeyDown(U)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(U){this.handlePaste(U)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};k.prototype.handleKeyUp=function(I){I===40||I===38||I===27||I===13||I===9||this.handleInputChange(this.el.value)},k.prototype.handleKeyDown=function(I){switch(I.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&I.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}},k.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()},k.prototype.handlePaste=function(I){if(I.clipboardData)this.handleInputChange(I.clipboardData.getData("Text"));else{var D=this;setTimeout(function(){D.handleInputChange(I.target.value)},100)}},k.prototype.handleInputChange=function(I){if(this.query=this.normalize(I),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(D){for(var N=0;N<D.length&&(this.list.add(D[N]),N!==this.options.limit-1);N++);this.list.draw()}).bind(this))},k.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1},k.prototype.update=function(I){this.data=I,this.handleKeyUp()},k.prototype.clear=function(){this.data=[],this.list.clear()},k.prototype.normalize=function(I){return I=I.toLowerCase(),I},k.prototype.match=function(I,D){return I.indexOf(D)>-1},k.prototype.value=function(I){if(this.selected=I,this.el.value=this.getItemValue(I),document.createEvent){var D=document.createEvent("HTMLEvents");D.initEvent("change",!0,!1),this.el.dispatchEvent(D)}else this.el.fireEvent("onchange")},k.prototype.getCandidates=function(I){var D={pre:"<strong>",post:"</strong>",extract:(function(U){return this.getItemValue(U)}).bind(this)},N;this.options.filter?(N=y.filter(this.query,this.data,D),N=N.map((function(U){return{original:U.original,string:this.render(U.original,U.string)}}).bind(this))):N=this.data.map((function(U){var q=this.render(U);return{original:U,string:q}}).bind(this)),I(N)},k.prototype.getItemValue=function(I){return I},k.prototype.render=function(I,D){if(D)return D;for(var N=I.original?this.getItemValue(I.original):this.getItemValue(I),U=this.normalize(N),q=U.lastIndexOf(this.query);q>-1;){var Z=q+this.query.length;N=N.slice(0,q)+"<strong>"+N.slice(q,Z)+"</strong>"+N.slice(Z),q=U.slice(0,q).lastIndexOf(this.query)}return N},k.prototype.renderError=function(I){this.list.drawError(I)},n.exports=k},{"./list":20,fuzzy:9,xtend:24}],22:[function(r,n,o){var f=r("turf-meta").coordEach;n.exports=function(y){var s=[1/0,1/0,-1/0,-1/0];return f(y,function(k){s[0]>k[0]&&(s[0]=k[0]),s[1]>k[1]&&(s[1]=k[1]),s[2]<k[0]&&(s[2]=k[0]),s[3]<k[1]&&(s[3]=k[1])}),s}},{"turf-meta":23}],23:[function(r,n,o){function f(I,D,N){var U,q,Z,ae,ve,ie,W,K,he=0,de,Ae=I.type==="FeatureCollection",Te=I.type==="Feature",Ue=Ae?I.features.length:1;for(U=0;U<Ue;U++)for(K=Ae?I.features[U].geometry:Te?I.geometry:I,de=K.type==="GeometryCollection",ie=de?K.geometries.length:1,ae=0;ae<ie;ae++)if(ve=de?K.geometries[ae]:K,W=ve.coordinates,he=N&&(ve.type==="Polygon"||ve.type==="MultiPolygon")?1:0,ve.type==="Point")D(W);else if(ve.type==="LineString"||ve.type==="MultiPoint")for(q=0;q<W.length;q++)D(W[q]);else if(ve.type==="Polygon"||ve.type==="MultiLineString")for(q=0;q<W.length;q++)for(Z=0;Z<W[q].length-he;Z++)D(W[q][Z]);else if(ve.type==="MultiPolygon")for(q=0;q<W.length;q++)for(Z=0;Z<W[q].length;Z++)for(l=0;l<W[q][Z].length-he;l++)D(W[q][Z][l]);else throw new Error("Unknown Geometry Type")}n.exports.coordEach=f;function y(I,D,N,U){return f(I,function(q){N=D(N,q)},U),N}n.exports.coordReduce=y;function s(I,D){var N;switch(I.type){case"FeatureCollection":for(features=I.features,N=0;N<I.features.length;N++)D(I.features[N].properties);break;case"Feature":D(I.properties);break}}n.exports.propEach=s;function k(I,D,N){return s(I,function(U){N=D(N,U)}),N}n.exports.propReduce=k},{}],24:[function(r,n,o){n.exports=y;var f=Object.prototype.hasOwnProperty;function y(){for(var s={},k=0;k<arguments.length;k++){var I=arguments[k];for(var D in I)f.call(I,D)&&(s[D]=I[D])}return s}},{}],25:[function(r,n,o){function f(vt){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Dt){return typeof Dt}:function(Dt){return Dt&&typeof Symbol=="function"&&Dt.constructor===Symbol&&Dt!==Symbol.prototype?"symbol":typeof Dt},f(vt)}Object.defineProperty(o,"__esModule",{value:!0}),o.addWaypoint=Wt,o.clearDestination=$e,o.clearOrigin=Pe,o.createDestination=Pt,o.createOrigin=ft,o.eventEmit=ir,o.eventSubscribe=Vt,o.hoverMarker=Fe,o.queryDestination=Ae,o.queryDestinationCoordinates=Ue,o.queryOrigin=de,o.queryOriginCoordinates=Te,o.removeWaypoint=ut,o.reverse=xr,o.setDestinationFromCoordinates=Xt,o.setOptions=Ve,o.setOriginFromCoordinates=mt,o.setProfile=or,o.setRouteIndex=Ye,o.setWaypoint=Ot;var y=D(r("../constants/action_types")),s=k(r("../utils"));function k(vt){return vt&&vt.__esModule?vt:{default:vt}}function I(vt){if(typeof WeakMap!="function")return null;var Dt=new WeakMap,ur=new WeakMap;return(I=function(fr){return fr?ur:Dt})(vt)}function D(vt,Dt){if(!Dt&&vt&&vt.__esModule)return vt;if(vt===null||f(vt)!=="object"&&typeof vt!="function")return{default:vt};var ur=I(Dt);if(ur&&ur.has(vt))return ur.get(vt);var Tr={},fr=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Cr in vt)if(Cr!=="default"&&Object.prototype.hasOwnProperty.call(vt,Cr)){var mr=fr?Object.getOwnPropertyDescriptor(vt,Cr):null;mr&&(mr.get||mr.set)?Object.defineProperty(Tr,Cr,mr):Tr[Cr]=vt[Cr]}return Tr.default=vt,ur&&ur.set(vt,Tr),Tr}var N=new XMLHttpRequest;function U(vt){return function(Dt){var ur=s.default.createPoint(vt,{id:"origin","marker-symbol":"A"});Dt({type:y.ORIGIN,origin:ur}),Dt(ir("origin",{feature:ur}))}}function q(vt){return function(Dt){var ur=s.default.createPoint(vt,{id:"destination","marker-symbol":"B"});Dt({type:y.DESTINATION,destination:ur}),Dt(ir("destination",{feature:ur}))}}function Z(vt){return function(Dt){Dt({type:y.DIRECTIONS,directions:vt}),Dt(ir("route",{route:vt}))}}function ae(vt){return{type:y.WAYPOINTS,waypoints:vt}}function ve(vt){return{type:y.HOVER_MARKER,hoverMarker:vt}}function ie(){return function(vt,Dt){var ur=Dt(),Tr=ur.api,fr=ur.accessToken,Cr=ur.routeIndex,mr=ur.profile,nn=ur.alternatives,Br=ur.congestion,Sn=ur.destination,on=ur.language,Gr=ur.exclude;if(Sn&&Sn.geometry){var Zi=W(Dt),Kr=[];Kr.push("geometries=polyline"),nn&&Kr.push("alternatives=true"),Br&&Kr.push("annotations=congestion"),Kr.push("steps=true"),Kr.push("overview=full"),on&&Kr.push("language="+on),Gr&&Kr.push("exclude="+Gr),fr&&Kr.push("access_token="+fr),N.abort(),N.open("GET","".concat(Tr).concat(mr,"/").concat(Zi,".json?").concat(Kr.join("&")),!0),N.onload=function(){if(N.status>=200&&N.status<400){var En=JSON.parse(N.responseText);if(En.error)return vt(Z([])),vt(he(En.error));if(En.message==="No route found")return vt(he("No route found"));vt(he(null)),En.routes[Cr]||vt(Ye(0)),vt(Z(En.routes)),vt(U(En.waypoints[0].location)),vt(q(En.waypoints[En.waypoints.length-1].location))}else return vt(Z([])),vt(he(JSON.parse(N.responseText).message))},N.onerror=function(){return vt(Z([])),N.responseText?vt(he(JSON.parse(N.responseText).message)):vt(he("Error"))},N.send()}}}function W(vt){var Dt=vt(),ur=Dt.origin,Tr=Dt.destination,fr=Dt.waypoints,Cr=[];return Cr.push(ur.geometry.coordinates.join(",")),Cr.push(";"),fr.length&&fr.forEach(function(mr){Cr.push(mr.geometry.coordinates.join(",")),Cr.push(";")}),Cr.push(Tr.geometry.coordinates.join(",")),encodeURIComponent(Cr.join(""))}function K(vt){var Dt={id:"waypoint"};return Object.assign(vt,{properties:vt.properties?Object.assign(vt.properties,Dt):Dt})}function he(vt){return function(Dt){Dt({type:"ERROR",error:vt}),vt&&Dt(ir("error",{error:vt}))}}function de(vt){return{type:y.ORIGIN_QUERY,query:vt}}function Ae(vt){return{type:y.DESTINATION_QUERY,query:vt}}function Te(vt){return{type:y.ORIGIN_FROM_COORDINATES,coordinates:vt}}function Ue(vt){return{type:y.DESTINATION_FROM_COORDINATES,coordinates:vt}}function Pe(){return function(vt){vt({type:y.ORIGIN_CLEAR}),vt(ir("clear",{type:"origin"})),vt(he(null))}}function $e(){return N.abort(),function(vt){vt({type:y.DESTINATION_CLEAR}),vt(ir("clear",{type:"destination"})),vt(he(null))}}function Ve(vt){return{type:y.SET_OPTIONS,options:vt}}function Fe(vt){return function(Dt){var ur=vt?s.default.createPoint(vt,{id:"hover"}):{};Dt(ve(ur))}}function Ye(vt){return{type:y.ROUTE_INDEX,routeIndex:vt}}function ft(vt){return function(Dt,ur){var Tr=ur(),fr=Tr.destination;Dt(U(vt)),fr.geometry&&Dt(ie())}}function Pt(vt){return function(Dt,ur){var Tr=ur(),fr=Tr.origin;Dt(q(vt)),fr.geometry&&Dt(ie())}}function or(vt){return function(Dt,ur){var Tr=ur(),fr=Tr.origin,Cr=Tr.destination;Dt({type:y.DIRECTIONS_PROFILE,profile:vt}),Dt(ir("profile",{profile:vt})),fr.geometry&&Cr.geometry&&Dt(ie())}}function xr(){return function(vt,Dt){var ur=Dt();ur.destination.geometry&&vt(U(ur.destination.geometry.coordinates)),ur.origin.geometry&&vt(q(ur.origin.geometry.coordinates)),ur.origin.geometry&&ur.destination.geometry&&vt(ie());for(var Tr=document.getElementsByClassName("suggestions"),fr=0;fr<Tr.length;fr++)Tr[fr].style.visibility="hidden"}}function mt(vt){return function(Dt){if(s.default.validCoords(vt)||(vt=[s.default.wrap(vt[0]),s.default.wrap(vt[1])]),isNaN(vt[0])&&isNaN(vt[1]))return Dt(he(new Error("Coordinates are not valid")));Dt(Te(vt)),Dt(ft(vt))}}function Xt(vt){return function(Dt){if(s.default.validCoords(vt)||(vt=[s.default.wrap(vt[0]),s.default.wrap(vt[1])]),isNaN(vt[0])&&isNaN(vt[1]))return Dt(he(new Error("Coordinates are not valid")));Dt(Pt(vt)),Dt(Ue(vt))}}function Wt(vt,Dt){return function(ur,Tr){var fr=Tr(),Cr=fr.destination,mr=fr.waypoints;mr.splice(vt,0,K(Dt)),ur(ae(mr)),Cr.geometry&&ur(ie())}}function Ot(vt,Dt){return function(ur,Tr){var fr=Tr(),Cr=fr.destination,mr=fr.waypoints;mr[vt]=K(Dt),ur(ae(mr)),Cr.geometry&&ur(ie())}}function ut(vt){return function(Dt,ur){var Tr=ur(),fr=Tr.destination,Cr=Tr.waypoints;Cr=Cr.filter(function(mr){return!s.default.coordinateMatch(mr,vt)}),Dt(ae(Cr)),fr.geometry&&Dt(ie())}}function Vt(vt,Dt){return function(ur,Tr){var fr=Tr(),Cr=fr.events;return Cr[vt]=Cr[vt]||[],Cr[vt].push(Dt),{type:y.EVENTS,events:Cr}}}function ir(vt,Dt){var ur=this;return function(Tr,fr){var Cr=fr(),mr=Cr.events;if(!mr[vt])return{type:y.EVENTS,events:mr};for(var nn=mr[vt].slice(),Br=0;Br<nn.length;Br++)nn[Br].call(ur,Dt)}}},{"../constants/action_types":26,"../utils":34}],26:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.WAYPOINTS=o.SET_OPTIONS=o.ROUTE_INDEX=o.ORIGIN_QUERY=o.ORIGIN_FROM_COORDINATES=o.ORIGIN_CLEAR=o.ORIGIN=o.HOVER_MARKER=o.EVENTS=o.ERROR=o.DIRECTIONS_PROFILE=o.DIRECTIONS=o.DESTINATION_QUERY=o.DESTINATION_FROM_COORDINATES=o.DESTINATION_CLEAR=o.DESTINATION=void 0;var f="DESTINATION";o.DESTINATION=f;var y="DESTINATION_CLEAR";o.DESTINATION_CLEAR=y;var s="DESTINATION_QUERY";o.DESTINATION_QUERY=s;var k="DESTINATION_FROM_COORDINATES";o.DESTINATION_FROM_COORDINATES=k;var I="DIRECTIONS";o.DIRECTIONS=I;var D="DIRECTIONS_PROFILE";o.DIRECTIONS_PROFILE=D;var N="EVENTS";o.EVENTS=N;var U="ERROR";o.ERROR=U;var q="HOVER_MARKER";o.HOVER_MARKER=q;var Z="ORIGIN";o.ORIGIN=Z;var ae="ORIGIN_CLEAR";o.ORIGIN_CLEAR=ae;var ve="ORIGIN_QUERY";o.ORIGIN_QUERY=ve;var ie="ORIGIN_FROM_COORDINATES";o.ORIGIN_FROM_COORDINATES=ie;var W="ROUTE_INDEX";o.ROUTE_INDEX=W;var K="SET_OPTIONS";o.SET_OPTIONS=K;var he="WAYPOINTS";o.WAYPOINTS=he},{}],27:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=I(r("suggestions")),y=I(r("lodash.debounce")),s=r("events"),k=I(r("../utils"));function I(ie){return ie&&ie.__esModule?ie:{default:ie}}function D(ie){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},D(ie)}function N(ie,W){if(!(ie instanceof W))throw new TypeError("Cannot call a class as a function")}function U(ie,W){for(var K=0;K<W.length;K++){var he=W[K];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ie,Z(he.key),he)}}function q(ie,W,K){return W&&U(ie.prototype,W),K&&U(ie,K),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function Z(ie){var W=ae(ie,"string");return D(W)==="symbol"?W:String(W)}function ae(ie,W){if(D(ie)!=="object"||ie===null)return ie;var K=ie[Symbol.toPrimitive];if(K!==void 0){var he=K.call(ie,W||"default");if(D(he)!=="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(ie)}var ve=function(){function ie(W){N(this,ie),this._ev=new s.EventEmitter,this.options=W,this.api=W&&W.api||"https://api.mapbox.com/geocoding/v5/mapbox.places/"}return q(ie,[{key:"onAdd",value:function(K){this._map=K,this.request=new XMLHttpRequest;var he=document.createElement("div");he.className="mapboxgl-ctrl-geocoder";var de=document.createElement("span");de.className="geocoder-icon geocoder-icon-search";var Ae=this._inputEl=document.createElement("input");Ae.type="text",Ae.placeholder=this.options.placeholder,Ae.addEventListener("keydown",(0,y.default)((function($e){if(!$e.target.value)return this._clearEl.classList.remove("active");$e.metaKey||[9,27,37,39,13,38,40].indexOf($e.keyCode)!==-1||this._queryFromInput($e.target.value)}).bind(this)),200),Ae.addEventListener("change",(function($e){$e.target.value&&this._clearEl.classList.add("active");var Ve=this._typeahead.selected;if(Ve){if(this.options.flyTo)if(Ve.bbox&&Ve.context&&Ve.context.length<=3||Ve.bbox&&!Ve.context){var Fe=Ve.bbox;K.fitBounds([[Fe[0],Fe[1]],[Fe[2],Fe[3]]])}else K.flyTo({center:Ve.center,zoom:this.options.zoom});this._input=Ve,this.fire("result",{result:Ve})}}).bind(this));var Te=document.createElement("div");Te.classList.add("geocoder-pin-right");var Ue=this._clearEl=document.createElement("button");Ue.className="geocoder-icon geocoder-icon-close",Ue.addEventListener("click",this._clear.bind(this));var Pe=this._loadingEl=document.createElement("span");return Pe.className="geocoder-icon geocoder-icon-loading",Te.appendChild(Ue),Te.appendChild(Pe),he.appendChild(de),he.appendChild(Ae),he.appendChild(Te),this.options.container&&(this.options.position=!1),this._typeahead=new f.default(Ae,[],{filter:!1}),this._typeahead.getItemValue=function($e){return $e.place_name},he}},{key:"_geocode",value:function(K,he){this._loadingEl.classList.add("active"),this.fire("loading");var de=this.options,Ae=["placeholder","zoom","flyTo","accessToken","api"],Te=Object.keys(this.options).filter(function(Pe){return Ae.indexOf(Pe)===-1}).map(function(Pe){return Pe+"="+de[Pe]}),Ue=this.options.accessToken?this.options.accessToken:mapboxgl.accessToken;Te.push("access_token="+Ue),this.request.abort(),this.request.open("GET",this.api+encodeURIComponent(K.trim())+".json?"+Te.join("&"),!0),this.request.onload=(function(){if(this._loadingEl.classList.remove("active"),this.request.status>=200&&this.request.status<400){var Pe=JSON.parse(this.request.responseText);return Pe.features.length?this._clearEl.classList.add("active"):(this._clearEl.classList.remove("active"),this._typeahead.selected=null),this.fire("results",{results:Pe.features}),this._typeahead.update(Pe.features),he(Pe.features)}else this.fire("error",{error:JSON.parse(this.request.responseText).message})}).bind(this),this.request.onerror=(function(){this._loadingEl.classList.remove("active"),this.fire("error",{error:JSON.parse(this.request.responseText).message})}).bind(this),this.request.send()}},{key:"_queryFromInput",value:function(K){K=K.trim(),K||this._clear(),K.length>2&&this._geocode(K,(function(he){this._results=he}).bind(this))}},{key:"_change",value:function(){var K=document.createEvent("HTMLEvents");K.initEvent("change",!0,!1),this._inputEl.dispatchEvent(K)}},{key:"_query",value:function(K){K&&(D(K)==="object"&&K.length&&(K=[k.default.wrap(K[0]),k.default.wrap(K[1])].join()),this._geocode(K,(function(he){if(he.length){var de=he[0];this._results=he,this._typeahead.selected=de,this._inputEl.value=de.place_name,this._change()}}).bind(this)))}},{key:"_setInput",value:function(K){K&&(D(K)==="object"&&K.length&&(K=[k.default.roundWithOriginalPrecision(k.default.wrap(K[0]),K[0]),k.default.roundWithOriginalPrecision(k.default.wrap(K[1]),K[1])].join()),this._inputEl.value=K,this._input=null,this._typeahead.selected=null,this._typeahead.clear(),this._change())}},{key:"_clear",value:function(){this._input=null,this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._change(),this._inputEl.focus(),this._clearEl.classList.remove("active"),this.fire("clear")}},{key:"getResult",value:function(){return this._input}},{key:"query",value:function(K){return this._query(K),this}},{key:"setInput",value:function(K){return this._setInput(K),this}},{key:"on",value:function(K,he){return this._ev.on(K,he),this._ev.on("error",function(de){console.log(de)}),this}},{key:"fire",value:function(K,he){return this._ev.emit(K,he),this}},{key:"off",value:function(K,he){return this._ev.removeListener(K,he),this}}]),ie}();o.default=ve},{"../utils":34,events:7,"lodash.debounce":12,suggestions:19}],28:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=I(r("./geocoder")),y=I(r("lodash.template")),s=I(r("lodash.isequal")),k=I(r("turf-extent"));function I(W){return W&&W.__esModule?W:{default:W}}function D(W){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},D(W)}function N(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")}function U(W,K){for(var he=0;he<K.length;he++){var de=K[he];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(W,Z(de.key),de)}}function q(W,K,he){return K&&U(W.prototype,K),he&&U(W,he),Object.defineProperty(W,"prototype",{writable:!1}),W}function Z(W){var K=ae(W,"string");return D(K)==="symbol"?K:String(K)}function ae(W,K){if(D(W)!=="object"||W===null)return W;var he=W[Symbol.toPrimitive];if(he!==void 0){var de=he.call(W,K||"default");if(D(de)!=="object")return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(W)}var ve=(0,y.default)(`<div class='mapbox-directions-component mapbox-directions-inputs'>
  <div class='mapbox-directions-component-keyline'>
    <div class='mapbox-directions-origin'>
      <label class='mapbox-form-label'>
        <span class='directions-icon directions-icon-depart'></span>
      </label>
      <div id='mapbox-directions-origin-input'></div>
    </div>

    <button
      class='directions-icon directions-icon-reverse directions-reverse js-reverse-inputs'
      title='Reverse origin &amp; destination'>
    </button>

    <div class='mapbox-directions-destination'>
      <label class='mapbox-form-label'>
        <span class='directions-icon directions-icon-arrive'></span>
      </label>
      <div id='mapbox-directions-destination-input'></div>
    </div>
  </div>

  <% if (controls.profileSwitcher) { %>
  <div class='mapbox-directions-profile mapbox-directions-component-keyline mapbox-directions-clearfix'><input
      id='mapbox-directions-profile-driving-traffic'
      type='radio'
      name='profile'
      value='mapbox/driving-traffic'
      <% if (profile === 'mapbox/driving-traffic') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-driving-traffic'>Traffic</label>
    <input
      id='mapbox-directions-profile-driving'
      type='radio'
      name='profile'
      value='mapbox/driving'
      <% if (profile === 'mapbox/driving') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-driving'>Driving</label>
    <input
      id='mapbox-directions-profile-walking'
      type='radio'
      name='profile'
      value='mapbox/walking'
      <% if (profile === 'mapbox/walking') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-walking'>Walking</label>
    <input
      id='mapbox-directions-profile-cycling'
      type='radio'
      name='profile'
      value='mapbox/cycling'
      <% if (profile === 'mapbox/cycling') { %>checked<% } %>
    />
    <label for='mapbox-directions-profile-cycling'>Cycling</label>
  </div>
  <% } %>
</div>
`),ie=function(){function W(K,he,de,Ae){N(this,W);var Te=he.getState(),Ue=Te.originQuery,Pe=Te.destinationQuery,$e=Te.profile,Ve=Te.controls;K.innerHTML=ve({originQuery:Ue,destinationQuery:Pe,profile:$e,controls:Ve}),this.container=K,this.actions=de,this.store=he,this._map=Ae,this.onAdd(),this.render()}return q(W,[{key:"animateToCoordinates",value:function(he,de){var Ae=this.store.getState(),Te=Ae.origin,Ue=Ae.destination,Pe=Ae.routePadding;if(Te.geometry&&Ue.geometry&&!(0,s.default)(Te.geometry,Ue.geometry)){var $e=(0,k.default)({type:"FeatureCollection",features:[Te,Ue]});this._map.fitBounds([[$e[0],$e[1]],[$e[2],$e[3]]],{padding:Pe})}else this._map.flyTo({center:de})}},{key:"onAdd",value:function(){var he=this,de=this.actions,Ae=de.clearOrigin,Te=de.clearDestination,Ue=de.createOrigin,Pe=de.createDestination,$e=de.setProfile,Ve=de.reverse,Fe=this.store.getState(),Ye=Fe.geocoder,ft=Fe.accessToken,Pt=Fe.flyTo,or=Fe.placeholderOrigin,xr=Fe.placeholderDestination,mt=Fe.zoom;this.originInput=new f.default(Object.assign({},{accessToken:ft},Ye,{flyTo:Pt,placeholder:or,zoom:mt}));var Xt=this.originInput.onAdd(this._map),Wt=this.container.querySelector("#mapbox-directions-origin-input");Wt.appendChild(Xt),this.destinationInput=new f.default(Object.assign({},{accessToken:ft},Ye,{flyTo:Pt,placeholder:xr,zoom:mt}));var Ot=this.destinationInput.onAdd(this._map);this.container.querySelector("#mapbox-directions-destination-input").appendChild(Ot),this.originInput.on("result",function(Vt){var ir=Vt.result.center;Ue(ir),he.animateToCoordinates("origin",ir)}),this.originInput.on("clear",Ae),this.destinationInput.on("result",function(Vt){var ir=Vt.result.center;Pe(ir),he.animateToCoordinates("destination",ir)}),this.destinationInput.on("clear",Te);var ut=this.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(ut,function(Vt){Vt.addEventListener("change",function(){$e(Vt.value)})}),this.container.querySelector(".js-reverse-inputs").addEventListener("click",function(){var Vt=he.store.getState(),ir=Vt.origin,vt=Vt.destination;ir&&he.actions.queryDestination(ir.geometry.coordinates),vt&&he.actions.queryOrigin(vt.geometry.coordinates),Ve()})}},{key:"render",value:function(){var he=this;this.store.subscribe(function(){var de=he.store.getState(),Ae=de.originQuery,Te=de.destinationQuery,Ue=de.originQueryCoordinates,Pe=de.destinationQueryCoordinates;Ae&&(he.originInput.query(Ae),he.actions.queryOrigin(null)),Te&&(he.destinationInput.query(Te),he.actions.queryDestination(null)),Ue&&(he.originInput.setInput(Ue),he.animateToCoordinates("origin",Ue),he.actions.queryOriginCoordinates(null)),Pe&&(he.destinationInput.setInput(Pe),he.animateToCoordinates("destination",Pe),he.actions.queryDestinationCoordinates(null))})}}]),W}();o.default=ie},{"./geocoder":27,"lodash.isequal":13,"lodash.template":14,"turf-extent":22}],29:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=k(r("../utils")),y=k(r("lodash.template")),s=k(r("lodash.isequal"));function k(W){return W&&W.__esModule?W:{default:W}}function I(W){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},I(W)}function D(W,K){if(!(W instanceof K))throw new TypeError("Cannot call a class as a function")}function N(W,K){for(var he=0;he<K.length;he++){var de=K[he];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(W,q(de.key),de)}}function U(W,K,he){return K&&N(W.prototype,K),he&&N(W,he),Object.defineProperty(W,"prototype",{writable:!1}),W}function q(W){var K=Z(W,"string");return I(K)==="symbol"?K:String(K)}function Z(W,K){if(I(W)!=="object"||W===null)return W;var he=W[Symbol.toPrimitive];if(he!==void 0){var de=he.call(W,K||"default");if(I(de)!=="object")return de;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(W)}var ae=(0,y.default)(`<div class='directions-control directions-control-directions'>
  <div class='mapbox-directions-component mapbox-directions-route-summary<% if (routes > 1) { %> mapbox-directions-multiple<% } %>'>
    <% if (routes > 1) { %>
    <div class='mapbox-directions-routes mapbox-directions-clearfix'>
      <% for (var i = 0; i < routes; i++) { %>
        <input type='radio' name='routes' id='<%= i %>' <% if (i === routeIndex) { %>checked<% } %>>
        <label for='<%= i %>' class='mapbox-directions-route'><%= i + 1 %></label>
      <% } %>
    </div>
    <% } %>
    <h1><%- duration %></h1>
    <span><%- distance %></span>
  </div>

  <div class='mapbox-directions-instructions'>
    <div class='mapbox-directions-instructions-wrapper'>
      <ol class='mapbox-directions-steps'>
        <% steps.forEach(function(step) { %>
          <%
            var distance = step.distance ? format(step.distance) : false;
            var icon = step.maneuver.modifier ? step.maneuver.modifier.replace(/\\s+/g, '-').toLowerCase() : step.maneuver.type.replace(/\\s+/g, '-').toLowerCase();

            if (step.maneuver.type === 'arrive' || step.maneuver.type === 'depart') {
              icon = step.maneuver.type;
            }

            if (step.maneuver.type === 'roundabout' || step.maneuver.type === 'rotary') {
              icon= 'roundabout';
            }

            var lng = step.maneuver.location[0];
            var lat = step.maneuver.location[1];
          %>
          <li
            data-lat='<%= lat %>'
            data-lng='<%= lng %>'
            class='mapbox-directions-step'>
            <span class='directions-icon directions-icon-<%= icon %>'></span>
            <div class='mapbox-directions-step-maneuver'>
              <%= step.maneuver.instruction %>
            </div>
            <% if (distance) { %>
              <div class='mapbox-directions-step-distance'>
                <%= distance %>
              </div>
            <% } %>
          </li>
        <% }); %>
      </ol>
    </div>
  </div>
</div>
`),ve=(0,y.default)(`<div class='directions-control directions-control-directions'>
  <div class='mapbox-directions-error'>
    <%= error %>
  </div>
</div>
`),ie=function(){function W(K,he,de,Ae){D(this,W),this.container=K,this.actions=de,this.store=he,this._map=Ae,this.directions={},this.render()}return U(W,[{key:"render",value:function(){var he=this;this.store.subscribe(function(){var de=he.actions,Ae=de.hoverMarker,Te=de.setRouteIndex,Ue=he.store.getState(),Pe=Ue.routeIndex,$e=Ue.unit,Ve=Ue.directions,Fe=Ue.error,Ye=Ue.compile,ft=!(0,s.default)(Ve[Pe],he.directions);if(Fe){he.container.innerHTML=ve({error:Fe});return}if(Ve.length&&ft){var Pt=he.directions=Ve[Pe];Ye&&Pt.legs.forEach(function(mt){mt.steps.forEach(function(Xt){Xt.maneuver.instruction=Ye("en",Xt)})}),he.container.innerHTML=ae({routeIndex:Pe,routes:Ve.length,steps:Pt.legs[0].steps,format:f.default.format[$e],duration:f.default.format.duration(Pt.duration),distance:f.default.format[$e](Pt.distance)});var or=he.container.querySelectorAll(".mapbox-directions-step");Array.prototype.forEach.call(or,function(mt){var Xt=mt.getAttribute("data-lng"),Wt=mt.getAttribute("data-lat");mt.addEventListener("mouseover",function(){Ae([Xt,Wt])}),mt.addEventListener("mouseout",function(){Ae(null)}),mt.addEventListener("click",function(){he._map.flyTo({center:[Xt,Wt],zoom:16})})});var xr=he.container.querySelectorAll('input[type="radio"]');Array.prototype.forEach.call(xr,function(mt){mt.addEventListener("change",function(Xt){Te(parseInt(Xt.target.id,10))})})}else he.container.innerHTML&&ft&&(he.container.innerHTML="")})}}]),W}();o.default=ie},{"../utils":34,"lodash.isequal":13,"lodash.template":14}],30:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=r("redux"),y=ve(r("redux-thunk")),s=r("@mapbox/polyline"),k=ve(r("./utils")),I=ve(r("./reducers")),D=ae(r("./actions")),N=ve(r("./directions_style")),U=ve(r("./controls/inputs")),q=ve(r("./controls/instructions"));function Z($e){if(typeof WeakMap!="function")return null;var Ve=new WeakMap,Fe=new WeakMap;return(Z=function(ft){return ft?Fe:Ve})($e)}function ae($e,Ve){if(!Ve&&$e&&$e.__esModule)return $e;if($e===null||ie($e)!=="object"&&typeof $e!="function")return{default:$e};var Fe=Z(Ve);if(Fe&&Fe.has($e))return Fe.get($e);var Ye={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Pt in $e)if(Pt!=="default"&&Object.prototype.hasOwnProperty.call($e,Pt)){var or=ft?Object.getOwnPropertyDescriptor($e,Pt):null;or&&(or.get||or.set)?Object.defineProperty(Ye,Pt,or):Ye[Pt]=$e[Pt]}return Ye.default=$e,Fe&&Fe.set($e,Ye),Ye}function ve($e){return $e&&$e.__esModule?$e:{default:$e}}function ie($e){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ve){return typeof Ve}:function(Ve){return Ve&&typeof Symbol=="function"&&Ve.constructor===Symbol&&Ve!==Symbol.prototype?"symbol":typeof Ve},ie($e)}function W($e,Ve){if(!($e instanceof Ve))throw new TypeError("Cannot call a class as a function")}function K($e,Ve){for(var Fe=0;Fe<Ve.length;Fe++){var Ye=Ve[Fe];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty($e,de(Ye.key),Ye)}}function he($e,Ve,Fe){return Ve&&K($e.prototype,Ve),Fe&&K($e,Fe),Object.defineProperty($e,"prototype",{writable:!1}),$e}function de($e){var Ve=Ae($e,"string");return ie(Ve)==="symbol"?Ve:String(Ve)}function Ae($e,Ve){if(ie($e)!=="object"||$e===null)return $e;var Fe=$e[Symbol.toPrimitive];if(Fe!==void 0){var Ye=Fe.call($e,Ve||"default");if(ie(Ye)!=="object")return Ye;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ve==="string"?String:Number)($e)}var Te=(0,f.applyMiddleware)(y.default)(f.createStore),Ue=Te(I.default),Pe=function(){function $e(Ve){W(this,$e),this.actions=(0,f.bindActionCreators)(D,Ue.dispatch),this.actions.setOptions(Ve||{}),this.options=Ve||{},this.onDragDown=this._onDragDown.bind(this),this.onDragMove=this._onDragMove.bind(this),this.onDragUp=this._onDragUp.bind(this),this.move=this._move.bind(this),this.onClick=this._clickHandler().bind(this)}return he($e,[{key:"onAdd",value:function(Fe){var Ye=this;this._map=Fe;var ft=Ue.getState(),Pt=ft.controls,or=this.container=document.createElement("div");or.className="mapboxgl-ctrl-directions mapboxgl-ctrl";var xr=document.createElement("div");xr.className="directions-control directions-control-inputs",new U.default(xr,Ue,this.actions,this._map);var mt=document.createElement("div");return mt.className="directions-control directions-control-instructions",new q.default(mt,Ue,{hoverMarker:this.actions.hoverMarker,setRouteIndex:this.actions.setRouteIndex},this._map),Pt.inputs&&or.appendChild(xr),Pt.instructions&&or.appendChild(mt),this.subscribedActions(),this._map.loaded()?this.mapState():this._map.on("load",function(){return Ye.mapState()}),or}},{key:"onRemove",value:function(Fe){return this.container.parentNode.removeChild(this.container),this.removeRoutes(),Fe.off("mousedown",this.onDragDown),Fe.off("mousemove",this.move),Fe.off("touchstart",this.onDragDown),Fe.off("touchstart",this.move),Fe.off("click",this.onClick),this.storeUnsubscribe&&(this.storeUnsubscribe(),delete this.storeUnsubscribe),N.default.forEach(function(Ye){Fe.getLayer(Ye.id)&&Fe.removeLayer(Ye.id)}),Fe.getSource("directions")&&Fe.removeSource("directions"),this._map=null,this}},{key:"mapState",value:function(){var Fe=this,Ye=Ue.getState(),ft=Ye.profile;Ye.alternatives,Ye.congestion;var Pt=Ye.styles,or=Ye.interactive;Ye.compile,this.actions.eventEmit("profile",{profile:ft});var xr={type:"geojson",data:{type:"FeatureCollection",features:[]}};this._map.addSource("directions",xr),Pt&&Pt.length&&Pt.forEach(function(mt){return Fe._map.addLayer(mt)}),N.default.forEach(function(mt){Fe._map.getLayer(mt.id)||Fe._map.addLayer(mt)}),or&&(this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick),this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown))}},{key:"subscribedActions",value:function(){var Fe=this;this.storeUnsubscribe=Ue.subscribe(function(){var Ye=Ue.getState(),ft=Ye.origin,Pt=Ye.destination,or=Ye.hoverMarker,xr=Ye.directions,mt=Ye.routeIndex,Xt={type:"FeatureCollection",features:[ft,Pt,or].filter(function(Wt){return Wt.geometry})};xr.length&&xr.forEach(function(Wt,Ot){var ut=[],Vt=(0,s.decode)(Wt.geometry,5).map(function(ir){return ir.reverse()});Vt.forEach(function(ir,vt){var Dt=ut[ut.length-1],ur=Wt.legs[0].annotation&&Wt.legs[0].annotation.congestion&&Wt.legs[0].annotation.congestion[vt-1];if(Dt&&(!ur||Dt.properties.congestion===ur))Dt.geometry.coordinates.push(ir);else{var Tr={geometry:{type:"LineString",coordinates:[]},properties:{"route-index":Ot,route:Ot===mt?"selected":"alternate"}};Dt&&Tr.geometry.coordinates.push(Dt.geometry.coordinates[Dt.geometry.coordinates.length-1]),Tr.geometry.coordinates.push(ir),ur&&(Tr.properties.congestion=Wt.legs[0].annotation.congestion[vt-1]),ut.push(Tr)}}),Xt.features=Xt.features.concat(ut),Ot===mt&&Wt.legs[0].steps.forEach(function(ir){ir.maneuver.type==="waypoint"&&Xt.features.push({type:"Feature",geometry:ir.maneuver.location,properties:{id:"waypoint"}})})}),Fe._map.style&&Fe._map.getSource("directions")&&Fe._map.getSource("directions").setData(Xt)})}},{key:"_clickHandler",value:function(){var Fe=null,Ye=250;return function(ft){if(Fe)clearTimeout(Fe),Fe=null,this._map.zoomIn();else{var Pt=this._onSingleClick.bind(this);Fe=setTimeout(function(){Pt(ft),Fe=null},Ye)}}}},{key:"_onSingleClick",value:function(Fe){var Ye=this,ft=Ue.getState(),Pt=ft.origin,or=[Fe.lngLat.lng,Fe.lngLat.lat];if(!Pt.geometry)this.actions.setOriginFromCoordinates(or);else{var xr=this._map.queryRenderedFeatures(Fe.point,{layers:["directions-origin-point","directions-destination-point","directions-waypoint-point","directions-route-line-alt"]});if(xr.length){if(xr.forEach(function(Xt){Xt.layer.id==="directions-waypoint-point"&&Ye.actions.removeWaypoint(Xt)}),xr[0].properties.route==="alternate"){var mt=xr[0].properties["route-index"];this.actions.setRouteIndex(mt)}}else this.actions.setDestinationFromCoordinates(or),this._map.flyTo({center:or})}}},{key:"_move",value:function(Fe){var Ye=this,ft=Ue.getState(),Pt=ft.hoverMarker,or=this._map.queryRenderedFeatures(Fe.point,{layers:["directions-route-line-alt","directions-route-line","directions-origin-point","directions-destination-point","directions-hover-point"]});this._map.getCanvas().style.cursor=or.length?"pointer":"",or.length?(this.isCursorOverPoint=or[0],this._map.dragPan.disable(),or.forEach(function(xr){xr.layer.id==="directions-route-line"?Ye.actions.hoverMarker([Fe.lngLat.lng,Fe.lngLat.lat]):Pt.geometry&&Ye.actions.hoverMarker(null)})):this.isCursorOverPoint&&(this.isCursorOverPoint=!1,this._map.dragPan.enable())}},{key:"_onDragDown",value:function(){this.isCursorOverPoint&&(this.isDragging=this.isCursorOverPoint,this._map.getCanvas().style.cursor="grab",this._map.on("mousemove",this.onDragMove),this._map.on("mouseup",this.onDragUp),this._map.on("touchmove",this.onDragMove),this._map.on("touchend",this.onDragUp))}},{key:"_onDragMove",value:function(Fe){if(this.isDragging){var Ye=[Fe.lngLat.lng,Fe.lngLat.lat];switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.createOrigin(Ye);break;case"directions-destination-point":this.actions.createDestination(Ye);break;case"directions-hover-point":this.actions.hoverMarker(Ye);break}}}},{key:"_onDragUp",value:function(){if(this.isDragging){var Fe=Ue.getState(),Ye=Fe.hoverMarker,ft=Fe.origin,Pt=Fe.destination;switch(this.isDragging.layer.id){case"directions-origin-point":this.actions.setOriginFromCoordinates(ft.geometry.coordinates);break;case"directions-destination-point":this.actions.setDestinationFromCoordinates(Pt.geometry.coordinates);break;case"directions-hover-point":Ye.geometry&&!k.default.coordinateMatch(this.isDragging,Ye)&&this.actions.addWaypoint(0,Ye);break}this.isDragging=!1,this._map.getCanvas().style.cursor="",this._map.off("touchmove",this.onDragMove),this._map.off("touchend",this.onDragUp),this._map.off("mousemove",this.onDragMove),this._map.off("mouseup",this.onDragUp)}}},{key:"interactive",value:function(Fe){return Fe?(this._map.on("touchstart",this.move),this._map.on("touchstart",this.onDragDown),this._map.on("mousedown",this.onDragDown),this._map.on("mousemove",this.move),this._map.on("click",this.onClick)):(this._map.off("touchstart",this.move),this._map.off("touchstart",this.onDragDown),this._map.off("mousedown",this.onDragDown),this._map.off("mousemove",this.move),this._map.off("click",this.onClick)),this}},{key:"getOrigin",value:function(){return Ue.getState().origin}},{key:"setOrigin",value:function(Fe){return typeof Fe=="string"?this.actions.queryOrigin(Fe):this.actions.setOriginFromCoordinates(Fe),this}},{key:"getDestination",value:function(){return Ue.getState().destination}},{key:"setDestination",value:function(Fe){return typeof Fe=="string"?this.actions.queryDestination(Fe):this.actions.setDestinationFromCoordinates(Fe),this}},{key:"reverse",value:function(){return this.actions.reverse(),this}},{key:"addWaypoint",value:function(Fe,Ye){return Ye.type||(Ye=k.default.createPoint(Ye,{id:"waypoint"})),this.actions.addWaypoint(Fe,Ye),this}},{key:"setWaypoint",value:function(Fe,Ye){return Ye.type||(Ye=k.default.createPoint(Ye,{id:"waypoint"})),this.actions.setWaypoint(Fe,Ye),this}},{key:"removeWaypoint",value:function(Fe){var Ye=Ue.getState(),ft=Ye.waypoints;return this.actions.removeWaypoint(ft[Fe]),this}},{key:"getWaypoints",value:function(){return Ue.getState().waypoints}},{key:"removeRoutes",value:function(){return this.actions.clearOrigin(),this.actions.clearDestination(),this}},{key:"on",value:function(Fe,Ye){return this.actions.eventSubscribe(Fe,Ye),this}}]),$e}();o.default=Pe},{"./actions":25,"./controls/inputs":28,"./controls/instructions":29,"./directions_style":31,"./reducers":33,"./utils":34,"@mapbox/polyline":6,redux:18,"redux-thunk":17}],31:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var f=[{id:"directions-route-line-alt",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#bbb","line-width":4},filter:["all",["in","$type","LineString"],["in","route","alternate"]]},{id:"directions-route-line-casing",type:"line",source:"directions",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#2d5f99","line-width":12},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-route-line",type:"line",source:"directions",layout:{"line-cap":"butt","line-join":"round"},paint:{"line-color":{property:"congestion",type:"categorical",default:"#4882c5",stops:[["unknown","#4882c5"],["low","#4882c5"],["moderate","#f09a46"],["heavy","#e34341"],["severe","#8b2342"]]},"line-width":7},filter:["all",["in","$type","LineString"],["in","route","selected"]]},{id:"directions-hover-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-hover-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","id","hover"]]},{id:"directions-waypoint-point-casing",type:"circle",source:"directions",paint:{"circle-radius":8,"circle-color":"#fff"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-waypoint-point",type:"circle",source:"directions",paint:{"circle-radius":6,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","id","waypoint"]]},{id:"directions-origin-point",type:"circle",source:"directions",paint:{"circle-radius":18,"circle-color":"#3bb2d0"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-origin-label",type:"symbol",source:"directions",layout:{"text-field":"A","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","A"]]},{id:"directions-destination-point",type:"circle",source:"directions",paint:{"circle-radius":18,"circle-color":"#8a8bc9"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]},{id:"directions-destination-label",type:"symbol",source:"directions",layout:{"text-field":"B","text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#fff"},filter:["all",["in","$type","Point"],["in","marker-symbol","B"]]}],y=f;o.default=y},{}],32:[function(r,n,o){var f=y(r("./directions"));function y(s){return s&&s.__esModule?s:{default:s}}n.exports=f.default},{"./directions":30}],33:[function(r,n,o){function f(Z){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ae){return typeof ae}:function(ae){return ae&&typeof Symbol=="function"&&ae.constructor===Symbol&&ae!==Symbol.prototype?"symbol":typeof ae},f(Z)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var y=D(r("../constants/action_types.js")),s=k(r("deep-assign"));function k(Z){return Z&&Z.__esModule?Z:{default:Z}}function I(Z){if(typeof WeakMap!="function")return null;var ae=new WeakMap,ve=new WeakMap;return(I=function(W){return W?ve:ae})(Z)}function D(Z,ae){if(!ae&&Z&&Z.__esModule)return Z;if(Z===null||f(Z)!=="object"&&typeof Z!="function")return{default:Z};var ve=I(ae);if(ve&&ve.has(Z))return ve.get(Z);var ie={},W=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var K in Z)if(K!=="default"&&Object.prototype.hasOwnProperty.call(Z,K)){var he=W?Object.getOwnPropertyDescriptor(Z,K):null;he&&(he.get||he.set)?Object.defineProperty(ie,K,he):ie[K]=Z[K]}return ie.default=Z,ve&&ve.set(Z,ie),ie}var N={api:"https://api.mapbox.com/directions/v5/",profile:"mapbox/driving-traffic",alternatives:!1,congestion:!1,unit:"imperial",flyTo:!0,placeholderOrigin:"Choose a starting place",placeholderDestination:"Choose destination",zoom:16,language:"en",compile:null,proximity:!1,styles:[],controls:{profileSwitcher:!0,inputs:!0,instructions:!0},geocoder:{},interactive:!0,events:{},origin:{},destination:{},hoverMarker:{},waypoints:[],originQuery:null,destinationQuery:null,originQueryCoordinates:null,destinationQueryCoordinates:null,directions:[],routeIndex:0,routePadding:80};function U(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,ae=arguments.length>1?arguments[1]:void 0;switch(ae.type){case y.SET_OPTIONS:return(0,s.default)({},Z,ae.options);case y.DIRECTIONS_PROFILE:return Object.assign({},Z,{profile:ae.profile});case y.ORIGIN:return Object.assign({},Z,{origin:ae.origin,hoverMarker:{}});case y.DESTINATION:return Object.assign({},Z,{destination:ae.destination,hoverMarker:{}});case y.HOVER_MARKER:return Object.assign({},Z,{hoverMarker:ae.hoverMarker});case y.WAYPOINTS:return Object.assign({},Z,{waypoints:ae.waypoints});case y.ORIGIN_QUERY:return Object.assign({},Z,{originQuery:ae.query});case y.DESTINATION_QUERY:return Object.assign({},Z,{destinationQuery:ae.query});case y.ORIGIN_FROM_COORDINATES:return Object.assign({},Z,{originQueryCoordinates:ae.coordinates});case y.DESTINATION_FROM_COORDINATES:return Object.assign({},Z,{destinationQueryCoordinates:ae.coordinates});case y.ORIGIN_CLEAR:return Object.assign({},Z,{origin:{},originQuery:"",waypoints:[],directions:[]});case y.DESTINATION_CLEAR:return Object.assign({},Z,{destination:{},destinationQuery:"",waypoints:[],directions:[]});case y.DIRECTIONS:return Object.assign({},Z,{directions:ae.directions});case y.ROUTE_INDEX:return Object.assign({},Z,{routeIndex:ae.routeIndex});case y.ERROR:return Object.assign({},Z,{error:ae.error});default:return Z}}var q=U;o.default=q},{"../constants/action_types.js":26,"deep-assign":8}],34:[function(r,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;function f(U){return U[0]>=-180&&U[0]<=180&&U[1]>=-90&&U[1]<=90}function y(U,q){return U=U.geometry.coordinates,q=q.geometry.coordinates,U.join()===q.join()||U[0].toFixed(3)===q[0].toFixed(3)&&U[1].toFixed(3)===q[1].toFixed(3)}function s(U){var q=360,Z=((U- -180)%q+q)%q+-180;return Z===-180?180:Z}function k(U,q){var Z=0;return Math.floor(q)!==q&&(Z=q.toString().split(".")[1].length),U.toFixed(Math.min(Z,5))}function I(U,q){return{type:"Feature",geometry:{type:"Point",coordinates:U},properties:q||{}}}var D={duration:function(q){var Z=Math.floor(q/60),ae=Math.floor(Z/60);return q%=60,Z%=60,ae===0&&Z===0?q+"s":ae===0?Z+"min":ae+"h "+Z+"min"},imperial:function(q){var Z=q/1609.344;return Z>=100?Z.toFixed(0)+"mi":Z>=10?Z.toFixed(1)+"mi":Z>=.1?Z.toFixed(2)+"mi":(Z*5280).toFixed(0)+"ft"},metric:function(q){return q>=1e5?(q/1e3).toFixed(0)+"km":q>=1e4?(q/1e3).toFixed(1)+"km":q>=100?(q/1e3).toFixed(2)+"km":q.toFixed(0)+"m"}},N={format:D,coordinateMatch:y,createPoint:I,validCoords:f,wrap:s,roundWithOriginalPrecision:k};o.default=N},{}]},{},[32])(32)})})(FH);var _2e=FH.exports;const KR=Of(_2e),w2e=le.lazy(()=>ad(()=>import("./Chat-f0f01d7a.js"),["assets/Chat-f0f01d7a.js","assets/styles-3e973eb1.css"]));function S2e(e){const{rideId:t}=e,r=Va(),n=Cs(),o=le.useRef(null),[f,y]=le.useState(null),[s,k]=le.useState(null),[I,D]=le.useState(null),[N,U]=le.useState(null),[q,Z]=le.useState(!1),[ae,ve]=le.useState(!1),[ie,W]=le.useState(null),[K,he]=le.useState(""),[de,Ae]=le.useState(null),[Te,Ue]=le.useState(null),[Pe,$e]=le.useState(void 0),[Ve,Fe]=le.useState(!1),[Ye,ft]=le.useState(!1);le.useEffect(()=>{(async()=>{try{const ut=await Gs.patch(`${ws.getRideDetails}?id=${t}`);console.log("RIDE ",ut),W(ut.data),ut.data.otpVerifyed?(ve(!0),U(parseFloat(ut.data.dropoffCoordinates.longitude)),D(parseFloat(ut.data.dropoffCoordinates.latitude))):(console.log(61),U(parseFloat(ut.data.pickupCoordinates.longitude)),D(parseFloat(ut.data.pickupCoordinates.latitude))),await Pt(ut.data.user_id)}catch(ut){console.log(ut),rn(ut)}})()},[]);const Pt=async Ot=>{try{const ut=await Gs.patch(`${ws.getUserInfo}?id=${Ot}`);console.log("user data",ut),Ae(ut.data.mobile)}catch(ut){console.log(ut),rn(ut)}};le.useEffect(()=>{if("geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(Ot){k(Ot.coords.longitude),y(Ot.coords.latitude)}),da.accessToken="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg",f&&s&&o.current){const Ot=new da.Map({container:o.current,style:"mapbox://styles/mapbox/streets-v11",center:[s,f],zoom:10});$e(Ot),Ot.on("load",()=>{const ut=new KR({accessToken:da.accessToken,unit:"metric",profile:"mapbox/driving-traffic",controls:{inputs:!1,instructions:!1},route:!0});console.log("inside the map"),Ot.addControl(ut,"top-left");const Vt=[s,f],ir=[N,I];ut.setOrigin(Vt),ut.setDestination(ir)})}return()=>{Pe&&Pe.remove()}},[I,N]),le.useEffect(()=>{const Ot=Wh("http://localhost:8000",{transports:["websocket"]});return Ue(Ot),Ot?Ot.on("connect",()=>{console.log("Connected to the Socket.IO server")}):console.log("Can not connect"),()=>{Te&&(Te.disconnect(),Ot.disconnect())}},[]);const or=async()=>{try{const Ot=await Gs.post(ws.sendOtp,{mobile:de});console.log("otp response",Ot)}catch(Ot){console.log("handleSendOtp",Ot),rn(Ot)}},xr=async Ot=>{Ot.preventDefault();try{const ut={otp:K,mobile:de,rideId:t};if(await Gs.post(Ti.rideOtpVerify,ut),Zr.success("OTP success full"),ve(!0),Te){const Vt={userId:ie==null?void 0:ie.user_id};Te.emit("startRide",Vt)}ie&&(D(parseFloat(ie.dropoffCoordinates.latitude)),U(parseFloat(ie.dropoffCoordinates.longitude)))}catch(ut){console.log("handleConfirmOTP",ut),rn(ut)}},mt=()=>{if(Te&&ie){const Ot={userId:ie.user_id};Te.emit("endRide",Ot),r(Qv(!0)),Fe(!0)}},Xt=()=>{ft(!Ye)},Wt=()=>{n(Ti.dashboard)};return A.jsx("div",{className:"flex flex-col items-center my-10 space-y-4",children:A.jsx("div",{className:"w-full sm:w-10/12 md:w-10/12 lg:w-10/12 xl:w-10/12 space-y-4",children:A.jsxs("div",{className:"rounded-3xl shadow-2xl",children:[Ve&&A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),A.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-lg z-50",children:[A.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Payment"}),A.jsxs("p",{className:"text-center my-3 font-semibold",children:["Amount: ",ie==null?void 0:ie.price]}),A.jsx("p",{className:"max-w-sm",children:"Your professionalism and friendly demeanor make our riders' experiences memorable. We appreciate your hard work and the important role you play in our community."}),A.jsx("button",{type:"button",onClick:Wt,className:"p-2 px-3 border border-slate-600 rounded-lg text-center ms-24 m-2",children:"Completed the Payment"})]})]}),Ye&&t&&Te&&A.jsx(le.Suspense,{fallback:"loading please wait.....",children:A.jsx(w2e,{rideId:t,role:"driver",handleChangeTheChatState:Xt})}),A.jsxs("div",{className:"flex flex-col sm:flex-row",children:[A.jsx("div",{className:"sm:w-full m-10",children:A.jsx("div",{ref:o,style:{width:"100%",height:"80vh"}})}),A.jsxs("div",{className:"sm:w-full h-56 m-10 max-w-sm bg-white border border-gray-200 rounded-lg shadow-2xl",children:[A.jsx("div",{className:"p-5 m-3",children:ae?A.jsx("button",{onClick:mt,children:"End Ride"}):A.jsx(A.Fragment,{children:q?A.jsxs("form",{onSubmit:xr,children:[A.jsx("input",{type:"text",className:"pl-2 outline-none border-4 w-full rounded-lg p-2.5 sm:text-sm",placeholder:"Enter OTP",value:K,onChange:Ot=>he(Ot.target.value)}),A.jsx("button",{className:"m-2 bg-blue-500 p-2 border rounded-lg text-white",type:"submit",children:"Confirm OTP"})]}):A.jsx(A.Fragment,{children:A.jsx("button",{onClick:()=>{Z(!0),or()},children:"Start Ride"})})})}),A.jsx("div",{children:A.jsx("div",{className:"flex",children:A.jsxs("button",{onClick:()=>Xt(),className:"bg-blue-500 mx-auto hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center space-x-2 transition duration-300 ease-in-out focus:outline-none",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-90",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M2.293 8.293a1 1 0 011.414 0L10 14.586l6.293-6.293a1 1 0 111.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 010-1.414z",clipRule:"evenodd"})}),A.jsx("span",{children:"Chat"})]})})})]})]})]})})})}function C2e(){const e=$a(),{rideId:t}=ba.parse(e.search),r={rideId:t};return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx(S2e,{...r}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}var es="-ms-",zx="-moz-",Ei="-webkit-",BH="comm",KS="rule",JR="decl",k2e="@import",$H="@keyframes",E2e="@layer",T2e=Math.abs,QR=String.fromCharCode,HA=Object.assign;function A2e(e,t){return fo(e,0)^45?(((t<<2^fo(e,0))<<2^fo(e,1))<<2^fo(e,2))<<2^fo(e,3):0}function UH(e){return e.trim()}function Jc(e,t){return(e=t.exec(e))?e[0]:e}function An(e,t,r){return e.replace(t,r)}function e1(e,t){return e.indexOf(t)}function fo(e,t){return e.charCodeAt(t)|0}function qm(e,t,r){return e.slice(t,r)}function uc(e){return e.length}function VH(e){return e.length}function dx(e,t){return t.push(e),e}function I2e(e,t){return e.map(t).join("")}function L4(e,t){return e.filter(function(r){return!Jc(r,t)})}var JS=1,Ym=1,HH=0,ul=0,Hs=0,mg="";function QS(e,t,r,n,o,f,y,s){return{value:e,root:t,parent:r,type:n,props:o,children:f,line:JS,column:Ym,length:y,return:"",siblings:s}}function hh(e,t){return HA(QS("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Up(e){for(;e.root;)e=hh(e.root,{children:[e]});dx(e,e.siblings)}function P2e(){return Hs}function R2e(){return Hs=ul>0?fo(mg,--ul):0,Ym--,Hs===10&&(Ym=1,JS--),Hs}function Nl(){return Hs=ul<HH?fo(mg,ul++):0,Ym++,Hs===10&&(Ym=1,JS++),Hs}function vf(){return fo(mg,ul)}function t1(){return ul}function e2(e,t){return qm(mg,e,t)}function WA(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function M2e(e){return JS=Ym=1,HH=uc(mg=e),ul=0,[]}function L2e(e){return mg="",e}function SE(e){return UH(e2(ul-1,GA(e===91?e+2:e===40?e+1:e)))}function O2e(e){for(;(Hs=vf())&&Hs<33;)Nl();return WA(e)>2||WA(Hs)>3?"":" "}function D2e(e,t){for(;--t&&Nl()&&!(Hs<48||Hs>102||Hs>57&&Hs<65||Hs>70&&Hs<97););return e2(e,t1()+(t<6&&vf()==32&&Nl()==32))}function GA(e){for(;Nl();)switch(Hs){case e:return ul;case 34:case 39:e!==34&&e!==39&&GA(Hs);break;case 40:e===41&&GA(e);break;case 92:Nl();break}return ul}function z2e(e,t){for(;Nl()&&e+Hs!==47+10;)if(e+Hs===42+42&&vf()===47)break;return"/*"+e2(t,ul-1)+"*"+QR(e===47?e:Nl())}function N2e(e){for(;!WA(vf());)Nl();return e2(e,ul)}function j2e(e){return L2e(r1("",null,null,null,[""],e=M2e(e),0,[0],e))}function r1(e,t,r,n,o,f,y,s,k){for(var I=0,D=0,N=y,U=0,q=0,Z=0,ae=1,ve=1,ie=1,W=0,K="",he=o,de=f,Ae=n,Te=K;ve;)switch(Z=W,W=Nl()){case 40:if(Z!=108&&fo(Te,N-1)==58){e1(Te+=An(SE(W),"&","&\f"),"&\f")!=-1&&(ie=-1);break}case 34:case 39:case 91:Te+=SE(W);break;case 9:case 10:case 13:case 32:Te+=O2e(Z);break;case 92:Te+=D2e(t1()-1,7);continue;case 47:switch(vf()){case 42:case 47:dx(F2e(z2e(Nl(),t1()),t,r,k),k);break;default:Te+="/"}break;case 123*ae:s[I++]=uc(Te)*ie;case 125*ae:case 59:case 0:switch(W){case 0:case 125:ve=0;case 59+D:ie==-1&&(Te=An(Te,/\f/g,"")),q>0&&uc(Te)-N&&dx(q>32?D4(Te+";",n,r,N-1,k):D4(An(Te," ","")+";",n,r,N-2,k),k);break;case 59:Te+=";";default:if(dx(Ae=O4(Te,t,r,I,D,o,s,K,he=[],de=[],N,f),f),W===123)if(D===0)r1(Te,t,Ae,Ae,he,f,N,s,de);else switch(U===99&&fo(Te,3)===110?100:U){case 100:case 108:case 109:case 115:r1(e,Ae,Ae,n&&dx(O4(e,Ae,Ae,0,0,o,s,K,o,he=[],N,de),de),o,de,N,s,n?he:de);break;default:r1(Te,Ae,Ae,Ae,[""],de,0,s,de)}}I=D=q=0,ae=ie=1,K=Te="",N=y;break;case 58:N=1+uc(Te),q=Z;default:if(ae<1){if(W==123)--ae;else if(W==125&&ae++==0&&R2e()==125)continue}switch(Te+=QR(W),W*ae){case 38:ie=D>0?1:(Te+="\f",-1);break;case 44:s[I++]=(uc(Te)-1)*ie,ie=1;break;case 64:vf()===45&&(Te+=SE(Nl())),U=vf(),D=N=uc(K=Te+=N2e(t1())),W++;break;case 45:Z===45&&uc(Te)==2&&(ae=0)}}return f}function O4(e,t,r,n,o,f,y,s,k,I,D,N){for(var U=o-1,q=o===0?f:[""],Z=VH(q),ae=0,ve=0,ie=0;ae<n;++ae)for(var W=0,K=qm(e,U+1,U=T2e(ve=y[ae])),he=e;W<Z;++W)(he=UH(ve>0?q[W]+" "+K:An(K,/&\f/g,q[W])))&&(k[ie++]=he);return QS(e,t,r,o===0?KS:s,k,I,D,N)}function F2e(e,t,r,n){return QS(e,t,r,BH,QR(P2e()),qm(e,2,-2),0,n)}function D4(e,t,r,n,o){return QS(e,t,r,JR,qm(e,0,n),qm(e,n+1,-1),n,o)}function WH(e,t,r){switch(A2e(e,t)){case 5103:return Ei+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ei+e+e;case 4789:return zx+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ei+e+zx+e+es+e+e;case 5936:switch(fo(e,t+11)){case 114:return Ei+e+es+An(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ei+e+es+An(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ei+e+es+An(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Ei+e+es+e+e;case 6165:return Ei+e+es+"flex-"+e+e;case 5187:return Ei+e+An(e,/(\w+).+(:[^]+)/,Ei+"box-$1$2"+es+"flex-$1$2")+e;case 5443:return Ei+e+es+"flex-item-"+An(e,/flex-|-self/g,"")+(Jc(e,/flex-|baseline/)?"":es+"grid-row-"+An(e,/flex-|-self/g,""))+e;case 4675:return Ei+e+es+"flex-line-pack"+An(e,/align-content|flex-|-self/g,"")+e;case 5548:return Ei+e+es+An(e,"shrink","negative")+e;case 5292:return Ei+e+es+An(e,"basis","preferred-size")+e;case 6060:return Ei+"box-"+An(e,"-grow","")+Ei+e+es+An(e,"grow","positive")+e;case 4554:return Ei+An(e,/([^-])(transform)/g,"$1"+Ei+"$2")+e;case 6187:return An(An(An(e,/(zoom-|grab)/,Ei+"$1"),/(image-set)/,Ei+"$1"),e,"")+e;case 5495:case 3959:return An(e,/(image-set\([^]*)/,Ei+"$1$`$1");case 4968:return An(An(e,/(.+:)(flex-)?(.*)/,Ei+"box-pack:$3"+es+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ei+e+e;case 4200:if(!Jc(e,/flex-|baseline/))return es+"grid-column-align"+qm(e,t)+e;break;case 2592:case 3360:return es+An(e,"template-","")+e;case 4384:case 3616:return r&&r.some(function(n,o){return t=o,Jc(n.props,/grid-\w+-end/)})?~e1(e+(r=r[t].value),"span")?e:es+An(e,"-start","")+e+es+"grid-row-span:"+(~e1(r,"span")?Jc(r,/\d+/):+Jc(r,/\d+/)-+Jc(e,/\d+/))+";":es+An(e,"-start","")+e;case 4896:case 4128:return r&&r.some(function(n){return Jc(n.props,/grid-\w+-start/)})?e:es+An(An(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return An(e,/(.+)-inline(.+)/,Ei+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uc(e)-1-t>6)switch(fo(e,t+1)){case 109:if(fo(e,t+4)!==45)break;case 102:return An(e,/(.+:)(.+)-([^]+)/,"$1"+Ei+"$2-$3$1"+zx+(fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~e1(e,"stretch")?WH(An(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return An(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,o,f,y,s,k,I){return es+o+":"+f+I+(y?es+o+"-span:"+(s?k:+k-+f)+I:"")+e});case 4949:if(fo(e,t+6)===121)return An(e,":",":"+Ei)+e;break;case 6444:switch(fo(e,fo(e,14)===45?18:11)){case 120:return An(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ei+(fo(e,14)===45?"inline-":"")+"box$3$1"+Ei+"$2$3$1"+es+"$2box$3")+e;case 100:return An(e,":",":"+es)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return An(e,"scroll-","scroll-snap-")+e}return e}function vw(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function B2e(e,t,r,n){switch(e.type){case E2e:if(e.children.length)break;case k2e:case JR:return e.return=e.return||e.value;case BH:return"";case $H:return e.return=e.value+"{"+vw(e.children,n)+"}";case KS:if(!uc(e.value=e.props.join(",")))return""}return uc(r=vw(e.children,n))?e.return=e.value+"{"+r+"}":""}function $2e(e){var t=VH(e);return function(r,n,o,f){for(var y="",s=0;s<t;s++)y+=e[s](r,n,o,f)||"";return y}}function U2e(e){return function(t){t.root||(t=t.return)&&e(t)}}function V2e(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case JR:e.return=WH(e.value,e.length,r);return;case $H:return vw([hh(e,{value:An(e.value,"@","@"+Ei)})],n);case KS:if(e.length)return I2e(r=e.props,function(o){switch(Jc(o,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Up(hh(e,{props:[An(o,/:(read-\w+)/,":"+zx+"$1")]})),Up(hh(e,{props:[o]})),HA(e,{props:L4(r,n)});break;case"::placeholder":Up(hh(e,{props:[An(o,/:(plac\w+)/,":"+Ei+"input-$1")]})),Up(hh(e,{props:[An(o,/:(plac\w+)/,":"+zx+"$1")]})),Up(hh(e,{props:[An(o,/:(plac\w+)/,es+"input-$1")]})),Up(hh(e,{props:[o]})),HA(e,{props:L4(r,n)});break}return""})}}var Zm=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",eM=typeof window<"u"&&"HTMLElement"in window,H2e=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),t2=Object.freeze([]),Km=Object.freeze({});function W2e(e,t,r){return r===void 0&&(r=Km),e.theme!==r.theme&&e.theme||t||r.theme}var GH=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),G2e=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,X2e=/(^-|-$)/g;function z4(e){return e.replace(G2e,"-").replace(X2e,"")}var q2e=/(a)(d)/gi,N4=function(e){return String.fromCharCode(e+(e>25?39:97))};function XA(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=N4(t%52)+r;return(N4(t%52)+r).replace(q2e,"$1-$2")}var CE,pm=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},XH=function(e){return pm(5381,e)};function Y2e(e){return XA(XH(e)>>>0)}function Z2e(e){return e.displayName||e.name||"Component"}function kE(e){return typeof e=="string"&&!0}var qH=typeof Symbol=="function"&&Symbol.for,YH=qH?Symbol.for("react.memo"):60115,K2e=qH?Symbol.for("react.forward_ref"):60112,J2e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Q2e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ZH={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eCe=((CE={})[K2e]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CE[YH]=ZH,CE);function j4(e){return("type"in(t=e)&&t.type.$$typeof)===YH?ZH:"$$typeof"in e?eCe[e.$$typeof]:J2e;var t}var tCe=Object.defineProperty,rCe=Object.getOwnPropertyNames,F4=Object.getOwnPropertySymbols,nCe=Object.getOwnPropertyDescriptor,iCe=Object.getPrototypeOf,B4=Object.prototype;function KH(e,t,r){if(typeof t!="string"){if(B4){var n=iCe(t);n&&n!==B4&&KH(e,n,r)}var o=rCe(t);F4&&(o=o.concat(F4(t)));for(var f=j4(e),y=j4(t),s=0;s<o.length;++s){var k=o[s];if(!(k in Q2e||r&&r[k]||y&&k in y||f&&k in f)){var I=nCe(t,k);try{tCe(e,k,I)}catch{}}}}return e}function Mf(e){return typeof e=="function"}function tM(e){return typeof e=="object"&&"styledComponentId"in e}function cf(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function $4(e,t){if(e.length===0)return"";for(var r=e[0],n=1;n<e.length;n++)r+=t?t+e[n]:e[n];return r}function Ev(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function qA(e,t,r){if(r===void 0&&(r=!1),!r&&!Ev(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=qA(e[n],t[n]);else if(Ev(t))for(var n in t)e[n]=qA(e[n],t[n]);return e}function rM(e,t){Object.defineProperty(e,"toString",{value:t})}function Lf(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var sCe=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var r=0,n=0;n<t;n++)r+=this.groupSizes[n];return r},e.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var n=this.groupSizes,o=n.length,f=o;t>=f;)if((f<<=1)<0)throw Lf(16,"".concat(t));this.groupSizes=new Uint32Array(f),this.groupSizes.set(n),this.length=f;for(var y=o;y<f;y++)this.groupSizes[y]=0}for(var s=this.indexOfGroup(t+1),k=(y=0,r.length);y<k;y++)this.tag.insertRule(s,r[y])&&(this.groupSizes[t]++,s++)},e.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],n=this.indexOfGroup(t),o=n+r;this.groupSizes[t]=0;for(var f=n;f<o;f++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var n=this.groupSizes[t],o=this.indexOfGroup(t),f=o+n,y=o;y<f;y++)r+="".concat(this.tag.getRule(y)).concat(`/*!sc*/
`);return r},e}(),n1=new Map,bw=new Map,EE=1,l_=function(e){if(n1.has(e))return n1.get(e);for(;bw.has(EE);)EE++;var t=EE++;return n1.set(e,t),bw.set(t,e),t},oCe=function(e,t){n1.set(e,t),bw.set(t,e)},aCe="style[".concat(Zm,"][").concat("data-styled-version",'="').concat("6.1.0",'"]'),lCe=new RegExp("^".concat(Zm,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),cCe=function(e,t,r){for(var n,o=r.split(","),f=0,y=o.length;f<y;f++)(n=o[f])&&e.registerName(t,n)},uCe=function(e,t){for(var r,n=((r=t.textContent)!==null&&r!==void 0?r:"").split(`/*!sc*/
`),o=[],f=0,y=n.length;f<y;f++){var s=n[f].trim();if(s){var k=s.match(lCe);if(k){var I=0|parseInt(k[1],10),D=k[2];I!==0&&(oCe(D,I),cCe(e,D,k[3]),e.getTag().insertRules(I,o)),o.length=0}else o.push(s)}}};function hCe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var JH=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(s){var k=Array.from(s.querySelectorAll("style[".concat(Zm,"]")));return k[k.length-1]}(r),f=o!==void 0?o.nextSibling:null;n.setAttribute(Zm,"active"),n.setAttribute("data-styled-version","6.1.0");var y=hCe();return y&&n.setAttribute("nonce",y),r.insertBefore(n,f),n},dCe=function(){function e(t){this.element=JH(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var n=document.styleSheets,o=0,f=n.length;o<f;o++){var y=n[o];if(y.ownerNode===r)return y}throw Lf(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},e}(),fCe=function(){function e(t){this.element=JH(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var n=document.createTextNode(r);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),pCe=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),U4=eM,mCe={isServer:!eM,useCSSOMInjection:!H2e},QH=function(){function e(t,r,n){t===void 0&&(t=Km),r===void 0&&(r={});var o=this;this.options=zo(zo({},mCe),t),this.gs=r,this.names=new Map(n),this.server=!!t.isServer,!this.server&&eM&&U4&&(U4=!1,function(f){for(var y=document.querySelectorAll(aCe),s=0,k=y.length;s<k;s++){var I=y[s];I&&I.getAttribute(Zm)!=="active"&&(uCe(f,I),I.parentNode&&I.parentNode.removeChild(I))}}(this)),rM(this,function(){return function(f){for(var y=f.getTag(),s=y.length,k="",I=function(N){var U=function(ie){return bw.get(ie)}(N);if(U===void 0)return"continue";var q=f.names.get(U),Z=y.getGroup(N);if(q===void 0||Z.length===0)return"continue";var ae="".concat(Zm,".g").concat(N,'[id="').concat(U,'"]'),ve="";q!==void 0&&q.forEach(function(ie){ie.length>0&&(ve+="".concat(ie,","))}),k+="".concat(Z).concat(ae,'{content:"').concat(ve,'"}').concat(`/*!sc*/
`)},D=0;D<s;D++)I(D);return k}(o)})}return e.registerId=function(t){return l_(t)},e.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new e(zo(zo({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(r){var n=r.useCSSOMInjection,o=r.target;return r.isServer?new pCe(o):n?new dCe(o):new fCe(o)}(this.options),new sCe(t)));var t},e.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},e.prototype.registerName=function(t,r){if(l_(t),this.names.has(t))this.names.get(t).add(r);else{var n=new Set;n.add(r),this.names.set(t,n)}},e.prototype.insertRules=function(t,r,n){this.registerName(t,r),this.getTag().insertRules(l_(t),n)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(l_(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),gCe=/&/g,yCe=/^\s*\/\/.*$/gm;function eW(e,t){return e.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=eW(r.children,t)),r})}function xCe(e){var t,r,n,o=e===void 0?Km:e,f=o.options,y=f===void 0?Km:f,s=o.plugins,k=s===void 0?t2:s,I=function(U,q,Z){return Z===r||Z.startsWith(r)&&Z.endsWith(r)&&Z.replaceAll(r,"").length>0?".".concat(t):U},D=k.slice();D.push(function(U){U.type===KS&&U.value.includes("&")&&(U.props[0]=U.props[0].replace(gCe,r).replace(n,I))}),y.prefix&&D.push(V2e),D.push(B2e);var N=function(U,q,Z,ae){q===void 0&&(q=""),Z===void 0&&(Z=""),ae===void 0&&(ae="&"),t=ae,r=q,n=new RegExp("\\".concat(r,"\\b"),"g");var ve=U.replace(yCe,""),ie=j2e(Z||q?"".concat(Z," ").concat(q," { ").concat(ve," }"):ve);y.namespace&&(ie=eW(ie,y.namespace));var W=[];return vw(ie,$2e(D.concat(U2e(function(K){return W.push(K)})))),W};return N.hash=k.length?k.reduce(function(U,q){return q.name||Lf(15),pm(U,q.name)},5381).toString():"",N}var vCe=new QH,YA=xCe(),tW=xn.createContext({shouldForwardProp:void 0,styleSheet:vCe,stylis:YA});tW.Consumer;xn.createContext(void 0);function V4(){return le.useContext(tW)}var bCe=function(){function e(t,r){var n=this;this.inject=function(o,f){f===void 0&&(f=YA);var y=n.name+f.hash;o.hasNameForId(n.id,y)||o.insertRules(n.id,y,f(n.rules,y,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,rM(this,function(){throw Lf(12,String(n.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=YA),this.name+t.hash},e}(),_Ce=function(e){return e>="A"&&e<="Z"};function H4(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(r===1&&n==="-"&&e[0]==="-")return e;_Ce(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var rW=function(e){return e==null||e===!1||e===""},nW=function(e){var t,r,n=[];for(var o in e){var f=e[o];e.hasOwnProperty(o)&&!rW(f)&&(Array.isArray(f)&&f.isCss||Mf(f)?n.push("".concat(H4(o),":"),f,";"):Ev(f)?n.push.apply(n,tw(tw(["".concat(o," {")],nW(f),!1),["}"],!1)):n.push("".concat(H4(o),": ").concat((t=o,(r=f)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in YB||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return n};function bf(e,t,r,n){if(rW(e))return[];if(tM(e))return[".".concat(e.styledComponentId)];if(Mf(e)){if(!Mf(f=e)||f.prototype&&f.prototype.isReactComponent||!t)return[e];var o=e(t);return bf(o,t,r,n)}var f;return e instanceof bCe?r?(e.inject(r,n),[e.getName(n)]):[e]:Ev(e)?nW(e):Array.isArray(e)?Array.prototype.concat.apply(t2,e.map(function(y){return bf(y,t,r,n)})):[e.toString()]}function wCe(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(Mf(r)&&!tM(r))return!1}return!0}var SCe=XH("6.1.0"),CCe=function(){function e(t,r,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&wCe(t),this.componentId=r,this.baseHash=pm(SCe,r),this.baseStyle=n,QH.registerId(r)}return e.prototype.generateAndInjectStyles=function(t,r,n){var o=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))o=cf(o,this.staticRulesId);else{var f=$4(bf(this.rules,t,r,n)),y=XA(pm(this.baseHash,f)>>>0);if(!r.hasNameForId(this.componentId,y)){var s=n(f,".".concat(y),void 0,this.componentId);r.insertRules(this.componentId,y,s)}o=cf(o,y),this.staticRulesId=y}else{for(var k=pm(this.baseHash,n.hash),I="",D=0;D<this.rules.length;D++){var N=this.rules[D];if(typeof N=="string")I+=N;else if(N){var U=$4(bf(N,t,r,n));k=pm(k,U+D),I+=U}}if(I){var q=XA(k>>>0);r.hasNameForId(this.componentId,q)||r.insertRules(this.componentId,q,n(I,".".concat(q),void 0,this.componentId)),o=cf(o,q)}}return o},e}(),_w=xn.createContext(void 0);_w.Consumer;function kCe(e){var t=xn.useContext(_w),r=le.useMemo(function(){return function(n,o){if(!n)throw Lf(14);if(Mf(n)){var f=n(o);return f}if(Array.isArray(n)||typeof n!="object")throw Lf(8);return o?zo(zo({},o),n):n}(e.theme,t)},[e.theme,t]);return e.children?xn.createElement(_w.Provider,{value:r},e.children):null}var TE={};function ECe(e,t,r){var n=tM(e),o=e,f=!kE(e),y=t.attrs,s=y===void 0?t2:y,k=t.componentId,I=k===void 0?function(K,he){var de=typeof K!="string"?"sc":z4(K);TE[de]=(TE[de]||0)+1;var Ae="".concat(de,"-").concat(Y2e("6.1.0"+de+TE[de]));return he?"".concat(he,"-").concat(Ae):Ae}(t.displayName,t.parentComponentId):k,D=t.displayName;D===void 0&&function(K){return kE(K)?"styled.".concat(K):"Styled(".concat(Z2e(K),")")}(e);var N=t.displayName&&t.componentId?"".concat(z4(t.displayName),"-").concat(t.componentId):t.componentId||I,U=n&&o.attrs?o.attrs.concat(s).filter(Boolean):s,q=t.shouldForwardProp;if(n&&o.shouldForwardProp){var Z=o.shouldForwardProp;if(t.shouldForwardProp){var ae=t.shouldForwardProp;q=function(K,he){return Z(K,he)&&ae(K,he)}}else q=Z}var ve=new CCe(r,N,n?o.componentStyle:void 0);function ie(K,he){return function(de,Ae,Te){var Ue=de.attrs,Pe=de.componentStyle,$e=de.defaultProps,Ve=de.foldedComponentIds,Fe=de.styledComponentId,Ye=de.target,ft=xn.useContext(_w),Pt=V4(),or=de.shouldForwardProp||Pt.shouldForwardProp,xr=function(Vt,ir,vt){for(var Dt,ur=zo(zo({},ir),{className:void 0,theme:vt}),Tr=0;Tr<Vt.length;Tr+=1){var fr=Mf(Dt=Vt[Tr])?Dt(ur):Dt;for(var Cr in fr)ur[Cr]=Cr==="className"?cf(ur[Cr],fr[Cr]):Cr==="style"?zo(zo({},ur[Cr]),fr[Cr]):fr[Cr]}return ir.className&&(ur.className=cf(ur.className,ir.className)),ur}(Ue,Ae,W2e(Ae,ft,$e)||Km),mt=xr.as||Ye,Xt={};for(var Wt in xr)xr[Wt]===void 0||Wt[0]==="$"||Wt==="as"||Wt==="theme"||(Wt==="forwardedAs"?Xt.as=xr.forwardedAs:or&&!or(Wt,mt)||(Xt[Wt]=xr[Wt]));var Ot=function(Vt,ir){var vt=V4(),Dt=Vt.generateAndInjectStyles(ir,vt.styleSheet,vt.stylis);return Dt}(Pe,xr),ut=cf(Ve,Fe);return Ot&&(ut+=" "+Ot),xr.className&&(ut+=" "+xr.className),Xt[kE(mt)&&!GH.has(mt)?"class":"className"]=ut,Xt.ref=Te,le.createElement(mt,Xt)}(W,K,he)}var W=xn.forwardRef(ie);return W.attrs=U,W.componentStyle=ve,W.shouldForwardProp=q,W.foldedComponentIds=n?cf(o.foldedComponentIds,o.styledComponentId):"",W.styledComponentId=N,W.target=n?o.target:e,Object.defineProperty(W,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(K){this._foldedDefaultProps=n?function(he){for(var de=[],Ae=1;Ae<arguments.length;Ae++)de[Ae-1]=arguments[Ae];for(var Te=0,Ue=de;Te<Ue.length;Te++)qA(he,Ue[Te],!0);return he}({},o.defaultProps,K):K}}),rM(W,function(){return".".concat(W.styledComponentId)}),f&&KH(W,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),W}function W4(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r}var G4=function(e){return Object.assign(e,{isCss:!0})};function no(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Mf(e)||Ev(e)){var n=e;return G4(bf(W4(t2,tw([n],t,!0))))}var o=e;return t.length===0&&o.length===1&&typeof o[0]=="string"?bf(o):G4(bf(W4(o,t)))}function ZA(e,t,r){if(r===void 0&&(r=Km),!t)throw Lf(1,t);var n=function(o){for(var f=[],y=1;y<arguments.length;y++)f[y-1]=arguments[y];return e(t,r,no.apply(void 0,tw([o],f,!1)))};return n.attrs=function(o){return ZA(e,t,zo(zo({},r),{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},n.withConfig=function(o){return ZA(e,t,zo(zo({},r),o))},n}var iW=function(e){return ZA(ECe,e)},zn=iW;GH.forEach(function(e){zn[e]=iW(e)});var Gh;function Jm(e,t){return e[t]}function KA(e,t){return t.split(".").reduce((r,n)=>{const o=n.match(/[^\]\\[.]+/g);if(o&&o.length>1)for(let f=0;f<o.length;f++)return r[o[f]][o[f+1]];return r[n]},e)}function TCe(e=[],t,r=0){return[...e.slice(0,r),t,...e.slice(r)]}function ACe(e=[],t,r="id"){const n=e.slice(),o=Jm(t,r);return o?n.splice(n.findIndex(f=>Jm(f,r)===o),1):n.splice(n.findIndex(f=>f===t),1),n}function X4(e){return e.map((t,r)=>{const n=Object.assign(Object.assign({},t),{sortable:t.sortable||!!t.sortFunction||void 0});return t.id||(n.id=r+1),n})}function Nx(e,t){return Math.ceil(e/t)}function AE(e,t){return Math.min(e,t)}(function(e){e.ASC="asc",e.DESC="desc"})(Gh||(Gh={}));const eo=()=>null;function sW(e,t=[],r=[]){let n={},o=[...r];return t.length&&t.forEach(f=>{if(!f.when||typeof f.when!="function")throw new Error('"when" must be defined in the conditional style object and must be function');f.when(e)&&(n=f.style||{},f.classNames&&(o=[...o,...f.classNames]),typeof f.style=="function"&&(n=f.style(e)||{}))}),{style:n,classNames:o.join(" ")}}function i1(e,t=[],r="id"){const n=Jm(e,r);return n?t.some(o=>Jm(o,r)===n):t.some(o=>o===e)}function c_(e,t){return t?e.findIndex(r=>jx(r.id,t)):-1}function jx(e,t){return e==t}function ICe(e,t){const r=!e.toggleOnSelectedRowsChange;switch(t.type){case"SELECT_ALL_ROWS":{const{keyField:n,rows:o,rowCount:f,mergeSelections:y}=t,s=!e.allSelected,k=!e.toggleOnSelectedRowsChange;if(y){const I=s?[...e.selectedRows,...o.filter(D=>!i1(D,e.selectedRows,n))]:e.selectedRows.filter(D=>!i1(D,o,n));return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:I.length,selectedRows:I,toggleOnSelectedRowsChange:k})}return Object.assign(Object.assign({},e),{allSelected:s,selectedCount:s?f:0,selectedRows:s?o:[],toggleOnSelectedRowsChange:k})}case"SELECT_SINGLE_ROW":{const{keyField:n,row:o,isSelected:f,rowCount:y,singleSelect:s}=t;return s?f?Object.assign(Object.assign({},e),{selectedCount:0,allSelected:!1,selectedRows:[],toggleOnSelectedRowsChange:r}):Object.assign(Object.assign({},e),{selectedCount:1,allSelected:!1,selectedRows:[o],toggleOnSelectedRowsChange:r}):f?Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length>0?e.selectedRows.length-1:0,allSelected:!1,selectedRows:ACe(e.selectedRows,o,n),toggleOnSelectedRowsChange:r}):Object.assign(Object.assign({},e),{selectedCount:e.selectedRows.length+1,allSelected:e.selectedRows.length+1===y,selectedRows:TCe(e.selectedRows,o),toggleOnSelectedRowsChange:r})}case"SELECT_MULTIPLE_ROWS":{const{keyField:n,selectedRows:o,totalRows:f,mergeSelections:y}=t;if(y){const s=[...e.selectedRows,...o.filter(k=>!i1(k,e.selectedRows,n))];return Object.assign(Object.assign({},e),{selectedCount:s.length,allSelected:!1,selectedRows:s,toggleOnSelectedRowsChange:r})}return Object.assign(Object.assign({},e),{selectedCount:o.length,allSelected:o.length===f,selectedRows:o,toggleOnSelectedRowsChange:r})}case"CLEAR_SELECTED_ROWS":{const{selectedRowsFlag:n}=t;return Object.assign(Object.assign({},e),{allSelected:!1,selectedCount:0,selectedRows:[],selectedRowsFlag:n})}case"SORT_CHANGE":{const{sortDirection:n,selectedColumn:o,clearSelectedOnSort:f}=t;return Object.assign(Object.assign(Object.assign({},e),{selectedColumn:o,sortDirection:n,currentPage:1}),f&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:r})}case"CHANGE_PAGE":{const{page:n,paginationServer:o,visibleOnly:f,persistSelectedOnPageChange:y}=t,s=o&&y,k=o&&!y||f;return Object.assign(Object.assign(Object.assign(Object.assign({},e),{currentPage:n}),s&&{allSelected:!1}),k&&{allSelected:!1,selectedCount:0,selectedRows:[],toggleOnSelectedRowsChange:r})}case"CHANGE_ROWS_PER_PAGE":{const{rowsPerPage:n,page:o}=t;return Object.assign(Object.assign({},e),{currentPage:o,rowsPerPage:n})}}}const PCe=no`
	pointer-events: none;
	opacity: 0.4;
`,RCe=zn.div`
	position: relative;
	box-sizing: border-box;
	display: flex;
	flex-direction: column;
	width: 100%;
	height: 100%;
	max-width: 100%;
	${({disabled:e})=>e&&PCe};
	${({theme:e})=>e.table.style};
`,MCe=no`
	position: sticky;
	position: -webkit-sticky; /* Safari */
	top: 0;
	z-index: 1;
`,LCe=zn.div`
	display: flex;
	width: 100%;
	${({$fixedHeader:e})=>e&&MCe};
	${({theme:e})=>e.head.style};
`,OCe=zn.div`
	display: flex;
	align-items: stretch;
	width: 100%;
	${({theme:e})=>e.headRow.style};
	${({$dense:e,theme:t})=>e&&t.headRow.denseStyle};
`,oW=(e,...t)=>no`
		@media screen and (max-width: ${599}px) {
			${no(e,...t)}
		}
	`,DCe=(e,...t)=>no`
		@media screen and (max-width: ${959}px) {
			${no(e,...t)}
		}
	`,zCe=(e,...t)=>no`
		@media screen and (max-width: ${1280}px) {
			${no(e,...t)}
		}
	`,NCe=e=>(t,...r)=>no`
				@media screen and (max-width: ${e}px) {
					${no(t,...r)}
				}
			`,gg=zn.div`
	position: relative;
	display: flex;
	align-items: center;
	box-sizing: border-box;
	line-height: normal;
	${({theme:e,$headCell:t})=>e[t?"headCells":"cells"].style};
	${({$noPadding:e})=>e&&"padding: 0"};
`,aW=zn(gg)`
	flex-grow: ${({button:e,grow:t})=>t===0||e?0:t||1};
	flex-shrink: 0;
	flex-basis: 0;
	max-width: ${({maxWidth:e})=>e||"100%"};
	min-width: ${({minWidth:e})=>e||"100px"};
	${({width:e})=>e&&no`
			min-width: ${e};
			max-width: ${e};
		`};
	${({right:e})=>e&&"justify-content: flex-end"};
	${({button:e,center:t})=>(t||e)&&"justify-content: center"};
	${({compact:e,button:t})=>(e||t)&&"padding: 0"};

	/* handle hiding cells */
	${({hide:e})=>e&&e==="sm"&&oW`
    display: none;
  `};
	${({hide:e})=>e&&e==="md"&&DCe`
    display: none;
  `};
	${({hide:e})=>e&&e==="lg"&&zCe`
    display: none;
  `};
	${({hide:e})=>e&&Number.isInteger(e)&&NCe(e)`
    display: none;
  `};
`,jCe=no`
	div:first-child {
		white-space: ${({$wrapCell:e})=>e?"normal":"nowrap"};
		overflow: ${({$allowOverflow:e})=>e?"visible":"hidden"};
		text-overflow: ellipsis;
	}
`,FCe=zn(aW).attrs(e=>({style:e.style}))`
	${({$renderAsCell:e})=>!e&&jCe};
	${({theme:e,$isDragging:t})=>t&&e.cells.draggingStyle};
	${({$cellStyle:e})=>e};
`;var BCe=le.memo(function({id:e,column:t,row:r,rowIndex:n,dataTag:o,isDragging:f,onDragStart:y,onDragOver:s,onDragEnd:k,onDragEnter:I,onDragLeave:D}){const{style:N,classNames:U}=sW(r,t.conditionalCellStyles,["rdt_TableCell"]);return le.createElement(FCe,{id:e,"data-column-id":t.id,role:"cell",className:U,"data-tag":o,$cellStyle:t.style,$renderAsCell:!!t.cell,$allowOverflow:t.allowOverflow,button:t.button,center:t.center,compact:t.compact,grow:t.grow,hide:t.hide,maxWidth:t.maxWidth,minWidth:t.minWidth,right:t.right,width:t.width,$wrapCell:t.wrap,style:N,$isDragging:f,onDragStart:y,onDragOver:s,onDragEnd:k,onDragEnter:I,onDragLeave:D},!t.cell&&le.createElement("div",{"data-tag":o},function(q,Z,ae,ve){if(!Z)return null;if(typeof Z!="string"&&typeof Z!="function")throw new Error("selector must be a . delimited string eg (my.property) or function (e.g. row => row.field");return ae&&typeof ae=="function"?ae(q,ve):Z&&typeof Z=="function"?Z(q,ve):KA(q,Z)}(r,t.selector,t.format,n)),t.cell&&t.cell(r,n,t,e))}),lW=le.memo(function({name:e,component:t="input",componentOptions:r={style:{}},indeterminate:n=!1,checked:o=!1,disabled:f=!1,onClick:y=eo}){const s=t,k=s!=="input"?r.style:(D=>Object.assign(Object.assign({fontSize:"18px"},!D&&{cursor:"pointer"}),{padding:0,marginTop:"1px",verticalAlign:"middle",position:"relative"}))(f),I=le.useMemo(()=>function(D,...N){let U;return Object.keys(D).map(q=>D[q]).forEach((q,Z)=>{typeof q=="function"&&(U=Object.assign(Object.assign({},D),{[Object.keys(D)[Z]]:q(...N)}))}),U||D}(r,n),[r,n]);return le.createElement(s,Object.assign({type:"checkbox",ref:D=>{D&&(D.indeterminate=n)},style:k,onClick:f?eo:y,name:e,"aria-label":e,checked:o,disabled:f},I,{onChange:eo}))});const $Ce=zn(gg)`
	flex: 0 0 48px;
	min-width: 48px;
	justify-content: center;
	align-items: center;
	user-select: none;
	white-space: nowrap;
`;function UCe({name:e,keyField:t,row:r,rowCount:n,selected:o,selectableRowsComponent:f,selectableRowsComponentProps:y,selectableRowsSingle:s,selectableRowDisabled:k,onSelectedRow:I}){const D=!(!k||!k(r));return le.createElement($Ce,{onClick:N=>N.stopPropagation(),className:"rdt_TableCell",$noPadding:!0},le.createElement(lW,{name:e,component:f,componentOptions:y,checked:o,"aria-checked":o,onClick:()=>{I({type:"SELECT_SINGLE_ROW",row:r,isSelected:o,keyField:t,rowCount:n,singleSelect:s})},disabled:D}))}const VCe=zn.button`
	display: inline-flex;
	align-items: center;
	user-select: none;
	white-space: nowrap;
	border: none;
	background-color: transparent;
	${({theme:e})=>e.expanderButton.style};
`;function HCe({disabled:e=!1,expanded:t=!1,expandableIcon:r,id:n,row:o,onToggled:f}){const y=t?r.expanded:r.collapsed;return le.createElement(VCe,{"aria-disabled":e,onClick:()=>f&&f(o),"data-testid":`expander-button-${n}`,disabled:e,"aria-label":t?"Collapse Row":"Expand Row",role:"button",type:"button"},y)}const WCe=zn(gg)`
	white-space: nowrap;
	font-weight: 400;
	min-width: 48px;
	${({theme:e})=>e.expanderCell.style};
`;function GCe({row:e,expanded:t=!1,expandableIcon:r,id:n,onToggled:o,disabled:f=!1}){return le.createElement(WCe,{onClick:y=>y.stopPropagation(),$noPadding:!0},le.createElement(HCe,{id:n,row:e,expanded:t,expandableIcon:r,disabled:f,onToggled:o}))}const XCe=zn.div`
	width: 100%;
	box-sizing: border-box;
	${({theme:e})=>e.expanderRow.style};
	${({$extendedRowStyle:e})=>e};
`;var qCe=le.memo(function({data:e,ExpanderComponent:t,expanderComponentProps:r,extendedRowStyle:n,extendedClassNames:o}){const f=["rdt_ExpanderRow",...o.split(" ").filter(y=>y!=="rdt_TableRow")].join(" ");return le.createElement(XCe,{className:f,$extendedRowStyle:n},le.createElement(t,Object.assign({data:e},r)))}),ww,JA,q4;(function(e){e.LTR="ltr",e.RTL="rtl",e.AUTO="auto"})(ww||(ww={})),function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center"}(JA||(JA={})),function(e){e.SM="sm",e.MD="md",e.LG="lg"}(q4||(q4={}));const YCe=no`
	&:hover {
		${({$highlightOnHover:e,theme:t})=>e&&t.rows.highlightOnHoverStyle};
	}
`,ZCe=no`
	&:hover {
		cursor: pointer;
	}
`,KCe=zn.div.attrs(e=>({style:e.style}))`
	display: flex;
	align-items: stretch;
	align-content: stretch;
	width: 100%;
	box-sizing: border-box;
	${({theme:e})=>e.rows.style};
	${({$dense:e,theme:t})=>e&&t.rows.denseStyle};
	${({$striped:e,theme:t})=>e&&t.rows.stripedStyle};
	${({$highlightOnHover:e})=>e&&YCe};
	${({$pointerOnHover:e})=>e&&ZCe};
	${({$selected:e,theme:t})=>e&&t.rows.selectedHighlightStyle};
`;function JCe({columns:e=[],conditionalRowStyles:t=[],defaultExpanded:r=!1,defaultExpanderDisabled:n=!1,dense:o=!1,expandableIcon:f,expandableRows:y=!1,expandableRowsComponent:s,expandableRowsComponentProps:k,expandableRowsHideExpander:I,expandOnRowClicked:D=!1,expandOnRowDoubleClicked:N=!1,highlightOnHover:U=!1,id:q,expandableInheritConditionalStyles:Z,keyField:ae,onRowClicked:ve=eo,onRowDoubleClicked:ie=eo,onRowMouseEnter:W=eo,onRowMouseLeave:K=eo,onRowExpandToggled:he=eo,onSelectedRow:de=eo,pointerOnHover:Ae=!1,row:Te,rowCount:Ue,rowIndex:Pe,selectableRowDisabled:$e=null,selectableRows:Ve=!1,selectableRowsComponent:Fe,selectableRowsComponentProps:Ye,selectableRowsHighlight:ft=!1,selectableRowsSingle:Pt=!1,selected:or,striped:xr=!1,draggingColumnId:mt,onDragStart:Xt,onDragOver:Wt,onDragEnd:Ot,onDragEnter:ut,onDragLeave:Vt}){const[ir,vt]=le.useState(r);le.useEffect(()=>{vt(r)},[r]);const Dt=le.useCallback(()=>{vt(!ir),he(!ir,Te)},[ir,he,Te]),ur=Ae||y&&(D||N),Tr=le.useCallback(Kr=>{Kr.target&&Kr.target.getAttribute("data-tag")==="allowRowEvents"&&(ve(Te,Kr),!n&&y&&D&&Dt())},[n,D,y,Dt,ve,Te]),fr=le.useCallback(Kr=>{Kr.target&&Kr.target.getAttribute("data-tag")==="allowRowEvents"&&(ie(Te,Kr),!n&&y&&N&&Dt())},[n,N,y,Dt,ie,Te]),Cr=le.useCallback(Kr=>{W(Te,Kr)},[W,Te]),mr=le.useCallback(Kr=>{K(Te,Kr)},[K,Te]),nn=Jm(Te,ae),{style:Br,classNames:Sn}=sW(Te,t,["rdt_TableRow"]),on=ft&&or,Gr=Z?Br:{},Zi=xr&&Pe%2==0;return le.createElement(le.Fragment,null,le.createElement(KCe,{id:`row-${q}`,role:"row",$striped:Zi,$highlightOnHover:U,$pointerOnHover:!n&&ur,$dense:o,onClick:Tr,onDoubleClick:fr,onMouseEnter:Cr,onMouseLeave:mr,className:Sn,$selected:on,style:Br},Ve&&le.createElement(UCe,{name:`select-row-${nn}`,keyField:ae,row:Te,rowCount:Ue,selected:or,selectableRowsComponent:Fe,selectableRowsComponentProps:Ye,selectableRowDisabled:$e,selectableRowsSingle:Pt,onSelectedRow:de}),y&&!I&&le.createElement(GCe,{id:nn,expandableIcon:f,expanded:ir,row:Te,onToggled:Dt,disabled:n}),e.map(Kr=>Kr.omit?null:le.createElement(BCe,{id:`cell-${Kr.id}-${nn}`,key:`cell-${Kr.id}-${nn}`,dataTag:Kr.ignoreRowClick||Kr.button?null:"allowRowEvents",column:Kr,row:Te,rowIndex:Pe,isDragging:jx(mt,Kr.id),onDragStart:Xt,onDragOver:Wt,onDragEnd:Ot,onDragEnter:ut,onDragLeave:Vt}))),y&&ir&&le.createElement(qCe,{key:`expander-${nn}`,data:Te,extendedRowStyle:Gr,extendedClassNames:Sn,ExpanderComponent:s,expanderComponentProps:k}))}const QCe=zn.span`
	padding: 2px;
	color: inherit;
	flex-grow: 0;
	flex-shrink: 0;
	${({$sortActive:e})=>e?"opacity: 1":"opacity: 0"};
	${({$sortDirection:e})=>e==="desc"&&"transform: rotate(180deg)"};
`,eke=({sortActive:e,sortDirection:t})=>xn.createElement(QCe,{$sortActive:e,$sortDirection:t},""),tke=zn(aW)`
	${({button:e})=>e&&"text-align: center"};
	${({theme:e,$isDragging:t})=>t&&e.headCells.draggingStyle};
`,rke=no`
	cursor: pointer;
	span.__rdt_custom_sort_icon__ {
		i,
		svg {
			transform: 'translate3d(0, 0, 0)';
			${({sortActive:e})=>e?"opacity: 1":"opacity: 0"};
			color: inherit;
			font-size: 18px;
			height: 18px;
			width: 18px;
			backface-visibility: hidden;
			transform-style: preserve-3d;
			transition-duration: 95ms;
			transition-property: transform;
		}

		&.asc i,
		&.asc svg {
			transform: rotate(180deg);
		}
	}

	${({sortActive:e})=>!e&&no`
			&:hover,
			&:focus {
				opacity: 0.7;

				span,
				span.__rdt_custom_sort_icon__ * {
					opacity: 0.7;
				}
			}
		`};
`,nke=zn.div`
	display: inline-flex;
	align-items: center;
	justify-content: inherit;
	height: 100%;
	width: 100%;
	outline: none;
	user-select: none;
	overflow: hidden;
	${({disabled:e})=>!e&&rke};
`,ike=zn.div`
	overflow: hidden;
	white-space: nowrap;
	text-overflow: ellipsis;
`;var ske=le.memo(function({column:e,disabled:t,draggingColumnId:r,selectedColumn:n={},sortDirection:o,sortIcon:f,sortServer:y,pagination:s,paginationServer:k,persistSelectedOnSort:I,selectableRowsVisibleOnly:D,onSort:N,onDragStart:U,onDragOver:q,onDragEnd:Z,onDragEnter:ae,onDragLeave:ve}){le.useEffect(()=>{typeof e.selector=="string"&&console.error(`Warning: ${e.selector} is a string based column selector which has been deprecated as of v7 and will be removed in v8. Instead, use a selector function e.g. row => row[field]...`)},[]);const[ie,W]=le.useState(!1),K=le.useRef(null);if(le.useEffect(()=>{K.current&&W(K.current.scrollWidth>K.current.clientWidth)},[ie]),e.omit)return null;const he=()=>{if(!e.sortable&&!e.selector)return;let Ye=o;jx(n.id,e.id)&&(Ye=o===Gh.ASC?Gh.DESC:Gh.ASC),N({type:"SORT_CHANGE",sortDirection:Ye,selectedColumn:e,clearSelectedOnSort:s&&k&&!I||y||D})},de=Ye=>le.createElement(eke,{sortActive:Ye,sortDirection:o}),Ae=()=>le.createElement("span",{className:[o,"__rdt_custom_sort_icon__"].join(" ")},f),Te=!(!e.sortable||!jx(n.id,e.id)),Ue=!e.sortable||t,Pe=e.sortable&&!f&&!e.right,$e=e.sortable&&!f&&e.right,Ve=e.sortable&&f&&!e.right,Fe=e.sortable&&f&&e.right;return le.createElement(tke,{"data-column-id":e.id,className:"rdt_TableCol",$headCell:!0,allowOverflow:e.allowOverflow,button:e.button,compact:e.compact,grow:e.grow,hide:e.hide,maxWidth:e.maxWidth,minWidth:e.minWidth,right:e.right,center:e.center,width:e.width,draggable:e.reorder,$isDragging:jx(e.id,r),onDragStart:U,onDragOver:q,onDragEnd:Z,onDragEnter:ae,onDragLeave:ve},e.name&&le.createElement(nke,{"data-column-id":e.id,"data-sort-id":e.id,role:"columnheader",tabIndex:0,className:"rdt_TableCol_Sortable",onClick:Ue?void 0:he,onKeyPress:Ue?void 0:Ye=>{Ye.key==="Enter"&&he()},sortActive:!Ue&&Te,disabled:Ue},!Ue&&Fe&&Ae(),!Ue&&$e&&de(Te),typeof e.name=="string"?le.createElement(ike,{title:ie?e.name:void 0,ref:K,"data-column-id":e.id},e.name):e.name,!Ue&&Ve&&Ae(),!Ue&&Pe&&de(Te)))});const oke=zn(gg)`
	flex: 0 0 48px;
	justify-content: center;
	align-items: center;
	user-select: none;
	white-space: nowrap;
	font-size: unset;
`;function ake({headCell:e=!0,rowData:t,keyField:r,allSelected:n,mergeSelections:o,selectedRows:f,selectableRowsComponent:y,selectableRowsComponentProps:s,selectableRowDisabled:k,onSelectAllRows:I}){const D=f.length>0&&!n,N=k?t.filter(Z=>!k(Z)):t,U=N.length===0,q=Math.min(t.length,N.length);return le.createElement(oke,{className:"rdt_TableCol",$headCell:e,$noPadding:!0},le.createElement(lW,{name:"select-all-rows",component:y,componentOptions:s,onClick:()=>{I({type:"SELECT_ALL_ROWS",rows:N,rowCount:q,mergeSelections:o,keyField:r})},checked:n,indeterminate:D,disabled:U}))}function cW(e=ww.AUTO){const t=typeof window=="object",[r,n]=le.useState(!1);return le.useEffect(()=>{if(t)if(e!=="auto")n(e==="rtl");else{const o=!(!window.document||!window.document.createElement),f=document.getElementsByTagName("BODY")[0],y=document.getElementsByTagName("HTML")[0],s=f.dir==="rtl"||y.dir==="rtl";n(o&&s)}},[e,t]),r}const lke=zn.div`
	display: flex;
	align-items: center;
	flex: 1 0 auto;
	height: 100%;
	color: ${({theme:e})=>e.contextMenu.fontColor};
	font-size: ${({theme:e})=>e.contextMenu.fontSize};
	font-weight: 400;
`,cke=zn.div`
	display: flex;
	align-items: center;
	justify-content: flex-end;
	flex-wrap: wrap;
`,Y4=zn.div`
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	box-sizing: inherit;
	z-index: 1;
	align-items: center;
	justify-content: space-between;
	display: flex;
	${({$rtl:e})=>e&&"direction: rtl"};
	${({theme:e})=>e.contextMenu.style};
	${({theme:e,$visible:t})=>t&&e.contextMenu.activeStyle};
`;function uke({contextMessage:e,contextActions:t,contextComponent:r,selectedCount:n,direction:o}){const f=cW(o),y=n>0;return r?le.createElement(Y4,{$visible:y},le.cloneElement(r,{selectedCount:n})):le.createElement(Y4,{$visible:y,$rtl:f},le.createElement(lke,null,((s,k,I)=>{if(k===0)return null;const D=k===1?s.singular:s.plural;return I?`${k} ${s.message||""} ${D}`:`${k} ${D} ${s.message||""}`})(e,n,f)),le.createElement(cke,null,t))}const hke=zn.div`
	position: relative;
	box-sizing: border-box;
	overflow: hidden;
	display: flex;
	flex: 1 1 auto;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	flex-wrap: wrap;
	${({theme:e})=>e.header.style}
`,dke=zn.div`
	flex: 1 0 auto;
	color: ${({theme:e})=>e.header.fontColor};
	font-size: ${({theme:e})=>e.header.fontSize};
	font-weight: 400;
`,fke=zn.div`
	flex: 1 0 auto;
	display: flex;
	align-items: center;
	justify-content: flex-end;

	> * {
		margin-left: 5px;
	}
`,pke=({title:e,actions:t=null,contextMessage:r,contextActions:n,contextComponent:o,selectedCount:f,direction:y,showMenu:s=!0})=>le.createElement(hke,{className:"rdt_TableHeader",role:"heading","aria-level":1},le.createElement(dke,null,e),t&&le.createElement(fke,null,t),s&&le.createElement(uke,{contextMessage:r,contextActions:n,contextComponent:o,direction:y,selectedCount:f}));function uW(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}const mke={left:"flex-start",right:"flex-end",center:"center"},gke=zn.header`
	position: relative;
	display: flex;
	flex: 1 1 auto;
	box-sizing: border-box;
	align-items: center;
	padding: 4px 16px 4px 24px;
	width: 100%;
	justify-content: ${({align:e})=>mke[e]};
	flex-wrap: ${({$wrapContent:e})=>e?"wrap":"nowrap"};
	${({theme:e})=>e.subHeader.style}
`,yke=e=>{var{align:t="right",wrapContent:r=!0}=e,n=uW(e,["align","wrapContent"]);return le.createElement(gke,Object.assign({align:t,$wrapContent:r},n))},xke=zn.div`
	display: flex;
	flex-direction: column;
`,vke=zn.div`
	position: relative;
	width: 100%;
	border-radius: inherit;
	${({$responsive:e,$fixedHeader:t})=>e&&no`
			overflow-x: auto;

			// hidden prevents vertical scrolling in firefox when fixedHeader is disabled
			overflow-y: ${t?"auto":"hidden"};
			min-height: 0;
		`};

	${({$fixedHeader:e=!1,$fixedHeaderScrollHeight:t="100vh"})=>e&&no`
			max-height: ${t};
			-webkit-overflow-scrolling: touch;
		`};

	${({theme:e})=>e.responsiveWrapper.style};
`,Z4=zn.div`
	position: relative;
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	${e=>e.theme.progress.style};
`,bke=zn.div`
	position: relative;
	width: 100%;
	${({theme:e})=>e.tableWrapper.style};
`,_ke=zn(gg)`
	white-space: nowrap;
	${({theme:e})=>e.expanderCell.style};
`,wke=zn.div`
	box-sizing: border-box;
	width: 100%;
	height: 100%;
	${({theme:e})=>e.noData.style};
`,Ske=()=>xn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},xn.createElement("path",{d:"M7 10l5 5 5-5z"}),xn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Cke=zn.select`
	cursor: pointer;
	height: 24px;
	max-width: 100%;
	user-select: none;
	padding-left: 8px;
	padding-right: 24px;
	box-sizing: content-box;
	font-size: inherit;
	color: inherit;
	border: none;
	background-color: transparent;
	appearance: none;
	direction: ltr;
	flex-shrink: 0;

	&::-ms-expand {
		display: none;
	}

	&:disabled::-ms-expand {
		background: #f60;
	}

	option {
		color: initial;
	}
`,kke=zn.div`
	position: relative;
	flex-shrink: 0;
	font-size: inherit;
	color: inherit;
	margin-top: 1px;

	svg {
		top: 0;
		right: 0;
		color: inherit;
		position: absolute;
		fill: currentColor;
		width: 24px;
		height: 24px;
		display: inline-block;
		user-select: none;
		pointer-events: none;
	}
`,Eke=e=>{var{defaultValue:t,onChange:r}=e,n=uW(e,["defaultValue","onChange"]);return le.createElement(kke,null,le.createElement(Cke,Object.assign({onChange:r,defaultValue:t},n)),le.createElement(Ske,null))},_r={columns:[],data:[],title:"",keyField:"id",selectableRows:!1,selectableRowsHighlight:!1,selectableRowsNoSelectAll:!1,selectableRowSelected:null,selectableRowDisabled:null,selectableRowsComponent:"input",selectableRowsComponentProps:{},selectableRowsVisibleOnly:!1,selectableRowsSingle:!1,clearSelectedRows:!1,expandableRows:!1,expandableRowDisabled:null,expandableRowExpanded:null,expandOnRowClicked:!1,expandableRowsHideExpander:!1,expandOnRowDoubleClicked:!1,expandableInheritConditionalStyles:!1,expandableRowsComponent:function(){return xn.createElement("div",null,"To add an expander pass in a component instance via ",xn.createElement("strong",null,"expandableRowsComponent"),". You can then access props.data from this component.")},expandableIcon:{collapsed:xn.createElement(()=>xn.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},xn.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),xn.createElement("path",{d:"M0-.25h24v24H0z",fill:"none"})),null),expanded:xn.createElement(()=>xn.createElement("svg",{fill:"currentColor",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},xn.createElement("path",{d:"M7.41 7.84L12 12.42l4.59-4.58L18 9.25l-6 6-6-6z"}),xn.createElement("path",{d:"M0-.75h24v24H0z",fill:"none"})),null)},expandableRowsComponentProps:{},progressPending:!1,progressComponent:xn.createElement("div",{style:{fontSize:"24px",fontWeight:700,padding:"24px"}},"Loading..."),persistTableHead:!1,sortIcon:null,sortFunction:null,sortServer:!1,striped:!1,highlightOnHover:!1,pointerOnHover:!1,noContextMenu:!1,contextMessage:{singular:"item",plural:"items",message:"selected"},actions:null,contextActions:null,contextComponent:null,defaultSortFieldId:null,defaultSortAsc:!0,responsive:!0,noDataComponent:xn.createElement("div",{style:{padding:"24px"}},"There are no records to display"),disabled:!1,noTableHead:!1,noHeader:!1,subHeader:!1,subHeaderAlign:JA.RIGHT,subHeaderWrap:!0,subHeaderComponent:null,fixedHeader:!1,fixedHeaderScrollHeight:"100vh",pagination:!1,paginationServer:!1,paginationServerOptions:{persistSelectedOnSort:!1,persistSelectedOnPageChange:!1},paginationDefaultPage:1,paginationResetDefaultPage:!1,paginationTotalRows:0,paginationPerPage:10,paginationRowsPerPageOptions:[10,15,20,25,30],paginationComponent:null,paginationComponentOptions:{},paginationIconFirstPage:xn.createElement(()=>xn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},xn.createElement("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),xn.createElement("path",{fill:"none",d:"M24 24H0V0h24v24z"})),null),paginationIconLastPage:xn.createElement(()=>xn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},xn.createElement("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),xn.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),null),paginationIconNext:xn.createElement(()=>xn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},xn.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),xn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),null),paginationIconPrevious:xn.createElement(()=>xn.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":"true",role:"presentation"},xn.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),xn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),null),dense:!1,conditionalRowStyles:[],theme:"default",customStyles:{},direction:ww.AUTO,onChangePage:eo,onChangeRowsPerPage:eo,onRowClicked:eo,onRowDoubleClicked:eo,onRowMouseEnter:eo,onRowMouseLeave:eo,onRowExpandToggled:eo,onSelectedRowsChange:eo,onSort:eo,onColumnOrderChange:eo},Tke={rowsPerPageText:"Rows per page:",rangeSeparatorText:"of",noRowsPerPage:!1,selectAllRowsItem:!1,selectAllRowsItemText:"All"},Ake=zn.nav`
	display: flex;
	flex: 1 1 auto;
	justify-content: flex-end;
	align-items: center;
	box-sizing: border-box;
	padding-right: 8px;
	padding-left: 8px;
	width: 100%;
	${({theme:e})=>e.pagination.style};
`,u_=zn.button`
	position: relative;
	display: block;
	user-select: none;
	border: none;
	${({theme:e})=>e.pagination.pageButtonsStyle};
	${({$isRTL:e})=>e&&"transform: scale(-1, -1)"};
`,Ike=zn.div`
	display: flex;
	align-items: center;
	border-radius: 4px;
	white-space: nowrap;
	${oW`
    width: 100%;
    justify-content: space-around;
  `};
`,hW=zn.span`
	flex-shrink: 1;
	user-select: none;
`,Pke=zn(hW)`
	margin: 0 24px;
`,Rke=zn(hW)`
	margin: 0 4px;
`;var Mke=le.memo(function({rowsPerPage:e,rowCount:t,currentPage:r,direction:n=_r.direction,paginationRowsPerPageOptions:o=_r.paginationRowsPerPageOptions,paginationIconLastPage:f=_r.paginationIconLastPage,paginationIconFirstPage:y=_r.paginationIconFirstPage,paginationIconNext:s=_r.paginationIconNext,paginationIconPrevious:k=_r.paginationIconPrevious,paginationComponentOptions:I=_r.paginationComponentOptions,onChangeRowsPerPage:D=_r.onChangeRowsPerPage,onChangePage:N=_r.onChangePage}){const U=(()=>{const Ye=typeof window=="object";function ft(){return{width:Ye?window.innerWidth:void 0,height:Ye?window.innerHeight:void 0}}const[Pt,or]=le.useState(ft);return le.useEffect(()=>{if(!Ye)return()=>null;function xr(){or(ft())}return window.addEventListener("resize",xr),()=>window.removeEventListener("resize",xr)},[]),Pt})(),q=cW(n),Z=U.width&&U.width>599,ae=Nx(t,e),ve=r*e,ie=ve-e+1,W=r===1,K=r===ae,he=Object.assign(Object.assign({},Tke),I),de=r===ae?`${ie}-${t} ${he.rangeSeparatorText} ${t}`:`${ie}-${ve} ${he.rangeSeparatorText} ${t}`,Ae=le.useCallback(()=>N(r-1),[r,N]),Te=le.useCallback(()=>N(r+1),[r,N]),Ue=le.useCallback(()=>N(1),[N]),Pe=le.useCallback(()=>N(Nx(t,e)),[N,t,e]),$e=le.useCallback(Ye=>D(Number(Ye.target.value),r),[r,D]),Ve=o.map(Ye=>le.createElement("option",{key:Ye,value:Ye},Ye));he.selectAllRowsItem&&Ve.push(le.createElement("option",{key:-1,value:t},he.selectAllRowsItemText));const Fe=le.createElement(Eke,{onChange:$e,defaultValue:e,"aria-label":he.rowsPerPageText},Ve);return le.createElement(Ake,{className:"rdt_Pagination"},!he.noRowsPerPage&&Z&&le.createElement(le.Fragment,null,le.createElement(Rke,null,he.rowsPerPageText),Fe),Z&&le.createElement(Pke,null,de),le.createElement(Ike,null,le.createElement(u_,{id:"pagination-first-page",type:"button","aria-label":"First Page","aria-disabled":W,onClick:Ue,disabled:W,$isRTL:q},y),le.createElement(u_,{id:"pagination-previous-page",type:"button","aria-label":"Previous Page","aria-disabled":W,onClick:Ae,disabled:W,$isRTL:q},k),!he.noRowsPerPage&&!Z&&Fe,le.createElement(u_,{id:"pagination-next-page",type:"button","aria-label":"Next Page","aria-disabled":K,onClick:Te,disabled:K,$isRTL:q},s),le.createElement(u_,{id:"pagination-last-page",type:"button","aria-label":"Last Page","aria-disabled":K,onClick:Pe,disabled:K,$isRTL:q},f)))});const Kd=(e,t)=>{const r=le.useRef(!0);le.useEffect(()=>{r.current?r.current=!1:e()},t)};var Lke=function(e){return function(t){return!!t&&typeof t=="object"}(e)&&!function(t){var r=Object.prototype.toString.call(t);return r==="[object RegExp]"||r==="[object Date]"||function(n){return n.$$typeof===Oke}(t)}(e)},Oke=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function Tv(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Qm((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function Dke(e,t,r){return e.concat(t).map(function(n){return Tv(n,r)})}function K4(e){return Object.keys(e).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(r){return t.propertyIsEnumerable(r)}):[]}(e))}function J4(e,t){try{return t in e}catch{return!1}}function zke(e,t,r){var n={};return r.isMergeableObject(e)&&K4(e).forEach(function(o){n[o]=Tv(e[o],r)}),K4(t).forEach(function(o){(function(f,y){return J4(f,y)&&!(Object.hasOwnProperty.call(f,y)&&Object.propertyIsEnumerable.call(f,y))})(e,o)||(J4(e,o)&&r.isMergeableObject(t[o])?n[o]=function(f,y){if(!y.customMerge)return Qm;var s=y.customMerge(f);return typeof s=="function"?s:Qm}(o,r)(e[o],t[o],r):n[o]=Tv(t[o],r))}),n}function Qm(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||Dke,r.isMergeableObject=r.isMergeableObject||Lke,r.cloneUnlessOtherwiseSpecified=Tv;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):zke(e,t,r):Tv(t,r)}Qm.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,n){return Qm(r,n,t)},{})};var Nke=Qm;const Q4={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)"},background:{default:"#FFFFFF"},context:{background:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},divider:{default:"rgba(0,0,0,.12)"},button:{default:"rgba(0,0,0,.54)",focus:"rgba(0,0,0,.12)",hover:"rgba(0,0,0,.12)",disabled:"rgba(0, 0, 0, .18)"},selected:{default:"#e3f2fd",text:"rgba(0, 0, 0, 0.87)"},highlightOnHover:{default:"#EEEEEE",text:"rgba(0, 0, 0, 0.87)"},striped:{default:"#FAFAFA",text:"rgba(0, 0, 0, 0.87)"}},eF={default:Q4,light:Q4,dark:{text:{primary:"#FFFFFF",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(0,0,0,.12)"},background:{default:"#424242"},context:{background:"#E91E63",text:"#FFFFFF"},divider:{default:"rgba(81, 81, 81, 1)"},button:{default:"#FFFFFF",focus:"rgba(255, 255, 255, .54)",hover:"rgba(255, 255, 255, .12)",disabled:"rgba(255, 255, 255, .18)"},selected:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},highlightOnHover:{default:"rgba(0, 0, 0, .7)",text:"#FFFFFF"},striped:{default:"rgba(0, 0, 0, .87)",text:"#FFFFFF"}}};function jke(e,t,r,n){const[o,f]=le.useState(()=>X4(e)),[y,s]=le.useState(""),k=le.useRef("");Kd(()=>{f(X4(e))},[e]);const I=le.useCallback(ve=>{var ie,W,K;const{attributes:he}=ve.target,de=(ie=he.getNamedItem("data-column-id"))===null||ie===void 0?void 0:ie.value;de&&(k.current=((K=(W=o[c_(o,de)])===null||W===void 0?void 0:W.id)===null||K===void 0?void 0:K.toString())||"",s(k.current))},[o]),D=le.useCallback(ve=>{var ie;const{attributes:W}=ve.target,K=(ie=W.getNamedItem("data-column-id"))===null||ie===void 0?void 0:ie.value;if(K&&k.current&&K!==k.current){const he=c_(o,k.current),de=c_(o,K),Ae=[...o];Ae[he]=o[de],Ae[de]=o[he],f(Ae),t(Ae)}},[t,o]),N=le.useCallback(ve=>{ve.preventDefault()},[]),U=le.useCallback(ve=>{ve.preventDefault()},[]),q=le.useCallback(ve=>{ve.preventDefault(),k.current="",s("")},[]),Z=function(ve=!1){return ve?Gh.ASC:Gh.DESC}(n),ae=le.useMemo(()=>o[c_(o,r==null?void 0:r.toString())]||{},[r,o]);return{tableColumns:o,draggingColumnId:y,handleDragStart:I,handleDragEnter:D,handleDragOver:N,handleDragLeave:U,handleDragEnd:q,defaultSortDirection:Z,defaultSortColumn:ae}}var ed=le.memo(function(e){const{data:t=_r.data,columns:r=_r.columns,title:n=_r.title,actions:o=_r.actions,keyField:f=_r.keyField,striped:y=_r.striped,highlightOnHover:s=_r.highlightOnHover,pointerOnHover:k=_r.pointerOnHover,dense:I=_r.dense,selectableRows:D=_r.selectableRows,selectableRowsSingle:N=_r.selectableRowsSingle,selectableRowsHighlight:U=_r.selectableRowsHighlight,selectableRowsNoSelectAll:q=_r.selectableRowsNoSelectAll,selectableRowsVisibleOnly:Z=_r.selectableRowsVisibleOnly,selectableRowSelected:ae=_r.selectableRowSelected,selectableRowDisabled:ve=_r.selectableRowDisabled,selectableRowsComponent:ie=_r.selectableRowsComponent,selectableRowsComponentProps:W=_r.selectableRowsComponentProps,onRowExpandToggled:K=_r.onRowExpandToggled,onSelectedRowsChange:he=_r.onSelectedRowsChange,expandableIcon:de=_r.expandableIcon,onChangeRowsPerPage:Ae=_r.onChangeRowsPerPage,onChangePage:Te=_r.onChangePage,paginationServer:Ue=_r.paginationServer,paginationServerOptions:Pe=_r.paginationServerOptions,paginationTotalRows:$e=_r.paginationTotalRows,paginationDefaultPage:Ve=_r.paginationDefaultPage,paginationResetDefaultPage:Fe=_r.paginationResetDefaultPage,paginationPerPage:Ye=_r.paginationPerPage,paginationRowsPerPageOptions:ft=_r.paginationRowsPerPageOptions,paginationIconLastPage:Pt=_r.paginationIconLastPage,paginationIconFirstPage:or=_r.paginationIconFirstPage,paginationIconNext:xr=_r.paginationIconNext,paginationIconPrevious:mt=_r.paginationIconPrevious,paginationComponent:Xt=_r.paginationComponent,paginationComponentOptions:Wt=_r.paginationComponentOptions,responsive:Ot=_r.responsive,progressPending:ut=_r.progressPending,progressComponent:Vt=_r.progressComponent,persistTableHead:ir=_r.persistTableHead,noDataComponent:vt=_r.noDataComponent,disabled:Dt=_r.disabled,noTableHead:ur=_r.noTableHead,noHeader:Tr=_r.noHeader,fixedHeader:fr=_r.fixedHeader,fixedHeaderScrollHeight:Cr=_r.fixedHeaderScrollHeight,pagination:mr=_r.pagination,subHeader:nn=_r.subHeader,subHeaderAlign:Br=_r.subHeaderAlign,subHeaderWrap:Sn=_r.subHeaderWrap,subHeaderComponent:on=_r.subHeaderComponent,noContextMenu:Gr=_r.noContextMenu,contextMessage:Zi=_r.contextMessage,contextActions:Kr=_r.contextActions,contextComponent:En=_r.contextComponent,expandableRows:wi=_r.expandableRows,onRowClicked:Hi=_r.onRowClicked,onRowDoubleClicked:Tt=_r.onRowDoubleClicked,onRowMouseEnter:pr=_r.onRowMouseEnter,onRowMouseLeave:Er=_r.onRowMouseLeave,sortIcon:Mr=_r.sortIcon,onSort:Zt=_r.onSort,sortFunction:gr=_r.sortFunction,sortServer:Xr=_r.sortServer,expandableRowsComponent:Hn=_r.expandableRowsComponent,expandableRowsComponentProps:ti=_r.expandableRowsComponentProps,expandableRowDisabled:qn=_r.expandableRowDisabled,expandableRowsHideExpander:Ii=_r.expandableRowsHideExpander,expandOnRowClicked:zi=_r.expandOnRowClicked,expandOnRowDoubleClicked:Fn=_r.expandOnRowDoubleClicked,expandableRowExpanded:Ki=_r.expandableRowExpanded,expandableInheritConditionalStyles:Si=_r.expandableInheritConditionalStyles,defaultSortFieldId:is=_r.defaultSortFieldId,defaultSortAsc:Ds=_r.defaultSortAsc,clearSelectedRows:Ge=_r.clearSelectedRows,conditionalRowStyles:we=_r.conditionalRowStyles,theme:Ce=_r.theme,customStyles:He=_r.customStyles,direction:Qe=_r.direction,onColumnOrderChange:ot=_r.onColumnOrderChange,className:gt}=e,{tableColumns:yt,draggingColumnId:ct,handleDragStart:bt,handleDragEnter:qt,handleDragOver:Kt,handleDragLeave:Gt,handleDragEnd:Dr,defaultSortDirection:Qr,defaultSortColumn:Vr}=jke(r,ot,is,Ds),[{rowsPerPage:jr,currentPage:Rr,selectedRows:Cn,allSelected:Bn,selectedCount:$n,selectedColumn:gn,sortDirection:Ni,toggleOnSelectedRowsChange:Wn},Yn]=le.useReducer(ICe,{allSelected:!1,selectedCount:0,selectedRows:[],selectedColumn:Vr,toggleOnSelectedRowsChange:!1,sortDirection:Qr,currentPage:Ve,rowsPerPage:Ye,selectedRowsFlag:!1,contextMessage:_r.contextMessage}),{persistSelectedOnSort:zs=!1,persistSelectedOnPageChange:Ys=!1}=Pe,hs=!(!Ue||!Ys&&!zs),pe=mr&&!ut&&t.length>0,c=Xt||Mke,d=le.useMemo(()=>((_e={},Ee="default",O="default")=>{const X=eF[Ee]?Ee:O;return Nke({table:{style:{color:(Q=eF[X]).text.primary,backgroundColor:Q.background.default}},tableWrapper:{style:{display:"table"}},responsiveWrapper:{style:{}},header:{style:{fontSize:"22px",color:Q.text.primary,backgroundColor:Q.background.default,minHeight:"56px",paddingLeft:"16px",paddingRight:"8px"}},subHeader:{style:{backgroundColor:Q.background.default,minHeight:"52px"}},head:{style:{color:Q.text.primary,fontSize:"12px",fontWeight:500}},headRow:{style:{backgroundColor:Q.background.default,minHeight:"52px",borderBottomWidth:"1px",borderBottomColor:Q.divider.default,borderBottomStyle:"solid"},denseStyle:{minHeight:"32px"}},headCells:{style:{paddingLeft:"16px",paddingRight:"16px"},draggingStyle:{cursor:"move"}},contextMenu:{style:{backgroundColor:Q.context.background,fontSize:"18px",fontWeight:400,color:Q.context.text,paddingLeft:"16px",paddingRight:"8px",transform:"translate3d(0, -100%, 0)",transitionDuration:"125ms",transitionTimingFunction:"cubic-bezier(0, 0, 0.2, 1)",willChange:"transform"},activeStyle:{transform:"translate3d(0, 0, 0)"}},cells:{style:{paddingLeft:"16px",paddingRight:"16px",wordBreak:"break-word"},draggingStyle:{}},rows:{style:{fontSize:"13px",fontWeight:400,color:Q.text.primary,backgroundColor:Q.background.default,minHeight:"48px","&:not(:last-of-type)":{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:Q.divider.default}},denseStyle:{minHeight:"32px"},selectedHighlightStyle:{"&:nth-of-type(n)":{color:Q.selected.text,backgroundColor:Q.selected.default,borderBottomColor:Q.background.default}},highlightOnHoverStyle:{color:Q.highlightOnHover.text,backgroundColor:Q.highlightOnHover.default,transitionDuration:"0.15s",transitionProperty:"background-color",borderBottomColor:Q.background.default,outlineStyle:"solid",outlineWidth:"1px",outlineColor:Q.background.default},stripedStyle:{color:Q.striped.text,backgroundColor:Q.striped.default}},expanderRow:{style:{color:Q.text.primary,backgroundColor:Q.background.default}},expanderCell:{style:{flex:"0 0 48px"}},expanderButton:{style:{color:Q.button.default,fill:Q.button.default,backgroundColor:"transparent",borderRadius:"2px",transition:"0.25s",height:"100%",width:"100%","&:hover:enabled":{cursor:"pointer"},"&:disabled":{color:Q.button.disabled},"&:hover:not(:disabled)":{cursor:"pointer",backgroundColor:Q.button.hover},"&:focus":{outline:"none",backgroundColor:Q.button.focus},svg:{margin:"auto"}}},pagination:{style:{color:Q.text.secondary,fontSize:"13px",minHeight:"56px",backgroundColor:Q.background.default,borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:Q.divider.default},pageButtonsStyle:{borderRadius:"50%",height:"40px",width:"40px",padding:"8px",margin:"px",cursor:"pointer",transition:"0.4s",color:Q.button.default,fill:Q.button.default,backgroundColor:"transparent","&:disabled":{cursor:"unset",color:Q.button.disabled,fill:Q.button.disabled},"&:hover:not(:disabled)":{backgroundColor:Q.button.hover},"&:focus":{outline:"none",backgroundColor:Q.button.focus}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:Q.text.primary,backgroundColor:Q.background.default}},progress:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:Q.text.primary,backgroundColor:Q.background.default}}},_e);var Q})(He,Ce),[He,Ce]),m=le.useMemo(()=>Object.assign({},Qe!=="auto"&&{dir:Qe}),[Qe]),v=le.useMemo(()=>{if(Xr)return t;if(gn!=null&&gn.sortFunction&&typeof gn.sortFunction=="function"){const _e=gn.sortFunction,Ee=Ni===Gh.ASC?_e:(O,X)=>-1*_e(O,X);return[...t].sort(Ee)}return function(_e,Ee,O,X){return Ee?X&&typeof X=="function"?X(_e.slice(0),Ee,O):_e.slice(0).sort((Q,xe)=>{let ke,Le;if(typeof Ee=="string"?(ke=KA(Q,Ee),Le=KA(xe,Ee)):(ke=Ee(Q),Le=Ee(xe)),O==="asc"){if(ke<Le)return-1;if(ke>Le)return 1}if(O==="desc"){if(ke>Le)return-1;if(ke<Le)return 1}return 0}):_e}(t,gn==null?void 0:gn.selector,Ni,gr)},[Xr,gn,Ni,t,gr]),b=le.useMemo(()=>{if(mr&&!Ue){const _e=Rr*jr,Ee=_e-jr;return v.slice(Ee,_e)}return v},[Rr,mr,Ue,jr,v]),S=le.useCallback(_e=>{Yn(_e)},[]),T=le.useCallback(_e=>{Yn(_e)},[]),M=le.useCallback(_e=>{Yn(_e)},[]),z=le.useCallback((_e,Ee)=>Hi(_e,Ee),[Hi]),$=le.useCallback((_e,Ee)=>Tt(_e,Ee),[Tt]),H=le.useCallback((_e,Ee)=>pr(_e,Ee),[pr]),B=le.useCallback((_e,Ee)=>Er(_e,Ee),[Er]),ee=le.useCallback(_e=>Yn({type:"CHANGE_PAGE",page:_e,paginationServer:Ue,visibleOnly:Z,persistSelectedOnPageChange:Ys}),[Ue,Ys,Z]),re=le.useCallback(_e=>{const Ee=Nx($e||b.length,_e),O=AE(Rr,Ee);Ue||ee(O),Yn({type:"CHANGE_ROWS_PER_PAGE",page:O,rowsPerPage:_e})},[Rr,ee,Ue,$e,b.length]);if(mr&&!Ue&&v.length>0&&b.length===0){const _e=Nx(v.length,jr),Ee=AE(Rr,_e);ee(Ee)}Kd(()=>{he({allSelected:Bn,selectedCount:$n,selectedRows:Cn.slice(0)})},[Wn]),Kd(()=>{Zt(gn,Ni,v.slice(0))},[gn,Ni]),Kd(()=>{Te(Rr,$e||v.length)},[Rr]),Kd(()=>{Ae(jr,Rr)},[jr]),Kd(()=>{ee(Ve)},[Ve,Fe]),Kd(()=>{if(mr&&Ue&&$e>0){const _e=Nx($e,jr),Ee=AE(Rr,_e);Rr!==Ee&&ee(Ee)}},[$e]),le.useEffect(()=>{Yn({type:"CLEAR_SELECTED_ROWS",selectedRowsFlag:Ge})},[N,Ge]),le.useEffect(()=>{if(!ae)return;const _e=v.filter(O=>ae(O)),Ee=N?_e.slice(0,1):_e;Yn({type:"SELECT_MULTIPLE_ROWS",keyField:f,selectedRows:Ee,totalRows:v.length,mergeSelections:hs})},[t,ae]);const ce=Z?b:v,ye=Ys||N||q;return le.createElement(kCe,{theme:d},!Tr&&(!!n||!!o)&&le.createElement(pke,{title:n,actions:o,showMenu:!Gr,selectedCount:$n,direction:Qe,contextActions:Kr,contextComponent:En,contextMessage:Zi}),nn&&le.createElement(yke,{align:Br,wrapContent:Sn},on),le.createElement(vke,Object.assign({$responsive:Ot,$fixedHeader:fr,$fixedHeaderScrollHeight:Cr,className:gt},m),le.createElement(bke,null,ut&&!ir&&le.createElement(Z4,null,Vt),le.createElement(RCe,{disabled:Dt,className:"rdt_Table",role:"table"},!ur&&(!!ir||v.length>0&&!ut)&&le.createElement(LCe,{className:"rdt_TableHead",role:"rowgroup",$fixedHeader:fr},le.createElement(OCe,{className:"rdt_TableHeadRow",role:"row",$dense:I},D&&(ye?le.createElement(gg,{style:{flex:"0 0 48px"}}):le.createElement(ake,{allSelected:Bn,selectedRows:Cn,selectableRowsComponent:ie,selectableRowsComponentProps:W,selectableRowDisabled:ve,rowData:ce,keyField:f,mergeSelections:hs,onSelectAllRows:T})),wi&&!Ii&&le.createElement(_ke,null),yt.map(_e=>le.createElement(ske,{key:_e.id,column:_e,selectedColumn:gn,disabled:ut||v.length===0,pagination:mr,paginationServer:Ue,persistSelectedOnSort:zs,selectableRowsVisibleOnly:Z,sortDirection:Ni,sortIcon:Mr,sortServer:Xr,onSort:S,onDragStart:bt,onDragOver:Kt,onDragEnd:Dr,onDragEnter:qt,onDragLeave:Gt,draggingColumnId:ct})))),!v.length&&!ut&&le.createElement(wke,null,vt),ut&&ir&&le.createElement(Z4,null,Vt),!ut&&v.length>0&&le.createElement(xke,{className:"rdt_TableBody",role:"rowgroup"},b.map((_e,Ee)=>{const O=Jm(_e,f),X=function(Le=""){return typeof Le!="number"&&(!Le||Le.length===0)}(O)?Ee:O,Q=i1(_e,Cn,f),xe=!!(wi&&Ki&&Ki(_e)),ke=!!(wi&&qn&&qn(_e));return le.createElement(JCe,{id:X,key:X,keyField:f,"data-row-id":X,columns:yt,row:_e,rowCount:v.length,rowIndex:Ee,selectableRows:D,expandableRows:wi,expandableIcon:de,highlightOnHover:s,pointerOnHover:k,dense:I,expandOnRowClicked:zi,expandOnRowDoubleClicked:Fn,expandableRowsComponent:Hn,expandableRowsComponentProps:ti,expandableRowsHideExpander:Ii,defaultExpanderDisabled:ke,defaultExpanded:xe,expandableInheritConditionalStyles:Si,conditionalRowStyles:we,selected:Q,selectableRowsHighlight:U,selectableRowsComponent:ie,selectableRowsComponentProps:W,selectableRowDisabled:ve,selectableRowsSingle:N,striped:y,onRowExpandToggled:K,onRowClicked:z,onRowDoubleClicked:$,onRowMouseEnter:H,onRowMouseLeave:B,onSelectedRow:M,draggingColumnId:ct,onDragStart:bt,onDragOver:Kt,onDragEnd:Dr,onDragEnter:qt,onDragLeave:Gt})}))))),pe&&le.createElement("div",null,le.createElement(c,{onChangePage:ee,onChangeRowsPerPage:re,rowCount:$e||v.length,currentPage:Rr,rowsPerPage:jr,direction:Qe,paginationRowsPerPageOptions:ft,paginationIconLastPage:Pt,paginationIconFirstPage:or,paginationIconNext:xr,paginationIconPrevious:mt,paginationComponentOptions:Wt})))});function Fke(){const[e,t]=le.useState([]),[r,n]=le.useState(null),[o,f]=le.useState(!0);le.useEffect(()=>{k()},[]);const y="cursor-pointer bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",s="cursor-pointer border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",k=async()=>{try{const D=await Gs.get(ws.getRideHistory);console.log("response",D),t(D.data.quickRides),n(D.data.scheduledRides)}catch(D){console.log(D),rn(D)}},I=[{name:"From",selector:D=>D.pickupLocation},{name:"To",selector:D=>D.dropoffLocation},{name:"Amount",selector:D=>D.driverRevenu.toFixed(0)},{name:"Distance",selector:D=>D.distance},{name:"Status",selector:D=>D.status}];return A.jsxs("div",{className:"mt-10 lg:w-10/12 w-full lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center",children:[A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>f(!0),className:o?y:s,role:"tab","aria-selected":"true",children:"Quick Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>f(!1),className:o?s:y,role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),o?A.jsx(le.Suspense,{children:A.jsx(ed,{style:{zIndex:"-1"},columns:I,data:e,fixedHeader:!0,highlightOnHover:!0,pagination:!0})}):A.jsx(le.Suspense,{children:r&&A.jsx(ed,{style:{zIndex:"-1"},columns:I,data:r,fixedHeader:!0,highlightOnHover:!0,pagination:!0})})]})}function Bke(){return A.jsxs("div",{className:" bg-gray-100",children:[A.jsx(Ul,{}),A.jsx(Fke,{}),A.jsx("div",{className:"mt-20",children:A.jsx($l,{})})]})}function $ke(){const e=Yo(N=>N.driver.vehicleType),[t,r]=le.useState(),[n,o]=le.useState(!1),[f,y]=le.useState(null),[s,k]=le.useState(null);le.useEffect(()=>{(async()=>{try{const U=await Gs.get(ws.scheduleRideNotification);console.log("response",U),r(U.data)}catch(U){console.log(U),rn(U)}})()},[n]),le.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(N){y(N.coords.latitude),k(N.coords.longitude)})},[]);function I(N){const U={year:"numeric",month:"long",day:"numeric"},q=new Date(N),Z=q.toLocaleDateString("en-US",U),ae=q.toLocaleTimeString("en-US");return`${Z} ${ae}`}const D=async N=>{console.log("called");try{if(Zr.loading("Processing your Requist Please wait...",{style:gc}),f&&s){const U={rideId:N,latitude:f,longitude:s},q=await Gs.post(ws.scheduleRideConfirmation,U);Zr.dismiss(),console.log("response",q),o(!n),Zr.success("Accepted the ride Successfully")}else console.log(92)}catch(U){Zr.dismiss(),console.log(U),rn(U)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen justify-center mt-9",children:A.jsx("div",{className:"w-10/12 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.rideNotification,className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:"",className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date and Time"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),A.jsx("tbody",{children:t&&t.map(N=>{if(N.vehicleType===e)return A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:N.pickupLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:N.dropoffLocation}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[" ",N.price]}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[N.distance," km"]}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:I(N.pickUpDate)}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:A.jsx("p",{className:"p-2 bg-green-500 rounded-xl mb-2 cursor-pointer",onClick:()=>D(N._id),children:"Accept"})})]},N._id)})})]})})]})})})})})}function Uke(){return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx($ke,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}function Vke(){const e=Va(),t=Cs(),[r,n]=le.useState();le.useEffect(()=>{(async()=>{try{const y=await Gs.get(ws.currentRide);n(y.data[0])}catch(y){console.log(y),rn(y)}})()},[]);const o=()=>{if(r){const f={rideId:r._id},y=ba.stringify(f);t(`${Ti.rideconfirm}?${y}`),e(Qv(!1))}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen justify-center mt-9",children:A.jsx("div",{className:"w-10/12 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"p-8"}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.currentRide,role:"tab",className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.pendingScheduledRides,className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"status"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Map"})]})}),A.jsx("tbody",{children:r&&A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.pickupLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:r.dropoffLocation}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[" ",r.price]}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[r.distance," km"]}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:r.status}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:A.jsx("p",{className:"cursor-pointer",onClick:()=>o(),children:"Navigation"})})]},r._id)})]})})]})})})})})}function Hke(){return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx(Vke,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}function Wke(){const e=Va(),t=Cs(),[r,n]=le.useState();le.useEffect(()=>{(async()=>{try{const y=await Gs.get(ws.scheduleRidePending);console.log("response",y),n(y.data[0])}catch(y){console.log(y),rn(y)}})()},[]);const o=async f=>{try{if(await Gs.patch(`${ws.startScheduledRide}?id=${f}`),r){const y={rideId:r._id},s=ba.stringify(y);t(`${Ti.rideconfirm}?${s}`),e(Qv(!1))}}catch(y){console.log(y),rn(y)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen justify-center mt-9",children:A.jsx("div",{className:"w-10/12 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"p-8"}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.currentRide,role:"tab",className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ti.pendingScheduledRides,className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"status"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),A.jsx("tbody",{children:r&&A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.pickupLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:r.dropoffLocation}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[" ",r.price]}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[r.distance," km"]}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:r.status}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:A.jsx("p",{className:"cursor-pointer",onClick:()=>o(r._id),children:"Start"})})]},r._id)})]})})]})})})})})}function Gke(){return A.jsxs(A.Fragment,{children:[A.jsx($l,{}),A.jsx(Wke,{}),A.jsx("div",{className:"mt-20",children:A.jsx(Ul,{})})]})}const nM=e=>{const{role:t}=e,[r,n]=le.useState("");return le.useEffect(()=>{t=="user"?n(Ui.home):t=="driver"?n(Ti.dashboard):t=="admin"&&n(nu.dashboard)},[]),A.jsx("div",{className:"flex items-center justify-center h-screen bg-gradient-to-r from-indigo-500 to-purple-600",children:A.jsxs("div",{className:"text-center text-white",children:[A.jsx("h1",{className:"text-4xl font-semibold mb-4",children:"404 - Page Not Found"}),A.jsx("p",{className:"text-lg mb-8",children:"The page you are looking for does not exist."}),A.jsx("div",{className:"animate-bounce",children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-16 h-16 text-red-300 animate-spin-slow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),A.jsx("div",{className:"animate-pulse my-4",children:A.jsxs("p",{className:"text-lg",children:["Don't worry, you can return to safety by clicking ",A.jsx(Un,{className:"text-blue-400 hover:underline",to:r,children:"here"}),"."]})}),A.jsx("div",{className:"animate-wiggle my-4",children:A.jsxs("p",{className:"text-lg",children:["Or explore more on our ",A.jsx(Un,{className:"text-blue-400 hover:underline",to:r,children:"homepage"}),"."]})}),A.jsx("div",{className:"animate-bounce my-4",children:A.jsx("p",{className:"text-lg",children:"Let's find your way back with this fun bounce."})})]})})},Xke=()=>A.jsxs($w,{children:[A.jsx(In,{path:"/login",element:A.jsx(bN,{component:$1e})}),A.jsx(In,{path:"/signup",element:A.jsx(bN,{component:X_e})}),A.jsx(In,{path:"/resetpassword",element:A.jsx(dwe,{})}),A.jsx(In,{path:"/info/personal",element:A.jsx(awe,{})}),A.jsx(In,{path:"/info/vehicle",element:A.jsx(cwe,{})}),A.jsx(In,{path:"/dashboard",element:A.jsx(nc,{component:rwe})}),A.jsx(In,{path:"/profile",element:A.jsx(nc,{component:swe})}),A.jsx(In,{path:"/vehicle",element:A.jsx(nc,{component:hwe})}),A.jsx(In,{path:"/notification",element:A.jsx(nc,{component:M4})}),A.jsx(In,{path:"/rideconfirm",element:A.jsx(nc,{component:C2e})}),A.jsx(In,{path:"/history",element:A.jsx(nc,{component:Bke})}),A.jsx(In,{path:"/notification/ride",element:A.jsx(nc,{component:M4})}),A.jsx(In,{path:"/notification/scheduleRide",element:A.jsx(nc,{component:Uke})}),A.jsx(In,{path:"/currentRide",element:A.jsx(nc,{component:Hke})}),A.jsx(In,{path:"/scheduledRides",element:A.jsx(nc,{component:Gke})}),A.jsx(In,{path:"/*",element:A.jsx(nM,{role:"driver"})})]}),Jy=({component:e})=>{const t=Yo(r=>r.admin.loggedIn);return console.log(t),t?A.jsx(e,{}):A.jsx(og,{to:"/admin/login"})},qke=({component:e})=>{const t=Yo(r=>r.admin.loggedIn);return console.log(t),t?A.jsx(og,{to:"/admin/dashboard"}):A.jsx(e,{})};function e0(){const[e,t]=le.useState(!1),r=()=>{t(!e)},n=Va(),o=Cs(),f=()=>{n(B1e()),o(nu.login)};return A.jsx("div",{className:"flex justify-center bg-gray-100 ",children:A.jsx("nav",{className:`relative w-5/6 mt-4 text-white ${e?"bg-blue-600":"bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700"} hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2`,children:A.jsx("div",{className:"container px-6 py-4 mx-auto",children:A.jsxs("div",{className:"lg:flex lg:items-center lg:justify-between",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Un,{to:nu.dashboard,children:A.jsx("div",{className:"w-auto h-6 sm:h-7",children:"Dashboard"})}),A.jsx("div",{className:"flex lg:hidden",children:A.jsx("button",{onClick:r,type:"button",className:"text-gray-500 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-400 focus:outline-none focus:text-gray-600 dark:focus:text-gray-400","aria-label":"toggle menu",children:e?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8h16M4 16h16"})})})})]}),A.jsx("div",{className:`absolute inset-x-0 z-20 w-full px-6 py-4 transition-all duration-300 ease-in-out bg-white dark:bg-gray-800 lg:mt-0 lg:p-0 lg:top-0 lg:relative lg:bg-transparent lg:w-auto lg:opacity-100 lg:translate-x-0 lg:flex lg:items-center ${e?"translate-x-0 opacity-100":"opacity-0 -translate-x-full"}`,children:A.jsxs("div",{className:"flex flex-col -mx-6 lg:flex-row lg:items-center lg:mx-8",children:[A.jsx(Un,{to:nu.user,className:"px-3 py-2 mx-3 mt-2 text-gray-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Users"}),A.jsx(Un,{to:nu.drivers,className:"px-3 py-2 mx-3 mt-2 text-gray-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Drivers"}),A.jsx(Un,{to:nu.cabs,className:"px-3 py-2 mx-3 mt-2 text-gray-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cabs"}),A.jsx("p",{onClick:f,className:"px-3 cursor-pointer py-2 mx-3 mt-2 text-gray-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Signout"})]})})]})})})})}function t0(){return A.jsxs("footer",{className:"footer bg-gray-200 footer-center p-10 text-base-content rounded",children:[A.jsxs("nav",{className:"grid grid-flow-col justify-center gap-4",children:[A.jsx("a",{className:"link link-hover",children:"About us"}),A.jsx("a",{className:"link link-hover",children:"Contact"}),A.jsx("a",{className:"link link-hover",children:"Jobs"}),A.jsx("a",{className:"link link-hover",children:"Press kit"})]}),A.jsx("nav",{children:A.jsxs("div",{className:"grid grid-flow-col justify-center gap-4 my-8",children:[A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})}),A.jsx("aside",{className:"justify-center text-center",children:A.jsx("p",{children:"Copyright  2023 - All right reserved by Book@ Ltd"})})]})}const Yke="https://bookat.fun/",Ia=Wf.create({baseURL:Yke,headers:{"Content-Type":"application/json"}});Ia.interceptors.request.use(e=>{const t=localStorage.getItem("adminToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const Pa={login:"/admin/login",getAllUsers:"/admin/getuser",blockUser:"/admin/block/user",blockDriver:"/admin/block/driver",getDrivers:"/admin/getdrivers",getDriverInfo:"/admin/getdriver",rejectDriver:"/admin/reject/driver",approveDriver:"/admin/approve/driver",rejectVehicle:"/admin/reject/vehicle",approveVehicle:"/admin/approve/vehicle",dashboard:"/admin/dashboard",getDriverRideHistory:"/admin/history/driver",getUserRideHistory:"/admin/history/user",cabs:"/admin/cabs",addCab:"/admin/cabs/add",getCabWithId:"/admin/cabs/getById",editCab:"/admin/cabs/edit"},h_=le.lazy(()=>ad(()=>Promise.resolve().then(()=>ewe),void 0));function Zke(){const[e,t]=le.useState(null);le.useEffect(()=>{(async()=>{try{const K=await Ia.get(Pa.dashboard);console.log(K),t(K.data)}catch(K){console.log(K),rn(K)}})()},[]);const r=e==null?void 0:e.totalUsers.map(W=>{const K=new Date(W.joinedAt);return{month:K.getMonth(),year:K.getFullYear()}}),n={};r==null||r.forEach(W=>{const K=`${W.year}-${W.month}`;n[K]=(n[K]||0)+1});const o=Object.keys(n),f=Object.values(n),y=e==null?void 0:e.totalDrivers.map(W=>{const K=new Date(W.joinedAt);return{month:K.getMonth(),year:K.getFullYear()}}),s={};y==null||y.forEach(W=>{const K=`${W.year}-${W.month}`;s[K]=(s[K]||0)+1});const k=Object.keys(s),I=Object.values(s),D=e==null?void 0:e.totalQuickRides.map(W=>{const K=new Date(W.date);return{month:K.getMonth(),year:K.getFullYear()}}),N={};D==null||D.forEach(W=>{const K=`${W.year}-${W.month}`;N[K]=(N[K]||0)+1});const U=Object.keys(N),q=Object.values(N),Z=e==null?void 0:e.totalScheduledRides.map(W=>{const K=new Date(W.date);return{month:K.getMonth(),year:K.getFullYear()}}),ae={};Z==null||Z.forEach(W=>{const K=`${W.year}-${W.month}`;ae[K]=(ae[K]||0)+1});const ve=Object.keys(ae),ie=Object.values(ae);return A.jsxs("div",{children:[A.jsxs("div",{className:"flex flex-wrap justify-around m-10 cursor-pointer",children:[A.jsx("div",{className:"w-full overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-purple-200 mb-4 sm:w-auto sm:mb-0 sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Total Users"}),A.jsx("h1",{className:"text-4xl font-bold text-purple-500 text-center",children:e==null?void 0:e.totalUsersCount})]})}),A.jsx("div",{className:"w-full overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-purple-200 mb-4 sm:w-auto sm:mb-0 sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Total Drivers"}),A.jsx("h1",{className:"text-4xl font-bold text-purple-500 text-center",children:e==null?void 0:e.totalDriversCount})]})}),A.jsx("div",{className:"w-full overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-purple-200 mb-4 sm:w-auto sm:mb-0 sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Quick Rides"}),A.jsx("h1",{className:"text-4xl font-bold text-purple-500 text-center",children:e==null?void 0:e.totalQuickRidesCount})]})}),A.jsx("div",{className:"w-full overflow-hidden rounded-lg bg-gray-100 shadow-lg hover:shadow-xl transform hover:scale-105 transition duration-300 ease-in-out hover:bg-yellow-200 sm:w-auto sm:mx-4",children:A.jsxs("div",{className:"p-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800 text-center",children:"Scheduled Rides"}),A.jsx("h1",{className:"text-4xl font-bold text-yellow-500 text-center",children:e==null?void 0:e.totalScheduledRidesCount})]})})]}),A.jsx("div",{className:"flex flex-col md:flex-row w-10/12 mx-auto mt-20 justify-center",children:A.jsx("div",{className:"w-full overflow-hidden rounded-3xl bg-blue-200 shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center justify-around",children:[A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Quick Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(h_,{months:U,userCounts:q})})]}),A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Scheduled Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(h_,{months:ve,userCounts:ie})})]})]})})}),A.jsx("div",{className:"flex flex-col md:flex-row w-10/12 mx-auto mt-20 justify-center",children:A.jsx("div",{className:"w-full overflow-hidden rounded-3xl bg-blue-200 shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center justify-around",children:[A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Users"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(h_,{months:o,userCounts:f})})]}),A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Drivers"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(h_,{months:k,userCounts:I})})]})]})})})]})}function Kke(){return A.jsxs("div",{className:"bg-gray-100 ",children:[A.jsx(e0,{}),A.jsx(Zke,{}),A.jsx("div",{className:"mt-56",children:A.jsx(t0,{})})]})}function Jke(e){const{userId:t}=e,[r,n]=le.useState([]),[o,f]=le.useState(null),[y,s]=le.useState(!0);le.useEffect(()=>{D()},[]);const k="cursor-pointer bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",I="cursor-pointer border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",D=async()=>{try{const he=await Ia.patch(`${Pa.getUserRideHistory}?id=${t}`);console.log("response",he),n(he.data.quickRides),f(he.data.scheduledRides)}catch(he){console.log(he),rn(he)}},N=r.map(he=>{const de=new Date(he.date);return{month:de.getMonth(),year:de.getFullYear()}}),U={};N==null||N.forEach(he=>{const de=`${he.year}-${he.month}`;U[de]=(U[de]||0)+1});const q=Object.keys(U),Z=Object.values(U),ae=o==null?void 0:o.map(he=>{const de=new Date(he.date);return{month:de.getMonth(),year:de.getFullYear()}}),ve={};ae==null||ae.forEach(he=>{const de=`${he.year}-${he.month}`;ve[de]=(ve[de]||0)+1});const ie=Object.keys(ve),W=Object.values(ve),K=[{name:"From",selector:he=>he.pickupLocation},{name:"To",selector:he=>he.dropoffLocation},{name:"Amount",selector:he=>he.price},{name:"Distance",selector:he=>he.distance},{name:"Status",selector:he=>he.status}];return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"mt-10 lg:w-10/12 w-full lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center",children:[A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>s(!0),className:y?k:I,role:"tab","aria-selected":"true",children:"Quick Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>s(!1),className:y?I:k,role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),y?A.jsx(le.Suspense,{children:A.jsx(ed,{style:{zIndex:"-1"},columns:K,data:r,fixedHeader:!0,highlightOnHover:!0,pagination:!0})}):A.jsx(le.Suspense,{children:o&&A.jsx(ed,{style:{zIndex:"-1"},columns:K,data:o,fixedHeader:!0,highlightOnHover:!0,pagination:!0})})]}),A.jsx("div",{className:"flex flex-col md:flex-row w-10/12 mx-auto mt-20 justify-center",children:A.jsx("div",{className:"w-full overflow-hidden rounded-3xl bg-blue-200 shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center justify-around",children:[A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Quick Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(Cv,{months:q,userCounts:Z})})]}),A.jsxs("div",{className:"p-8",children:[A.jsx("h1",{className:"text-3xl font-black mb-5 text-blue-900",children:"Scheduled Rides"}),A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(Cv,{months:ie,userCounts:W})})]})]})})})]})}YS({Modal:Rf,Ripple:XS});function Qke(){const[e,t]=le.useState(),[r,n]=le.useState(""),[o,f]=le.useState(""),[y,s]=le.useState(!1),[k,I]=le.useState(!1);le.useEffect(()=>{(async()=>{try{const ae=await Ia.get(Pa.getAllUsers);console.log(ae);const ve=ae.data;t(ve)}catch(ae){rn(ae)}})()},[y]);const D=e==null?void 0:e.filter(Z=>Z.name.toLowerCase().includes(r.toLowerCase())),N=async Z=>{try{await Ia.patch(`${Pa.blockUser}?id=${Z._id}`),s(!y)}catch(ae){console.log(ae),rn(ae)}},U=Z=>{const ae="text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center  m-2",ve="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center  m-2";return Z.block?ae:ve},q=[{name:"Name",selector:Z=>Z.name},{name:"Email",selector:Z=>Z.email},{name:"Mobile",selector:Z=>Z.mobile},{name:"Status",cell:Z=>A.jsx("button",{className:U(Z),onClick:()=>N(Z),children:Z.block?"Unblock":"Block"})},{name:"Completed Rides",selector:Z=>Z.RideDetails.completedRides},{name:"View Details",cell:Z=>A.jsx("p",{className:"cursor-pointer",onClick:()=>{I(!0),f(Z._id)},children:"More Details"})}];return A.jsx(A.Fragment,{children:k?A.jsx("div",{children:A.jsx(Jke,{userId:o})}):A.jsxs("div",{className:"mt-10 lg:w-10/12 w-full lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center ",children:[A.jsx("input",{type:"text",placeholder:" Search by Name",value:r,className:"border-2 border-gray-400 rounded-lg p-0.5",onChange:Z=>n(Z.target.value)}),A.jsx(le.Suspense,{children:D&&D.length>0&&A.jsx(ed,{style:{zIndex:"-1"},columns:q,data:D,fixedHeader:!0,highlightOnHover:!0,pagination:!0})})]})})}function eEe(){return A.jsxs("div",{className:"bg-gray-100 h-auto",children:[A.jsx(e0,{}),A.jsx(Qke,{}),A.jsx("div",{className:"mt-20",children:A.jsx(t0,{})})]})}YS({Modal:Rf,Ripple:XS});const tEe=le.lazy(()=>ad(()=>import("./DriverRideHistory-ed9e6e47.js"),["assets/DriverRideHistory-ed9e6e47.js","assets/styles-3e973eb1.css"]));function rEe(){const[e,t]=le.useState(),[r,n]=le.useState(""),[o,f]=le.useState(""),[y,s]=le.useState(!1),[k,I]=le.useState(!1);le.useEffect(()=>{(async()=>{try{console.log(35);const ae=await Ia.get(Pa.getDrivers);console.log(ae);const ve=ae.data;t(ve)}catch(ae){console.log("fetchData",ae),rn(ae)}})()},[y]);const D=async Z=>{try{await Ia.patch(`${Pa.blockDriver}?id=${Z._id}`),s(!y)}catch(ae){console.log(ae),rn(ae)}},N=e==null?void 0:e.filter(Z=>Z.name.toLowerCase().includes(r.toLowerCase())),U=Z=>{const ae="text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center  m-2",ve="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center  m-2";return Z.block?ae:ve},q=[{name:"Name",selector:Z=>Z.name},{name:"Email",selector:Z=>Z.email},{name:"Mobile",selector:Z=>Z.mobile},{name:"Total Rides",selector:Z=>Z.RideDetails.completedRides},{name:"Vefified",cell:Z=>A.jsx("p",{className:Z.driver.driverVerified&&Z.vehicle.vehicleVerified?"text-green-600 cursor-pointer":"text-red-600 cursor-pointer",children:Z.driver.driverVerified&&Z.vehicle.vehicleVerified?A.jsx(Un,{to:`${nu.driverAndVehicleVerify}/?id=${Z._id}`,className:"text-green-600  cursor-pointer",children:"Verified"}):A.jsx(Un,{to:`${nu.driverAndVehicleVerify}/?id=${Z._id}`,className:"text-red-600  cursor-pointer",children:"Not Verified"})})},{name:"Status",cell:Z=>A.jsx("button",{className:U(Z),onClick:()=>D(Z),children:Z.block?"Unblock":"Block"})},{name:"View Details",cell:Z=>A.jsx("p",{className:"cursor-pointer",onClick:()=>{f(Z._id),I(!0)},children:"More Details"})}];return A.jsx(A.Fragment,{children:k?A.jsx("div",{children:A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(tEe,{driverId:o})})}):A.jsxs("div",{className:"mt-10 w-full lg:w-10/12 lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center",children:[A.jsx("input",{type:"text",placeholder:" Search by Name",value:r,className:"border-2 border-gray-400 rounded-lg p-0.5",onChange:Z=>n(Z.target.value)}),A.jsx(le.Suspense,{children:N&&N.length>0&&A.jsx(ed,{style:{zIndex:"-1"},columns:q,data:N,fixedHeader:!0,highlightOnHover:!0,pagination:!0})})]})})}function nEe(){return A.jsxs("div",{className:"bg-gray-100 h-auto",children:[A.jsx(e0,{}),A.jsx(rEe,{}),A.jsx("div",{className:"mt-20",children:A.jsx(t0,{})})]})}YS({Modal:Rf,Ripple:XS});function iEe(e){const{id:t}=e,[r,n]=le.useState(),[o,f]=le.useState(""),[y,s]=le.useState(""),[k,I]=le.useState(!1),[D,N]=le.useState(!1);le.useEffect(()=>{(async()=>{try{const ie=await Ia.get(`${Pa.getDriverInfo}/?id=${t}`);n(ie.data)}catch(ie){rn(ie)}})()},[]);const U=async()=>{try{const ve={email:r==null?void 0:r.email,reason:o,id:t};Zr.loading("Rejecting...",{style:gc}),await Ia.post(Pa.rejectDriver,ve),Zr.dismiss(),Zr.success("Rejected Successfully"),f(""),I(!1)}catch(ve){rn(ve)}},q=async()=>{try{const ve={email:r==null?void 0:r.email,reason:y,id:t};Zr.loading("Rejecting...",{style:gc}),await Ia.post(Pa.rejectVehicle,ve),Zr.dismiss(),Zr.success("Rejected Successfully"),N(!1),s("")}catch(ve){rn(ve)}},Z=async()=>{try{const ve={id:t,email:r==null?void 0:r.email};Zr.loading("Approving...",{style:gc}),await Ia.post(Pa.approveDriver,ve),Zr.dismiss(),Zr.success("Approved Successfully")}catch(ve){rn(ve)}},ae=async()=>{try{const ve={id:t,email:r==null?void 0:r.email};Zr.loading("Approving...",{style:gc}),await Ia.post(Pa.approveVehicle,ve),Zr.dismiss(),Zr.success("Approved Successfully")}catch(ve){rn(ve)}};return A.jsxs(A.Fragment,{children:[k&&A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),A.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-lg z-50",children:[A.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Enter the Reason"}),A.jsx("div",{className:"relative flex-auto text-center p-4","data-te-modal-body-ref":!0,children:A.jsx("textarea",{name:"reason",placeholder:"  Enter here...",required:!0,onChange:ve=>f(ve.target.value),className:"w-11/12 bg-white text-blue rounded-lg shadow-lg border border-blue"})}),A.jsxs("div",{className:"flex ms-10 w-96",children:[A.jsx("button",{type:"button",className:"p-2 px-3 border border-slate-600 rounded-lg m-2",onClick:()=>U(),children:"submit"}),A.jsx("button",{type:"button",className:"p-2 px-3 border border-slate-600 rounded-lg m-2",onClick:()=>I(!1),children:"Close"})]})]})]}),r&&A.jsx("div",{className:"flex h-full justify-center ",children:A.jsx("div",{className:"w-10/12 mt-16 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"text-3xl text-center font-black text-blue mt-6",children:"Personal Info"}),A.jsx("div",{className:"p-8",children:A.jsxs("form",{className:"mt-8",children:[A.jsxs("div",{className:"flex flex-wrap justify-around",children:[A.jsxs("label",{className:"w-full lg:w-1/4 flex flex-col items-center justify-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Name: ",r.name]}),A.jsxs("label",{className:"w-full lg:w-1/4 my-2 flex flex-col items-center justify-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Email Id: ",r.email]}),A.jsxs("label",{className:"w-full lg:w-1/4 flex flex-col items-center justify-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Mobile No: ",r.mobile]})]}),A.jsxs("div",{className:"mt-10 flex flex-wrap justify-around",children:[A.jsxs("label",{className:"w-full lg:w-1/4 mb-2 flex-col items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["License ID: ",r.license.licenseId]}),A.jsxs("label",{className:"w-full lg:w-1/4 flex-col items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["AAdhar ID: ",r.aadhar.aadharId]})]}),A.jsxs("div",{className:"my-11 flex flex-wrap justify-around",children:[A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3 mb-5 bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100",children:A.jsx("img",{src:r.license.licenseImage,className:"w-full  max-h-64",alt:""})}),A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3  bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100",children:A.jsx("img",{src:r.aadhar.aadharImage,className:"w-full  max-h-64",alt:""})})]}),A.jsxs("div",{className:"flex justify-end mt-5",children:[A.jsx("button",{type:"button",className:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",onClick:Z,children:"Approve"}),A.jsx("button",{type:"button",className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",onClick:()=>I(!0),children:"Reject"})]})]})})]})})}),D&&A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),A.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-lg z-50",children:[A.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Enter the Reason"}),A.jsx("div",{className:"relative flex-auto text-center p-4","data-te-modal-body-ref":!0,children:A.jsx("textarea",{name:"reason",placeholder:"  Enter here...",required:!0,onChange:ve=>s(ve.target.value),className:"w-11/12 bg-white text-blue rounded-lg shadow-lg border border-blue"})}),A.jsxs("div",{className:"flex ms-10 w-96",children:[A.jsx("button",{type:"button",className:"p-2 px-3 border border-slate-600 rounded-lg m-2",onClick:()=>q(),children:"submit"}),A.jsx("button",{type:"button",className:"p-2 px-3 border border-slate-600 rounded-lg m-2",onClick:()=>N(!1),children:"Close"})]})]})]}),r&&A.jsx("div",{className:"flex  h-full justify-center",children:A.jsx("div",{className:"w-10/12 mt-16 overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"text-3xl text-center font-black text-blue mt-6",children:"Vehicle Info"}),A.jsx("div",{className:"p-8",children:A.jsxs("form",{className:"mt-8",children:[A.jsxs("div",{className:"my-6 flex flex-wrap justify-around",children:[A.jsxs("label",{className:"w-full lg:w-1/4 flex flex-col items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Vehicle Model: ",r.vehicleDocuments.vehicleModel]}),A.jsxs("label",{className:"w-full lg:w-1/4 my-2 flex flex-col  items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Vehicle Type: ",r.vehicleDocuments.vehicleType]}),A.jsxs("label",{className:"w-full lg:w-1/4 flex flex-col items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Max peoples: ",r.vehicleDocuments.maxPersons]})]}),A.jsx("div",{className:"mt-16 lg:ms-28 flex flex-wrap justify-start",children:A.jsxs("label",{className:"w-full sm:w-1/2 lg:w-1/3 flex flex-col items-center px-4 py-3 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:["Registration No: ",r.vehicleDocuments.registration.registrationId]})}),A.jsxs("div",{className:"my-11 flex flex-wrap justify-around",children:[A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3 bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100 mb-4 sm:mb-0",children:A.jsx("img",{src:r.vehicleDocuments.registration.registrationImage,className:"w-full max-h-64",alt:""})}),A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3 lg:ms-24 bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100",children:A.jsx("img",{src:r.driverImageUrl,className:"w-full max-h-64",alt:""})})]}),A.jsxs("div",{className:"my-11 flex flex-wrap justify-around",children:[A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3 bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100",children:A.jsx("img",{src:r.vehicleDocuments.vehicleImage1,className:"w-full max-h-64",alt:""})}),A.jsx("div",{className:"w-11/12 sm:w-2/3 lg:w-1/3 lg:ms-24 bg-white text-blue rounded-lg shadow-2xl tracking-wide border-4 border-blue cursor-pointer hover-bg-slate-100",children:A.jsx("img",{src:r.vehicleDocuments.vehicleImage2,className:"w-full max-h-64",alt:""})})]}),A.jsxs("div",{className:"flex justify-end mt-5",children:[A.jsx("button",{type:"button",onClick:ae,className:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Approve"}),A.jsx("button",{type:"button",onClick:()=>N(!0),className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Reject"})]})]})})]})})})]})}function sEe(){const e=$a(),n={id:new URLSearchParams(e.search).get("id")};return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(e0,{}),A.jsx(iEe,{...n}),A.jsx("div",{className:"mt-20",children:A.jsx(t0,{})})]})}function oEe(){const e={loginserver:Pa.login,signup:"/admin/signup",resetpassword:"",person:"admin"};return A.jsx("div",{children:A.jsx(FR,{...e})})}const aEe=le.lazy(()=>ad(()=>import("./AddCabModal-c8cfa472.js"),["assets/AddCabModal-c8cfa472.js","assets/styles-3e973eb1.css"])),lEe=le.lazy(()=>ad(()=>import("./EditCabModal-e2f9eed6.js"),["assets/EditCabModal-e2f9eed6.js","assets/styles-3e973eb1.css"]));function cEe(){const[e,t]=le.useState(),[r,n]=le.useState(""),[o,f]=le.useState(!1),[y,s]=le.useState(!1),[k,I]=le.useState(!1);le.useEffect(()=>{D()},[k]);const D=async()=>{try{const Z=await Ia.get(Pa.cabs);console.log(Z),t(Z.data)}catch(Z){rn(Z)}},N=[{name:"Type",selector:Z=>Z.cabType},{name:"Price per KM",selector:Z=>Z.price},{name:"Max Persons",selector:Z=>Z.maxPersons},{name:"Available Drivers",selector:Z=>Z.drivers.length},{name:"Edit",cell:Z=>A.jsx("h2",{className:"cursor-pointer",onClick:()=>{s(!0),n(Z._id)},children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:A.jsx("path",{d:"M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c0-21.9-21.9-21.9-79.2 0L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z",fill:"#0adb49"})})})}],U=async()=>{f(!1),I(!k)},q=async()=>{s(!1),I(!k)};return A.jsxs(A.Fragment,{children:[o&&A.jsx(le.Suspense,{children:A.jsx(aEe,{handleCabResult:U})}),y&&A.jsx(le.Suspense,{children:A.jsx(lEe,{handleCabEditResult:q,cabId:r})}),A.jsxs("div",{className:"mt-10 w-full lg:w-10/12 lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center",children:[A.jsx("p",{className:"cursor-pointer",onClick:()=>f(!0),children:"Add New Cab"}),A.jsx(le.Suspense,{children:e&&A.jsx(ed,{style:{zIndex:"-1"},columns:N,data:e,fixedHeader:!0,highlightOnHover:!0,pagination:!0})})]})]})}function uEe(){return A.jsxs("div",{className:"bg-gray-100 h-screen",children:[A.jsx(e0,{}),A.jsx(cEe,{}),A.jsx("div",{className:"mt-20",children:A.jsx(t0,{})})]})}const hEe=()=>A.jsxs($w,{children:[A.jsx(In,{path:"/login",element:A.jsx(qke,{component:oEe})}),A.jsx(In,{path:"/dashboard",element:A.jsx(Jy,{component:Kke})}),A.jsx(In,{path:"/users",element:A.jsx(Jy,{component:eEe})}),A.jsx(In,{path:"/drivers",element:A.jsx(Jy,{component:nEe})}),A.jsx(In,{path:"/verify",element:A.jsx(Jy,{component:sEe})}),A.jsx(In,{path:"/cabs",element:A.jsx(Jy,{component:uEe})}),A.jsx(In,{path:"/*",element:A.jsx(nM,{role:"admin"})})]}),lh=({component:e})=>{const t=Yo(r=>r.user.loggedIn);return console.log(t),t?A.jsx(e,{}):A.jsx(og,{to:"/login"})},tF=({component:e})=>{const t=Yo(r=>r.user.loggedIn);return console.log(t),t?A.jsx(og,{to:"/"}):A.jsx(e,{})};function dEe(){const e={loginserver:us.login,signup:Ui.signup,resetpassword:us.resetPasswordLink,person:"user"};return A.jsx(A.Fragment,{children:A.jsx(FR,{...e})})}function fEe(){const e={login:Ui.login,signupSuccess:Ui.login,signupServer:us.signUp,checkExists:us.chekUserExists,person:"user"};return A.jsx(A.Fragment,{children:A.jsx(D8,{...e})})}function pEe(){const e=$a(),r=new URLSearchParams(e.search).get("id"),n={passwordResetServer:us.resetPassword,id:r,successNavigation:Ui.login};return A.jsx(A.Fragment,{children:A.jsx(Q8,{...n})})}function d_(e){return e*(Math.PI/180)}function mEe(e,t,r,n){if(e&&t&&r&&n){const f=d_(r-e),y=d_(n-t),s=Math.sin(f/2)*Math.sin(f/2)+Math.cos(d_(e))*Math.cos(d_(r))*Math.sin(y/2)*Math.sin(y/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}}const rF=async e=>{da.accessToken="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg";try{console.log("location",e);const r=(await Wf.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e}.json`,{params:{access_token:da.accessToken}})).data.features;if(console.log("features",r),r.length>0){const[n,o]=r[0].center;return{latitude:o,longitude:n}}return null}catch(t){return console.error("Error fetching location:",t),null}},nF=async e=>{try{const r=(await Wf.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e}.json`,{params:{access_token:da.accessToken}})).data.features.map(n=>({text:n.place_name}));return console.log("Location suggestions:",r),r}catch{throw new Error("Failed to fetch location suggestions")}},iF=async(e,t)=>{const r="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg";try{const n=`https://api.mapbox.com/geocoding/v5/mapbox.places/${t},${e}.json`,o={types:"place",access_token:r};return(await Wf.get(n,{params:o})).data.features[0].place_name}catch(n){throw console.error("Error:",n),new Error(`fetchLocationError ${n}`)}};function dW(e,t){if(e)return e<=0||t<=0?"Distance and speed must be positive numbers.":e/t}function fW(e){const t=new Date,r=new Date(t);return r.setHours(t.getHours()+1),e instanceof Date||(e=new Date(e)),e>r}const sF=(e,t)=>{const r=parseInt(e),n=parseInt(t);return(r*n).toFixed(0)},pW=({isOpen:e,onClose:t,onSelectDate:r,handleScheduleBooking:n})=>{const[o,f]=le.useState(new Date),y=I=>{f(new Date(I.target.value))},s=I=>{const[D,N]=I.target.value.split(":");f(U=>{const q=new Date(U);return q.setHours(Number(D)),q.setMinutes(Number(N)),q})},k=()=>{r(o),n(),t()};return A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:`modal-overlay fixed inset-0 bg-black opacity-50 ${e?"":"hidden"}`}),A.jsx("div",{className:`fixed inset-0 flex items-center justify-center z-50 ${e?"":"hidden"}`,children:A.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-gray-300",children:[A.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Select Date and Time"}),A.jsxs("div",{className:"flex flex-col space-y-4",children:[A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("label",{className:"text-gray-600",children:"Date:"}),A.jsx("input",{type:"date",value:o.toISOString().split("T")[0],onChange:y,min:new Date().toISOString().split("T")[0],className:"p-2 rounded border border-gray-300"})]}),A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("label",{className:"text-gray-600",children:"Time:"}),A.jsx("input",{type:"time",value:`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`,onChange:s,className:"p-2 rounded border border-gray-300"})]})]}),A.jsxs("div",{className:"mt-6 flex justify-end",children:[A.jsx("button",{onClick:k,className:"bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md mr-2",children:"Confirm"}),A.jsx("button",{onClick:t,className:"bg-gray-400 hover-bg-gray-600 text-white font-semibold py-2 px-4 rounded-md",children:"Cancel"})]})]})})]})};function gEe(){const e=Yo(Zt=>Zt.user.userId),t=Cs(),r=Va();da.accessToken="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg";const[n,o]=le.useState(null),f=le.useRef(null),[y,s]=le.useState(null),[k,I]=le.useState(null),[D,N]=le.useState(""),[U,q]=le.useState(""),[Z,ae]=le.useState(0),[ve,ie]=le.useState(0),[W,K]=le.useState(0),[he,de]=le.useState(0),[Ae,Te]=le.useState([]),[Ue,Pe]=le.useState([]),[$e,Ve]=le.useState(""),[Fe,Ye]=le.useState(),[ft,Pt]=le.useState(""),[or,xr]=le.useState(0),[mt,Xt]=le.useState(!1),[Wt,Ot]=le.useState(""),[ut,Vt]=le.useState(void 0),[ir,vt]=le.useState(null),[Dt,ur]=le.useState(!1),[Tr,fr]=le.useState(!1),[Cr,mr]=le.useState(null),nn=Zt=>{console.log("date",Zt),mr(Zt)};le.useEffect(()=>{if("geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(Zt){s(Zt.coords.latitude),I(Zt.coords.longitude)},function(Zt){Zr.error("Error getting location"),console.error("Error getting location:",Zt.message)}):Zr.error("Geolocation is not supported in this browser."),da.accessToken="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg",f.current&&k&&y){const Zt=new da.Map({container:f.current,style:"mapbox://styles/mapbox/streets-v11",center:[k,y],zoom:10});Vt(Zt),Zt.on("load",()=>{Zt.setStyle("mapbox://styles/mapbox/streets-v11");const gr=new da.Marker({draggable:!0}).setLngLat([k,y]).addTo(Zt);o(gr)})}return()=>{ut&&ut.remove()}},[y,k]);const Br=(Zt,gr,Xr,Hn)=>{const ti=new KR({accessToken:da.accessToken,unit:"metric",profile:"mapbox/driving-traffic",controls:{inputs:!1,instructions:!1}});if(ut){ut.addControl(ti,"top-left");const qn=[gr,Zt],Ii=[Hn,Xr];ti.setOrigin(qn),ti.setDestination(Ii)}};le.useEffect(()=>{const Zt=Wh("http://localhost:8000",{transports:["websocket"]});return vt(Zt),Zt?Zt.on("connect",()=>{console.log("Connected to the Socket.IO server")}):console.log("Can not connect"),()=>{ir&&ir.disconnect()}},[]);const Sn=()=>{ir==null||ir.emit("userCancelRide"),ur(!1)};ir==null||ir.on("sendRideDetails",Zt=>{if(Zt.userId==e){console.log("driver ride confirm",Zt);const gr=ba.stringify(Zt);t(`${Ui.rideconfirm}?${gr}`)}}),le.useEffect(()=>{(async()=>{try{const gr=await Vi.get(us.getCabData);console.log(gr.data),Ye(gr.data)}catch(gr){rn(gr)}})()},[]);const on=async()=>{try{if(!Wt)Zr.error("Please select the cab");else if(location){const Zt={latitude:y,longitude:k,vehicle:Wt,amount:$e,userId:e,fromLocation:D,toLocation:U,distance:ft,duration:or,fromLocationLat:Z,fromLocationLong:ve,toLocationLat:W,toLocationLong:he};e?(ur(!0),ir==null||ir.emit("confirmRide",Zt)):(Zr.error("please login"),r(G8()),t(Ui.login))}}catch(Zt){Zr.error(Zt.message)}},Gr=async Zt=>{Zt.preventDefault();try{if(D===U){Zr.error("Choose a valid location");return}const gr=await rF(D),Xr=await rF(U);if(gr&&Xr){const Hn=gr.latitude,ti=gr.longitude,qn=Xr.latitude,Ii=Xr.longitude;ae(Hn),ie(ti),K(qn),de(Ii),n&&n.remove(),Xt(!0);const zi=mEe(Hn,ti,qn,Ii),Fn=dW(zi,40);if(typeof Fn=="number"&&xr(Fn),Br(Hn,ti,qn,Ii),zi){const Ki=zi.toFixed(0);Pt(Ki)}}else Zr.error("Location not found")}catch(gr){console.error("handleListCabs",gr),Zr.error(gr.message)}},Zi=async()=>{try{if(Wt||Zr.error("Please select cab."),Cr){if(!fW(Cr))return Zr.error("Ride must be booked at least 2 hour in advance."),!1}else return Zr.error("Something went wrong try again"),!1;const Zt={vehicle:Wt,amount:$e,fromLocation:D,toLocation:U,distance:ft,duration:or,fromLocationLat:Z,fromLocationLong:ve,toLocationLat:W,toLocationLong:he,selectedDateTime:Cr};await Vi.post(us.scheduleTheRide,Zt),Zr.success("Successfully booked the ride.")}catch(Zt){console.log(Zt),rn(Zt)}},Kr=Zt=>{const gr=Zt.target.value;N(gr),setTimeout(async()=>{const Xr=await nF(gr);Xr&&Te(Xr)},2e3)},En=async Zt=>{const gr=Zt.target.value;q(gr),setTimeout(async()=>{const Xr=await nF(gr);console.log("sugg",Xr),Xr&&Pe(Xr)},2e3)},wi=(Zt,gr,Xr)=>{gr(Zt.text),Xr([])},Hi="/images/pexels-ketut-subiyanto-4429505.jpg",Tt="/images/pexels-jeshootscom-13861.jpg",pr="/images/pexels-yan-krukau-8867434.jpg",Er="/images/pexels-cottonbro-studio-4606338.jpg",Mr={width:"100%",height:"32rem",backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${Hi})`};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"w-full bg-cover bg-center",style:Mr,children:A.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-900 bg-opacity-50",children:A.jsx("div",{className:"text-center",children:A.jsxs("h1",{className:"text-white text-2xl font-semibold uppercase md:text-3xl",children:["Your Journey, Our Destination Where Every Mile Matters",A.jsx("p",{className:"underline text-white",children:"Book@"})]})})})}),A.jsx("h1",{className:"text-3xl font-bold text-blue-800 justify-center flex my-10",children:"Book a safe ride!"}),A.jsx("div",{className:"flex justify-center",children:A.jsxs("div",{className:"flex flex-col md:flex-row w-full md:w-10/12 justify-center items-center rounded-3xl overflow-hidden shadow-2xl",children:[Dt&&A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),A.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-lg z-50",children:[A.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Be relax !"}),A.jsx("p",{children:" We're connecting with the best drivers in your area."}),A.jsx("div",{className:"flex justify-center my-2 items-center h-16",children:A.jsxs("div",{className:"relative inline-flex",children:[A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full"}),A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full absolute top-0 left-0 animate-ping"}),A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full absolute top-0 left-0 animate-pulse"})]})}),A.jsx("p",{className:"max-w-sm",children:"Thank you for choosing Book@!. Your safety and satisfaction are our top priorities."}),A.jsx("button",{type:"button",onClick:Sn,className:"p-2 px-3 border border-slate-600 rounded-lg ms-32 m-2",children:"Cancel Ride"})]})]}),Tr&&A.jsx(pW,{isOpen:Tr,onClose:()=>fr(!1),onSelectDate:nn,handleScheduleBooking:Zi}),A.jsxs("div",{className:"sm:w-full flex flex-col md:flex-row my-5 lg:space-x-32",children:[A.jsxs("form",{className:"md:w-1/2 w-full md:m-10 m-2",onSubmit:Gr,style:{maxWidth:"270px"},children:[A.jsxs("div",{className:"justify-start w-full lg:ms-10 items-start flex flex-col",children:[A.jsxs("div",{className:"w-full mb-6 md:mb-0 relative",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"From"}),A.jsxs("div",{className:"w-full flex item-center",children:[A.jsx("input",{type:"text",name:"from",placeholder:"Enter a location",value:D,onChange:Kr,className:"pl-2 outline-none border-b-4 w-full rounded-lg p-2.5 sm:text-sm"}),A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 512 512",className:"mt-3 ms-3 cursor-pointer",onClick:async()=>N(await iF(y,k)),children:[A.jsx("title",{children:"Choose the current location"}),A.jsx("path",{d:"M256 0c17.7 0 32 14.3 32 32V66.7C368.4 80.1 431.9 143.6 445.3 224H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H445.3C431.9 368.4 368.4 431.9 288 445.3V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V445.3C143.6 431.9 80.1 368.4 66.7 288H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H66.7C80.1 143.6 143.6 80.1 224 66.7V32c0-17.7 14.3-32 32-32zM128 256a128 128 0 1 0 256 0 128 128 0 1 0 -256 0zm128-80a80 80 0 1 1 0 160 80 80 0 1 1 0-160z"})]})]}),A.jsx("ul",{className:"text-xs absolute left-0 right-0 z-10  rounded-xl bg-gray-100 shadow-2xl w-full overflow-hidden",children:Ae.map((Zt,gr)=>A.jsx("li",{className:`p-1.5 sm:text-sm text-xs font-medium w-full cursor-pointer ${gr<Ae.length-1?"border-b border-slate-300":""}`,title:Zt.text,onClick:()=>wi(Zt,N,Te),style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:Zt.text},gr))})]}),A.jsxs("div",{className:"w-full my-6 md:mb-0 relative",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"To"}),A.jsxs("div",{className:"w-full flex item-center",children:[A.jsx("input",{type:"text",name:"to",placeholder:"Enter a location",value:U,onChange:En,className:"pl-2 outline-none border-b-4 w-full rounded-lg p-2.5 sm:text-sm"}),A.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 512 512",className:"mt-3 ms-3 cursor-pointer",onClick:async()=>q(await iF(y,k)),children:[A.jsx("title",{children:"Choose the current location"}),A.jsx("path",{d:"M256 0c17.7 0 32 14.3 32 32V66.7C368.4 80.1 431.9 143.6 445.3 224H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H445.3C431.9 368.4 368.4 431.9 288 445.3V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V445.3C143.6 431.9 80.1 368.4 66.7 288H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H66.7C80.1 143.6 143.6 80.1 224 66.7V32c0-17.7 14.3-32 32-32zM128 256a128 128 0 1 0 256 0 128 128 0 1 0 -256 0zm128-80a80 80 0 1 1 0 160 80 80 0 1 1 0-160z"})]})]}),A.jsx("ul",{className:"text-xs absolute left-0 right-0 z-10  rounded-xl bg-gray-100 shadow-2xl w-full overflow-hidden",children:Ue.map((Zt,gr)=>A.jsx("li",{className:`p-1.5 sm:text-sm text-xs font-medium w-full cursor-pointer ${gr<Ae.length-1?"border-b border-slate-300":""}`,title:Zt.text,onClick:()=>wi(Zt,q,Pe),style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"12px"},children:Zt.text},gr))})]})]}),A.jsx("button",{type:"submit",className:"mt-4 w-full lg:ms-10 text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Search Cabs"}),mt&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"shadow-inner h-10 lg:ms-10 mt-5 p-2 border border-slate-500 w-full rounded-2xl justify-center text-center my-5",children:["Distance :",ft,"km"]}),A.jsx("div",{className:"flex ms-6 w-full max-w-xs overflow-x-scroll mt-5 scrollbar-hide",children:Fe==null?void 0:Fe.filter(Zt=>{var gr;return((gr=Zt.drivers)==null?void 0:gr.length)!=0}).map(Zt=>A.jsx("div",{className:"max-h-28 border ms-3 rounded-lg mb-4 bg-white",style:{minWidth:"270px"},children:A.jsxs("div",{className:"flex",children:[A.jsxs("div",{className:"flex",children:[A.jsx("input",{type:"radio",name:"Standard",className:"-mt-16",value:"Standard",id:"cab1",onClick:()=>{Ot(Zt.cabType);const gr=sF(Zt.price,ft);Ve(gr)}}),A.jsx("img",{src:Zt.image,alt:"Cab 1",className:"w-32 h-24"})]}),A.jsxs("div",{className:"m-3 ms-5",children:[A.jsx("p",{children:Zt.cabType}),A.jsxs("p",{children:[" ",sF(Zt.price,ft)]}),A.jsxs("label",{htmlFor:"cab1",className:"cursor-pointer flex",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1.5em",viewBox:"0 0 320 512",className:"",children:A.jsx("path",{d:"M112 48a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm40 304V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V256.9L59.4 304.5c-9.1 15.1-28.8 20-43.9 10.9s-20-28.8-10.9-43.9l58.3-97c17.4-28.9 48.6-46.6 82.3-46.6h29.7c33.7 0 64.9 17.7 82.3 46.6l58.3 97c9.1 15.1 4.2 34.8-10.9 43.9s-34.8 4.2-43.9-10.9L232 256.9V480c0 17.7-14.3 32-32 32s-32-14.3-32-32V352H152z"})}),A.jsx("p",{className:" ms-2",children:Zt.maxPersons})]})]})]})}))}),A.jsx("button",{type:"button",onClick:()=>fr(!0),className:"lg:ms-10 w-full text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Schedule a Ride"}),A.jsx("button",{type:"button",onClick:on,className:"w-full lg:ms-10 text-gray-900 hover:text-white border border-gray-800 hover:bg-gray-900 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 dark:border-gray-600 dark:text-black dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-800",children:"Confirm the Ride"})]})]}),A.jsx("div",{className:"sm:w-full md:w-full  flex lg:my-5 md:my-10 lg:justify-center lg:items-center",children:A.jsx("div",{className:"rounded-3xl sm:w-full md:w-full",ref:f,style:{width:"100%",height:"90vh"}})})]})]})}),A.jsx("div",{className:"text-center flex justify-center  my-5 mt-16",children:A.jsx("p",{className:"font-bold flex text-blue-800 text-4xl",children:"Why Book@ ?"})}),A.jsxs("div",{className:"flex flex-wrap justify-center w-10/12 mx-auto",children:[A.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/3 xl:w-1/3 p-4 relative",children:A.jsxs("div",{className:"bg-cover  text-center bg-center h-64 sm:h-72 md:h-80 lg:h-80 xl:h-80 rounded-lg relative",style:{backgroundImage:`url(${Er})`},children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black opacity-40 rounded-lg"}),A.jsxs("div",{className:"absolute bottom-0 text-white p-4",children:[A.jsx("h1",{className:"font-bold text-xl mb-5",children:"Safety"}),A.jsx("p",{children:"At Book@, we prioritize your safety above all else. Our cab booking service is designed to provide you with a secure and comfortable travel experience"})]})]})}),A.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/3 xl:w-1/3 p-4 relative",children:A.jsxs("div",{className:"bg-cover text-white text-center bg-center h-64 sm:h-72 md:h-80 lg:h-80 xl:h-80 rounded-lg relative",style:{backgroundImage:`url(${Tt})`},children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black opacity-40 rounded-lg"}),A.jsxs("div",{className:"absolute bottom-0 text-white p-4",children:[A.jsx("h1",{className:"font-bold text-xl mb-5",children:"Unmatched Convenience"}),A.jsx("p",{children:"Experience the ultimate convenience with Book@. All our drivers undergo strict background checks. We offer a range of services tailored to meet the diverse needs of modern women on the move."})]})]})}),A.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/3 xl:w-1/3 p-4 relative",children:A.jsxs("div",{className:"bg-cover text-white text-center bg-center h-64 sm:h-72 md:h-80 lg:h-80 xl:h-80 rounded-lg relative",style:{backgroundImage:`url(${pr})`},children:[A.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black opacity-40 rounded-lg"}),A.jsxs("div",{className:"absolute bottom-0 text-white p-4",children:[A.jsx("h1",{className:"font-bold text-xl mb-5",children:"Dedicated Assistance"}),A.jsx("p",{children:"At Book@, we are committed to providing exceptional customer support. Our dedicated team is available round-the-clock to assist you with any queries or concerns you may have."})]})]})})]})]})}function Gf(){return A.jsx(A.Fragment,{children:A.jsxs("footer",{className:"footer bg-gray-200 footer-center p-10 text-base-content rounded",children:[A.jsxs("nav",{className:"grid grid-flow-col justify-center gap-4",children:[A.jsx("a",{className:"link link-hover",children:"About us"}),A.jsx("a",{className:"link link-hover",children:"Contact"}),A.jsx("a",{className:"link link-hover",children:"Jobs"}),A.jsx("a",{className:"link link-hover",children:"Press kit"})]}),A.jsx("nav",{children:A.jsxs("div",{className:"grid grid-flow-col justify-center gap-4 my-8",children:[A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),A.jsx("a",{children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:A.jsx("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})}),A.jsx("aside",{className:"justify-center text-center",children:A.jsx("p",{children:"Copyright  2023 - All right reserved by Book@ Ltd"})})]})})}function Iu(){const e=Yo(I=>I.user.loggedIn),[t,r]=le.useState(!1),n=Va(),o=Cs(),f=()=>{r(!t)},[y,s]=le.useState(!1),k=()=>{try{console.log(e),n(G8()),o(Ui.login)}catch(I){Zr.error(I.message)}};return A.jsx("div",{className:"flex justify-center bg-gray-100",children:A.jsx("nav",{className:"relative w-full text-blue-800 bg-white hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-white-500/50 dark:shadow-lg dark:white-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:A.jsx("div",{className:"container px-6 py-2 mx-auto",children:A.jsxs("div",{className:"lg:flex lg:items-center lg:justify-between",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Un,{to:Ui.home,children:A.jsx("div",{className:"w-auto ms-20 text-4xl font-semibold",children:"Book@"})}),A.jsx("div",{className:"flex lg:hidden",children:A.jsx("button",{onClick:f,type:"button",className:"text-black-500 dark:black-gray-200 hover:text-gray-600 dark:hover:text-gray-400 focus:outline-none focus:text-gray-600 dark:focus:text-gray-400","aria-label":"toggle menu",children:t?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8h16M4 16h16"})})})})]}),A.jsxs("div",{className:`absolute inset-x-0 z-20 me-10 w-full px-6 py-4 transition-all duration-300 ease-in-out bg-white dark:bg-gray-800 lg:mt-0 lg:p-0 lg:top-0 lg:relative lg:bg-transparent lg:w-auto lg:opacity-100 lg:translate-x-0 lg:flex lg:items-center ${t?"translate-x-0 opacity-100":"opacity-0 -translate-x-full"}`,children:[A.jsxs("div",{className:"flex flex-col text-xl -mx-6 lg:flex-row lg:items-center lg:mx-8",children:[A.jsx(Un,{to:Ui.currentRide,className:"px-3 py-2 mx-3 mt-2 text-black-700 transition-colors duration-300 transform rounded-md lg:mt-0 dark:text-black-200 hover:text-gray-100 dark:hover:bg-blue-700",children:"Ride"}),A.jsx("div",{className:"avatar placeholder",onClick:()=>s(!y),"aria-label":"toggle dropdown",children:A.jsx("div",{className:"relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600",children:A.jsx("svg",{className:"absolute w-12 h-12 text-gray-400 -left-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})})]}),y&&A.jsxs("div",{onClick:()=>s(!1),className:"absolute right-0 z-20 w-48 py-2 mt-48 origin-top-right shadow-xl rounded-3xl overflow-hidden bg-white",children:[A.jsx(Un,{to:Ui.profile,className:"block px-4 py-3 text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Your Profile"}),A.jsx(Un,{to:Ti.login,className:"block px-4 py-3 text-sm text-gray-600  transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"SignIn as Driver"}),e?A.jsx("p",{onClick:k,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Sign Out"}):A.jsx(Un,{to:Ui.login,className:"block px-4 py-3 cursor-pointer text-sm text-gray-600 capitalize transition-colors duration-300 transform dark-text-gray-300 hover-bg-gray-100 dark-hover-bg-gray-700 dark-hover-text-white",children:"Login"})]})]})]})})})})}function yEe(){return A.jsxs("div",{className:"bg-gray-100 ",children:[A.jsx(Iu,{}),A.jsx(gEe,{}),A.jsx(Gf,{})]})}const xEe=le.lazy(()=>ad(()=>import("./Chat-f0f01d7a.js"),["assets/Chat-f0f01d7a.js","assets/styles-3e973eb1.css"]));function vEe(e){var Ve;const{rideId:t}=e,[r,n]=le.useState(null),[o,f]=le.useState(null),[y,s]=le.useState(null),[k,I]=le.useState(null),D=le.useRef(null),[N,U]=le.useState(void 0),[q,Z]=le.useState(null),[ae,ve]=le.useState(null),[ie,W]=le.useState(null),[K,he]=le.useState(null),[de,Ae]=le.useState(!1),Te=Cs();if(le.useEffect(()=>{(async()=>{try{const Ye=await Vi.patch(`${us.getRideDetails}?id=${t}`);console.log("response",Ye),ve(Ye.data),Ye.data.otpVerifyed?(s(parseFloat(Ye.data.dropoffCoordinates.latitude)),I(parseFloat(Ye.data.dropoffCoordinates.longitude))):(I(parseFloat(Ye.data.driverCoordinates.longitude)),s(parseFloat(Ye.data.driverCoordinates.latitude))),Ue(Ye.data.driver_id)}catch(Ye){console.log(Ye),rn(Ye)}})()},[]),le.useEffect(()=>{if("geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(Fe){n(Fe.coords.latitude),f(Fe.coords.longitude)},function(Fe){As.error("Error getting location"),console.error("Error getting location:",Fe.message)}),da.accessToken="pk.eyJ1IjoiYXNsYW0yMiIsImEiOiJjbGw0bnZwdDQwOGp0M2Nsb3FiZzU0NjNsIn0.1dtudEChoi_wtZin_v2Wzg",o&&r&&D.current){const Fe=new da.Map({container:D.current,style:"mapbox://styles/mapbox/streets-v11",center:[o,r],zoom:10});U(Fe),Fe.on("load",()=>{const Ye=new KR({accessToken:da.accessToken,unit:"metric",profile:"mapbox/driving-traffic",controls:{inputs:!1,instructions:!1},route:!0});Fe.addControl(Ye,"top-left");const ft=[o,r],Pt=[k,y];Ye.setOrigin(ft),Ye.setDestination(Pt)})}return()=>{N&&N.remove()}},[y,k]),le.useEffect(()=>{const Fe=Wh("http://localhost:8000",{transports:["websocket"]});return he(Fe),Fe&&Fe.on("connect",()=>{console.log("Connected to the Socket.IO server")}),()=>{K&&(K.disconnect(),Fe.disconnect())}},[]),K&&ae){let Fe=!1;K.on("startRideNotifyUser",Ye=>{console.log("startRideNotifyUser",Ye),Fe=!0,s(parseFloat(ae.dropoffCoordinates.latitude)),I(parseFloat(ae.dropoffCoordinates.longitude))}),K.on("endRideNotifyUser",Ye=>{if(console.log("endRideNotifyUser",Ye),Ye.userId==ae.user_id){const ft=t?{rideId:t}:{},Pt=ba.stringify(ft);Te(`${Ui.payment}?${Pt}`)}}),K.on("driverLoacationUpdateToUser",Ye=>{console.log("driverLoacationUpdateToUser data",Ye),Ye.driverId==ae.driver_id&&!Fe&&(s(parseFloat(Ye.latitude)),I(parseFloat(Ye.longitude)))})}const Ue=async Fe=>{try{console.log("driverId",Fe);const Ye=await Vi.get(`${us.getDriverData}?driverId=${Fe}`);Z(Ye.data.driverData),W(Ye.data.feedBacks),console.log("fetch driver data :",Ye)}catch(Ye){console.log("error in fetchDriverData",Ye),rn(Ye)}},Pe=Fe=>{const Ye=parseInt(Fe);return Ye>=1&&Ye<=5?"".repeat(Ye):"Invalid Rating"},$e=()=>{Ae(!de)};return A.jsx("div",{className:"flex my-10 justify-center space-x-4",children:A.jsxs("div",{className:"w-10/12 space-y-4",children:[de&&t&&K&&A.jsx(le.Suspense,{fallback:"loading please wait.....",children:A.jsx(xEe,{rideId:t,role:"user",handleChangeTheChatState:$e})}),A.jsxs("div",{className:"rounded-3xl shadow-2xl",children:[A.jsxs("div",{className:"flex",children:[A.jsx("div",{className:"w-8/12 m-10",children:A.jsx("div",{ref:D,style:{width:"100%",height:"80vh"}})}),A.jsxs("div",{className:"w-4/12 m-10 max-w-sm bg-white border border-gray-200 rounded-lg shadow",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:q==null?void 0:q.driverImageUrl,alt:"no"})}),A.jsxs("div",{className:"p-5",children:[A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Name : ",q==null?void 0:q.name]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Total Rides : ",(Ve=q==null?void 0:q.RideDetails)==null?void 0:Ve.completedRides]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Vehicle : ",q==null?void 0:q.vehicleDocuments.vehicleModel]}),A.jsxs("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:["Registration no : ",q==null?void 0:q.vehicleDocuments.registration.registrationId]})]}),A.jsxs("button",{onClick:()=>$e(),className:"bg-blue-500 mx-auto my-3 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center space-x-2 transition duration-300 ease-in-out focus:outline-none",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-90",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M2.293 8.293a1 1 0 011.414 0L10 14.586l6.293-6.293a1 1 0 111.414 1.414l-7 7a1 1 0 01-1.414 0l-7-7a1 1 0 010-1.414z",clipRule:"evenodd"})}),A.jsx("span",{children:"Chat"})]})]})]}),A.jsx("div",{className:"overflow-x-auto p-5 scrollbar-hide",style:{maxWidth:"100%"},children:A.jsx("div",{className:"flex space-x-4",children:ie==null?void 0:ie.map((Fe,Ye)=>A.jsxs("div",{className:"my-10 border rounded-3xl shadow-2xl p-4",style:{flex:"0 0 auto",width:"20rem"},children:[A.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900",children:Pe(Fe.rating)}),A.jsx("p",{className:"font-normal text-gray-700",children:Fe.feedback})]},Ye))})})]})]})})}function bEe(){const e=$a(),{rideId:t}=ba.parse(e.search),r={rideId:t};return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(Iu,{}),A.jsx(vEe,{...r}),A.jsx("div",{className:"mt-16",children:A.jsx(Gf,{})})]})}const _Ee=le.lazy(()=>ad(()=>import("./userWalletHistory-74c998c6.js"),["assets/userWalletHistory-74c998c6.js","assets/styles-3e973eb1.css"]));function wEe(){const[e,t]=le.useState(!0),[r,n]=le.useState(!0),[o,f]=le.useState(!1),[y,s]=le.useState([]),k=Va(),I=Cs();le.useEffect(()=>{(async()=>{try{const Z=await Vi.get(us.profile),ae={name:Z.data.name,email:Z.data.email,mobile:Z.data.mobile,refrel:Z.data.refrel,joinedAt:Z.data.joinedAt,totalRides:Z.data.RideDetails.completedRides,wallet:{balance:Z.data.wallet.balance}};s(Z.data.wallet),console.log(Z.data.wallet),console.log(Z),D.setValues(ae)}catch(Z){console.log(Z),rn(Z)}})()},[r]);const D=cd({initialValues:{name:"",email:"",mobile:"",refrel:"",joinedAt:"",totalRides:"",wallet:{balance:""}},validationSchema:Au({name:$i().min(3,"Type a valid Name").required("Please Enter the value"),email:$i().email("Please Enter a valid Email").required("Please Enter value"),mobile:$i().length(10,"Please Enter a valid number").required("Please Enter value")}),onSubmit:async q=>{console.log(q),N(q)}}),N=async q=>{try{const Z=await Vi.post(us.updateProfile,q);n(!r),t(!e),k(PA({userId:Z.data._id,mobile:Z.data.mobile}))}catch(Z){console.log(Z),n(!r),t(!e),rn(Z)}},U="pl-2 outline-none rounded-lg p-2.5 sm:text-sm block  text-gray-700 border mb-3 leading-tight";return A.jsx(A.Fragment,{children:o?A.jsx("div",{className:"bg-gray-100 h-screen",children:A.jsx(le.Suspense,{fallback:A.jsx("div",{children:"Loading..."}),children:A.jsx(_Ee,{transactions:[],...y})})}):A.jsx("div",{className:"flex mt-20 justify-center",children:A.jsx("div",{className:"lg:w-9/12 w-11/12 mb-40 overflow-hidden rounded-3xl bg-gray-100 shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsx("div",{className:"p-8",children:D.values&&A.jsxs("form",{className:"",onSubmit:D.handleSubmit,children:[A.jsx("div",{children:e?A.jsx("div",{onClick:()=>t(!e),children:A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512",children:A.jsx("path",{d:"M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"})})}):A.jsxs("div",{className:"flex",children:[A.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Save"}),A.jsx("button",{type:"button",onClick:()=>t(!e),className:"text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"cancel"})]})}),A.jsxs("div",{className:"flex flex-col md:flex-row lg:ms-36  mt-5",children:[A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Name"}),A.jsx("input",{type:"text",name:"name",placeholder:"name",required:!0,readOnly:e,value:D.values.name,onChange:D.handleChange,onBlur:D.handleBlur,className:U}),D.touched.name&&D.errors.name&&A.jsx("div",{className:"text-red-500 text-xs",children:D.errors.name})]}),A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Email"}),A.jsx("input",{type:"text",name:"email",placeholder:"Email",required:!0,readOnly:e,value:D.values.email,onChange:D.handleChange,onBlur:D.handleBlur,className:U}),D.touched.email&&D.errors.email&&A.jsx("div",{className:"text-red-500 text-xs",children:D.errors.email})]})]}),A.jsxs("div",{className:"flex flex-col md:flex-row lg:ms-36 mt-5",children:[A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Mobile"}),(D.values.mobile||!e)&&A.jsxs(A.Fragment,{children:[A.jsx("input",{type:"text",name:"mobile",placeholder:"Mobile",required:!0,readOnly:e,value:D.values.mobile,onChange:D.handleChange,onBlur:D.handleBlur,className:U}),D.touched.mobile&&D.errors.mobile&&A.jsx("div",{className:"text-red-500 text-xs",children:D.errors.mobile})]})]}),A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Refrel"}),A.jsx("input",{type:"text",name:"refrel",placeholder:"Refrel",required:!0,readOnly:!0,value:D.values.refrel,onChange:D.handleChange,onBlur:D.handleBlur,className:U})]})]}),A.jsxs("div",{className:"flex flex-col md:flex-row lg:ms-36 mt-5",children:[A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Total Rides"}),A.jsx("input",{type:"text",name:"totalRides",required:!0,readOnly:!0,value:D.values.totalRides,className:"pl-2 outline-none rounded-lg bg-gray-100 p-2.5 sm:text-sm block  text-gray-700  mb-3 leading-tight"}),A.jsx("p",{className:"cursor-pointer",onClick:()=>I(Ui.rideHistory),children:"Ride History"})]}),A.jsxs("div",{className:"mb-4 w-full md:w-1/2",children:[A.jsx("label",{className:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2",children:"Wallet"}),A.jsx("input",{type:"text",name:"email",placeholder:"Email",required:!0,readOnly:!0,value:D.values.wallet.balance,className:"pl-2 outline-none rounded-lg bg-gray-100 p-2.5 sm:text-sm block  text-gray-700  mb-3 leading-tight"}),A.jsx("p",{onClick:()=>f(!o),className:"cursor-pointer",children:"Wallet History"})]})]})]})})})})})})}function SEe(){return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(Iu,{}),A.jsx(wEe,{}),A.jsx(Gf,{})]})}function CEe(e){const{rideId:t}=e,r=Cs(),[n,o]=le.useState(null);le.useEffect(()=>{(async()=>{try{const k=await Vi.patch(`${us.getRideDetails}?id=${t}`);console.log("response ",k),o(k.data)}catch(k){console.log(k),rn(k)}})()},[t]);const f=async()=>{try{if(n){const s={driverId:n==null?void 0:n.driver_id,rideId:t,price:n.price};await Vi.post(us.payment,s);const k=parseInt(n.price);await y(k)}}catch(s){console.log(s),rn(s)}},y=async s=>{const k={key:"rzp_test_G2uFOSlScJa8TV",currency:"INR",amount:s*100,name:"BOOKAT",prefill:{name:"BOOKAT"},handler:function(I){if(I.razorpay_payment_id){console.log("Payment successful",I.razorpay_payment_id);const D=t?{rideId:t}:{},N=ba.stringify(D);r(`${Ui.review}?${N}`)}else console.log("Payment failed")}};try{return await new Promise(()=>{new window.Razorpay(k).open()})}catch(I){return console.log(I),null}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen items-center justify-center bg-gray-100",children:A.jsx("div",{className:"w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("h3",{className:"text-lg font-semibold text-heading",children:"Payment Details"}),n&&A.jsxs("dl",{className:"mt-4 space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("dt",{className:"text-sm font-semibold text-text",children:"Total Amount"}),A.jsxs("dd",{className:"text-lg font-semibold text-heading",children:[" ",n.price]})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("dt",{className:"text-sm font-semibold text-text",children:"Distance"}),A.jsx("dd",{className:"text-sm font-semibold text-heading",children:n.distance})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("dt",{className:"text-sm font-semibold text-text",children:"From"}),A.jsx("dd",{className:"text-sm font-semibold text-heading",children:n.pickupLocation})]}),A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("dt",{className:"text-sm font-semibold text-text",children:"To"}),A.jsx("dd",{className:"text-sm font-semibold text-heading",children:n.dropoffLocation})]})]}),A.jsx("div",{className:"mt-6 flex flex-col space-y-2",children:A.jsx("button",{type:"button",onClick:()=>f(),className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 ",children:"Pay now"})})]})})})})})}function kEe(){const e=$a(),{rideId:t}=ba.parse(e.search),r={rideId:t};return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(Iu,{}),A.jsx(CEe,{...r})]})}function EEe(){const e=Yo(ut=>ut.user.userId),t=Cs(),[r,n]=le.useState([]),[o,f]=le.useState(null),[y,s]=le.useState([]),[k,I]=le.useState(null),[D,N]=le.useState(null),[U,q]=le.useState("quickRides"),[Z,ae]=le.useState(null),[ve,ie]=le.useState(!1),[W,K]=le.useState(!1),[he,de]=le.useState(!1),[Ae,Te]=le.useState(),[Ue,Pe]=le.useState(null),$e=ut=>{console.log("date",ut),Pe(ut)},Ve="cursor-pointer bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",Fe="cursor-pointer border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300";le.useEffect(()=>{Ye()},[he]),le.useEffect(()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(Vt){I(Vt.coords.latitude),N(Vt.coords.longitude)},function(Vt){Zr.error("Error getting location"),console.error("Error getting location:",Vt.message)}):Zr.error("Geolocation is not supported in this browser.");const ut=Wh("http://localhost:8000",{transports:["websocket"]});return ae(ut),ut?ut.on("connect",()=>{console.log("Connected to the Socket.IO server")}):console.log("Can not connect"),()=>{Z&&Z.disconnect()}},[]);const Ye=async()=>{try{const ut=await Vi.get(us.getRideHistory);console.log("response",ut),n(ut.data.quickRides),f(ut.data.scheduledRides),s(ut.data.favouriteRides)}catch(ut){console.log(ut),rn(ut)}},ft=async ut=>{try{const Vt=await Vi.patch(`${us.addToFavourite}?id=${ut}`);console.log("response",Vt),de(!he)}catch(Vt){rn(Vt)}},Pt=async ut=>{try{const ir=(await Vi.get(`${us.quickRideInfo}?id=${ut}`)).data;console.log(ir),xr(ir)}catch(Vt){rn(Vt)}},or=async()=>{try{if(Ue){if(!fW(Ue))return Zr.error("Ride must be booked at least 2 hour in advance."),!1}else return Zr.error("Something went wrong try again"),!1;const ut={selectedDateTime:Ue,rideId:Ae},Vt=await Vi.post(us.reScheduleTheRide,ut);Zr.success("Ride Booked Successfully"),console.log(Vt)}catch(ut){rn(ut)}},xr=ut=>{const Vt=parseInt(ut.distance),ir=dW(Vt,40);console.log(ir),console.log("latitude,longitude",ut.dropoffLocation);const vt={latitude:k,longitude:D,vehicle:ut.vehicleType,amount:ut.price,userId:ut.user_id,fromLocation:ut.pickupLocation,toLocation:ut.dropoffLocation,distance:ut.distance,duration:ir,fromLocationLat:ut.pickupCoordinates.latitude,fromLocationLong:ut.pickupCoordinates.longitude,toLocationLat:ut.dropoffCoordinates.latitude,toLocationLong:ut.dropoffCoordinates.longitude};ie(!0),Z==null||Z.emit("confirmRide",vt)},mt=()=>{Z==null||Z.emit("userCancelRide"),ie(!1)};Z==null||Z.on("sendRideDetails",ut=>{if(ut.userId==e){console.log("driver ride confirm",ut);const Vt=ba.stringify(ut);t(`${Ui.rideconfirm}?${Vt}`)}});const Xt=ut=>A.jsx("p",{title:ut.favourite?"Remove From Favourite":"Add To Favourite",className:"cursor-pointer",onClick:()=>ft(ut._id),children:ut.favourite?A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 576 512",children:A.jsx("path",{fill:"#eeff00",d:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"})}):A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 576 512",children:A.jsx("path",{d:"M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.6 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"})})}),Wt=[{name:"From",selector:ut=>ut.pickupLocation},{name:"To",selector:ut=>ut.dropoffLocation},{name:"Amount",selector:ut=>ut.price},{name:"Distance",selector:ut=>ut.distance},{name:"Vehicle Type",selector:ut=>ut.vehicleType},{name:"Status",selector:ut=>ut.status},{name:"Action",cell:Xt}],Ot=[{name:"From",selector:ut=>ut.dropoffLocation},{name:"To",selector:ut=>ut.dropoffLocation},{name:"Amount",selector:ut=>ut.price},{name:"Distance",selector:ut=>ut.distance},{name:"Vehicle Type",selector:ut=>ut.vehicleType},{name:"Favourite",cell:Xt},{name:"Action",cell:ut=>A.jsxs("div",{className:"cursor-pointer",children:[A.jsx("p",{className:"p-2 m-2 rounded-lg border-2 border-blue-500 hover:bg-blue-500 hover:text-white focus:outline-none",onClick:()=>Pt(ut._id),children:"Quick Ride"}),A.jsx("p",{className:"p-2 m-2 rounded-lg border-2 border-green-500 hover:bg-green-500 hover:text-white focus:outline-none",onClick:()=>{Te(ut._id),K(!0)},children:"Schedule Ride"})]})}];return A.jsxs("div",{className:"mt-10 w-full lg:w-10/12 lg:ms-32 bg-white p-6 rounded-3xl shadow-2xl justify-center",children:[ve&&A.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[A.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),A.jsxs("div",{className:"modal-content bg-white p-6 rounded-lg shadow-lg z-50",children:[A.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Be relax !"}),A.jsx("p",{children:"We're connecting with the best drivers in your area."}),A.jsx("div",{className:"flex justify-center my-2 items-center h-16",children:A.jsxs("div",{className:"relative inline-flex",children:[A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full"}),A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full absolute top-0 left-0 animate-ping"}),A.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full absolute top-0 left-0 animate-pulse"})]})}),A.jsx("p",{className:"max-w-sm",children:"Thank you for choosing Book@!. Your safety and satisfaction are our top priorities."}),A.jsx("button",{type:"button",onClick:mt,className:"p-2 px-3 border border-slate-600 rounded-lg ms-32 m-2",children:"Cancel Ride"})]})]}),W&&A.jsx(pW,{isOpen:W,onClose:()=>K(!1),onSelectDate:$e,handleScheduleBooking:or}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>q("quickRides"),className:U==="quickRides"?Ve:Fe,role:"tab","aria-selected":U==="quickRides",children:"Quick Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>q("scheduledRides"),className:U==="scheduledRides"?Ve:Fe,role:"tab","aria-selected":U==="scheduledRides",children:"Scheduled Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx("p",{onClick:()=>q("favouriteRides"),className:U==="favouriteRides"?Ve:Fe,role:"tab","aria-selected":U==="favouriteRides",children:"Favourite Rides"})})]})}),r&&o&&y&&A.jsx(ed,{style:{zIndex:"-1"},columns:U==="quickRides"||U==="scheduledRides"?Wt:Ot,data:U==="quickRides"?r:U==="scheduledRides"?o:y,fixedHeader:!0,highlightOnHover:!0,pagination:!0})]})}function TEe(){return A.jsxs("div",{className:"bg-gray-100 h-screen",children:[A.jsx(Iu,{}),A.jsx(EEe,{}),A.jsx("div",{className:"mt-16",children:A.jsx(Gf,{})})]})}function AEe(){const e=Cs(),[t,r]=le.useState();le.useEffect(()=>{(async()=>{try{const f=await Vi.get(us.currentRide);console.log("response",f),r(f.data[0])}catch(f){console.log(f),rn(f)}})()},[]);const n=()=>{if(t){const o={rideId:t._id},f=ba.stringify(o);e(`${Ui.rideconfirm}?${f}`)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen lg:justify-center mt-9",children:A.jsx("div",{className:"lg:w-10/12 w-full overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex lg:justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"p-8"}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ui.currentRide,role:"tab",className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ui.scheduledPendingRides,className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300",role:"tab","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"status"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Map"})]})}),A.jsx("tbody",{children:t&&A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.pickupLocation}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:t.dropoffLocation}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[" ",t.price]}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[t.distance," km"]}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:t.status}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:A.jsx("p",{className:"cursor-pointer",onClick:()=>n(),children:"Navigation"})})]},t._id)})]})})]})})})})})}function IEe(){return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(Iu,{}),A.jsx(AEe,{}),A.jsx("div",{className:"mt-16",children:A.jsx(Gf,{})})]})}function PEe(){const e=Cs(),[t,r]=le.useState(),[n,o]=le.useState(!1);le.useEffect(()=>{(async()=>{try{const k=await Vi.get(us.scheduledRides);console.log("response",k),r(k.data)}catch(k){console.log(k),rn(k)}})()},[n]);const f=async s=>{try{const k={rideId:s};await Vi.post(us.cancelTheRide,k),Zr.success("Cancelled the Ride SuccessFully"),o(!n)}catch(k){console.log(k),rn(k)}},y=(s,k)=>{const I={driverId:s,rideId:k},D=ba.stringify(I);e(`${Ui.driverInfo}?${D}`)};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex h-screen lg:justify-center mt-9",children:A.jsx("div",{className:"lg:w-10/12 w-full overflow-hidden rounded-3xl bg-white shadow-2xl sm:flex lg:justify-center",children:A.jsx("div",{className:"w-full ",children:A.jsxs("div",{className:"p-8",children:[A.jsx("div",{className:"p-8"}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsxs("ul",{className:"flex",role:"tablist",children:[A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ui.currentRide,role:"tab",className:"border-gray-400 border-2  text-gray-700 hover:bg-white py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300","aria-selected":"true",children:"Rides"})}),A.jsx("li",{className:"mr-1",children:A.jsx(Un,{to:Ui.scheduledPendingRides,role:"tab",className:"bg-gray-300  text-gray-700  py-2 px-4 rounded-t-lg active:bg-white focus:outline-none focus:ring focus:ring-indigo-300","aria-selected":"true",children:"Scheduled Rides"})})]})}),A.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg ",children:A.jsxs("table",{className:"w-full text-sm text-left text-white  dark:text-white",children:[A.jsx("thead",{className:"text-xs text-white uppercase bg-gray-700 dark:bg-slate-500 dark:text-white border-b-white border-4 font-bold",children:A.jsxs("tr",{children:[A.jsx("th",{scope:"col",className:"px-6 py-3",children:"From"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"To"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Amount"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Distance"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"status"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Driver Status"}),A.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),A.jsx("tbody",{children:t&&t.map(s=>A.jsxs("tr",{className:" bg-gray-700 dark:bg-slate-400 border-b  dark:border-gray-900  dark:hover:bg-gray-500",children:[A.jsx("th",{scope:"row",className:"px-6 py-4 max-w-xs font-medium text-gray-900 whitespace-nowrap overflow-hidden overflow-ellipsis dark:text-white",title:s.pickupLocation,children:s.pickupLocation}),A.jsx("th",{scope:"row",className:"px-6 py-4 max-w-xs font-medium text-gray-900 whitespace-nowrap overflow-hidden overflow-ellipsis dark:text-white",title:s.dropoffLocation,children:s.dropoffLocation}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[" ",s.price]}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[s.distance," km"]}),A.jsx("td",{className:"px-6 py-4 dark:text-white",children:s.status}),A.jsxs("td",{className:"px-6 py-4 dark:text-white",children:[s.driverAccepted,s.driverAccepted=="Accepted"&&A.jsx("p",{className:"cursor-pointer mt-1",onClick:()=>y(s.driver_id,s._id),children:"Driver Info"})]}),A.jsx("td",{className:"px-4 py-2 text-white cursor-pointer  font-semibold text-sm",onClick:()=>f(s._id),children:"Cancel"})]},s._id))})]})})]})})})})})}function REe(){return A.jsxs("div",{className:"bg-gray-100",children:[A.jsx(Iu,{}),A.jsx(PEe,{}),A.jsx("div",{className:"mt-16",children:A.jsx(Gf,{})})]})}function MEe(e){var N;const{driverId:t,rideId:r}=e,n=Cs(),[o,f]=le.useState(null),[y,s]=le.useState(null);le.useEffect(()=>{t&&k(t)},[]);const k=async U=>{try{const q=await Vi.get(`${us.getDriverData}?driverId=${U}`);console.log(q.data),f(q.data.driverData),s(q.data.feedBacks)}catch(q){console.log("error in fetchDriverData",q),rn(q)}},I=U=>{const q=parseInt(U);return q>=1&&q<=5?"".repeat(q):"Invalid Rating"},D=async()=>{try{const U={driverId:t,rideId:r};await Vi.post(us.cancelTheRide,U),Zr.success("Cancelled the Ride SuccessFully"),n(Ui.home)}catch(U){console.log("error in fetchComments",U),rn(U)}};return A.jsx(A.Fragment,{children:A.jsx("div",{className:"flex flex-col sm:flex-row my-10 justify-center space-x-4",children:A.jsx("div",{className:"lg:w-10/12 w-full space-y-4",children:A.jsxs("div",{className:"rounded-3xl shadow-2xl w-full",children:[A.jsxs("div",{className:"sm:flex justify-around",children:[A.jsxs("div",{className:"w-full sm:w-4/12 max-w-sm mt-10 bg-white border border-gray-200 rounded-lg shadow mb-4 sm:mb-0",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:o==null?void 0:o.driverImageUrl,alt:"no"})}),A.jsxs("div",{className:"p-5",children:[A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Name : ",o==null?void 0:o.name]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Mobile : ",o==null?void 0:o.mobile]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Email : ",o==null?void 0:o.email]})]})]}),A.jsxs("div",{className:"w-full sm:w-4/12 max-w-sm mt-10 bg-white border border-gray-200 rounded-lg shadow mb-4 sm:mb-0",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:o==null?void 0:o.vehicleDocuments.vehicleImage1,alt:"no"})}),A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:o==null?void 0:o.vehicleDocuments.vehicleImage2,alt:"no"})}),A.jsxs("div",{className:"p-5",children:[A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Registration no : ",o==null?void 0:o.vehicleDocuments.registration.registrationId]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Vehicle : ",o==null?void 0:o.vehicleDocuments.vehicleModel]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Total Rides : ",(N=o==null?void 0:o.RideDetails)==null?void 0:N.completedRides]})]})]}),A.jsxs("div",{className:"w-full sm:w-4/12 max-w-sm mt-10 bg-white border border-gray-200 rounded-lg shadow mb-4 sm:mb-0",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:o==null?void 0:o.vehicleDocuments.registration.registrationImage,alt:"no"})}),A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{className:"rounded-t-lg mt-6",src:o==null?void 0:o.license.licenseImage,alt:"no"})}),A.jsxs("div",{className:"p-5",children:[A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["LicenseId : ",o==null?void 0:o.license.licenseId]}),A.jsxs("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:["Vehicle : ",o==null?void 0:o.vehicleDocuments.vehicleModel]})]})]})]}),A.jsx("div",{className:"overflow-x-auto p-5 scrollbar-hide",style:{maxWidth:"100%"},children:A.jsx("div",{className:"flex space-x-4",children:y==null?void 0:y.map(U=>A.jsxs("div",{className:"-10 border bg-white rounded-3xl shadow-lg p-4",style:{flex:"0 0 auto",width:"20rem"},children:[A.jsx("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900",children:I(U.rating)}),A.jsx("p",{className:"font-normal text-gray-700",children:U.feedback})]},U._id))})}),A.jsx("button",{type:"button",onClick:D,className:"m-5 mb-6 text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 ",children:"Cancel the Ride"})]})})})})}function LEe(){const e=$a(),{driverId:t,rideId:r}=ba.parse(e.search),n={driverId:t,rideId:r};return A.jsxs("div",{children:[A.jsx(Iu,{}),A.jsx(MEe,{...n}),A.jsx("div",{className:"mt-16",children:A.jsx(Gf,{})})]})}const OEe=e=>{const{rideId:t}=e,r=Cs(),[n,o]=le.useState(0),[f,y]=le.useState(""),s=D=>{y(D.target.value)},k=async D=>{D.preventDefault();try{const N={rideId:t,review:f,rating:n},U=await Vi.post(us.submitReview,N);console.log("response",U),Zr.success("Thank you for submitting the feedback"),r(Ui.home)}catch(N){console.log("error : ",N),rn(N)}},I=()=>{r(Ui.home)};return A.jsx("div",{className:"flex items-center bg-gray-100 justify-center h-screen",children:A.jsxs("form",{className:"p-4 bg-white w-1/4 rounded-3xl shadow-2xl",onSubmit:k,children:[A.jsx("h2",{className:"text-xl font-bold mb-4",children:"Rate and Review"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Rating:"}),A.jsx("div",{className:"ml-4 flex items-center space-x-2",children:[...Array(5)].map((D,N)=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 576 512",className:`h-6 my-4 w-6 fill-current cursor-pointer ${N+1<=n?"text-yellow-500":"text-gray-300"}`,onClick:()=>o(N+1),children:A.jsx("path",{d:"M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.6 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"})},N))})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Review:"}),A.jsx("textarea",{value:f,onChange:s,className:"w-full h-32 py-2 px-3 border border-gray-300 rounded focus:outline-none focus:border-indigo-500"})]}),A.jsxs("div",{className:"flex space-x-5",children:[A.jsx("button",{type:"submit",className:"bg-indigo-500 text-white py-2 px-4 rounded hover:bg-indigo-700 focus:outline-none focus:shadow-outline",children:"Submit"}),A.jsx("p",{onClick:()=>I(),className:"bg-red-500 text-white py-2 px-4 rounded hover:bg-red-700 focus:outline-none focus:shadow-outline cursor-pointer",children:"Ignore"})]})]})})};function DEe(){const e=$a(),{rideId:t}=ba.parse(e.search),r={rideId:t};return A.jsxs("div",{children:[A.jsx(Iu,{}),A.jsx(OEe,{...r})]})}const zEe=()=>A.jsxs($w,{children:[A.jsx(In,{path:"/login",element:A.jsx(tF,{component:dEe})}),A.jsx(In,{path:"/signup",element:A.jsx(tF,{component:fEe})}),A.jsx(In,{path:"/resetpassword",element:A.jsx(pEe,{})}),A.jsx(In,{path:"/",element:A.jsx(yEe,{})}),A.jsx(In,{path:"/rideconfirm",element:A.jsx(lh,{component:bEe})}),A.jsx(In,{path:"/profile",element:A.jsx(lh,{component:SEe})}),A.jsx(In,{path:"/payment",element:A.jsx(lh,{component:kEe})}),A.jsx(In,{path:"/review",element:A.jsx(lh,{component:DEe})}),A.jsx(In,{path:"/history",element:A.jsx(lh,{component:TEe})}),A.jsx(In,{path:"/currentRide",element:A.jsx(lh,{component:IEe})}),A.jsx(In,{path:"/sheduledRide",element:A.jsx(lh,{component:REe})}),A.jsx(In,{path:"/driverInfo",element:A.jsx(lh,{component:LEe})}),A.jsx(In,{path:"/*",element:A.jsx(nM,{role:"user"})})]});function NEe(){return A.jsxs(A.Fragment,{children:[A.jsx(rZ,{}),A.jsx(pue,{}),A.jsx(cY,{children:A.jsxs($w,{children:[A.jsx(In,{path:"/*",element:A.jsx(zEe,{})}),A.jsx(In,{path:"/driver/*",element:A.jsx(Xke,{})}),A.jsx(In,{path:"/admin/*",element:A.jsx(hEe,{})})]})})]})}function s1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s1=function(r){return typeof r}:s1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s1(e)}function jEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FEe(e,t,r){return t&&oF(e.prototype,t),r&&oF(e,r),e}function BEe(e,t){return t&&(s1(t)==="object"||typeof t=="function")?t:o1(e)}function QA(e){return QA=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},QA(e)}function o1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $Ee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eI(e,t)}function eI(e,t){return eI=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},eI(e,t)}function a1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mW=function(e){$Ee(t,e);function t(){var r,n;jEe(this,t);for(var o=arguments.length,f=new Array(o),y=0;y<o;y++)f[y]=arguments[y];return n=BEe(this,(r=QA(t)).call.apply(r,[this].concat(f))),a1(o1(n),"state",{bootstrapped:!1}),a1(o1(n),"_unsubscribe",void 0),a1(o1(n),"handlePersistorState",function(){var s=n.props.persistor,k=s.getState(),I=k.bootstrapped;I&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return FEe(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(le.PureComponent);a1(mW,"defaultProps",{children:null,loading:null});function UEe(e={}){const{nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}=e,[o,f]=le.useState(!1),y=le.useRef(r);y.current=r;const s=le.useRef(n);return s.current=n,le.useEffect(()=>{const k=document.createElement("script");return k.src="https://accounts.google.com/gsi/client",k.async=!0,k.defer=!0,k.nonce=t,k.onload=()=>{var I;f(!0),(I=y.current)===null||I===void 0||I.call(y)},k.onerror=()=>{var I;f(!1),(I=s.current)===null||I===void 0||I.call(s)},document.body.appendChild(k),()=>{document.body.removeChild(k)}},[t]),o}const VEe=le.createContext(null);function HEe({clientId:e,nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n,children:o}){const f=UEe({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:n}),y=le.useMemo(()=>({clientId:e,scriptLoadedSuccessfully:f}),[e,f]);return xn.createElement(VEe.Provider,{value:y},o)}var iM="persist:",sM="persist/FLUSH",r2="persist/REHYDRATE",oM="persist/PAUSE",aM="persist/PERSIST",lM="persist/PURGE",cM="persist/REGISTER",WEe=-1;function l1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l1=function(r){return typeof r}:l1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l1(e)}function aF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function GEe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aF(r,!0).forEach(function(n){XEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aF(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XEe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qEe(e,t,r,n){n.debug;var o=GEe({},r);return e&&l1(e)==="object"&&Object.keys(e).forEach(function(f){f!=="_persist"&&t[f]===r[f]&&(o[f]=e[f])}),o}function YEe(e){var t=e.blacklist||null,r=e.whitelist||null,n=e.transforms||[],o=e.throttle||0,f="".concat(e.keyPrefix!==void 0?e.keyPrefix:iM).concat(e.key),y=e.storage,s;e.serialize===!1?s=function(de){return de}:typeof e.serialize=="function"?s=e.serialize:s=ZEe;var k=e.writeFailHandler||null,I={},D={},N=[],U=null,q=null,Z=function(de){Object.keys(de).forEach(function(Ae){ie(Ae)&&I[Ae]!==de[Ae]&&N.indexOf(Ae)===-1&&N.push(Ae)}),Object.keys(I).forEach(function(Ae){de[Ae]===void 0&&ie(Ae)&&N.indexOf(Ae)===-1&&I[Ae]!==void 0&&N.push(Ae)}),U===null&&(U=setInterval(ae,o)),I=de};function ae(){if(N.length===0){U&&clearInterval(U),U=null;return}var he=N.shift(),de=n.reduce(function(Ae,Te){return Te.in(Ae,he,I)},I[he]);if(de!==void 0)try{D[he]=s(de)}catch(Ae){console.error("redux-persist/createPersistoid: error serializing state",Ae)}else delete D[he];N.length===0&&ve()}function ve(){Object.keys(D).forEach(function(he){I[he]===void 0&&delete D[he]}),q=y.setItem(f,s(D)).catch(W)}function ie(he){return!(r&&r.indexOf(he)===-1&&he!=="_persist"||t&&t.indexOf(he)!==-1)}function W(he){k&&k(he)}var K=function(){for(;N.length!==0;)ae();return q||Promise.resolve()};return{update:Z,flush:K}}function ZEe(e){return JSON.stringify(e)}function KEe(e){var t=e.transforms||[],r="".concat(e.keyPrefix!==void 0?e.keyPrefix:iM).concat(e.key),n=e.storage;e.debug;var o;return e.deserialize===!1?o=function(y){return y}:typeof e.deserialize=="function"?o=e.deserialize:o=JEe,n.getItem(r).then(function(f){if(f)try{var y={},s=o(f);return Object.keys(s).forEach(function(k){y[k]=t.reduceRight(function(I,D){return D.out(I,k,s)},o(s[k]))}),y}catch(k){throw k}else return})}function JEe(e){return JSON.parse(e)}function QEe(e){var t=e.storage,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:iM).concat(e.key);return t.removeItem(r,eTe)}function eTe(e){}function lF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lF(r,!0).forEach(function(n){tTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lF(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tTe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rTe(e,t){if(e==null)return{};var r=nTe(e,t),n,o;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(o=0;o<f.length;o++)n=f[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nTe(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,f;for(f=0;f<n.length;f++)o=n[f],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var iTe=5e3;function uM(e,t){var r=e.version!==void 0?e.version:WEe;e.debug;var n=e.stateReconciler===void 0?qEe:e.stateReconciler,o=e.getStoredState||KEe,f=e.timeout!==void 0?e.timeout:iTe,y=null,s=!1,k=!0,I=function(N){return N._persist.rehydrated&&y&&!k&&y.update(N),N};return function(D,N){var U=D||{},q=U._persist,Z=rTe(U,["_persist"]),ae=Z;if(N.type===aM){var ve=!1,ie=function(Ue,Pe){ve||(N.rehydrate(e.key,Ue,Pe),ve=!0)};if(f&&setTimeout(function(){!ve&&ie(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},f),k=!1,y||(y=YEe(e)),q)return Zc({},t(ae,N),{_persist:q});if(typeof N.rehydrate!="function"||typeof N.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return N.register(e.key),o(e).then(function(Te){var Ue=e.migrate||function(Pe,$e){return Promise.resolve(Pe)};Ue(Te,r).then(function(Pe){ie(Pe)},function(Pe){ie(void 0,Pe)})},function(Te){ie(void 0,Te)}),Zc({},t(ae,N),{_persist:{version:r,rehydrated:!1}})}else{if(N.type===lM)return s=!0,N.result(QEe(e)),Zc({},t(ae,N),{_persist:q});if(N.type===sM)return N.result(y&&y.flush()),Zc({},t(ae,N),{_persist:q});if(N.type===oM)k=!0;else if(N.type===r2){if(s)return Zc({},ae,{_persist:Zc({},q,{rehydrated:!0})});if(N.key===e.key){var W=t(ae,N),K=N.payload,he=n!==!1&&K!==void 0?n(K,D,W,e):W,de=Zc({},he,{_persist:Zc({},q,{rehydrated:!0})});return I(de)}}}if(!q)return t(D,N);var Ae=t(ae,N);return Ae===ae?D:I(Zc({},Ae,{_persist:q}))}}function cF(e){return aTe(e)||oTe(e)||sTe()}function sTe(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function oTe(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function aTe(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function uF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uF(r,!0).forEach(function(n){lTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uF(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lTe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gW={registry:[],bootstrapped:!1},cTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gW,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case cM:return tI({},t,{registry:[].concat(cF(t.registry),[r.key])});case r2:var n=t.registry.indexOf(r.key),o=cF(t.registry);return o.splice(n,1),tI({},t,{registry:o,bootstrapped:o.length===0});default:return t}};function uTe(e,t,r){var n=r||!1,o=DR(cTe,gW,t&&t.enhancer?t.enhancer:void 0),f=function(I){o.dispatch({type:cM,key:I})},y=function(I,D,N){var U={type:r2,payload:D,err:N,key:I};e.dispatch(U),o.dispatch(U),n&&s.getState().bootstrapped&&(n(),n=!1)},s=tI({},o,{purge:function(){var I=[];return e.dispatch({type:lM,result:function(N){I.push(N)}}),Promise.all(I)},flush:function(){var I=[];return e.dispatch({type:sM,result:function(N){I.push(N)}}),Promise.all(I)},pause:function(){e.dispatch({type:oM})},persist:function(){e.dispatch({type:aM,register:f,rehydrate:y})}});return t&&t.manualPersist||s.persist(),s}var hM={},dM={};dM.__esModule=!0;dM.default=fTe;function c1(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c1=function(r){return typeof r}:c1=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},c1(e)}function IE(){}var hTe={getItem:IE,setItem:IE,removeItem:IE};function dTe(e){if((typeof self>"u"?"undefined":c1(self))!=="object"||!(e in self))return!1;try{var t=self[e],r="redux-persist ".concat(e," test");t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch{return!1}return!0}function fTe(e){var t="".concat(e,"Storage");return dTe(t)?self[t]:hTe}hM.__esModule=!0;hM.default=gTe;var pTe=mTe(dM);function mTe(e){return e&&e.__esModule?e:{default:e}}function gTe(e){var t=(0,pTe.default)(e);return{getItem:function(n){return new Promise(function(o,f){o(t.getItem(n))})},setItem:function(n,o){return new Promise(function(f,y){f(t.setItem(n,o))})},removeItem:function(n){return new Promise(function(o,f){o(t.removeItem(n))})}}}var n2=void 0,yTe=xTe(hM);function xTe(e){return e&&e.__esModule?e:{default:e}}var vTe=(0,yTe.default)("local");n2=vTe;const bTe={key:"userAuth",storage:n2,version:1},_Te={key:"driverAuth",storage:n2,version:1},wTe={key:"adminAuth",storage:n2,version:1},STe=uM(bTe,W8.reducer),CTe=uM(_Te,X8.reducer),kTe=uM(wTe,q8.reducer),yW=S1e({reducer:{user:STe,driver:CTe,admin:kTe},middleware:e=>e({serializableCheck:{ignoredActions:[sM,r2,oM,aM,lM,cM]}})}),ETe=uTe(yW);RE.createRoot(document.getElementById("root")).render(A.jsx(rhe,{store:yW,children:A.jsx(mW,{persistor:ETe,children:A.jsx(HEe,{clientId:"901011445937-uvs5t6kpl515ic9pbm9p0q832i4r1i6m.apps.googleusercontent.com",children:A.jsx(NEe,{})})})}));export{Cv as B,ed as Q,Zr as _,$i as a,Vi as b,Au as c,us as d,Ia as e,Pa as f,vbe as g,rn as h,gc as i,A as j,al as k,Wh as l,le as r,cd as u};
