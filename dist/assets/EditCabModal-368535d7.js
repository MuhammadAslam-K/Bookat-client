import{r as m,e as u,f as x,h,u as P,c as v,a as w,g,_ as i,i as j,k as N,j as a}from"./index-fa6f2772.js";/* empty css               */function k({handleCabEditResult:d,cabId:p}){const[l,c]=m.useState(null),o="pl-2 outline-none border-2 w-full rounded-lg p-2.5 sm:text-sm",n="pl-2 outline-none border-2 border-red-400 w-full rounded-lg p-2.5 sm:text-sm";m.useEffect(()=>{b()},[]);const b=async()=>{try{const r=await u.get(`${x.getCabWithId}/${p}`);console.log("response:",r);const s={cabId:r.data._id,cabType:r.data.cabType,maxPersons:r.data.maxPersons,pricePerKm:r.data.price,image:r.data.image};e.setValues(s)}catch(r){h(r)}},f=r=>{const s=r.target.files&&r.target.files[0];if(s){const t=new FileReader;t.onloadend=()=>{e.setFieldValue("image",t.result),c(s.name)},t.readAsDataURL(s)}else c(null)},e=P({initialValues:{cabType:"",maxPersons:"",pricePerKm:"",image:""},validationSchema:v({cabType:w().max(10,"Enter a valid Input").required("Please Enter value"),maxPersons:g().min(2,"Enter a valid Input").max(10,"Enter a valid Input").required("Please Enter value"),pricePerKm:g().min(50,"Enter a valid Input").max(500,"Enter a valid Input").required("Please Enter value")}),onSubmit:r=>{y(r)}}),y=async r=>{try{if(i.loading("Submitting the form please wait...",{style:j}),l&&l!==r.image){console.log("aadhar before",r.image);const t=await N(r.image,l,"admin","cab");e.setFieldValue("image",t)}const s=await u.post(x.addCab,r);console.log("response",s),console.log(s.data),i.dismiss(),d()}catch(s){i.dismiss(),h(s)}};return a.jsx("div",{children:a.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[a.jsx("div",{className:"modal-overlay fixed inset-0 bg-black opacity-50"}),a.jsxs("form",{className:"modal-content lg:w-3/12 w-full bg-white p-6 rounded-lg shadow-lg z-50",onSubmit:e.handleSubmit,children:[a.jsx("h1",{className:"text-center font-semibold text-2xl",children:"Add New Cab Type"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"maxPersons",className:"block text-sm font-medium text-gray-700",children:"Cab Type"}),a.jsx("input",{type:"text",name:"cabType",placeholder:"Cab Type",required:!0,value:e.values.cabType,onChange:e.handleChange,onBlur:e.handleBlur,className:e.touched.cabType&&e.errors.cabType?n:o}),e.touched.cabType&&e.errors.cabType&&a.jsx("div",{className:"text-red-500 text-xs",children:e.errors.cabType})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"maxPersons",className:"block text-sm font-medium text-gray-700",children:"Max Persons"}),a.jsx("input",{type:"text",name:"maxPersons",placeholder:"Max Persons",required:!0,value:e.values.maxPersons,onChange:e.handleChange,onBlur:e.handleBlur,className:e.touched.maxPersons&&e.errors.maxPersons?n:o}),e.touched.maxPersons&&e.errors.maxPersons&&a.jsx("div",{className:"text-red-500 text-xs",children:e.errors.maxPersons})]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"maxPersons",className:"block text-sm font-medium text-gray-700",children:"Price Per KM"}),a.jsx("input",{type:"text",name:"pricePerKm",placeholder:"Price Per KM",required:!0,value:e.values.pricePerKm,onChange:e.handleChange,onBlur:e.handleBlur,className:e.touched.pricePerKm&&e.errors.pricePerKm?n:o}),e.touched.pricePerKm&&e.errors.pricePerKm&&a.jsx("div",{className:"text-red-500 text-xs",children:e.errors.pricePerKm})]}),a.jsx("div",{className:"mb-6 flex space-x-20",children:a.jsxs("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide border border-blue cursor-pointer hover:bg-slate-100",children:[a.jsx("img",{src:e.values.image,alt:"unable To load"}),a.jsx("input",{type:"file",name:"image",required:!0,className:"hidden",onChange:f})]})}),a.jsxs("div",{className:"flex",children:[a.jsx("button",{type:"submit",className:"text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2 ",children:"Submit"}),a.jsx("p",{onClick:d,className:"cursor-pointer text-white bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 shadow-lg shadow-red-500/50 dark:shadow-lg dark:shadow-red-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2",children:"Cancel"})]})]})]})})}export{k as default};
